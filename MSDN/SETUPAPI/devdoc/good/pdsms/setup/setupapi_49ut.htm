<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating a Custom Queue Callback Routine</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_setupapi_creating_a_custom_queue_callback_routine"></a>Creating a Custom Queue Callback Routine</h3>
<p>
In addition to using the default queue callback, you can write a custom callback routine. This function must have the same form as those pointed to by <a href="setupapi_7k8b.htm"><b>SP_FILE_CALLBACK</b></a>. This is useful if you need a callback routine to handle a notification in a manner other than that provided by the default queue callback routine.</p>
<p>
If only a small portion of the default queue callback routine's behavior needs to be changed, you can create a custom callback routine to filter the notifications, handling only those that require special behavior and calling <a href="setupapi_5x63.htm"><b>SetupDefaultQueueCallback</b></a><b> </b>for the others.</p>
<p>
For example, if you wanted to custom-handle file delete errors, you could create a custom callback function, <i>MyCallback</i>. This function would intercept and process <a href="setupapi_7wvm.htm">SPFILENOTIFY_DELETEERROR</a> notifications, and call the default queue callback function for all other notifications. <i>MyCallback</i> returns a value for the delete error notifications. For all other notifications, <i>MyCallback </i>passes whatever value the default queue callback routine returned to the queue.</p>
<p>
This flow of control is illustrated in the following diagram.</p>
<p>
<img src="images/callback.gif" border=0></p>
<p>
For an example of a setup application that uses a custom callback function, see the Win32 Code Samples.</p>
<p>
<b>Important</b>  If the custom callback function calls the default queue callback routine, it must pass the void pointer returned by <a href="setupapi_5sx7.htm"><b>SetupInitDefaultQueueCallback</b></a><b> </b>or <a href="setupapi_0tvc.htm"><b>SetupInitDefaultQueueCallbackEx</b></a> to the default callback routine.</p>
<p>&nbsp;</p></body>
</HTML>
