<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Input Stream Member Functions</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_iostream_input_stream_member_functions"></a><sup></sup>Input Stream Member Functions</h1>
<p>
Input stream member functions are used for disk input. The member functions include:
<ul type=disc>
<li>
<a href="_iostream_output_file_stream_member_functions.htm#_iostream_the_open_function_for_output_streams">The open Function</a><br><br></li>
<li>
<a href="#_iostream_the_get_function">The get Function</a><br><br></li>
<li>
<a href="#_iostream_the_getline_function">The getline Function</a><br><br></li>
<li>
<a href="#_iostream_the_read_function">The read Function</a><br><br></li>
<li>
<a href="#_iostream_the_seekg_and_tellg_functions">The seekg and tellg Functions</a><br><br></li>
<li>
<a href="_iostream_output_file_stream_member_functions.htm#_iostream_the_close_function_for_output_streams">The close Function</a></li>
</ul>

<h2><a name="_iostream_the_open_function_for_input_streams"></a><sup></sup>The open Function for Input Streams</h2>
<p>
If you are using an input file stream (<b>ifstream</b>), you must associate that stream with a specific disk file. You can do this in the constructor, or you can use the <b>open</b> function. In either case, the arguments are the same.</p>
<p>
You generally specify an <b>open_mode</b> flag when you open the file associated with an input stream (the default mode is <b>ios::in</b>). For a list of the <b>open_mode</b> flags, see <a href="_iostream_output_file_stream_member_functions.htm#_iostream_the_open_function_for_output_streams">The open Function</a>. The flags can be combined with the bitwise OR ( <b>|</b> ) operator.</p>
<p>
To read a file, first use the <b>fail</b> member function to determine whether it exists:</p>
<pre><code>istream ifile( "FILENAME", ios::nocreate );
if ( ifile.fail() )
// The file does not exist ...
</code></pre>

<h2><a name="_iostream_the_get_function"></a><sup></sup>The get Function</h2>
<p>
The unformatted <b>get</b> member function works like the <b>&gt;&gt;</b> operator with two exceptions. First, the <b>get</b> function includes white-space characters, whereas the extractor excludes white space when the <b>ios::skipws</b> flag is set (the default). Second, the <b>get</b> function is less likely to cause a tied output stream (<b>cout</b>, for example) to be flushed.</p>
<p>
A variation of the <b>get</b> function specifies a buffer address and the maximum number of characters to read. This is useful for limiting the number of characters sent to a specific variable, as this example shows:</p>
<pre><code>#include &lt;iostream.h&gt;

void main()
{
 &nbsp; char line[25];
 &nbsp; cout &lt;&lt; " Type a line terminated by carriage return\n&gt;";
 &nbsp; cin.get( line, 25 );
 &nbsp; cout &lt;&lt; ' ' &lt;&lt; line;
}
</code></pre>
<p>
In this example, you can type up to 24 characters and a terminating character. Any remaining characters can be extracted later.</p>

<h2><a name="_iostream_the_getline_function"></a><sup></sup>The getline Function</h2>
<p>
The <b>getline</b> member function is similar to the <b>get</b> function. Both functions allow a third argument that specifies the terminating character for input. The default value is the newline character. Both functions reserve one character for the required terminating character. However, <b>get</b> leaves the terminating character in the stream and <b>getline</b> removes the terminating character. </p>
<p>
The following example specifies a terminating character for the input stream:</p>
<pre><code>#include &lt;iostream.h&gt;

void main()
{
 &nbsp; char line[100];
 &nbsp; cout &lt;&lt; " Type a line terminated by 't'" &lt;&lt; endl;
 &nbsp; cin.getline( line, 100, 't' );
 &nbsp; cout &lt;&lt; line;
}
</code></pre>

<h2><a name="_iostream_the_read_function"></a><sup></sup>The read Function</h2>
<p>
The <b>read</b> member function reads bytes from a file to a specified area of memory. The length argument determines the number of bytes read. If you do not include that argument, reading stops when the physical end of file is reached or, in the case of a text-mode file, when an embedded <b>EOF</b> character is read.</p>
<p>
This example reads a binary record from a payroll file into a structure:</p>
<pre><code>#include &lt;fstream.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;io.h&gt;

void main()
{
 &nbsp; struct
 &nbsp; {
 &nbsp;&nbsp;&nbsp;&nbsp; double salary;
 &nbsp;&nbsp;&nbsp;&nbsp; char name[23];
 &nbsp; } employee;

 &nbsp; ifstream is( "payroll", ios::binary | ios::nocreate );
 &nbsp; if( is ) {&nbsp; // ios::operator void*()
 &nbsp;&nbsp;&nbsp;&nbsp; is.read( (char *) &amp;employee, sizeof( employee ) );
 &nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; employee.name &lt;&lt; ' ' &lt;&lt; employee.salary &lt;&lt; endl;
 &nbsp; }
 &nbsp; else {
 &nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; "ERROR: Cannot open file 'payroll'." &lt;&lt; endl;
 &nbsp; }
}
</code></pre>
<p>
The program assumes that the data records are formatted exactly as specified by the structure with no terminating carriage-return or linefeed characters.</p>

<h2><a name="_iostream_the_seekg_and_tellg_functions"></a><sup></sup>The seekg and tellg Functions</h2>
<p>
Input file streams keep an internal pointer to the position in the file where data is to be read next. You set this pointer with the <b>seekg</b> function, as shown here:</p>
<pre><code>#include &lt;fstream.h&gt;

void main()
{
 &nbsp; char ch;

 &nbsp; ifstream tfile( "payroll", ios::binary | ios::nocreate );
 &nbsp; if( tfile ) {
 &nbsp;&nbsp;&nbsp;&nbsp; tfile.seekg( 8 );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Seek 8 bytes in (past salary)
 &nbsp;&nbsp;&nbsp;&nbsp; while ( tfile.good() ) { // EOF or failure stops the reading
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tfile.get( ch );
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( !ch ) break; // quit on null
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; ch;
 &nbsp;&nbsp;&nbsp;&nbsp; }
 &nbsp; }
 &nbsp; else {
 &nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; "ERROR: Cannot open file 'payroll'." &lt;&lt; endl;
 &nbsp; }
}
</code></pre>
<p>
To use <b>seekg</b> to implement record-oriented data management systems, multiply the fixed-length record size by the record number to obtain the byte position relative to the end of the file, then use the <b>get</b> object to read the record.</p>
<p>
The <b>tellg</b> member function returns the current file position for reading. This value is of type <b>streampos</b>, a <b>typedef</b> defined in IOSTREAM.H. The following example reads a file and displays messages showing the positions of spaces.</p>
<pre><code>#include &lt;fstream.h&gt;

void main()
{
 &nbsp; char ch;
ifstream tfile( "payroll", ios::binary | ios::nocreate );
 &nbsp; if( tfile ) {
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ( tfile.good() ) {
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; streampos here = tfile.tellg();
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tfile.get( ch );
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( ch == ' ' )
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; "\nPosition " &lt;&lt; here &lt;&lt; " is a space";
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 &nbsp; }
 &nbsp; else {
 &nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt; "ERROR: Cannot open file 'payroll'." &lt;&lt; endl;
 &nbsp; }
}
</code></pre>

<h2><a name="_iostream_the_close_function_for_input_streams"></a><sup></sup>The close Function for Input Streams</h2>
<p>
The <b>close</b> member function closes the disk file associated with an input file stream and frees the operating system file handle. The <a href="_iostream_ifstream.htm">ifstream</a> destructor closes the file for you (unless you called the <b>attach</b> function or passed your own file descriptor to the constructor), but you can use the <b>close</b> function if you need to open another file for the same stream object.</p>
</font></BODY>
</HTML>
