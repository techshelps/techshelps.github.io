<html>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css">
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>mbsrtowcs</title></head>
<body bgcolor=white>

<h2><a name="mbsrtowcs">mbsrtowcs</a></h2>
<META NAME="MS-HKWD" CONTENT="mbsrtowcs">
<p><code>size_t </code><code><b>mbsrtowcs</b></code><code>(wchar_t *dst, const char **src, size_t len, mbstate_t *ps); </code></p>
<p>The function converts the multibyte string beginning at <code>*src</code> to a sequence of wide characters as if by repeated calls of 
the form:</p>
<p><code>x = mbrtowc(dst, *src, n, ps != 0 ? ps : &amp;internal) </code></p>
<p>where <code>n</code> is some value &gt; 0 and <code>internal</code> is an object of type <a href="wchar_mbstate_t.htm#mbstate_t"><code>mbstate_t</code></a> internal to the <code>mbsrtowcs</code> function. At 
program startup, <code>internal</code> is initialized to the initial conversion state. No other library function alters the value stored 
in <code>internal</code>.</p>
<p>If <code>dst</code> is not a null pointer, the <code>mbsrtowcs</code> function stores <code>len</code> wide characters , at most, by calls to <a href="wchar_mbrtowc.htm#mbrtowc"><code>mbrtowc</code></a>. The 
function effectively increments <code>dst</code> by one and <code>*src</code> by <code>x</code> after each call to <a href="wchar_mbrtowc.htm#mbrtowc"><code>mbrtowc</code></a> that stores a converted wide 
character. After a call that returns zero, <code>mbsrtowcs</code> stores a null wide character at <code>dst</code> and stores a null pointer at 
<code>*src</code>.</p>
<p>If <code>dst</code> is a null pointer, <code>len</code> is effectively assigned a large value.</p>
<p>The function returns:</p>
<ul>
<li><code>(</code><code>size_t</code><code>)-1</code>, if a call to <a href="wchar_mbrtowc.htm#mbrtowc"><code>mbrtowc</code></a> returns <code>(</code><code>size_t</code><code>)-1</code>, indicating that it has detected an encoding error before 
completing the next multibyte character. </li>
<li>The number of multibyte characters successfully converted, not including the terminating null character. </li>
</ul>
</body>
</html>
