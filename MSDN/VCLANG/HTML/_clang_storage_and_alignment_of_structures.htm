<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Storage and Alignment of Structures</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_clang_storage_and_alignment_of_structures"></a><sup></sup>Storage and Alignment of Structures</h1>
<p>
<b>Microsoft Specific —&gt;</b></p>
<p>
Structure members are stored sequentially in the order in which they are declared: the first member has the lowest memory address and the last member the highest. </p>
<p>
Every data object has an <i>alignment-requirement</i>. For structures, the requirement is the largest of its members. Every object is allocated an <i>offset</i> so that</p>
<p>
<i>offset</i> <b>%</b> <i>alignment-requirement</i> <b>==</b> 0</p>
<p>
Adjacent bit fields are packed into the same 1-, 2-, or 4-byte allocation unit if the integral types are the same size and if the next bit field fits into the current allocation unit without crossing the boundary imposed by the common alignment requirements of the bit fields. </p>
<p>
To conserve space or to conform to existing data structures, you may want to store structures more or less compactly. The <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_.2f.Zp">
</object><a href=JavaScript:alink_1.Click()>/Zp</a>[<i>n</i>] compiler option and the <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_predir_pack">
</object><a href=JavaScript:alink_2.Click()>#pragma pack</a> control how structure data is “packed” into memory. When you use the /Zp[<i>n</i>] option, where <i>n</i> is 1, 2, 4, 8, or 16, each structure member after the first is stored on byte boundaries that are either the alignment requirement of the field or the packing size (<i>n</i>), whichever is smaller. Expressed as a formula, the byte boundaries are the </p>
<p>
min( <i>n</i>, <b>sizeof</b>( <i>item</i> ) )</p>
<p>
where <i>n</i> is the packing size expressed with the /Zp[<i>n</i>] option and <i>item</i> is the structure member. The default packing size is /Zp8.</p>
<p>
To use the <b>pack</b> pragma to specify packing other than the packing specified on the command line for a particular structure, give the <b>pack</b> pragma, where the packing size is 1, 2, 4, 8, or 16, before the structure. To reinstate the packing given on the command line, specify the <b>pack</b> pragma with no arguments. </p>
<p>
Bit fields default to size <b>long</b> for the Microsoft C compiler. Structure members are aligned on the size of the type or the /Zp[<i>n</i>] size, whichever is smaller. The default size is 4.</p>
<p>
<b>END Microsoft Specific</b></p>
</font></BODY>
</HTML>
