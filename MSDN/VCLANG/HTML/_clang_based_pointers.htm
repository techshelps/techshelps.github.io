<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Based Pointers</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_clang_based_pointers"></a><sup></sup>Based Pointers</h1>
<p>
<b>Microsoft Specific —&gt;</b></p>
<p>
For the Microsoft 32-bit C compiler, a based pointer is a 32-bit offset from a 32-bit pointer base. Based addressing is useful for exercising control over sections where objects are allocated, thereby decreasing the size of the executable file and increasing execution speed. In general, the form for specifying a based pointer is</p>
<p>
<i>type</i> <b>__based(</b> <i>base</i> <b>)</b> <i>declarator</i> </p>
<p>
The “based on pointer” variant of based addressing enables specification of a pointer as a base. The based pointer, then, is an offset into the memory section starting at the beginning of the pointer on which it is based. Pointers based on pointer addresses are the only form of the <b>__based</b> keyword valid in 32-bit compilations. In such compilations, they are 32-bit displacements from a 32-bit base.</p>
<p>
One use for pointers based on pointers is for persistent identifiers that contain pointers. A linked list that consists of pointers based on a pointer can be saved to disk, then reloaded to another place in memory, with the pointers remaining valid. </p>
<p>
The following example shows a pointer based on a pointer.</p>
<pre><code>void *vpBuffer;

struct llist_t
{
 &nbsp;&nbsp; void __based( vpBuffer ) *vpData;
 &nbsp;&nbsp; struct llist_t __based( vpBuffer ) *llNext;
};
</code></pre>
<p>
The pointer <code>vpBuffer</code> is assigned the address of memory allocated at some later point in the program. The linked list is relocated relative to the value of <code>vpBuffer</code>.</p>
<p>
<b>END Microsoft Specific</b></p>
</font></BODY>
</HTML>
