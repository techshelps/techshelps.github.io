<html>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css">
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Stream States</title></head>
<body bgcolor=white>

<h2><a name="Stream States">Stream States</a></h2>
<META NAME="MS-HKWD" CONTENT="stream states">
<p>The valid states, and state transitions, for a stream are:</p>
<p><img src="stream.gif" align=bottom></p>
<p>Each of the circles denotes a stable state. Each of the lines denotes a transition that can occur as the result of a function 
call that operates on the stream. Five groups of functions can cause state transitions.</p>
<p>Functions in the first three groups are declared in <code>&lt;stdio.h&gt;</code>:</p>
<ul>
<li>The <a name="byte read functions"><b>byte read functions</b></a> -- <code>fgetc</code>, <code>fgets</code>, <code>fread</code>, <code>fscanf</code>, <code>getc</code>, <code>getchar</code>, <code>gets</code>, <code>scanf</code>, and <code>ungetc</code> </li>
<li>The <a name="byte write functions"><b>byte write functions</b></a> -- <code>fprintf</code>, <code>fputc</code>, <code>fputs</code>, <code>fwrite</code>, <code>printf</code>, <code>putc</code>, <code>putchar</code>, <code>puts</code>, <code>vfprintf</code>, 
and <code>vprintf</code> </li>
<li>The <a name="position functions"><b>position functions</b></a> -- <code>fflush</code>, <code>fseek</code>, <code>fsetpos</code>, and <code>rewind</code> </li>
</ul>
<p>Functions in the remaining two groups are declared in <code>&lt;wchar.h&gt;</code>:</p>
<ul>
<li>The <a name="wide read functions"><b>wide read functions</b></a> -- <code>fgetwc</code>, <code>fgetws</code>, <code>fwscanf</code>, <code>getwc</code>, <code>getwchar</code>, <code>ungetwc</code>, and <code>wscanf</code>, </li>
<li>The <a name="wide write functions"><b>wide write functions</b></a> -- <code>fwprintf</code>, <code>fputwc</code>, <code>fputws</code>, <code>putwc</code>, <code>putwchar</code>, <code>vfwprintf</code>, <code>vwprintf</code>, and 
<code>wprintf</code> </li>
</ul>
<p>For the stream <code>s</code>, the call <a href="wchar_fwide.htm#fwide"><code>fwide</code></a><code>(s, 0)</code> is always valid and never causes a change of state. Any other call to <a href="wchar_fwide.htm#fwide"><code>fwide</code></a>, 
or to any of the five groups of functions described above, causes the state transition shown in the state diagram. If no 
such transition is shown, the function call is invalid.</p>
<p>The state diagram shows how to establish the orientation of a stream:</p>
<ul>
<li>The call <a href="wchar_fwide.htm#fwide"><code>fwide</code></a><code>(s, -1)</code>, or to a byte read or byte write function, establishes the stream as <a href="LIB_FILE.htm#byte oriented">byte-oriented</a>. </li>
<li>The call <a href="wchar_fwide.htm#fwide"><code>fwide</code></a><code>(s, 1)</code>, or to a wide read or wide write function, establishes the stream as <a href="LIB_FILE.htm#wide oriented">wide-oriented</a>. </li>
</ul>
<p>The state diagram also shows that you must call one of the position functions between most write and read operations:</p>
<ul>
<li>You cannot call a read function if the last operation on the stream was a write. </li>
<li>You cannot call a write function if the last operation on the stream was a read, unless that read operation set the 
<a href="LIB_FILE_Controlling_Streams.htm#end-of-file indicator">end-of-file indicator</a>. </li>
</ul>
<p>Finally, the state diagram shows that a position operation never decreases the number of valid function calls that can 
follow.</p>
</body>

</html>
