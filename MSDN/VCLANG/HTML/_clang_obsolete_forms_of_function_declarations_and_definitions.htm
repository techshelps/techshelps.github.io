<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Obsolete Forms of Function Declarations and Definitions</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_clang_obsolete_forms_of_function_declarations_and_definitions"></a><sup></sup>Obsolete Forms of Function Declarations and Definitions</h1>
<p>
The old-style function declarations and definitions use slightly different rules for declaring parameters than the syntax recommended by the ANSI C standard. First, the old-style declarations don’t have a parameter list. Second, in the function definition, the parameters are listed, but their types are not declared in the parameter list. The type declarations precede the compound statement constituting the function body. The old-style syntax is obsolete and should not be used in new code. Code using the old-style syntax is still supported, however. This example illustrates the obsolete forms of declarations and definitions:&nbsp; </p>
<pre><code>double old_style();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Obsolete function declaration */

double alt_style( a , real )&nbsp; /* Obsolete function definition */
 &nbsp;&nbsp; double *real; 
 &nbsp;&nbsp; int a; 
{
 &nbsp;&nbsp; return ( *real + a ) ;
}
</code></pre>
<p>
Functions returning an integer or pointer with the same size as an <b>int</b> are not required to have a declaration although the declaration is recommended. </p>
<p>
To comply with the ANSI C standard, old-style function declarations using an ellipsis now generate an error when compiling with the /Za option and a level 4 warning when compiling with /Ze. For example:</p>
<pre><code>void funct1( a, ... )&nbsp; /* Generates a warning under /Ze or */
int a;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* an error when compiling with /Za */
{
}
</code></pre>
<p>
You should rewrite this declaration as a prototype:</p>
<pre><code>void funct1( int a, ... )
{
}
</code></pre>
<p>
Old-style function declarations also generate warnings if you subsequently declare or define the same function with either an ellipsis or a parameter with a type that is not the same as its promoted type. </p>
<p>
The next section, <a href="_clang_c_function_definitions.htm">C Function Definitions</a>, shows the syntax for function definitions, including the old-style syntax. The nonterminal for the list of parameters in the old-style syntax is <i>identifier-list</i>.</p>
</font></BODY>
</HTML>
