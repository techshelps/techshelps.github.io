<html>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css">
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>wcrtomb</title></head>
<body bgcolor=white>

<h2><a name="wcrtomb">wcrtomb</a></h2>
<META NAME="MS-HKWD" CONTENT="wcrtomb">
<p><code>size_t </code><code><b>wcrtomb</b></code><code>(char *s, wchar_t wc, mbstate_t *ps); </code></p>
<p>The function determines the number of bytes needed to represent the wide character <code>wc</code> as a multibyte character, if 
possible. (Not all values representable as type <code>wchar_t</code> are necessarily valid wide-character codes.)</p>
<p>If <code>ps</code> is not a null pointer, the conversion state for the multibyte string is assumed to be <code>*ps</code>. Otherwise, it is assumed to 
be <code>&amp;internal</code>, where <code>internal</code> is an object of type <a href="wchar_mbstate_t.htm#mbstate_t"><code>mbstate_t</code></a> internal to the <code>wcrtomb</code> function. At program 
startup, <code>internal</code> is initialized to the initial conversion state. No other library function alters the value stored in 
<code>internal</code>.</p>
<p>If <code>s</code> is not a null pointer and <code>wc</code> is a valid wide-character code, the function determines <code>x,</code> the number of bytes needed 
to represent <code>wc</code> as a multibyte character, and stores the converted bytes in the array of <i>char</i> beginning at <code>s</code>. (<code>x</code> cannot 
be greater than <code>MB_CUR_MAX</code>.) If <code>wc</code> is a null wide character, the function stores any shift sequence needed to restore 
the initial shift state, followed by a null byte. The resulting conversion state is the initial conversion state.</p>
<p>If <code>s</code> is a null pointer, the function effectively returns <code>wcrtomb(buf, L'\0', ps)</code>, where <code>buf</code> is a buffer internal to the 
function. (The function thus returns the number of bytes needed to restore the initial conversion state and to terminate 
the multibyte string pending from a previous call to <code>wcrtomb</code> or <a href="wchar_wcsrtombs.htm#wcsrtombs"><code>wcsrtombs</code></a> for the same string and conversion state.)</p>
<p>The function returns:</p>
<ul>
<li><code>(</code><code>size_t</code><code>)-1</code> if <code>wc</code> is an invalid wide-character code, in which case the function stores the value <code>EILSEQ</code> in 
<code>errno</code> and leaves the resulting conversion state undefined. </li>
<li><code>x</code>, the number of bytes needed to complete the next muitibyte character, in which case the resulting conversion state indicates that <code>x</code> bytes have been generated. </li>
</ul>

</body>
</html>
