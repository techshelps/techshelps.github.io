<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>General Rules for Operator Overloading</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_pluslang_general_rules_for_operator_overloading"></a><sup></sup>General Rules for Operator Overloading</h1>
<p>
The following rules constrain how overloaded operators are implemented. However, they do not apply to the <a href="_pluslang_new_operator.htm">new</a> and <a href="_pluslang_delete_operator.htm">delete</a> operators, which are covered separately in Chapter 4.
<ul type=disc>
<li>
Operators must either be class member functions or take an argument that is of class or enumerated type or arguments that are references to class or enumerated types. For example:<pre><code>class Point
{
public:
 &nbsp;&nbsp; Point operator&lt;( Point &amp; );&nbsp; // Declare a member operator 
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; overload.
 &nbsp;&nbsp; ...
 &nbsp;&nbsp; // Declare addition operators.
 &nbsp;&nbsp; friend Point operator+( Point&amp;, int );
 &nbsp;&nbsp; friend Point operator+( int, Point&amp; );
};
</code></pre>
<p class=tl>
The preceding code sample declares the less-than operator as a member function; however, the addition operators are declared as global functions that have friend access. Note that more than one implementation can be provided for a given operator. In the case of the preceding addition operator, the two implementations are provided to facilitate commutativity. It is just as likely that operators that add a <code>Point</code> to a <code>Point</code>, <code>int</code> to a <code>Point</code>, and so on, might be implemented.</P></li>
<li>
Operators obey the precedence, grouping, and number of operands dictated by their typical use with built-in types. Therefore, there is no way to express the concept “add 2 and 3 to an object of type <code>Point</code>,” expecting 2 to be added to the <i>x</i> coordinate and 3 to be added to the <i>y</i> coordinate.<br><br></li>
<li>
Unary operators declared as member functions take no arguments; if declared as global functions, they take one argument.<br><br></li>
<li>
Binary operators declared as member functions take one argument; if declared as global functions, they take two arguments.<br><br></li>
<li>
Overloaded operators cannot have default arguments.<br><br></li>
<li>
All overloaded operators except assignment (<b>operator=</b>) are inherited by derived classes.<br><br></li>
<li>
The first argument for member-function overloaded operators is always of the class type of the object for which the operator is invoked (the class in which the operator is declared, or a class derived from that class). No conversions are supplied for the first argument.</li>
</ul>
<p>
Note that the meaning of any of the operators can be changed completely. That includes the meaning of the address-of (<b>&amp;</b>), assignment (<b>=</b>), and function-call operators. Also, identities that can be relied upon for built-in types can be changed using operator overloading. For example, the following four statements are usually equivalent when completely evaluated:</p>
<pre><code>var = var + 1;
var += 1;
var++;
++var;
</code></pre>
<p>
This identity cannot be relied upon for class types that overload operators. Moreover, some of the requirements implicit in the use of these operators for basic types are relaxed for overloaded operators. For example, the addition/assignment operator, <b>+=</b>, requires the left operand to be an l-value when applied to basic types; there is no such requirement when the operator is overloaded.</p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;For consistency, it is often best to follow the model of the built-in types when defining overloaded operators. If the semantics of an overloaded operator differ significantly from its meaning in other contexts, it can be more confusing than useful.</p>
</font></BODY>
</HTML>
