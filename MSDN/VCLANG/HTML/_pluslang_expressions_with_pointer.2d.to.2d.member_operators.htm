<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Expressions with Pointer-to-Member Operators</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_pluslang_expressions_with_pointer.2d.to.2d.member_operators"></a><sup></sup>Expressions with Pointer-to-Member Operators</h1>
<p>
The pointer-to-member operators, .* and –&gt;*, return the value of a specific class member for the object specified on the left side of the expression. The following example shows how to use these operators:</p>
<pre><code>#include &lt;iostream.h&gt;

class Window
{
public:
 &nbsp;&nbsp; void Paint(); // Causes window to repaint.
 &nbsp;&nbsp; int WindowId;
};

// Define derived types pmfnPaint and pmWindowId.
// These types are pointers to members Paint() and
// WindowId, respectively.
void (Window::*pmfnPaint)() = &amp;Window::Paint;
int Window::*pmWindowId = &amp;Window::WindowId;

void main()
{
 &nbsp;&nbsp; Window AWindow;
 &nbsp;&nbsp; Window *pWindow = new Window;
// Invoke the Paint function normally, then use pointer to member.
 &nbsp;&nbsp; AWindow.Paint();
 &nbsp;&nbsp; (AWindow.*pmfnPaint)();

 &nbsp;&nbsp; pWindow-&gt;Paint();
 &nbsp;&nbsp; (pWindow-&gt;*pmfnPaint)(); // Parentheses required since * binds
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; less tightly than the function call.

 &nbsp;&nbsp; int Id;
 &nbsp;&nbsp; // Retrieve window id.
 &nbsp;&nbsp; Id = AWindow.*pmWindowId;
 &nbsp;&nbsp; Id = pWindow-&gt;*pmWindowId;
}
</code></pre>
<p>
In the preceding example, a pointer to a member, <code>pmfnPaint</code>, is used to invoke the member function <code>Paint</code>. Another pointer to a member, <code>pmWindowId</code>, is used to access the <code>WindowId</code> member.</p>
<p class=label>
<b>Syntax</b></p>
<p class=dt>
<i>pm-expression</i> :</p>
<p class=indent>
<i>cast-expression</i><br>
<i>pm-expression</i> .* <i>cast-expression</i><br>
<i>pm-expression</i> –&gt;* <i>cast-expression</i></p>
<p>
The binary operator .* combines its first operand, which must be an object of class type, with its second operand, which must be a pointer-to-member type. </p>
<p>
The binary operator –&gt;* combines its first operand, which must be a pointer to an object of class type, with its second operand, which must be a pointer-to-member type.</p>
<p>
In an expression containing the .* operator, the first operand must be of the class type of, and be accessible to, the pointer to member specified in the second operand or of an accessible type unambiguously derived from and accessible to that class.</p>
<p>
In an expression containing the –&gt;* operator, the first operand must be of the type “pointer to the class type” of the type specified in the second operand, or it must be of a type unambiguously derived from that class.</p>
<p>
Consider the following classes and program fragment:</p>
<pre><code>class BaseClass
{
public:
 &nbsp;&nbsp; BaseClass(); // Base class constructor.
 &nbsp;&nbsp; void Func1();
};

// Declare a pointer to member function Func1.
void (BaseClass::*pmfnFunc1)() = &amp;BaseClass::Func1;

class Derived : public BaseClass
{
public:
 &nbsp;&nbsp; Derived();&nbsp; // Derived class constructor.
 &nbsp;&nbsp; void Func2();
};

// Declare a pointer to member function Func2.
void (Derived::*pmfnFunc2)() = &amp;Derived::Func2;

void main()
{
 &nbsp;&nbsp; BaseClass ABase;
 &nbsp;&nbsp; Derived ADerived;

 &nbsp;&nbsp; (ABase.*pmfnFunc1)();&nbsp;&nbsp;&nbsp; // OK: defined for BaseClass.
 &nbsp;&nbsp; (ABase.*pmfnFunc2)();&nbsp;&nbsp;&nbsp; // Error: cannot use base class to
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; access pointers to members of
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; derived classes. 
 &nbsp;&nbsp; (ADerived.*pmfnFunc1)(); // OK: Derived is unambiguously
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; derived from BaseClass. 
 &nbsp;&nbsp; (ADerived.*pmfnFunc2)(); // OK: defined for Derived.
}
</code></pre>
<p>
The result of the .* or –&gt;* pointer-to-member operators is an object or function of the type specified in the declaration of the pointer to member. So, in the preceding example, the result of the expression <code>ADerived.*pmfnFunc1()</code> is a pointer to a function that returns void. This result is an l-value if the second operand is an l-value.</p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;If the result of one of the pointer-to-member operators is a function, then the result can be used only as an operand to the function call operator.</p>
</font></BODY>
</HTML>
