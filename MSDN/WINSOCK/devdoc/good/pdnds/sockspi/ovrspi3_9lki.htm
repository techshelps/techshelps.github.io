<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>QOS Updates</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_qos_updates_2"></a>QOS Updates</h3>
<p>
After every connection attempt (successful or otherwise) transport providers update the associated flow spec structures in order to indicate, as well as possible, the existing network conditions. (Note that it is legal to update with the default values defined below to indicate that information about the current network conditions is not available.) This update from the service provider about current network conditions is especially useful for the case where the client's QOS request consisted entirely of the default (i.e. unspecified) values, which any service provider should be able to agree to. Clients expect to be able to use this information about current network conditions to guide their use of the network, including any subsequent QOS requests. Note however, that information provided by the transport service provider in the updated flow spec structure is only a hint and may be little more than a rough estimate that only applies to the first hop as opposed to the complete end-to-end connection. </p>
<p>
Even after a flow is established, conditions in the network may change or one of the communicating parties may invoke a QOS renegotiation which results in a reduction (or increase) in the available service level. A notification mechanism is included which utilizes the usual Windows Sockets notification techniques for network events (FD_QOS and FD_GROUP_QOS events) to allow the service provider to indicate to the client that QOS levels have changed. The basic guideline for a service provider to generate FD_QOS/FD_GROUP_QOS notifications is when the current level of service supported is significantly different (especially, in the negative direction) from what was last reported. The client should use <a href="wsspiref_9baq.htm"><b>WSPIoctl</b></a> with SIO_GET_QOS and/or SIO_GET_GROUP_QOS to retrieve the corresponding <a href="../sock2/strucetc_77qq.htm"><b>FLOWSPEC</b></a> structures and examine them in order to discover what aspect of the service level has changed. Note that the <a href="../sock2/strucetc_6sc2.htm"><b>QUALITYOFSERVICE</b></a> structures should be updated as appropriate regardless of whether FD_QOS/FD_GROUP_QOS is registered and generated. If the updated level of service is not acceptable, the client may adjust itself to accommodate it, attempt to renegotiate QOS, or close the socket. If a renegotiation is attempted, a successful return from the <b>WSPIoctl</b> function indicates that the revised QOS request was accepted, otherwise an appropriate error will be indicated. </p>
<p>&nbsp;</p></body>
</HTML>
