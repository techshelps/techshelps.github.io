<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WSCEnumProtocols</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_wscenumprotocols_2"></a>WSCEnumProtocols</h1>
<p>
The <b>WSCEnumProtocols</b> function retrieves information about available transport protocols.</p>
<pre><code><b>int WSCEnumProtocols (
  LPINT</b><i> lpiProtocols</i><b>,</b>                     
<b>  LPWSAPROTOCOL_INFOW</b><i> lpProtocolBuffer</i><b>,</b>   
<b>  LPDWORD</b><i> lpdwBufferLength</i><b>,</b>               
<b>  LPINT</b><i> lpErrno</i>                           
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>lpiProtocols</i></dt>
<dd>
[in] A null-terminated array of iProtocol values. This parameter is optional; if <i>lpiProtocols</i> is NULL, information on all available protocols is returned. Otherwise, information is retrieved only for those protocols listed in the array.</dd>
<dt>
<i>lpProtocolBuffer</i></dt>
<dd>
[out] A buffer that is filled with <b>WSAPROTOCOL_INFOW</b> structures. </dd>
<dt>
<i>lpdwBufferLength</i></dt>
<dd>
[in/out] On input, the count of bytes in the <i>lpProtocolBuffer</i> buffer passed to <b>WSCEnumProtocols</b>. On output, the minimum buffer size that can be passed to <b>WSCEnumProtocols</b> to retrieve all the requested information. </dd>
<dt>
<i>lpErrno</i></dt>
<dd>
[out] A pointer to the error code.
</dd>
</dl>
<h4>Remarks</h4>
<p>
This function is used to discover information about the collection of transport protocols installed on the local machine. This function differs from its API counterpart (WSAEnumProtocols) in that <b>WSAPROTOCOL_INFOW</b> structures for <i>all</i> installed protocols, <i>including</i> layered protocols, can be obtained. (WSAEnumProtocols only returns information on base protocols and protocol chains.) The <i>lpiProtocols </i>parameter can be used as a filter to constrain the amount of information provided. Normally, a NULL pointer is supplied so the function will return information on all available transport protocols.</p>
<p>
A <b>WSAPROTOCOL_INFOW</b> structure is provided in the buffer pointed to by <i>lpProtocolBuffer </i>for each requested protocol. If the supplied buffer is not large enough (as indicated by the input value of <i>lpdwBufferLength </i>), the value pointed to by <i>lpdwBufferLength </i>will be updated to indicate the required buffer size. The Windows Sockets SPI client should then obtain a large enough buffer and call this function again. The <b>WSCEnumProtocols </b>function cannot enumerate over multiple calls; the passed-in buffer must be large enough to hold all expected entries in order for the function to succeed. This reduces the complexity of the function and should not pose a problem because the number of protocols loaded on a machine is typically small.</p>
<p>
The order in which the <b>WSAPROTOCOL_INFOW</b> structures appear in the buffer coincides with the order in which the protocol entries were registered by the service provider with the WS2_32.DLL, or with any subsequent re-ordering that may have occurred through the Windows Sockets applet supplied for establishing default transport providers.</p>
<h4>Return Values</h4>
<p>
If no error occurs, <b>WSCEnumProtocols</b> returns the number of protocols to be reported on. Otherwise, a value of SOCKET_ERROR is returned and a specific error code is available in <i>lpErrno</i>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=31%>WSAEFAULT</td>
<td width=69%>One of more of the arguments<i> </i>is not in a valid part of the user address space.</td>
</tr>
<tr valign=top>
<td width=31%>WSAEINVAL</td>
<td width=69%>Indicates that one of the specified parameters was invalid.</td>
</tr>
<tr valign=top>
<td width=31%>WSAENOBUFS</td>
<td width=69%>The buffer length was too small to receive all the relevant <b>WSAPROTOCOL_INFOW</b> structures and associated information. Pass in a buffer at least as large as the value returned in <i>lpdwBufferLength</i>.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in ws2spi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with ws2_32.lib.</p>
<p>&nbsp;</p></body>
</HTML>
