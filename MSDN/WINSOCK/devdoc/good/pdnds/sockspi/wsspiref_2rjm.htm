<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WSPEnumNetworkEvents</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_wspenumnetworkevents_2"></a>WSPEnumNetworkEvents</h1>
<p>
The <b>WSPEnumNetworkEvents</b> function reports occurrences of network events for the indicated socket.</p>
<pre><code><b>int WSPEnumNetworkEvents (
  SOCKET</b><i> s</i><b>,</b>                             
<b>  WSAEVENT</b><i> hEventObject</i><b>,</b>                
<b>  LPWSANETWORKEVENTS</b><i> lpNetworkEvents</i><b>,</b>   
<b>  LPINT</b><i> lpErrno                         </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>s</i></dt>
<dd>
[in] A descriptor identifying the socket.</dd>
<dt>
<i>hEventObject</i></dt>
<dd>
[in] An optional handle identifying an associated event object to be reset.</dd>
<dt>
<i>lpNetworkEvents</i></dt>
<dd>
[out] A pointer to a <b>WSANETWORKEVENTS</b> structure which is filled with a record of occurred network events and any associated error codes. The <b>WSANETWORKEVENTS</b> structure is defined below.</dd>
<dt>
<i>lpErrno</i></dt>
<dd>
[out] A pointer to the error code.
</dd>
</dl>
<h4>Remarks</h4>
<p>
This function is used to report which network events have occurred for the indicated socket since the last invocation of this function. It is intended for use in conjunction with <b>WSPEventSelect</b>, which associates an event object with one or more network events. Recording of network events commences when <b>WSPEventSelect</b> is called with a nonzero <i>lNetworkEvents</i> parameter and remains in effect until another call is made to <b>WSPEventSelect</b> with the <i>lNetworkEvents</i> parameter set to zero, or until a call is made to <a href="wsspiref_74du.htm"><b>WSPAsyncSelect</b></a>.</p>
<p>
<b>WSPEnumNetworkEvents</b> only reports network activity and errors nominated through <b>WSPEventSelect</b>. See the descriptions of <b>WSPSelect</b> and <b>WSPAsyncSelect</b> to find out how those functions report network activity and errors.</p>
<p>
The socket's internal record of network events is copied to the structure referenced by <i>lpNetworkEvents</i>, whereafter the internal network events record is cleared. If <i>hEventObject </i>is non-null, the indicated event object is also reset. The Windows Sockets provider guarantees that the operations of copying the network event record, clearing it and resetting any associated event object are atomic, such that the next occurrence of a nominated network event will cause the event object to become set. In the case of this function returning SOCKET_ERROR, the associated event object is not reset and the record of network events is not cleared.</p>
<p>
The <b>WSANETWORKEVENTS</b> structure is defined as follows:</p>
<pre><code>typedef struct _WSANETWORKEVENTS {
       long lNetworkEvents;
       int iErrorCode[FD_MAX_EVENTS];
} WSANETWORKEVENTS, FAR * LPWSANETWORKEVENTS;
 </code></pre>
<p>
The <i>lNetworkEvent </i>field of the structure indicates which of the FD_XXX network events have occurred. The <i>iErrorCode</i> array is used to contain any associated error codes, with array index corresponding to the position of event bits in <i>lNetworkEvents</i>. The identifiers such as FD_READ_BIT and FD_WRITE_BIT can be used to index the <i>iErrorCode </i>array.</p>
<p>
Note that only those elements of the <i>iErrorCode</i> array are set that correspond to the bits set in <i>lNetworkEvents</i> field. Other fields are not modified (this is important for backwards compatibility with the Windows Socket 2 SPI clients that are not aware of new FD_ROUTING_INTERFACE_CHANGE and FD_ADDRESS_LIST_CHANGE events).</p>
<p>
The following error codes can be returned along with the respective network event:</p>
<p>
<b>Event: FD_CONNECT</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=37%>Error Code</th>
<th align=left width=63%>Meaning</th>
</tr>
<tr valign=top>
<td width=37%>WSAEAFNOSUPPORT</td>
<td width=63%>Addresses in the specified family cannot be used with this socket.</td>
</tr>
<tr valign=top>
<td width=37%>WSAECONNREFUSED</td>
<td width=63%>The attempt to connect was forcefully rejected.</td>
</tr>
<tr valign=top>
<td width=37%>WSAENETUNREACH</td>
<td width=63%>The network cannot be reached from this host at this time.</td>
</tr>
<tr valign=top>
<td width=37%>WSAENOBUFS</td>
<td width=63%>No buffer space is available. The socket cannot be connected.</td>
</tr>
<tr valign=top>
<td width=37%>WSAETIMEDOUT</td>
<td width=63%>Attempt to connect timed out without establishing a connection.</td>
</tr>
</table><br>
<p>
<b>Event: FD_CLOSE</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=37%>Error Code</th>
<th align=left width=63%>Meaning</th>
</tr>
<tr valign=top>
<td width=37%>WSAENETDOWN</td>
<td width=63%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=37%>WSAECONNRESET</td>
<td width=63%>The connection was reset by the remote side.</td>
</tr>
<tr valign=top>
<td width=37%>WSAECONNABORTED</td>
<td width=63%>The connection was terminated due to a time-out or other failure.</td>
</tr>
</table><br>
<p>
<b>Event: FD_READ</b></p>
<p>
<b>Event: FD_WRITE</b></p>
<p>
<b>Event: FD_OOB</b></p>
<p>
<b>Event: FD_ACCEPT</b></p>
<p>
<b>Event: FD_QOS</b></p>
<p>
<b>Event: FD_GROUP_QOS</b></p>
<p>
<b>Event: FD_ADDRESS_LIST_CHANGE</b></p>
<p>
<b>Event: FD_ROUTING_INTERFACE_CHANGE</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=37%>Error Code</th>
<th align=left width=63%>Meaning</th>
</tr>
<tr valign=top>
<td width=37%>WSAENETUNREACH</td>
<td width=63%>The specified destination is no longer reachable.</td>
</tr>
<tr valign=top>
<td width=37%>WSAENETDOWN</td>
<td width=63%>The network subsystem has failed.</td>
</tr>
</table><br>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=37%>Error Code</th>
<th align=left width=63%>Meaning</th>
</tr>
<tr valign=top>
<td width=37%>WSAENETDOWN</td>
<td width=63%>The network subsystem has failed.</td>
</tr>
</table><br>
<h4>Return Values</h4>
<p>
The return value is zero if the operation was successful. Otherwise, the value SOCKET_ERROR is returned, and a specific error number is available in <i>lpErrno</i>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=37%>WSAENETDOWN</td>
<td width=63%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=37%>WSAEINVAL</td>
<td width=63%>Indicates that one of the specified parameters was invalid.</td>
</tr>
<tr valign=top>
<td width=37%>WSAEINPROGRESS</td>
<td width=63%>A blocking Windows Sockests call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=37%>WSAENOTSOCK</td>
<td width=63%>The descriptor is not a socket.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in ws2spi.h.</p>
<h4>See Also</h4>
<p>
<a href="wsspiref_3p0y.htm"><b>WSPEventSelect</b></a><b> </b></p>
<p>&nbsp;</p></body>
</HTML>
