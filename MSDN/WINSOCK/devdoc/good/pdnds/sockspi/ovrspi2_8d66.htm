<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Transport Configuration and Installation</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_transport_configuration_and_installation"></a>Transport Configuration and Installation</h3>
<p>
In order for a transport protocol to be accessible via Windows Sockets it must be properly installed on the system and registered with Windows Sockets. When a transport service provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the WS2_32.DLL required information regarding the service provider. The WS2_32.DLL exports an installation function, <a href="wsspiref_7bea.htm"><b>WSCInstallProvider</b></a> for the vendor's installation program to supply the relevant information about the to-be-installed service provider, e.g., the name and path to the service provider DLL and a list of WSAPROTOCOL_INFOW structureures that this provider can support. Symmetrically, the WS2_32.DLL also provides a function, <a href="wsspiref_6anm.htm"><b>WSCDeinstallProvider</b></a>, for a vendor's deinstallation program to remove all the relevant information from the configuration database maintained by the WS2_32.DLL. The exact location and format of this configuration information is private to the WS2_32.DLL, and can only be manipulated by the above-mentioned functions.</p>
<p>
The order in which transport service providers are initially installed governs the order in which they are enumerated through <a href="wsspiref_5qeq.htm"><b>WSCEnumProtocols</b></a> at the service provider interface, or through <b>WSAEnumProtocols</b> at the application interface. More importantly, this order also governs the order in which protocols and service providers are considered when a client requests creation of a socket based on its address family, type, and protocol identifier. Windows Sockets 2 includes an applet called SPORDER.EXE that allows the catalog of installed protocols to be re-ordered interactively after protocols have already been installed. Windows Sockets 2 also includes an auxiliary DLL, SPORDER.DLL, that exports a procedural interface for re-ordering protocols. This procedural interface is described in <a href="ovrspi5_9baq.htm">Service Provider Ordering</a>.</p>

<h4><a name="_win32_installing_layered_protocols_and_protocol_chains_2"></a>Installing Layered Protocols and Protocol Chains</h4>
<p>
The WSAPROTOCOL_INFO structure supplied with each protocol to be installed indicates whether the protocol is a base protocol, layered protocol or protocol chain. The value of the <i>ProtocolChain.ChainLen </i>field is interpreted as follows:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=23%>0</td>
<td width=77%>Layered protocol</td>
</tr>
<tr valign=top>
<td width=23%>1</td>
<td width=77%>Base protocol (or chain with only one component)</td>
</tr>
<tr valign=top>
<td width=23%>&gt;1</td>
<td width=77%>Protocol chain</td>
</tr>
</table><br>
<p>
Installation of protocol chains can only occur after successful installation of all of the constituent components (base protocols and layered protocols). The WSAPROTOCOL_INFOW structure for a protocol chain uses the <i>ProtocolChain </i>field to describe the length of the chain and the identity of each component. The individual protocols that make up a chain are listed in order in the ProtocolChain.ChainEntries array, with the zeroth element of the array corresponding to the first layered provider. Protocols are identified by their <i>CatalogEntryID</i> values, which are assigned by the WS2_32.DLL at protocol installation time, and can be found in the WSAPROTOCOL_INFOW structure for each protocol. </p>
<p>
The values for the remaining fields in the protocol chain's WSAPROTOCOL_INFOW structure should be chosen to reflect the attributes and identifiers that best characterize the protocol chain as a whole. When selecting these values, developers should bear in mind that communications over protocol chains can only occur when both endpoints have compatible protocol chains installed, and that applications must able to recognize the corresponding WSAPROTOCOL_INFO structure. </p>
<p>
When a base protocol is installed, it is not necessary to make any entries in the <i>ProtocolChain.ChainEntries </i>array. It is implicitly understood that the sole component of this chain is already identified in the <i>CatalogEntryID </i>field of the same WSAPROTOCOL_INFO structure. Also note that protocol chains may not include multiple instances of the same layered protocol. </p>
<p>&nbsp;</p></body>
</HTML>
