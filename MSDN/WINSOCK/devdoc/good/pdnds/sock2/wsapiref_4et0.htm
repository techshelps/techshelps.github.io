<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WSAEnumNetworkEvents</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_wsaenumnetworkevents_2"></a>WSAEnumNetworkEvents</h1>
<p>
The Windows Sockets <b>WSAEnumNetworkEvents</b> function discovers occurrences of network events for the indicated socket, clear internal network event records, and reset event objects (optional).</p>
<pre><code><b>int WSAEnumNetworkEvents (
  SOCKET</b><i> s</i><b>,                           </b>
<b>  WSAEVENT</b><i> hEventObject</i><b>,              </b>
<b>  LPWSANETWORKEVENTS</b><i> lpNetworkEvents  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>s</i></dt>
<dd>
[in] A descriptor identifying the socket.</dd>
<dt>
<i>hEventObject</i></dt>
<dd>
[in] An optional handle identifying an associated event object to be reset.</dd>
<dt>
<i>lpNetworkEvents</i></dt>
<dd>
[out] A pointer to a <a href="strucetc_5ng2.htm"><b>WSANETWORKEVENTS</b></a> structure that is filled with a record of network events that occurred and any associated error codes.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>WSAEnumNetworkEvents</b> function is used to discover which network events have occurred for the indicated socket since the last invocation of this function. It is intended for use in conjunction with <a href="wsapiref_34aa.htm"><b>WSAEventSelect</b></a>, which associates an event object with one or more network events. The recording of network events commences when <a href="wsapiref_34aa.htm"><b>WSAEventSelect</b></a> is called with a nonzero <i>lNetworkEvents</i> parameter and remains in effect until another call is made to <b>WSAEventSelect</b> with the <i>lNetworkEvents</i> parameter set to zero, or until a call is made to <a href="wsapiref_6jn6.htm"><b>WSAAsyncSelect</b></a>.</p>
<p>
<b>WSAEnumNetworkEvents</b> only reports network activity and errors nominated through <b>WSAEventSelect</b>. See the descriptions of <a href="wsapiref_1ab6.htm"><b>select</b></a> and <b>WSAAsyncSelect</b> to find out how those functions report network activity and errors.</p>
<p>
The socket's internal record of network events is copied to the structure referenced by <i>lpNetworkEvents</i>, whereafter the internal network events record is cleared. If the <i>hEventObject </i>parameter is not null, the indicated event object is also reset. The Windows Sockets provider guarantees that the operations of copying the network event record, clearing it and resetting any associated event object are automatic, such that the next occurrence of a nominated network event will cause the event object to become set. In the case of this function returning SOCKET_ERROR, the associated event object is not reset and the record of network events is not cleared.</p>
<p>
The <i>lNetworkEvents</i> member of the <a href="strucetc_5ng2.htm"><b>WSANETWORKEVENTS</b></a> structure indicates which of the FD_XXX network events have occurred. The <i>iErrorCode</i> array is used to contain any associated error codes with the array index corresponding to the position of event bits in <i>lNetworkEvents</i>. Identifiers such as FD_READ_BIT and FD_WRITE_BIT can be used to index the <i>iErrorCode</i> array. Note that only those elements of the <i>iErrorCode</i> array are set that correspond to the bits set in <i>lNetworkEvents</i> field.  Other fields are not modified (this is important for backwards compatibility with the applications that are not aware of new FD_ROUTING_INTERFACE_CHANGE and FD_ADDRESS_LIST_CHANGE events).</p>
<p>
The following error codes can be returned along with the corresponding network event:</p>
<p>
<b>Event: FD_CONNECT</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Error Code</th>
<th align=left width=59%>Meaning</th>
</tr>
<tr valign=top>
<td width=41%>WSAEAFNOSUPPORT</td>
<td width=59%>Addresses in the specified family cannot be used with this socket.</td>
</tr>
<tr valign=top>
<td width=41%>WSAECONNREFUSED</td>
<td width=59%>The attempt to connect was forcefully rejected.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENETUNREACH</td>
<td width=59%>The network cannot be reached from this host at this time.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENOBUFS</td>
<td width=59%>No buffer space is available. The socket cannot be connected.</td>
</tr>
<tr valign=top>
<td width=41%>WSAETIMEDOUT</td>
<td width=59%>Attempt to connect timed out without establishing a connection</td>
</tr>
</table><br>
<p>
<b>Event: FD_CLOSE</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Error Code</th>
<th align=left width=59%>Meaning</th>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=41%>WSAECONNRESET</td>
<td width=59%>The connection was reset by the remote side.</td>
</tr>
<tr valign=top>
<td width=41%>WSAECONNABORTED</td>
<td width=59%>The connection was terminated due to a time-out or other failure.</td>
</tr>
</table><br>
<p>
<b>Event: FD_READ</b></p>
<p>
<b>Event: FD_WRITE</b></p>
<p>
<b>Event: FD_OOB</b></p>
<p>
<b>Event: FD_ACCEPT</b></p>
<p>
<b>Event: FD_QOS</b></p>
<p>
<b>Event: FD_GROUP_QOS</b></p>
<p>
<b>Event: FD_ADDRESS_LIST_CHANGE </b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Error Code</th>
<th align=left width=59%>Meaning</th>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
</table><br>
<p>
<b>Event: FD_ROUTING_INTERFACE_CHANGE</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Error Code</th>
<th align=left width=59%>Meaning</th>
</tr>
<tr valign=top>
<td width=41%>WSAENETUNREACH</td>
<td width=59%>The specified destination is no longer reachable</td>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
</table><br>
<h4>Return Values</h4>
<p>
The return value is zero if the operation was successful. Otherwise, the value SOCKET_ERROR is returned, and a specific error number can be retrieved by calling <a href="wsapiref_2tiq.htm"><b>WSAGetLastError</b></a>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=41%>WSANOTINITIALISED</td>
<td width=59%>A successful <b>WSAStartup</b> must occur before using this function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINVAL</td>
<td width=59%>Indicates that one of the specified parameters was invalid.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINPROGRESS</td>
<td width=59%>A blocking Windows Sockets 1.1 call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENOTSOCK</td>
<td width=59%>The descriptor is not a socket.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEFAULT</td>
<td width=59%>The <i>lpNetworkEvents</i> argument is not a valid part of the user address space.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winsock2.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with ws2_32.lib.</p>
<h4>See Also</h4>
<p>
<a href="wsapiref_34aa.htm"><b>WSAEventSelect</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
