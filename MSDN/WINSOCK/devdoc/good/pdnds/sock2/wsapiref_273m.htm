<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>getsockname</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_getsockname_2"></a>getsockname</h1>
<p>
The Windows Sockets <b>getsockname</b> function retrieves the local name for a socket.</p>
<pre><code><b>int getsockname (
  SOCKET</b><i> s</i><b>,                    </b>
<b>  struct sockaddr FAR* </b><i> name</i><b>,  </b>
<b>  int FAR* </b><i> namelen            </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>s</i></dt>
<dd>
[in] A descriptor identifying a bound socket.</dd>
<dt>
<i>name</i></dt>
<dd>
[out] Receives the address (name) of the socket.</dd>
<dt>
<i>namelen</i></dt>
<dd>
[in/out] The size of the <i>name</i> buffer.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>getsockname</b> function retrieves the current name for the specified socket descriptor in <i>name</i>. It is used on the bound or connected socket specified by the <i>s</i> parameter. The local association is returned. This call is especially useful when a <a href="wsapiref_8m7m.htm"><b>connect</b></a> call has been made without doing a <a href="wsapiref_6vzm.htm"><b>bind</b></a> first; the <b>getsockname</b> function provides the only way to determine the local association that has been set by the system.</p>
<p>
On call, the <i>namelen</i> argument contains the size of the <i>name</i> buffer, in bytes. On return, the <i>namelen</i> parameter contains the actual size in bytes of the <i>name</i> parameter.</p>
<p>
The <b>getsockname</b> function does not always return information about the host address when the socket has been bound to an unspecified address, unless the socket has been connected with <a href="wsapiref_8m7m.htm"><b>connect</b></a> or <a href="wsapiref_13aq.htm"><b>accept</b></a> (for example, using ADDR_ANY). A Windows Sockets application must not assume that the address will be specified unless the socket is connected. The address that will be used for the socket is unknown unless the socket is connected when used in a multihomed host. If the socket is using a connectionless protocol, the address may not be available until I/O occurs on the socket.</p>
<h4>Return Values</h4>
<p>
If no error occurs, <b>getsockname</b> returns zero. Otherwise, a value of SOCKET_ERROR is returned, and a specific error code can be retrieved by calling <a href="wsapiref_2tiq.htm"><b>WSAGetLastError</b></a>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=41%>WSANOTINITIALISED</td>
<td width=59%>A successful <a href="wsapiref_1v8y.htm"><b>WSAStartup</b></a> must occur before using this function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEFAULT</td>
<td width=59%>The <i>name </i>or the <i>namelen </i>parameter is not a valid part of the user address space, or the <i>namelen</i> parameter is too small.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINPROGRESS</td>
<td width=59%>A blocking Windows Sockets 1.1 call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENOTSOCK</td>
<td width=59%>The descriptor is not a socket.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINVAL</td>
<td width=59%>The socket has not been bound to an address with <a href="wsapiref_6vzm.htm"><b>bind</b></a>, or ADDR_ANY is specified in <b>bind</b> but connection has not yet occurs.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Use version 1.0 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winsock2.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with wsock32.lib.</p>
<h4>See Also</h4>
<p>
<a href="wsapiref_6vzm.htm"><b>bind</b></a>, <a href="wsapiref_8woi.htm"><b>getpeername</b></a>, <a href="wsapiref_2qr6.htm"><b>socket</b></a></p>
<p>&nbsp;</p></body>
</HTML>
