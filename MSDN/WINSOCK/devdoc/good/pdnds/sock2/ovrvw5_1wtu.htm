<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IP multicast</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_ip_multicast_2"></a>IP multicast</h3>
<p>
IP multicast falls into the category of non-rooted data plane and non-rooted control plane. All applications play a leaf role. Currently most IP multicast implementations use a set of socket options proposed by Steve Deering to the IETF. Five operations are made thus available:
<ul>
<li>
IP_MULTICAST_TTL - set time to live, controls scope of multicast session</li>
<li>
IP_MULTICAST_IF - determine interface to be used for multicasting</li>
<li>
IP_ADD_MEMBERSHIP - join a specified multicast session</li>
<li>
IP_DROP_MEMBERSHIP - drop out of a multicast session</li>
<li>
IP_MULTICAST_LOOP - control loopback of multicast traffic</li>
</ul>
<p>
Setting the time-to-live for an IP multicast socket maps directly to using the SIO_MULTICAST_SCOPE command code for <a href="wsapiref_6ik2.htm"><b>WSAIoctl</b></a>. The method for determining the IP interface to be used for multicasting is via a TCP/IP-specific socket option as described in the Windows Sockets 2 Protocol Specific Annex.</p>
<p>
The remaining three operations are covered well with the Windows Sockets 2 semantics described here. The application would open sockets with c_leaf/d_leaf flags in <a href="wsapiref_533m.htm"><b>WSASocket</b></a>. It would use <a href="wsapiref_7dv6.htm"><b>WSAJoinLeaf</b></a> to add itself to a multicast group on the default interface designated for multicast operations. If the flag in <b>WSAJoinLeaf</b> indicates that this socket is only a sender, then the join operation is essentially a no-op and no IGMP messages need to be sent. Otherwise, an IGMP packet is sent out to the router to indicate interests in receiving packets sent to the specified multicast address. Since the application created special c_leaf/d_leaf sockets used only for performing multicast, the standard <a href="wsapiref_714i.htm"><b>closesocket</b></a> function would be used to drop out of the multicast session. The SIO_MULTIPOINT_LOOPBACK command code for <b>WSAIoctl</b> provides a generic control mechanism for determining whether data sent on a d_leaf socket in a non-rooted multipoint scheme will be also received on the same socket.</p>
<p>&nbsp;</p></body>
</HTML>
