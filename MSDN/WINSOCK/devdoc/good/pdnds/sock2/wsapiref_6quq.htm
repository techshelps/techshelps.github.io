<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>send</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_send_2"></a>send</h1>
<p>
The Windows Sockets <b>send</b> function sends data on a connected socket.</p>
<pre><code><b>int send (
  SOCKET</b><i> s</i><b>,              </b>
<b>  const char FAR *</b><i> buf</i><b>,  </b>
<b>  int</b><i> len</i><b>,               </b>
<b>  int</b><i> flags              </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>s</i></dt>
<dd>
[in] A descriptor identifying a connected socket.</dd>
<dt>
<i>buf</i></dt>
<dd>
[in] A buffer containing the data to be transmitted.</dd>
<dt>
<i>len</i></dt>
<dd>
[in] The length of the data in <i>buf</i>.</dd>
<dt>
<i>flags</i></dt>
<dd>
[in] An indicator specifying the way in which the call is made.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>send</b> function is used to write outgoing data on a connected socket. For message-oriented sockets, care must be taken not to exceed the maximum packet size of the underlying provider, which can be obtained by using <a href="wsapiref_8qcy.htm"><b>getsockopt</b></a> to retrieve the value of socket option SO_MAX_MSG_SIZE. If the data is too long to pass atomically through the underlying protocol, the error <a href="errors_0oaa.htm#_win32_wsaemsgsize_2">WSAEMSGSIZE</a> is returned, and no data is transmitted. </p>
<p>
The successful completion of a <b>send</b> does not indicate that the data was successfully delivered.</p>
<p>
If no buffer space is available within the transport system to hold the data to be transmitted, <b>send</b> will block unless the socket has been placed in a nonblocking mode. On nonblocking stream oriented sockets, the number of bytes written can be between 1 and the requested length, depending on buffer availability on both client and server machines. The <a href="wsapiref_1ab6.htm"><b>select</b></a>, <a href="wsapiref_6jn6.htm"><b>WSAAsyncSelect</b></a> or <a href="wsapiref_34aa.htm"><b>WSAEventSelect</b></a> functions can be used to determine when it is possible to send more data.</p>
<p>
Calling <b>send</b> with a zero <i>len</i> parameter is permissible and will be treated by implementations as successful. In such cases, <b>send</b> will return zero as a valid value. For message-oriented sockets, a zero-length transport datagram is sent.</p>
<p>
The <i>flags</i> parameter can be used to influence the behavior of the function beyond the options specified for the associated socket. The semantics of this function are determined by the socket options and the <i>flags</i> parameter. The latter is constructed by or-ing the following values:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=38%>Value</th>
<th align=left width=62%>Meaning</th>
</tr>
<tr valign=top>
<td width=38%>MSG_DONTROUTE</td>
<td width=62%>Specifies that the data should not be subject to routing. A Windows Sockets service provider can choose to ignore this flag.</td>
</tr>
<tr valign=top>
<td width=38%>MSG_OOB</td>
<td width=62%>Send out-of-band data (stream-style socket such as SOCK_STREAM only. Also see <a href="../../../live/pdnds/sockspi/wsanxref_9fqq.htm">DECnet Out-Of-band data</a> for a discussion of this topic).</td>
</tr>
</table><br>
<p>
<b>Windows CE:</b> For IrSockets implementation, the Af_irda.h file must be explicitly included.</p>
<h4>Return Values</h4>
<p>
If no error occurs, <b>send</b> returns the total number of bytes sent, which can be less than the number indicated by <i>len </i>for nonblocking sockets. Otherwise, a value of SOCKET_ERROR is returned, and a specific error code can be retrieved by calling <a href="wsapiref_2tiq.htm"><b>WSAGetLastError</b></a>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=38%>WSANOTINITIALISED</td>
<td width=62%>A successful <a href="wsapiref_1v8y.htm"><b>WSAStartup</b></a> must occur before using this function.</td>
</tr>
<tr valign=top>
<td width=38%>WSAENETDOWN</td>
<td width=62%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEACCES</td>
<td width=62%>The requested address is a broadcast address, but the appropriate flag was not set. Call <a href="wsapiref_94aa.htm"><b>setsockopt</b></a> with the SO_BROADCAST parameter to allow the use of the broadcast address.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEINTR</td>
<td width=62%>A blocking Windows Sockets 1.1 call was canceled through <a href="wsapiref_704y.htm"><b>WSACancelBlockingCall</b></a>.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEINPROGRESS</td>
<td width=62%>A blocking Windows Sockets 1.1 call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEFAULT</td>
<td width=62%>The <i>buf </i>parameter is not completely contained in a valid part of the user address space.</td>
</tr>
<tr valign=top>
<td width=38%>WSAENETRESET</td>
<td width=62%>The connection has been broken due to the "keep-alive" activity detecting a failure while the operation was in progress.</td>
</tr>
<tr valign=top>
<td width=38%>WSAENOBUFS</td>
<td width=62%>No buffer space is available.</td>
</tr>
<tr valign=top>
<td width=38%>WSAENOTCONN</td>
<td width=62%>The socket is not connected.</td>
</tr>
<tr valign=top>
<td width=38%>WSAENOTSOCK</td>
<td width=62%>The descriptor is not a socket.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEOPNOTSUPP</td>
<td width=62%>MSG_OOB was specified, but the socket is not stream-style such as type SOCK_STREAM, out-of-band data is not supported in the communication domain associated with this socket, or the socket is unidirectional and supports only receive operations.</td>
</tr>
<tr valign=top>
<td width=38%>WSAESHUTDOWN</td>
<td width=62%>The socket has been shut down; it is not possible to <b>send</b> on a socket after <a href="wsapiref_60z6.htm"><b>shutdown</b></a> has been invoked with how set to SD_SEND or SD_BOTH.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEWOULDBLOCK</td>
<td width=62%>The socket is marked as nonblocking and the requested operation would block.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEMSGSIZE</td>
<td width=62%>The socket is message oriented, and the message is larger than the maximum supported by the underlying transport.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEHOSTUNREACH</td>
<td width=62%>The remote host cannot be reached from this host at this time.</td>
</tr>
<tr valign=top>
<td width=38%>WSAEINVAL</td>
<td width=62%>The socket has not been bound with <a href="wsapiref_6vzm.htm"><b>bind</b></a>, or an unknown flag was specified, or MSG_OOB was specified for a socket with SO_OOBINLINE enabled.</td>
</tr>
<tr valign=top>
<td width=38%>WSAECONNABORTED</td>
<td width=62%>The virtual circuit was terminated due to a time-out or other failure. The application should close the socket as it is no longer usable.</td>
</tr>
<tr valign=top>
<td width=38%>WSAECONNRESET</td>
<td width=62%>The virtual circuit was reset by the remote side executing a "hard" or "abortive" close. For UPD sockets, the remote host was unable to deliver a previously sent UDP datagram and responded with a "Port Unreachable" ICMP packet. The application should close the socket as it is no longer usable.</td>
</tr>
<tr valign=top>
<td width=38%>WSAETIMEDOUT</td>
<td width=62%>The connection has been dropped, because of a network failure or because the system on the other end went down without notice.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Use version 1.0 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winsock2.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with ws2_32.lib.</p>
<h4>See Also</h4>
<p>
<a href="wsapiref_2i9e.htm"><b>recv</b></a>, <a href="wsapiref_88oi.htm"><b>recvfrom</b></a>, <a href="wsapiref_1ab6.htm"><b>select</b></a>, <a href="wsapiref_4sqa.htm"><b>sendto</b></a>, <a href="wsapiref_2qr6.htm"><b>socket</b></a>, <a href="wsapiref_6jn6.htm"><b>WSAAsyncSelect</b></a>, <a href="wsapiref_34aa.htm"><b>WSAEventSelect</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
