<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>socket</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_socket_2"></a>socket</h1>
<p>
The Windows Sockets <b>socket</b> function creates a socket that is bound to a specific service provider.</p>
<pre><code><b>SOCKET socket (
  int</b><i> af</i><b>,       </b>
<b>  int</b><i> type</i><b>,     </b>
<b>  int</b><i> protocol  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>af</i></dt>
<dd>
[in] An address family specification.</dd>
<dt>
<i>type</i></dt>
<dd>
[in] A type specification for the new socket.
<p>
The following are the only two <i>type</i> specifications supported for Windows Sockets 1.1:

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=31%>Type</th>
<th align=left width=69%>Explanation</th>
</tr>
<tr valign=top>
<td width=31%>SOCK_STREAM</td>
<td width=69%>Provides sequenced, reliable, two-way, connection-based byte streams with an out-of-band data transmission mechanism. Uses TCP for the Internet address family.</td>
</tr>
<tr valign=top>
<td width=31%>SOCK_DGRAM</td>
<td width=69%>Supports datagrams, which are connectionless, unreliable buffers of a fixed (typically small) maximum length. Uses UDP for the Internet address family.</td>
</tr>
</table><br>


<p>
In Windows Sockets 2, many new socket types will be introduced and don' need to be specified now because an application can dynamically discover the attributes of each available transport protocol through the <a href="wsapiref_0f76.htm"><b>WSAEnumProtocols</b></a> function. Socket type definitions will appear in WINSOCK2.H, which will be periodically updated as new socket types, address families and protocols are defined.
</dd>
<dt>
<i>protocol</i></dt>
<dd>
[in] A particular protocol to be used with the socket that is specific to the indicated address family.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>socket</b> function causes a socket descriptor and any related resources to be allocated and bound to a specific transport service provider. Windows Sockets will utilize the first available service provider that supports the requested combination of address family, socket type and protocol parameters. The socket that is created will have the overlapped attribute as a default. For Microsoft operating systems, the Microsoft-specific socket option, SO_OPENTYPE, defined in MSWSOCK.H can affect this default. See Microsoft-specific documentation for a detailed description of SO_OPENTYPE. Sockets without the overlapped attribute can be created by using <a href="wsapiref_533m.htm"><b>WSASocket</b></a>. All functions that allow overlapped operation (<a href="wsapiref_97n6.htm"><b>WSASend</b></a>, <a href="wsapiref_4z1u.htm"><b>WSARecv</b></a>,<a href="wsapiref_752q.htm"><b>WSASendTo</b></a>, <a href="wsapiref_4wky.htm"><b>WSARecvFrom</b></a>, and <a href="wsapiref_6ik2.htm"><b>WSAIoctl</b></a>) also support non-overlapped usage on an overlapped socket if the values for parameters related to overlapped operation are NULL.</p>
<p>
When selecting a protocol and its supporting service provider this procedure will only choose a base protocol or a protocol chain, not a protocol layer by itself. Unchained protocol layers are not considered to have partial matches on <i>type</i> or <i>af</i> either. That is, they do not lead to an error code of WSAEAFNOSUPPORT or WSAEPROTONOSUPPORT if no suitable protocol is found.</p>
<p>
<b>Important</b>  The manifest constant AF_UNSPEC continues to be defined in the header file but its use is <b>strongly discouraged</b>, as this can cause ambiguity in interpreting the value of the <i>protocol </i>parameter.</p>
<p>
Connection-oriented sockets such as SOCK_STREAM provide full-duplex connections, and must be in a connected state before any data can be sent or received on it. A connection to another socket is created with a <a href="wsapiref_8m7m.htm"><b>connect</b></a> call. Once connected, data can be transferred using <a href="wsapiref_6quq.htm"><b>send</b></a> and <a href="wsapiref_2i9e.htm"><b>recv</b></a> calls. When a session has been completed, a <a href="wsapiref_714i.htm"><b>closesocket</b></a> must be performed.</p>
<p>
The communications protocols used to implement a reliable, connection-oriented socket ensure that data is not lost or duplicated. If data for which the peer protocol has buffer space cannot be successfully transmitted within a reasonable length of time, the connection is considered broken and subsequent calls will fail with the error code set to <a href="errors_0oaa.htm#_win32_wsaetimedout_2">WSAETIMEDOUT</a>.</p>
<p>
Connectionless, message-oriented sockets allow sending and receiving of datagrams to and from arbitrary peers using <b>sendto</b> and <b>recvfrom</b>. If such a socket is connected to a specific peer, datagrams can be sent to that peer using <b>send</b> and can be received only from this peer using <b>recv</b>.</p>
<p>
Support for sockets with type RAW is not required, but service providers are encourage to support raw sockets whenever it makes sense to do so.</p>
<p>
<b>Windows CE:</b> Windows CE supports the PF_INET and AF_IRDA ARPA Internet address formats. </p>
<p>
To use IrSock, set the <i>af</i> parameter to AF_IRDA and set the <i>protocol</i> parameter to NULL.</p>
<p>
Windows CE supports SOCK_STREAM and SOCK_DCRAM socket types.</p>
<h4>Return Values</h4>
<p>
If no error occurs, <b>socket</b> returns a descriptor referencing the new socket. Otherwise, a value of INVALID_SOCKET is returned, and a specific error code can be retrieved by calling <a href="wsapiref_2tiq.htm"><b>WSAGetLastError</b></a>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=46%>WSANOTINITIALISED</td>
<td width=54%>A successful <b>WSAStartup</b> must occur before using this function.</td>
</tr>
<tr valign=top>
<td width=46%>WSAENETDOWN</td>
<td width=54%>The network subsystem or the associated service provider has failed.</td>
</tr>
<tr valign=top>
<td width=46%>WSAEAFNOSUPPORT</td>
<td width=54%>The specified address family is not supported.</td>
</tr>
<tr valign=top>
<td width=46%>WSAEINPROGRESS</td>
<td width=54%>A blocking Windows Sockets 1.1 call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=46%>WSAEMFILE</td>
<td width=54%>No more socket descriptors are available.</td>
</tr>
<tr valign=top>
<td width=46%>WSAENOBUFS</td>
<td width=54%>No buffer space is available. The socket cannot be created.</td>
</tr>
<tr valign=top>
<td width=46%>WSAEPROTONOSUPPORT</td>
<td width=54%>The specified protocol is not supported.</td>
</tr>
<tr valign=top>
<td width=46%>WSAEPROTOTYPE</td>
<td width=54%>The specified protocol is the wrong type for this socket.</td>
</tr>
<tr valign=top>
<td width=46%>WSAESOCKTNOSUPPORT</td>
<td width=54%>The specified socket type is not supported in this address family.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Use version 1.0 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winsock2.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with ws2_32.lib.</p>
<h4>See Also</h4>
<p>
<a href="wsapiref_13aq.htm"><b>accept</b></a>, <a href="wsapiref_6vzm.htm"><b>bind</b></a>, <a href="wsapiref_8m7m.htm"><b>connect</b></a>, <a href="wsapiref_273m.htm"><b>getsockname</b></a>, <a href="wsapiref_8qcy.htm"><b>getsockopt</b></a>, <a href="wsapiref_7dde.htm"><b>ioctlsocket</b></a>, <a href="wsapiref_07hu.htm"><b>listen</b></a>, <a href="wsapiref_2i9e.htm"><b>recv</b></a>, <a href="wsapiref_88oi.htm"><b>recvfrom</b></a>, <a href="wsapiref_1ab6.htm"><b>select</b></a>, <a href="wsapiref_6quq.htm"><b>send</b></a>, <a href="wsapiref_4sqa.htm"><b>sendto</b></a>, <a href="wsapiref_94aa.htm"><b>setsockopt</b></a>, <a href="wsapiref_60z6.htm"><b>shutdown</b></a>, <a href="wsapiref_533m.htm"><b>WSASocket</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
