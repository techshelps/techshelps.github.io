<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>getservbyport</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_getservbyport_2"></a>getservbyport</h1>
<p>
The Windows Sockets <b>getservbyport</b> function retrieves service information corresponding to a port and protocol.</p>
<pre><code><b>struct servent FAR * getservbyport (
  int</b><i> port</i><b>,              </b>
<b>  const char FAR*</b><i> proto  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>port</i></dt>
<dd>
[in] The port for a service, in network byte order.</dd>
<dt>
<i>proto</i></dt>
<dd>
[in] An optional pointer to a protocol name. If this is NULL, <b>getservbyport</b> returns the first service entry for which the <i>port </i>matches the <b>s_port </b>of the <a href="strucetc_97n6.htm"><b>SERVENT</b></a> structure. Otherwise, <b>getservbyport</b> matches both the <i>port</i> and the <i>proto </i>parameters.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>getservbyport</b> function returns a pointer to a <a href="strucetc_97n6.htm"><b>SERVENT</b></a> structure as it does in the <a href="wsapiref_775e.htm"><b>getservbyname</b></a> function.</p>
<p>
The <b>SERVENT</b> structure is allocated by Windows Sockets. The application must never attempt to modify this structure or to free any of its components. Furthermore, only one copy of this structure is allocated per thread, so the application should copy any information it needs before issuing any other Windows Sockets function calls.</p>
<h4>Return Values</h4>
<p>
If no error occurs, <b>getservbyport</b> returns a pointer to the <a href="strucetc_97n6.htm"><b>SERVENT</b></a> structure. Otherwise, it returns a NULL pointer and a specific error number can be retrieved by calling <a href="wsapiref_2tiq.htm"><b>WSAGetLastError</b></a>.</p>
<h4>Error Codes</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=41%>WSANOTINITIALISED</td>
<td width=59%>A successful <a href="wsapiref_1v8y.htm"><b>WSAStartup</b></a> must occur before using this function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAENETDOWN</td>
<td width=59%>The network subsystem has failed.</td>
</tr>
<tr valign=top>
<td width=41%>WSAHOST_NOT_FOUND</td>
<td width=59%>Authoritative Answer Service not found.</td>
</tr>
<tr valign=top>
<td width=41%>WSATRY_AGAIN</td>
<td width=59%>Non-Authoritative Service not found, or server failure.</td>
</tr>
<tr valign=top>
<td width=41%>WSANO_RECOVERY</td>
<td width=59%>Nonrecoverable errors, the services database is not accessible.</td>
</tr>
<tr valign=top>
<td width=41%>WSANO_DATA</td>
<td width=59%>Valid name, no data record of requested type.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINPROGRESS</td>
<td width=59%>A blocking Windows Sockets 1.1 call is in progress, or the service provider is still processing a callback function.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEFAULT</td>
<td width=59%>The <i>proto</i> parameter is not a valid part of the user address space.</td>
</tr>
<tr valign=top>
<td width=41%>WSAEINTR</td>
<td width=59%>A blocking Windows Socket 1.1  call was canceled through <a href="wsapiref_704y.htm"><b>WSACancelBlockingCall</b></a>.</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Yes<br>
&nbsp;&nbsp;<b>Windows:</b> Yes<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winsock2.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with ws2_32.lib.</p>
<h4>See Also</h4>
<p>
<a href="wsapiref_775e.htm"><b>getservbyname</b></a>, <a href="wsapiref_5jle.htm"><b>WSAAsyncGetServByPort</b></a></p>
<p>&nbsp;</p></body>
</HTML>
