

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Manually Add Support for a Second Processor </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q156358">
<META NAME="KBModify" CONTENT="1998/01/09">
<META NAME="KBCreate" CONTENT="1996/09/23">
<META NAME="Keywords" CONTENT="NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article describes how to change Windows NT from single processor support to multiprocessor support or from multiprocessor support to single processor support.  MORE INFORMATION  Before you start, make sure that you have a complete, working bac...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAA1,QDI2,QDO3,QAY2,QAXB,QANE,QDL9,QBWO,QBWN,QABA,QDNN,QDIO,QAC1,QBWQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Manually Add Support for a Second Processor</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q156358</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article describes how to change Windows NT from single processor
support to multiprocessor support or from multiprocessor support to
single processor support.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Before you start, make sure that you have a complete, working backup of
the system files and the registry, and that you have a current Emergency
Repair Disk (ERD). To create an updated ERD, run Rdisk.exe from a command
prompt, and then select Update Repair Info.
<P>
To add support in Windows NT for an additional processor, follow these
steps:
<P>
NOTE: Some Compaq computers require a different HAL -- Halsp.dll. Refer to
the latest Compaq Software Support Disk SSD for details.

<OL><P><LI>Install Windows NT to a separate folder on your hard disk, and then
   restart your computer to the new installation of Windows NT.

<P><LI>In the %SystemRoot%\system32 folder of your original Windows NT
   installation, rename the following files to alternate names:
<P>
<P><PRE>      Ntoskrnl.exe
      Hal.dll
      Kernel32.dll
      Ntdll.dll
      Winsrv.dll
      Win32k.sys (additional file in Windows NT 4.0 only)
</PRE>
<P><LI>Determine which multiprocessor HAL your computer requires using the
   following list:
<P>
<PRE>      Halast.dll    = "AST Manhattan SMP"
      Halsp.dll     = "Compaq SystemPro Multiprocessor or 100% Compatible"
      Halcbus.dll   = "Corollary C-bus Architecture"
      Halmca.dll    = "IBM PS/2 or other Micro Channel-based PC"
      halmpsm.dll   = "Micro Channel Multi Processor PC"
      Halapic.dll   = "MPS Uniprocessor PC"
      Halmps.dll    = "MPS Multiprocessor PC"
      Halncr.dll    = "NCR System 3000 Model 3360/3450/3550"
      Haloli.dll    = "Olivetti LSX5030/40"
      Hal.dll       = "Standard PC"  (single processor HAL)
      Hal486c.dll   = "Standard PC with C-Step i486"
      Halwyse7.dll  = "Wyse Series 7000i Model 740MP/760MP"

</PRE><P><LI>Copy the Ntkrnlmp.exe file and the appropriate HAL file from the
   Windows NT CD-ROM or installed service pack to the
   %SystemRoot%\system32 folder of your original Windows NT installation,
   and then rename them to Ntoskrnl.exe and Hal.dll, respectively.

<P><LI>Copy the Ntdll.dll file from the original Windows NT CD-ROM or
   installed service pack to the %SystemRoot%\system32 folder of your
   original Windows NT installation.

<P><LI>From a command prompt, expand the Kernel32.dll and Winsrv.dll files
   from the Windows NT CD-ROM or installed service pack to the
   %SystemRoot%\system32\drivers folder of your original Windows NT
   installation. For example, type the following commands:
<P>
<P><PRE>      expand kernel32.dl_ %systemroot%\system32\kernel32.dll
      expand winsrv.dl_ %systemroot%\system32\winsrv.dll
</PRE><P>
   NOTE: To properly expand files from the Windows NT CD-ROM, you must use
   the Expand.exe utility included with Windows NT. The Windows NT
   Expand.exe utility can only be run from a command prompt in a 32-bit
   environment such as Microsoft Windows 95 or Windows NT.
<P>
</OL>NOTE: In Windows NT 4.0, the Win32k.sys file is also required. Expand it
from the original Windows NT CD-ROM or the installed service pack.

<OL><P><LI>Restart your computer.

<P><LI>When the Windows NT kernel loads, ensure that it displays
   "Multiprocessor kernel" during startup.
<P>
</OL>Support for the second processor is now installed and is ready for use. To
return to single processor support, restore the old files to the original
names in the %System Root%\System32 folder, and then restart the computer.
<P>
NOTE: The files located on the Window NT CD-ROM and in the service packs
are multiprocessor aware. To return to single processor, you must install
Windows NT on a single processor computer, install any applicable service
packs, and then copy the associated files from that computer to the
computer you want to return to single processor. You should also update
the Setup.log file in the $SystemRoot%\Repair folder to reflect the
correct state of your computer in order for future service packs and the
repair process to function properly.  To update the setup.log file run
rdisk and choose the update option on the first screen.
<P>
For additional information, see the following article(s) in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q124541.htm">Q124541</A></B>
   TITLE     : Use UPTOMP.EXE to Upgrade Single-Processor to
               Multiprocessor

   ARTICLE-ID: <B><A HREF="../WINNT/Q148245.htm">Q148245</A></B>
   TITLE     : Upgrading from Uni- to Multi-Processor Requires Service
               Pack

   ARTICLE-ID: <B><A HREF="../WINNT/Q142660.htm">Q142660</A></B>
   TITLE     : Upgrade from Uni- to Multiprocessor (Uptomp.exe)and
               Win32k.sys
</PRE></OL> 
<PRE>Keywords          : NTSrvWkst
Version           : 3.5 3.51 4.0
Platform          : winnt
Issue type        : kbhowto</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 9, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
