

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Domain Synchronization Fails With 5730 or 5731 and 5716 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172302">
<META NAME="KBModify" CONTENT="1997/10/10">
<META NAME="KBCreate" CONTENT="1997/08/01">
<META NAME="Keywords" CONTENT="kbbug3.51 kbbug4.00 ntdomain ntgeneral ntsecurity NTSrv">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When domain synchronization occurs at the automatic interval or when issued manually, you may encounter the following events:  5730 - Replication of the SAM Global group (RID:0x200) from primary domain controller               failed with the follo...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABO,QBWP,QA9A,QAH5,QBWU,QBWS,QBW3,QAGU,QA7H,QANG,QBQU,QAGR,QDNW,QAY2,QAPN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Domain Synchronization Fails With 5730 or 5731 and 5716</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172302</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server versions 3.51 and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When domain synchronization occurs at the automatic interval or when
issued manually, you may encounter the following events:
<P>
5730 - Replication of the SAM Global group (RID:0x200) from primary domain
controller &lt;Domain name&gt; failed with the following error: cannot perform
this operation on built-in accounts.
<P>
5731 - Replication of the built-in local group (rid:0x220) from the
primary domain controller failed with the following error: A new member
could not be added to a local group because the member has the wrong
account type.
<P>
5716 - The partial synchronization replication of the SAM database from the
primary domain controller &lt;name&gt; failed with the following error:
Cannot perform this operation on built-in accounts.
<P>
<P><h2>CAUSE</h2>
 
<P>
In order to ensure an administrator's ability to manage servers in a
domain, Windows NT Server maintains a value called AdminCount. AdminCount
is a one-byte field that is incremented for each instance that the
administrator user account is directly added to the Administrators local
group, or indirectly made a member of the Administrators local group via a
global group.
<P>
Prior to Windows NT Server 3.51 Service Pack 4, the backup domain
controller's (BDC) AdminCount field could sometimes get out of sync with
the primary domain controller's (PDC) AdminCount field. Although this
problem was fixed in Windows NT 3.51 Service Pack 4, the value was never
recalculated for the BDCs in the domain.
<P>
BDCs analyze the AdminCount field prior to removing any instances of the
Administrator from the Administrators group. If the BDC calculates that
this field will be less then 1 after it commits changes from the PDC
synchronization, then you will see 5730 or 5731 events in the Event Viewer.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
If the administrator is already a member of both the Domain Administrators
and the Administrators group, the following steps will increment the
administrator count on each BDC.

<OL><P><LI>Click the Start button, point to Programs, point to Administrative
   Tools, and click User Manager for Domains.

<P><LI>In User Manager for Domains, create a new global group by clicking New
   Global Group from the User menu. Type MakeAdmin for the Group Name and
   AdminCount Workaround for the Description.

<P><LI>Double-click the MakeAdmin global group icon located in the
   Groups/Description view pane.

<P><LI>Select the Administrator user, and then click Add in the global Group
   Properties dialog box.

<P><LI>Double-click the Administrators local group icon located in the
   Groups/Descriptions view pane.

<P><LI>Click Add in the Local Group Properties dialog box.

<P><LI>Select the MakeAdmin global group in the Add Users and Groups dialog
   box, click Add, and then click OK.

<P><LI>Click OK on the Local Group Properties dialog box.

<P><LI>Wait for domain synchronization to complete or force a full
   synchronization by running: NLTEST/SYNC.
<P>
</OL>NOTE: If you run NLTEST /SYNC, the full synchronization can take several
minutes. Run NLTEST /BDC_QUERY:&lt;Domain Name&gt; to check the status of the
synchronization. NLTEST can be found on the Windows NT 4.0 Resource Kit CD.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.51 and
4.0. We are researching this problem and will post new information here in
the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt usrmgr<BR>
Keywords          : kbbug3.51 kbbug4.00 ntdomain ntgeneral ntsecurity NTSrv<BR>
Version           : WinNT:3.51,4.0<BR>
Platform          : winnt<BR>
Hardware          : x86<BR>
Issue type        : kbbug<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
