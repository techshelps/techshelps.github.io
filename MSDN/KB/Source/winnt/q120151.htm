

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Browsing a Wide Area Network with WINS </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q120151">
<META NAME="KBModify" CONTENT="1997/12/31">
<META NAME="KBCreate" CONTENT="1994/09/20">
<META NAME="Keywords" CONTENT="ntdomain ntnetserv NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article discusses how resource browsing works across a Wide Area Network (WAN) and how Microsoft's Windows Internet Name Service (WINS) improves cross-subnet browsing.  MORE INFORMATION  Browsing with Windows NT version 3.1 (pre-WINS)  In Wind...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QA9A,QBWO,QAMA,QAOE,QBW3,QBWE,QAUJ,QBWD,QDL9,QBWQ,QBWN,QARL,QAE1,QBXB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Browsing a Wide Area Network with WINS</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 31, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q120151</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows for Workgroups version 3.11
<LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article discusses how resource browsing works across a Wide Area
Network (WAN) and how Microsoft's Windows Internet Name Service (WINS)
improves cross-subnet browsing.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Browsing with Windows NT version 3.1 (pre-WINS)</h3>
 
<P>
In Windows NT version 3.1, browser information transmission relies almost
entirely on network broadcasts. In a WAN environment (using a network
protocol such as TCP\IP) domains are typically separated by routers. To
reduce bandwidth usage, broadcast packets are often filtered and do not
pass through routers thus limiting them to the local subnet.
<P>
As a result, the Windows NT version 3.1 default B-Node name resolution
cannot resolve names on remote subnets. Each local subnet functions as an
independent browsing entity, with its own Master Browser and Backup
Browsers. Browse elections occur on a per subnet basis.
<P>
Windows NT Advanced Server version 3.1 supports cross-subnet browsing. To
browse across a WAN, at least one Windows NT Advanced Server is required
in each subnet. The Domain Master Browser is responsible for maintaining a
WAN wide browse list of available servers in the domain and all accessible
domains.
<P>
When a domain spans multiple subnets, the Master Browsers for each subnet
announce themselves to the Domain Master Browser using the directed
datagram, "MasterBrowserAnnouncement". The Domain Master Browser then
remotes a "NetServerEnum" call to the Master Browser that announced itself
in order to collect that subnet's list of servers. The Domain Master
Browser merges the server list from the Master Browser with its own server
list. This process is done every 15 minutes to guarantee that the Domain
Master Browser has a complete list of servers in the domain.
<P>
Now, when a client remotes a "NetServerEnum" call to the Master Browser,
the Master Browser will be able to return all of the servers in the
domain, regardless of what subnet they are on.
<P>
NOTE: A Windows NT workgroup cannot span multiple subnets. If a Windows NT
workgroup is implemented across two or more subnets, it will function as
separate workgroups.
<P>
To ensure each subnet's Master Browser can access every domain's Primary
Domain Controller (PDC), the Master Browser must maintain a LMHOSTS file
containing the name of each domain's PDC and Backup Domain Controllers
(BDC) with a #DOM extension. To guarantee that each PDC can access the
local browse list from each subnet's Master Browser, TCP/IP (and other WAN
protocols) must cache the client address for a reasonable period of time.
<P>
<P><h3>Browsing with Windows NT Server version 3.5 or later with WINS</h3>
 
<P>
Windows NT Server versions 3.5 or later include the Windows Internet Name
Service (WINS). WINS is basically a directory service for NetBIOS names and
IP addresses.
<P>
The Domain Master Browser registers a unique Browser name of "&lt;DOMAIN&gt;[1B]"
with the WINS server. Other Domain Master Browsers will periodically query
the WINS server for a list of domains. They then merge this list into their
local domain browse list. They then propagate this list to the Master
Browser on each subnet via the mechanism mentioned above.
<P>
The Domain Master Browser queries the WINS server in a two part process:

<OL><P><LI>The Browser does a wild card lookup of all domain names ending in [1b].

<P><LI>Then the Browser does a reverse query for each individual &lt;DOMAIN&gt;[1B]
   name to learn the unique name of the Domain Master Browser for that
   domain.
<P>
</OL>In addition to querying the WINS server, the Domain Master Browsers
continue to collect server lists and domain names in the above mentioned
ways.
<P>
NOTE: Only WINS-aware Domain Master Browsers (those in Windows NT versions
3.5 or later) will register their &lt;DOMAIN&gt;[1B] name with the WINS server.
Windows NT version 3.1 Domain Master Browsers will not use WINS.
<P>
<P><h3>Windows NT Workstation versions 3.5 or later are WINS-Aware</h3>
 
<P>
Windows NT Workstation versions 3.5 or later remote the "NetServerEnum"
call to a Backup Browser Master for its domain. The list of domains
returned includes those the Domain Master Browser discovered via the WINS
server. When the Workstation browses a remote domain it will query the WINS
server for the IP address of the computer that registered the &lt;DOMAIN&gt;[1b]
name. The Workstation then sends a "GetBackupListReq" to the IP address and
picks one of the machine names from the response and remotes a
"NetServerEnum" call to that name to get a list of computers in that
domain.
<P>
<P><h3>Windows NT version 3.1 Clients are Not WINS-Aware</h3>
 
<P>
When the Windows NT 3.1 client browses a remote domain, it sends a
"GetBackupListReq" to the name &lt;DOMAIN&gt;[1d], not &lt;DOMAIN&gt;[1b]. Because
there is no Domain Master Browser for this domain in its subnet. The
client will eventually give up and will perform a "double hop" to its local
Domain Browser Master. The browser server will remote the NetServerEnum API
for the client. How the remote is resolved depends on if the browser server
is WINS aware or not.
<P>
<P><h3>Windows for Workgroups version 3.11 Clients with TCP/IP-32 are WINS-Aware</h3>
 
<P>
Windows for Workgroups version 3.11 clients can be WINS aware through
TCP/IP-32 for Windows for Workgroups. WINS will help with standard
workstation connections. However, the browser code that they use is not
WINS or WAN aware. If the Windows for Workgroups client is in local
browser domain that has a Windows NT 3.5 or later browser server, the
client will see a list of all remote domains. However, if the client
selects one of these names it will not be able to resolve it. The client is
unaware of the special [1b] name.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodtcp32 prodnt 3.10 3.50 enterprise arp wfw<BR>
4.00<BR>
wfwg<BR>
Keywords          : ntdomain ntnetserv NTSrvWkst nttcp kbnetwork<BR>
Version           : 3.1 3.11 3.5 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 31, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
