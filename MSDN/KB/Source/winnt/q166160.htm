

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Stop C000021a After Applying Windows NT 4.0 Service Pack </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166160">
<META NAME="KBModify" CONTENT="1997/12/18">
<META NAME="KBCreate" CONTENT="1997/03/31">
<META NAME="Keywords" CONTENT="ntsetup NTSrvWkst kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  After you apply a service pack for Windows NT 4.0, the computer may stop with the following error message on the subsequent restart:     Stop:  c000021a {Fatal System Error}    The session manager initialization system process terminated    unexpec...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDO3,QAXB,QAGB,QAA1,QAIJ,QDI2,QACK,QAB4,QDKA,QDIV,QBWS,QDK2,QAY2,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Stop C000021a After Applying Windows NT 4.0 Service Pack</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166160</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After you apply a service pack for Windows NT 4.0, the computer may stop
with the following error message on the subsequent restart:
<P>
<PRE>   Stop:  c000021a {Fatal System Error}
   The session manager initialization system process terminated
   unexpectedly with a status of 0xc0000005 (0x00000000, 0x0000000)

</PRE>NOTE: The parameters in parenthesis are specific to your system
configuration and may differ each time.
<P>
<PRE>   -or-

</PRE>After you install a Windows NT 4.0 service pack, the system restarts at
the blue kernel screen without an error message and continues in a restart
loop.
<P>
<P><h2>CAUSE</h2>
 
<P>
This can be caused by a corrupt Windows NT system file, or where one or
more Windows NT system files, which are in use, may not be copied properly
while applying a service pack.
<P>
On Compaq servers that are running Compaq's Insight Manager, the service
pack update program would display a message that the file Ntdll.dll was
busy. If you skipped the copy of this file and continued the installation,
the system will exhibit one of the above symptoms on start up.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
You resolve this problem by performing one of the following:

<UL><LI>If the system files are on a FAT partition, boot to an MS-DOS bootable
   floppy disk and replace Ntdll.dll with the updated version from Windows
   NT 4.0 Service Pack 2.

<LI>Replace Ntdll.dll with the updated version from Service Pack 2 by
   modifying the Setup.log file on the Emergency Repair Disk (ERD). For
   more information, please see the following article in the Microsoft
   Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A HREF="../WINNT/Q164471.htm">Q164471</A></B>
<PRE></PRE>      TITLE     : Replacing System Files Using a Modified Emergency
                  Repair Disk

</PRE><LI>Copy the Setupdd.sys file from Service Pack 2 to the second Windows NT
   Setup disk, run an Emergency Repair, select the option to "Verify
   Windows NT System files", and then choose to replace the Ntdll.dll file.

<LI>If the system files are on an NTFS partition, install a parallel copy of
   Windows NT and replace Ntdll.dll in the original folder with the updated
   version from Service Pack 2.
<P>
</UL>Perform the following steps to allow the service pack to install correctly
if you use Insight Manager on a Compaq computer:

<OL><P><LI>Change the below services to a startup type of MANUAL using the Windows
   NT Control Panel Services tool:
<P>
<P><PRE>      Compaq Automatic Shutdown
      Insight Agents
      SNMP
</PRE>
<P><LI>Shut down and restart the computer.

<P><LI>Install the Windows NT Service Pack.

<P><LI>Shut down and restart the computer.

<P><LI>Change the services in step 1 back to AUTOMATIC and then start them.
<P>
</OL><h2>MORE INFORMATION</h2>
 
<P>
NOTE: There are other causes for Stop: 0xC000021a as listed below:
<P>
For more information, please refer to the following Microsoft Knowledge
Base articles:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q156669.htm">Q156669</A></B>
   TITLE     : How to Troubleshoot a Stop 0xC000021A

   ARTICLE-ID: <B><A HREF="../WINNT/Q160658.htm">Q160658</A></B>
   TITLE     : Stop C000021A Using MoveFileEx MOVEFILE_DELAY_UNTIL_REBOOT

   ARTICLE-ID: <B><A HREF="../WINNT/Q139843.htm">Q139843</A></B>
   TITLE     : Recovering from STOP 21a Caused by Disk Mirror Sets
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Stop 0xc000021a ntdll.dll<BR>
Keywords          : ntsetup NTSrvWkst kbsetup<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>
Solution Type     : kbworkaround<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
