

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Upgrading LAN Manager Server to Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q104097">
<META NAME="KBModify" CONTENT="1997/09/22">
<META NAME="KBCreate" CONTENT="1993/09/07">
<META NAME="Keywords" CONTENT="ntnetserv kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" This article provides basic information on using the Microsoft Windows NT Advanced Server Upgrade for LAN Manager. This process pertains only to OS2/Lan Man servers and not to Unix LMX and the SCO Lan Man emulator. More detailed instructions and bac...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAGU,QAVZ,QBWE,QAH5,QA3W,QAM4,QAA1,QABI,QAGR,QAC1,QDL9,QBWQ,QBWO,QBWN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Upgrading LAN Manager Server to Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 22, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q104097</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Advanced Server Upgrade for LAN Manager
   version 3.1
</UL> 
<P>
This article provides basic information on using the Microsoft Windows NT
Advanced Server Upgrade for LAN Manager. This process pertains only to OS2/Lan Man servers and not to Unix LMX and the SCO Lan Man emulator. More detailed instructions and
background information can be found included with the product.
<P>
The upgrade uses three new utilities in conjunction with a utility that is
included with LAN Manager.
<P>
<P><h3>Windows NT Utilities</h3>
 
<P>
PORTUAS: Converts the LAN Manager user account database (UAS) to a Windows
<PRE>         NT security accounts manager (SAM) database.

</PRE>ACLCONV: Converts LAN Manager access control lists (ACLs) to Windows NT
<PRE>         permissions on Windows NT file system (NTFS) files.

</PRE>CONVERT: Converts a partition from FAT or HPFS to NTFS.
<P>
NOTE: These utilities are not listed in the Windows NT documentation.
<P>
<P><h3>LAN Manager Utility</h3>
 
<P>
BACKACC: Backs up LAN Manager UAS and ACLs.
<P>
<P><h2>UPGRADE PROCEDURES</h2>
 
<P>
NOTE: It is assumed you are performing a clone upgrade, meaning you are
installing Advanced Server on a new system, not your current LAN Manager
server. All necessary files will later be transferred from LAN Manager to
Advanced Server.
<P>
WARNING: Before starting this process, make sure that you perform a
complete LAN Manager server backup.
<P>
<P><h3>Initial Preparation</h3>
 

<OL><P><LI>On the LAN Manager server, run the BACKACC program. BACKACC backs up the
</OL>NET.ACC (LAN Manager account database) to NETACC.BKP. It also backs up ACLs
to the ACLBAKx.ACL file (where x refers to the drive letter). You may want
to use the /S switch to perform a recursive ACL backup.
<P>
Example: The following command line backs up the ACLs for all the files on
drive C (including sub-directories) as well as the UAS:
<P>
<PRE>   backacc c:\ /s

</PRE></OL>NOTE: Please refer the LAN Manager Administrative Reference manual for more
information on BACKACC.

<OL><P><LI>On the target server, install Windows NT Advanced Server following the
</OL>procedure outlined in the documentation. Copy NETACC.BKP and ACLBAKx.ACL to
the root of the new server.
<P>
Note: Issues involving operation of a Windows NT server and a LAN Manager
Primary Domain Controller (PDC) in the same domain will not be discussed
here. Please see the Concepts and Planning Guide for Windows NT or the
upgrade documentation for more information.

<OL><P><LI>Copy all the data files from the LAN Manager server that need to be
</OL>restored to the Windows NT Advanced Server. Make sure they are located in
exactly the same directory structure on both servers. This is critical when
restoring file permissions. Note that the drive letter on the Windows NT
computer can be different from that of the LAN Manager server.
<P>
<P><h3>Restoring User Account Database</h3>
 

<OL><P><LI>Run PORTUAS with the following options from Command Prompt on the
   Windows NT computer:
<P>
<P><PRE>      portuas -v -f netacc.bkp
</PRE><P>
   The -V switch puts PORTUAS in verbose mode. The -F switch is used to
   specify the location of the LAN Manager accounts.
<P>
   NOTE: Use /? for help with PORTUAS syntax.

<P><LI>Verify that accounts have migrated by looking in Windows NT User Manager
   for Domains to see that the accounts were transferred.
<P>
</OL>User account permissions such as administrator accounts are applied to the
new Windows NT security database. The following groups are mapped
<P>
<PRE>   LAN Manager Domain   Windows NT Domain
   ------------------   -----------------
   Admins               Domain Administrators
   Users                Domain Users
   Guests               Guests
   Servers              Servers

</PRE></OL>Any other non-default groups become domain groups in the Windows NT domain.
<P>
<P><h3>Restoring File Permissions</h3>
 
<P>
Run ACLCONV on the Windows NT computer.
<P>
NOTE: The Windows NT computer must have NTFS volumes for ACLCONV to run.
The directory and file structure must be identical to on both computers.
<P>
Example: The following command restores the C drive (aclbakC.acl) and keeps
the results of the conversion in LOGFILE.
<P>
<PRE>   aclconv /data: aclbakc.acl /log: logfile

</PRE>If you were converting the same ACLs but to a different drive on the
Windows NT computer, you would use the following command line:
<P>
<PRE>   aclconv /data: aclbakc.acl /log: logfile /newdrive:d

</PRE><h3>Converting File System</h3>
 
<P>
CONVERT can be run during Windows NT Setup or any time afterwards.
<P>
Example: The following command line converts the X drive to NTFS:
<P>
<PRE>   convert x: /fs:ntfs

</PRE>NOTE: You cannot convert back from NTFS to FAT. Only Windows NT can read
NTFS volumes.
<P>
<P><h2>IN PLACE UPGRADE</h2>
 
<P>
If you must install Windows NT Advanced Server over your existing LAN
Manager server installation, make sure that you do a full backup first. In
place upgrades require that your system be down and unavailable for some
time. In general, the procedures above still apply to the upgrade.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodlm2nt<BR>
Keywords          : ntnetserv kbnetwork<BR>
Version           : 3.1<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 22, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
