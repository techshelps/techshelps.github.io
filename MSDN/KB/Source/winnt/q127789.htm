

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LAN Manager Clients Cannot See Windows NT Computers </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q127789">
<META NAME="KBModify" CONTENT="1997/11/20">
<META NAME="KBCreate" CONTENT="1995/03/16">
<META NAME="Keywords" CONTENT="kbbug3.50 ntnetserv NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you run NET VIEW on a LAN Manager client, the list of Windows NT workstations and servers in the domain is not available for several minutes.  CAUSE =====  This problem occurs due to the Windows NT broadcast design.  NOTE: To make Windows NT w...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDMQ,QAVZ,QARL,QBWE,QBFY,QAGU,QAH5,QDL9,QBWQ,QBWO,QBWN,QACE,QAUJ,QBWD V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>LAN Manager Clients Cannot See Windows NT Computers</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q127789</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5
<LI>Microsoft Windows NT Server version 3.5
<LI>Microsoft Windows NT Workstation version 3.51
<LI>Microsoft Windows NT Server version 3.51
<LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Windows NT Workstation version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you run NET VIEW on a LAN Manager client, the list of Windows NT
workstations and servers in the domain is not available for several
minutes.
<P>
<P><h2>CAUSE</h2>
 
<P>
This problem occurs due to the Windows NT broadcast design.
<P>
NOTE: To make Windows NT workstations and servers visible to LAN Manager
clients, you must configure the Windows NT computers to broadcast server
announcements to LAN Manager clients. To do this, run Control Panel, choose
Network, select Server, choose Configure, the select "Make Browser
Broadcast to LAN Manager 2.x clients," and choose OK.
<P>
On Windows NT 4.0 machines, use REGEDT32.EXE to set the * entry in
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\LanManServer\Parameter
s\ to 1.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.5.
This problem has been corrected in the latest U.S. Service Pack for Windows
NT version 3.5. For information on obtaining the Service Pack, query on the
following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Original Design</h3>
 
<P>
LAN Manager clients rely on server announcements that are broadcast over
second class mailslots. The LAN Manager clients pickup server announcements
and store them (for 1.5 times the announcement rate). If you run NET VIEW
and the stored server announcement is still valid, the server name and
server comments are displayed. If the next server announcement is not
received by the client within 1.5 times the announcement rate, the server
is dropped from the list. So if a client receives a server announcement at
one minute intervals, it is likely to drop the server from the list if it
does not receive another announcement in 1.5 minutes.
<P>
Here is a sample server announcement from USER1STA to LAN Manager clients:
<P>
<PRE>   USER1STA *NETBIOS Multicast SMB C transact, File = \MAILSLOT\LANMAN
   NETBIOS: Datagram (0x08), USER1STA         -&gt; USER1DOM       &lt;00&gt;
         -----
   NETBIOS: Destination Name = USER1DOM       &lt;00&gt;
       NETBIOS: SMB Name Type = Workstation (00)
       NETBIOS: Source Name = USER1STA
       NETBIOS: SMB Name Type = Server (20)
       NETBIOS: NetBIOS Data: Number of data bytes remaining = 115
   SMB: C transact, File = \MAILSLOT\LANMAN
      ------
   SMB: Command = C transact
      ------
   SMB: Mailslot class = Unreliable (broadcast)
           SMB: Byte count = 46
           SMB: Byte parameters
           SMB: Path name  = \MAILSLOT\LANMAN
           SMB: Transaction data
           SMB: Server announce opcode = Server announcement
           SMB: Service Flags Summary = 4097 (0x1001)
            SMB: .....................1 = Workstation service running
            SMB: ......................0. = Server service not available
           SMB: Major version = 3
           SMB: Minor version = 50
           SMB: Server announce rate = 720
           SMB: Computer name = USER1STA
           SMB: Server comment = User1's System;

</PRE>NOTE: USER1STA sends a Multicast datagram to destination NetBIOS group name
USER1DOM&lt;00&gt;. All LAN Manager clients post a NetBIOS Receive on their own
domain, as well as other domains listed in their LANMAN.INI file, during
initialization.
<P>
The server announce rate is set is seconds. Therefore, the server announce
rate of 720 in the above example, it equates to 12 minutes. In Windows NT
3.1, the announce LAN Manager Server parameter in the registry could be
used to set the announcement interval. However, in Windows NT workstation
and Windows NT Server version 3.5, a new algorithm was developed. The
server announcements are made during the start of the server service, and
at the following approximate intervals:
<P>
<PRE>   .5, 1, 1.5, 4, 8, 12, remain at 12 minutes].

</PRE>For example:
<P>
<PRE>   #  Time     Src         Description
   1  27.390   USER1STA    C transact, File = \MAILSLOT\LANMAN (30sec)
   2  50.303   USER1STA    C transact, File = \MAILSLOT\LANMAN (~20).
   3  79.151   USER1STA    C transact, File = \MAILSLOT\LANMAN (~30)
   4  348.700  USER1STA    C transact, File = \MAILSLOT\LANMAN (~260)
   5  861.290  USER1STA    C transact, File = \MAILSLOT\LANMAN (~520)
   6  1586.99  USER1STA    C transact, File = \MAILSLOT\LANMAN (~720)
   7  2312.10  USER1STA    C transact, File = \MAILSLOT\LANMAN (~720)
   8  3033.39  USER1STA    C transact, File = \MAILSLOT\LANMAN (~720)
   9  3758.56  USER1STA    C transact, File = \MAILSLOT\LANMAN (~720)

</PRE>The announce parameter is ignored.
<P>
As a result, you may not see Windows NT workstation and server names when
you run NET VIEW on LAN Manager clients, right after you boot the computer.
The longest wait time, if you just miss a server announcement, would be 12
minutes. Once you receive the server announcement, it is valid for 18
minutes.
<P>
<P><h3>New Design</h3>
 
<P>
The default initial announce frequency for LAN Manager clients is now four
minutes, and increases to once every 12 minutes.
<P>
The AnnDelta delta parameter, although adjustable, defaults to 3000
milliseconds. This parameter specifies the time by which the announcement
period can vary. This helps to prevent several servers from continuously
announcing simultaneously, thereby reducing network load peaks.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt browsing mail slots server message block<BR>
Keywords          : kbbug3.50 ntnetserv NTSrvWkst kbnetwork<BR>
Version           : 3.5 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
