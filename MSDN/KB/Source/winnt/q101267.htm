

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Files Are Larger on FAT Partitions </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q101267">
<META NAME="KBModify" CONTENT="1997/05/07">
<META NAME="KBCreate" CONTENT="1993/07/08">
<META NAME="Keywords" CONTENT="kbbug3.10 kbother ntfilesys">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" This article provides information on files stored on a FAT partition under Windows NT 3.1. It is divided into two sections:   - FAT Files are Larger than NTFS or HPFS Files  - 32-bit Commands Result in Large Initial File Sizes  FAT Files are Larger ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW5,QABX,QDJB,QBWP,QBEF,QALG,QAFV,QAMV,QANY,QAJQ,QAY5,QAX6,QDKO,QDKN,QDKM V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Files Are Larger on FAT Partitions</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 7, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q101267</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
</UL> 
<P>
This article provides information on files stored on a FAT partition under
Windows NT 3.1. It is divided into two sections:

<UL><LI>FAT Files are Larger than NTFS or HPFS Files
<LI>32-bit Commands Result in Large Initial File Sizes
<P>
</UL><h3>FAT Files are Larger than NTFS or HPFS Files</h3>
 
<P>
Files stored on a FAT file system take more disk space than on HPFS or NTFS
file systems. This is because the FAT file system uses clusters to allocate
disk space for files. Clusters represent the minimum amount of disk space
any file can use. For example: If your cluster size is 4K and you create a
1 byte file, you will waste almost 4095 bytes.
<P>
If you are storing many large files on a FAT file system, the wasted space
is minimal. But, if you have many small files, the wasted space can be
equal to or greater than the amount of data you are storing.
<P>
FAT cluster size is dependent on the size of the logical drive. Because the
FAT file system can only track a maximum of 64K clusters, the larger the
logical drive or partition, the larger the cluster size. Also, there is a
maximum cluster size of 64K, making the largest logical drive size 4
gigabytes.
<P>
NOTE: The maximum cluser size under MS-DOS is 32K, making the largest
logical drive size 2 gigabytes.
<P>
HPFS and FAT both have a fixed sector size of 512 bytes. HPFS uses a
cluster size of two sectors (1K). NTFS supports cluster sizes of 512, 1024,
2048, and 4096 bytes.
<P>
NOTE: In some cases, files stored on an NTFS partition may be bigger than
the same files stored on a FAT partition. This is because NTFS stores all
files in the master file table in 2048 byte blocks. If a FAT partition is
using 512 byte clusters, it will store a small file more efficiently than
NTFS.
<P>
<P><h3>32-bit Commands Result in Large Initial File Sizes</h3>
 
<P>
Using 32-bit commands from Microsoft Visual C/C++ to create a file on a FAT
partition under Windows NT will cause the file to take more space on the
hard drive than is expected. This behavior is designed to optimize write
operations to the file. 64K blocks are allocated so that later write
operations to the file can be made to a contiguous area of disk space. Once
the file is closed, the file size is reduced to the amount of space
actually used by the file. And, the amount of disk space allocated when the
files are opened is lowered as the total amount of disk space on the drive
decreases.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt 32 64<BR>
Keywords            : kbbug3.10 kbother ntfilesys<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 7, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
