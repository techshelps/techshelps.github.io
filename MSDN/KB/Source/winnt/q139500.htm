

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TN3270: Message Close Delay Option </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q139500">
<META NAME="KBModify" CONTENT="1997/11/07">
<META NAME="KBCreate" CONTENT="1995/11/12">
<META NAME="Keywords" CONTENT="snatn3270 kbinterop kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The TN3270 Server Administration program in SNA Server 2.11 and the Settings tab of the TN3270 Server Properties in SNA Server 3.0 allow the administrator to configure the  Message Close Delay  timer. This timer is used to close the TCP/IP connecti...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGB,QBE7,QBE6,QADN,QAI4,QAAW,QAPN,QATK,QAO4,QAUQ,QAI5,QAEV,QBG2,QAX6,QARL V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TN3270: Message Close Delay Option</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 7, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q139500</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server versions 2.11 and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The TN3270 Server Administration program in SNA Server 2.11 and the
Settings tab of the TN3270 Server Properties in SNA Server 3.0 allow the
administrator to configure the "Message Close Delay" timer. This timer is
used to close the TCP/IP connection between the client and server. The more
information section gives an example where this option can be used.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
You can use the "Message Close Delay" timer to configure how quickly TN3270
disconnects clients that have failed to negotiate successfully with the
TN3270 server, but have not yet closed their TCP/IP connection. This
becomes important when you have hundreds of clients connecting and
resources are limited.
<P>
NOTE: Some TN3270 emulators wait until the TN3270 server closes the
connection before returning control to the application. When this happens
users have to wait until this timer expires before they can do anything.
<P>
The following TN3270 server trace illustrates the default 10 second close
delay timer. Note the 10 second time delay in handling the
"Event=TEV_SessionTermination". For more information on TN3270 tracing
refer to appendix B of the TN3270 Admin guide.
<P>
&gt;10/19 10:29:37.676 (+ smidgen )  Event=TEV_TCPSendIssued
<PRE> Thread = 0x00000128  Session = 0x001679E8  Socket = 0x00000080
 Number of bytes = 104
 000000  0d0a 544e 3332 3730 2053 6572 7669 6365  !..TN3270 Service!
 000010  2045 7272 6f72 2035 3131 0d0a 0d0a 5465  ! Error 511....Te!
 000020  6c6e 6574 206e 6567 6f74 6961 7469 6f6e  !lnet negotiation!
 000030  2066 6169 6c75 7265 3a20 2063 6c69 656e  ! failure:  clien!
 000040  7420 6469 6420 6e6f 7420 7365 6e64 2054  !t did not send T!
 000050  4e33 3237 3020 7465 726d 696e 616c 2074  !N3270 terminal t!
 000060  7970 652e 0d0a 0d0a                      !ype.....       !

</PRE>&gt;10/19 10:29:37.676 (+ smidgen )  Event=TEV_SessionTermination
<PRE> Thread = 0x00000128  Session = 0x001679E8  Socket = 0x00000080
 Session waiting in termination state SESTERM_WaitingForMessageTimeOut

</PRE>&gt;10/19 10:29:37.676 (+ smidgen )  Event=TEV_TCPSendCompleted
<PRE> Thread = 0x00000128  Session = 0x001679E8  Socket = 0x00000080
 Bytes transferred = 104

</PRE>&gt;10/19 10:29:47.690 (+ 10 secs )  Event=TEV_SessionTermination
<PRE> Thread = 0x00000128  Session = 0x001679E8  Socket = 0x00000080
 Session terminated
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna<BR>
Keywords          : snatn3270 kbinterop kbnetwork<BR>
Version           : 2.11 3.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 7, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
