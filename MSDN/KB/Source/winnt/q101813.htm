

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Why AutoCAD 386 Doesn't Work with Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q101813">
<META NAME="KBModify" CONTENT="1997/03/24">
<META NAME="KBCreate" CONTENT="1993/07/22">
<META NAME="Keywords" CONTENT="kb3rdparty ntdosap NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  AutoCAD 386 release 11 and 12 do not run with Windows NT because AutoCAD 386 requires DPMI version 1.0 and Windows NT supports version 0.9. When you try to run AutoCAD 386 in a virtual machine, you receive the following Pharlap error message:     T...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBW6,QAGI,QAW4,QDIO,QDL9,QBWQ,QBWO,QBWN,QAJQ,QBWS,QA5W,QANE,QAIF,QBQU V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Why AutoCAD 386 Doesn't Work with Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 24, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q101813</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5 and 3.51
<LI>Microsoft Windows NT Server versions 3.5 and 3.51
<LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Windows NT Workstation version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
AutoCAD 386 release 11 and 12 do not run with Windows NT because AutoCAD
386 requires DPMI version 1.0 and Windows NT supports version 0.9. When you
try to run AutoCAD 386 in a virtual machine, you receive the following
Pharlap error message:
<P>
<PRE>   The 386 chip is currently executing in virtual 8086 mode under the
   control of another program. You must turn off this other program in
   order to use 386 DOS-Extender to run in protected mode.

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The AutoCAD memory model requires the ability to map a block of a virtual
machine's conventional memory (below 640K) into one or more of its
protected mode segments.
<P>
NOTE: The same conventional memory block is mapped by AutoCAD into multiple
protected mode segments; therefore, any extensions must not assume a 1-to-1
mapping between a particular conventional memory block and a particular
segment.
<P>
For AutoCAD to run from the Windows NT MS-DOS command prompt:

<UL><LI>Microsoft would have to implement DPMI 1.0 call 0509 (Map
   Conventional Memory) in the NT DPMI server. 386|DOS-Extender detects
   this functionality by making DPMI call 0401 (Get DPMI Capabilities)
   and checking if bit 3 is set in AX. This is how AutoCAD runs under
   OS/2 2.0.
<P>
   -or-

<LI>An NT driver would need to be written with the same functionality
   that the PHARLAP.386 device driver provides when it is loaded under
   Windows 3.1. This functionality allows 386|DOS-Extender to remap
   arbitrary linear regions be reading and writing PTEs for pages that
   are locked in memory. It also requires that DPMI calls 0600 and
   0601 actually lock pages into memory so they don't move after they
   are remapped. 386|DOS-Extender detects this capability by making
   DPMI call 0A00 with DS:ESI pointing to the string
   "PHARLAP.LINEAR_REMAP." If the capability is present, it returns an
   entry point that 386|DOS-Extender can call to remap linear regions.
<P>
</UL>AutoCAD 386 is manufactured by Autodesk, Inc., a vendor independent of
Microsoft; we make no warranty, implied or otherwise, regarding this
product's performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt ACAD vdm session<BR>
Keywords            : kb3rdparty ntdosap NTSrvWkst<BR>
Version             : 3.1 3.5 3.51 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 24, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
