

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows NT Contains File System Tunneling Capabilities </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172190">
<META NAME="KBModify" CONTENT="1997/09/17">
<META NAME="KBCreate" CONTENT="1997/07/30">
<META NAME="Keywords" CONTENT="ntfilesys NTSrvWkst kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT 4.0 contains file system tunneling capabilities to allow for compatibility with applications that rely on file systems being able to hold onto file meta-info for a short period of time. This occurs after deletion or renaming and re-intro...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAUJ,QBWP,QDJ0,QAEF,QBF0,QAU3,QAMR,QARM,QAKD,QAFH,QAFI,QACE,QAUR,QAGB,QABA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Windows NT Contains File System Tunneling Capabilities</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172190</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT 4.0 contains file system tunneling capabilities to allow for
compatibility with applications that rely on file systems being able to
hold onto file meta-info for a short period of time. This occurs after
deletion or renaming and re-introducing a new directory entry with that
meta-info (if a create or rename occurs to cause a file of that name to
appear again in a short period of time).
<P>
When a name is removed from a directory (rename or delete), its
short/long name pair and creation time are saved in a cache, keyed by
the name that was removed. When a name is added to a directory
(rename or create), the cache is searched to see if there is
information to restore. The cache is effective per instance of a
directory. If a directory is deleted, the cache for it is removed.
<P>
These paired operations will cause tunneling on "name."

<UL><LI>delete(name)/create(name)
<LI>delete(name)/rename(source, name)
<LI>rename(name, newname)/create(name)
<LI>rename(name, newname)/rename(source, name)
<P>
</UL>The idea is to mimic the behavior DOS applications expect when they use the
safe save method. They copy the modified data to a temporary file, delete
the original and rename the temporary to the original. This should appear
to be the original file when complete. Windows NT performs tunneling
on both FAT and NTFS file systems to ensure long/short file names
are retained when 16-bit applications perform this safe save operation.
<P>
<P><h3>How to See the Effects of Tunneling</h3>
 

<OL><P><LI>Create a file called file1.

<P><LI>Wait for one to two minutes.

<P><LI>Create a file called file2.

<P><LI>Perform a DIR /TC. Please note the creation times.

<P><LI>Rename file1 to file.

<P><LI>Rename file2 to file1.

<P><LI>Perform a DIR /TC. Please note the creation times are identical.
<P>
</OL>Both files now show the same creation times; they are identical to the
original FILE1 creation time and is expected behavior with tunneling
enabled.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Tunneling cache time can be adjusted from the default time of 15
seconds or if tunneling capabilities are undesirable can be disabled
by adding a value in the Windows NT Registry.
<P>
If tunneling is disabled, Apps that use this safe save method will
lose the name they are unaware of, usually the LFN, and the
rediscovery of shortcut targets could be impaired since the creation
timestamps will not remain constant for files manipulated by such apps.
Note that creation timestamp maintenance is possible in the absence of
tunneling if an application is smart enough. The same is not true for the
long filenames.
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor (Regedt32.exe), and select the following subkey:
<P>
   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem

<P><LI>From the Edit menu, click Add Value.

<P><LI>Type the following value to reduce the default cache time:
<P>
<P><PRE>      Value Name: MaximumTunnelEntryAgeInSeconds
      Data Type: REG_DWORD
      Value: 15  &lt;-- change to fit your needs in seconds.
</PRE><P>
</OL>-or-
<P>
<PRE>   Type the following value to disable tunneling:

      Value Name: MaximumTunnelEntries
      Data Type: REG_DWORD
      Value: 0

</PRE><P><LI>Exit Registry Editor and Restart Windows NT.
</OL> 
<PRE>Keywords          : ntfilesys NTSrvWkst kbsetup
Version           : WinNT:4.0
Platform          : winnt</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
