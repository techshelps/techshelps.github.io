

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Disk Administrator Cannot Always Save Disk Configuration </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q152160">
<META NAME="KBModify" CONTENT="1997/05/13">
<META NAME="KBCreate" CONTENT="1996/06/05">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Disk Administrator allows you to save configuration information about currently defined drive letters, volume sets, stripe sets with parity, and mirror sets to a floppy disk that can be restored if Windows NT needs to be reinstalled or the drive se...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAC9,QDIZ,QBWU,QBWP,QAH5,QAUR,QDOX,QDIJ,QBXS,QBVV,QAYY,QAU7,QAAP,QAB4,QAIC V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Disk Administrator Cannot Always Save Disk Configuration</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 13, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q152160</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.10 3.50 3.51 4.00
WINDOWS
<P>
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5 and 3.51
<LI>Microsoft Windows NT Server versions 3.5 and 3.51
<LI>Microsoft Windows NT Workstation versions 4.0
<LI>Microsoft Windows NT Server versions 4.0
<P>
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Disk Administrator allows you to save configuration information about
currently defined drive letters, volume sets, stripe sets with parity, and
mirror sets to a floppy disk that can be restored if Windows NT needs to be
reinstalled or the drive sets need to be moved to another system.
<P>
This is accomplished by running Disk Administrator and selecting the
partition, configuration, save or restore options.
<P>
Disk Administrator prompts you to insert a formatted disk into A: and
copies the SYSTEM registry hive containing the configuration information
onto the disk. If the SYSTEM registry hive is too large to fit on the
disk the following error is displayed.
<P>
<PRE>   ERROR: There is not enough space on the disk.

</PRE>If you try the operation again using the same disk another error
occurs:
<P>
<PRE>   ERROR: The configuration registry database is corrupt.

</PRE><h2>CAUSE</h2>
 
<P>
Disk Administrator does not compress the SYSTEM registry hive prior to
copying it to the disk. Even though it reports that there is not enough
space on the disk to store the information, it still makes a zero byte
SYSTEM. File on the disk. If you try the save operation again using the
same disk, the SYSTEM. file is first read by Disk Administrator and is
considered to be corrupt because it is zero bytes in size and doesn't
contain valid registry information.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Use the Rdisk.exe utility to "UPDATE REPAIR INFO" and make a current
emergency repair disk (ERD). This ERD will contain the disk configuration
information that can be used during a restore at a later time.
<P>
NOTE: The repair disk created during initial Windows NT Setup will not
contain the disk configuration information--you must use an ERD that has
been updated using the Rdisk.exe utility as stated above.
<P>
If you try to use the ERD directly to restore configuration information,
Disk Administrator will report the following:
<P>
<PRE>   ERROR: The system cannot find the file specified.

</PRE>This is because Disk Administrator does not know how to read the compressed
SYSTEM._ hive on the ERD.
<P>
To use the ERD to restore configuration information, perform the
following steps:

<OL><P><LI>Make a directory structure on any local drive as follows:
<P>
<P><PRE>      Winnterd\System32\Config
</PRE>
<P><LI>Copy the SYSTEM._ file from the emergency repair disk to the Config
   directory you made in step 1 above.

<P><LI>Use the expand utility to expand the compressed system._ file.
   Type expand.exe system._ system

<P><LI>Open Disk administrator and select partition, configuration, search

<P><LI>Disk administrator will search all the local drives for a valid registry
   file to restore the disk configuration information from. Select the
   entry that corresponds to the directory you made in step 1:
<P>
<P><PRE>      C:\WINNTERD
</PRE><P>

<P><LI>Make sure that the device Ftdisk is configured to start at boot time in
   the Control Panel\Devices tool. This is disabled by default on newly
   installed systems that don't have fault tolerant devices configured.
   This driver is necessary to support fault tolerant configurations.

<P><LI>After you perform a normal shutdown and restart, all of the previously
   unknown partitions and volumes should be intact and accessible.
<P>
</OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.x We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory:<BR>
KBSubcategory:<BR>
Additional reference words:<BR>
Version             : 3.10 3.50 3.51<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 13, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
