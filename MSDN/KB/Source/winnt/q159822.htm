

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DHCP Clients' Ability to Send DHCPDECLINE Message </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q159822">
<META NAME="KBModify" CONTENT="1998/02/04">
<META NAME="KBCreate" CONTENT="1996/11/21">
<META NAME="Keywords" CONTENT="kbbug4.00 NTPROTOCOL nttcp">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  In the current implementation of the Microsoft dynamic host configuration protocol (DHCP) service, if a device is provided with an Internet Provider (IP) configuration by way of DHCP, we do a courtesy Address Resolution Protocol (ARP) with the prov...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QDJG,QAEV,QARL,QDIZ,QAH6,QBWP,QAVZ,QAC2,QAYC,QBC9,QBC8,QANO,QAHE,QAGU V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>DHCP Clients' Ability to Send DHCPDECLINE Message</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 4, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q159822</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In the current implementation of the Microsoft dynamic host configuration
protocol (DHCP) service, if a device is provided with an Internet Provider
(IP) configuration by way of DHCP, we do a courtesy Address Resolution
Protocol (ARP) with the provided IP address. If anyone responds, that means
the address is in use. In this case, when a duplicate IP is detected as the
TCP/IP protocol tries to initialize, a popup message is provided to the
user stating that a duplicate IP address exists. The user is informed to
get system administration assistance. At that point, the TCP/IP protocol
initialization is failed and the user can't access any network resources.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
DHCP RFC 1541 permits that instead of informing the user, initiating a
manual process, a DHCP_DECLINE transaction can be returned to the DHCP
server. The server will then allocate a different IP address for the
device.
<P>
DHCP RFC 1541 indicates that it is the responsibility of the DHCP client
to notify the DHCP server with a DHCP_DECLINE transaction if the client
determines that there is a problem with the DHCP parameters provided by the
DHCP Server.
<P>
The RFC states:
<P>
3.1 Client-server interaction - allocating a network address:
<P>
<PRE>   The client receives the DHCPACK message with configuration parameters.
   The client performs a final check on the parameters and notes the
   duration of the lease and of the lease identification cookie specified
   in the DHCPACK message. At this point, the client is configured. If the
   client detects a problem with the parameters in the DHCPACK message, the
   client sends a DHCPDECLINE message to the server and restarts the
   configuration process. The client should wait a minimum of ten seconds
   before restarting the configuration process to avoid excessive network
   traffic in case of looping.

</PRE>4.3.3 DHCPDECLINE message:
<P>
<PRE>   If the server receives a DHCPDECLINE message, the client has discovered
   through some other means that the suggested network address is already
   in use. The server MUST mark the network address as "not allocated" and
   SHOULD notify the local system administrator of a possible configuration
   problem.

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0.
This problem was corrected in the latest US Service Pack for Windows NT.
For information on obtaining this update, query on the following word in
the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: w95 SP2<BR>
Keywords          : kbbug4.00 NTPROTOCOL nttcp<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 4, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
