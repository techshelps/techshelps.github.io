

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PagedPoolSize and NonPagedPoolSize Values in Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q126402">
<META NAME="KBModify" CONTENT="1997/11/18">
<META NAME="KBCreate" CONTENT="1995/02/22">
<META NAME="Keywords" CONTENT="ntnetserv NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT calculates NonPagedPoolSize and PagedPoolSize based on the amount of physical memory present in the computer at boot time. This article describes the algorithms used to calculate these values on an x86-based computer.  NOTE: The Windows ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAKD,QAE5,QDNL,QBW6,QBKX,QAKZ,QDL9,QBWQ,QBWO,QBWN,QAV1,QAV0,QAPF,QAAP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PagedPoolSize and NonPagedPoolSize Values in Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q126402</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5 and 3.51
<LI> Microsoft Windows NT Server version 3.5 and 3.51
<LI> Microsoft Windows NT Workstation version 4.0
<LI> Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT calculates NonPagedPoolSize and PagedPoolSize based
on the amount of physical memory present in the computer at boot time.
This article describes the algorithms used to calculate these values on an
x86-based computer.
<P>
NOTE: The Windows NT 3.5 Resource kit incorrectly describes PagedPoolSize
calculations.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
NonPagedPoolSize and PagedPoolSize are calculated using complex algorithms
based on physical memory size. However, you can use the following formulas
to approximate these values for an X86-based computer.
<P>
<P><h3>Definitions</h3>
 
<P>
MinimumNonPagedPoolSize = 256K
MinAdditionNonPagedPoolPerMb = 32K
DefaultMaximumNonPagedPool = 1 MB
MaxAdditionNonPagedPoolPerMb = 400K
PTE_PER_PAGE = 1024
PAGE_SIZE=4096
<P>
<P><h3>NonPagedPoolSize Calculation</h3>
 
<P>
NonPagedPoolSize = MinimumNonPagedPoolSize +
<PRE>                   ((Physical  MB - 4) * MinAdditionNonPagedPoolPerMB)

</PRE>EXAMPLE - On a 32 MB x86-based computer:
<P>
<PRE>   MinimumNonPagedPoolSize = 256K
   NonPagedPoolSize = 256K + ((32 - 4) * 32K) = 1.2 MB

</PRE>MaximumNonPagedPoolSize = DefaultMaximumNonPagedPool +
<PRE>                    ((Physical MB - 4) * MaxAdditionNonPagedPoolPerMB)

</PRE>If MaximumNonPagedPoolSize &lt; (NonPagedPoolSize + PAGE_SIZE * 16),
<PRE>  then  MaximumNonPagedPoolSize = (NonPagedPoolSize + PAGE_SIZE * 16)

</PRE>IF PagedPoolSize &gt;= 192 MB PagePoolSize = 192 MB
<P>
<PRE>   EXAMPLE - On a 32 MB x86-based computer:

   MaximumNonPagedPoolSize = 1 MB + ((32 - 4) * 400K) = 12.5 MB

</PRE><h3>PagedPoolSize Calculation</h3>
 
<P>
Size = (2 * MaximumNonPagedPoolSize) / PAGESIZE
<P>
Size = (Size + (PTE_PER_PAGE - 1)) / PTE_PER_PAGE
<P>
PagedPoolSize = Size * PAGESIZE * PTE_PER_PAGE
<P>
IF PagedPoolSize &gt;= 192 MB PagePoolSize = 192 MB
<P>
EXAMPLE - On a 32 MB x86-based computer:
<P>
<PRE>   Size = (2 * 12.5M) / 4096 = 6400
   Size = (6400 + (1024 - 1)) / 1024 = 7.25
   PagedPoolSize = 7.25 * 4096 * 1024 = 30MB

</PRE>NOTE: If both values are set to zero in the registry, PagedPoolSize will
calculate to approximately memory size)
<P>
The kernel debugger can be used to view these global variables in memory.
The values shown below are for a 32 MB x86-based computer running Windows
NT 3.5, build 807:
<P>
kd&gt; dd MmDefaultMaximumNonPagedPool
8019e4d4  00100000 (1Mbyte)
<P>
kd&gt; dd MmSizeOfNonPagedPoolInBytes
80196188  00120000 (1,179,648)
<P>
kd&gt; dd MmMinimumNonPagedPoolSize l1
8019e4cc  00040000 (262144)
<P>
kd&gt; dd MmNumberOfPhysicalPages l1
801961ac  00002010 (8208)
<P>
kd&gt; dd MmMinAdditionNonPagedPoolPerMb l1
8019e4d0  00008000 (32768)
<P>
kd&gt; dd MmMaximumNonPagedPoolInBytes l1
80196310  00c20000 (12713984)
<P>
kd&gt; dd MmSizeOfPagedPoolInBytes l1
8019e4dc  02000000 (33554432)
<P>
These values may be modified in the registry.
<P>
WARNING: Using the Registry Editor incorrectly can cause serious, system-
wide problems that may require you to reinstall Windows NT to correct
them. Microsoft cannot guarantee that any problems resulting from the use
of the Registry Editor can be solved. Use this tool at your own risk.
<P>
The page pooled memory management parameters are located in:
<P>
<PRE>   HKEY_LOCAL_MACHINE
     \SYSTEM
       \CurrentControlSet
         \Control
           \Session Manager
             \Memory Management
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt server storage poolcalc pool non-paged<BR>
3.50 3.51 4.00<BR>
Keywords          : ntnetserv NTSrvWkst kbnetwork<BR>
Version           : WinNT:3.5,3.51,4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
