

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Preparing to Create or Modify a Fault Tolerant Set </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162846">
<META NAME="KBModify" CONTENT="1998/03/02">
<META NAME="KBCreate" CONTENT="1997/01/29">
<META NAME="Keywords" CONTENT="ntfault ntfilesys NTSrvWkst ntutil kbtool">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article provides some basic procedures and a checklist for creating and modifying a fault tolerant set. For this article, a fault tolerant set includes a stripe set, stripe set with parity, volume set, and disk mirror/duplex.  Basic Procedures...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBXS,QA3W,QAC9,QBGH,QAYY,QAMB,QBVV,QDIR,QA7T,QAU3,QAMR,QA6A,QAY5,QAX3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Preparing to Create or Modify a Fault Tolerant Set</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 2, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162846</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article provides some basic procedures and a checklist for creating
and modifying a fault tolerant set. For this article, a fault tolerant
set includes a stripe set, stripe set with parity, volume set, and disk
mirror/duplex.
<P>
<P><h3>Basic Procedures</h3>
 

<OL><P><LI>To create a fault tolerant set, perform a full backup of all data. Back
   up anything that cannot be reinstalled and back up any data that you
   cannot regenerate on physical media, other than the drives you are going
   to use.

<P><LI>Because information about fault tolerant sets is kept in the registry,
   it is preferable that you back up the disk key in the system hive
   separately. You can easily do this by using the Save option of the
   Configuration entry under the Partition menu in Disk Administrator. This
   option will copy the disk key in an uncompressed format to a floppy
   disk. The disk key keeps the Disk Signature and any fault tolerant set
   information of the drives in your system.
<P>
   NOTE: It does not save the master boot record, boot sector, or any
   partition information. You may also want to use RDISK to back up the
   rest of the registry including the entire SYSTEM hive.

<P><LI>All third-party services and drivers need to be stopped through Services
   tool and Devices tool in Control Panel. These services may not only
   be limited to virus scanners, backup agents, and network services, but
   may extend to utilities that may maintain open files, or access system
   services directly (low-level hardware access such as Compaq Insight
   Manager). Also, applications such as Microsoft Exchange Server and SQL
   Server, among others that perform low-level disk I/O, need to be
   stopped.
<P>
   The drive needs to be checked for file structure and physical corruption
   with a utility such as CHKDSK. For CHKDSK use the /r to search for bad
   sectors and /f to fix any errors it finds. If possible, use the SCSI
   controller low-level media test to run a nondestructive test (consult
   your hardware vendor for details and availability).
<P>
</OL>For additional information, please see the following articles in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q100110.htm">Q100110</A></B>
   TITLE     : Overview of Redundant Arrays of Inexpensive Disks (RAID)
   ARTICLE-ID: <B><A HREF="../WINNT/Q114872.htm">Q114872</A></B>
   TITLE     : Restoring Disk Configuration Information

</PRE></OL><h3>Stripe Sets</h3>
 
<P>
Stripe sets offer no data redundancy, unlike striping with parity. All data
is lost in the set if one drive fails in a stripe set. Better performance
usually results because of the ability to read and write to several drives
simultaneously. To do this, the drives and controller must support the read
and write request simultaneously. In general, most SCSI controllers and
drives allow this, while IDE controllers and drives only allow one device
per channel at a time to accept read and write requests. Making a stripe
set out of IDE drives will not improve performance.
<P>
Stripe sets with parity offer data redundancy. They maintain a fairly high
level of performance. Read performance matches a stripe set without
parity. When writing data, however, everything is written twice -- once to
the disk and once to the parity strip. The pagefile should not be placed on
a stripe set with parity because redundant data is written and performance
degrades. After a stripe set is created, it cannot be enlarged or
extended without backing up the data and reformatting the set. You cannot
incorporate the Windows NT system or boot files into a stripe set.
<P>
For additional information, please see the following articles in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q113933.htm">Q113933</A></B>
   TITLE     : Disk Striping and Disk Striping with Parity in Windows NT
   ARTICLE-ID: <B><A HREF="../WINNT/Q108082.htm">Q108082</A></B>
   TITLE     : Windows NT Cannot Regenerate Stripe Set with Parity

</PRE><h3>Volume Set</h3>
 
<P>
Volume sets offer no data redundancy but allow you to span multiple drives,
and to assign them one drive letter. When you use NTFS on a volume set, it
is possible to add another drive to volume set without formatting the
drive. FAT does not allow extending the drive without reformatting and
restoring from a backup. When extending a volume set, take the same
precautions as when you create any other fault tolerant set.
For additional information, please see the following article in the
Microsoft Knowledge Base Article related to Volume Sets:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q113503.htm">Q113503</A></B>
   TITLE     : Overview of Disk Volume Sets in Windows NT

</PRE><h3>Disk Mirror/Duplex</h3>
 
<P>
Disk mirroring and disk duplexing offer full data redundancy under Windows
NT Server. The difference between the two is that mirroring assumes you
have two hard drives and one controller, while duplexing has a controller
for each hard drive. Duplexing provides maximum protection if a controller
or a hard drive fails. The type and size of your hard drive does not
matter, but there must be enough free space available on the shadow drive.
When duplexing, drive translation can be an issue on SCSI drives. When the
BIOS is enabled on a SCSI controller, the drive translation is done by the
BIOS. For controllers not under BIOS control, Windows NT defaults to 64
heads and 32 sectors per track. This happens because Windows NT cannot read
the translation scheme from the disabled BIOS. An issue arises when there
are two identical controllers and two identical drives, with two
different sizes under Disk Administrator. In this situation, even if the
mirror can be established, recovery in the event of failure may be
extremely difficult.
<P>
For additional information, please see the following articles in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q114779.htm">Q114779</A></B>
   TITLE     : Overview of Disk Mirroring (RAID Level 1) in Windows NT
   ARTICLE-ID: <B><A HREF="../WINNT/Q113977.htm">Q113977</A></B>
   TITLE     : Booting From Mirror After Primary Partition Is Lost
   ARTICLE-ID: <B><A HREF="../WINNT/Q141702.htm">Q141702</A></B>
   TITLE     : How to Recover Mirroring Windows NT Using IDE devices
   ARTICLE-ID: <B><A HREF="../WINNT/Q161563.htm">Q161563</A></B>
   TITLE     : How Windows NT Handles Drive Translation
   ARTICLE-ID: <B><A HREF="../WINNT/Q148425.htm">Q148425</A></B>
   TITLE     : Duplexed Mirror Fails with Insufficient Space

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Windows NT Server support for RAID is software based; information about
the configuration is kept in the registry. Hardware-based RAID has many
advantages over software-based RAID, such as support for hot swapping of
hard drives. Hardware-based RAID provides better performance because it
runs independently of the operating system and does not need to scan a
series of drivers. The operating system can be placed on a hardware-based
RAID because the array is built in the controller BIOS, and not by a
driver that the operating system supplies.
<P>
Compaq is independent of Microsoft; we make no warranty, implied or
otherwise, regarding this companies product's performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prepare harddrive<BR>
Keywords          : ntfault ntfilesys NTSrvWkst ntutil kbtool<BR>
Version           : WinNT:3.5,3.51,4.0<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 2, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
