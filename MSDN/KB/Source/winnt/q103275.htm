

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Find Lana Numbers for Applications </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q103275">
<META NAME="KBModify" CONTENT="1997/05/09">
<META NAME="KBCreate" CONTENT="1993/08/19">
<META NAME="Keywords" CONTENT="kbnetwork ntprotocol NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Microsoft LAN Manager redirector uses a NetBIOS interface to communicate with lower-level transport protocols (that is, NBF, TCP). NetBIOS requires that the redirector provide a LAN adapter (Lana) number to identify a unique combination of one prot...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAKC,QBC6,QAG8,QAM5,QAB5,QAVZ,QBWP,QBXS,QBWE,QBBS,QBTX,QAWN,QA3P,QAKD,QBWS V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Find Lana Numbers for Applications</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q103275</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft LAN Manager redirector uses a NetBIOS interface to
communicate with lower-level transport protocols (that is, NBF, TCP).
NetBIOS requires that the redirector provide a LAN adapter (Lana)
number to identify a unique combination of one protocol driver and one
network adapter (NIC) MAC driver. For each protocol and network card,
there is exactly one unique Lana number. In Windows NT, Lana numbers
are not important to the redirector because the Windows NT redirector
uses TDI (Transport Device Interface) to communicate with the
lower-level transports.
<P>
Although TDI does not require Lana numbers, they are still important
to other NetBIOS-based applications running in Windows NT. These
applications submit NetBIOS commands called NetBIOS Command Blocks
(NCBs). The NCB structure contains a field called Lana Number that
must be filled in with the unique number (that is, the protocol/MAC
pair) of the network where the destination computer is located.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For more information on NetBIOS, see the IBM Local Area Network
Technical Reference.
<P>
To see the NetBIOS Interface dialog box (which includes a box that
details the Network Route and Lana number associated with the
particular network), choose the Networks icon in Control Panel, choose
the Add Software button, select NetBIOS Interface, choose Continue,
and choose Configure.
<P>
Any changes you make in the NetBIOS Interface dialog box, will appear
in the Registry under the following key:
<P>
<PRE>   =================================================================
   SYSTEM\CurrentControlSet\Services\NETBIOSInformation\parameters
   =================================================================

   LanaNum1     0x2
   LanaNum2     0x3
   LanaNum3     0x4
   LanaNum4     0x5
   LanaNum5     0x1
   LanaNum6     0

   ROUTE
        "Nbf" "RasHub" "RasHub04"
        "Nbt" "Streams"
        "NWNBLINK" "Streams"
        "Nbf" "RasHub" "RasHub05"
        "Nbf" "Elnk16" "Elnk1601"
        "Ubnb" "Streams"

</PRE>To interpret this information, you can compare the LanaNumX value with
the ROUTE values. For example, you can tell that "Ubnb" "Streams" is
Lana number 0. The value LanaNum6 has a data value of 0 and the 6th
position in the ROUTE list is "Ubnb" "Streams". Lana number 1 is the
5th position in the ROUTE list which corresponds to "Nbf" "Elnk16"
"Elnk1601".
<P>
You can also obtain the order of Lana numbers from the following
Registry key:
<P>
<PRE>   =================================================================
   SYSTEM\CurrentControlSet\Services\NETBIOS\linkage
   =================================================================
   BIND
        \Device\Streams\NWNBLINK
        \Device\Streams\Ubnb
        \Device\Streams\NBT
        \Device\Nbf_Elnk1601
        \Device\Nbf_RasHub04
        \Device\Nbf_RasHub05

   EXPORT
        \Device\Netbios\Streams\NWNBLINK
        \Device\Netbios\Streams\Ubnb
        \Device\Netbios\Streams\NBT
        \Device\Netbios\Nbf_Elnk1601
        \Device\Netbios\Nbf_RasHub04
        \Device\Netbios\Nbf_RasHub05

   LanaMap
        010401000103010101020105

   ROUTE
        "NWNBLINK" "Streams"
        "Ubnb" "Streams"
        "Nbt" "Streams"
        "Nbf" "Elnk16" "Elnk1601"
        "Nbf" "RasHub" "RasHub04"
        "Nbf" "RasHub" "RasHub05"

</PRE>If you look at the LanaMap, you can translate it and also figure out
the Lana number associated with each network. For example, note the 01
before each set of numbers in the following portion of the LanaMap:
<P>
<PRE>   01 04 - 01 00 - 01 03 - 01 01 - 01 02 - 01 05

</PRE>If you disregard the 01, you will find the actual Lana numbers (in
this case, 04 00 03 01 02 05).
<P>
From this information you can determine that:
<P>
<PRE>     "NWNBLINK" "Streams" is Lana number 04
     "Ubnb" "Streams" is Lana number 00
     "Nbt" "Streams" is Lana number 03
     "Nbf" "Elnk16" "Elnk1601" is Lana number 01
     "Nbf" "RasHub" "RasHub04" is Lana number 02
     "Nbf" "RasHub" "RasHub05" is Lana number 05

</PRE>To see a list of the NetBIOS interface bindings, choose the Network
icon in Control Panel, choose Bindings, select NetBIOS Interface, and
choose Show Bindings For. If you use the arrow keys to manipulate the
order of the bindings, you actually manipulate the BIND, EXPORT, and
ROUTE order in the Registry.
<P>
For More information on the BIND, EXPORT, and ROUTE parameters, see
the DDK or the Resource Kit Registry Help files.
<P>
NOTE: There is a new NCB command NCBENUM that is supported by the
WIN32 API: Enumerate LAN adapter (Lana) numbers. When this value is
specified, the NCB_BUFFER member points to a buffer to be filled with
a LANA_ENUM structure.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbnetwork ntprotocol NTSrvWkst<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 9, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
