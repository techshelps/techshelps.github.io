

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DNS Resolvers Fail on NetBIOS Names When Using Domain Suffixes </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162844">
<META NAME="KBModify" CONTENT="1998/03/02">
<META NAME="KBCreate" CONTENT="1997/01/29">
<META NAME="Keywords" CONTENT="kbbug4.00 NTSrvWkst nttcp">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows Domain Name Service (DNS) resolvers fail to return IP addresses for NetBIOS name queries when Domain Name Suffix Search Order entries are present.  CAUSE =====  When the resolver is configured to use domain suffixes, the domain name on the ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVW,QAVX,QBWD,QA9A,QAUJ,QBTX,QBWP,QAUD,QBW3,QARM,QACF,QA5V,QANE,QBVV,QAV1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>DNS Resolvers Fail on NetBIOS Names When Using Domain Suffixes</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 2, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162844</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Windows Domain Name Service (DNS) resolvers fail to return IP addresses for
NetBIOS name queries when Domain Name Suffix Search Order entries are
present.
<P>
<P><h2>CAUSE</h2>
 
<P>
When the resolver is configured to use domain suffixes, the domain name on
the TCP/IP property sheet in the Network tool in Control Panel is ignored.
<P>
When the resolver queries a NetBIOS name, the domain name (as specified
in the TCP/IP properties of the Network Control Panel) will be appended
to the requested NetBIOS name, which is sent to the DNS server. For
example, when the client is configured with a domain name of
"microsoft.com" and types "ping test" from a command prompt, a name
query for "test.microsoft.com." is sent to the DNS Server.
<P>
The DNS server (assuming it is the Start of Authority [SOA] for
"microsoft.com") will then search for an A record for "test". If the A
record exists for "test" in the "microsoft.com" domain, we return that
address to the resolver.
<P>
If the name is not resolved, and WINS lookup is enabled on the Windows
NT 4.0 DNS server for the microsoft.com zone, DNS will query WINS for
the name, "test". If WINS has a registration for the NetBIOS name
"test", it will return the IP address to the DNS server, and the DNS
server will return the IP address to the resolver.
<P>
However, if the resolver has domain suffixes defined in the DNS properties
of the Network tool in Control Panel, the Domain: entry is ignored. If
domain suffixes are defined, the resolver appends the suffixes defined in
the domain suffix search order. For example, if the client types "ping
test," and the following suffixes are defined:
<P>
<PRE>   .mil
   .gov
   .com

</PRE>the DNS resolver will query for test.mil, test.gov, and test.com, instead
of appending the domain name and querying for "test.microsoft.com" first.
If we have a DNS server with WINS resolution enabled, DNS will not attempt
to query WINS because the DNS server that we are using is probably not the
SOA for .mil, .gov, or .com.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Make the domain name the first entry in the domain suffix search order
box.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0. We
are researching this problem and will post new information as it
becomes available.
 
<PRE>Keywords          : kbbug4.00 NTSrvWkst nttcp
Version           : WinNT:4.0
Platform          : winnt
Issue type        : kbbug</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 2, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
