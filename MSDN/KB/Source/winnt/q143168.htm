

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Routing IP Packets to Network Adapter Rather than RAS </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q143168">
<META NAME="KBModify" CONTENT="1997/09/18">
<META NAME="KBCreate" CONTENT="1996/01/28">
<META NAME="Keywords" CONTENT="NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Pages 419 to 421 of the Windows NT Networking Guide in the Windows NT 3.5 Resource Kit and the following article in the Microsoft Knowledge Base explain how you can configure the Windows NT Remote Access Service (RAS) using the TCP/IP protocol to p...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAVZ,QAM5,QAC2,QANE,QBWD,QAQW,QAR5,QBWE,QBG2,QAI5,QBVW,QAR4,QAL0,QAIJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Routing IP Packets to Network Adapter Rather than RAS</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q143168</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Pages 419 to 421 of the Windows NT Networking Guide in the Windows NT
3.5 Resource Kit and the following article in the Microsoft Knowledge Base
explain how you can configure the Windows NT Remote Access Service (RAS)
using the TCP/IP protocol to perform as a simple router:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q121877.htm">Q121877</A></B>
   TITLE     : Using RAS for Routing of IP Packets

</PRE>The routing is between the RAS connection and the network adapter in your
local area network (LAN). However, if the following conditions are met,
all network packets are sent over the RAS connection:
<P>
<PRE>   - Your RAS connection and network adapter are using two different
     subnetwork addresses in the same network.

   - You select Use Default Gateway On Remote Network check box for
     Windows NT RAS.

</PRE>This article explains how you can direct network packets to the network
adapter.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
To send packets to your network adapter, do the following in the registry:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor (REGEDT32.EXE) and locate the following Registry
   subkey in the HKEY_LOCAL_MACHINE subtree:
<P>
   \SYSTEM\CurrentControlSet\Services\RasMan\PPP\IPCP

<P><LI>From the Edit menu, select Add Value.

<P><LI>Enter the following:
<P>
<P><PRE>      Value Name: PriorityBasedOnSubNetwork
      Data Type:  REG_DWORD
<PRE></PRE>      String:     1 (Enable)

</PRE><P><LI>Click OK and quit the Registry Editor.

<P><LI>At a command prompt type:
<P>
<P><PRE>      net stop remoteaccess
</PRE>
<P><LI>At a command prompt type:
<P>
<P><PRE>      net start remoteaccess
</PRE><P>
</OL><h2>EXAMPLE</h2>
 
<P>
If your network adapter address is 10.1.1.1 and your RAS connection uses
the address 10.2.1.1 and your subnet mask is 255.255.0.0, the network
packets is forwarded to 10.2.1.1. The addresses 10.1.0.0 and 10.2.0.0 are
two different subnetworks in the Class A 10.0.0.0 network. If you do not
enable the PriorityBasedOnSubNetwork parameter, the following entries
appear in your route table (assuming that you have selected the Use
Default Gateway on Remote Network check box in RAS):
<P>
<PRE>Network Address      Netmask     Gateway Address   Interface  Metric
---------------      -------     ---------------   ---------  ------
    0.0.0.0          0.0.0.0        10.2.1.1        10.2.1.1     1
   10.0.0.0        255.0.0.0        10.2.1.1        10.2.1.1     1
   10.1.0.0       255.255.0.0       10.1.1.1        10.1.1.1     2 *
   10.1.0.0       255.255.0.0       10.2.1.1        10.2.1.1     1 *
   10.1.1.1      255.255.255.255   127.0.0.1       127.0.0.1     1
   10.2.1.1      255.255.255.255   127.0.0.1       127.0.0.1     1
10.255.255.255   255.255.255.255    10.1.1.1        10.1.1.1     1
  127.0.0.0        255.0.0.0       127.0.0.1       127.0.0.1     1
  224.0.0.0        224.0.0.0        10.2.1.1        10.2.1.1     1
  224.0.0.0        224.0.0.0        10.1.1.1        10.1.1.1     1
255.255.255.255  255.255.255.255    10.1.1.1        10.1.1.1     1

</PRE></OL>Due to the two entries above (noted with *), all packets are sent over the
RAS connection with the address 10.2.1.1. If you enable
PriorityBasedOnSubNetwork, the following entry is removed from the route
table:
<P>
<PRE>Network Address      Netmask      Gateway Address  Interface  Metric
---------------    -----------    ---------------  ---------  ------
    10.1.0.0       255.255.0.0      10.2.1.1        10.2.1.1     1

</PRE>If you have additional subnetworks in the 10.0.0.0 network and you want
the packets to reach the correct subnetwork, add static routes to the 
route table. You can also use the Multi-Protocol Router (MPR) software 
available in the Windows NT 3.51 Service Pack 2. For more information 
on adding static routes to the route table in Windows NT, please see 
the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q140859.htm">Q140859</A></B>
   TITLE     : TCP/IP Routing Basics for Windows NT
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt TCPIP lose packets lose connectivity<BR>
Keywords          : NTSrvWkst nttcp kbnetwork<BR>
Version           : 3.5 3.51 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
