

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dead Gateway Detection in TCP/IP for Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q128978">
<META NAME="KBModify" CONTENT="1997/11/10">
<META NAME="KBCreate" CONTENT="1995/04/16">
<META NAME="Keywords" CONTENT="NTPROTOCOL NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Microsoft TCP/IP for Windows NT provides a method of detecting whether or not the default gateway is still functioning. Dead gateway detection is enabled by default (on NT 3.51, 4.0 and above) when you install the TCP/IP protocol. However, Microsof...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QABA,QBVW,QDNT,QAM5,QAHE,QBWD,QAKR,QAB5,QDNL,QA3W,QAUD,QDL9,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Dead Gateway Detection in TCP/IP for Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q128978</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5, 3.51, 4.0
<LI>Microsoft Windows NT Server version 3.5, 3.51, 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft TCP/IP for Windows NT provides a method of detecting whether or
not the default gateway is still functioning. Dead gateway detection is
enabled by default (on NT 3.51, 4.0 and above) when you install the TCP/IP
protocol. However, Microsoft TCP/IP does not provide a method to detect
when the default gateway returns to operation.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For the dead gateway detection to work correctly, you must specify more
than one default gateway address in the Advanced Options of the TCP/IP
Configuration dialog box in the Network portion of Control Panel. If the
default gateway fails to respond to TCP requests after several tries, IP
will direct packets to the address specified for a backup gateway.
Microsoft TCP/IP would have to implement polling of the
routing protocol, such as the Routing Information
<P>
Here is an example of how NT will behave when the current default gateway
is unavailable, and you have more than one default gateway configured:
<P>
NT will switch to the next default gateway on the list. When the original
default gateway comes back up, it broadcasts its routes to other
intelligent routers.
<P>
When NT tries to access a network through the current default gateway, it
will be informed of a better route (the original default gateway). NT will
add a host route to it's routing table, but will NOT switch back to the
original default gateway. To switch back to using the original default
gateway you will need to reboot the NT server.
<P>
Note: If the second default gateway becomes unavailable, it will switch to
the next default gateway configured on the list. When the end of the list
of default gateways is reached, the search returns to the beginning again.
<P>
NOTE: Specifications for dead gateway detection are found in RFC 1122 and
RFC 816. Microsoft's TCP/IP stack implements the dead gateway detection
described in RFC 816.
<P>
The Registry setting which enables dead gateway detection can be found in
the following location of the Windows NT 3.5 Registry:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system wide
problems that my require you to reinstall Windows NT to correct them.
Microsoft cannot garantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<PRE>   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters

   Value Name:    EnableDeadGWDetect
   Value Type:    REG_DWORD
   Value Range:   0 or 1 (False, True)

   Default setting is 1 (True)

</PRE>Note: Dead gateway detection is enabled by default on Windows NT 3.51, 4.0
and above. This registry change applies to NT 3.5 only.
<P>
For more information about dead gateway detection in Windows NT, refer to
the following article in the Microsoft Knoledge Base:
<P>
TCP/IP Dead Gateway Detection Algorithm Updated for Windows NT[winnt]
<PRE>ID: <B><A HREF="../WINNT/Q171564.htm">Q171564</A></B>    CREATED: 16-JUL-1997   MODIFIED: 23-JUL-1997

</PRE><h2>REFERENCES</h2>
 
<P>
"Inter-Networking with Microsoft TCP/IP Using Microsoft Windows NT",
Participant's Workbook, Microsoft WWT, 1993, pg. 72; Appendix A, pg. 217.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt gate routing pathway shortest<BR>
Keywords          : NTPROTOCOL NTSrvWkst kbnetwork<BR>
Version           : 3.5 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
