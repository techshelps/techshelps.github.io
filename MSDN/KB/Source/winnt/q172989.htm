

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Slow Name Resolution to Internet from Intranet </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172989">
<META NAME="KBModify" CONTENT="1997/12/23">
<META NAME="KBCreate" CONTENT="1997/08/21">
<META NAME="Keywords" CONTENT="ntnetserv NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  While forwarding queries to the Internet using a Domain Name Service (DNS) server with a computer running Windows NT Server version 4.0, your clients experience one or more of the following problems:   - Internet name resolution is slow     -or-   ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBF0,QAVZ,QANE,QAUJ,QAUD,QACF,QAFI,QA9N,QASB,QAIJ,QAFX,QABA,QAP2,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Slow Name Resolution to Internet from Intranet</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172989</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
While forwarding queries to the Internet using a Domain Name Service (DNS)
server with a computer running Windows NT Server version 4.0, your clients
experience one or more of the following problems:

<UL><LI>Internet name resolution is slow
<P>
   -or-

<LI>Internet name resolution fails
<P>
   -or-

<LI>Internet name resolution is intermittent.
<P>
</UL>NOTE: Local intranet name resolution operates successfully.
<P>
<P><h2>CAUSE</h2>
 
<P>
The cache file on your Windows NT 4.0 DNS server is corrupted or missing.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve this issue, copy a new cache file using the following steps:

<OL><P><LI>Stop the DNS service by typing the following at a command prompt
   and then pressing ENTER:
<P>
<P><PRE>      net stop dns
</PRE>
<P><LI>Type the following and then press ENTER:
<P>
<P><PRE>      cd &lt;%SystemRoot%&gt;\System32\Dns
</PRE><P>
   where &lt;%SystemRoot%&gt; is your Windows NT folder. For example, if Windows
   NT is installed in the WINNT folder, type the following at a command
   prompt and then press ENTER:
<P>
<P><PRE>      cd winnt\System32\Dns
</PRE>
<P><LI>Type the following and then press ENTER:
<P>
<P><PRE>      ren cache.dns cache.old
</PRE>
<P><LI>Type one of the following and then press ENTER:
<P>
<P><PRE>      copy backup\cache.dns
</PRE><P>
<P><PRE>      -or-
</PRE><P>
<P><PRE>      copy samples\cache.dns
</PRE><P>
   NOTE: There should be an original copy of the Cache.dns file in both
   the Backup folder and the Samples folder.

<P><LI>Start the DNS service again by typing the following and then pressing
   ENTER:
<P><PRE>      net start dns
</PRE><P>
</OL>NOTE: It is possible for the cache file in the backup folder to also be
corrupt. In that event, you will need to expand the original from your
Windows NT source media by typing the following at a command prompt:
<P>
<PRE>   expand d:\i386\cache.dn_ %systemroot%\system32\dns\cache.dns

</PRE></OL>where d: is your CDROM drive.
<P>
For more information see the following article in the Microsoft Knowledge
base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q159310.htm">Q159310</A></B>
   TITLE     : Update Version of DNS.EXE Fixes Several Problems

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0. We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords          : ntnetserv NTSrv nttcp kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 23, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
