

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Move One or More Zone Files to a New WinNT DNS Server </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172221">
<META NAME="KBModify" CONTENT="1997/12/29">
<META NAME="KBCreate" CONTENT="1997/07/31">
<META NAME="Keywords" CONTENT="nthowto ntnetserv NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article discusses the steps involved when moving the zone files from one Windows NT 4.0 Domain Name Service (DNS) server to another Windows NT 4.0 DNS server.  MORE INFORMATION  When you use the Microsoft DNS server, you have the option of sta...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QATQ,QAY2,QAIJ,QA9N,QBTX,QASR,QANJ,QACK,QBWS,QBVX,QDIV,QAPF,QAEF,QAJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Move One or More Zone Files to a New WinNT DNS Server</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 29, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172221</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article discusses the steps involved when moving the zone files from
one Windows NT 4.0 Domain Name Service (DNS) server to another Windows NT
4.0 DNS server.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When you use the Microsoft DNS server, you have the option of starting the
service using a boot file or using information that is stored in the
registry. Use the appropriate section below:
<P>
<P><h3>Starting DNS Using a Boot File</h3>
 
<P>
When you use a boot file to start your DNS server, follow these steps to
move you zone file(s) from one Windows NT DNS server to another Windows NT
DNS server:
<P>
NOTE: The following steps assume that you have installed the Microsoft DNS
server service on the new Windows NT-based server and have not configured
any information for it.

<OL><P><LI>From Services in Control Panel, stop the Microsoft DNS server on both
   Windows NT DNS servers.

<P><LI>Manually copy the entire contents (subfolders included) of the
   %Systemroot%\System32\DNS folder from the source server to the
   destination server.

<P><LI>Restart the Microsoft DNS server on the new Windows NT DNS server.
<P>
</OL><h3>Starting DNS Using the Registry</h3>
 
<P>
When you are moving a single zone file, follow these steps:

<OL><P><LI>From Services in Control Panel, stop the Microsoft DNS server on both
   Windows NT DNS servers.

<P><LI>From the source DNS server, copy the desired zone file &lt;zone name&gt;.dns
   from the following folder:
<P>
<P><PRE>      %Systemroot%\System32\DNS
</PRE><P>
   to the same folder on the destination Windows NT DNS server.

<P><LI>Create the new zone on the destination server using the DNS Service
   Manager. Configure the zone as it was configured on the source server,
   either as a Primary or Secondary zone. The new zone must be created
   using the same zone file name as the original file.
<P>
   For example, if Sample.com.dns was the original file copied from the
   source server to the destination server, Sample.com.dns must be the name
   of the new file.

<P><LI>Restart the Microsoft DNS Server on the new Windows NT DNS server.
<P>
</OL>When you are moving multiple zone files, follow these steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<P>
Perform steps 1 and 2 on the destination Windows NT DNS server only:

<OL><P><LI>Using the DNS Manager create a sample primary zone, Sample.com. Creating
   the sample zone ensures that the DNS server boot file information has
   been written to the registry and the DNS server knows where the cache
   information is located.

<P><LI>Using DNS Manager, delete the sample zone that you created in step 1.

<P><LI>From Services in Control Panel, stop the Microsoft DNS server on both
   Windows NT DNS servers.

<P><LI>From the source DNS server, copy the desired zone file &lt;zone name&gt;.dns
   from the following folder:
<P>
<P><PRE>      %Systemroot%\System32\DNS
</PRE><P>
   to the same folder on the destination Windows NT DNS.
<P>
</OL>Perform steps 5 through 8 on the source server only:

<OL><P><LI>Start Registry Editor (Regedt32.exe).

<P><LI>Go to the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS
</PRE>
<P><LI>Click Zones, click Registry, and click Save Key.

<P><LI>Save this key to a location from where you can restore it to the
   destination server and close Registry Editor.
<P>
</OL>Perform steps 9 through 14 on the destination server only:

<OL><P><LI>Start Registry Editor (Regedt32.exe).

<P><LI>Go to the following subkey:
<P>
<P><PRE>       HEKY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS
</PRE>
<P><LI>Click Zones to verify that it is selected, click Registry, and click
   Restore.

<P><LI>Locate the registry key file that you exported in step 8.

<P><LI>Click Yes to the confirmation dialog and close Registry Editor.

<P><LI>Restart the Microsoft DNS Server on the new NT DNS server.
<P>
</OL>NOTE: The information transferred in the registry key maintains the names
of the zones and keeps you from re-creating the zone names in the DNS
Manager for every zone file that was copied.
 
<PRE>Keywords          : nthowto ntnetserv NTSrv nttcp kbnetwork
Version           : WinNT:4.0
Platform          : winnt
Issue type        : kbhowto kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 29, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
