

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LMHOSTS #Include Directives Requires Null Session Support </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q121281">
<META NAME="KBModify" CONTENT="1997/03/25">
<META NAME="KBCreate" CONTENT="1994/09/30">
<META NAME="Keywords" CONTENT="kbnetwork ntconfig ntregistry NTSrvWkst nttcp">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  In order for #INCLUDE directives in an LMHOSTS file to succeed at startup time, the referenced system(s) shares must support  null sessions . Null sessions are those where the user credentials passed in the Session Setup SMB are null.  MORE INFORMA...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWO,QAGU,QDL9,QBWQ,QBWN,QAI4,QBSO,QAC1,QAP2,QDIZ,QAL0,QALM,QAH6,QAI5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>LMHOSTS #Include Directives Requires Null Session Support</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q121281</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation version 3.5
<LI>Microsoft Windows NT Server version 3.5
<LI>Microsoft TCP/IP-32 for Windows for Workgroups, version 3.11
<LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Windows NT Workstation version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In order for #INCLUDE directives in an LMHOSTS file to succeed at startup
time, the referenced system(s) shares must support "null sessions". Null
sessions are those where the user credentials passed in the Session Setup
SMB are null.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The LMHOSTS files used by Microsoft Windows NT version 3.1 and 3.5 and
Microsoft TCP/IP-32 allow the contents of LMHOSTS files on other systems to
be referenced using the #INCLUDE keyword. Parsing of the LMHOSTS file is
done at startup time, prior to a user logging on. Therefore the system must
use a null username to obtain the contents of remote LMHOSTS files that are
included, and those files must be publicly available.
<P>
Windows NT version 3.1 supports null sessions by default.  However, Windows
NT version 3.5 does not provide this support unless specifically configured
to do so.  This change was made in order to provide a higher default level
of security.
<P>
If null session support is desired, it may be configured on a per-share
basis on the computer(s) containing the LMHOSTS files to be included, as
follows:
<P>
WARNING: Using the Registry Editor incorrectly can cause serious, system-
wide problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of the
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Open the Registry Editor, REGEDT32.EXE

<P><LI>From the HKEY_LOCAL_MACHINE subtree, go to the key:
<P>
<P><PRE>      \System
<PRE></PRE>        \CurrentControlSet
          \Services
            \LanmanServer
              \Parameters
                \NullSessionShares

   NOTE: NullSessionShares is type REG_MULTI_SZ.

</PRE><P><LI>Create a new line within the NullSessionShares key, type in the share
   you want to access with a null session(for example: "PUBLIC")

<P><LI>Stop and restart the server.
<P>
</OL>An alternative is to have the user log on to the system, and then type
"nbtstat -R" which re-parses the LMHOSTS file.  At this point, since the
#INCLUDE is done in the context of the current user, any LMHOSTS file that
is available to the currently logged on user on the network can be
retrieved.
<P>
NOTE: #INCLUDE and other LMHOSTS directives are case-sensitive.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodtcp32 wfw wfwg prodnt tcp/ip tcpip<BR>
For additional information, please see the following article(s) in the<BR>
Microsoft Knowledge Base:<BR>
Keywords            : kbnetwork ntconfig ntregistry NTSrvWkst nttcp<BR>
Version             : 3.5 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 25, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
