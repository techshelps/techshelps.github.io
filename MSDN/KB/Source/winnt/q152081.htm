

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Use of Raw Data Transfer Mode Influenced by Application </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q152081">
<META NAME="KBModify" CONTENT="1997/11/13">
<META NAME="KBCreate" CONTENT="1996/06/03">
<META NAME="Keywords" CONTENT="ntnetserv NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  There are several requirements that must be met for the Windows NT redirector to use raw data transfer mode, which is considered to be a more efficient data transfer mode than core mode. Applications can influence one or more of these requirements ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QA5W,QBWP,QAH6,QASP,QDJ3,QDIZ,QAYY,QAMR,QANY,QAX6,QBVV,QAU3,QALM,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Use of Raw Data Transfer Mode Influenced by Application</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 13, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q152081</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
- Microsoft Windows NT operating system version 3.1
- Microsoft Windows NT Advanced Server version 3.1
- Microsoft Windows NT Workstation version 3.5
- Microsoft Windows NT Server version 3.5
- Microsoft Windows NT Workstation version 3.51
- Microsoft Windows NT Server version 3.51
 
<P>
<P><h2>SUMMARY</h2>
 
<P>
There are several requirements that must be met for the Windows NT
redirector to use raw data transfer mode, which is considered to be a more
efficient data transfer mode than core mode. Applications can influence
one or more of these requirements in such a way that it is not immediately
apparent why data transfer is occurring in core mode and not raw mode.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The Windows NT redirector has the following requirements for performing
raw mode I/O, all of which must be satisfied for raw mode I/O to occur.
<P>
- The Server Message Block (SMB) protocol negotiated between the client
<PRE>  and server must support raw mode.

</PRE>- The server must be configured to support raw mode.
<P>
- The client redirector must be configured to allow raw mode.
<P>
- No other SMB requests are pending on the same Virtual Circuit (VC).
<P>
- The I/O is not on a blocking named pipe.
<P>
- For a READ request: the requested data size is equal to or greater than
<PRE>  2 times the currently configured request buffer size, and the read
  offset is not past the redirector's currently configured end-of-file.

</PRE>- For a WRITE request: the requested data size is equal to or greater than
<PRE>  1.5 times the currently configured request buffer size, and the write
  offset is not more than approximately 1 MB past the current end-of-file.

</PRE>- The I/O is to take no longer than 5 seconds to complete.
<P>
The above requirements are commonly satisfied, and it might be apparent
that at a given time raw I/O should be the data transfer mode of choice
for the Windows NT redirector. An application or process, however, might
be causing the failure of one or more of these requirements (and hence
causing the redirector to use core mode) in a subtle way that does not
necessarily involve data passing on the VC.
<P>
An example of this is an application (such as File Manager) that posts a
change notification (for example, the FindFirstChangeNotification and
WaitForSingleObject or WaitForMultipleObjects APIs) which causes a long-
term pending SMB request(s) on the VC--even though no data is being
actively passed on the VC--and, hence, the failure of the requirement
listed fourth above.
<P>
For more information on File Manager and change notification, please see
the following article in the Microsoft Knowledge Base:
<P>
<PRE>   Article-ID: <B><A HREF="../WINNT/Q123819.htm">Q123819</A></B>
   TITLE     : File Manager I/O Optimizations Slow Other File Transfers

</PRE>An application or process can also influence the redirector to use core
mode instead of raw mode by the size of its reads and writes (that is,
reads smaller than 2 times the currently configured request buffer size,
or writes smaller than 1.5 times the currently configured request buffer
size) and the type of its I/O (for example, on a blocking named pipe).
<P>
See your application vendor for more information if you suspect network
throughput performance problems are the direct result of an application
significantly influencing the data transfer mode as mentioned above.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: throughput performance<BR>
Keywords          : ntnetserv NTSrvWkst kbnetwork<BR>
Version           : 3.1 3.5 3.51<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 13, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
