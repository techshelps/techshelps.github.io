

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Resetting Domain Member Secure Channel </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q175024">
<META NAME="KBModify" CONTENT="1997/12/22">
<META NAME="KBCreate" CONTENT="1997/10/10">
<META NAME="Keywords" CONTENT="ntdomain">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The domain member Netlogon service may log error 3210 or 5721, but the Netlogon service logs error 5722 in the system event log of the domain controller.  You may also receive the following logon message when you attempt to log on to your Windows N...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA9A,QBW3,QBWP,QAAD,QAK7,QBG2,QABT,QAVY,QAI5,QABG,QAAP,QAB4,QAO4,QACK,QAIS V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Resetting Domain Member Secure Channel</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 22, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q175024</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The domain member Netlogon service may log error 3210 or 5721, but the
Netlogon service logs error 5722 in the system event log of the domain
controller.
<P>
You may also receive the following logon message when you attempt to log on
to your Windows NT domain from a computer running Windows NT Workstation or
Windows NT Server that is a member of the domain:
<P>
<PRE>   The system cannot log you on to this domain because the system's
   computer account in its primary domain is missing or the password on
   that account is incorrect.

</PRE>These problems may occur if any of the following conditions is true:

<UL><LI>The name of the domain member was recently changed.

<LI>The Emergency Repair Disk was used, but it contained old information.

<LI>The domain member computer account was removed.
<P>
</UL>The procedure described in this article resets the member secure channel
using a single command line instead of many operations within the Server
Manager. This procedure requires the NETDOM utility that is provided with
Windows NT 4.0 Resource Kit Supplement 2.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
CAUTION: The solution included in this article has not been extensively
tested in large installations. Microsoft cannot guarantee that modification
of domains as recommended herein will accomplish the objective described in
this article under all circumstances and in all configurations.
<P>
For each member, there is a discrete communication channel (that is, the
secure channel) with a domain controller. The secure channel is used by the
Netlogon service on the member and on the domain controller to communicate.
The NETDOM command line utility makes it possible to reset the secure
channel of the member.
<P>
Suppose you have a domain member named DOMAINMEMBER. You can reset the
member secure channel by using the following command:
<P>
<PRE>   NETDOM MEMBER \\DOMAINMEMBER /JOINDOMAIN

</PRE>You can run the command above on the member DOMAINMEMBER or on any other
member or domain controller of the domain, provided that you are logged on
with an account that has administrator access to DOMAINMEMBER.
<P>
The output received from the command should be similar to the following:
<P>
<PRE>   Searching PDC for domain DOMAIN ...
   Found PDC \\DOMAINPDC
   Querying domain information on PDC \\DOMAINPDC ...
   Querying domain information on computer \\DOMAINMEMBER ...
   Computer \\DOMAINMEMBER is already a member of domain DOMAIN.
   Verifying secure channel on \\DOMAINMEMBER ...
   Verifying the computer account on the PDC \\DOMAINPDC ...
   Resetting secure channel ...
   Changing computer account on PDC \\DOMAINPDC ...
   Stopping service NETLOGON on \\DOMAINMEMBER .... stopped.
   Starting service NETLOGON on \\DOMAINMEMBER .... started.
   Querying user groups of \\DOMAINMEMBER ...
   Adding DOMAIN domain groups on \\DOMAINMEMBER ...

   The computer \\DOMAINMEMBER joined the domain DOMAIN successfully.

   Logoff/Logon \\DOMAINMEMBER to take modifications into effect.

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Assume you have the following configuration:
<P>
<PRE>   Domain = DOMAIN
   DC     = DOMAINDC (domain controller)
   MEMBER = DOMAINMEMBER

</PRE>When a member server joins a domain, a computer account is created (you can
use Server Manager to see the computer account). A default password is
given to the computer account, and the member stores the password in the
Local Security Authority (LSA) secret storage $MACHINE.ACC. By default, the
password is changed every seven days.
<P>
Each member maintains such an LSA secret, which is used by the Netlogon
service to establish a secure channel. If, for some reason, the computer
account's password and the LSA secret are not synchronized, the Netlogon
service logs the following error:
<P>
<PRE>   NETLOGON Event ID 3210:

   Failed to authenticate with \\DOMAINDC, a Windows NT domain controller
   for domain DOMAIN.

</PRE>If the computer account has been deleted, the following error is logged by
the member Netlogon service:
<P>
<PRE>   NETLOGON Event ID 5721:

   The session setup to the Windows NT Domain Controller &lt;Unknown&gt; for the
   domain DOMAIN failed because the Windows NT Domain Controller does not
   have an account for the computer DOMAINMEMBER.

</PRE>Similarly, the Netlogon service on the domain controller logs the following
error when the password is not synchronized:
<P>
<PRE>   NETLOGON Event 5722

   The session setup from the computer DOMAINMEMBER failed to authenticate.
   The name of the account referenced in the security database is
   DOMAINMEMBER$. The following error occurred: Access is denied.

</PRE>In all cases, the event data contains the error. For example, error
0xC0000022 means that the computer account's password is invalid; error
0xC000018B means that the computer account has been deleted, and so on.
<P>
For more information about secure channels, see the following articles in
the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q131366.htm">Q131366</A></B>
   TITLE     : Event Error 5712 with Status Access Denied

   ARTICLE-ID: <B><A HREF="../WINNT/Q142869.htm">Q142869</A></B>
   TITLE     : Event ID 3210 and 5722 Appear When Synchronizing Entire
               Domain

   ARTICLE-ID: <B><A HREF="../WINNT/Q149664.htm">Q149664</A></B>
   TITLE     : Verifying Domain Netlogon Synchronization

   ARTICLE-ID: <B><A HREF="../WINNT/Q158148.htm">Q158148</A></B>
   TITLE     : Domain Secure Channel Utility -- Nltest.exe
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt reskit util resource 4.00<BR>
Keywords          : ntdomain<BR>
Version           : WINNT:4.0<BR>
Platform          : winnt<BR>
Hardware          : x86<BR>
Issue type        : kbprb<BR>
Solution Type     : Info_Provided<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 22, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
