

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How To Move a DHCP DB from WinNT 3.51 to new WinNT 4.0 Computer </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q168711">
<META NAME="KBModify" CONTENT="1997/08/06">
<META NAME="KBCreate" CONTENT="1997/05/20">
<META NAME="Keywords" CONTENT="NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article explains how to move a Dynamic Host Configuration Protocol (DHCP) database from a Windows NT 3.51 server computer to a new Windows NT 4.0 server computer.  MORE INFORMATION  WARNING: Using Registry Editor incorrectly can cause serious,...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDJG,QBWS,QBTX,QACK,QAIJ,QBXB,QAY2,QATJ,QAFI,QAEF,QA9N,QAXB,QAGB,QACI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How To Move a DHCP DB from WinNT 3.51 to new WinNT 4.0 Computer</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 6, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q168711</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server versions 3.51 and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article explains how to move a Dynamic Host Configuration Protocol
(DHCP) database from a Windows NT 3.51 server computer to a new Windows NT
4.0 server computer.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system- wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<P>
From the Windows NT 3.51 source server:

<OL><P><LI>In Control Panel, double-click the Services icon. On the Services tab,
   select the Microsoft DHCP Server, and then click Stop. This stops the
   DHCP Server service.

<P><LI>Select the Microsoft DHCP Server, and then click Startup. Change the
   value to Disabled, and then click OK. This prevents the DHCP Server
   service from running after you restart the computer.

<P><LI>Copy the DHCP directory tree (%SystemRoot%\System32\Dhcp) to a temporary
   location on the new (destination) Windows NT 4.0 DHCP server computer.
   For example, copy the directory tree to C:\Temp\System32\Dhcp.
<P>
   NOTE: The following two steps are optional on the source server. You may
   want to wait until the new Windows NT 4.0 DHCP server is functional
   before completing these steps.

<P><LI>Remove the DHCP directory (%SystemRoot%\System32\Dhcp).

<P><LI>In Control Panel, double-click the Network icon, and then click the
   Services tab. Remove the DHCP Server service.
<P>
</OL>On the new Windows NT 4.0 DHCP server computer:

<OL><P><LI>In Control Panel, double-click the Network icon. Click the Services tab,
   and add the Microsoft DHCP server. Click OK, and then restart the
   computer when prompted.

<P><LI>Once you have restarted, open Control Panel, and then double-click
   on the Services icon. Stop the DHCP Server service.

<P><LI>Rename the %SystemRoot%\System32\Dhcp directory to
   %SystemRoot%\System32\Dhcporiginal. (once the below steps are completed,
   and the DHCP server is running, this directory may be deleted)

<P><LI>Create a new DHCP directory on the Windows NT 4.0 DHCP server computer,
   and then copy the DHCP directory tree from the temporary directory to
   %SystemRoot%\System32\Dhcp (to replace the DHCP directory that was
   renamed in the previous step).

<P><LI>Delete the System.mdb file.

<P><LI>Start Windows NT Registry Editor (Regedt32.exe).

<P><LI>From the HKEY_LOCAL_MACHINE subtree, go to the following key:
<P>
<P><PRE>      SYSTEM\CurrentControlSet\Services\DHCPServer
</PRE>
<P><LI>Click Configuration.

<P><LI>From the Registry menu, click Restore.

<P><LI>Select %SystemRoot%\System32\Dhcp\Backup\Dhcpcfg.

<P><LI>When the warning appears, click Yes.

<P><LI>Exit Registry Editor.

<P><LI>Start the DHCP service.

<P><LI>Start the DHCP Manager.
<P>
</OL>NOTE: After you restart the DHCP server computer you will receive a message
that the database needs to be updated. You will then be asked if you want
to update. Once the update is complete you will not be able to use this
database file on the Windows NT 3.51 computer again.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: update upgrading migrate ntdhcp<BR>
Keywords          : NTSrv nttcp kbnetwork<BR>
Version           : WinNT:3.51,4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 6, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
