

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Accessing Network Drives Created in Services Under Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q149984">
<META NAME="KBModify" CONTENT="1997/11/13">
<META NAME="KBCreate" CONTENT="1996/04/17">
<META NAME="Keywords" CONTENT="nthowto ntnetserv NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article explains how to access network drives created in services. Even though network drives are global system resources, they can only be accessed by processes running under the security context which was used to establish the network connec...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAI5,QAVZ,QA9A,QBG2,QBW7,QACK,QAGU,QAK7,QBW3,QBWP,QBE7,QBE6,QALQ,QBWG,QA6A V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Accessing Network Drives Created in Services Under Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 13, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q149984</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article explains how to access network drives created in services.
Even though network drives are global system resources, they can only be
accessed by processes running under the security context which was used to
establish the network connection.
<P>
In fact the rule is very simple. A network connection is always made with
a set of credentials (such as, domain name, user name, and password.) A
process can access a network drive only if it has already validated the
credentials used to establish the connection.
<P>
This article can also be used to understand how to create pseudo-permanent
connections with the scheduler.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For the purpose of this article, assume the following configuration:

<UL><LI>1 Server acting as Primary Domain Controller (PDC) of a domain "DOMAIN"
<LI>A share on an other machine of the domain "ASERVER"
<LI>1 Service running as User1 (Service1)
<LI>An other user "Auser"
<P>
</UL>This article considers the following two cases and explains, for each
case, who can access the network driver:
<P>
1.Network Connection made with Service1
2.Network Connection made with the option /USER
<P>
1.Network Connection made with Service1
 
<P>
When a network connection is established under "Service1," the "User1"
credentials are used (such as, domain "DOMAIN," user "User1" and their
password):
<P>
<PRE>   NET USE X: \\ASERVER\SHARE

</PRE>The drive X: is mapped to \\ASERVER\SHARE and can only be used by
Processes which have validated this credentials of DOMAIN\User1. Therefore
only the following processes can access the network drive X:

<UL><LI>The service Service1
<LI>Any other service running under the security context of "User1"
<LI>Any process when logged on with the credentials of "User1"
<P>
</UL>2.Network Connection made with the option NET USE /USER
 
<P>
When a network connection is made with NET USE /USER:'Domain\Auser', the
redirector sends an Server Message Block (SMB) frame "C Session setup" to
the server in order to validate the credentials of "Domain\Auser." The
server creates an access token for this user and replies to the redirector
with an SMB frame "R Session setup" including a user ID that will be used
in all consecutive SMB frames related to the connection.
<P>
<PRE>   NET USE X: \\ASERVER\SHARE /USER:DOMAIN\Auser

</PRE>The drive X: is mapped to \\ASERVER\SHARE and can only be used by
processes which have validated the credentials of DOMAIN\AUser. Therefore
only the following processes can access the network drive X:

<UL><LI>The service Service1
<LI>Any other service running under the security context of "Auser"
<LI>Any process when logged on with the credentials of "Auser"
<P>
</UL>For more information, please see the following article(s) in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WIN32SDK/Q115848.htm">Q115848</A></B>
   TITLE     : Services and Redirected Drives

   ARTICLE-ID: <B><A HREF="../WINNT/Q103390.htm">Q103390</A></B>
   TITLE     : Network Access Validation Algorithm and Example
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.00 prodnt<BR>
Keywords          : nthowto ntnetserv NTSrvWkst kbnetwork<BR>
Version           : 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 13, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
