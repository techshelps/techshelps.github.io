

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Force Routing and Remote Access to Use PAP </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172216">
<META NAME="KBModify" CONTENT="1997/09/03">
<META NAME="KBCreate" CONTENT="1997/07/31">
<META NAME="Keywords" CONTENT="nthowto ntnetserv ntrouter NTSrv kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article discusses the method for forcing a Routing and Remote Access (RRAS) server for Windows NT 4.0 to authenticate RAS clients using PAP instead of CHAP, SPAP, or MS-CHAP. This may be necessary, depending on your RAS clients or some third-p...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QA1S,QARL,QDN9,QA63,QANN,QAEF,QAM5,QACK,QBWS,QAXB,QAIJ,QAGB,QDMW,QBCT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Force Routing and Remote Access to Use PAP</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 3, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172216</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Routing and Remote Access Service Update for Windows NT
   Server 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article discusses the method for forcing a Routing and Remote Access
(RRAS) server for Windows NT 4.0 to authenticate RAS clients using PAP
instead of CHAP, SPAP, or MS-CHAP. This may be necessary, depending on your
RAS clients or some third-party authentication solutions.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
If your RRAS server is configured to "Allow any authentication including
clear text," a RAS client is able to connect with PAP, SPAP, CHAP, or MS-
CHAP depending on what the client supports. Normally, a Microsoft RAS
client will attempt to connect with CHAP or MS-CHAP, if that is valid for
the RAS server to which it is connecting.
<P>
To force a RAS client to use PAP, you must delete the SPAP and CHAP
registry keys from your RAS Server using the following steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor (Regedt32.exe).

<P><LI>Go to the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\RasMan\PPP
</PRE>
<P><LI>Click SPAP, click Edit, and click Delete.

<P><LI>Click Yes to confirm the deletion.

<P><LI>Click CHAP, click Edit, and click Delete.

<P><LI>Click Yes to confirm the deletion.

<P><LI>Close Registry Editor and stop and restart the Routing and Remote
   Access Service.
<P>
</OL>NOTE: This will not work on normal Windows NT RAS servers, only Windows NT
4.0 RAS servers that have Routing and Remote Access installed. If you
delete these registry keys on a normal RAS server, the RAS services will
fail to start after you restart.
<P>
The following two scenarios require the above steps to force RAS clients to
use PAP authentication:

<UL><LI>You are using a PPP client that can only use PAP, but does not notify
   the RAS server that it needs to use PAP during the LCP negotiation.
<P>
   -or-

<LI>You are using the new Radius client included in the Routing and Remote
   Access Service Update. Many Radius servers do not accept the attribute
   60 CHAP Challenge that the Radius Client sends to the Radius server when
   authenticating a RAS client using CHAP. This is a valid attribute
   according to RFC 2058: "Remote Authentication Dial In User Service
   (RADIUS)"; however, many older Radius servers cannot handle this newer
   attribute.
<P>
</UL>For additional information, please see the following article(s) in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../CROSSNET/Q136634.htm">Q136634</A></B>
   TITLE     : Remote Access Services Authentication Summary
</PRE></OL> 
<PRE>Keywords          : nthowto ntnetserv ntrouter NTSrv kbnetwork
Version           : WinNT:4.0
Platform          : winnt
Issue type        : kbhowto kbinfo
Solution Type     : kbworkaround</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 3, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
