

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Use %LOGONSERVER% to Distribute User Profiles </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q141714">
<META NAME="KBModify" CONTENT="1998/01/09">
<META NAME="KBCreate" CONTENT="1995/12/21">
<META NAME="Keywords" CONTENT="ntdomain kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  If you want to specify a domain server that validates a user logon, use the environment variable %LOGONSERVER% in a PATH statement. This article describes how you can use %LOGONSERVER% to distribute user profiles.  MORE INFORMATION  Environment var...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDJ2,QAGU,QAI5,QBW7,QBWP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Use %LOGONSERVER% to Distribute User Profiles</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q141714</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server versions 3.5, 3.51 and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
If you want to specify a domain server that validates a user logon, use the
environment variable %LOGONSERVER% in a PATH statement. This article
describes how you can use %LOGONSERVER% to distribute user profiles.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Environment variables do not work in user profile paths unlike logon
scripts which are designed to run on the server that validates its logon
request. This makes it difficult to provide redundancy for user profiles.
<P>
When a user logs on, %LOGONSERVER% is defined and set to the name of the
validating computer. It is not propagated to a user's environment
variables prior to NT 4.0 SP3.
<PRE> For example, if the user's profile path is
</PRE>%logonserver%\profiles\user1.man and the name of the validating server is
MYSERVER, the user profile path is set to \\MYSERVER\profiles\user1.man.
Therefore, if you maintain a copy of the user profiles on each domain
controller, users can access their user profiles when the primary domain
controller is unavailable. %LOGONSERVER% is an undocumented environment
variable.
<P>
When you specify a path statement for the user profile path, the following
entry in User Manager is valid:
<P>
<PRE>   %logonserver%\&lt;share name&gt;\&lt;profile&gt;.&lt;usr or man&gt;

</PRE>NOTE: To simplify the maintenance of user profiles on multiple servers, use
Directory Replication to copy the user profiles from the primary domain
controller (PDC) to the backup domain controllers (BDCs).
<P>
<P><h3>Roaming User Profiles Under Windows NT 4.0</h3>
 
<P>
If you use %LOGONSERVER% with roaming user profiles under Windows NT 4.0,
roaming user profiles are saved to the logon server (typically a BDC) when
users log off. If the user is validated by different logon server the next
time he or she logs on, a message appears indicating the local copy of the
roaming user profile is newer than the copy on the logon server (assuming
that the user logs on to the same computer). If the user logs on to a
different computer, and is validated by a logon server that does not
contain the latest copy of his or her roaming user profile, it appears to
the user that his or her changes to the roaming user profile have been
lost. This can cause confusion and increase internal support costs for
companies using roaming user profiles.
<P>
For this reason, it is best to use %LOGONSERVER% with only mandatory user
profiles, and not with roaming user profiles.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt sur<BR>
Keywords          : ntdomain kbnetwork<BR>
Version           : 3.5 3.51 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 9, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
