

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Understanding DHCP IP Address Assignment for RAS Clients </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q160699">
<META NAME="KBModify" CONTENT="1998/03/17">
<META NAME="KBCreate" CONTENT="1996/12/09">
<META NAME="Keywords" CONTENT="ntnetserv NTRAS NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When Remote Access Service (RAS) uses Dynamic Host Configuration Protocol (DHCP) to obtain IP addresses for dial-in clients, only the IP address from the DHCP lease is passed to the RAS client. Other options in the DHCP scope are not. This article ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QARL,QDJG,QAY2,QAC2,QAD6,QAD5,QAGI,QBWP,QAR5,QBVX,QAH6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Understanding DHCP IP Address Assignment for RAS Clients</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 17, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q160699</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:
<P>
- Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
- Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When Remote Access Service (RAS) uses Dynamic Host Configuration Protocol
(DHCP) to obtain IP addresses for dial-in clients, only the IP address
from the DHCP lease is passed to the RAS client. Other options in the DHCP
scope are not. This article describes the behavior that occurs.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The RAS help file states:
<P>
<PRE>   Use DHCP to assign remote TCP/IP client addresses.

</PRE>RAS servers can obtain IP addresses for remote clients from a dynamic host
configuration protocol (DHCP) server. DHCP servers provide static and
dynamic IP address allocation on a large network. You should select this
option if a DHCP server is available.
<P>
When the RAS server starts up with the option to "Use DHCP to assign
remote TCP/IP addresses," it makes several DHCP requests in advance and
caches the DHCP leases that it will need for dial-in clients. The RAS
Server will request a number of addresses equal to the number of RAS ports
set to receive calls plus one. For example, if the RAS Server has 2 analog
modems and 2 ISDN adapters all set to receive calls, then the RAS Server
will request 5 IP addresses from the DHCP Server. The first four are to
assign to RAS clients that will be dialing into the RAS ports and the
fifth one is for the RAS Server itself so that the clients can connect to
it.
<P>
The RAS server records the address of the DHCP server, the leased IP
address, when the lease was obtained, when the lease expires, and the
lease length. All other DHCP options defined for that scope are discarded.
When the client dials into the RAS server and requests an IP address
("Server Assigned IP Address" is selected) the RAS server will use one of
these cached leases. The IP address is then given to the dial-in client,
which is unaware that the IP address has been obtained through DHCP. The
RAS server maintains the lease on behalf of the client. Therefore, the
only information that the client receives from the DHCP lease is the IP
address.
<P>
When a RAS client obtains an IP address Lease from a RAS server,
Winipcfg.exe (for Windows 95) or Ipconfig.exe (for Windows NT) will show
the following information about the Lease:
<P>
<PRE>Lease Obtained:      Tue Jan 1 80 12:00:00 AM
Lease Expires:       Tue Jan 1 80 12:00:00 AM

</PRE>When a RAS server assigns an IP address to a RAS client either from a
Static Address Pool or DHCP, there is no real lease time for the IP address
since it will be released when client disconnects.
<P>
However, RAS clients still have the ability to receive additional TCP/IP
configuration information from the RAS server. WINS server assignments and
Domain Name Service (DNS) server assignments can be delegated to the
client when it connects.
<P>
Again, this information is not taken from the Options given in the DHCP
lease. Rather these are taken directly from the RAS server's settings. If
a RAS server has WINS or DNS entries, these will be passed to the client.
<P>
Here is a list of the DHCP Options that Microsoft DHCP clients will
support and how a RAS client will obtain them:
<P>
<P><h3>IP</h3>
 
<P>
As described above, the RAS server obtains an IP address from the DHCP
server. The RAS server then gives the IP address to the dial-in client and
manages its lease. This is the only information from the DHCP server that
the RAS client receives.
<P>
<P><h3>WINS</h3>
 
<P>
This is taken from the RAS server if the RAS server is configured with
WINS addresses. The client will acquire the list of WINS servers that are
configured on the RAS server.
<P>
<P><h3>DNS</h3>
 
<P>
This is taken from the RAS server if the RAS server is configured with DNS
server addresses. The client will acquire the first DNS server address
listed in the RAS server's DNS Service Search Order.
<P>
<P><h3>Subnet Mask</h3>
 
<P>
The subnet mask corresponds to the standard mask associated with the
standard class type of the given IP address.
<P>
<P><h3>NetBIOS Scope ID</h3>
 
<P>
NetBIOS scope ID information is not passed to the client. If you need to
modify this setting it will have to be changed directly on the client.
<P>
<P><h3>Node Type</h3>
 
<P>
Node Type is not taken from the DHCP lease but can change on the RAS
client depending on WINS information. If the RAS server has no WINS
servers defined locally, a b-node Windows NT RAS client will remain a
b-node client. If the RAS server has WINS servers defined locally, a
b-node Windows NT RAS client will switch to h-node for the duration of the
connection.
<P>
NOTE: Windows 95 clients will not automatically switch between node-types
if the RAS server supplies WINS addresses, this will have to be done
manually. Click Control Panel and double-click Network. On the Selection
tab, select TCP/IP from the list of installed network components and then
click Properties. Click the WINS Configuration tab and either manually
specify WINS addresses or select "Use DHCP for WINS Resolution".
<P>
For additional information, please see the following article(s) in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q121005.htm">Q121005</A></B>
   TITLE     : DHCP Options Supported by Clients

   ARTICLE-ID: <B><A HREF="../WINNT/Q124358.htm">Q124358</A></B>
   TITLE     : RAS Server Assigns Cached IP Addresses to RAS Clients

   ARTICLE-ID: <B><A HREF="../WINNT/Q142303.htm">Q142303</A></B>
   TITLE     : DNS Address from RAS Server Not Passed to RAS Client

   ARTICLE-ID: <B><A HREF="../WINNT/Q160177.htm">Q160177</A></B>
   TITLE     : Default Node Type For Microsoft Clients
</PRE> 
<PRE>Keywords          : ntnetserv NTRAS NTSrvWkst nttcp kbnetwork
Version           : WinNT:3.5,3.51,4.0
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 17, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
