

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Upgrade from Uni- to Multiprocessor (Uptomp.exe) and Win32k.sys </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q142660">
<META NAME="KBModify" CONTENT="1997/05/15">
<META NAME="KBCreate" CONTENT="1996/01/16">
<META NAME="Keywords" CONTENT="kbenv kbhw kbsetup nthw NTSrvWkst ntutil">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you upgrade a single processor computer with Windows NT 4.0 installed to a multiprocessor system, several files have to be changed.  The affected files are:     Ntoskrnl.exe (Ntkrnlmp.exe has to be copied and renamed to Ntoskrnl.exe)    Hal.dl...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBKX,QAA1,QDO3,QDNN,QA9N,QASB,QAC1,QBQU,QDI2,QAY2,QAR4,QAA5,QAFI,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Upgrade from Uni- to Multiprocessor (Uptomp.exe) and Win32k.sys</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 15, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q142660</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Windows NT Workstation version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you upgrade a single processor computer with Windows NT 4.0 installed
to a multiprocessor system, several files have to be changed.
<P>
The affected files are:
<P>
<PRE>   Ntoskrnl.exe (Ntkrnlmp.exe has to be copied and renamed to Ntoskrnl.exe)
   Hal.dll (System specific Hal*.dll has to copied and renamed to Hal.dll)
   Kernel32.dll
   Ntdll.dll
   Winsrv.dll
   Win32k.sys (New for Windows NT 4.0)

</PRE><h2>CAUSE</h2>
 
<P>
Although Uptomp.exe from the Windows NT 4.0 Resource Kit does assist to
copy the correct files, Win32k.sys is not copied with this utility.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve the problem:

<OL><P><LI>Locate the file Win32k.sys on the Windows NT 4.0 compact disc , and copy
   it to the System32 directory.
<P>
   NOTE: The file might be compressed as Win32k.sy_. Use Expand.exe to
   uncompress the file.
<P>
   You must then modify the %systemroot%\repair\setup.log file to modify
   the CRC value of win32k.sys to equal 13e42a - this value is for the
   multi-processor version and is used when installing future service packs
   or repairing the system files.
<P>
   Note:  If the customer already has a Service Pack loaded on the system 
   he should point to the Service pack directory when the utility asks him 
   for a path for the replacement files.

<P><LI>Modify the Resource Kit Uptomp.inf file and add the Win32k.sys to the
   list of files as follows:
<P>
<P><PRE>      hal.dll = 1, 2, hal.dll
      ntoskrnl.exe = 0, 2, ntkrnlmp.exe
      ntdll.dll = 0, 2, ntdll.dll
      kernel32.dll = 0, 2, kernel32.dll
      winsrv.dll = 0, 2, winsrv.dll
      win32k.sys = 0, 2, win32k.sys
<P></BLOCKQUOTE>
</OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbenv kbhw kbsetup nthw NTSrvWkst ntutil<BR>
Version             : 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 15, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
