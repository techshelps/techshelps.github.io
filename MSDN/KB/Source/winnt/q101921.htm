

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MS-DOS TSR's in a Windows NT Command Prompt </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q101921">
<META NAME="KBModify" CONTENT="1997/11/18">
<META NAME="KBCreate" CONTENT="1993/07/26">
<META NAME="Keywords" CONTENT="NTSrvWkst ntutil kbtool">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" The Windows NT command prompt, CMD.EXE, is a 32-bit application and therefore does not use the _DEFAULT.PIF or any of its settings, including the default AUTOEXEC.NT and CONFIG.NT files. Any drivers or TSR's added into the AUTOEXEC.NT and the CONFIG...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QANE,QBWP,QACF,QAB9,QAFX,QBV8,QAFY,QBXR,QDKI,QDKH,QBXB,QBFY,QATJ,QBWS,QAA1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>MS-DOS TSR's in a Windows NT Command Prompt</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q101921</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system, version 3.1
<LI>Microsoft Windows NT Advanced Server, version 3.1
</UL> 
<P>
The Windows NT command prompt, CMD.EXE, is a 32-bit application and
therefore does not use the _DEFAULT.PIF or any of its settings,
including the default AUTOEXEC.NT and CONFIG.NT files. Any drivers or
TSR's added into the AUTOEXEC.NT and the CONFIG.NT will not be
available at the command prompt.
<P>
Creating a Windows NT MS-DOS (16-bit) command prompt with active
MS-DOS drivers or TSR's can be accomplished in the following three
ways:
<P>
<P><h3>Procedure 1</h3>
 

<OL><P><LI>Create a CONFIG.XXX and AUTOEXEC.XXX that are set up to run the desired
   drivers and TSR's, where XXX is an extension you create.

<P><LI>Create a Program Information File (PIF) that executes CMD.EXE from
   the SYSTEM32 directory.

<P><LI>In the PIF Editor of the Windows NT Options, use the CONFIG.XXX and
   AUTOEXEC.XXX that you created in Step 1.

<P><LI>Create an icon to execute this PIF.
<P>
</OL><h3>Procedure 2</h3>
 
<P>
This procedure automates command line entries.

<OL><P><LI>Create a batch file that executes the desired TSR's; for example,
   DOSKEY macros.

<P><LI>Create a new command prompt icon with the following as the command
   line:
<P>
<P><PRE>      CMD.EXE /k C:\XXX
</PRE><P>
   where C:\XXX is the drive, directory, and filename of the batch file
   created in Step 1.
<P>
</OL>This procedure will run the command prompt with the desired TSR's, but
it will be a 16-bit Virtual DOS Machine (VDM). The process, NTVDM.EXE, will
be launched, unless it is already running.
<P>
<P><h3>Procedure 3</h3>
 
<P>
This procedure uses the above batch file in a PIF.

<OL><P><LI>Create a batch file that executes the desired TSR's; for example,
   DOSKEY macros.

<P><LI>Using the PIF Editor, create a PIF that executes CMD.EXE from the
   SYSTEM32 directory.

<P><LI>On the Optional Parameters line, add the following
<P>
<P><PRE>      /k C:\XXX
</PRE><P>
   where C:\XXX is the drive, directory and filename of the batch file
   created in Step 1.

<P><LI>Create an icon to execute this PIF.
<P>
</OL>This procedure will run the command prompt with the desired TSR's, but
it will be a 16-bit Virtual DOS Machine (VDM).
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt command.com<BR>
Keywords          : NTSrvWkst ntutil kbtool<BR>
Version           : WinNT:3.1<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
