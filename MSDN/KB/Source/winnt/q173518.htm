

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Stop: 0xC000012F -Image File Did Not Have the Correct Format </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q173518">
<META NAME="KBModify" CONTENT="1998/03/18">
<META NAME="KBCreate" CONTENT="1997/09/08">
<META NAME="Keywords" CONTENT="ntboot ntsetup NTSrvWkst kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  You may receive the following error message as your computer restarts:     Stop: 0xC000012F STATUS_INVALID_IMAGE_NOT_MZ     The specified image file did not have the correct format, it did not    have an initial MZ.  This error may also occur follo...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAA1,QDI2,QAR4,QAAP,QAB4,QBVV,QDIO,QANE,QAKJ,QAGB,QBV8,QAI4,QAEF,QAJG V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Stop: 0xC000012F -Image File Did Not Have the Correct Format</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 18, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q173518</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
SYMPTOMS
 
<P>
You may receive the following error message as your computer restarts:
<P>
<PRE>   Stop: 0xC000012F STATUS_INVALID_IMAGE_NOT_MZ

   The specified image file did not have the correct format, it did not
   have an initial MZ.

</PRE>This error may also occur following installation of new drivers to the
system, such as adding a new video driver, or is often seen during either
an upgrade or new installation of Windows NT.
<P>
CAUSE
 
<P>
This error is caused by the system being unable to load a needed file
because of the file being corrupted. This usually occurs during the file
copy process, and is often because of a hardware malfunction. It may be a
one-time occurrence, but often is a signal for the user to do a through
examination of system hardware to determine what is causing the corruption.
<P>
NOTE: The parameter 0xc000012f may also be seen in conjunction with other
Trap Codes such as 0x0000006b and is usually shown as the first parameter
following the trap:
<P>
STOP 0x0000006b (0xc000012f, 0xxxxxxxxx, 0xxxxxxxxx,0xxxxxxxxx)
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Because this trap code is caused by a corrupted file required to load
Windows NT, and the trap screen does not always reference which specific
file caused the problem, the best solution is usually basic trouble
shooting.
<P>
It is recommended to have a good back up of anything on the computer that
the user considers valuable before proceeding with the different
procedures.
<P>
<P><h3>Windows NT was Already Installed and Running</h3>
 
<P>
If the stop error occurred following a change in hardware drivers, press
the space bar to select the Last Known Good option during startup, and then
change the necessary components when the computer comes up.
<P>
Try selecting [VGA MODE] option from the boot menu, this will display the
Windows NT system files on the screen as they are loaded and may give you a
clue about which file is corrupt.
<P>
Use the Emergency Repair Disk to replace the missing or damaged driver
file on the partition by following the procedure outlined in the
following Microsoft Knowledge Base articles:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q103280.htm">Q103280</A></B>
   TITLE     : Using an Emergency Repair Disk Created by Windows NT

   ARTICLE-ID: <B><A HREF="../WINNT/Q164471.htm">Q164471</A></B>
   TITLE     : Replacing System Files Using a Modified Emergency Repair
               Disk

</PRE>This will allow you to perform a system repair to replace the corrupted
Windows NT system file.
<P>
<P><h3>If Performing an Initial Windows NT Installation or Upgrade</h3>
 
<P>
If the computer has MS-DOS or another operating system installed, copy the
i386 directory from the Windows NT installation CD to C:\i386, and at a
command prompt carry out the following command:
<P>
<PRE>   WINNT /b.

</PRE>This often allows the installation to proceed, but if Windows NT will not
install in this manner, you may want to consider the following options:

<UL><LI>When installing on a new computer with little or nothing else on it,
   reformat the hard drive and install using the three setup disks, or
   booting with DOS, copying the i386 directory, and carry out a WINNT /b
   command as above. If you are using the three setup disks, consider
   making a new set using the WINNT /ox switch to help eliminate the
   possibility of a bad floppy disk.

<LI>Disable caching options and BIOS shadowing.

<LI>Removing all possible hardware to take the computer down to a bare box
   with only one hard drive and controller in order to eliminate possible
   hardware conflicts.

<LI>Ask the computers' manufacturer if a newer System BIOS is available, if
   so, flash the BIOS using the manufacturers instructions.
<P>
</UL>Because this error is usually associated with hardware, it is recommended
to troubleshoot the computer from that stand point, including the
motherboard, controller, memory, hard drive, and CD-ROM drive.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: file corruption<BR>
Keywords          : ntboot ntsetup NTSrvWkst kbsetup<BR>
Version           : WinNT:3.5,3.51,4.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 18, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
