

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Downlevel Print Jobs Not Redirected Correctly </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q121853">
<META NAME="KBModify" CONTENT="1998/01/19">
<META NAME="KBCreate" CONTENT="1994/10/20">
<META NAME="Keywords" CONTENT="NTINTEROP ntnetserv ntprint NTSrvWkst kbinterop">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  If a Windows NT 3.1 computer is sharing a printer that is redirected to a Windows NT 3.5 computer, downlevel clients (like MS-DOS or Windows for Workgroups) print jobs get stuck in the Windows NT 3.1 print queue.  CAUSE =====  When a Windows NT 3.1...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAOX,QBWO,QA3A,QBVV,QDL9,QBWQ,QBWN,QDNL,QBWS,QAGB,QAM5,QAIJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Downlevel Print Jobs Not Redirected Correctly</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 19, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q121853</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If a Windows NT 3.1 computer is sharing a printer that is redirected to a
Windows NT 3.5 computer, downlevel clients (like MS-DOS or Windows for
Workgroups) print jobs get stuck in the Windows NT 3.1 print queue.
<P>
<P><h2>CAUSE</h2>
 
<P>
When a Windows NT 3.1 computer sends a downlevel print job, it sends the
job as a null session. Null sessions are those where the user credentials
are blank during the request to setup a session. Because the downlevel
client may not have an account or because of a conflicting account on the
second print server, downlevel jobs are sent as a null sessions. Security
is up to the first computer in this scenario.
<P>
Windows NT version 3.1 supports null sessions by default. However, Windows
NT version 3.5 does not provide this support unless specifically configured
to do so. This change was made in order to provide a higher default level
of security.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
This problem can be resolved by modifying the registry on the computer
running Windows NT 3.5 to allow null sessions to the print share.
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor and locate the following Registry subkey in the
   HKEY_LOCAL_MACHINE subtree:
<P>
<P><PRE>      \SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters
</PRE>
<P><LI>Select the NullSessionShares value.

<P><LI>From the Edit menu, select Multi String.
<P>
   NOTE: values will already exist and should not be replaced. If the
   values are accidentally deleted, just click Cancel and try again.

<P><LI>Select the first blank line after the values that currently exist. (The
   lines above should not be highlighted.) Add the name of the print share
   on Windows NT 3.5 you want to accept null sessions. This needs to be
   done for each share individually.

<P><LI>Click OK and exit Registry Editor.

<P><LI>Either shut down and restart Windows NT or from a command prompt type:
   NET STOP SERVER. Then type: NET START SERVER.
<P>
</OL><h2>MORE INFORMATION</h2>
 
<P>
For a Windows NT LPD server to support print jobs that are redirected to a
second Windows NT shared print queue through a UNC name, NullSessionShares
must be used. The UNC name of the printer share must be added as a null
share on the second Windows NT print server. For example, if \\Server1 is
the LPD server and it's port is redirected to \\Server2\Printer, the UNC
name \\SERVER2\Printer must be added to NullSessionShares on \\Server2.
<P>
For additional information on using LPD, please see the following resource:
<P>
Windows NT Resource Kit 3.51 Volume 2, Networking Guide; Chapter 18,
"Internetwork Printing with TCP/IP," page 357.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: wfw wfwg prodnt print lpr lpd stuck null shares<BR>
Unix local port UNC<BR>
Keywords          : NTINTEROP ntnetserv ntprint NTSrvWkst kbinterop<BR>
Version           : WinNT:3.5,3.51,4.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 19, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
