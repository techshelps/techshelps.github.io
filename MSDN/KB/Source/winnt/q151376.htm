

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Disable Autochk if It Stops Responding During Reboot </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q151376">
<META NAME="KBModify" CONTENT="1997/11/11">
<META NAME="KBCreate" CONTENT="1996/05/21">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When a Windows NT system is shut down improperly or stops responding, Autochk runs against any volumes that are marked as being dirty. If the operating system partition is marked dirty and Autochk tries to repair the volume, and if the damaged volu...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QALW,QAGC,QA5C,QBWS,QA7T,QAR4,QAA1,QBXS,QAGB,QDI2,QDL9,QDIR,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Disable Autochk if It Stops Responding During Reboot</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q151376</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.50 3.51
WINDOWS
<P>
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When a Windows NT system is shut down improperly or stops responding,
Autochk runs against any volumes that are marked as being dirty. If the
operating system partition is marked dirty and Autochk tries to repair the
volume, and if the damaged volume causes Autochk to stop responding, it is
not possible to get back into Windows NT to perform recovery procedures.
Additionally, if an extremely large volume becomes corrupt it could take
many hours for Autochk to repair the volume (the time required depends on
the size of the partition and the number and size of the affected files).
<P>
In order to get back into Windows NT, you can disable the drive whose
partition/volume is causing Autochk to stop responding, then boot into
Windows NT and rename Autochk.exe, which is located in the
%systemroot%\system32 directory. Once Autochk.exe is renamed so it can't
run, you can perform a normal shutdown, re-enable the problem drive whose
volume caused Autochk to hang, then reboot the server. Once back in Windows
NT, you can perform data recovery procedures by running a manual Chkdsk /F
/R or by re-creating the partition and restoring data from a current
backup.
<P>
If the volume/drive causing Autochk to hang cannot be disabled because it
is the operating system drive or part of a hardware RAID 5 configuration,
it will be necessary to perform the following procedure to replace the
Autochk.exe file with a nonexecutable file also called Autochk.exe in order
to bypass the Autochk process.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
WARNING: This procedure should not be performed unless it is impossible to
get back into Windows NT any other way in order to perform data recovery
procedures. Bypassing the Autochk process simply to save time could cause
additional corruption of the partition if you continue to use it without
having it repaired by Autochk.
<P>
To replace the Autochk.exe with a nonexecutable file, perform the following
procedure:

<OL><P><LI>Modify the contents of the emergency repair disk (ERD) by performing the
   following steps:
<P>
   A. Find the hidden file called Setup.log on the ERD.
   B. In Setup.log, find the entry that references autochk.exe in the
<P><PRE>      [files.WinNt] section (Where %systemroot% is your NT installation
      directory IE: WINNT35).  Change the line to the following:
</PRE><P>
<P><PRE>      \%SystemRoot%\System32\autochk.exe="autochk.exe","99999","\",
      "ERD disk","autochk.exe"
</PRE><P>
   C. While using a text editor such as Notepad, create a file called
<P><PRE>      Autochk.exe, enter any text in the file, then save the file as
      Autochk.exe in the root directory of the ERD.
</PRE>
<P><LI>Restart your computer with the three Windows NT 3.5x setup disks.

<P><LI>Choose "R" to repair your Windows NT installation.

<P><LI>Select only "Verify Windows NT System Files," then choose Continue.

<P><LI>If prompted for "Windows NT Workstation or Server setup disk #4,"
   press the ESC key to allow you to continue with the repair process.

<P><LI>DO NOT SELECT TO REPLACE ALL FILES; ONLY REPLACE AUTOCHK.EXE.

<P><LI>After Autochk.exe is replaced with the file copied from the repair
   disk, press F3 to exit the repair process and reboot the computer.
   Autochk.exe will not run because it was replaced with the text file you
   created in step 1C above.

<P><LI>After performing this process, you will need to make another Emergency
   Repair Disk by running the RDISK utility.  Choose Run from the Start
   menu, type RDISK and select UPDATE.

<P><LI>Replace the autochk.exe file that is on the system with the one on the
  Windows NT CDROM.
   
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory:<BR>
KBSubcategory:<BR>
Additional reference words:<BR>
Version           : 3.50 3.51<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
