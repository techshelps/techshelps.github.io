

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BOOTP Service Does Not Populate ARP Cache </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q164394">
<META NAME="KBModify" CONTENT="1997/12/08">
<META NAME="KBCreate" CONTENT="1997/02/28">
<META NAME="Keywords" CONTENT="kbbug4.00 NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT 4.0 Service Pack 2 (SP2) provides a new feature that allows the DHCP Service to respond to BOOTP requests as well as DHCP requests.  from RFC 1048, the BOOTP service is defined as follows:      The Bootstrap Protocol (BOOTP) is a UDP/IP-...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWD,QDIV,QARL,QAGI,QAH6,QAC2,QAY2,QAIJ,QACK,QDJG,QBVV,QAR5,QBW9,QDO3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BOOTP Service Does Not Populate ARP Cache</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 8, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q164394</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Windows NT 4.0 Service Pack 2 (SP2) provides a new feature that allows the
DHCP Service to respond to BOOTP requests as well as DHCP requests.
<P>
from RFC 1048, the BOOTP service is defined as follows:
<P>
<PRE>   "The Bootstrap Protocol (BOOTP) is a UDP/IP-based protocol that allows a
   booting host to configure itself dynamically, and more significantly,
   without user supervision. It provides a means to assign a host its IP
   address, a file from which to download a boot program from some server,
   that server's address, and (if present) the address of an Internet
   gateway."

</PRE>This means that a BOOTP server should provide 2 basic functions:

<OL><P><LI>Provide IP addresses to hosts who request them, without user
   intervention. Additionally, the host should be provided with other
   relevant information, such as default gateway address, name server
   address, and so forth.

<P><LI>Provide location of image for client to start from. This is most
   often a diskless workstation.
<P>
</OL>For BOOTP clients that only require an IP address from the Windows NT BOOTP
server, their clients simply request an address and the Windows NT Server
provides the IP address.
<P>
In the case where the host starts from an image file on a server, this is
similar to how Remote Program Load (RPL) is used for remoteboot in a
Microsoft networking environment.
<P>
Typical BOOTP session:
<P>
Step 1. Client sends BOOTP request
<P>
Step 2. Server sends response containing:
<P>
<PRE>    - client's IP address
    - boot image filename
    - boot image servername
    - other common IP parameters (router, dns, etc)

</PRE></OL>Step 3. Client starts trivial file transfer protocol (TFTP) download of
<PRE>         boot image file from boot image server.

</PRE>In this scenario, when the boot image server is specified as the Windows NT
DHCP/BOOTP server, the client is never able to download the boot image.
<P>
<P><h2>CAUSE</h2>
 
<P>
There are two issues with using Windows NT as a BOOTP server, where an
Image file is required:

<OL><P><LI>The download of the image file is done using TFTP. Windows NT does not
   include a TFTP server service. To use Windows NT DHCP/BOOTP Server with
   BOOTP clients who must boot from an image file (usually diskless
   workstations), a third-party TFTP server is required. For more
   information on TFTP, see the following article in the Microsoft
   Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A HREF="../WINNT/Q142373.htm">Q142373</A></B>
<PRE></PRE>      TITLE     : TFTP Server Not Included With Windows NT

</PRE><P><LI>There is a bug in the BOOTP function of the DHCP Service. When the
   BOOTP client tries to start the TFTP session with the server, the server
   does an address resolution protocol (ARP) query for the client's media
   access control address. The client does not have a full operating system
   or TCP/IP stack loaded at this time because it is dependent on the boot
   image file, therefore the client never responds to the ARP request. The
   BOOTP service on the Windows NT DHCP/BOOTP server should have populated
   the ARP cache with the client address information when it sent the BOOTP
   response.
<P>
</OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0
Service Pack 2. We are researching this problem and will post new
information here in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: bootp arp tftp<BR>
Keywords          : kbbug4.00 NTSrv nttcp kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 8, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
