

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setacl.exe Not Available in Windows NT 4.0 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q157963">
<META NAME="KBModify" CONTENT="1997/07/10">
<META NAME="KBCreate" CONTENT="1996/10/21">
<META NAME="Keywords" CONTENT="kbbug4.00 kbenv ntboot ntfilesys ntsecurity NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When an administrator attempts to secure the Microsoft Windows NT system by changing the default Windows NT file system (NTFS) file and directory permissions set up on the                and/or the default system directories and subdirectories, som...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAA1,QDI2,QABA,QDIZ,QBWG,QBKX,QAK7,QBXS,QAB4,QDL9,QBWQ,QBWO,QBWN,QAFI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Setacl.exe Not Available in Windows NT 4.0</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q157963</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When an administrator attempts to secure the Microsoft Windows NT system by
changing the default Windows NT file system (NTFS) file and directory
permissions set up on the &lt;%systemroot%&gt; and/or the default system
directories and subdirectories, some functions, such as users' ability to
log on to the network, may be impaired. In extreme cases, the system may
display a blue screen error message on startup.
<P>
In Windows NT version 3.5x, it was possible to reset the default
permissions on the system files using the Setacl.exe command. This is not
possible in Windows NT version 4.0.
<P>
For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q153094.htm">Q153094</A></B>
   TITLE     : Restoring Default Permissions to Windows NT System Files

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The process that Windows NT Setup uses to create an NTFS partition and set
the default permissions was changed in Windows NT 4.0. In Windows NT 3.5x,
Setup would schedule two programs to run during the final reboot phase. The
first program, Autoconv.exe, would convert the file system to NTFS format.
The second program, Setacl.exe, would set the default permissions on the
newly created NTFS system partition. These programs run independently from
Setup and, therefore, could be rescheduled as noted in the above article.
<P>
In Windows NT 4.0, Setup was changed. The conversion to NTFS still works
the same way, by scheduling Autoconv.exe. However, this is done at the end
of the Text-mode portion of Setup so that the conversion happens when Setup
is booting into GUI-mode before Setup finishes copying all files into the
system. At the very end of GUI-mode, Setup calls a function that sets the
default permissions based on the Perms.inf file. This function is not a
program that runs independently from the Setup process; therefore, it
cannot be rescheduled like previous versions. This is by design.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Reinstall Windows NT into a separate directory. This will allow you to
restore your operating system files %systemroot% from a backup tape that
contains the correct default permissions to allow the operating system to
boot and function normally. After Windows NT is restored and restarted, you
can delete the parallel copy of Windows NT.
<P>
<P>
<P>
<P>
<P>
<P>
<P>
-OR-
<P>
Use the NT v4.0 Resource Kit utility called FIXACLS.EXE.
<P>
FIXACLS.EXE can be found in the NT v4.0 Resource Kit Supplement Two.
<P>
When system permissions have been lost, FIXACLS can restore default
permissions to the system files. For example, the Windows NT convert
command only converts your file system to NTFS. It does not set the default
permissions after the conversion. FIXACLS fills this gap.
<P>
To use FIXACLS, your user account needs "Backup files and folders"
privileges on the computer where the files and folders are stored, and you
must be logged on as a member of the Administrators group for the domain or
computer where your user account is defined. Otherwise, "Access denied"
error messages may occur.
<P>
FIXACLS sets the permissions to the values defined in
%SYSTEMROOT%\INF\PERMS.INF. Therefore, access to this file is also required
to run FIXACLS.
<P>
<P>
<P>
<P>
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbbug4.00 kbenv ntboot ntfilesys ntsecurity NTSrvWkst<BR>
Version             : 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
