

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Shadow Effect with SMS MachineIDs and NetWare 500/1000 Licenses </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q125455">
<META NAME="KBModify" CONTENT="1997/04/22">
<META NAME="KBCreate" CONTENT="1995/01/26">
<META NAME="Keywords" CONTENT="kbinterop kbnetwork ntinterop smsdatabase">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  When you use Systems Management Server to administer a NetWare 4.x server with a 500- or 1000-client license, the SMS MachineID starts repeating after the 255th user connects. Because SMS uses the IPX address for NetWare MachineIDs, duplicate Machi...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAI5,QBG2,QAC2,QAGI,QARL,QAUD,QBE7,QBE6,QAR5,QAL3,QBW4,QBWD,QAFO,QBXO,QA38 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Shadow Effect with SMS MachineIDs and NetWare 500/1000 Licenses</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 22, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q125455</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server version 1.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you use Systems Management Server to administer a NetWare 4.x
server with a 500- or 1000-client license, the SMS MachineID starts
repeating after the 255th user connects. Because SMS uses the IPX address
for NetWare MachineIDs, duplicate MachineIDs are assigned for SMS clients
in the SMS Administrators Sites window. The SMSID is not duplicated.
<P>
<P><h2>CAUSE</h2>
 
<P>
SMS uses the NetWare bindery and the 3.x NetWare application program
interface (API) calls to get the IPX address for a machine on a NetWare
domain. The IPX address is then used to create the MachineID for each
client. The NetWare 3.x APIs that support bindery calls wrap at the 255th
connection. For example, when the 256th client connects, SMS attempts to
get the IPX address for that client. The NetWare API call returns the IPX
address for connection one instead of 256, connection two instead of 257,
etc. This creates a shadow effect as the 256th SMS client gets the same
MachineID in the Sites window as the first SMS client.
<P>
Older NetWare IPX stacks were designed to work with NetWare 2.x and 3.x
servers which had a maximum of 250 users and connections available. This
allowed the IPX stack to use only one byte to represent the connection ID.
With NetWare 4.x servers, 500 and 1000 users and connections are supported.
<P>
The problem occurs when an older IPX stack connects to a NetWare 4.x server
that currently has 255 or more connections already assigned. If the
connection ID is returned by the server as 256 or greater, the IPX stack
can only store the lower 8 bits. The IPX stack thinks the connection IDs
256, 512, and 768 are 1, and IDs 257, 513, and 769 are 2, and so on.
<P>
When INVDOS asks the IPX stack on a client to return the IPX address, the
IPX stack then requests the IPX address from the server. Since the request
includes connection "1" instead of connection "256," the return IPX address
is incorrect. This incorrect IPX address is then reported through the SMS
system and ends up in the SQL database. This is why SMS seems to be
reporting duplicate MachineNames for unique SMS clients.
<P>
The NetID property is always returned correctly. This only affects the IPX
address.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Use the latest version of IPXODI. Do not use IPX.COM or MSIPX.COM.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: sms prodsms Novell net machine id<BR>
Keywords            : kbinterop kbnetwork ntinterop smsdatabase<BR>
Version             : 1.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 22, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
