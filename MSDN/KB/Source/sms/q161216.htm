

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMS: Client Setup Fails to Update Sms.ini on Windows NT System </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161216">
<META NAME="KBModify" CONTENT="1997/04/15">
<META NAME="KBCreate" CONTENT="1996/12/18">
<META NAME="Keywords" CONTENT="kbbug1.00 kbbug1.10 kbbug1.20 kbsetup smsinv smssetup">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  When the directory and file permissions are set to Read (RX) for the root of drive C on a computer running Windows NT, the Systems Management Server client setup program, Cli_nt.exe, cannot update the Sms.ini file. Even if the group  Everyone  is g...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBF0,QBWP,QAXB,QAFI,QA0B,QAC1,QAA1,QBD2,QDI2,QDIZ,QAVV,QAR4,QARL,QBFY,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: Client Setup Fails to Update Sms.ini on Windows NT System</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 15, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161216</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server versions 1.0, 1.1, and 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When the directory and file permissions are set to Read (RX) for the root
of drive C on a computer running Windows NT, the Systems Management Server
client setup program, Cli_nt.exe, cannot update the Sms.ini file. Even if
the group "Everyone" is given full rights to the Sms.ini file, the file
will not be updated. The following error message, indicating that Client
Setup is unable to update the Sms.ini file, will be displayed when the
application runs:
<P>
<PRE>   Problem opening or creating SMS.INI

</PRE><h2>CAUSE</h2>
 
<P>
Systems Management Server Client Setup attempts to create a temporary file
in the root of drive C with a unique file name that is determined at the
time of file creation. It will then write what will be the current contents
of the Sms.ini file to this temporary file. Once this step has been
completed, and no errors are detected, Client Setup will then copy the
temporary file to Sms.ini, and then delete the temporary file.
<P>
Because all standard user rights can be locked down in drive C (according
to Windows NT security recommendations), the Systems Management Server
inventory operation described above will fail while trying to create a new
temporary file.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem, provide 'Change (RWXD)' rights to the root of
drive C.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Systems Management Server
versions 1.0, 1.1 and 1.2. A supported fix is now available for version 1.2
only, but has not been fully regression-tested and should be applied only
to systems experiencing this specific problem. Unless you are severely
impacted by this specific problem, Microsoft recommends that you wait for
the next Service Pack that contains this fix. Contact Microsoft Technical
Support for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The supported fix requires a new Cli_nt.exe file that exposes the temporary
file name created during the Sms.ini update. The new file name is Sms.new.
If this file does not exist, it will be created in the root of drive C. If
it does already exist, it will be opened and truncated. After Sms.new is
created or opened, the updated Sms.ini information is written to this file.
When this operation is completed, the file is copied back to Sms.ini. This
file is no longer be deleted, but flagged with the Hidden file attribute
instead.
<P>
Administrators can create a blank Sms.new file in a user's root directory,
assign it the appropriate rights, and then lock down all other files except
Sms.ini. This allows administrators to lock down the entire root directory
on computer running Windows NT, except for the Sms.new and Sms.ini files,
and the Systems Management Server inventory mechanism will continue to work
properly.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms cli_nt rights<BR>
Keywords            : kbbug1.00 kbbug1.10 kbbug1.20 kbsetup smsinv smssetup<BR>
Version             : 1.0 1.1 1.2<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 15, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
