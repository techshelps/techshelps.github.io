

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMS: Troubleshooting Inventory MIF Backlog Problems </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176517">
<META NAME="KBModify" CONTENT="1998/03/16">
<META NAME="KBCreate" CONTENT="1997/11/10">
<META NAME="Keywords" CONTENT="smsconfig smsdatabase smsdataloader smshowto">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  MIFs may build up in the ..SMS\Site.srv\Dataloder.box\Deltamif.col directory (or the ..SMS\Site.srv\Dataloder.box\Deltamif.col\Process directory in version 1.2) for a variety of reasons. This article outlines troubleshooting suggestions to why the ...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABI,QABH,QABM,QAU3,QAMR,QBVX,QBXS,QBWP,QAJP,QDMH,QAZV,QAO4,QAFI,QAGR,QAPN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: Troubleshooting Inventory MIF Backlog Problems</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 16, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176517</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server versions 1.0, 1.1, and 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
MIFs may build up in the ..SMS\Site.srv\Dataloder.box\Deltamif.col
directory (or the ..SMS\Site.srv\Dataloder.box\Deltamif.col\Process
directory in version 1.2) for a variety of reasons. This article outlines
troubleshooting suggestions to why the build up occurs and how to resolve
it.
<P>
<P><h2>CAUSE</h2>
 
<P>
The ..SMS\Logs\Datalodr.log and the Windows NT Application Event Log on
both the SQL Server computer and the Systems Management Server Site Server
provide information about possible causes. You should also check the SQL
Server error log.
<P>
NOTE: Before you begin troubleshooting, dump the Systems Management Server
and Master databases and then back up the Systems Management Server
directory structure and the HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SMS
registry key.
<P>
<P><h3>Site Speed</h3>
 
<P>
The site speed (set in Site Properties on the Services tab) should never be
set to Very Fast. A setting of Medium or Fast will process MIFs faster
because the Site Configuration Manager does not have to continually perform
watchdog cycles which gives the Dataloader utility a chance to run
uninterrupted for a longer period of time.
<P>
<P><h3>SQL Configuration</h3>
 
<P>
If Open Objects is set to less than 5,000, Dataloader can get backed up.
Tempdb should be 20-30 percent of the largest database on the computer
running SQL Server. User connections must be set appropriately.
<P>
For additional information about important tuning parameters, please see
the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SMS/Q166244.htm">Q166244</A></B>
   TITLE     : SMS: SQL Server Tuning Parameters for Systems Management
               Server

</PRE>Check the Cache Hit Ratio with performance Monitor to make sure that the
database is in cache (should be above 99 percent), not paging out. Add RAM
and/or dedicated memory to SQL Server if necessary.
<P>
<P><h3>Database and Transaction Log Size</h3>
 
<P>
Make sure that the database and its transaction log are not full, and that
the transaction log is 20 percent of the Systems Management Server database
size. If the database is less than 20 percent free, failures may occur.
<P>
<P><h3>Services</h3>
 
<P>
Make sure that the Systems Management Server Executive Service is running
on the site server.
<P>
<P><h3>Client Resyncs</h3>
 
<P>
Check the Windows NT event log for a high number of client resyncs (Event
186). If there are several resynchronizations, they may occur because
duplicate SMSIDs are assigned. For additional information, please see the
following articles in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SMS/Q127052.htm">Q127052</A></B>
   TITLE     : SMS Unique ID (SMSID) Allocation

   ARTICLE-ID: <B><A HREF="../SMS/Q138021.htm">Q138021</A></B>
   TITLE     : How Inventory Dataloader Finds Matching Computers in SMS

</PRE><h3>SQL Server Service Pack</h3>
 
<P>
Apply (or re-apply) the latest SQL Server Service Pack.
<P>
<P><h3>SQL Tracing</h3>
 
<P>
You can enable SQL statement input and output in the Dataloder.log by
setting the
<P>
<PRE>   HKEY_LOCAL_MACHINE\Software\Microsoft\SMS\Tracing\SQL Enabled

</PRE>registry parameter to 1. To disable SQL tracing, set the value to 0.
<P>
The Systems Management Server Executive Service must be stopped and
restarted for the change to take effect.
<P>
NOTE: SQL Tracing should be disabled when you are not performing
troubleshooting steps. Leaving it enabled causes the Dataloader to slow
down and the log to fill up more quickly.
<P>
<P><h3>DBCC Checks</h3>
 
<P>
Run SQL Server DBCC Checkdb and NewAlloc on the Systems Management Server
database in Single User Mode.
<P>
<P><h3>Site Reporter</h3>
 
<P>
Check the ..SMS\Site.srv\Siterep.box to see if there are files present. If
there are, and the site is a child primary site, ensure that site-to-site
communication is functioning properly. To determine this, do the following:

<UL><LI>Look in the appropriate sender log.

<LI>Check the addresses.

<LI>Check the Windows NT Application Event Log.

<LI>Check the Outbox scheduling.
<P>
</UL>If files are present in the Siterep.box subdirectory, temporarily move them
to another subdirectory to see if the MIF processing improves.
<P>
<P><h3>User Group MIFS</h3>
 
<P>
Check the SMS\Site.srv\Dataloder.box\Deltamif.col directory for UMF files.
If there are several UMF files, and they are large, you probably have a
large number of users, groups, or a complicated trust matrix in your
environment.
<P>
You may want to change the default polling interval for user and group
enumeration using the Setgug.exe utility. For additional information about
the utility, please see the following articles in the Microsoft Knowledge
Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SMS/Q168724.htm">Q168724</A></B>
   TITLE     : SMS: List of Tools Available on the SMS 1.2 Compact Disc

   ARTICLE-ID: <B><A HREF="../SMS/Q171005.htm">Q171005</A></B>
   TITLE     : SMS: Site Config Manager Service Locks Trusted Service
               Account

</PRE><h3>MIF Size</h3>
 
<P>
Check the SMS\Site.srv\Dataloder.box\Deltamif.col and
SMS\Site.srv\Dataloder.box\Deltamif.col\Process directories and note the
MIF size. Larger MIFs (that is, MIFs that contain custom information or
extensive software inventory) will process slower.
<P>
<P><h3>I/O Errors</h3>
 
<P>
If SQL Server devices and Systems Management Server directories are on the
same drive or the drive is mirrored with a single disk controller, check
for I/O disk errors reported in the SQL log file and/or Performance
Monitor.
<P>
If disk I/O appears to be a bottleneck, you may need to move SQL Server
devices to another physical disk drive, install a second controller, and so
forth.
<P>
<P><h3>SMSMaint Script</h3>
 
<P>
Run the SMSMaint.sql script from the BackOffice Resource Kit.
<P>
<P><h3>SPID Performance</h3>
 
<P>
Monitor the SQL SPID performance using SQL WHO and Performance Monitor to
correlate this to the Dataloader thread. For additional information, please
see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SQLSERVER/Q117559.htm">Q117559</A></B>
   TITLE     : How to Correlate Spid, Kpid, and Thread

</PRE><h3>Inventory Frequency</h3>
 
<P>
Decrease inventory frequency if necessary. For example: if there are six
child sites of 2,000 to 4,000 plus clients that inventory every time they
log on, and they report to a central site, an expected backlog will occur.
<P>
Systems Management Server 1.2 Dataloader is multithreaded. If MIFs are
large, and/or the number of clients is large, a Systems Management Server
version 1.0 or 1.1 site may have MIF backup and the troubleshooting
suggestions may not help. If the site is 1.0 or 1.1, consider upgrading to
Systems Management Server version 1.2 (and the latest Systems Management
Server service pack).
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms smsconfig smsdatabase smsdataloader<BR>
smshowto<BR>
Keywords          : smsconfig smsdatabase smsdataloader smshowto<BR>
Version           : Windows:1.0,1.1,1.2<BR>
Platform          : WINDOWS<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 16, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
