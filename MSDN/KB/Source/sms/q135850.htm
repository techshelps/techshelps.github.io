

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMS: No Query Results Returned When SQL Tempdb is Too Small </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q135850">
<META NAME="KBModify" CONTENT="1997/04/23">
<META NAME="KBCreate" CONTENT="1995/08/28">
<META NAME="Keywords" CONTENT="kbbug1.00 kbbug1.10 kbnetwork smsconfig smsdatabase">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  If you run a query that requires more space than is allocated for tempdb, no return is displayed and no errors are given.  By default, Systems Management Server sorts the query results before displaying them. This sorting is done in tempdb.  RESOLU...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB5,QAZV,QAYY,QBW5,QDMH,QAJG,QBE7,QBE6,QAUD,QAL3,QDNL,QALZ,QACF,QAU5,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: No Query Results Returned When SQL Tempdb is Too Small</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q135850</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server versions 1.0, 1.1 and 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If you run a query that requires more space than is allocated for tempdb,
no return is displayed and no errors are given.
<P>
By default, Systems Management Server sorts the query results before
displaying them. This sorting is done in tempdb.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
If this problem exists for a single large query, it may be possible to
refine the query so that the query result is smaller.
<P>
-or-
<P>
Increase the size of tempdb.
<P>
<P><h3>Device Size Recommendations</h3>
 
<P>
-  The data and log devices should each be a minimum of 10 MB.
<P>
-  For each machine, 35k of data device space should be allocated.
<P>
-  For the site database, the log device should be at least 10% of the data
<PRE>   device.

</PRE>-  The data device for the tempdb should be at least 20% of the data device
<PRE>   for the site database.

</PRE>-  For the tempdb database, the log device should be at least 20% of the
<PRE>   data device.

</PRE>For example, on a site of 10,000 machines:
<P>
-  The site data device would be 35k x 10,000 for a 350 MB data device and
<PRE>   10% x 350 MB for a 35 MB log device.

</PRE>-  The tempdb data device would be 20% x 350 MB for a 70 MB data device and
<PRE>   a 20% x 70 MB for a 14 MB log device.

</PRE><h3>Free Space Requirements in the Database</h3>
 
<P>
To find the space used in the data device, run sp_spaceused against the
database. Divide the space reserved by the size of the data device. For
example, if this is over 90% for the site database, expand the database.
If this is over 60% for the tempdb data device, expand the database. The
tables in tempdb are all temporary, so this needs to be checked at peak
usage, when several Admin user interfaces are querying the database. The
Admin user interfaces put more of a load on tempdb than the site can, so
even a few can consume the space recommended above.
<P>
The log devices can be monitored with perfmon. If any of these get over
60%, expand the database.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Systems Management Server
versions 1.0, 1.1 and 1.2. We are researching this problem and will post
new information in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms sms<BR>
Keywords            : kbbug1.00 kbbug1.10 kbnetwork smsconfig smsdatabase<BR>
Version             : 1.0 1.1 1.2<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 23, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
