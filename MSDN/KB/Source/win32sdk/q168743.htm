

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FILE: Using HALFTONE Stretching with COLORADJUSTMENT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q168743">
<META NAME="KBModify" CONTENT="1997/05/21">
<META NAME="KBCreate" CONTENT="1997/05/20">
<META NAME="Keywords" CONTENT="GdiBmp GdiDc kbprg">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  This sample demonstrates how to use the HALFTONE stretch mode and some of the effects that can be generated by using it.  The following file is available for download from the Microsoft Software Library:   ~ Halftone.exe  For more information about...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPG,QA5W,QAY4,QAY2,QAG9,QAPF,QAH4,QBSO,QAJ4,QDIT,QBWP,QBFY,QAX6,QAW9,QAL3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FILE: Using HALFTONE Stretching with COLORADJUSTMENT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q168743</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
   - Windows NT, versions 3.5, 3.51, 4.0
   - Windows 95
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This sample demonstrates how to use the HALFTONE stretch mode and some of
the effects that can be generated by using it.
<P>
The following file is available for download from the Microsoft Software
Library:
<P>
<PRE> ~ <A HREF="http://support.microsoft.com/download/support/mslfiles/Halftone.exe">Halftone.exe</A> <I>(size: 57103 bytes)</I> 

</PRE>For more information about downloading files from the Microsoft Software
Library, please see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../zMiscellaneous/Q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online Services

</PRE>The following files are a contained in Halftone.exe:

<UL><LI>Palette.h
   Palette.C  - Contains all of the functions relating to creating and
<PRE>                manipulating Windows palettes.

</PRE><LI>DIB.h
<PRE>   DIB.c      - Contains all of the code for loading and converting DIBs
                and DDBs.

</PRE><LI>HALFTONE.h
   HALFTONE.c - Contains the UI and the code demonstrating halftone
<PRE>                stretching and COLORADJUSTMENT.

</PRE></UL><h2>MORE INFORMATION</h2>
 
<P>
In many cases it is necessary to display bitmaps or DIBs that have a
greater bit depth than your current display mode. To account for this, GDI
has to remap the colors your bitmap uses into the colors that are
available. This remapping process can be slow and often produces
unsatisfactory results. A simple way to produce high quality
representations of your original image is to ask GDI to dither the image
into the palette selected into the target DC. To get GDI to dither the
image you need to use the SetStretchBltMode() API and specify the target DC
and the HALFTONE flag. Now, when you want to display your bitmap into the
target DC, all you have to do is use StretchBlt() or StretchDIBits() rather
than BitBlt() or SetDIBits(). For example:
<P>
<PRE>   SetStretchBltMode(hdcTarget, HALFTONE);
   StretchBlt(hdcTarget, 0,0,dwWidth,dwHeight,
                   hdcSource, 0,0,dwWidth,dwHeight, SRCCOPY);

</PRE>When you use the HALFTONE stretch mode, it is possible to apply a filter
that alters the way GDI processes the color information from the source
image. This makes it possible to not only lighten or darken the image but
also apply more complex image filters. To specify a filter you use the
SetColorAdjustment() API and pass it the target DC and a pointer to a
COLORADJUSTMENT record. The COLORADJUSTMENT structure defines the color
adjustment values used by the StretchBlt() and StretchDIBits() functions
when the stretch mode is HALFTONE. For example:
<P>
<PRE>   SetColorAdjustment(hdcTarget, &amp;caFilter);

</PRE>After you build the sample, run it, and then load a .bmp file. Once the
file is loaded, you can use "adjust the halftone properties" and see the
effects on the bitmap.
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : GdiBmp GdiDc kbprg<BR>
Version             : 3.5 3.51 4.0<BR>
Resolution Type     : kbfile<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 21, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
