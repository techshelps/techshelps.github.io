

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Use LANA Numbers in a 32-bit Environment </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q138037">
<META NAME="KBModify" CONTENT="1996/08/07">
<META NAME="KBCreate" CONTENT="1995/10/10">
<META NAME="Keywords" CONTENT="kbnetwork kbprg">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  NetBIOS uses the concept of a LANA (LAN adapter number) that allows you to write transport-independent NetBIOS applications. This article describes what a LANA is and recommends an approach to writing NetBIOS applications.  MORE INFORMATION  A LANA...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QBXS,QBWP,QAVZ,QAH6,QASC,QABA,QADX,QBTX,QAJH,QAKC,QALQ,QAGE,QAJQ,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Use LANA Numbers in a 32-bit Environment</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 7, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q138037</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Software Development Kit (SDK)
   versions 3.1, 3.5, 3.51, 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
NetBIOS uses the concept of a LANA (LAN adapter number) that allows you to
write transport-independent NetBIOS applications. This article describes
what a LANA is and recommends an approach to writing NetBIOS applications.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
A LANA is a field of the NetBIOS NCB structure. In IBM's NetBIOS 3.0
specification, a LANA was used to specify a particular network adapter, as
NetBIOS then supported up to two network adapters in one PC computer.
Specifying a LANA of zero directed a request to the first adapter, and
specifying a LANA of one directed a request to the second adapter.
<P>
Originally, IBM sent NetBIOS packets over the NETBEUI protocol, also known
as the NetBIOS Frames protocol. This was the only transport NetBIOS could
use to send data across the network. In other words, each network adapter
had only one protocol to send and receive NetBIOS packets.
<P>
Because most computers have only one network adapter, many MS-DOS-based
applications send all their requests to a LANA value of zero (also called
simply 'LANA zero'). If a second network adapter is installed, some
programs allow the user to configure the application to use LANA one
instead. As a result, LANA zero became a default setting, though it was
never intended to be a default.
<P>
Today's network technology allows NetBIOS to use transports other than
NETBEUI. Microsoft has extended the meaning of LANA to indicate a specific
transport on a specific adapter. For example, if you have two network
adapters, and have IPX/SPX and NETBEUI transports installed, you have four
LANAs. The LANAs may or may not be sequential, and there is no systematic
way to identify which transport maps to which LANA.
<P>
In addition to extending the meaning of a LANA, Microsoft also added an NCB
command (NCBENUM) that returns an array of available LANA numbers. As an
example, the LANA_ENUM structure filled by NCBENUM might hold an array with
values 0, 3, 5, and 6. Zero might map to IPX/SPX on the first adapter,
three might map to NETBEUI on a second adapter, and so on.
<P>
In Windows NT and Windows 95, network adapters consist of physical adapters
(like a 3Com Etherlink II) and software adapters (like the Dial Up
Adapter). In addition, a user may have TCP/IP, NETBEUI, IPX/SPX, and other
transports installed, all of which have NetBIOS support.
<P>
For Windows NT, LANAs are configurable through the control panel. Choose
the Network applet, choose the NetBIOS Interface component, then choose
Configure. A dialog appears that allows you to edit the LANAs.
<P>
For Windows 95, you may only set LANA zero, the default protocol, and if no
protocol is set as default, there won't be a LANA zero. You can set the
default protocol in the control panel. Choose the Network applet, choose
the protocol you want as default, choose Properties, the Advanced tab, and
finally check 'Set this protocol to be the default protocol'.
<P>
LANAs may seem like a constraint that your application must work around.
However, making your application ignorant of how users want to configure
their machines is a powerful idea, and one that makes life easier for your
customers.
<P>
The best way to write a NetBIOS application is to support all LANAs, and
establish connections over any LANA. A good approach is outlined in the
following steps:

<OL><P><LI>Enumerate the LANAs by submitting NCBENUM.

<P><LI>Reset each LANA by submitting one NCBRESET per LANA.

<P><LI>Add your local NetBIOS name to each LANA. The name may be the same on
   each LANA.

<P><LI>Connect using any LANA:
<P>
<P><PRE>    - For servers, submit an NCBLISTEN on each LANA. If necessary, cancel
      any outstanding listen after the first listen is satisfied.
</PRE><P>
<P><PRE>    - For clients, submit an NCBFINDNAME (Windows NT only) or an NCBCALL
      (either Windows NT or Windows 95) on each LANA. The first successful
      find name or call will indicate which LANA to use. When using
      NCBCALL instead of NCBFINDNAME, you must cancel any pending
      NCBCALLs and hang up the extra completed calls (when two or more
      calls are successful.)
</PRE><P>
</OL>It is a good idea to submit NCBADDNAME, NCBLISTEN, NCBFINDNAME, and
NCBCALL asynchronously. Asynchronous requests will be processed almost in
parallel on each transport.
<P>
This architecture is quite beneficial. Once your application is written to
establish connections in this manner, it will support any transport that
NetBIOS can use. As a result, your customers will not have to configure
anything within your application, and your application will not be affected
by dynamic LANAs such as dial-up adapters or plug-and-play hardware.
<P>
<P><h2>REFERENCES</h2>
 
<P>
IBM NetBIOS specification version 3.0 and Win32 SDK Documentation.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: LANA 3.10 3.50 3.51 4.00<BR>
KBCategory: kbnetwork kbprg<BR>
KBSubcategory: NtwkNetBios<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 7, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
