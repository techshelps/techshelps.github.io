

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SAMPLE: Fade a Bitmap Using Palette Animation </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q130804">
<META NAME="KBModify" CONTENT="1996/02/15">
<META NAME="KBCreate" CONTENT="1995/05/28">
<META NAME="Keywords" CONTENT="kbgraphic kbfile kbgraphic">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  PALFADE is a sample application available in the Microsoft Software Library. It demonstrates:   - How to use the AnimatePalette function to fade a bitmap to black.   - How to use the DIBAPI32.DLL library that can be built by the WINCAP32    sample ...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPG,QAG9,QAPF,QDM6,QAMV,QAH2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SAMPLE: Fade a Bitmap Using Palette Animation</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 15, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q130804</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
<P>
<P><PRE>    - Microsoft Windows NT versions 3.5 and 3.51
    - Microsoft Windows 95 version 4.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
PALFADE is a sample application available in the Microsoft Software
Library. It demonstrates:

<UL><LI>How to use the AnimatePalette function to fade a bitmap to black.

<LI>How to use the DIBAPI32.DLL library that can be built by the WINCAP32
   sample that ships with the Microsoft Win32 SDK.
<P>
</UL>To perform palette animation, the sample creates a logical palette for a
device-independent bitmap (DIB) with the PC_RESERVED flag set for each
palette entry. PALFADE loads, displays, and animates both Windows-style and
OS/2-style DIB files.
<P>
Download PALFADE.EXE, a self-extracting file, from the Microsoft Software
Library (MSL) on the following services:

<UL><LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A HREF="http://support.microsoft.com/download/support/mslfiles/PALFADE.EXE">PALFADE.EXE</A> <I>(size: 70256 bytes)</I> 
</PRE>
<LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the SOFTLIB\MSLFILES directory
      Get <A HREF="http://support.microsoft.com/download/support/mslfiles/PALFADE.EXE">PALFADE.EXE</A> <I>(size: 70256 bytes)</I> 
</PRE><P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
Before performing palette animation on a logical palette entry, ensure that
the palette entry has the PC_RESERVED flag set. To fade a bitmap drawn on a
device context with a PC_RESERVED palette selected, you can lower the RGB
values for each color in the palette in a loop until all colors are black.
<P>
The default system palette contains 20 static colors. These static colors
take up the first ten and last ten colors of the system palette; these
palette entries are not available for animation. If you try to fade a
bitmap that has 256 unique colors by creating a 256-color palette with each
palette entry set to PC_RESERVED, you are not guaranteed that every logical
palette entry will map to an entry in the system palette that is available
for palette animation.
<P>
One solution to this is to create a logical palette that contains only 236
colors. The PALFADE sample demonstrates one way to create an optimal
palette of 236 colors given a device-independent bitmap with 256 colors in
its color table.
<P>
Given a 256-color DIB, PALFADE traverses through every bit in the bitmap to
find the least-used 20 colors in the color table. Then it creates a logical
palette out of the 236 most-used colors. This ensures that all entries in
the logical palette will animate.
<P>
This sample uses many of the DIB support functions included with the
DIBAPI32.DLL library. It does not use the LoadDIB() function, because it
was not written to handle OS/2-style DIB files. Instead, PALFADE implements
the DIB-loading routines found in the Win32 SDK SHOWDIB sample.
<P>
NOTE: DIBAPI32.DLL is included with this sample.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10 3.50 4.00 95<BR>
KBCategory: kbgraphic kbfile kbgraphic<BR>
KBSubcategory: GdiPal<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 15, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
