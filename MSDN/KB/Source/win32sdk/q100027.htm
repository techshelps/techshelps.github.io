

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INFO: Direct Drive Access Under Win32 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q100027">
<META NAME="KBModify" CONTENT="1997/11/26">
<META NAME="KBCreate" CONTENT="1993/06/14">
<META NAME="Keywords" CONTENT="BseFileio">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  To open a physical hard drive for direct disk access (raw I/O) in a Win32-based application, use a device name of the form     \\.\PhysicalDriveN  where N is 0, 1, 2, and so forth, representing each of the physical drives in the system.  To open a ...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAB5,QAUJ,QAC9,QAM5,QBW7,QAI5,QBWS,QA1S,QDIT,QBWG,QAJH,QAMV,QAHN,QAGI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INFO: Direct Drive Access Under Win32</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 26, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q100027</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
   - Microsoft Windows NT versions 3.1, 3.5, 3.51, 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
To open a physical hard drive for direct disk access (raw I/O) in a
Win32-based application, use a device name of the form
<P>
<PRE>   \\.\PhysicalDriveN

</PRE>where N is 0, 1, 2, and so forth, representing each of the physical drives
in the system.
<P>
To open a logical drive, direct access is of the form
<P>
<PRE>   \\.\X:

</PRE>where X: is a hard-drive partition letter, floppy disk drive, or CD-ROM
drive.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
You can open a physical or logical drive using the CreateFile() application
programming interface (API) with these device names provided that you have
the appropriate access rights to the drive (that is, you must be an
administrator). You must use both the CreateFile() FILE_SHARE_READ and
FILE_SHARE_WRITE flags to gain access to the drive.
<P>
Once the logical or physical drive has been opened, you can then perform
direct I/O to the data on the entire drive. When performing direct disk
I/O, you must seek, read, and write in multiples of sector sizes of the
device and on sector boundaries. Call DeviceIoControl() using
IOCTL_DISK_GET_DRIVE_GEOMETRY to get the bytes per sector, number of
sectors, sectors per track, and so forth, so that you can compute the size
of the buffer that you will need.
<P>
Note that a Win32-based application cannot open a file by using internal
Windows NT object names; for example, attempting to open a CD-ROM drive by
opening
<P>
<PRE>   \Device\CdRom0

</PRE>does not work because this is not a valid Win32 device name. An application
can use the QueryDosDevice() API to get a list of all valid Win32 device
names and see the mapping between a particular Win32 device name and an
internal Windows NT object name. An application running at a sufficient
privilege level can define, redefine, or delete Win32 device mappings by
calling the DefineDosDevice() API.
 
<PRE>Keywords          : BseFileio
Version           : WINNT:3.1,3.5,3.51,4.0;
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 26, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
