

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HOWTO: Enumerate the MMX Driver </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q175334">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1997/10/17">
<META NAME="Keywords" CONTENT="GdiDirect3D">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  DirectX version 5.0 and later includes support for processors that support MMX technology. MMX devices are enumerated only by IDirect3D2::EnumDevices(). The MMX device will not be enumerated by IDirect3D::EnumDevices(). You must use the IDirect3D2 ...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPN,QBBS,QAU9,QAG8,QAW6,QAUD,QAB5,QAB6,QDL8,QAH4,QAA1,QAGI,QDI2,QDMW,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>HOWTO: Enumerate the MMX Driver</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q175334</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft DirectX 5 Software Development Kit, version 5.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
DirectX version 5.0 and later includes support for processors that support
MMX technology. MMX devices are enumerated only by
IDirect3D2::EnumDevices(). The MMX device will not be enumerated by
IDirect3D::EnumDevices(). You must use the IDirect3D2 interface to
enumerate the Direct3D MMX emulation driver.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
DirectX version 5.0 includes both the IDirect3D and the IDirect3D2
interfaces. Applications use the methods of the IDirect3D and IDirect3D2
interfaces to create Direct3D objects and set up the environment. The
IDirect3D2 interface is obtained by calling the QueryInterface() method
from a DirectDraw object. You must enumerate all DirectDraw objects on the
system and enumerate all Direct3D objects off of every DirectDraw object in
order to obtain all possible Direct3D objects.
<P>
DirectX 5.0 applications can enumerate the MMX driver on MMX systems with
IDirect3D2::EnumDevices() as follows:
<P>
<PRE>   LPDIRECT3D2 lpD3D2;

   // Query the IDirect3D2 interface off of the desired DirectDraw object
   rval = lpDD-&gt;QueryInterface(IID_IDirect3D2, (void**) &amp;lpD3D2);
   if (rval != DD_OK) {
       // Creation of the IDirect3D2 interface failed.
       lpDD-&gt;Release();
       return FALSE;
   }
   /*
    * Enumerate the drivers.
    */
   rval = lpD3D2-&gt;EnumDevices(enumDeviceFunc, &amp;NumDriver);
   if (rval != DD_OK) {
       // Enumeration of drivers failed.
       return FALSE;
   }


</PRE>Now, in the "enumDeviceFunc" callback function, you can check for the MMX
Emulation driver with the following code:
<P>
<PRE>   static HRESULT
   WINAPI enumDeviceFunc(LPGUID lpGuid, LPSTR lpDeviceDescription,
                      LPSTR lpDeviceName, LPD3DDEVICEDESC lpHWDesc,
                      LPD3DDEVICEDESC lpHELDesc, LPVOID lpContext)
   {
      if (!memcmp(lpGuid, &amp;IID_IDirect3DMMXDevice, sizeof(GUID))) {
           // The MMX driver is being enumerated.  Record "lpGuid" for
           // later use if desired.
           return D3DENUMRET_OK;
           }
      .  .  .
      .  .  .
      .  .  .

</PRE>The major difference between the IDirect3D2 and the IDirect3D interface is
the addition of the CreateDevice method. This method creates a Direct3D
device to be used with the DrawPrimitive methods. To use execute buffers
with an MMX device, you can call the IDirect3D2::CreateDevice method to
create an MMX IDirect3DDevice2 interface and then use the QueryInterface()
method to create an IDirect3DDevice interface from IDirect3DDevice2.
<P>
For more information and source code on properly enumerating Direct3D
devices, please see the following article and sample:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WIN32SDK/Q172947.htm">Q172947</A></B>
   TITLE     : SAMPLE: Rendering a Triangle with the Direct3D Immediate
               Mode
</PRE> 
<PRE>Keywords          : GdiDirect3D
Version           : WINDOWS:5.0
Platform          : WINDOWS
Issue type        : kbhowto</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
