

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INFO: Long Filenames on Windows NT FAT Partitions </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q115236">
<META NAME="KBModify" CONTENT="1997/11/26">
<META NAME="KBCreate" CONTENT="1994/05/22">
<META NAME="Keywords" CONTENT="BseFileio">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  Windows NT, versions 3.5, 3.51, and 4.0 have the ability to create or open files with long filenames (LFN) on Windows NT file allocation table (FAT) partitions.  UNICODE is stored on disk, so that the original name is always preserved for extended ...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAFI,QDJB,QA01,QAWP,QAUJ,QA2S,QABX,QDL9,QBWQ,QBWO,QBWN,QAVW,QAFV,QAY2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INFO: Long Filenames on Windows NT FAT Partitions</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 26, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q115236</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
   - Microsoft Windows NT versions 3.5, 3.51, 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT, versions 3.5, 3.51, and 4.0 have the ability to create or open
files with long filenames (LFN) on Windows NT file allocation table (FAT)
partitions.
<P>
UNICODE is stored on disk, so that the original name is always preserved
for extended characters regardless of which code page happens to be active
when reading from or writing to the disk.
<P>
The legal character set is that of the Windows NT file system (NTFS)
(except for the ":" for opening NTFS alternative file streams), so you can
copy arbitrary files between NTFS and FAT without losing any of the
filename information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The LFNs are not available from the MS-DOS DIR command, but they are
available from the Windows NT DIR command. When you create an LFN on a
Windows NT FAT partition, an accompanying short name is created just as
on an NTFS partition. You can access the file or directory with either
the long names or the short names under Windows NT.
<P>
For example, use the Microsoft Editor (MEP) to create a file named as
follows on a FAT partition under Windows NT:
<P>
<PRE>   longfilename.fat

</PRE>This is exactly how the filename appears when you run the DIR command from
the Windows NT command prompt. However, when you boot the machine into MS-
DOS and run the DIR command, the filename appears as follows:
<P>
<PRE>   longfi~1.fat

</PRE>NOTE: NTFS partitions are not available under MS-DOS, so you cannot
perform this experiment using an NTFS partition.
<P>
The same result can also be achieved programmatically. Build and run the
following sample code on Windows NT:
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>   #include &lt;windows.h&gt;

   void main( )
   {
      WIN32_FIND_DATA fd;
      char buf[80];

      FindFirstFile( "long*", &amp;fd );
      wsprintf( buf, "File name is %s", fd.cFileName );
      MessageBox( NULL, buf, "Test", MB_OK );
      wsprintf( buf, "Alternate file name is %s", fd.cAlternateFileName );
      MessageBox( NULL, buf, "Test", MB_OK );
   }

</PRE>The first message box will read:
<P>
<PRE>   File name is longfilename.fat

</PRE>The second message box will read:
<P>
<PRE>   Alternate file name is longfi~1.fat
</PRE> 
<PRE>Keywords          : BseFileio
Version           : WINNT:3.5,3.51,4.0;
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 26, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
