

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HOWTO: Opening Volumes Under Windows 95 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q125712">
<META NAME="KBModify" CONTENT="1997/02/20">
<META NAME="KBCreate" CONTENT="1995/02/02">
<META NAME="Keywords" CONTENT="kbprg kbhowto">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  Windows 95 does not support opening disk drives or disk partitions with CreateFile(), as Windows NT does. Windows 95 also does not support the DeviceIoControl() IOCTL APIs, as Windows NT does. Instead, low-level disk access in Windows 95 can be ach...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBWQ,QAC9,QBWP,QAGI,QA7T,QDNF,QAY5,QAFV,QBVV,QA4Q,QAGQ,QBV8 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>HOWTO: Opening Volumes Under Windows 95</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q125712</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
   - Microsoft Windows 95 version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows 95 does not support opening disk drives or disk partitions with
CreateFile(), as Windows NT does. Windows 95 also does not support the
DeviceIoControl() IOCTL APIs, as Windows NT does. Instead, low-level disk
access in Windows 95 can be achieved through DeviceIoControl() calls to the
VWIN32 VxD.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Windows NT supports obtaining a handle to a disk drive or disk partition
by using CreateFile() and specifying the name of the drive or partition
as the filename (e.g. "\\.\PHYSICALDRIVE0" or "\\.\C:"). This handle can
then be used in the DeviceIoControl() Win32 API.
<P>
Windows 95 differs in the following ways:

<OL><P><LI>Obtaining a disk drive or disk partition handle is not supported.
   The call to CreateFile() will fail, and GetLastError() will return
   error code 2, ERROR_FILE_NOT_FOUND.

<P><LI>The DeviceIoControl IOCTL functions (such as IOCTL_DISK_FORMAT_TRACKS)
   are not supported. These IOCTLs require the handle to a disk drive or
   disk partition and thus can't be used.

<P><LI>DeviceIoControl() is called using a handle to a VxD rather than a
   handle to a disk drive or disk partition. Obtain a handle to
   VWIN32.VXD by using CreateFile( "\\\\.\\VWIN32", ... ). Use this
   handle in calls to DeviceIoControl() to perform volume locking
   (Int 21h Function 440Dh, Subfunctions 4Ah and 4Bh), and then to
   perform BIOS calls (Int 13h), Absolute Disk Reads/Writes (Int 25h
   and 26h), or MS-DOS IOCTL functions (Int 21h Function 440Dh).
<P>
</OL><h2>REFERENCES</h2>
 
<P>
For information on using DeviceIoControl() in Windows 95 and the IOCTL
functions supported by the VWIN32 VxD, please see the help file "Windows 95
Guide to Programming". Go to "Using Windows 95 features" and select "Using
Device I/O Control."
<P>
For information on using CreateFile() to obtain disk drive or disk
partition handles under Windows NT, see the description for CreateFile()
in the Microsoft Windows Programmer's Reference, Volume 3.
<P>
For information on Windows 95 extensions to the MS-DOS interrupts, please
see the help file "Windows 95 Guide to Programming." Go to "Using Microsoft
MS-DOS Extensions" and select "Exclusive Volume Locking", then "About
Exclusive Volume Locking", then "Exclusive Use Lock".
<P>
For a complete list of IOCTLs, see the description of the DeviceIoControl()
function in the Microsoft Windows Programmer's Reference, Volume 3.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbprg kbhowto<BR>
KBSubcategory: BseFileio<BR>
Additional reference words: 4.00
<P>


</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
