

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: Win 95 Copies Fewer Files in Root Directories than Win NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161982">
<META NAME="KBModify" CONTENT="1997/01/11">
<META NAME="KBCreate" CONTENT="1997/01/09">
<META NAME="Keywords" CONTENT="kbprg kbprb">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  Applications on Windows NT successfully copy up to 224 files to the root directory of a 1.44MB floppy disk. However, on Windows 95, they can only copy up to 112 files. In each case, the file names are mixed-case but use the standard 8.3 format (sho...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAFI,QBXB,QATJ,QBWP,QA2S,QDL9,QBWQ,QBWO,QBWN,QAVV,QA6E,QAC9,QDNF,QA9N,QA4F V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Win 95 Copies Fewer Files in Root Directories than Win NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161982</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API),
   for Windows 95, version 4.00
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Applications on Windows NT successfully copy up to 224 files to the root
directory of a 1.44MB floppy disk. However, on Windows 95, they can only
copy up to 112 files. In each case, the file names are mixed-case but use
the standard 8.3 format (short filenames).
<P>
Because of this behavior, Windows 95 can save only half as many short mixed-
case filenames in the root directory of all sizes of floppy and hard disks
as Windows NT. This rarely becomes a problem because the maximum number of
entries in the root directories for all floppy disks and hard disks is much
larger than is actually needed to store files in a root directory.
<P>
<P><h2>CAUSE</h2>
 
<P>
Windows 95 and Windows NT behave differently because of the way the two
platforms store mixed-case short (8.3) filenames. Windows NT stores each
mixed-case short filename in a single directory entry with its case
preserved. Windows 95, however, creates two directory entries for mixed-
case short filenames: one entry is for the 8.3 name in all upper-case (as
MS-DOS stores filenames); the second is for a long filename entry that
stores the filename in mixed-case.
<P>
Although Windows 95 stores mixed-case short filenames with two directory
entries, it stores all upper-case short filenames in a single directory
entry just as MS-DOS does.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
There is no direct means for Win32 applications to determine the exact
number of unused root directory entries on a FAT volume, nor should
applications rely on there being a certain number free. In fact,
applications that are dependent on putting files into the root directory
should not be developed.
<P>
You can take two approaches to handle this difference in behavior between
platforms:

<UL><LI>You can force Windows 95 to create a single directory entry by using all
   uppercase and conforming to the 8.3 format. For example, specify your
   file as "TEST.TXT" instead of "test.txt." This will prevent Windows 95
   from creating the long filename directory entries.

<LI>You can copy mixed-case files into a sub-directory. The root directory
   is the only directory with a fixed number of entries; all other
   directories can contain as many files as will fit onto the floppy disk.
<P>
</UL><h2>STATUS</h2>
 
<P>
The behavior difference is by design due to implementation choices made in
the two platforms.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbprg kbprb<BR>
KBSubcategory: BseFileio<BR>
Additional reference words: 4.00 4.0 95 kbdss floppy LFN diskette SFN
<P>


</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
