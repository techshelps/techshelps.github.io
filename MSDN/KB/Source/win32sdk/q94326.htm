

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SAMPLE: 16 and 32 Bits-Per-Pel Bitmap Formats </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q94326 ">
<META NAME="KBModify" CONTENT="1996/09/06">
<META NAME="KBCreate" CONTENT="1993/01/04">
<META NAME="Keywords" CONTENT="kbgraphic kbfile">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  Windows NT supports the same bitmap formats as Microsoft Windows version 3.1, but includes two new formats: 16 and 32 bits-per-pel.  SEEDIB.EXE is a file in the Microsoft Software Library that contains the source code to an application that demonst...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAG9,QAPG,QDL9,QBWO,QBWN,QDNG,QBE7,QBE6,QBBI,QBJQ,QBWQ,QBWP,QAI4,QBXS,QBDM V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SAMPLE: 16 and 32 Bits-Per-Pel Bitmap Formats</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 6, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q94326 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Application Programming Interface (API) included with:
<P>
<P><PRE>    - Microsoft Windows NT versions 3.1, 3.5, and 3.51
    - Microsoft Windows 95 version 4.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT supports the same bitmap formats as Microsoft Windows version
3.1, but includes two new formats: 16 and 32 bits-per-pel.
<P>
SEEDIB.EXE is a file in the Microsoft Software Library that contains the
source code to an application that demonstrates how to load, display, and
save 1, 4, 8, 16, 24, and 32-bits-per-pixel DIB formats. In addition, it
demonstrates a simple method of creating an optimized palette for
displaying DIBSs with more than 8-bits-per-pixel on 8-bits-per-pixel
devices.
<P>
NOTE: In order to minimize color loss, SeeDIB uses CreateDIBSection() to
do conversions between uncompressed DIBs which have more than 8-bits-per-
pixel. This function is not available on Windows NT 3.1.
<P>
You can download SEEDIB.EXE from the Microsoft Software Library (MSL) on
the following services:

<UL><LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A HREF="http://support.microsoft.com/download/support/mslfiles/SEEDIB.EXE">SEEDIB.EXE</A> <I>(size: 58950 bytes)</I> 
</PRE>
<LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the \SOFTLIB\MSLFILES directory
      Get <A HREF="http://support.microsoft.com/download/support/mslfiles/SEEDIB.EXE">SEEDIB.EXE</A> <I>(size: 58950 bytes)</I> 
</PRE><P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
For DIBs (device independent bitmaps), the 16 and 32-bit formats contain
three DWORD masks in the bmiColors member of the BITMAPINFO structure.
These masks specify which bits in the pel correspond to which color.
<P>
The three masks must have contiguous bits, and their order is assumed to be
R, G, B (high bits to low bits). The order of the three masks in the color
table must also be first red, then green, then blue (RGB). In this manner,
the programmer can specify a mask indicating how many shades of each RGB
color will be available for bitmaps created with CreateDIBitmap(). For
16-bits-per-pixel DIBs, CreateDIBitmap() defaults to the RGB555 format. For
32-bits-per-pixel DIBs, CreateDIBitmap() defaults to an RGB888 format.
<P>
NOTE: The DIB engine in Windows 95 supports only RGB555 and RGB565 for
16-bit DIBs and only RGB888 for 32-bit DIBs.
<P>
<P><h3>Example</h3>
 
<P>
The RGB555 format masks would look like:
<P>
<PRE>   0x00007C00  red   (0000 0000 0000 0000 0111 1100 0000 0000)
   0x000003E0  green (0000 0000 0000 0000 0000 0011 1110 0000)
   0x0000001F  blue  (0000 0000 0000 0000 0000 0000 0001 1111)

</PRE>NOTE: For 16 bits-per-pel, the upper half of the DWORDs are always zeroed.
<P>
The RGB888 format masks would look like:
<P>
<PRE>   0x00FF0000  red   (0000 0000 1111 1111 0000 0000 0000 0000)
   0x0000FF00  green (0000 0000 0000 0000 1111 1111 0000 0000)
   0x000000FF  blue  (0000 0000 0000 0000 0000 0000 1111 1111)

</PRE><h3>Usage</h3>
 
<P>
When using 16 and 32-bit formats, there are also certain fields of the
BITMAPINFOHEADER structure that must be set to the correct values:

<OL><P><LI>The biCompression member must be set to either BI_RGB or BI_BITFIELDS.
   Using BI-RGB indicates that no bit masks are included in the color table
   and that the default (RGB555 for 16bpp and RGB888 for 32bpp) format is
   implied. Using BI_BITFIELDS indicates that there are masks (bit fields)
   specified in the color table.

<P><LI>As with 24-bits-per-pixel formats, the biClrUsed member specifies the
   size of the color table used to optimize performance of Windows color
   palettes. If the biCompression is set to BI_BITFIELDS, then the optimal
   color palette starts immediately following the three DWORD masks. Note
   that an optimal color palette is optional and many applications will
   ignore it.
<P>
</OL><h3>Windows 95</h3>
 
<P>
In Windows 95, if the BI_BITFIELDS flag is set, then a color mask must be
specified and it must be one of the following:
<P>
Resolution  Bits per color  Color Mask
<PRE>16bpp       5,5,5           0x00007c00 0x000003e0 0x0000001f
16bpp       5,6,5           0x0000f800 0x000007e0 0x0000001f
32bpp       8,8,8           0x00ff0000 0x0000ff00 0x000000ff

</PRE></OL>User-defined color masks are not available in Windows 95.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10 3.50 4.00 bpp bmp<BR>
KBCategory: kbgraphic kbfile<BR>
KBSubcategory: GdiBmp<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 6, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
