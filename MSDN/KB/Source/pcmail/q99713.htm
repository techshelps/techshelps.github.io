

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMTP: How Reply Chooses a From Address </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q99713 ">
<META NAME="KBModify" CONTENT="1998/03/09">
<META NAME="KBCreate" CONTENT="1993/06/06">
<META NAME="Keywords" CONTENT="MailGWSMTP kb3rdparty kbfile kbtlc">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  Microsoft Mail Gateway to SMTP saves the From field seen in the envelope part (RFC-821) of an incoming message to use in case the Microsoft Mail recipient wants to reply to the message.  MORE INFORMATION  The Microsoft Mail postoffice database has ...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAY2,QA7O,QA7N,QAYC,QAUR,QAAY,QBVW,QAJ4,QBWS,QAU7,QAKR,QAHE,QAAZ,QAO0,QAH6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: How Reply Chooses a From Address</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q99713 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
2.10 3.00
MS-DOS
kb3rdparty kbfile kbtlc
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, versions 2.1 and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft Mail Gateway to SMTP saves the From field seen in the envelope
part (RFC-821) of an incoming message to use in case the Microsoft Mail
recipient wants to reply to the message.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The Microsoft Mail postoffice database has one From field. This causes the
SMTP gateway to choose one of the four possible SMTP From fields to save in
the postoffice database. The four possible From fields are explained in the
Background section below.
<P>
By default, the gateway saves the RFC-821 Mail From information in order to
ensure that non-delivery replies will always work properly. In most cases,
this information is the same as the RFC-822 From field. All four From
fields can be viewed in the SMTP gateway log file, SMTPGATE.LOG. You can
see the RFC-821 From field in the beginning of a message transmission, on
the line that begins:
<P>
<PRE>   [rx] MAIL From:...

</PRE>The RFC-822 From field is recorded later in the Header lines, and looks
like this:
<P>
<PRE>   Header: From:...

</PRE><h3>Background</h3>
 
<P>
SMTP From information is covered by two RFCs: RFC-821 and RFC-822. RFC-821
keeps From information in the Mail From field. This "gives the reverse-path
which can be used to report errors." (RFC-821 Section 3.1). RFC-822 has
From information in three fields:

<UL><LI>Sender: for "notices of any problems in transport or delivery....NEVER
   in a reply." (This field is only present if its contents are different
   from the From field below.)
<LI>Reply-To: for replies.
<LI>From: for replies if no Reply-To field exists. (RFC-822 Section 4.4.4)
<P>
</UL>The four From fields can be organized into two categories: those for
replies, and those for non-delivery notices, arranged in the order they
should be used.
<P>
For Replies:

<UL><LI>Reply-To
<LI>From
<P>
</UL>For Non-Delivery Notices:

<UL><LI>Sender
<LI>From
<LI>Mail From
<P>
</UL><h2>RESOLUTION</h2>
 
<P>
Version 3.0.9 of SMTPGATE.EXE adds a switch to give an SMTP gateway
administrator the choice of which From field to use. If you use the -F
switch, the gateway will save the From field in the RFC-822 headers, rather
than in the Mail From field. This means replies will always work properly.
However, a non-delivery notice might not work if the RFC-821 From field is
different from the RFC-822 From field.
<P>
The RFC-822 From field was chosen because if the Reply-To field is saved in
the From field, the recipient will never know who actually sent the mail.
To prevent misleading the recipient, you can use the -F switch to save the
From information.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be problem in version 3.0 of Microsoft Mail
Gateway to SMTP. This problem was corrected in version 3.0.9 of
SMTPGATE.EXE. If you do not have version 3.0.9 (or later), you can obtain
the latest version from the Microsoft Software Library (MSL). Download
SMTPGW.EXE (S14223), a self-extracting file, from any of the following
services:

<UL><LI>Microsoft's World Wide Web Site on the Internet
<P><PRE>      On the www.microsoft.com home page, click the Support icon.
      Click Knowledge Base, and select the product.
<PRE></PRE>      Enter kbfile <A HREF="http://support.microsoft.com/download/support/mslfiles/SMTPGW.EXE">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
                             , and click GO!
      Open the article, and click the button to download the file.

</PRE><LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the Softlib/Mslfiles folder.
      Get <A HREF="http://support.microsoft.com/download/support/mslfiles/SMTPGW.EXE">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
</PRE>
<LI>The Microsoft Network
<P><PRE>      On the Edit menu, click Go To, and then click Other Location.
      Type "mssupport" (without the quotation marks).
      Double-click the MS Software Library icon.
      Find the appropriate product area.
      Locate and Download SMTPGW.EXE.
</PRE>
<LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A HREF="http://support.microsoft.com/download/support/mslfiles/SMTPGW.EXE">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
</PRE><P>
</UL>For additional information about downloading, please see the following
article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../zMiscellaneous/Q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online
               Services

</PRE><h2>REFERENCES</h2>
 
<P>
RFC 821, SIMPLE MAIL TRANSFER PROTOCOL
RFC 822, Standard for ARPA Internet Text Messages
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 2.10 3.00 SMTPGATE.EXE -f<BR>
KBCategory: kb3rdparty kbfile kbtlc<BR>
KBSubcategory: MailGWSMTP<BR>
Keywords          : MailGWSMTP kb3rdparty kbfile kbtlc<BR>
Version           : 2.10 3.00<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 9, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
