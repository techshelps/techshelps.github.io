

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMTP: Loss of Available Free Memory During Operation </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q134371">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1995/08/07">
<META NAME="Keywords" CONTENT="MailGWSMTP kbbug3.00.9 kbother">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  During operation of the SMTP gateway, the available memory can unexpectedly decrease, and eventually it will interfere with the ability of the gateway to process mail.  CAUSE =====  Memory loss can occur if an incoming message contains two subject ...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QA4R,QA4S,QBVW,QA6A,QA59,QAR4,QAY5,QAY0,QAYC,QANY,QBWG,QBVV,QAEV,QAHT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: Loss of Available Free Memory During Operation</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q134371</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00.9
MS-DOS
kbother kbbug3.00.9
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
During operation of the SMTP gateway, the available memory can unexpectedly
decrease, and eventually it will interfere with the ability of the gateway
to process mail.
<P>
<P><h2>CAUSE</h2>
 
<P>
Memory loss can occur if an incoming message contains two subject lines.
Memory allocated for the first subject is not released after processing the
message.
<P>
If you stop and restart the gateway, it will restore the free memory pool.
The -BR option can be used to stop the gateway after a designated period of
time.
<P>
For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../PCMAIL/Q96126.htm">Q96126</A></B>
   TITLE     : SMTP: Error in Documentation for -BR Parameter

</PRE>NOTE: You can restart the gateway through a batch file that calls itself.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in version 3.0.9 of the
Microsoft Mail Gateway to SMTP. A fix for this problem is in development,
but has not been regression-tested and may be destabilizing in
production environments. Contact Microsoft Product Support Services for
more information on the availability of this fix.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Ordinarily a message will have only one subject, and when the second
subject occurs, the memory allocated for the first subject is not released.
The memory allocated for the subject is generally less than 40 bytes, but
the position of the memory can fragment the free memory pool and result in
failures when it attempts to allocate additional memory.
<P>
For additional information on how to observe the free memory during the
gateway operation, please see the following article in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../PCMAIL/Q108374.htm">Q108374</A></B>
   TITLE     : SMTP: How to Find Available Memory
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00.9 QFE483 heap header<BR>
KBCategory: kbother kbbug3.00.9<BR>
KBSubcategory: MailGWSMTP<BR>
Keywords          : MailGWSMTP kbbug3.00.9 kbother<BR>
Version           : 3.00.9<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
