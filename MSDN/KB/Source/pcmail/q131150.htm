

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMTP: Causes of Hangs on Mail Gateway to SMTP </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q131150">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1995/07/31">
<META NAME="Keywords" CONTENT="MailGWSMTP kb3rdparty kbenv">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  Once the Microsoft Mail Gateway to SMTP is functional, several factors still need to be addressed before the gateway can be expected to perform reliably. If these factors are overlooked, the gateway may intermittently hang and refuse inbound connec...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBVW,QAYC,QAI5,QAJQ,QDN1,QBG2,QDIZ,QBVV,QAVZ,QBWD,QAM5,QBV0,QDJ3,QDJO,QBF0 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: Causes of Hangs on Mail Gateway to SMTP</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q131150</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty kbenv
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Once the Microsoft Mail Gateway to SMTP is functional, several factors
still need to be addressed before the gateway can be expected to perform
reliably. If these factors are overlooked, the gateway may intermittently
hang and refuse inbound connections.
<P>
The configuration issues listed below are usually involved if the gateway
stops working with no error messages recorded in the SMTPGATE.LOG file, and
the following message is repeatedly displayed in this file:
<P>
<PRE>   Spawning SMTPGET
   Spawn(SMTPGET)=0
   Idling: 48258 bytes, largest 47234

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The following five configuration issues are known for hindering the
reliability of the SMTP gateway.

<OL><P><LI>Postoffice (PO) and Gateway should be on the same physical network.
<P>
   Because the gateway's temporary files are written on the postoffice
   (M:\MAILDATA\SMTP\), and not its local hard disk, the performance of the
   gateway is dependent on file input/output. The most effective way to
   ensure fast file input/output is to have both the gateway and postoffice
   on the same physical network.

<P><LI>Use a Mail Relay Host for inbound SMTP mail.
<P>
   It is not mandatory to have Mail Relay Host configured for inbound mail,
   but it is highly recommended. Because the SMTP gateway is dependent on a
   DOS redirector, and the reliability of a UNIX to DOS connection is
   not as robust as the reliability of a UNIX to UNIX connection (UNIX is
   multithreaded; DOS is single threaded), it is recommended to control the
   required UNIX to DOS connection by storing all messages destine for MS
   Mail on a Host before they get forwarded to MS Mail.
<P>
   In other words, the Mail Administrators need to have as much control
   over the less reliable UNIX to DOS connection as possible. The optimum
   way to control this is by putting a Mail Relay Host on the same network
   segment as the gateway and PO server. Not only does this increase the
   reliability of the UNIX to DOS connection from a physical perspective,
   but it allows the Host to be configured to open/close the connections
   more effectively.

<P><LI>Have routers use static routing.
<P>
   If the Smart Host (Mail Relay Host) is not on the same network segment
   as the gateway and PO, then static routes should be configured on the
   router that separates the gateway and host. The IP addresses for the
   Gateway and the Smart Host should be added to the static table on the
   router.
<P>
   NOTE: Most routers use dynamic routing by default; a static table
   needs to be manually created and maintained.

<P><LI>Use a 16-bit Network Interface Card (NIC).
<P>
   You should use a 16-bit NIC to get fast file input/output. Additionally,
   it is recommended to use a 16-bit NIC with the RAM disabled.

<P><LI>Use one protocol per NIC (IPX/SPX).
<P>
   When the postoffice is on a Novell NetWare server and IPX/SPX is used
   to access the postoffice when TCP/IP is used to access the Host, it
   might be necessary to isolate each protocol on a separate NIC.
<P>
</OL>For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../PCMAIL/Q101461.htm">Q101461</A></B>
   TITLE     : Microsoft Mail SMTPGATE.EXE Version 3.0.9 Update
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00<BR>
KBCategory: kb3rdparty kbenv<BR>
KBSubcategory: MailGWSMTP<BR>
Keywords          : MailGWSMTP kb3rdparty kbenv<BR>
Version           : 3.00<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
