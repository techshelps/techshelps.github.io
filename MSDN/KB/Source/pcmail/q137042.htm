

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMTP: How the Gateway Uses Memory </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q137042">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1995/09/19">
<META NAME="Keywords" CONTENT="MailGWSMTP kb3rdparty">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  The SMTP gateway only uses conventional memory. To run the gateway, make sure that you have at least 375 kilobytes available.  For additional information, please see the following article in the Microsoft Knowledge Base:     ARTICLE-ID: Q105290    ...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QAYC,QBVW,QAGI,QAVZ,QABI,QBG2,QA5V,QAI5,QAEV,QAWH,QDMW,QA4F,QAYL,QAX1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: How the Gateway Uses Memory</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q137042</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The SMTP gateway only uses conventional memory. To run the gateway, make
sure that you have at least 375 kilobytes available.
<P>
For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../PCMAIL/Q105290.htm">Q105290</A></B>
   TITLE     : SMTP: Err Msg: Insufficient Memory

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The gateway, SMTPGATE, uses two executables: SMTPGET and SMTPPUT. SMTPGET
is spawned by SMTPGATE every two minutes (by default). SMTPGET is
responsible for checking for mail destine for your SMTP environment:
Outbound mail. SMTPPUT is only spawned by SMTPGATE when a request for
connection to Port 25 is made to the gateway machine. SMTPPUT is
responsible for mail destine to your Microsoft Mail environment: Inbound
mail.
<P>
Both SMTPGET and SMTPPUT are spawned into memory: the actual C call is
"Spawnlp." They do not overlay the memory addresses of SMTPGATE; they use
their share of the largest executable conventional memory space. When each
executable is finished sending mail, it is unloaded from memory. If you
look in the log file, you can see the lines:
<P>
<PRE>   spawning SMTPGET    This is where "spawnlp" is called.
   spawn(SMTPGET)=0    This is the return code to indicate that SMTPGET was
                       successful.

</PRE>The following is an example of a memory layout for the SMTP Gateway:
<P>
<PRE>                  Bytes Per
Dependency      Record Multiple   Variable   Memory Req.   Files
</PRE> 
<P>
<PRE>Local users            37            50         1,850       ACCESS2.GLB

Dispatch networks      38             1            38       One Network
                                                            Connection

Dispatch postoffice    90             1            90       One Network
                                                            Connection

External networks      45             1            45       NETWORK.GLB

External postoffices  115             1           115       *.XTN

Gateways               83             1            83       MASTER.GLB

Gateway Maps           83             1            83       ADDR_MAP.CFG
                                                            or *.NME
                                                2,304

         Size of SMTPGATE         74,655 (for Novell's TCP/IP)
         Size of SMTPPUT          66,751
         Size of SMTPGET         107,251

         Total                   250,961

         Message Body space      Dependent on Header and Message size.
                                 250,961 plus message body space
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00<BR>
KBCategory: kb3rdparty<BR>
KBSubcategory: MailGWSMTP<BR>
Keywords          : MailGWSMTP kb3rdparty<BR>
Version           : 3.00<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
