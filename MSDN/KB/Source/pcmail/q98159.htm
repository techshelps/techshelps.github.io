

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMTP: Err Msg: ERROR Translating Message to SMTP... </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q98159 ">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1993/04/28">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  After the Microsoft Mail Gateway to SMTP starts and initializes, it checks for outgoing mail from the SMTP outgoing queue. If it detects outgoing mail, it opens a session with the smarthost and begins to process the outgoing messages.  If the gatew...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAEV,QAYC,QAUD,QAB4,QAY2,QBVW,QAEF,QAAP,QAKP,QAGB,QBXB,QBDM,QBCT,QA2T,QAUJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: Err Msg: ERROR Translating Message to SMTP...</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q98159 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty kbtlc
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After the Microsoft Mail Gateway to SMTP starts and initializes, it checks
for outgoing mail from the SMTP outgoing queue. If it detects outgoing
mail, it opens a session with the smarthost and begins to process the
outgoing messages.
<P>
If the gateway comes to a message in the queue that it cannot process,
this error message may occur:
<P>
<PRE>   ERROR translating message to SMTP: protocol error

</PRE><h2>CAUSE</h2>
 
<P>
This error can result from a damaged message in the SMTP gateway queue.
When there is a damaged message in the queue, the gateway stops processing
the outgoing messages and switches to the idle state waiting for TCP/IP
connections. It then repeats the same process during its next scheduled
connection attempt time.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The problem message in the SMTP queue should either be deleted or returned
to the sender. You may want to first rename the temporary files used by the
SMTP gateway that are found in the MAILDATA\SMTP directory. Any file with
extension .API in the SMTP directory should be changed to an extension of
.OLD with the following command:
<P>
<PRE>   ren *.api *.old

</PRE>Deleting or returning of messages is done from within the ADMIN.EXE
program:

<OL><P><LI>Start ADMIN.EXE with an account that has Admin privileges.

<P><LI>From the Admin menu, choose Queue.

<P><LI>In the dialog box, type SMTP and press the ENTER key.

<P><LI>Return the problem message (probably the first or last message in the
   SMTP queue).

<P><LI>The user who sent the message needs to resend the returned message or be
   notified that it was deleted.
<P>
</OL>NOTE: If there is a file called FROM_NC.API or OUTBAD.API in the SMTP
directory of the Mail Postoffice, you can view this file and decipher who
the sender of the problem message is. The sender's name is preceded with
a FROM: and contains the full 10/10/10 Microsoft Mail address. Once you
have this information, you follow the steps above to remove the message
from the SMTP outgoing queue. It is suggested to use Debug since many
MS-DOS editors show the file as one big line of text.
<P>
<P><h3>Example</h3>
 
<P>
Assume there is a file stranded in the M:\MAILDATA\SMTP directory called
OUTBAD.API. Use the following steps to find the sender of the problem
message:

<OL><P><LI>Type the following:
<P>
<P><PRE>      DEBUG M:\MAILDATA\SMTP\OUTBAD.API
</PRE>
<P><LI>At the hyphen (-) prompt, type the letter "D" (without the quotation
   marks) and press the ENTER key.

<P><LI>A mix of HEX values and ASCII text is displayed on the screen,
   repeatedly press D, ENTER until the word FROM: shows up in the ASCII
   column.

<P><LI>Note the information following the FROM: because this is the sender of
   the problem message.
<P>
   NOTE: There may be multiple messages in the .API file, where each one
   has its own FROM: information. If the old .API files are renamed
   prior to the startup of the gateway as mentioned above, a new file
   containing only the problem message should be created.

<P><LI>Use this name when following the steps above to return or delete the
   message out of the SMTP queue.
<P>
</OL>NOTE: The "protocol error" message can be a vague error message and may
refer to a number of other issues. The resolution in this article has
been proven to work in many situations where this error occurred.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00<BR>
KBCategory: kb3rdparty kbtlc<BR>
KBSubcategory: MailGWSMTP<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
