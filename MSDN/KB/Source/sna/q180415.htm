

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Sense Code in FMH-7 Message Is Not Returned to APPC Application </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q180415">
<META NAME="KBModify" CONTENT="1998/02/04">
<META NAME="KBCreate" CONTENT="1998/02/03">
<META NAME="Keywords" CONTENT="kbbug2.11 kbbug2.11.sp1 kbbug2.11.sp2 kbbug3.00 kbbug3.00.sp1 snaappc snacpic snaprog k">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  There may be certain cases where an APPC or CPI-C application does not receive an error message sent to it by a remote application or host. LU 6.2 errors are generally reported across an LU 6.2 session or conversation by FMH-7 messages. If the erro...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QDO3,QAB4,QAEV,QBVV,QAJH,QAR4,QAYC,QAAP,QAKP,QABG,QBHQ,QAGI,QAX6,QAM1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Sense Code in FMH-7 Message Is Not Returned to APPC Application</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 4, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q180415</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 2.11, 2.11SP1, 2.11SP2, 3.0, 3.0SP1,
   3.0SP2, 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
There may be certain cases where an APPC or CPI-C application does not
receive an error message sent to it by a remote application or host. LU 6.2
errors are generally reported across an LU 6.2 session or conversation by
FMH-7 messages. If the error being reported is an IBM Sense Code not
defined in the FMH-7 handling code that is part of the SNA Server APPC
library, the error message will not be sent up to the application.
<P>
In the reported instance of this problem, the host had sent an FMH-7
message to an application containing a sense code of X'0809'. SNA Server
sent this FMH-7 message to the client as shown here:
<P>
<PRE>  PVI   --------------------------------------------------------------
   PVI   030242B2-&gt;181F0001 LU 6.2
   PVI                      MSGID:RDAT   MSGTYP:FMH7
   PVI
   PVI   ---- Header  at address 01EF40A4, 1 elements ----
   PVI   01070000 00000078 01020000 0100DC00     &lt;.......x........&gt;
   PVI
   PVI   ---- Element at address 01F73EDC, start 13, end 19 ----
   PVI   07070809 097A80                         &lt;.....z.         &gt;

</PRE>Bytes 2 and 3 of the Element data are the bytes that contain the IBM sense
code of X'0809'.
<P>
NOTE: This message was captured in a SNA Server LU 6.2 message trace using
the SNA Server Trace Program.
<P>
The application had a RECEIVE_AND_WAIT call posted at this point. Normally,
an error will be reported in the RECEIVE_AND_WAIT call. In this case, the
RECEIVE_AND_WAIT never completed because the X'0809' sense code was never
passed to the application by the APPC library.
<P>
The visible symptoms of this problem may vary. If the application has a
timeout, the application will eventually time out. If the application does
not have a timeout, it may stop responding until it is stopped and
restarted.
<P>
<P><h2>CAUSE</h2>
 
<P>
The FMH-7 handling code that is part of the SNA Server APPC library does
not contain some of the more obscure IBM sense codes. If the APPC library
receives an FMH-7 message containing one of these unrecognized sense codes,
it never passes the error information to the application.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version 2.11,
2.11 SP1, 2.11 SP2, 3.0, 3.0 SP1, 3.0 SP2, and 4.0.
A supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Product Support Services for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The fix updates the FMH-7 handling code of the APPC library to handle
obscure sense codes by generating a protocol error that contains the sense
code received in the FMH-7 message.
 
<PRE>Keywords          : kbbug2.11 kbbug2.11.sp1 kbbug2.11.sp2 kbbug3.00 kbbug3.00.sp1 snaappc snacpic snaprog kbbug3.00.sp2 kbbug4.00 kbnetwork
Version           : WINDOWS:2.11,2.11SP1,2.11SP2,3.0,3.0SP1,3.0SP2,4.0
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 4, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
