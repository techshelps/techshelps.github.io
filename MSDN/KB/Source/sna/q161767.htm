

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Wnap.exe GP Faults During a Windows NT Password Change </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161767">
<META NAME="KBModify" CONTENT="1997/03/13">
<META NAME="KBCreate" CONTENT="1997/01/03">
<META NAME="Keywords" CONTENT="snasecurity snawin3x kbbug2.11.SP1 kbbug3.00 kbfix2.11.sp2 kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  During a Windows NT password change, the SNA Server Windows 3.x client software may encounter a general protection fault (GPF) and display the following error:     WNAP caused a General Protection Fault in module WDMOD.DLL at 0015:038E  This proble...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDO3,QAAP,QAWK,QAR4,QAKP,QAJ6,QA4H,QARL,QAB4,QDL9,QBWQ,QBWO,QBWN,QAO4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Wnap.exe GP Faults During a Windows NT Password Change</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 13, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161767</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 2.11 Service Pack 1 and 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
During a Windows NT password change, the SNA Server Windows 3.x client
software may encounter a general protection fault (GPF) and display the
following error:
<P>
<PRE>   WNAP caused a General Protection Fault in module WDMOD.DLL at 0015:038E

</PRE>This problem occurs if the combined user ID and domain name field length
is
seven or eight characters. This problem may also lead to a buffer pool
corruption error on the server, causing SnaBase to fail abnormally with
the
following Windows NT application event log errors:
<P>
<PRE>   Event: 624
   Source: SNA Server
   Creating dump file C:\SNA\traces\snadump.log for SNABASE.EXE

   Event: 686
   Source: SNA Base Service
   SNA Server Internal buffer pool error.
    Reason  = Invalid Owner Id
    Module  = C:\SNA\system\SNABASE.EXE
    Process = 143
    Pool    = TRUSTED ELTS
    Details = Current Owner Id &lt;value&gt;, Correct ID &lt;value&gt;

</PRE>NOTE: The SNA Server 2.0, 2.1 and 2.11 Windows 3.x clients do not support
the Windows NT password change feature if the user's password has expired
or if the user is required to change his or her password on the next
logon.
Password change support was added to the SNA Server Windows 3.x client
software in 2.11 Service Pack 1.
<P>
<P><h2>CAUSE</h2>
 
<P>
The SNA Server client improperly generates the client logon response to
send to the server when the combined user ID and domain are seven or eight
characters long. In some cases, this causes an invalid message to be sent
to the server, leading to an SnaBase buffer pool error.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve this problem, obtain the hotfix mentioned below.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version 2.11
Service Pack 1 and 3.0.
<PRE> A supported fix is now available, and should be
</PRE>applied only to systems experiencing this specific problem. Unless you are
severely impacted by this specific problem, Microsoft recommends that you
wait for the next Service Pack that contains this fix. Contact Microsoft
Technical Support for more information.
receive
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug2.11.SP1 kbbug3.00 kbfix2.11.sp2<BR>
KBSubcategory: snawin3x snasecurity<BR>
Additional reference words: prodsna 2.11.SP1 3.00 SP1<BR>
Keywords            : snasecurity snawin3x kbbug2.11.SP1 kbbug3.00 kbfix2.11.sp2 kbnetwork<BR>
Version             : 2.11.SP1 3.00<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 13, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
