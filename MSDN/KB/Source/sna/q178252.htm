

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Control Unit Image Number Not Available to ESCON Link Service </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q178252">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/12/18">
<META NAME="Keywords" CONTENT="kbbug3.00 kbbug3.00.sp1 prodsna snaadmin snachannel snawinnt kbbug3.00.sp2">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When implementing an ESCON channel link service (such as the Polaris ESCON  channel link service), SNA Server was not providing the control unit (CU)  image number to the link service, which significantly complicates ESCON  channel link configurati...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QACK,QAB5,QDIZ,QA7O,QAE2,QAOE,QAMN,QAKC,QDO3,QBC6,QBXA,QAR4,QAC2,QAG8,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Control Unit Image Number Not Available to ESCON Link Service</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q178252</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0 SP1, 3.0 SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When implementing an ESCON channel link service (such as the Polaris ESCON 
channel link service), SNA Server was not providing the control unit (CU) 
image number to the link service, which significantly complicates ESCON 
channel link configuration.
<P>
<P><h2>CAUSE</h2>
 
<P>
SNA Server was not originally designed to return the control unit image 
number to the channel link service.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server 3.0 (including 
SP1 and SP2). This feature has been added to SNA Server 3.0 (post SP2) 
and allows the SNA Server to return the Control Unit image number in 
dataru[s+24] of the Open(Link) response.
<P>
Obtain the following fix or wait for the next SNA Server 3.0 service pack.
This fix should have the following timestamp:
<P>
<PRE>   10/27/97  7:29a        192,832 &lt;snaroot&gt;\system\SNACFG.DLL
   10/27/97  7:29a        222,064 &lt;ntroot&gt;\symbols\dll\SNACFG.DBG

</PRE>A supported fix is now available, but has not been fully regression-tested 
and should be applied only to systems experiencing this specific problem. 
Unless you are severely impacted by this specific problem, Microsoft 
recommends that you wait for the next Service Pack that contains this fix. 
Contact Microsoft Technical Support for more information. 
<P>
Note that the ESCON channel link service must be written to recognize 
the Control Unit image number. Contact your link service vendor to 
determine if this is the case. If so, to make use of this new feature, 
the updated SNACFG.DLL must be applied and the configuration file must 
be resaved using SNA Server Manager.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The Polaris ESCON link service version 2.14 (with the v1.12 version of 
the Polaris ESCON configuration DLL) supports the ability to use the 
Control Unit image number. Here is some additional background describing
what the control unit image number is used for:
<P>
The control unit image is an ESCON feature. It allows a physical control
unit to support up to 16 logical control units. The CU image corresponds
to the "CUADD" parameter in the CNTLUNIT IOCP macro or the Logical Address 
in HCD.
<P>
The Polaris ESCON link service supports a maximum of 250 devices over a 
maximum of 16 CU images. The change to SNA Server makes it easier for 
customers to configure SNA Server to use ESCON. Currently, in order to 
allow the customer to use multiple CU images, the customer must configure 
the link service with the devices they need on each CU image. Then they
use the number in the channel address box of the connection to specify 
an index into a table made from the link service configuration. Here's 
an example:
<P>
Actual configuration:
<P>
<PRE>   CU Image  Base Device Address  Num Devices
      0               20              4
      2               40              2
      3               20              4

</PRE>Channel addresses to input into SNA Server configuration:
<P>
<PRE>   Channel Address   CU Image - Device Address
        00                  0 - 20
        01                  0 - 21
        02                  0 - 22
        03                  0 - 23
        04                  2 - 41
        05                  2 - 42
        06                  3 - 20
        07                  3 - 21
        08                  3 - 22
        09                  3 - 23

</PRE>This makes configuration more difficult. With this new feature, customers 
still must configure the link service as before because the ESCON channel 
adapter needs to know at initialization (ie. when SNA Server is started)
which devices it will be using. But in the connection properties the user
can put in address 20 CU image 0 instead of just address 00 and so on.
<P>
The link service configuration has a check box which allows the user to
choose to use the new method. This is not done automatically. The link 
service has to be told which of the two methods is in use since the 
field that contains the CU image was 0 for old version of SNA Server, 
but 0 is a valid CU image.  
<P>
Regarding the use of the Polaris ESCON link service, this change will 
not affect users who don't want or need to change their link service 
configuration. They will still be able to update the link service and 
driver to newer version with having to redo any part of their 
configuration.
 
<PRE>Keywords          : kbbug3.00 kbbug3.00.sp1 prodsna snaadmin snachannel snawinnt kbbug3.00.sp2
Version           : WINDOWS:3.0,3.0SP1,3.0SP2
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix kbpatch</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
