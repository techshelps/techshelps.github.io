

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TN3270 Client Hangs with Keyboard Locked on Some Host Screens </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q175384">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/10/20">
<META NAME="Keywords" CONTENT="kbbug3.00 kbbug3.00.sp1 prodsna snatn3270 kbbug3.00.sp2">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  If a TN3270 client is connecting through the SNA Server TN3270 Service, on certain host screens, the TN3270 client keyboard remains locked in an XCLOCK state. A native 3270 client does not have this problem.  This problem occurs with the TN3270 Ser...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBDT,QDO3,QARL,QBVV,QABT,QDN1,QAKP,QAR4,QAJ6,QACK,QAP2,QBXS,QAXB,QAK7,QA7O V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TN3270 Client Hangs with Keyboard Locked on Some Host Screens</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q175384</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0 SP1, 3.0 SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If a TN3270 client is connecting through the SNA Server TN3270 Service,
on certain host screens, the TN3270 client keyboard remains locked in
an XCLOCK state. A native 3270 client does not have this problem.
<P>
This problem occurs with the TN3270 Service included with Microsoft SNA
Server version 3.0, 3.0 Service Pack 1 (SP1), and 3.0 Service Pack 2 (SP2).
<P>
<P><h2>CAUSE</h2>
 
<P>
The client keyboard lock occurs when the host application sends a 3270
message to the client and indicates an End Bracket (EB), but the WCC field
in the 3270 message does not unlock the keyboard. (That is, bit 6 in the
WCC field is set to "0" which means that the keyboard is locked.) Because a
TN3270 client never receives the SNA Request/Response Header (RH), it is
not aware of the EB indicator and does not determine that the keyboard
should be unlocked. Because the host application does not unlock the
keyboard properly in the WCC byte, the TN3270 emulator's keyboard remains
locked.
<P>
This problem does not occur with a native 3270 emulator because it receives
the SNA RH, and unlocks the keyboard when it receives an EB, even if the
3270 WCC field does not unlock the keyboard.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
The only workaround available for this problem is to modify the host
application so that it properly sets the WCC bit 6 to unlock the keyboard
on host screens which exhibit the problem.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
An update to the SNA Server TN3270 Service is available from Microsoft to
correct this problem. With the update TN3servr.exe file applied, the TN3270
server monitors for the EB indicator on host messages, and if it is set,
will automatically set the WCC Bit 6 (keyboard state) to 1 to notify the
TN3270 client that the keyboard should be unlocked.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server 3.0, 3.0
SP1, and 3.0 Service Pack 2.
A supported fix is now available, but has not been fully regression tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Technical Support for more information.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna snatn3270 xclock tn3270e<BR>
Keywords          : kbbug3.00 kbbug3.00.sp1 prodsna snatn3270 kbbug3.00.sp2<BR>
Version           : Windows:3.0,3.0sp1,3.0sp2<BR>
Platform          : WINDOWS<BR>
Hardware          : ALPHA x86<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
