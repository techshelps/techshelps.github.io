

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RUI_READ Stops When Processing Buffers Larger Than 3 KB </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162626">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1997/01/24">
<META NAME="Keywords" CONTENT="kbbug2.00 kbbug2.10 kbbug2.11.sp1 kbbug3.00 kbnetwork snalua kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  An RUI_READ (immediate) will stop when an RU size is greater than 3 KB. No errors are generated; however, the application does not respond.  CAUSE =====  When an application has issued an RUI_BID verb, the WINRUI32 library will post the verb as soo...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBHQ,QALZ,QAJH,QBXN,QBB0,QAUD,QADP,QDO3,QANY,QBWP,QAHC,QAGB,QDL9,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>RUI_READ Stops When Processing Buffers Larger Than 3 KB</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162626</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server versions 2.0, 2.1, 2.11, 2.11 Service Pack 1, and
   3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An RUI_READ (immediate) will stop when an RU size is greater than 3 KB. No
errors are generated; however, the application does not respond.
<P>
<P><h2>CAUSE</h2>
 
<P>
When an application has issued an RUI_BID verb, the WINRUI32 library will
post the verb as soon as 12 or more bytes of RU data are available to
return to the application. Normally, due to the nature of the message-
passing mechanism between SNA Server  and the RUI library, this means
that the complete RU has been received by the RUI library, and when the
application issues a subsequent RUI_READ(immediate), the RUI_READ will
complete successfully.
<P>
However, when the RU size on the session exceeds a certain size (just over
3 KB), SNA Server will split the messages it sends to the RUI library
into smaller blocks. The RUI library, however, continues to complete the
RUI_BID when it receives the first block of a new RU. If the application
issues an RUI_READ(immediate) before the remainder of the RU arrives, the
RUI_READ will complete with a return code of UNSUCCESSFUL. This will
confuse any application that (rightly) expects all the data to be available
when the RUI_BID is posted.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
A fix to the RUI library has been created  to prevent it from  posting an
RUI_BID until all the blocks of a large RU have been received.
<P>
Updated files:
<P>
<PRE>   Windows NT:  &lt;Snaroot&gt;\System\Winrui32.dll
   Windows 95:  &lt;Winroot&gt;\System\Winrui32.dll
   Windows 3.x: &lt;Winroot&gt;\System\Winrui.dll
   OS/2:        &lt;Snaroot&gt;\System\Rui.dll
   MS-DOS:      &lt;Snaroot&gt;\Dosacs.lib  (application must be relinked)

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 2.0,
2.1, 2.11, 2.11 Service Pack 1, and 3.0.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna<BR>
Keywords            : kbbug2.00 kbbug2.10 kbbug2.11.sp1 kbbug3.00 kbnetwork snalua kbbuglist<BR>
Version             : 2.0 2.1 2.11 3.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
