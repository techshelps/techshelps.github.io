

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Installing TN3270 breaks Performance Counters on Windows NT 4.0 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170840">
<META NAME="KBModify" CONTENT="1997/12/03">
<META NAME="KBCreate" CONTENT="1997/07/01">
<META NAME="Keywords" CONTENT="prodsna snasetup snatn3270 kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When installing SNA Server on a Windows NT Server version 4.0 other than  English or Japanese, the currently installed counters may be lost.  CAUSE =====  The problem only happens when installing a TN3270 Server. The TN3270 option is selected by de...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAA1,QAR4,QDI2,QAM1,QAM9,QALX,QAML,QAU3,QAMR,QDIX,QDIZ,QAAQ,QDO3,QBWI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Installing TN3270 breaks Performance Counters on Windows NT 4.0</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 3, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170840</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 3.0 and 3.0 SP1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When installing SNA Server on a Windows NT Server version 4.0 other than 
English or Japanese, the currently installed counters may be lost.
<P>
<P><h2>CAUSE</h2>
 
<P>
The problem only happens when installing a TN3270 Server. The TN3270
option is selected by default on the SNA Server 3.0 setup tool. The 
TN3PERF.INI file included in SNA 3.0 and SNA 3.0 SP1 has an entry for
all languages, but has only counters definitions for English and Japanese.
When an .INI file, which contains an extra language entry not associated
with any specific objects and counters, is passed as a parameter to
Windows NT LODCTR.EXE, the values of 'Last Counter' and 'Last Help' are
set to zero. This causes the Performance Monitoring tool to only display
the TN3270 counters.
<P>
This was an NT 3.50 bug in LODCTR.EXE fixed in 3.51, but back in Windows 
NT 4.0. For more information about this bug, see the following article in 
the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WIN32SDK/Q128404.htm">Q128404</A></B>
   TITLE: FIX: Corruption of the Perflib Registry Values

</PRE><h2>RESOLUTION</h2>
 
<P>
It is enough to uncheck the TN3270 option at setup time. In the case
where the TN3270 Server feature is needed, the TN3PERF.INI has been 
modified so it now includes full language support.
<P>
As this file is used by the setup program, the installation files must
be moved from the CD-ROM to a local drive. This will allow the user to
replace the current TN3PERF.INI file with the one provided as part of
this fix before running the setup program from that local drive.
<P>
In the case the user already installed the TN3270 Server feature and that
the Counters have been lost, refer to the following article in the 
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WIN32SDK/Q128404.htm">Q128404</A></B>
   TITLE: FIX: Corruption of the Perflib Registry Values

</PRE>for instructions on how to restore them.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version 3.0
Service Pack 1. A fix to this problem is in development, but has not been
regression-tested and may be destabilizing in production environments.
Microsoft does not recommend implementing this fix at this time. Contact
Microsoft Product Support Services for more information on the
availability of this fix.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords          : prodsna snasetup snatn3270 kbbuglist<BR>
Version           : 3.0 3.0sp1<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix kbpatch<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 3, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
