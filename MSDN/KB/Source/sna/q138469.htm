

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Server Support for ACTPU (ERP) and ACTLU (ERP) </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q138469">
<META NAME="KBModify" CONTENT="1997/10/29">
<META NAME="KBCreate" CONTENT="1995/10/22">
<META NAME="Keywords" CONTENT="sna3270 kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  If you have more than one mainframe attached to your Front End Processor (FEP) the IBM SNA  error recovery protocol  (ERP) is used. The Systems Services Control Point (SSCP) is located on one mainframe (that controls activation of the SNA network b...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAGI,QBXS,QBVV,QALK,QBV8,QAB9,QBVX,QAIJ,QAI5,QABA,QAXC,QAJH,QAP2,QBJZ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server Support for ACTPU (ERP) and ACTLU (ERP)</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 29, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q138469</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, 2.11, and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
If you have more than one mainframe attached to your Front End Processor
(FEP) the IBM SNA "error recovery protocol" (ERP) is used. The Systems
Services Control Point (SSCP) is located on one mainframe (that controls
activation of the SNA network by issuing ACTPU and ACTLUs) while the host
applications may reside on another mainframe. The ERP protocol makes it
possible to reboot the mainframe containing the SSCP without interrupting
the application. So, when the mainframe comes back up, it issues an ACTPU
(ERP) and ACTLU (ERP) command so that the user's application session (the
PLU-SLU session) is not reset.
<P>
SNA Server supports the recovery of PLU-SLU sessions after receiving an
ACTPU (ERP) and ACTLU (ERP) command. However, ACTPU (ERP) recovery requires
that the SNA Server connection is not dropped. SNA Server reports
connection failures by logging Event 23 in the Windows NT application event
log. If the SNA Server connection to the FEP is lost, PLU-SLU session
recovery is not possible.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
SNA Server handles session recovery as follows, when receiving ACTPU
and ACTLU commands:

<UL><LI>When receiving an ACTLU (cold) command, SNA Server resets the
   SSCP-LU session (which is used to carry the logon screen) and the
   PLU-SLU session (used for applications and data transfer after the
   user has logged on to an application) if the PLU-SLU session is
   active.

<LI>When receiving an ACTLU (ERP) command, SNA Server resets the SSCP-LU
   session. If there is an active PLU-SLU session, this session is left
   active.

<LI>The ACTLU (ERP) command is used in conjunction with the ACTPU (ERP)
   command. As for ACTLUs, if a cold ACTPU is issued by the host,
   SNA Server resets all the sessions using that PU, which is all the 3270
   sessions.

<LI>If an ACTPU (ERP) command is issued by the host, SNA Server only resets
   the PU-SSCP session.
<P>
</UL>The SNA Server will send back an ACTPU (ERP) +RSP if all of the following 
are true:

<UL><LI>An ACTPU (ERP) request was received.
<LI>The ACTPU (ERP) was received when the PU-SSCP session was already active.
<LI>The ACTPUERP Registry entry is defined.
<P>
</UL>NOTE: Starting with SNA Server 2.11 Service Pack 2, the default behavior 
for SNA Server was changed so that ACTPU (ERP) support is not enabled by 
default. For more information on why the default behavior was changed, see 
the following Microsoft Knowledge Base article:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SNA/Q153253.htm">Q153253</A></B>
   TITLE: SNA Server 3270 Sessions Not Recovered with Eicon WAN Server

</PRE>Add the following Registry Entry to enable ACTPU (ERP) support in SNA 
Server:

<OL><P><LI>Start Registry Editor (Regedt32.exe or Regedit.exe, as appropriate for
   your version of Windows NT).
</OL>2. Go to the following key in the registry:
<P>
<PRE>   HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\SnaServr\Parameters

</PRE><P><LI>On the Edit menu, click Add Value and use the following entry:
<P>
   Value Name: ACTPUERP
   Data Type: REG_SZ

<P><LI>Click OK.
</OL>5. In the String field, input the string TRUE and then click OK. (Actually, 
<PRE>   any value can be entered for the String to enable ACTPU (ERP) support.)
</PRE></OL>6. Exit the Registry Editor.
7. Stop and restart the SNA Server service.
<P>
If the ACTPUERP registry entry is not set, SNA Server treats all ACTPU 
requests as ACTPU (Cold) requests.
<P>
NOTE: For information describing the ACTPU and ACTLU message formats,
see the IBM SNA Formats Guide (IBM p/n# GA27-3136), Chapter 5,
"Request/Response Units (RUs)".
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna<BR>
Keywords          : sna3270 kbnetwork<BR>
Version           : 2.0 2.1 2.11 3.0<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 29, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
