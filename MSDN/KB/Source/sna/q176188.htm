

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Link Access Violation in ibmx25!os_wtime </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176188">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/11/04">
<META NAME="Keywords" CONTENT="prodsna snax25">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  The SNA Link Service (snalink.exe) may fail with an access violation in ibmx25!os_wtime when the X.25 link to the host is down for an extended period of time. Also, an Event ID 320 with an error code of 0xc0000023 (STATUS_BUFFER_TOO_SMALL) may be l...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA4Q,QDMO,QDO3,QAO4,QA1S,QBW7,QAR4,QAI4,QAI5,QAKP,QACK,QAE2,QBWP,QBWG,QAPN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Link Access Violation in ibmx25!os_wtime</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176188</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0SP1, and 3.0SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The SNA Link Service (snalink.exe) may fail with an access violation in
ibmx25!os_wtime when the X.25 link to the host is down for an extended
period of time. Also, an Event ID 320 with an error code of 0xc0000023
(STATUS_BUFFER_TOO_SMALL) may be logged in the Windows NT Event Viewer
Application log.
<P>
The failure may be recorded in the &lt;ntroot&gt;\DRWTSN32.LOG file as follows:
<P>
<PRE>   Application exception occurred:
        App: exe\snalink.DBG (pid=120)
        When: 9/24/1997 @ 17:26:12.627
        Exception number: c0000005 (access violation)

   [...]

   State Dump for Thread Id 0x7f

   eax=00000000 ebx=00000000 ecx=00000000 edx=67274840 esi=00000000
</PRE>edi=007e0148
<PRE>   eip=007d75ab esp=0119ff4c ebp=000000ff iopl=0    nv up ei pl zr na po nc
   cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000
</PRE>efl=00000246
<P>
<PRE>   function: os_wtime
           007d75a0 6a01             push    0x1
           007d75a2 e859fdffff       call    os_ftask (007d7300)
           007d75a7 8b4c2404         mov     ecx,[esp+0x4]
</PRE>ss:024ae953=????????
<PRE>   FAULT -&gt;007d75ab c70003000000     mov     dword ptr [eax],0x3
</PRE>ds:00000000=????????
<PRE>           007d75b1 894808           mov     [eax+0x8],ecx
</PRE>ds:0130ea06=????????
<PRE>           007d75b4 c20400           ret     0x4
           007d75b7 cc               int     3
           007d75b8 cc               int     3
           007d75b9 cc               int     3
           007d75ba cc               int     3
           007d75bb cc               int     3
           007d75bc cc               int     3
           007d75bd cc               int     3
           007d75be cc               int     3
           007d75bf cc               int     3

   *----&gt; Stack Back Trace &lt;----*

   FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
   000000ff 00000000 00000000 00000000 00000000 00000000 ibmx25!os_wtime
</PRE>(FPO: [1,0,0])
<PRE>   000000ff 00000000 00000000 00000000 00000000 00000000
</PRE>snalink!&lt;nosymbols&gt;
<P>
<P><h2>CAUSE</h2>
 
<P>
The Event 320 error indicates that the device driver is unable to transmit
a frame for the X.25 link service because its transmission buffers are
full. The access violation occurs when the link service tries to recover
<PRE> after this error.

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0,
3.0 Service Pack 1 (SP1), and 3.0 SP2.
A supported fix is now available, but has not been fully regression tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Technical Support for more information.
The new file is
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: snalink x.25<BR>
Keywords          : prodsna snax25<BR>
Version           : 3.0 3.0.SP1 3.0.SP2<BR>
Platform          : WINDOWS<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
