

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TN3270 Clients Do Not Accept "Do TN3270E" </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q140829">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1995/12/18">
<META NAME="Keywords" CONTENT="kbbug2.11 kbnetwork ntnetserv">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="   Do TN3270E  is a command sent from the TN3270E Server Service to the TN3270 emulator during session initialization. It asks the TN3270 emulator whether it can support the TN3270E protocol. Some TN3270 clients do not accept the  Do TN3270E  message...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBE6,QBE7,QAO4,QAI4,QAPN,QBVV,QAUQ,QBWP,QARL,QALG,QDO3,QACK,QAY2,QALQ,QAKC V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TN3270 Clients Do Not Accept "Do TN3270E"</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q140829</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, version  2.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
"Do TN3270E" is a command sent from the TN3270E Server Service to the
TN3270 emulator during session initialization. It asks the TN3270 emulator
whether it can support the TN3270E protocol. Some TN3270 clients do not
accept the "Do TN3270E" message from the TN3270E server. This prevents
session establishment between the TN3270 client and TN3270E Server Service.
Sending the "Do TN3270E" command is a legal command according to RFC 1647."
<P>
RFC 1647 states the Following:
<P>
"Telnet clients and servers would be free to negotiate support of the
TN3270E option or not. If either side does not support TN3270E, traditional
TN3270 can be used; otherwise, a sub-negotiation will occur to determine
what subset of TN3270E will be used on the session. It is anticipated that
a client or server capable of both types of 3270 emulation would attempt to
negotiate TN3270E first, and only negotiate traditional tn3270 if the other
side refuses TN3270E."
<P>
<P><h2>SAMPLE TRACE</h2>
 
<P>
&gt;12/08 11:18:16.828 (+ smidgen )  Event=TEV_Started
<P>
&gt;12/08 11:18:30.217 (+ 13 secs )  Event=TEV_DataToClient
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 DO TN3270E
 Number of bytes = 3

</PRE>&gt;12/08 11:18:30.217 (+ smidgen )  Event=TEV_TCPSendIssued
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 Number of bytes = 3
 000000  fffd 28                                  !..(             !

</PRE>&gt;12/08 11:18:30.257 (+ 40 msecs)  Event=TEV_TCPRecvIssued
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4

</PRE>&gt;12/08 11:18:30.277 (+ 20 msecs)  Event=TEV_TCPSendCompleted
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 Bytes transferred = 3

</PRE>&gt;12/08 11:19:09.403 (+ 39 secs )  Event=TEV_TCPRecvCompleted
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 Bytes returned = 0

</PRE>&gt;12/08 11:19:09.423 (+ 20 msecs)  Event=TEV_SessionTerminationScheduled
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 NormalTermination

</PRE>&gt;12/08 11:19:09.463 (+ 40 msecs)  Event=TEV_SessionTermination
<PRE> Thread = 0x0000005E  Session = 0x0007A718  Socket = 0x000001B4
 Session terminated

</PRE><h2>RESOLUTION</h2>
 
<P>
The TN3270E Server has a new registry entry that can be used to turn off
TN3270E support:
<P>
<PRE>   Subtree:   HKEY_LOCAL_MACHINE
   Key:       \currentcontrolset\services\tn3270\parameters\NoTN3270E
   Type:      REG_EXPAND_SZ
   Value:     ON

</PRE>When this value is set to ON, the server reverts to being a TN3270 Server.
This registry setting effects all sessions; not just ones from TN3270
emulators.
<P>
<P><h2>STATUS</h2>
 
<P>
This feature is included in the latest U.S. Service Pack for SNA Server for
Windows NT, version 2.11. For information on obtaining the Service Pack,
query on the following word in the Microsoft Knowledge Base (without the
spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna<BR>
Keywords            : kbbug2.11 kbnetwork ntnetserv<BR>
Version             : 2.11<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
