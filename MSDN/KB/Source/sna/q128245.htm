

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CPIC/APPC Program May Hang Opening a Dependent APPC Session </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q128245">
<META NAME="KBModify" CONTENT="1995/11/20">
<META NAME="KBCreate" CONTENT="1995/03/28">
<META NAME="Keywords" CONTENT="kbnetwork kbprg">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  Under SNA Server 2.0 or 2.1, when a CPIC or APPC application allocates a dependent LU6.2 session where the dependent APPC LU is defined in SNA Server Admin to be a  Member of Default Outgoing Local APPC LU Pool , the allocate request may hang. With...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAJH,QAGI,QARM,QA2P,QABA,QBWP,QARL,QABO,QAAW,QDJO,QBVV,QAGU,QAUD,QAW9,QACJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>CPIC/APPC Program May Hang Opening a Dependent APPC Session</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 20, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q128245</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, and 2.11
<P>
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Under SNA Server 2.0 or 2.1, when a CPIC or APPC application allocates a
dependent LU6.2 session where the dependent APPC LU is defined in SNA
Server Admin to be a "Member of Default Outgoing Local APPC LU Pool", the
allocate request may hang. Within an APPC application, the call to
[MC_]ALLOCATE may not return. Within a CPIC application, the call to CMINIT
may not return (since CPIC runs over APPC, the underlying APPC
[MC_]ALLOCATE hangs).
<P>
<P><h2>CAUSE</h2>
 
<P>
SNA Server 2.0 and 2.1 do not correctly implement pooling of dependent APPC
LU's, however, the SNA Server Admin program does not prevent it. The
problem doesn't occur if independent APPC LU's are configured to be a
member of the default outgoing APPC LU pool.
<P>
With dependent APPC LU's, SNA Server may have allocated the dependent APPC
LU/LU session to another APPC or CPIC application. If a second APPC or CPIC
application attempts to open the same dependent APPC LU (which can occur if
a dependent APPC LU is configured to be a member of the default APPC LU
pool), the second application's [MC_]ALLOCATE call will hang until the
session becomes available.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
This problem is fixed in SNA Server 2.11. The fix involves changes to the
server and the client software, so both ends must be updated to SNA Server
2.11.
<P>
To solve the problem on SNA Server 2.0 or 2.1, each CPIC or APPC
application must use a unique dependent Local APPC LU.
<P>
For an APPC application, the application must be predefined to use a
specific dependent Local APPC LU alias. If the Local LU alias is left
blank, the default Local APPC LU can be associated to a user or group
within the "Users and Groups" window of SNA Server Admin.
<P>
For a CPIC application, the Local APPC LU alias must be preset within SNA
Server by either:
<P>
<PRE>   Defaulting the user/group to use a specific Local APPC LU alias:

      Within the "Users and Groups" window of SNA Admin, the user or group
      record can be configured with a default Local and Remote APPC LU
      aliases.

   -or-

   Defaulting the workstation to use a specific Local APPC LU alias:

      The SNA Server client software can be defined with a default Local
      APPC LU alias, as described in the CPI-C API section of Appendix C in
      the SNA Server Reference Guide:

         Windows NT clients (within the Registry):

            HKEY_LOCAL_MACHINE
             \SYSTEM
               \CurrentControlSet
                 \Services
                   \SnaBase
                     \Parameters
                       \Client

            application: REG_SZ: localLUalias

         Win 3.x clients (within WIN.INI) or OS/2 clients (within SNA.INI):

            [ApplicationName]
            APPCLLU=localLUalias

            where application is the name of the CPIC application (without
            the .EXE extension).
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbprg<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: prodsna 2.00 2.10 2.11 3.50 allocate<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 20, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
