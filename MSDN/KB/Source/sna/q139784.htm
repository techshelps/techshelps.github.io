

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RUI_READ Enhancement for Receiving Large RUs </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q139784">
<META NAME="KBModify" CONTENT="1996/06/18">
<META NAME="KBCreate" CONTENT="1995/11/16">
<META NAME="Keywords" CONTENT="kbnetwork kbprg">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  If an LUA RUI application issues an RUI_READ request and passes a data buffer that is smaller than the size of the RU being received, the RUI interface returns a primary_rc of LUA_UNSUCCESSFUL and secondary_rc = LUA_DATA_TRUNCATED. The RUI library ...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QAUD,QBWP,QBE7,QBE6,QAXB,QBXL,QDO3,QAYY,QARL,QAXC,QBD2,QAH0,QAC1,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>RUI_READ Enhancement for Receiving Large RUs</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  June 18, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q139784</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, version 2.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
If an LUA RUI application issues an RUI_READ request and passes a data
buffer that is smaller than the size of the RU being received, the RUI
interface returns a primary_rc of LUA_UNSUCCESSFUL and secondary_rc =
LUA_DATA_TRUNCATED. The RUI library returns as much data as possible to the
application's data buffer, but the remaining data in the RU is thrown away
and cannot be extracted on subsequent RUI_READ requests.
<P>
This forces the RUI application to allocate an RUI_READ data buffer large
enough to handle the full RU size.
<P>
To work around this restriction, an update to SNA Server 2.11 now supports
the ability for a Win32, Win 3.x and OS/2 RUI application to receive
primary_rc = LUA_OK and secondary_rc = LUA_DATA_INCOMPLETE (0x00000060)
on an RUI_READ call, so it can continue to repost new RUI_READs receive
the remainder of the data.
<P>
NOTE: This enhancement has not been accepted as part of the Microsoft
WOSA LUA API standard.
<P>
Microsoft has updated the following files for this enhancement:
<P>
<PRE>   Client Platforms     Updated Files
   -----------------------------------------------------------
   Win32 clients        &lt;snaroot&gt;\system\WINRUI32.DLL
   Windows 3.x clients  &lt;winroot&gt;\system\WINRUI.DLL
   OS/2 clients         &lt;snaroot&gt;\ACSRUI.DLL
   MS-DOS clients       &lt;sdk&gt;\LIB\MSDOS\DOSACS.LIB
   SDK file             \SDK\INC\WINLUA.H

</PRE><h2>MORE INFORMATION</h2>
 
<P>
This new feature is enabled with an update to SNA Server 2.11 Service
Pack 1. To enable this new feature, the Win32, Win 3.x or OS/2 RUI
application must:

<UL><LI>Set lua_resv56[3] to a non-zero value in the verb control block when
   calling RUI_INIT during session establishment.

<LI>Look for primary_rc = LUA_OK and secondary_rc = LUA_DATA_INCOMPLETE
   (0x00000060) when RUI_READ completes. If this occurs, the application
   should repost a new RUI_READ to receive the next block of data, until
   the primary_rc = LUA_OK and the secondary_rc = LUA_OK.
<P>
</UL>If the LUA_DATA_INCOMPLETE is returned on an RUI_READ, any subsequent
RUI_READ used to receive the remainder of the RU will contain the same
transmission header (TH) and request/response header (RH). For example,
if the RU is marked with the End Chain (EC) indicator and the first
RUI_READ returns with LUA_DATA_INCOMPLETE, and the second RUI_READ returns
the rest of the data, then on each RUI_READ the EC indicator is set by
the RUI library in the verb control block.
<P>
The following line should be added to the WINLUA.H file to support this
new feature:
<P>
<PRE>   #define LUA_DATA_INCOMPLETE      LUA_FLIPL(0x00000060)

</PRE><h2>STATUS</h2>
 
<P>
This feature is included in the latest U.S. Service Pack for SNA Server for
Windows NT, version 2.11. For information on obtaining the Service Pack,
query on the following word in the Microsoft Knowledge Base (without the
spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbprg<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: 2.11 prodsna<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  June 18, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
