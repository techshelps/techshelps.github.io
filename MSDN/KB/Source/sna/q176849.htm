

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Server Logs Events 684 and 685 When Using SDLC Connection </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176849">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/11/17">
<META NAME="Keywords" CONTENT="kbbug2.00 kbbug2.11 kbbug3.00 snasdlc kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  An SNA Server computer using an SDLC Link Service for host connections may log the following message in the Windows NT application event log at random intervals:     Event ID: 684    Description: A buffer pool audit has been triggered by a pool ext...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDO3,QACK,QAEV,QAPN,QAO4,QBG2,QAI5,QDMH,QAYC,QAWI,QAR4,QACJ,QAU5,QAKP,QDN1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server Logs Events 684 and 685 When Using SDLC Connection</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176849</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 2.0, 2.1, 2.11, 2.11 SP1, 2.11 SP2, 3.0,
   3.0 SP1, 3.0 SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An SNA Server computer using an SDLC Link Service for host connections may
log the following message in the Windows NT application event log at random
intervals:
<P>
<PRE>   Event ID: 684
   Description: A buffer pool audit has been triggered by a pool extension.

</PRE>The description also lists the number of allocated trusted headers. Each
successive Event 684 shows a larger number of allocated trusted headers.
<P>
Eventually the allocated trusted headers will reach the maximum value, and
the connection to the host will be lost. At this point, the following
message will be logged in the application event log:
<P>
<PRE>   Event ID: 685
   Description: An attempt was made to extend a buffer pool, but the
   related pool had reached its maximum size. The affected component is
   terminating, and an audit of the buffer pools just before termination is
   attached.

   &lt;Listing of the buffer pools omitted&gt;

</PRE>A trace of the SDLC Link Service shows numerous DLCST UPSN messages (update
station statistics) being sent to the SNA Server service. For more
information about DLCST UPSN messages, refer to the following Microsoft
Knowledge Base article:
<P>
<PRE>    Article-ID: <B><A HREF="../SNA/Q139594.htm">Q139594</A></B>
    Title : Meaning of "DLCST UPSN" in an SNA Server Data Link Control
   Trace

</PRE><h2>CAUSE</h2>
 
<P>
Messages from the Link Service are being placed into the buffer pool much
faster than the SNA Server service can process them. This is usually caused
by a problem elsewhere in the system, for example, in the SDLC adapter or
driver. However, SNA Server should deal with this situation without
dropping the host connection.
<P>
The UPSNSTAT messages let the SNA Server service track statistics for
sending in RECFMS messages to the host. RECFMS has been retired from SNA
for type 2 nodes, and UPSNSTAT is not in the published Microsoft SNA Device
Interface Specification, so UPSNSTAT message handling has been removed from
the Ibmsdlc.dll Link Service. This eliminates the effects of the problem.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version 3.0
Service Pack 2 and earlier.
A supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Product Support Services for more information.
 
<PRE>Keywords          : kbbug2.00 kbbug2.11 kbbug3.00 snasdlc kbbuglist
Version           : WINDOWS:2.0,2.1,2.11,2.11SP1,2.11SP2,3.0,3.0SP1,3.0SP2
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
