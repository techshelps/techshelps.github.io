

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Server APPC Error: F004 AP_COMM_SUBSYSTEM_NOT_LOADED </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q148359">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1996/03/11">
<META NAME="Keywords" CONTENT="kbnetwork ntnetserv snaappc">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When you attempt to start an SNA Server APPC Transaction Program (TP), the following error message appears:     Primary Return Code = F004 AP_COMM_SUBSYSTEM_NOT_LOADED  One or both the following secondary return codes also appear:     Secondary Ret...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAB4,QAUD,QAH4,QARL,QAAP,QBWO,QAI5,QAJ4,QBVV,QAVZ,QAGU,QBVX,QDL9,QBWQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server APPC Error: F004 AP_COMM_SUBSYSTEM_NOT_LOADED</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q148359</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, 2.11, 2.11
   Service Pack 1, and 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you attempt to start an SNA Server APPC Transaction Program (TP), the
following error message appears:
<P>
<PRE>   Primary Return Code = F004 AP_COMM_SUBSYSTEM_NOT_LOADED

</PRE>One or both the following secondary return codes also appear:
<P>
<PRE>   Secondary Return Code = 010000F0

   Secondary Return code = 020000F0

</PRE><h2>CAUSE</h2>
 
<P>
The two secondary return codes appear due to the causes described below.
The secondary return codes are documented on page 101 of the SNA Server
APPC Programmer's Guide as X'F0000001' and X'F0000002' respectively. Intel
processors store double-word values in byte inversed format. Therefore, an
application may display the secondary return code as 0x010000F0 or
0x020000F0.
<P>
<P><h3>Secondary Return Code = 010000F0</h3>
 
<P>
This error occurs when the SNA Server client does not find any active SNA
Servers running in the SNA Server domain or subdomain. If there are SNA
Servers running, then this can also indicate that the SNA client is unable
to receive a "sponsor" connection to an SNA Server in the domain. Specific
causes of this problem include the following:

<UL><LI>The SNA Server service is not started on the SNA Server.

<LI>When you run SNA Server 2.11 or greater and no more SNA Server licenses
   are left (Per Server Reached = Per Server Purchased, or Per Server
   Purchased is set to 0). To verify the status of the licenses, use
   License Manager in the Network Administration group.

<LI>The SNA Server client software is unable to connect to the SNA Server
   over the client-server LAN interface that has been selected. The
   following are reasons that prevents a LAN session from opening:
<P>
<P><PRE>    - User does not have permission to connect to the Windows NT Server
      where SNA Server is running.
</PRE><P>
<P><PRE>    - If this error occurs on an SNA Server Windows NT client, the SNA
      Server that the client is connected to must have the Windows NT Guest
      account enabled.
</PRE><P>
<P><PRE>      SNA Server aware applications, such as the 5250 or 3270 applet, rely
      on the SNA Server client-server interface to create LAN sessions on
      its behalf. If a user logs on to a client (where the SNA Server
      application is running), which does not have permissions to create a
      LAN session with the SNA Server, then this error occurs. If you
      select Microsoft Networking during SNA client installation, connect
      to the IPC$ resource on the server:
</PRE><P>
<PRE>         \\&lt;SNA_Server_name&gt;\ipc$

      If this prompts for a password, there is a user permission problem
      with your Windows NT domain user name and password. If you select
      Microsoft Networking, the SNA Server client relies on the client-side
      redirector to connect to the IPC$ resource through the Windows NT
      Server. For Banyan IP, native TCP/IP and IPX/SPX, the user provides
      the Windows NT user ID, password and Windows NT domain information to
      the SNA Server client software. Then this authenticates the user
      request against the Windows NT Server.

      The Otherservers entry is used to append an SNA Server outside the
      client's local Windows NT domain to the client's local service table.
      If the local LU you are attempting to connect to is only defined on
      an Otherservers SNA Server, the user must have the permission to
      create a Windows NT LAN session to that SNA Server. The Windows
      Domain Administrator may want to enable the Guest account on that SNA
      Server because the Otherservers SNA Servers are commonly outside the
      client's local domain.

</PRE><LI>If the SNA Server has two network interface cards (NICs) and TCP/IP
   sockets are used to connect to the server. For additional information,
   see the following article in the Microsoft Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A HREF="../SNA/Q128986.htm">Q128986</A></B>
<PRE></PRE>      TITLE     : Connecting over TCP/IP to SNA Server with Multiple Net
                  Cards

</PRE><LI>In a Windows 3.x or Windows for Workgroups client computer, the SNA
   client software or network software may encounter memory allocation
   errors. The following appears in an application internal trace when
   there is not enough memory to read on a pipe (if Microsoft Networking
   is selected in the SNA Server client setup):
<P>
<P><PRE>      47.67 DASYR  03-05 15:23:53  Asynch read failed, pipe handle 11,
      rc = 8
</PRE><P>
   For additional information on how to tune memory on a Windows client,
   see the following article in the Microsoft Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A HREF="../SNA/Q126432.htm">Q126432</A></B>
<PRE></PRE>      TITLE     : SNA Server Windows Client Memory Tuning

</PRE></UL><h3>Secondary Return code = 020000F0</h3>
 
<P>
This error occurs if the local LU alias is not contained within the
"LU_Alias" field of the TP_Started APPC verb. For example, if you do not
enter a local LU Alias in the SNA Server 5250 Applet, do not default the
User record with an appropriate local LU alias in SNA Server Admin Users
and Groups window, or do not define the local APPC LU as a member of the
default outgoing pool, this error occurs.
<P>
NOTE: If you use a CPIC application, the following CPIC error message and
the "APPC error F004 020000F0" error message appear:
<P>
<PRE>   Error 20 (CM_PRODUCT_SPECIFIC_ERROR)

</PRE>For additional information on Error 20 above, see the following article in
the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SNA/Q132720.htm">Q132720</A></B>
   TITLE     : SNA Server CPIC Allocate Error 20
               (CM_PRODUCT_SPECIFIC_ERROR)
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna sp1<BR>
Keywords            : kbnetwork ntnetserv snaappc<BR>
Version             : 2.0 2.1 2.11 3.0 3.5 3.51<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
