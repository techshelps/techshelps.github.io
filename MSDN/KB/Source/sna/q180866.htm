

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Persistent Verification Support for APPC Sessions </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q180866">
<META NAME="KBModify" CONTENT="1998/02/11">
<META NAME="KBCreate" CONTENT="1998/02/10">
<META NAME="Keywords" CONTENT="kbbug3.00 kbbug3.00.sp1 prodsna snaappc snacpic snaprog snatp kbbug3.00.sp2 kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  SNA Server 3.0 does not include support for Persistent Verification (PV),  a method for managing conversation level security on an APPC session.  Without PV support, a sending LU cannot send a password on the first  ATTACH and set the PV bit. The P...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAWK,QAH6,QABT,QAAD,QBVV,QA39,QABI,QAK7,QBXS,QABH,QDO3,QAR4,QAXC,QAGU,QAVY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Persistent Verification Support for APPC Sessions</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 11, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q180866</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0 SP1, 3.0 SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
SNA Server 3.0 does not include support for Persistent Verification (PV), 
a method for managing conversation level security on an APPC session. 
Without PV support, a sending LU cannot send a password on the first 
ATTACH and set the PV bit. The PV bit signals the receiving TP to check 
the security credentials by verifying the password.
<P>
<P><h2>CAUSE</h2>
 
<P>
Persistent Verification support was not implemented in SNA Server 3.0.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0,
3.0SP1, and 3.0SP2. 
A supported fix is now available, but has not been fully regression-tested 
and should be applied only to systems experiencing this specific problem. 
Unless you are severely impacted by this specific problem, Microsoft 
recommends that you wait for the next Service Pack that contains this fix.  
Contact Microsoft Product Support Services for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
PV changes were implemented in SNA Server 4.0 but were not fully retrofitted 
to the SNA Server 3.0 product. In addition, modifications to the APPC 
interface (Wappc32.dll) were needed to provide correct interaction between 
PV and Already Verified (AV) support, which is a second method for managing 
APPC conversation level security. With the hotfix applied, if the host will 
accept AV and PV, and the APPC application specifies "security = AP_SAME", 
SNA Server does the following:

<OL><P><LI>If it does not detect that the user is signed on to the host, it sends
   an ATTACH with the AV bit set and the PV bits set to "sign-on requested".
   A password is not included.
</OL>2. If it does detect that the user is signed on, it sends an ATTACH with the 
<PRE>   AV bit set and the PV bits set to "already signed on". Again, a password
   is not included.

</PRE></OL>The most basic way to keep an APPC conversation secure is to send a user_id 
and password on each ATTACH, which can then be verified by the receiving LU.  
The problem with this is that the password is continuously passed in 
messages, increasing the likelihood of its being intercepted. PV and AV both 
provide a mechanism for reducing (or removing altogether) the number of
messages that contain the password, and thereby improving security.
<P>
For AV the password is never sent on any ATTACH. The receiving LU trusts the 
sending LU to have done all of the security checking. If a receiving LU 
trusts a sending LU, the sending LU can avoid including the password on any 
ATTACH by setting the AV indicator bit instead. The AV bit tells the 
receiving LU that the sending LU has already verified the TP's credentials 
(by some private method) and the receiving LU does not have to worry about 
doing any checking itself.
<P>
For PV, the password is sent on the first ATTACH, and is never sent again. 
On the first ATTACH, the PV bit is set, and a password is included. This 
signals the receiving LU to check the password and then add the user_id to 
a list of users who do not need to be verified again. On the second and 
subsequent ATTACHes the PV bit is set, but no password is included. This 
signals the receiving TP that it just needs to check that the user is in 
the list of users it has verified in the past.
 
<PRE>Keywords          : kbbug3.00 kbbug3.00.sp1 prodsna snaappc snacpic snaprog snatp kbbug3.00.sp2 kbbuglist
Version           : WINDOWS:3.0,3.0SP1,3.0SP2
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 11, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
