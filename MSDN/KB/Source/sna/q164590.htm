

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Branch Servers Using DLS Cannot Communicate Through Firewalls </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q164590">
<META NAME="KBModify" CONTENT="1997/04/14">
<META NAME="KBCreate" CONTENT="1997/03/05">
<META NAME="Keywords" CONTENT="kbbug3.00 kbfix3.00.sp1 prodsna snadls">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  Branch-based SNA Servers that use a Remote Link Service may not be able to communicate with a Central SNA Server if there are Internet firewalls or screening routers between the SNA Server systems.  CAUSE ===== You can configure Central SNA Servers...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAKG,QACK,QAH6,QBVW,QANN,QAE2,QAVZ,QBVX,QABA,QAFI,QDJP,QANV,QAM1,QAH5,QBWD V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Branch Servers Using DLS Cannot Communicate Through Firewalls</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 14, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q164590</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Branch-based SNA Servers that use a Remote Link Service may not be able to
communicate with a Central SNA Server if there are Internet firewalls or
screening routers between the SNA Server systems.
<P>
<P><h2>CAUSE</h2>
 
You can configure Central SNA Servers that are distributing link services
for remote SNA servers to use specific software port numbers. This allows
administrators of Internet firewalls to filter packets based on port
number, thereby denying/accepting their propagation to the private
network.
<P>
Branch (or Remote) SNA Servers that use the Remote Link Service to
communicate with the Central SNA Servers, use dynamic ports. The
Distributed Link Service is installed on the branch server, as installed
via SNA Server Manager (which appears with a link service name of SnaRemx
within SNA Server Manager). Because these remote servers use dynamic
ports, administrators could not determine what port number would be used,
thereby limiting their ability to filter packets based on port numbers.
<P>
<P><h2>MORE INFORMATION</h2>
 
For additional information regarding SNA Server and Internet firewalls,
please see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../SNA/Q139508.htm">Q139508</A></B>
   TITLE     : Internet Firewall Support in SNA Server

</PRE><h2>RESOLUTION</h2>
 
<P>
The SNA Server transport DLLs were modified to support registry entries
that can be used to set fixed port numbers over the protocols supported by
distributed link services. The supported protocols are TCP/IP, IPX/SPX,
and Banyan Vines IP.
<P>
The updated SNA Server modules and registry entries below must be
implemented on the branch (remote) SNA Server that is using the
distributed link service.
<P>
The registry entry to be configured under the HKEY_LOCAL_MACHINE subtree
will depend on the transport protocol being used as indicated here:
<P>
<P><h3>TCP/IP</h3>
 
<PRE>   \System\CurrentControlSet\Services\SnaRemx\Parameters\
      LocalIpPort:REG_DWORD

</PRE><h3>IPX/SPX</h3>
 
<P>
<PRE>   \System\CurrentControlSet\Services\SnaRemx\Parameters\
      LocalIpxPort:REG_DWORD

</PRE><h3>Vines IP</h3>
 
<P>
<PRE>   \System\CurrentControlSet\Services\SnaRemx\Parameters\
      LocalVinesPort:REG_DWORD

   where "x" is the link service name. Note that there may be several
   "SnaRemx" link services installed on the branch server. The names
   default to SnaRem1, SnaRem2, and so forth.

</PRE>WARNING: If you use fixed IP ports, you may be unable to open a connection
for several minutes after it is disconnected.
<P>
The following files were modified to provide this support:
<P>
<PRE>   &lt;snaroot&gt;\system\snaip.dll
   &lt;snaroot&gt;\system\snanw.dll
   &lt;snaroot&gt;\system\snabv.dll

</PRE><h2>STATUS</h2>
 
Microsoft has confirmed this to be a problem in SNA Server version 3.0.
This problem was corrected in the latest Microsoft SNA Server 3.0 U.S.
Service Pack. For information on obtaining the service pack, query on
the following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbbug3.00 kbfix3.00.sp1 prodsna snadls<BR>
Version             : 3.0<BR>
Platform            : winnt<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 14, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
