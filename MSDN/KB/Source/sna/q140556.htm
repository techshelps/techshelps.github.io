

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Securing SNA Server to Not Require Everyone:Read Access </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q140556">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1995/12/03">
<META NAME="Keywords" CONTENT="kbinterop kbnetwork kbsetup ntprotocol">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  By default, SNA Server requires that at least Everyone has read access on the COMCFG share (          \SYSTEM\COMCFG) that SNA Server creates during Setup. Administrators may want to prevent read access so that unprivileged users do not copy the   ...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGU,QAH5,QACK,QBVV,QAI5,QA9A,QAVX,QAVW,QBSO,QAGR,QBW7,QBWU,QAB4,QAA1,QBVX V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Securing SNA Server to Not Require Everyone:Read Access</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q140556</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.10, and 2.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
By default, SNA Server requires that at least Everyone has read access on
the COMCFG share (&lt;sna_root&gt;\SYSTEM\COMCFG) that SNA Server creates during
Setup. Administrators may want to prevent read access so that unprivileged
users do not copy the &lt;sna_root&gt;\SYSTEM\COMCFG\COM.CFG to view its
contents; this article explains how to do that.
<P>
NOTE: The SNA Server 3.0 setup program allows the administrator to install
SNA Server services to run under a user account, and automatically performs
all the steps described in this article. So, this is not an issue with SNA
Server 3.0 when this setup option is chosen.
<P>
<P>
<P><h2>MORE INFORMATION</h2>
 

<OL><P><LI>Create a user that is a member of the "Domain Admins" global group and
   "Administrators" local group.

<P><LI>Using User Manager for Domains, add "Domain Admins" and "Administrators"
   to the following rights:
<P>
<P><PRE>    - Manage Auditing and security log
    - Take ownership of files or other objects
    - Act as Part of the Operating System
    - Generate Security Audits
    - logon as a service
    - backup and restore
</PRE>
<P><LI>Using the Services applet in Control Panel, configure each SNA Server
   service to start in the context of the user that was just created in
   step 1. Do this for every SNA Server in the subdomain.

<P><LI>In File Manager, a. remove the Everyone group and b. add this newuser
   with Full Control to the following shares:
<P>
<PRE>      Share:      Directory
      ------------------------
      snaserv      &lt;sna_root&gt;\
      comlogs      &lt;sna_root&gt;\system\
      COMCFG       &lt;sna_root&gt;\system\COMCFG\

   Repeat step 4 for each SNA Server in the subdomain.

</PRE><P><LI>Stop and start the SNABase service on each SNA Server in the subdomain.
<P>
   Warning: Stopping the SNABase service on a particular machine will stop
   all SNA Server services on that machine.

<P><LI>Test changes.

</OL></UL><LI>To test whether SNA Server is still normally operating with the above
   changes in place:
<P>
<P><PRE>    - Note the date/time of the &lt;sna_root&gt;\SYSTEM\COMCFG\COM.CFG on the
      Primary SNA Server.
</PRE><P>
<P><PRE>    - Load SNA Admin on the primary SNA Server.
</PRE><P>
<P><PRE>    - Click the save button in SNA Admin.
</PRE><P>
<P><PRE>    - Note the change in date/time of the COM.CFG on the primary SNA
      Server.
</PRE><P>
<P><PRE>    - After a couple of seconds, the date/time of the
      &lt;sna_root&gt;\SYSTEM\COMCFG\COM.CFG on one of the Backup SNA Servers
      should match the new date/time on the primary.
</PRE>
<LI>To test whether SNA Server is denying access to users that are not
   members of the Domain Administrators group:
<P>
<P><PRE>    - Logoff the backup SNA Server.
    - Logon as a Domain User.
    - Launch SNA Server Admin.
    - The user should receive the following error message:
</PRE><P>
<PRE>         Error : 250

         The SNA Server Base Service is not started. Unable to continue.

</PRE><LI>To test that Domain Users cannot get to the SNA Server shares to read
   SNA Server system binaries and COM.CFG:
<P>
<P><PRE>    - Logon as a Domain User.
    - Try to "net use" to the following shares:
</PRE><P>
<PRE>         \\Any_sna_server\snaserv
         \\Any_sna_server\comlogs
         \\Any_sna_server\COMCFG

   The result should be that the user is able to map the drive but the
   following should appear in File Manager:

      You do not have permission to access this directory.

   NOTE: If the password is changed for this user, then the administrator
   will have to change the password with Service Control Manager for each
   SNA Server service on each SNA Server in the subdomain. One way to
   prevent having to do this is to select "Password Never Expires" for this
   user in User Manager for Domains.
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna<BR>
Keywords            : kbinterop kbnetwork kbsetup ntprotocol<BR>
Version             : 2.0 2.1 2.11<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
