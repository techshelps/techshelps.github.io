

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Server Handling of 3270 LU Session Cleanup </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q132436">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1995/07/10">
<META NAME="Keywords" CONTENT="kbenv kbnetwork ntconfig nthowto ntnetserv sna3270">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When using pooled 3270 LUs with SNA Server, a 3270 user may access the previous user's host application session. This occurs when the host did not clean up the 3270 application after receiving a TERM-SELF message from SNA Server on the session. If ...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGU,QDN1,QBXS,QBWP,QAY2,QBVV,QAH6,QAI5,QAJQ,QAJH,QA63,QAYL,QAL2,QBJZ,QBAO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server Handling of 3270 LU Session Cleanup</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q132436</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, 2.11 and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When using pooled 3270 LUs with SNA Server, a 3270 user may access the
previous user's host application session. This occurs when the host did not
clean up the 3270 application after receiving a TERM-SELF message from SNA
Server on the session. If this occurs, the NOTERMSELF:REG_SZ:YES registry
setting should be used to force SNA Server to send an UNBIND(Cleanup) when
the user ends their 3270 session, or when the user's client-server LAN
session is lost.
<P>
The NOTERMSELF registry setting is described below, and in Appendix C of
the SNA Server 2.1 or 3.0 "Reference Guide".
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When a 3270 user closes their emulation session, or if the SNA Server
client loses its LAN connection to the SNA Server, SNA Server sends
a TERM-SELF on the SSCP-LU session to request that the host unbind the
PLU-SLU session. On some host systems, this TERM-SELF message does not
cause the 3270 application session to be cleaned up.
<P>
To force SNA Server to send an UNBIND(Cleanup) to the host:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Run Registry Editor (REGEDT32.EXE).

<P><LI>From the HKEY_LOCAL_MACHINE subtree, go to the following key:
<P>
<P><PRE>      \SYSTEM\CurrentControlSet\Services\SnaServr\Parameters
</PRE>
<P><LI>From the Edit menu, choose Add Value.

<P><LI>Add the following:
<P>
<P><PRE>      Value Name: NOTERMSELF
      Data Type: REG_SZ
      String: YES
</PRE>
<P><LI>Choose OK.
<P>
</OL>When this variable is set to YES, 3270 sessions are terminated directly by
sending UNBIND(cleanup). Otherwise, a TERM-SELF is sent to solicit UNBIND
from the host. Setting this variable to YES is a workaround for host-based
session monitors that mark the LU as inactive after the TERM-SELF sequence,
or do not properly unbind the application session.
<P>
If CICS is being used and the CICS "dedicated LU" feature is enabled at the
host, or if certain host session monitors are being used (such as "TPX"),
the host 3270 application session may not be cleaned up even if SNA Server
is configured to send Unbind(cleanup).
<P>
When using dedicated LUs, CICS preserves the user's host application
session even when the user were to turn off their 3270 terminal. So, this
host feature assumes that a given LU will always be accessed by a specific
user. If you want to use the dedicated LU feature, consider assigning
specific 3270 LUs to specific users using SNA Server Admin, and do not use
pooled 3270 LUs. Otherwise, if a user disconnects from their emulation
session, the next user who acquires the same 3270 LU (through the use of a
3270 pool) reconnects to the same host application state of the previous
user.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna notermself unbind<BR>
Keywords            : kbenv kbnetwork ntconfig nthowto ntnetserv sna3270<BR>
Version             : 2.0 2.1 2.11 3.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
