

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Disabling TCP/IP Nagle Algorithm Improves Speed on Slow Nets </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q138831">
<META NAME="KBModify" CONTENT="1996/02/01">
<META NAME="KBCreate" CONTENT="1995/10/29">
<META NAME="Keywords" CONTENT="kbnetwork kbbug2.10 kbbug2.11">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  This article explains the Nagle TCP/IP algorithm and how to manually disable it on different the SNA Server client and server releases for different operating systems. It also mentions how to obtain an update that automatically disables this algori...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBXS,QBWP,QDNT,QARL,QA4P,QDL9,QBWQ,QBWO,QBWN,QBWD,QDIR,QAXB,QAMR,QA26,QAJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Disabling TCP/IP Nagle Algorithm Improves Speed on Slow Nets</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 1, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q138831</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.1 and 2.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article explains the Nagle TCP/IP algorithm and how to manually
disable it on different the SNA Server client and server releases for
different operating systems. It also mentions how to obtain an update that
automatically disables this algorithm.
Microsoft has updated the file &lt;snaroot&gt;\SYSTEM\SNAIP.DLL to correct this
problem.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>The Nagle TCP/IP Algorithm</h3>
 
<P>
The Nagle TCP/IP algorithm was designed to avoid problems with small
packets, called tinygrams, on slow networks. The algorithm says that a
TCP/IP connection can have only one outstanding small segment that has not
yet been acknowledged. The definition of "small" varies but usually it is
defined as "less than the segment size" which on ethernet is about 1500
bytes.
<P>
<P><h3>Manually Disabling the Nagle Algorithm</h3>
 
<P>
You can disable the Nagle algorithm by performing the SNA Server client and
server modifications mentioned below and following the instructions in the
Activating the Modifications section.
<P>
<P><h3>SNA Server Modifications</h3>
 

<OL><P><LI>Under the subtree HKEY_LOCAL_MACHINE add the subkey SNATCP under the
   following key:
<P>
<P><PRE>      SYSTEM\CurrentControlSet\Services\Snabase\Parameters\
</PRE>
<P><LI>Choose Add Key from the Edit menu and use the following information:
<P>
<P><PRE>      Value Name: NoDelay
      Data Type:  REG_SZ
<PRE></PRE>      String:     yes

</PRE></OL><h3>Windows 95 SNA Client Modifications</h3>
 
<P>
Add the same registry entry as SNA Server above.
<P>
<P><h3>Windows 3.x Modifications</h3>
 
<P>
Windows 3.x client always disables the Nagle algorithm and there is no way
to enable it.
<P>
<P><h3>Activating the Modifications</h3>
 
<P>
When the NoDelay is set to yes, the TCP/IP transport DLL uses the
TCP_NODELAY option when it opens a socket.
<P>
For this to take effect, the client server interface must be stopped and
restarted on both the server and client after the registry changes have
been made. The following table shows the name of the SNA client server
interface program and the corresponding operating system platform:
<P>
<PRE>   Client Server Interface      Platform
   ----------------------------------------
   SNABASE Service              Windows NT
   SNABASE Service              Windows 95
   WNAP.EXE                     Windows 3.x

</PRE>Note: The Nagle algorithm is defined in TCP/IP RFC 896.
<P>
<P><h3>Obtaining the Update to Automatically Disable the Nagle Algorithm</h3>
 
<P>
This feature is included in the latest U.S. Service Pack for SNA Server for
Windows NT, version 2.11. For information on obtaining the Service Pack,
query on the following word in the Microsoft Knowledge Base (without the
spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug2.10 kbbug2.11<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: prodsna 2.10 2.11<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 1, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
