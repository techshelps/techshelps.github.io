

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FILE: Increased File Libraries for Visual C++ 2.0-2.2 Available </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q124520">
<META NAME="KBModify" CONTENT="1997/07/31">
<META NAME="KBCreate" CONTENT="1995/01/03">
<META NAME="Keywords" CONTENT="CRTIss kbfile kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The run-time libraries have a preset limit on the number of files you can have open at one time as described in the More Information section of this article.  You can, however, increase these limits by downloading the Increased File Handle Librarie...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABN,QBHQ,QAUD,QBFY,QAY5,QA26,QBV8,QAJB,QA56,QA55,QBJQ,QABA,QAB9,QBI8,QA59 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FILE: Increased File Libraries for Visual C++ 2.0-2.2 Available</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 31, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q124520</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The C Run-time (CRT) included with:
   Microsoft Visual C++, 32-bit Edition, versions 2.0, 2.1 and 2.2
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The run-time libraries have a preset limit on the number of files you
can have open at one time as described in the More Information section
of this article.
<P>
You can, however, increase these limits by downloading the Increased
File Handle Libraries for Microsoft Visual C++, 32-bit Edition, versions
2.0, 2.1 and 2.2. Download Vc20xf.exe for Visual C++ 2.0, or Vc22xf.exe for
Visual C++ 2.1 and 2.2.
<P>
The following files are available for download from the Microsoft Software
Library:
<P>
<PRE> ~ <A HREF="http://support.microsoft.com/download/support/mslfiles/Vc20xf.exe">Vc20xf.exe</A> <I>(size: 651070 bytes)</I> 
 ~ <A HREF="http://support.microsoft.com/download/support/mslfiles/Vc22xf.exe">Vc22xf.exe</A> <I>(size: 657347 bytes)</I> 

</PRE>For more information about downloading files from the Microsoft Software
Library, please see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../zMiscellaneous/Q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online Services


</PRE><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Preset Limits</h3>
 
<P>
Attempting to open more than 64 file handles (or 20 file streams)
concurrently in a process will fail if you are creating a single-
threaded application that uses the static run-time library (LIBC.LIB) by
using the /ML compiler option (the default).
<P>
Attempting to open more than 256 files handles (or 40 file streams)
concurrently in a process will fail if you are using the static
multi-threaded run-time library by using the /MT compiler option and
LIBCMT.LIB. The same limit applies if you use the DLL version of the
run-time library by using the /MD compiler option and MSVCRT.LIB or
MSVCRT20.DLL.
<P>
<P><h3>Increased Limits Using the Files in VC20XF.EXE &amp; VC22XF.EXE</h3>
 
<P>
VC20XF.EXE ans VC22XF.EXE include the following five files:
<P>
<PRE>   README.TXT   - File containing instructions on use of these .LIBs
   LIBC.LIB     - Single threaded run-time library
   LIBCMT.LIB   - Multi-threaded run-time library
   MSVCRT2X.LIB - Import library for MSVCRT2X.DLL
   MSVCRT2X.DLL - Multi-threaded run-time library in a DLL.

</PRE>These run-time libraries have been rebuilt to allow the use of up to 509
file handles and up to 125 file streams in an application. The total is
actually 512 handles and 128 streams, but three handles and streams are
used by the run-time library for the standard C input/output/error
files, stdin, stdout, and stderr. Note that each stream (FILE*) uses a
handle, so the two limits are not independent of each other.
<P>
When building your application, the libraries must be in your current
directory, or in a directory specified by the LIB environment variable.
If you place them in the \MSVC20\LIB directory, make a backup copy of
the existing libraries of the same name.
<P>
For MSVCRT2X.LIB to be used as a default library, you must rename it to
MSVCRT.LIB. If you use this library, MSVCRT2X.DLL must be in the path or
in the Windows system directory. You may distribute MSVCRT2X.DLL with
applications built with MSVCRT2X.LIB.
<P>
These files are provided for the convenience of Visual C++ users; they
are provided as is without any support.
<P>
File handles are obtained when you use the low-level I/O functions
(_open and _sopen, and _creat) to open a file. When one of these
functions fails because the application has reached the file limit, they
will return -1, and set the global variable errno to the constant
EMFILE. EMFILE is defined in ERRNO.H as 24.
<P>
File handles are also associated with the iostream classes. When a
member function or constructor of an iostream class fails because the
application has reached the file limit, the bad member function will
return a nonzero value. Note that many other types of errors can also
cause the bad member function to return a nonzero value.
<P>
File streams are associated with the stream I/O functions (fopen,
_fdopen, and _fsopen). When one of these functions fails because the
application has reached the file limit, they will return NULL. Note that
many other types of file stream errors can also cause the functions to
return NULL.
<P>
NOTE: You must call SetHandleCount() to increase the number of file
handles available on WIN32s. This function changes the number of file
handles available to a process. Under Win32s, this default is 20. It has
no effect when called under Windows NT.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: runtime vc++<BR>
Keywords          : CRTIss kbfile kbprg<BR>
Version           : 2.0 2.1 2.2<BR>
Platform          : NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 31, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
