

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Cannot Watch Local Variables of a __finally Block </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q122847">
<META NAME="KBModify" CONTENT="1997/09/18">
<META NAME="KBCreate" CONTENT="1994/11/14">
<META NAME="Keywords" CONTENT="WBDebug kbbuglist kbfixlist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When stepping into the __finally block of a try-finally statement, any variables that might exist local to that block may not show correct values in the locals or watch window of the integrated debugger.  RESOLUTION  If you need to watch variables ...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QAYL,QATL,QATK,QAHC,QAR4,QAA8,QBFY,QAPN,QBWP,QAKD,QAAW,QAKP,QAB9,QABG V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Cannot Watch Local Variables of a __finally Block</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q122847</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00 2.00 2.10
WINDOWS NT
kbtool kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>The integrated debugger, included with Microsoft Visual C++,
   32-bit Edition, versions 1.0 and 2.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When stepping into the __finally block of a try-finally statement, any
variables that might exist local to that block may not show correct values
in the locals or watch window of the integrated debugger.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
If you need to watch variables used in a __finally block of a try-finally
statement, either declare the variables outside of the scope of the
__finally block, or assign the value of the local variable to another
variable of the same type that has been declared outside the scope of the
__finally block.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article.  This problem was not reproducible in
Microsoft Visual C++, 32-bit Edition, version 4.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The try-finally statement is a Microsoft extension to the C language that
enables applications to guarantee execution of cleanup code when execution
of a block of code is interrupted.
<P>
You can use the sample code listed below to demonstrate the problem
described in this article. You will see the value of the variable 'i' is
incorrect in the locals or watch window when stepping through the code of
the __finally block.
<P>
<P><h3>Sample Code to Demonstrate Problem</h3>
 
<P>
<PRE>/* Compile options needed: /Zi
*/

#include &lt;stdio.h&gt;

void main( void )
</PRE>{
<PRE>   __try
   {
      // guarded section code...
   }
   __finally
   {
      int i = 2;

      // termination handler code...
      i = 10;
      i = 15;
      i++;
      printf( "In __finally.  i = %d.\n", i );
   }
</PRE>}
<P>
<P><h2>REFERENCES</h2>
 
<P>
For more information on the try-finally statement, see Chapter 5 of the C
Language reference.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 2.00 buglist1.00 buglist2.00 8.00 9.00<BR>
exception<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubcategory: WBDebug<BR>
Keywords          : WBDebug kbbuglist kbfixlist kbtool<BR>
Version           : 1.00 2.00 2.10<BR>
Platform          : NT WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
