

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: Conflicting Definitions of time_t Between Windows and Mac </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q149471">
<META NAME="KBModify" CONTENT="1997/07/25">
<META NAME="KBCreate" CONTENT="1996/04/03">
<META NAME="Keywords" CONTENT="CRTIss MacPrgIss kbinterop">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  Mixing calls to both the Visual C++ C Runtime Library and native Macintosh functions that rely on time_t may yield incorrect results. Most of these functions can be found in Time.h.  CAUSE =====  Both sets of libraries define time_t as the number o...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDO9,QAGI,QBHQ,QAY5,QBFY,QAYV,QAU3,QAMR,QAKD,QABB,QBV8,QAIF,QAB9,QAFH,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Conflicting Definitions of time_t Between Windows and Mac</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q149471</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The C Run-time (CRT) included with:
   - Microsoft Visual C++, Macintosh Cross-Development, versions 2.0, 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Mixing calls to both the Visual C++ C Runtime Library and native Macintosh
functions that rely on time_t may yield incorrect results. Most of these
functions can be found in Time.h.
<P>
<P><h2>CAUSE</h2>
 
<P>
Both sets of libraries define time_t as the number of seconds elapsed since
epoch. However, Visual C++ defines epoch as 00:00:00 January 1, 1970 (GMT)
and stores the value as a signed 32-bit long. Native Macintosh functions
define epoch as 00:00:00 January 1, 1904 (GMT) and stores the value as an
unsigned 32-bit long.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
If the source to the call to a time function is accessible, then offset
the value by 2,082,844,800 or by the value computed from the call to the
Mac API LongDateToSeconds().
<P>
<PRE>   LongDateToSeconds(
       LongDateRec   lDate  // Jan 1, 1970 00:00:00
       LongDateTime* lSecs  // time_t equivalent returned
   )

</PRE>If the calling module's source is inaccessible (as in many third-party
libraries), create an ASLM (Apple Shared Library Manager) module containing
the third-party library linked with Apple's native CRT, and export
functions to call the third-party library routines. This will allow you to
use both CRT time functions without conflicts.
<P>
<P><h2>STATUS</h2>
 
<P>
time_t has been a standard for representing time among many platforms.
However, the epoch that this is based on has not been standardized. Apple's
standard is different from those of Microsoft and UNIX System V.
<P>
<P><h2>REFERENCES</h2>
 
<P>
Books Online
 
<PRE>Keywords          : CRTIss MacPrgIss kbinterop
Version           : 2.0 4.0
Platform          : MACINTOSH NT WINDOWS
Issue type        : kbprb
Solution Type     : Info_Provided</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 25, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
