

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Custom Build Generates LNK1104 for Project Build from IDE </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q149496">
<META NAME="KBModify" CONTENT="1997/09/19">
<META NAME="KBCreate" CONTENT="1996/04/03">
<META NAME="Keywords" CONTENT="vcbuglist400 vcfixlist500 VwbIss">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  A custom build produces a LNK1104 error when you are building project from Developer Studio.  WORKAROUND  There are two workarounds:   - Close the workspace after entering the Custom Build in Step 5 of the     Steps to Reproduce Problem  section of...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBJZ,QBWS,QAJN,QAA5,QBXS,QAP2,QBFY,QAK6,QAVX,QASR,QAR4,QAFI,QAG0,QAUF,QARW V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Custom Build Generates LNK1104 for Project Build from IDE</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q149496</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Developer Studio included with:
   - Microsoft Visual C++, 32-bit Edition, versions 4.0, 4.1, 4.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
A custom build produces a LNK1104 error when you are building project from
Developer Studio.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
There are two workarounds:

<UL><LI>Close the workspace after entering the Custom Build in Step 5 of the
   "Steps to Reproduce Problem" section of this article. Open the project
   again. The build will be successful this time.
<P>
   -or-

<LI>Go to an MS-DOS command prompt, and use NMAKE to build project.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be bug in the Microsoft products listed at
the beginning of this article. This bug was corrected in Visual C++ version
5.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Steps to Reproduce Problem</h3>
 

<OL><P><LI>Create two directories:
<P>
   \Junk
   \Junk\Src

<P><LI>Create a text file named \Junk\Src\Source.cs that has the following
   contents:
<P>
<PRE>   #include &lt;stdio.h&gt;

   void main( void )
   {
     printf("Custom build options has a bug\n");
   }

</PRE><P><LI>In Developer Studio, on the File menu, choose New, and then choose
   Project Workspace. Select the Console Application type in the New
   Project Workspace dialog box. Type a name (for example, test1), and
   then the project location should read:
<P>
   \Junk\Src\Test
<P>
   Create the project.

<P><LI>On the Insert menu, choose Files into project, and type ..\Source.cs for
   the file name. Then click OK. On the Insert menu, choose Files into
   project again. Type Source.c for the file name, and click OK. Developer
   Studio will say this file doesn't exist and ask if you want to add it as
   a reference; click Yes.

<P><LI>On the Build menu, choose Settings. Expand both the Debug and Release
   branches of Project Settings by clicking the plus sign (+) next to each
   project target. Select Source.cs under Debug and Control. Then click
   Source.cs under Release. Choose the Custom Build tab.
<P>
   Type "The proof is in the build" for the Description. Click in the
   first line of Build commands. Type the following (use macro menus if
   you wish):
<P>
<P><PRE>      copy ..\$(InputName).cs $(ProjDir)\$(InputName).c
</PRE><P>
   Click in the first line of Output files. Type the following:
<P>
<P><PRE>      $(ProjDir)\$(InputName).c
</PRE><P>
   Click OK.

<P><LI>Build the project. It will do the custom build step but it will not
   follow it up with a compile of the .c file and a linker error LNK1104
   (cannot open ".\Debug\Source.obj") will be generated. Note that choosing
   to Save all after setting the custom build option in Step 5 has the same
   effect.
<P>
</OL> 
<PRE>Keywords          : vcbuglist400 vcfixlist500 VwbIss
Version           : 4.0 4.1 4.2
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 19, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
