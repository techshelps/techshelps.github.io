

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: LNK4016: Unresolved External Symbol "__doserrno" </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q103714">
<META NAME="KBModify" CONTENT="1997/07/10">
<META NAME="KBCreate" CONTENT="1993/08/29">
<META NAME="Keywords" CONTENT="MfcMisc kbfasttip kbprb kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  Building a project with Visual C++ 1.0 generates the following unresolved link error for __doserrno:     LNK4016: unresolved external symbol  __doserrno   Under Visual C++ 2.0 and 2.1, the following error is generated:     LNK2001: unresolved exter...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBHQ,QBFY,QAAP,QA56,QA55,QAWM,QAB4,QABA,QBWP,QBVV,QAUQ,QAGI,QABO,QBV8,QBDM V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: LNK4016: Unresolved External Symbol "__doserrno"</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q103714</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00 2.00 2.10
WINDOWS NT
kbprg kbprb
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft Foundation Classes (MFC) included with:
   Microsoft Visual C++ 32-bit Edition, version 1.0, 2.0 and 2.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Building a project with Visual C++ 1.0 generates the following unresolved
link error for __doserrno:
<P>
<PRE>   LNK4016: unresolved external symbol "__doserrno"

</PRE>Under Visual C++ 2.0 and 2.1, the following error is generated:
<P>
<PRE>   LNK2001: unresolved external symbol "__doserrno"

</PRE>NOTE: This behavior does not occur in MFC 4.0 included with Visual C++
version 4.0 as MFC 4.0 supports multithreaded applications by default.
<P>
<P><h2>CAUSE</h2>
 
<P>
This error may be caused by compiling an application with /MT or /MD
(multithreaded options) and linking with the default versions of the
Microsoft Foundation Class (MFC) libraries. The default versions of the
MFC libraries were not built with the multithreaded C run-time library,
which results in the above error.
<P>
The MFC Libraries do not support calling MFC code from any thread other
than the primary thread. You can make calls to the MFC libraries or global
AFX helper functions only from the primary thread.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The README.WRI file (installed by default in the \MSVCNT\ directory)
describes how to remedy this problem. There are two possible solutions:

<UL><LI>Rebuild a custom version of the MFC libraries with /MT or /MD
   defined. For information on building libraries, see the section
   "Using the New Run-Time Libraries" on page xx-xxi in the "Class
   Library Reference" manual. (Note that the README.WRI incorrectly
   references this section as the "Class Library User's Guide.")
<P>
   For example, to build the library NAFXCWD.LIB, use following the
   command:
<P>
<P><PRE>      NMAKE DEBUG=1 TARGET=W OPT="/MT" CODEVIEW=1
</PRE><P>
   -or-

<LI>Rebuild the application using the single-threaded run-time library
   LIBC.LIB. To select the single-threaded run-time library, choose the
   Runtime category in the C/C++ Compiler Options dialog box.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 2.00 2.10 LNK2001<BR>
KBCategory: kbprg kbfasttip kbprb<BR>
KBSubcategory: MfcMisc<BR>
Keywords            : MfcMisc kbfasttip kbprb kbprg<BR>
Technology          : kbMfc<BR>
Version             : 1.00 2.00 2.10<BR>
Platform            : NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
