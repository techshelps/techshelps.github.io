

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Minimal Rebuild Fails on Access Specifier Change for Enum </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150000">
<META NAME="KBModify" CONTENT="1997/09/19">
<META NAME="KBCreate" CONTENT="1996/04/17">
<META NAME="Keywords" CONTENT="CPPIss vcbuglist400 vcfixlist500 kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  Minimal Rebuild fails to detect the significance of access specifier changes for enums that are declared inside a class. For example, if  the public definition of an enum in a class in a header file is changed to private, minimal rebuild does not s...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVW,QAVX,QAB4,QBW7,QAI5,QBFY,QABO,QAAP,QA1S,QAR4,QBWG,QAKP,QA0K,QBJZ,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Minimal Rebuild Fails on Access Specifier Change for Enum</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150000</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE) included with:
   - Microsoft Visual C++, 32-bit Edition, versions 4.0, 4.1, 4.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Minimal Rebuild fails to detect the significance of access specifier
changes for enums that are declared inside a class. For example, if  the
public definition of an enum in a class in a header file is changed to
private, minimal rebuild does not see the change as significant, and files
that depend on the header and the definition of the enum are not rebuilt.
The following message is displayed:
<P>
<PRE>   Generating Code...
   Skipping... (no relevant changes detected)

</PRE><h2>RESOLUTION</h2>
 
<P>
Doing a rebuild all or disabling minimal rebuild forces a full compile and
correctly evaluates changes to the access specification of the enum. For
details, please see the "More Information" section of this article.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article. This bug was corrected in Visual C++
version 5.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Steps to Recreate Problem</h3>
 

<OL><P><LI>Create a default MFC application. On the File menu, click New, and then
   click Project Workspace. Name it Test, and select the default for all of
   the dialog boxes that follow.

<P><LI>In the main header file for the application, before the first
   public: in the application's class declaration, add the following enum
   definitions:
<P>
   class CMyTestApp : public CWinApp
   {
<PRE>   public:                //add these 3 lines
       enum e1 {E1,E2};   //to the header file Test.h
       enum {UE1, UE2};   //
    public:
       CMyTestApp();

</PRE><P><LI>In the constructor of CAboutDlg, add references to the enums:
<P>
   CAboutDlg::CAboutDlg() : CDialog(CAboutDlg::IDD)
   {
<P><PRE>       //{{AFX_DATA_INIT(CAboutDlg)
       //}}AFX_DATA_INIT
<PRE></PRE>       int i= CMy3209App::UE1;             //Add these 2 lines
       CMy3209App::e1 e = CMy3209App::E2;  //to Test.cpp
   }

</PRE><P><LI>Check to ensure that minimal rebuild is enabled. On the Build menu,
   click Settings, and then click C/C++ and category Customize. Build the
   application.

<P><LI>Comment out the first public: in the application's class declaration:
<P>
<PRE>     // public:                //add these 3 lines

</PRE><P><LI>Build the appplication again (not rebuild all). There are no error
   messages.

<P><LI>Rebuild All. The following errors are generated:
<P>
   Test.cpp(129) : error C2248: 'UE1' : cannot access private
<PRE>          enumerator declared in class 'CMyTestApp'
   Test.cpp(130) : error C2248: 'e1' : cannot access private enum
          declared in class 'CMyTestApp'
   Test.cpp(130) : error C2248: 'E2' : cannot access private enumerator
          declared in class 'CMyTestApp'
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 10.00 10.10 10.20<BR>
Keywords          : CPPIss vcbuglist400 vcfixlist500 kbprg<BR>
Version           : 4.0 4.1 4.2<BR>
Platform          : NT WINDOWS<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 19, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
