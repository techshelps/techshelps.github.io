

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BUG: GP Fault in SHW0.DLL When Starting to Debug </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q114079">
<META NAME="KBModify" CONTENT="1997/07/18">
<META NAME="KBCreate" CONTENT="1994/04/24">
<META NAME="Keywords" CONTENT="kb16bitonly TlsMisc kbbuglist kbfixlist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When starting an application for debugging in CodeView for Windows or in the Visual WorkBench debugger, a General Protection Fault occurs in SHW0.DLL at 0001:83BA.  CAUSE =====  This is actually the result of two bugs, one in the Microsoft C/C++ co...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBFY,QAOT,QDL9,QBWQ,QBWO,QBWN,QA56,QA55,QBKN,QAKP,QAJ6,QDIX,QANY,QA6A,QAYY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: GP Fault in SHW0.DLL When Starting to Debug</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q114079</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00 1.50
WINDOWS
kbtool kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE), included with:
   Microsoft Visual C++ for Windows version 1.0

<LI>The Visual Workbench, included with:
   Microsoft Visual C++ for Windows, versions 1.0 and 1.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When starting an application for debugging in CodeView for Windows or
in the Visual WorkBench debugger, a General Protection Fault occurs
in SHW0.DLL at 0001:83BA.
<P>
<P><h2>CAUSE</h2>
 
<P>
This is actually the result of two bugs, one in the Microsoft C/C++
compiler, version 8.0, and one in the debuggers (CodeView for Windows
and the Visual WorkBench debugger).
<P>
The compiler bug occurs when using the #pragma code_seg preprocessor
directive to specify more than one segment in a single source file.
C/C++ for MS-DOS version 8.0 will generate incorrect CodeView line-
number information when the object module is compiled with the
optimizing compiler (/f-). The sample code shown below illustrates
this problem.
<P>
The problem with the debuggers occurs when an application, either an
executable or a dynamic link library, has greater than 64K of type
information. CodeView for Windows versions 4.0, 4.01, 4.05, and 4.10
and the Visual Workbench debugger versions 1.0 and 1.5 will cause a
General Protection Fault when loading the types table.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Since this is a two-part problem, it requires a two-part resolution. The
proper line number information can be generated by using the fast compiler.
Use of the fast compiler can be forced by specifying the /f compiler
switch. The debugger memory allocation bug can be worked around by reducing
the amount of type information. Microsoft Knowledge Base article <B><A HREF="../UTILITIES/Q112335.htm">Q112335</A></B>
deals with a similar problem which causes CVPack to generate a CK4009
error. This article also details methods for reducing the amount of type
information.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products
listed at the beginning of this article. The compiler problem was corrected
in C/C++ Compiler version 8.0c, which is included with Visual C++ for
Windows, version 1.5. Microsoft is researching the debugger problem and
will post new information here in the Microsoft Knowledge Base as it
becomes available.
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>/* Compile options needed: /c /Od /f- /AL /Zd
*/

#include &lt;stdio.h&gt;

</PRE>#pragma code_seg("test_seg")
<P>
<PRE>void func(void)
</PRE>{
<PRE>    printf("This is func().\n");
</PRE>}
<P>
#pragma code_seg("test_seg1")
<P>
<PRE>void func1(void)
</PRE>{
<PRE>    _asm nop
    printf("This is func1().\n");
</PRE>}
<P>
#pragma code_seg("test_seg2")
<P>
<PRE>void func2(void)
</PRE>{
<PRE>    printf("This is func2().\n");
</PRE>}
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 8.00 1.00 1.50 4.00 4.01 4.05 4.10<BR>
KBCategory: kbtool kbbuglist kbfixlist<BR>
KBSubcategory: TlsMisc<BR>
Keywords            : kb16bitonly TlsMisc kbbuglist kbfixlist kbtool<BR>
Version             : 1.00 1.50<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
