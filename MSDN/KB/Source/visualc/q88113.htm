

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INFO: Compile and Link Requirements for MFC Applications </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q88113 ">
<META NAME="KBModify" CONTENT="1997/10/10">
<META NAME="KBCreate" CONTENT="1992/08/18">
<META NAME="Keywords" CONTENT="MfcMisc kbfasttip">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The Microsoft Foundation Classes (MFC) samples provide an excellent starting point for learning basic, intermediate, and advanced MFC application programming techniques. Although these samples are easily built in the development environment with wh...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBFY,QBHQ,QDL9,QBWQ,QBWO,QBWN,QBWP,QAJH,QAH4,QBXT,QA56,QA55,QAE2,QBXA,QALM V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INFO: Compile and Link Requirements for MFC Applications</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q88113 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Microsoft Foundation Classes (MFC) included with:
<P>
<P><PRE>    - Microsoft C/C++ version 7.0
    - Microsoft Visual C++ for Windows, versions 1.0, 1.5, 1.51, 1.52
    - Microsoft Visual C++ 32-bit Edition, versions 1.0, 2.0, 2.1, 4.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The Microsoft Foundation Classes (MFC) samples provide an excellent
starting point for learning basic, intermediate, and advanced MFC
application programming techniques. Although these samples are easily built
in the development environment with which they are shipped, the general
requirements for building MFC applications are not clearly outlined in the
documentation of the products listed above. This article elaborates on the
process.
<P>
The requirements for compiling and linking MFC applications are similar to
those of their non-MFC counterparts. In addition to the usual includes and
libraries, MFC programs must also include an MFC header, and link with an
appropriate MFC library. MFC programs may require that certain symbols be
defined.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When building MFC applications, make sure #include "stdafx.h" is the first
line of the .cpp file. This file includes most of the classes needed for
MFC Windows-based applications. It also includes AFX.H, which contains
declarations for CObject and other basic classes, data types, and macros.
The AFX.H file does not include the additional Windows and Windows NT
specific classes needed for these types of applications, and is often used
instead of AFXWIN.H for MS-DOS programs.
<P>
NOTE: For Windows NT console applications, you must determine whether you
need to include AFXWIN.H, because console applications can create windows
as well as Windows programs.
<P>
You may also need to include AFXCOLL.H, AFXDLG.H, or one of the other
headers from the ...\MFC\INCLUDE directory if you are using the MFC
Collection classes, Common Dialog classes, or other special MFC classes.
<P>
In addition, you must specify an MFC library when linking your application.
The MFC library, for MS-DOS and Windows, must match the memory model of the
program (that is, small, medium, compact, or large).
<P>
The following describes the naming conventions of the Windows NT MFC
libraries included with Visual C++ 32-bit Edition, versions 1.0 through
2.x:
<P>
<PRE>   NAFX {C|D} {W|R} [D]

   {C|D}     = C application or DLL
   {W|R}     = Windows or Console
   [D]       = Debugging and possibly CodeView information

</PRE>The following describes the naming conventions of the Win32 MFC libraries
included with Visual C++ 32-bit Edition, versions 4.0:
<P>
<PRE>   {N|U} AFXCW [D]

   {N|U}     = ANSI (N) or Unicode (U)
   [D]       = Debugging and possibly CodeView information

</PRE>Although the libraries necessary for building the sample programs are
provided, additional variants must be built if required. This process is
explained in the README.TXT file contained by default in the ...\MFC\SRC
directory.
<P>
In addition to the library variants above, Visual C++ contains DLL versions
of the MFC classes. These are explained in MFC Technote #33.
<P>
The following command lines build a medium model 16-bit Windows-based
application:
<P>
Debug:
<P>
<PRE>   cl /c /GA /GEs /Zp /Od /Zi /AM /D_DEBUG hello.cpp
   rc /r hello.rc
   link /NOD /ALIGN:16 /CO hello,,,mafxcwd mlibcew libw,hello.def
   rc hello.res

</PRE>Release:
<P>
<PRE>   cl /c /GA /GEs /Zp /AM hello.cpp
   rc /r hello.rc
   link /NOD /ALIGN:16 hello,,,mafxcw mlibcew libw,hello.def
   rc hello.res

</PRE>The /NOD link option is recommended to prevent accidentally linking with an
MS-DOS version of the C run-time library.
<P>
The following command lines build a Win32-based application:
<P>
Debug:
<P>
<PRE>   cl /c /Od /Zi /D_DEBUG /D_X86_ /D_WINDOWS hello.cpp
   rc /r hello.rc
   link hello.obj hello.res nafxcwd.lib gdi32.lib shell32.lib
        advapi32.lib comdlg32.lib

</PRE>Release:
<P>
<PRE>   cl /c /D_X86_ /D_WINDOWS hello.cpp
   rc /r hello.rc
   link hello.obj hello.res nafxcw.lib gdi32.lib shell32.lib
        advapi32.lib comdlg32.lib

</PRE>In Visual C++ 4.0, _X86_ has been replace by _M_IX86. More importantly,
with MFC version 3.0 and later (Visual C++ 2.0 and later), it is no longer
necessary to manually specify the version of the MFC library. Instead, the
included MFC header files automatically determine the correct version of
the MFC library. For more information, see the "Library Versions" topic of
"Programming with MFC: Encyclopedia" in the Visual C++ 4.0 Books Online.
<P>
The MFC libraries should be specified as the first library on your link
line for all applications.
<P>
Notice that if you link with a debug variant of an MFC library ("D"
suffix), you must also define _DEBUG during compilation. For more
information on this subject, query on the following words in the Microsoft
Knowledge Base:
<P>
<PRE>   mfc and safxcrd and _debug and libraries

</PRE>Although the compile and link lines must be modified appropriately for MS-
DOS-based or Win32-based console applications, the same guidelines apply.
The Resource Compiler can be used with console applications, but doesn't
have to be. Also, _CONSOLE must be defined instead of _WINDOWS  (This is
not necessary with Visual C++ 4.0.) With MS-DOS programs, the Resource
Compiler is not used, and _DOS must be defined instead of _WINDOWS.
<P>
In the Windows example above, the compiler option /GA defines the constant
_WINDOWS; however, if other compiler options are used, _WINDOWS may need to
be defined in your code. (Including the file AFXWIN.H in your application
will cause _WINDOWS to be defined.)
 
<PRE>Keywords          : MfcMisc kbfasttip
Technology        : kbMfc
Version           : MS-DOS:7.0;WINDOWS:1.0,1.5,1.51,1.52;WINDOWS NT:1.0,2.0,2.1,4.0
Platform          : MS-DOS NT WINDOWS
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
