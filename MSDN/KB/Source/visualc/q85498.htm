

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: /Tp and /Tc Show Unexpected Behavior with Wildcards </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q85498 ">
<META NAME="KBModify" CONTENT="1997/08/12">
<META NAME="KBCreate" CONTENT="1992/06/11">
<META NAME="Keywords" CONTENT="CLIss kbfasttip">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When compiling multiple .CPP or .CXX files using a wildcard syntax and the /Tc command line option, for example     cl /Tc *.cpp  the C compiler is invoked only for the first source file matching the wildcard specification. For all subsequent files...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBFY,QAOT,QASH,QBD7,QBV8,QA2S,QAY5,QALQ,QBXT,QA56,QA55,QA5V,QAHH,QAK6,QAIB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: /Tp and /Tc Show Unexpected Behavior with Wildcards</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 12, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q85498 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE), included with:
   - Microsoft C/C++ for MS-DOS, version 7.0
   - Microsoft Visual C++ for Windows, versions 1.0, 1.5
   - Microsoft Visual C++ 32-bit Edition, versions 1.0, 2.0, 2.1, 4.0, 4.1,
<P><PRE>     4.2, 5.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When compiling multiple .CPP or .CXX files using a wildcard syntax and the
/Tc command line option, for example
<P>
<PRE>   cl /Tc *.cpp

</PRE>the C compiler is invoked only for the first source file matching the
wildcard specification. For all subsequent files, the C++ compiler is
invoked. The inverse is also true. That is, when compiling multiple .C
files using a wildcard syntax and the /Tp command line option, the C++
compiler is invoked only for the first file; for all subsequent files, the
C compiler is invoked.
<P>
<P><h2>CAUSE</h2>
 
<P>
This behavior is by design. As stated in the online and hard copy
documentation for Microsoft C/C++ version 7.0 and all versions of Microsoft
Visual C++ 16- and 32-bit Editions, the following is the correct syntax for
the /Tc and /Tp command line options:
<P>
<PRE>   /Tc&lt;filename&gt;   -or-   /Tc &lt;filename&gt;
   /Tp&lt;filename&gt;   -or-   /Tp &lt;filename&gt;

</PRE>Each option refers to only one source file. Therefore, the first file
matching the wildcard specification will be compiled as directed by the
corresponding /T? option. All other files matching the wildcard will be
compiled in accordance with their extension. (The C compiler is invoked for
.C files, the C++ compiler for .CPP or .CXX files.)
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following are two possible workarounds for the potential
inconvenience presented by this behavior:

<UL><LI>Use a makefile to control compilations involving the /Tc or /Tp
   switch. Instead of using wildcards, list the files as dependents
   of the respective .OBJ files. This offers two advantages over
   using wildcards:
<P>
<P><PRE>    - Only the files that have changed with respect to their .OBJ
      are recompiled.
</PRE><P>
<P><PRE>    - The proper compiler is invoked for the file to be compiled.
</PRE><P>
   -or-

<LI>Rename all files in question such that they have the expected
   extensions. For example, rename SRC.CPP to SRC.C if you want the
   C compiler to be invoked on the source.
<P>
<P>
</UL>The sample code below is a makefile that could be used to replace
the wildcard command-line compilation:
<P>
<P><h3>Sample Code</h3>
 
<P>
If you wish to compile file1.c, file2.c and file3.c with the C++
compiler and link them to create exefile.exe, use the following
makefile:
<P>
<PRE>   .c.obj:
      cl /c /Tp $&lt;

   exefile.exe : file1.obj file2.obj file3.obj
      link $**, exefile.exe;
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 8.00 8.00c 9.00<BR>
Keywords          : CLIss kbfasttip<BR>
Version           : MS-DOS:7.0;WINDOWS:1.0,1.5;WINDOWS  NT:1.0,2.0,2.1,4.0,4.1,4.2,5.0<BR>
Platform          : MS-DOS NT WINDOWS<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 12, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
