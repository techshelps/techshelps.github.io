

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: F1001 ctypes.c:1.21, Line 1655: ISHFT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q87981 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/08/13">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  Using Microsoft FORTRAN compiler version 4.0, 4.01, 4.1, 5.0, or 5.1 under MS-DOS or version 4.1, 5.0, 5.1 under OS/2 to compile code that contains the intrinsic function ISHFT in a calculation that results in the smallest representable negative in...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAOT,QAAP,QAB4,QAH4,QBFY,QAJZ,QAKP,QBXT,QBAD,QA5V,QAIB,QA7Y,QA4Q,QAR4,QAJ9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: F1001 ctypes.c:1.21, Line 1655: ISHFT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q87981 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.10 5.00 5.10 | 4.10 5.00 5.10
<PRE>MS-DOS                   | OS/2
</PRE>kbtool kbfixlist kbbuglist kberrmsg kbcode
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.01, 4.1, 5.0, and 5.1
<LI>Microsoft FORTRAN for OS/2, versions 4.1, 5.0, and 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Using Microsoft FORTRAN compiler version 4.0, 4.01, 4.1, 5.0, or 5.1 under
MS-DOS or version 4.1, 5.0, 5.1 under OS/2 to compile code that contains
the intrinsic function ISHFT in a calculation that results in the smallest
representable negative integer may cause the compiler to hang the machine
under MS-DOS or to generate SYS1942 error TRAP 000C under OS/2.
<P>
Using the compiler options /Zi or /Od (both at the same time or separately)
may cause the following errors to be generated:

<UL><LI>Version 5.1: options /Zi or /Od or both
<P>
   Under MS-DOS:
<P>
<P><PRE>      fatal error F1001: Internal Compiler Error
<PRE></PRE>          (compiler file '@(#)ctypes.c:1.12', line 1655)

   Under OS/2:

      SYS1943, TRAP 000D


</PRE><LI>Version 5.0: options /Zi or /Od or both
<P>
   Under MS-DOS and OS/2:
<P>
<P><PRE>     fatal error F1001: Internal Compiler Error
<PRE></PRE>         (compiler file '@(#)ctypes.c:1.11', line 1657)


</PRE><LI>Version 4.1: options /Zi and /Od
<P>
   Under MS-DOS:
<P>
<P><PRE>     fatal error F1001: Internal Compiler Error
<PRE></PRE>         (compiler file '@(#)ctypes.c:1.89', line 1601)

     Run-time R6001
     -null pointer assignment

   Under OS/2:

     protection violation, SYS1943, TRAP 000D

</PRE><LI>Version 4.1: options /Zi or /Od separately
<P>
   Under MS-DOS: hangs machine
<P>
   Under OS/2 using /Zi:
<P>
<P><PRE>     SYS1942,TRAP 000C
</PRE><P>
   Under OS/2 using /Od:
<P>
<P><PRE>     SYS1943, TRAP 000D
</PRE>
<LI>FORTRAN versions 4.0 and 4.01 under MS-DOS hang the machine.
<P>
</UL><h2>CAUSE</h2>
 
<P>
Because the expression involves constants and not variables, the compiler
attempts to calculate the expression at compile time. The compiler is
incorrectly dealing with the special case of the smallest representable
integer value. An internal compiler overflow results in the errors.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Assign the value of the constants to variables and use variables in the
expression.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0, 4.01,
4.1, 5.0 and 5.1. We are researching this problem and will post new
information here as it becomes available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following code can be used to reproduce the problem:
<P>
<P><h3>Sample Code #1</h3>
 
<P>
<PRE>        integer*4 ivar1
        ivar1=ISHFT(1,31)+1  ! ISHFT(1,31)=-2147483648 causes
                             ! compiler overflow error
        stop
        end

</PRE>The following code demonstrates a solution:
<P>
<P><h3>Sample Code #2</h3>
 
<P>
<PRE>        integer*4 ivar1, ivar2, ivar3
        ivar2=1
        ivar3=31
        ivar1=ISHFT(ivar2,ivar3)+1
        stop
        end
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.10 5.00 5.10<BR>
KBCategory: kbtool kbfixlist kbbuglist kberrmsg<BR>
KBSubcategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
