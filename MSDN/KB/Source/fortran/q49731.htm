

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Logical IF in GOTO Loop Produces Unexpected Results </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q49731 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1989/10/11">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  In an application compiled with Microsoft FORTRAN, a logical IF statement in a GOTO loop produces incorrect results.  CAUSE =====  The compiler incorrectly optimized the IF statement in the GOTO loop.  RESOLUTION  To address this problem, perform o...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QAA7,QAPN,QAMV,QAR4,QDOL,QAB9,QAAP,QABB,QAKP,QA2B,QAL3,QAOX,QAPF,QATA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Logical IF in GOTO Loop Produces Unexpected Results</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q49731 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.10 5.00 5.10 | 4.10 5.00 5.10
<PRE>MS-DOS              | OS/2
</PRE>kbtool kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.1, 5.0, 5.1
<LI>Microsoft FORTRAN for OS/2, versions 4.1, 5.0, 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In an application compiled with Microsoft FORTRAN, a logical IF statement
in a GOTO loop produces incorrect results.
<P>
<P><h2>CAUSE</h2>
 
<P>
The compiler incorrectly optimized the IF statement in the GOTO loop.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To address this problem, perform one of the following two steps:

<UL><LI>Specify the -Od compiler option switch to disable optimizations.

<LI>If optimization is required, modify the source code to change
   the logical IF statement to a standard IF statement. For
   example, change the following code:
<P>
<PRE>      if (j .GE. 3) GOTO 3100    ! logical IF statement

   to the following code:

      if (j .GE. 3) then         ! standard IF statement
         GOTO 3100
      endif

</PRE></UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0, 4.1,
5.0, and 5.1. This problem was corrected in FORTRAN PowerStation, version
1.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
As shown in the code sample below, the logical IF and GOTO loop
compiles and runs without errors but it does not execute the correct
lines of code. Because the GOTO 3100 statement in the logical IF
statement is ignored, the program prints "at 3200, loop failed."
<P>
To address this problem, compile the application without
optimizations. The logical IF statement works correctly and the
program prints "at 3100, loop worked".
<P>
<P><h3>Sample Code</h3>
 
<P>
C Compile options needed: See above
<P>
<PRE>      J = 0
</PRE>3190  CONTINUE
<PRE>      IF (J .GE. 3) GOTO 3100       ! The logical IF
      J = J + 1
      GOTO 3190                     ! The Goto loop
</PRE>3200  CONTINUE
<PRE>      WRITE (*, *) 'at 3200, loop failed'
      STOP
</PRE>3100  CONTINUE
<PRE>      WRITE (*, *) 'at 3100, loop worked'
      STOP
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.10 5.00 5.10 label run run-time<BR>
buglist4.00 buglist4.10 buglist5.00 buglist5.10 fixlist1.00<BR>
KBCategory: kbtool kbbuglist kbfixlist<BR>
KBSubCategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
