

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BUG: F1001: omf.c:160', Line 185; Huge Array with /Fa or /Fc </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q70653 ">
<META NAME="KBModify" CONTENT="1995/07/11">
<META NAME="KBCreate" CONTENT="1991/03/26">
<META NAME="Keywords" CONTENT="kbtool kbbuglist kberrmsg">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  In Microsoft FORTRAN versions 4.0, 4.01, 4.1, 5.0 and 5.1, when compiling a program that contains an array over 2,147,483,648 bytes long under MS-DOS or OS/2 with the /Fa or /Fc option, the third pass of the compiler generates the following error: ...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAAP,QAH4,QAB4,QAKP,QAH7,QAH6,QAD7,QBVV,QAOT,QABN,QABO,QBXT,QBFY,QA5V,QAIB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: F1001: omf.c:160', Line 185; Huge Array with /Fa or /Fc</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 11, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q70653 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.01, 4.1, 5.0, and 5.1
<LI>Microsoft FORTRAN for OS/2, versions 4.1, 5.0, and 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In Microsoft FORTRAN versions 4.0, 4.01, 4.1, 5.0 and 5.1, when
compiling a program that contains an array over 2,147,483,648 bytes
long under MS-DOS or OS/2 with the /Fa or /Fc option, the third pass
of the compiler generates the following error:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
   (compiler file '@(#)omf.c:1.60', line 185)
   Contact Microsoft Technical Support

</PRE>If the /Fa or /Fc option is not included on compile, the object
module, when linked, will generate an invalid executable that
incorrectly reflects the minimum load size, as indicated by the EXEMOD
utility.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft FORTRAN
versions 4.x and 5.x for MS-DOS and OS/2.
<P>
This is not a problem in FORTRAN PowerStation, because [huge] is not
supported.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Note: An array this large cannot be declared in a code module compiled
with Microsoft FORTRAN because of the linker limit of 244, 64K
segments per module. (The limit stated in the manual is 255 segments
per module, but 11 segments are preassigned.) Thus, even under OS/2,
the largest possible data item is 64K times 244 or 15,990,784 bytes.
If the internal compiler error does not occur, the following linker
error should be generated:
<P>
<PRE>   fatal error L1047: too many group, segment, and class names in
                      one module

</PRE>The following code reproduces the problem:
<P>
<PRE>       integer*2 n [huge] (2000000000)
       end

</PRE>Compiling a program with an array dimensioned to 200,000,000 (one less
zero) generates the following errors during the third pass of the
compiler:
<P>
<PRE>   fatal error F1002:  out of heap space
   run-time error R6000
   - stack overflow

</PRE>The options /Fa or /Fc are not needed to generate this error.
<P>
Compiling a program with an array dimensioned to 20,000,000 (two less
zeros than the original array) generates the following error during
link:
<P>
<PRE>   fatal error L1047: too many group, segment, and class names in
                      one module
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00 5.10<BR>
KBCategory: kbtool kbbuglist kberrmsg<BR>
KBSubcategory: FLIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 11, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
