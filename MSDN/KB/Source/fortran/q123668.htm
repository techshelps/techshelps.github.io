

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: LNK4022 &amp; LNK4006 Warnings When Build PowerStation 32 DLL </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q123668">
<META NAME="KBModify" CONTENT="1995/12/09">
<META NAME="KBCreate" CONTENT="1994/12/06">
<META NAME="Keywords" CONTENT="kbprg kbcode kbprb">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  The following errors are generated when building a DLL using a module definition (.DEF) file that does not use the fully decorated name of a function named testing:     warning LNK4022: cannot find unique match for symbol  TESTING     warning LNK40...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVW,QAVX,QA3P,QAB4,QAUJ,QAH4,QAAP,QAK1,QBV8,QAE2,QDKS,QAB9,QBXA,QBWP,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: LNK4022 &amp; LNK4006 Warnings When Build PowerStation 32 DLL</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 9, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q123668</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN PowerStation 32 for Windows NT, versions 1.0 and
   4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The following errors are generated when building a DLL using a module
definition (.DEF) file that does not use the fully decorated name of a
function named testing:
<P>
<PRE>   warning LNK4022: cannot find unique match for symbol "TESTING"
   warning LNK4006: _TESTING already defined in test.obj; second
      definition ignored
   warning LNK4006: _TESTING@4 already defined in test.obj; second
      definition ignored
   LINK : error LNK1141: failure during build of exports file

</PRE><h2>RESOLUTION</h2>
 
<P>
Use the fully decorated name in the EXPORTS section of the DEF file or the
LINK command line.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
There may be times when it is desirable not to modify the Fortran source
code to add the DLLEXPORT attribute to a function. For example, you might
want to maintain a common code base for several computer platforms. In this
case, the exports must be identified in the EXPORTS section of a .DEF file
or the LINK command line. In either case, if the name specified is not the
fully decorated name, the errors described above will be generated by the
linker.
<P>
<P><h3>Steps to Reproduce Problem</h3>
 

<OL><P><LI>Use the sample code listed at the end of this article and this
   definitions file:
<P>
   library test
   EXPORTS TESTING

<P><LI>Use the following LINK command to generate the error messages:
<P>
   link test.obj /dll /def:test.def msfrt.lib msvcrt.lib
<P>
</OL>NOTE: The second LNK4006 error generated by the linker gives the correct
fully decorated name "_TESTING@4". The @4 in the name indicates the number
of bytes in the function parameters.
<P>
<P><h3>Example Resolution</h3>
 
<P>
To successfully link and produce a DLL, include the fully decorated name in
the .DEF file:
<P>
<PRE>   library test
   EXPORTS _TESTING@4

</PRE></OL>or in the EXPORT LINK option:
<P>
<PRE>   link test.obj /dll /export:_TESTING@4 msfrt.lib msvcrt.lib

</PRE><h3>Sample Code</h3>
 
<P>
C Compile options needed: none
<P>
<PRE>        subroutine testing(i)
        integer i
        i = i*2
        end
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 4.00<BR>
KBCategory: kbprg kbcode kbprb<BR>
KBSubcategory: FORTLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 9, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
