

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Incorrect Results Using a COMPLEX Array in a NAMELIST </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q71186 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1991/04/09">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  An application that uses a NAMELIST-directed READ statement to initialize an array of COMPLEX values generates incorrect results.  CAUSE =====  This error occurs when the data in the input file has one element per line.  RESOLUTION  To work around ...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAYY,QDKW,QAAP,QAR4,QAH4,QAVX,QAVW,QABE,QADX,QAKP,QBXT,QA5V,QAL3,QAIB,QAP2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Incorrect Results Using a COMPLEX Array in a NAMELIST</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q71186 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.00   | 5.00
MS-DOS | OS/2
kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS and OS/2, version 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An application that uses a NAMELIST-directed READ statement to
initialize an array of COMPLEX values generates incorrect results.
<P>
<P><h2>CAUSE</h2>
 
<P>
This error occurs when the data in the input file has one element
per line.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, modify the data in the input file to
place the data for all array elements on one line.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN version 5.0
for MS-DOS and OS/2. This problem was corrected in FORTRAN version
5.1 for MS-DOS and OS/2.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following code example reads the NAMELIST data file TEST.DAT.
<P>
<P><h3>Sample Code</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      COMPLEX MYDATA(5)
      NAMELIST /XX/ MYDATA
      OPEN (1, FILE = 'TEST.DAT')
      READ (1, XX)
      WRITE (*, *) MYDATA
      END

</PRE><h3>NAMELIST Input File #1</h3>
 
<P>
&amp;xx
mydata(1) = (1.0, 2.0)
mydata(2) = (3.0, 4.0)
mydata(3) = (5.0, 6.0)
mydata(4) = (7.0, 8.0)
mydata(5) = (9.0, 10.0)
/
<P>
Using NAMELIST Input File #1, the code example produces the following
output.
<P>
<PRE>              (1.000000,3.000000)               (5.000000,7.000000)
             (9.000000,10.000000)       (0.000000E+00,0.000000E+00)
      (0.000000E+00,0.000000E+00)

</PRE>The output should be as follows.
<P>
<PRE>              (1.000000,2.000000)               (3.000000,4.000000)
              (5.000000,6.000000)               (7.000000,8.000000)
             (9.000000,10.000000)

</PRE>To work around this problem, rearrange the data in the input file to
place all the elements on one line. The following input file
demonstrates this solution.
<P>
<P><h3>NAMELIST Input File #2</h3>
 
<P>
&amp;xx
mydata = (1.0, 2.0) (3.0, 4.0) (5.0, 6.0) (7.0, 8.0) (9.0, 10.0)
/
<P>
Note: A data file can contain repeat factors if the data contains more
than one element with the same value. The following input file
demonstrates this technique.
<P>
<P><h3>NAMELIST Input File #3</h3>
 
<P>
&amp;xx
mydata = 2*(1.0, 2.0) (3.0, 4.0) (5.0, 6.0)
/
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00 buglist5.00 fixlist5.10<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubCategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
