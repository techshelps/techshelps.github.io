

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: IRP Directive Has Single Line Limit of 120 Characters </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q67788 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1990/12/15">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  In the Microsoft Macro Assembler (MASM) versions 5.1 and 5.1a, the IRP (instruction repeat) directive has a single line limit of 120 characters. MASM version 6.0 has no limit. The code example below shows a macro with an IRP that has 125 characters...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABN,QAH4,QBXT,QA5V,QAIB,QAB4,QAJB,QAR4,QAJQ,QAAP,QAHE,QAWN,QAKP,QACR,QAPF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: IRP Directive Has Single Line Limit of 120 Characters</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q67788 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10 5.10a | 5.10 5.10a
<PRE>MS-DOS     | OS/2
</PRE>kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS and OS/2, versions 5.1 and
   5.1a
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In the Microsoft Macro Assembler (MASM) versions 5.1 and 5.1a, the IRP
(instruction repeat) directive has a single line limit of 120
characters. MASM version 6.0 has no limit. The code example below
shows a macro with an IRP that has 125 characters. The result of this
program with MASM 5.1 or 5.1a is an error message that states:
<P>
<PRE>   End of file encountered on input file
   Number of open conditionals:14
   End of file encountered on input file

</PRE><h2>CAUSE</h2>
 
<P>
This error occurs because the assembler is looking for a closing
bracket (&gt;), but the line is over the limit of 120 characters. As a
result, the assembler accepts the rest of the code to be part of the
IRP parameters. By shortening the final parameter to be within the
limit (change TP$_EOS to TP), the bracket is read correctly and the
remainder of the program is assembled with no errors.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in MASM versions 5.1 and
5.1a. This problem was corrected in MASM version 6.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Note: In this example, the IRP argument list is stated in three lines;
however, it should be all on the same line to cause the error. The
120-character limit is only on the same line. A workaround is to
continue the argument on the next line as seen below.
<P>
<P><h3>Sample Code</h3>
 
<P>
; Assemble options needed: none
<P>
<PRE>$tran   macro   keyword
   irpc TP$_DUMMY, &lt;keyword&gt;
      ifidn &lt;&amp;TP$_DUMMY&gt;, &lt;T&gt;
         irp TP$_DUMMY2, &lt;TP$_ANY,TP$_ALPHA,TP$_DIGIT,
                         TP$_STRING,TP$_SYMBOL,TP$_BLANK,TP$_DECIMAL,
                         TP$_OCTAL,TP$_HEX,TP$_LAMBDA,TP$_EOS&gt;
            %out TP$_DUMMY2
         endm
      endif
   endm
</PRE>endm
<P>
<PRE>   $tran     if_anything_cmd
end
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.10 5.10a buglist5.10 buglist5.10a fixlist6.00<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubCategory: MLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
