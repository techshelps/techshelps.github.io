

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>OFFSET Operator Is Segment Relative </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q30517 ">
<META NAME="KBModify" CONTENT="1995/01/23">
<META NAME="KBCreate" CONTENT="1988/05/18">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  In Microsoft Macro Assembler version 5.10 The OFFSET operator is segment relative. The GROUP operator must be used to make the OFFSET operator group relative. In Microsoft Macro Assembler version 6.00 The OFFSET operator is group relative by defaul...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABO,QAEF,QBDA,QANY,QAKM,QAIJ,QAH4,QACI,QA9N,QA63,QATS,QASR,QANJ,QBV8,QAYA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>OFFSET Operator Is Segment Relative</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 23, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q30517 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 5.1 and 6.0
<LI>Microsoft Macro Assembler for OS/2, version 6.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In Microsoft Macro Assembler version 5.10 The OFFSET operator is segment
relative. The GROUP operator must be used to make the OFFSET operator group
relative. In Microsoft Macro Assembler version 6.00 The OFFSET operator is
group relative by default. This default can be over ridden with the M510
and OFFSET: options.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following is an example of using the OFFSET operator:
<P>
group_1 GROUP seg_1,seg_2,seg_3
<P>
seg_1 SEGMENT word public 'data'
assume ds:group_1
<PRE>        dw  0
item1   dw  20 dup(0)

</PRE>seg_1 ends
<P>
seg_2 SEGMENT word public 'code'
assume cs:group_1
<P>
<PRE>func1   PROC    NEAR
        mov ax, offset item1
        lea ax, item1
        mov ax, offset group_1:item1
        mov ax, offset item2
        lea ax, item2
        mov ax, offset group_1:item2

func1   ENDP

</PRE>seg_2  ENDS
<P>
seg_3  SEGMENT  word  public  'data2'
assume ds:group_1
<PRE>item2   dw  0
</PRE>seg_3  ENDS
<P>
In MASM 5.1 the following will occur:
In the first move instruction, item1 will have the offset of 0002
relative to the start of seg_1 segment. The next move instruction is
using the group name to force the evaluation of item1 relative to the
start of the group. The offset for item1 will be 0002 because seg_1 is
the first segment in the group.
<P>
The third move instruction containing item2 will have an offset
0002 relative to the start of the seg_3 segment. Due to the alignment
of the seg_3 segment, which is word aligned, the offset for item2 is
not 0000. The fourth move instruction forces the item2 offset to be
calculated from the beginning of the group. The seg_3 segment is not
the first segment in the group but the third segment. The offset for
item2 will be 0042.
<P>
In MASM 6.0, the first two OFFSET calculations will the same (group
relative) and the second two OFFSET calulations will be tha same
(OFFSET item2 == OFFSET group_1:item2). If OPTION M510 is used, the
code will behave as specified for MASM 5.10.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.10 6.00<BR>
KBCategory: kbprg<BR>
KBSubCategory: MASMLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 23, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
