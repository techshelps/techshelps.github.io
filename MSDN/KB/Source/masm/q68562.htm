

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>.MODEL Directive Forces DOSSEG Segment Ordering in MASM </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q68562 ">
<META NAME="KBModify" CONTENT="1995/01/06">
<META NAME="KBCreate" CONTENT="1991/01/22">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  The .MODEL assembler directive forces the segments in the resulting executable program to be ordered as if the DOSSEG directive had been used. This will override any other directives used to organize segments in an executable program. The code belo...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QA63,QAEF,QAIJ,QAY5,QAYY,QBV8,QABO,QDMW,QDIV,QDH6,QBWI,QBVV,QA9N,QAUJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>.MODEL Directive Forces DOSSEG Segment Ordering in MASM</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 6, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q68562 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, version 5.0, 5.1, 5.1a, 6.0,
   6.0a, 6.0b, and 6.11
<LI>Microsoft Macro Assembler for OS/2, versions 5.1, 5.1a, 6.0, 6.0a,
   and 6.0b
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The .MODEL assembler directive forces the segments in the resulting
executable program to be ordered as if the DOSSEG directive had been
used. This will override any other directives used to organize
segments in an executable program. The code below demonstrates this
behavior.
<P>
Because of this, the options below will be ignored:
<P>
<PRE>   /A and /S command line switches
   .ALPHA and .SEQ assembler directives

</PRE>This behavior is not documented and no warnings or errors are
generated.
<P>
This behavior is also true with QuickAssembler versions 2.01 and 2.51.
The .MODEL assembler directive was designed for use in mixed-language
programming. Because of this, it will automatically order the segments
in a way compatible with the way higher-level language compilers order
them. This will happen even if the &lt;,language&gt; option on the .MODEL
directive is not used.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The map file created from the linker is included below.
<P>
Map file:
<P>
<PRE>Start  Stop   Length Name                        Class
00000H 00000H 00000H _TEXT                       CODE
00000H 00002H 00003H B                           CODE
00004H 00004H 00000H _DATA                       DATA
00004H 00005H 00002H A                           DATA
00010H 0010FH 00100H STACK                       STACK

Origin   Group
0000:0   DGROUP

</PRE>When the .MODEL and .STACK directives are removed (.STACK must be
removed because it requires .MODEL), the following map file results.
Note that the segments appear in the proper order in this case.
<P>
<PRE>Start  Stop   Length Name                        Class
00000H 00001H 00002H A                           DATA
00002H 00004H 00003H B                           CODE

</PRE><h3>Sample Code</h3>
 
<P>
; Assemble options needed: none
<P>
.MODEL medium
.286
.SEQ
.STACK 100h
<P>
A SEGMENT WORD PUBLIC 'DATA'
test_data DW 10
A ENDS
<P>
B SEGMENT WORD PUBLIC 'CODE'
<PRE>    mov ax, 1
</PRE>B ENDS
<P>
END
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.10 5.10a 6.00 6.00a 6.00b<BR>
KBCategory: kbprg<BR>
KBSubCategory: MASMLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 6, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
