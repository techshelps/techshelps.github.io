

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DOCERR: Repeat Prefix (REP) Documentation Error </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q66170 ">
<META NAME="KBModify" CONTENT="1994/11/03">
<META NAME="KBCreate" CONTENT="1990/10/10">
<META NAME="Keywords" CONTENT="kbprg kbdocerr">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  On Page 368 of the  Microsoft Macro Assembler Programmer's Guide,  the last sentence in the second paragraph from the bottom states the following:     Segment overrides can be used safely when interrupts are turned    off, when a string instruction...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QADN,QAHC,QATS,QASR,QAWF,QAOE,QAKJ,QA7R,QAMW,QAHB,QBV8,QAB9,QDKA,QBXS,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>DOCERR: Repeat Prefix (REP) Documentation Error</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 3, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q66170 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, version 5.0
<LI>Microsoft Macro Assembler for OS/2, version 5.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
On Page 368 of the "Microsoft Macro Assembler Programmer's Guide," the last
sentence in the second paragraph from the bottom states the following:
<P>
<PRE>   Segment overrides can be used safely when interrupts are turned
   off, when a string instruction is used without a segment override,
   or when a 80386 processor is used.

</PRE>It should read as follows:
<P>
<PRE>   Segment overrides can be used safely when interrupts are turned
   off, when a string instruction is used without a repeat prefix, or
   when a 80386 processor is used.

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The repeat prefix may be used safely with segment overrides if a CLI
instruction is performed before the REP instruction and a STI
instruction is performed after it. This process shuts off interrupts
during the REP instruction that contains a segment override. Clearing
interrupts in this manner is only needed for instructions with segment
overrides that are preceded with REP.
<P>
Please note that the execution of a repeated instruction can take a
considerable amount of time; you may not want to have interrupts shut
off for that much time. It is the programmer's responsibility to
ensure that interrupts are not missed while interrupts are off.
<P>
A better alternative if you are moving a large amount of data is to
change the DS register for the duration of the repeated instruction
(so that the segment override is not needed) and restore it
afterwards.
<P>
The following is an example of using the CLI instruction to disable
interrupts and using the STI instruction to re-enable them:
<P>
<PRE>    ;   set SI and DI

    MOV CX, 20   ; relatively small number of bytes--won't take long
    CLI
    REP MOVS dest,ES:source
    STI

    ;   ...

</PRE>The following is an example of temporarily using the DS register to
avoid the segment override:
<P>
<PRE>    ;   set SI and DI

    MOV  CX, 4000h ; lots to move -- this will take some time
    PUSH DS        ; save for later
    PUSH ES        ; same as ES: override -- change for other overrides
    POP  DS        ; load into DS
    REP  MOVS dest, source
    POP  DS        ; restore DS
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00 5.10<BR>
KBCategory: kbprg kbdocerr<BR>
KBSubcategory: MASMLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 3, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
