

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Positioning External Declarations in Assembly </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q81327 ">
<META NAME="KBModify" CONTENT="1995/01/23">
<META NAME="KBCreate" CONTENT="1992/03/03">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  Microsoft Macro Assembler (MASM) versions 5.1 and 6.0 and Microsoft QuickAssembler versions 2.01 and 2.51 place several restrictions on the placement of EXTRN and EXTERN statements. The assembler also makes assumptions on where the declarations are...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QAWM,QAYL,QAB4,QACI,QAAP,QAPN,QAPF,QAMB,QAC2,QAB9,QABO,QAYA,QAJP,QA19 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Positioning External Declarations in Assembly</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 23, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q81327 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 5.0, 5.1, 5.1a, 6.0,
   6.0a, and 6.0b
<LI>Microsoft Macro Assembler for OS/2, versions 5.0, 5.1, 5.1a, 6.0,
   6.0a, and 6.0b
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft Macro Assembler (MASM) versions 5.1 and 6.0 and Microsoft
QuickAssembler versions 2.01 and 2.51 place several restrictions on
the placement of EXTRN and EXTERN statements. The assembler also
makes assumptions on where the declarations are placed.
<P>
Because of these assumptions, the code may assemble correctly, but
cause the following link errors:
<P>
<PRE>   Warning: L4004 Possible fixup overflow at &lt;addr&gt; in segment &lt;name&gt;

   -or-

   Error L2002: fixup overflow at &lt;addr&gt; in segment &lt;name&gt;

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Here are the rules you should follow when declaring externals:
<P>
<PRE>   1. If you know which segment defines an external symbol, put the
      EXTRN statement in that segment.

   2. NEAR code labels (including procedures) must be declared in
      the code segment from which they are accessed.

   3. If you know the group but not the segment, position the EXTRN
      statement outside any segment and reference the variable with
      the group name. For example, if var1 is in DGROUP, you would
      reference the variable as

         mov DGROUP:var1, 10

   4. If you know nothing about the location of an external
      variable, put the EXTRN statement outside any segment. You can
      use the SEG directive to access the external variable like
      this:

         mov ax, SEG var1
         mov es, ax
         mov ax, es:var1

   5. If the symbol is an absolute symbol or a far code label, you
      can declare it external anywhere in the source code.

</PRE>While following these rules will help to avoid L2002 and L4004 fixup
overflow errors, the above rules are not absolute. Using groups,
ASSUME statements, and .MODELS you can often work around these errors.
This error can also be generated by incorrectly positioning external
data.
<P>
EXTERN is the MASM 6.0 version of EXTRN. For more information about
EXTERN see pageS 222 to 224 of the MASM version 6.0 Programmer's
Guide. For more information on EXTRN see pageS 161 to 163 of the MASM
version 5.1 Programmer's Guide, or pages 169 to 171 of the Microsoft
QuickAssembler's Programer's Guide.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.00 5.10 5.10a 6.00 6.00a 6.00b<BR>
KBCategory: kbprg<BR>
KBSubCategory: MASMLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 23, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
