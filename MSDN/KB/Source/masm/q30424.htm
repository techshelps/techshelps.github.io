

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using the &amp; Operator to Combine Multiple Parameters </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q30424 ">
<META NAME="KBModify" CONTENT="1995/01/23">
<META NAME="KBCreate" CONTENT="1988/05/17">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  Attempting to use the * substitute operator to combine parameters requires that each parameter being substituted have one ampersand on the left and right. If an ampersand is adjacent to white space, it can be omitted as long as one ampersand is nex...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QBE7,QBE6,QAHE,QAGI,QAY2,QANY,QAKM,QAB4,QAAP,QA5E,QAIJ,QAIF,QAAW,QAYA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Using the &amp; Operator to Combine Multiple Parameters</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 23, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q30424 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 6.0, 6.0a, and 6.0b
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Attempting to use the &amp; substitute operator to combine parameters
requires that each parameter being substituted have one ampersand on
the left and right. If an ampersand is adjacent to white space, it can
be omitted as long as one ampersand is next to each parameter to be
substituted.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
If multiple parameters are being combined with the &amp; operator, each
parameter must have it's own &amp; symbol associated with it. Also each &amp;
symbol can only be associated with one parameter. The sample code
provided below helps to illustrate the use of the &amp; substitute
operator to combine multiple parameters.
<P>
<P><h3>Sample Code</h3>
 
<P>
; Assemble options needed: none
<P>
.MODEL small, c
.STACK
<P>
level1 macro
<PRE>        forc x,f
            level2 x
        endm
    endm

</PRE>level2 macro x
<PRE>        forc y,e
            level3 x&amp;y
        endm
    endm

</PRE>level3 macro i
level3&amp;i:
<PRE>    push bp
    mov  bp, 0&amp;i&amp;h
    jmp  FINISH
    endm

</PRE>.CODE
<P>
START:
<PRE>    level1
</PRE>FINISH:
<PRE>    mov   ax, 4C00h
    int   21h
</PRE>end START
<P>
Attempting to assemble the sample code given above will cause MASM 6.0
to generate the following error messages:
<P>
<PRE>    file.asm(27): error A2048: nondigit in number
     level3(3): Macro Called From
      MacroLoop(1): iteration 1: Macro Called From
       level2(3): Macro Called From
        MacroLoop(1): iteration 1: Macro Called From
         level1(3): Macro Called From
          file.asm(27): Main Line Code

</PRE>MASM generates the following code for the macros in the sample code:
<P>
<PRE>    level1
        forc x,f
        level2 x
    endm
    level2 f
        forc y,e
        level3 fy
    endm
    level3 fy
        level3fy:
        push bp
        mov bp,0fyh

</PRE>The A2048 error is generated because the substitution of the 'y'
parameter being performed in the call to the level3 macro from inside
the level2 macro is not occurring. The A2048 error is generated when
the level3 macro attempts to store the invalid value it was passed
from the level2 macro in the BP register.
<P>
The substitution of the 'y' parameter is not occurring because the
syntax being used with the &amp; operator is incorrect. The level2 macro
is defined as follows:
<P>
level2 macro x
<PRE>        forc y,e
            level3 x&amp;y
        endm
    endm

</PRE>To allow the correct substitution to take place, add another &amp; to the
level3 macro call, like this:
<P>
level2 macro x
<PRE>        forc y,e
            level3 x&amp;&amp;y
        endm
    endm

</PRE>After making the change shown above, MASM 6.0 then generates the
following code for the macros:
<P>
<PRE>    level1
        forc x,f
        level2 x
    endm
    level2 f
        forc y,e
        level3 f&amp;y
    endm
    level3 fe
        level3fe:
        push bp
        mov bp,0feh
        jmp FINISH

</PRE>The value being placed into the BP register is now valid and the code
functions as expected.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.10 5.10a 6.00 6.00a 6.00b<BR>
KBCategory: kbprg<BR>
KBSubCategory: MASMLngIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 23, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
