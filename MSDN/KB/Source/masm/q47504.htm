

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Some Instructions May Require Enabling of Instruction Set </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" HREF="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q47504 ">
<META NAME="KBModify" CONTENT="1995/01/23">
<META NAME="KBCreate" CONTENT="1989/07/31">
<META NAME="Keywords" CONTENT="kbtool">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  Using an instruction that requires a 80186, 80286, or 80386 processor may cause the Microsoft Macro Assembler (MASM) 5.1 to generate the one of the following errors:     A2066: Must have instruction after prefix.    A2105: Expected: instruction, di...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QASR,QATS,QBV8,QAB9,QAH4,QALM,QDIO,QBXS,QA5W,QAAP,QAB4,QDMW,QAMB,QAC2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Some Instructions May Require Enabling of Instruction Set</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 23, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q47504 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS and OS/2, versions 5.0, 5.1,
   5.1a, 6.0, 6.0a, and 6.0b
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Using an instruction that requires a 80186, 80286, or 80386 processor
may cause the Microsoft Macro Assembler (MASM) 5.1 to generate the
one of the following errors:
<P>
<PRE>   A2066: Must have instruction after prefix.
   A2105: Expected: instruction, directive, or label

</PRE>and MASM 6.0 to generate the following error:
<P>
<PRE>   A2085: instruction or register not accepted in current CPU mode

</PRE>The error occurs because the default assembly mode is 8086. The .186,
.286, .286p, .386, or .386p directive must be placed in the source
code prior to any instructions that require those modes.
<P>
In addition, MASM 6.0 supports 80486 instructions.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following information is taken from page 621 of the "Microsoft
Macro Assembler Programmer's Guide" for MASM 6.0
<P>
80186 Processor Instructions
<P>
<PRE>   BOUND        INSW         OUTSW
   ENTER        LEAVE        POPA
   INS          OUTS         PUSHA
   INSB         OUTSB        PUSHW*

</PRE>80286 Processor Instructions
<P>
<PRE>   ARPL         SIDT         VERR
   LAR          SLDT         VERW
   LSL          SMSW
   SGDT         STR

</PRE>80286 and 80386 Privileged-Mode Instructions
<P>
<PRE>   CLTS         LIDT         LMSW
   LGDT         LLDT         LTR

</PRE>80386 Processor Instructions
<P>
<PRE>   BSF          LSS          SETNAE
   BSR          MOVSD        SETNB
   BT           MOVSX        SETNBE
   BTC          MOVZX        SETNC
   BTR          OUTSD        SETNE
   BTS          POPAD        SETNG
   CDQ          POPFD        SETNGE
   CMPSD        PUSHAD       SETNL
   CWDE         PUSHD*       SETNLE
   INSD         PUSHFD       SETNO
   IRETD        SCASD        SETNP
   IRETDF*      SETA         SETNS
   IRETF*       SETAE        SETNZ
   JECXZ        SETB         SETO
   LFS          SETBE        SETP
   LGS          SETC         SETPE
   LODSD        SETE         SETPO
   LOOPD*       SETG         SETS
   LOOPED*      SETGE        SETZ
   LOOPNED*     SETL         SHLD
   LOOPNZD*     SETLE        SHRD
   LOOPZD*      SETNA        STOSD

</PRE>80486 Processor Instructions
<P>
<PRE>   BSWAP*       INVD*        WBINVD*
   CMPXCHG*     INVLPG*      XADD*

   * New to MASM 6.0
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.00 5.10 5.10a 6.00 6.00a 6.00b<BR>
KBCategory: kbtool<BR>
KBSubCategory: MLIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 23, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
