

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FTP Err Msg: Error: Connection Timed Out </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q169268">
<META NAME="KBModify" CONTENT="1997/11/10">
<META NAME="KBCreate" CONTENT="1997/05/29">
<META NAME="Keywords" CONTENT="iisftp kbusage kbprb">
<META NAME="KBArea" CONTENT="Support; KB; iis">
<META NAME="Description" CONTENT="  When you try to connect to a site via FTP, you may get the following  error message after a few minutes if the Internet Information Server (IIS) is configured with more than one default gateway:     Error: Connection timed out  This may also happen...">
<META NAME="Product" CONTENT="Internet Information Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVZ,QAM5,QABA,QBVW,QBWD,QAI5,QAB4,QALQ,QAEF,QBW9,QDNT,QAQW,QDIZ,QAKR,QAHT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FTP Err Msg: Error: Connection Timed Out</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q169268</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to: 

<UL><LI>Microsoft Internet Information Server version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you try to connect to a site via FTP, you may get the following 
error message after a few minutes if the Internet Information Server (IIS)
is configured with more than one default gateway:
<P>
<PRE>   Error: Connection timed out

</PRE>This may also happen only when you try to connect via FTP using a slow 
link (for example, a 28.8k modem connection) to a server that has more 
than one default gateway.
<P>
<P><h2>CAUSE</h2>
 
<P>
The IIS computer should have only one IP default gateway. The IP address 
of the default gateway should be configured on the external network 
adapter card only.
<P>
This requirement is a result of the basic architecture of TCP/IP. Only 
one default gateway must be defined on a host that resides on two or 
more non-connected networks.
<P>
If IIS server is configured with more than one network interface, it is
connected to two networks that are by design non-connected.
<P>
A default gateway is a router that is supposed to be used for all traffic
that has no specific route. If you have two default-gateways, the IIS
server TCP/IP stack will assume that they lead to the same set of 
networks. This will cause the IIS server to send Internet traffic to 
the internal network, or internal traffic to the Internet.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Remove the default gateway from the advanced TCP/IP settings of the
internal network interface on the IIS server and define static routes to
the internal network segments.
<P>
For additional information, please see the following Microsoft Knowledge
Base article:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../proxysvr/Q161380.htm">Q161380</A></B>
   TITLE     : Only One Default Gateway Allowed On Proxy Server

</PRE>Because no default gateway will be defined for the internal network, you 
must add static routes using the Route Add command. These routes can be 
made persistent by using the -p command switch.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For additional information on adding static routes to the routing table,
please see the following:

<UL><LI>Type route /? for additional command switches.
<P>
</UL>For additional information, please see the following Microsoft Knowledge
Base article:
<P>
<PRE>   ARTICLE-ID: <B><A HREF="../WINNT/Q140859.htm">Q140859</A></B>
   TITLE     : TCP/IP Routing Basics for Windows NT
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: proxy internet server timeout connect fail<BR>
winsock ftp iis<BR>
Keywords          : iisftp kbusage kbprb<BR>
Version           : winnt:3.0<BR>
Platform          : winnt<BR>
Hardware          : ALPHA x86<BR>
Issue type        : kbprb<BR>
Solution Type     : kbworkaround<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 10, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
