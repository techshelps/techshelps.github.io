

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INS: Nntpbld Rebuild of News Server Is Slow </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q169778">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/06/06">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; sitemcis">
<META NAME="Description" CONTENT="  After a news server hash table or Group.1st becomes corrupted, it is often necessary to rebuild the server by running the following command:     nntpbld -c -G -e  On a very large news server which contains several gigabytes of news articles, this p...">
<META NAME="Product" CONTENT="sitemcis">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAHE,QAKR,QA8C,QAMR,QBV8,QAB9,QAU3,QAKC,QBWS,QBVV,QBE7,QBE6,QBC6,QA4F,QA1L V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INS: Nntpbld Rebuild of News Server Is Slow</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q169778</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Commercial Internet System, version 1.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After a news server hash table or Group.1st becomes corrupted, it is often
necessary to rebuild the server by running the following command:
<P>
<PRE>   nntpbld -c -G -e

</PRE>On a very large news server which contains several gigabytes of news
articles, this process can take 24 to 48 hours. During this time the news
service must remain offline while the rebuild takes place.
<P>
<P><h2>CAUSE</h2>
 
<P>
The original version of Nntpbld.exe is not multithreaded and it deletes
the existing *.xix files before it attempts to rebuild the server. This
adds a great deal of time to the rebuild process.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Microsoft has added two switches to the nntpbld command with Service Pack 2
for Microsoft Commercial Internet System. The first switch allows the
administrator to bypass deleting the *.xix files, and use the information
that already exists to rebuild the hash tables. The second switch allows
the command to be multithreaded. These two enhancements greatly decrease
the amount of time required to rebuild a news server.
<P>
This update adds two switches to the Nntpbld.exe program. The information
about these switches is not contained in the documentation.
<P>
<P><h3>-w Switch</h3>
 
<P>
This switch allows the nntpbld command to be multithreaded. This increases
the performance of the rebuild with no negative side effects. An example of
this command would be
<P>
<PRE>   nntpbld -w &lt;n&gt;

</PRE>where n is the number of threads to use. The maximum number that can be
used is 64 and a value of O defaults to 2 * number of processors..
<P>
<P><h3>-x Switch</h3>
 
<P>
If this switch is specified, nntpbld does not rebuild the *.xix files; it
uses the existing information to rebuild the server. The downside of
running a rebuild with this switch is that if the *.xix files are already
corrupted, using this command may cause the xover data for that group to
also become corrupted, thus causing more problems. Therefore, Microsoft
recommends that you run the command and include the -x switch
<P>
<PRE>   nntpbld -x -w 64

</PRE>rather than running it with just the -w switch
<P>
<PRE>   nntpbld -w 64

</PRE>if you are sure only the hash tables are corrupted.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft Commercial
Internet System, version 1.0.
We are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: INN INS NEWS DNEWS NMDIMS<BR>
Version           : 1.0<BR>
Platform          : WINDOWS<BR>
Issue type        : kbbug<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
