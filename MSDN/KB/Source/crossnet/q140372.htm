

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Direct Disk Access Disabled to Protect Long File Names </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q140372">
<META NAME="KBModify" CONTENT="1996/09/09">
<META NAME="KBCreate" CONTENT="1995/11/29">
<META NAME="Keywords" CONTENT="kbsetup kberrmsg kbinterop">
<META NAME="KBArea" CONTENT="Support; KB; crossnet">
<META NAME="Description" CONTENT="  When you install Windows NT 3.51 by running Winnt from a Windows 95 MS-DOS prompt, the following error may occur as Setup is copying files:     Windows has disabled direct disk access to protect your long file    names. To overwrite this protection...">
<META NAME="Product" CONTENT="Networking Issues">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDL9,QANE,QBWO,QBWN,QBWQ,QAB4,QAFI,QABT,QBWS,QAK7,QAA1,QAA8,QDI2,QA4P V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Direct Disk Access Disabled to Protect Long File Names</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 9, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q140372</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.51
<LI>Microsoft Windows NT Server version 3.51
<LI>Microsoft Windows 95
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you install Windows NT 3.51 by running Winnt from a Windows 95
MS-DOS prompt, the following error may occur as Setup is copying files:
<P>
<PRE>   Windows has disabled direct disk access to protect your long file
   names. To overwrite this protection see the LOCK /? command for more
   information.

   The system has been halted. Press CTRL+ALT+DEL to restart your computer.

</PRE><h2>CAUSE</h2>
 
<P>
Direct disk writes using INT 26h or INT 13h fail under Windows 95. This is
necessary in a multi-tasking environment to prevent disk corruption from
multiple utilities running simultaneously or prevent loss of long file
names by applications that are not long file name aware.
<P>
The LOCK and UNLOCK commands can be used to work around this protection for
DOS utilities (for example, Winnt) if necessary.
<P>
Use the following syntax for running LOCK:
<P>
<PRE>   lock &lt;drive_letter&gt;:

</PRE>Use the following syntax for running UNLOCK.EXE:
<P>
<PRE>   unlock &lt;drive_letter&gt;:

</PRE><h2>RESOLUTION</h2>
 
<P>
To lock a drive to enable direct disk access for Windows NT Setup, do
either of the following:

<UL><LI>Boot with the Windows 95 Emergency Startup Disk and at the MS-DOS
   prompt type:
<P>
<P><PRE>      lock &lt;drive_letter_to_lock&gt;:
</PRE><P>
   For example:
<P>
<P><PRE>      lock c:
</PRE><P>
   -or-

<LI>From within Windows 95, select Shutdown from the Start button and
   choose to Restart the Computer in MS-DOS mode. At the DOS Prompt type:
<P>
<P><PRE>      lock &lt;drive_letter_to_lock&gt;:
</PRE><P>
   For example:
<P>
<P><PRE>      lock c:
</PRE><P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
The error message above is a Windows 95 message and only appears if you
start Windows NT Setup by typing Winnt. If you install from the Windows NT
compact disc using boot floppies, this error message does not occur because
Windows 95 must be running at the time to cause this error.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbsetup kberrmsg kbinterop<BR>
KBSubcategory: win95 ntsetup<BR>
Additional reference words: prodnt 3.51 95
<P>


</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 9, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
