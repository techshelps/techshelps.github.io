

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PPTP and Interoperability with Other Local Machine Services </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q164052">
<META NAME="KBModify" CONTENT="1997/11/18">
<META NAME="KBCreate" CONTENT="1997/02/21">
<META NAME="Keywords" CONTENT="kbfix4.00.sp2 NTRAS nttcp kbnetwork kbusage">
<META NAME="KBArea" CONTENT="Support; KB; crossnet">
<META NAME="Description" CONTENT="  If a Microsoft Windows NT Server service, such as a Proxy server, DHCP server, web, FTP and so forth, is installed on a computer running Windows NT Server 4.0 (which has IP Forwarding enabled) that also employs Point- to- Point Tunneling Protocol (...">
<META NAME="Product" CONTENT="Networking Issues">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDJ0,QAVZ,QACK,QDO3,QAJZ,QDKF,QAY2,QAQW,QDIK,QBWS,QBBS,QDL9,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PPTP and Interoperability with Other Local Machine Services</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q164052</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If a Microsoft Windows NT Server service, such as a Proxy server, DHCP
server, web, FTP and so forth, is installed on a computer running Windows
NT Server 4.0 (which has IP Forwarding enabled) that also employs Point-
to- Point Tunneling Protocol (PPTP) filtering on an interface, no requests
can be resolved through that filtered interface unless the client is PPTP
enabled. This is to protect the computer from attack from Internet
sources.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
A change has been made in Windows NT Service Pack 2 (SP2) that enables the
PPTP service to allow packets to services running on the computer running
Windows NT Server. If a registry parameter is set, PPTP will allow packets
on a PPTP filtering enabled interface to reach the local machine.
<P>
This allows RAS (PPTP) and Proxy servers (or any other server services) to
be enabled at the same time, without the fear of the protected network
being attacked from the Internet due to packet forwarding.
<P>
To protect the private network:

<OL><P><LI>Install Service Pack 2 (or later) for Windows NT Server 4.0.

<P><LI>Enable PPTP filtering by checking the Enable PPTP Filtering check box
   in the Advanced TCP/IP properties of the Network Control Panel. This
   setting does not allow any packets other than PPTP to come and go out
   of that interface.

<P><LI>To allow clients on the Internet to access services running on the
   Windows NT computer, change the following registry parameter and
   restart the machine.
<P>
   WARNING: Using Registry Editor incorrectly can cause serious, system-
   wide problems that may require you to reinstall Windows NT to correct
   them. Microsoft cannot guarantee that any problems resulting from the
   use of Registry Editor can be solved. Use this tool at your own risk.
<P>
   a. Open the Registry Editor (Regedt32.exe).
<P>
   b. Go to the following location in the Registry and add the following
<P><PRE>      value:
</PRE><P>
<PRE>         HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\RASPPTPF
          \Parameters\

         Value Name: AllowPacketsForLocalMachine
          Data Type: REG_DWORD
               Data: 1

</PRE></OL>With this additional setting, PPTP clients can connect to the local
computer from the Internet. Computers on the Internet can see this server,
and can access services (FTP, WWW, and so forth) running on this server.
However, computers on the Internet cannot see past the server.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft Windows NT
version 4.0. This problem is corrected in Windows NT 4.0 U.S. Service Pack
2. For information on obtaining the Service Pack, query on the following
word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The following are considerations when applying the PPTP filter.
<P>
On a multi-homed machine, PPTP filtering should be enabled on the network
interface over which the PPTP connection is being made.
<P>
In the example of using PPTP internally to tunnel out to the Internet, you
would enable PPTP filtering on the LAN adapter attached to your network.
This configuration allows only PPTP control/data packets to pass between
the LAN and the Internet, making the PPTP RAS server act like a firewall.
<P>
If the tunnel is being made from an ISP over the Internet to a multi-homed
RAS server on the LAN, PPTP filtering would be enabled on the Internet
adapter.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt multihomed<BR>
Keywords          : kbfix4.00.sp2 NTRAS nttcp kbnetwork kbusage<BR>
Version           : 4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 18, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
