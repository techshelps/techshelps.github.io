

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows 3.1 Application Compatibility (part 6 of 7) </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q80901 ">
<META NAME="KBModify" CONTENT="1997/07/23">
<META NAME="KBCreate" CONTENT="1992/02/20">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  Application Compatibility Document for Windows 3.1  Due to the amount of information in this document, it has been broken into seven pieces. To find all seven pieces of this document and the Windows 3.1 Compatibility Test checklist, query this know...">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBWQ,QAVW,QAVX,QAB5,QABA,QAJH,QBVV,QAL3,QDH9,QAHC,QADN,QAA1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Windows 3.1 Application Compatibility (part 6 of 7)</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q80901 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.10
WINDOWS
kbtool 31compattest
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
<P><h3>Application Compatibility Document for Windows 3.1</h3>
 
<P>
Due to the amount of information in this document, it has been broken
into seven pieces. To find all seven pieces of this document and the
Windows 3.1 Compatibility Test checklist, query this knowledge base on
the words:
<P>
<PRE>   prod(winsdk) and 31compattest


                        Enhanced-Mode Windows
                        =====================

</PRE><h3>COMM DRIVER</h3>
 
<P>
Performance and functionality of the Windows version 3.1 COMM driver
are improved as follows:

<UL><LI>COMM.DRV provides its own interrupt handling in enhanced mode. In
   Windows version 3.0, the virtual communication device (VCD)
   provided the interrupt routine so that interrupts for Windows
   applications could be handled at ring 0. In Windows version 3.1, a
   new function allows COMM.DRV to register its own ring-0 handler,
   ensuring that all communications code exists in COMM.DRV. The VCD
   can still support COMM drivers that are compatible with Windows
   version 3.0 by adding the SYSTEM.INI switch "COMMDRV30=TRUE" in the
   [386ENH] section.

<LI>Both COMM.DRV and VCD read the COMxBASE and COMxIRQ settings in the
   SYSTEM.INI file to determine the base addresses and IRQs for COM3
   and COM4; reading values written into the BIOS data area is no
   longer required. Although for compatibility these settings are in
   the [386ENH] section, COMM.DRV also examines them when running in
   standard mode.

<LI>COMM.DRV supports the FIFO on 16550A UARTs. By default, COMM.DRV
   enables the FIFO if the FIFO is available, but the user can disable
   the FIFO by using the COMxFIFO setting in the [386ENH] section of
   the SYSTEM.INI file.

<LI>COMM.DRV baud rate is limited only by machine capability, so
   communication applications need not limit baud rates to 19200. Some
   users do have hardware capable of faster rates, and they don't like
   being stuck with an artificial limit.
<P>
</UL><h3>Potential Problem</h3>
 
<P>
Changes to COMM.DRV could affect any application that uses the
communications driver.
<P>
<P><h3>Test</h3>
 
<P>
You can test most changes to COMM.DRV by sending and receiving data in
your application at various baud rates.
<P>
<P>
<P><h3>VIRTUAL PRINTER DEVICE</h3>
 
<P>
The standard setup no longer includes the virtual printer device
(VPD). In Windows version 3.0, the VPD detects contention between
multiple VMs attempting to access the same LPT port. To detect
contention, VPD traps I/O for LPT ports, which creates too much
overhead for devices that use LPT ports, such as network adapters,
SCSI adapters, and external hard disks. Windows version 3.1 eliminates
the overhead by not installing the VPD.
<P>
Potential Problem
 
<P>
Although changes to the virtual printer device installation should not
affect applications, Windows version 3.1 cannot detect the rare case
of two applications attempting to print through the same port at the
same time.
<P>
<P>
<P><h3>VIRTUAL DMA DEVICE</h3>
 
<P>
In Windows version 3.1, VDMAD supports auto-initialize DMA as long as
the region being used can be locked and does not have alignment
problems. This means that TSRs and device drivers can use auto-
initialize DMA with global memory. VDMAD also deals with DMA globally
rather than through VM. This means that most global users (network,
disk, and so on) no longer need a separate virtual device to
coordinate their DMA activity when they set up DMA transfers using
hardware interrupts. Finally, all problems in the virtual DMA services
implementation have been corrected; relying on private versions of
VDMAD is no longer necessary.
<P>
<P><h3>Potential Problem</h3>
 
<P>
Changes to the VDMAD may affect applications that include their own
version of VDMAD.
<P>
<P><h3>Test</h3>
 
<P>
If your application has a custom VDMAD, thoroughly test the
application with the new VDMAD. Also, be sure that your installation
program does not overwrite the device=*VDMAD setting in the SYSTEM.INI
file.
<P>
<P>
<P><h3>VIRTUAL TIMER DEVICE</h3>
 
<P>
In Windows version 3.1, the virtual timer device (VTD) does not trap
the I/O ports used for accessing the system timer chip. This allows
more MS-DOS software to run better in VMs because I/O trapping adds
significant overhead. The VTD keeps timing in sync by watching other
activity, for example, by counting hardware interrupts that are not
passed to the BIOS. Thus, the VTD does not prevent applications from
reprogramming the timer to different rates. The TrapTimerPorts setting
was added to the SYSTEM.INI file to revert to Windows version 3.0
compatible behavior if problems do occur because of this change.
<P>
<P><h3>Potential Problem</h3>
 
<P>
Changes to the virtual timer device may affect applications that are not
based on Windows.
<P>
<P><h3>Test</h3>
 
<P>
Start several other MS-DOS-based applications, and then start your MS-DOS-
based application and check for timer problems. If problems arise,
set the SYSTEM.INI setting TrapTimerPorts and try the tests again.
<P>
<P>
<P><h3>VIRTUAL DISPLAY DEVICE</h3>
 
<P>
In Windows version 3.1, the standard virtual display device (VDD) for
VGA is modified to demand page video memory. Thus, you can run
graphical MS-DOS-based applications in a window or in the background on VGA
systems. This VDD must track video memory usage, so it is not
compatible with any of the super VGA display drivers that must access
more than 256 kilobytes (K) of video memory. To run these display
drivers, a user must use either the VDD provided by the display
adapter manufacturer or the VDDVGA30.386, which is included with
Windows version 3.1. Demand paging of video memory may break TSRs that
worked with Windows version 3.0. The difference is that the VDD
virtualizes access to video memory; in Windows version 3.0, the
display driver had full reign over memory.
<P>
<P><h3>Potential Problem</h3>
 
<P>
Changes to the video device driver may affect applications that work
directly with video memory and TSRs.
<P>
<P><h3>Test</h3>
 
<P>
Start your application or TSR in one or more virtual machines, and
then switch between virtual machines, watching for problems with the
display.
<P>
<P>
<P><h3>FASTDISK (WDCTL)</h3>
 
<P>
FastDisk allows specific virtual devices (currently WDCTL) to access
secondary storage devices directly. WDCTL supports Western Digital and
compatible controllers. This device speeds up disk activity and allows
demand paging of running VMs.
<P>
<P><h3>Test</h3>
 
<P>
FastDisk should not affect any applications. Be sure you are running
it while testing your application.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10<BR>
KBCategory: kbtool<BR>
KBSubcategory: TlsCompat<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 23, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
