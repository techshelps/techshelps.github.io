

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: Heap Walker's Object: USER LocalWalk Doesn't Track Data </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q124271">
<META NAME="KBModify" CONTENT="1997/07/23">
<META NAME="KBCreate" CONTENT="1994/12/22">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  Using the Microsoft Windows Heap Walker application (HEAPWALK.EXE), you choose Object:USER Localwalk(DATASEG) to do a local walk of the USER heap. After saving the results in a file, you open the file to discover all the count and size values are z...">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QAI4,QBWQ,QAGU,QAPN,QAW6,QAKD,QBSO,QBWS,QAGQ,QBXS,QAR4,QAKR V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Heap Walker's Object: USER LocalWalk Doesn't Track Data</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q124271</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.10
WINDOWS
kbtool kbprg kbprb
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows,
   version 3.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Using the Microsoft Windows Heap Walker application (HEAPWALK.EXE), you
choose Object:USER Localwalk(DATASEG) to do a local walk of the USER heap.
After saving the results in a file, you open the file to discover all the
count and size values are zero as in this example:
<P>
 
<PRE>OBJECT              COUNT      SIZE
Class                   0         0
Window                  0         0
String                  0         0
Menu                    0         0
Clipbrd                 0         0
ComboBox                0         0
Palette                 0         0
EditCtrl                0         0
WindowList              0         0
OwnerDraw               0         0
SPB                     0         0
CheckPoint              0         0
DCE                     0         0
MoveWinPos              0         0
Properties              0         0
ListBox                 0         0
Misc                    0         0
Atoms                   0         0
LockInputState          0         0
HookList                0         0
UserSeeUserDo           0         0
HotKeyList              0         0
Handle Table            0         0
</PRE> 
<P>
<P><h2>CAUSE</h2>
 
<P>
The Heap Walker application obtains the information for the chart by
walking the USER module's local heap using the LocalFirst() and LocalNext()
functions in the ToolHelp library. The entries correspond to the wType
values in the LOCALENTRY structure of the ToolHelp library. The
documentation on the LOCALENTRY structure in the Windows SDK Help file
states that these wType values are included only in the debugging version
of USER.EXE, not in the retail version. Therefore, because Heap Walker uses
ToolHelp to obtain these values, no values are found in the retail version
of Windows.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Switch to the Debug version of Windows, and run the Heap Walker
application. This will produce correct results. For more information on the
debugging version of Windows and how to switch to it, search on the phrase
"Windows Debugging Version" in the Windows version 3.1 SDK Help file
(WIN31WH.HLP) or refer to the topic "Windows Debugging Version" in Appendix
C of the "Programming Tools for Windows" manual, which is part of the
Visual C++ version 1.50 "Professional Tools User's Guide."
<P>
NOTE: When you try to reproduce the same behaviour in the Heap Walker
application for GDI heap by choosing Object:GDI LocalWalk(DATASEG), you
will see that the table shows correct values for individual GDI objects.
This is by design.
<P>
<P><h2>STATUS</h2>
 
<P>
This behavior is by design.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Steps to Reproduce Behavior</h3>
 

<OL><P><LI>Run the Microsoft Windows Heap Walker application (HEAPWALK.EXE) shipped
   with the Microsoft Windows versions 3.0 and 3.1 SDK or the Visual C++
   version 1.50.

<P><LI>Choose the Object:USER Localwalk(DATASEG) menu option to do a local walk
   of the USER heap.

<P><LI>From the USER Heap(Local Walk) window, choose Heap:Save.

<P><LI>Open the file created by Heap Walker (usually \WINDOWS\HWL00.TXT) with a
   text editor, and scroll to the bottom.

<P><LI>Notice that there are columns for OBJECT, COUNT, and SIZE, but all the
   COUNT and SIZE values are zeros.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00 3.10 heapwalker<BR>
KBCategory: kbtool kbprg kbprb<BR>
KBSubcategory: TlsHeapWalk<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 23, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
