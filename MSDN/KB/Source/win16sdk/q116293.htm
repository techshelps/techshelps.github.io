

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SAMPLE: Direct-to-Disk Recorder with ACM </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q116293">
<META NAME="KBModify" CONTENT="1996/08/05">
<META NAME="KBCreate" CONTENT="1994/06/15">
<META NAME="Keywords" CONTENT="kbmm kbprg kbfile kbwebcontent">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  DDREC is a sample that shows how to use the low-level multimedia application programming interface (API) to perform direct-to-disk recording of sound using real-time audio compression from an application for Windows written in the C language.  Down...">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA5V,QAYS,QAHR,QAB5,QDL9,QBWO,QBWN,QAM3,QACJ,QBVV,QAWF,QALM,QAKJ,QAHH,QAYY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SAMPLE: Direct-to-Disk Recorder with ACM</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 5, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q116293</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows
   version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
DDREC is a sample that shows how to use the low-level multimedia
application programming interface (API) to perform direct-to-disk recording
of sound using real-time audio compression from an application for Windows
written in the C language.
<P>
Download DDREC.EXE, a self-extracting file, from the Microsoft Software
Library (MSL) on the following services:

<UL><LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A HREF="http://support.microsoft.com/download/support/mslfiles/DDREC.EXE">DDREC.EXE</A> <I>(size: 41034 bytes)</I> 
</PRE>
<LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the \SOFTLIB\MSLFILES directory
      Get <A HREF="http://support.microsoft.com/download/support/mslfiles/DDREC.EXE">DDREC.EXE</A> <I>(size: 41034 bytes)</I> 
</PRE><P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
The Windows MCI commands may be used to record wave audio data from within
an application. However, MCI is implemented as a high-level interface. This
implementation does not provide extensive control over the recording
process, and does not provide easy access to the recorded data.
<P>
For more control over data access and the recording process, the low-level
multimedia API may be used. If you know ahead of time how much memory will
be required for the entire recording, and you know that the required amount
is available, you may use a simple one-shot recording procedure (ie: memory
allocate, open device, record, close device). In the wave audio recording
world, huge memory requirements are common and this process may not be be
applicable.
<P>
If, however, you do not know the total recording, and/or you want to keep
memory requirements to a minimum, a direct-to-disk process may be
desirable. This is also known as a double buffer approach, which repeats
the process of writing one filled buffer to a disk file while recording
another.
<P>
DDREC uses two buffers of approximately 32K each that are locally allocated
at program startup. When the record process is initiated, the wave buffers
are added to the input queue and recording begins. When the first buffer is
filled, it is written to a temporary file while the second buffer is
filled. After the buffer is written the buffer is queued to for wave audio
input again. This procedure is repeated for each buffer until the user
stops the recording.
<P>
DDREC shows how to use these same two buffers for playing the audio as well
as recording using a similar double buffer approach. It also uses the
multimedia input/output (mmio*) procedures for reading and saving the wave
data in a .WAV format RIFF file.
<P>
DDREC also implements the WAVEFORMATEX structure for handling other wave
formats besides PCM. It handles compressed formats auomatically using
function calls to the Audio Compresison Manager (ACM).
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10 softlib DDREC.EXE acmFormatChoose<BR>
waveInOpen waveInPrepareHeader waveInStart waveInAddBuffer waveOutOpen<BR>
waveOutPrepareHeader waveOutWrite<BR>
KBCategory: kbmm kbprg kbfile kbwebcontent<BR>
KBSubcategory: MMWave<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 5, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
