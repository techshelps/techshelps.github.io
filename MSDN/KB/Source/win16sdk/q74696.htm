

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Memory Below 1 Megabyte </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q74696 ">
<META NAME="KBModify" CONTENT="1997/07/22">
<META NAME="KBCreate" CONTENT="1991/07/28">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  Memory allocated with a base address below 1 megabyte (low memory) is useful for communicating between applications developed for the Microsoft Windows graphical environment and MS-DOS terminate-and-stay- resident (TSR) programs and device drivers....">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBW6,QBWQ,QAJH,QBTN,QAB5,QDH9,QACJ,QAGI,QAU9,QAGQ,QARL,QAML V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Using Memory Below 1 Megabyte</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 22, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q74696 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00 3.10
WINDOWS
kbprg
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows
   versions 3.1 and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Memory allocated with a base address below 1 megabyte (low memory) is
useful for communicating between applications developed for the
Microsoft Windows graphical environment and MS-DOS terminate-and-stay-
resident (TSR) programs and device drivers.
<P>
The only way a Windows-based application can directly allocate memory
guaranteed to be below 1 MB is to use the GlobalDosAlloc function.
However, this memory is a limited resource and should be used with
care.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following clients use memory below 1 MB:

<UL><LI>MS-DOS
<LI>MS-DOS device drivers
<LI>TSRs
<LI>Parts of the Windows kernel
<LI>Windows enhanced mode virtual drivers (VxDs)
<LI>Windows-based applications that call GlobalDosAlloc
<LI>Windows-based applications that call GlobalAlloc and receive low memory
   by chance
<LI>The task database for each active Windows-based application (This small
   block of low memory holds data used by MS-DOS.)
<P>
</UL>The first four clients on the list allocate their memory before any
Windows-based applications are run, therefore an application cannot prevent
this consumption of the low memory resource. (The user can modify the
CONFIG.SYS and AUTOEXEC.BAT files to reduce the number of devices and
TSRs.)
<P>
Virtual devices can allocate (or map) memory below 1 MB to communicate
with various hardware devices and MS-DOS device drivers. VxDs such as
the virtual NetBIOS driver and various virtual display drivers map
memory below the 1 MB line, reducing the amount of low memory
available to Windows.
<P>
The last three clients of low memory listed can progressively consume
more of the resource as the system runs, therefore an application can
increase the chance that its low memory allocations will succeed by
performing them as early as possible during system initialization. Two
methods for doing this are:

<OL><P><LI>Load the application or dynamic-link library (DLL) from the "run="
   or "load=" line in the WIN.INI file or from the StartUp group
   provided by Windows 3.1, or

<P><LI>Create a Windows device driver that performs the allocation when it
   is first loaded.
<P>
</OL>Beware of using too much low memory because other applications that
need low memory may begin to fail. The worst outcome of allocating too
much low memory is that Windows will be unable to allocate the task
database required to start an additional application.
<P>
In Windows enhanced mode, the lower memory that Windows-based applications
allocate is local to the system virtual machine (VM). Other virtual
machines (or MS-DOS compatibility boxes) cannot see the memory that
the GlobalDosAlloc function allocates. Allocating "global" low memory
(seen by all virtual machines) requires a virtual device, or the
memory must be allocated before Windows is loaded.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00 3.10 meg<BR>
KBCategory: kbprg<BR>
KBSubcategory: KrMm<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 22, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
