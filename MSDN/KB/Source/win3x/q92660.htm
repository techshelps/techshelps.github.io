

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Windows 3.1 with Quarterdeck QEMM386 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q92660 ">
<META NAME="KBModify" CONTENT="1994/11/23">
<META NAME="KBCreate" CONTENT="1992/11/12">
<META NAME="Keywords" CONTENT="kb3rdparty kbdisplay">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  Windows version 3.1 works correctly with versions 5.1 and later of the QEMM386 memory manager. This article discusses the following issues:   - Behavior of Windows Setup  - Using the Stealth Option with Third-Party Display Drivers  - Optimize Utili...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBWQ,QAA1,QDI2,QBW6,QDIZ,QBVV,QAAP,QDJD,QAGQ,QBV8,QA26,QAY5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Using Windows 3.1 with Quarterdeck QEMM386</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 23, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q92660 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system versions 3.1, 3.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows version 3.1 works correctly with versions 5.1 and later of the
QEMM386 memory manager. This article discusses the following issues:

<UL><LI>Behavior of Windows Setup
<LI>Using the Stealth Option with Third-Party Display Drivers
<LI>Optimize Utility Loads SMARTDRV.EXE 4.0 High
<LI>Data Loss with SMARTDrive
<LI>Windows May Use B000-B7FF
<LI>Setup Err Msg: Incorrect MS-DOS Version
<P>
</UL><h3>Behavior of Windows Setup</h3>
 
<P>
Windows Setup should detect QEMM386 if it is running when you install
Windows. If you are running QEMM386 version 5.1, 5.11, or 5.12, Setup
adds the following line to the [386enh] section of the SYSTEM.INI
file:
<P>
<PRE>   device=*qemmfix

</PRE>This line causes Windows to load the QEMMFIX virtual device driver
when starting in 386 enhanced mode. This device, developed jointly by
Quarterdeck Office Systems and Microsoft, modifies the behavior of
these versions of QEMM386 to make them compatible with Windows 3.1.
The device driver is built into WIN386.EXE and is not visible as a
separate file on your disk.
<P>
Note: QEMM386 versions 5.13 and later do not require the QEMMFIX
device driver.
<P>
<P><h3>Using the Stealth Option with Third-Party Display Drivers</h3>
 
<P>
A few third-party Windows display drivers may have conflicts with the
Stealth option in QEMM386 version 6. These conflicts can create video
problems or prevent you from starting Windows in 386 enhanced mode.
<P>
In most cases, such conflicts can be resolved by configuring QEMM386
to NOT overlay the video ROM with high RAM. To do this, add
"X=C000-C7FF" to the QEMM386 command line in your CONFIG.SYS file.
Depending on your configuration, you may be able to exclude a smaller
range of memory and leave more memory available. In some cases, you
may need to use "XST=C000" or disable the Stealth option altogether.
Consult your QEMM386 documentation for more information.
<P>
<P><h3>Optimize Utility Loads SMARTDRV.EXE 4.0 High</h3>
 
<P>
If you load SMARTDRV.EXE version 4.0 with the /DOUBLE_BUFFER option,
earlier versions of the Quarterdeck Optimize utility may recommend
loading SMARTDRV.EXE in an upper memory block (UMB). SMARTDRV.EXE
/DOUBLE_BUFFER does not function correctly if it is loaded high. Make
sure the SMARTDRV.EXE line in CONFIG.SYS does not include the
LOADHI.SYS command.
<P>
<P><h3>Data Loss with SMARTDrive</h3>
 
<P>
If SMARTDrive is NOT flushing its buffers on exit, you are probably
using a version of QEMM prior to 6.02. Earlier versions of QEMM trap
the INT 2Fh call. If INT 2Fh is trapped, SMARTDrive does not receive
the system shutdown broadcast message and does not flush its buffers
when you quit Windows or press CTRL+ALT+DEL. In addition, SMARTDrive
does not switch its cache size back to the MS-DOS mode value.
<P>
<P><h3>Windows May Use B000-B7FF</h3>
 
<P>
By default, Windows 3.1 uses UMA addresses B000-B7FF. Many expanded
memory managers also attempt to use this area, which causes a conflict
with Windows. To correct this problem, do one of the following:

<UL><LI>Exclude the B000-B7FF range with the memory manager.
<P>
   -or-

<LI>Install MONOUMB2.386 with the following steps:
<P>
   1. Copy and expand the MONOUMB2.38_ file that is on your Windows disk
<P><PRE>      to your Windows SYSTEM directory. For example, type the following
      at the MS-DOS command prompt:
</PRE><P>
<PRE>         expand a:\monoumb2.38_ c:\windows\system\MONOUMB2.386

      where "\windows\system" is the name of your Windows SYSTEM
      directory.

   2. Add the following setting to the [386Enh] section of the
      SYSTEM.INI file:

         device=monoumb2.386

</PRE></UL><h3>Setup Err Msg: Incorrect MS-DOS Version</h3>
 
<P>
Windows Setup may display the following error message:
<P>
<PRE>   Incorrect MS-DOS Version - You Must Have Version 3.1 or Later

</PRE>If you use QEMM386 version 5.x or 6.x to load MS-DOS resource files in
the upper memory area (UMA), the Windows 3.1 Setup program may fail.
This error is likely to occur during a network installation because
more file handles are being used by the system on startup.
<P>
To correct this problem, try increasing the FILES= statement in the
CONFIG.SYS file. Quarterdeck recommends increasing the number of files
in increments of five until the error is corrected.
<P>
The products included here are manufactured by Quarterdeck Office
Systems, a vendor independent of Microsoft; we make no warranty,
implied or otherwise, regarding these products' performance or
reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kb3rdparty kbdisplay<BR>
KBSubcategory: win31<BR>
Additional reference words: 3.10 3rdparty<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 23, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
