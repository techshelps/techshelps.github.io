

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SMARTDrive: Maximum Cache Size </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q95531 ">
<META NAME="KBModify" CONTENT="1994/11/21">
<META NAME="KBCreate" CONTENT="1993/02/15">
<META NAME="Keywords" CONTENT="kbusage kbenv">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  The cache size of SMARTDrive is limited by one 64 kilobyte (K) segment (or the largest available upper memory block if you are loading SMARTDrive high). In this 64K segment, SMARTDrive stores the code for its device driver (10.5K), a read ahead buf...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QALG,QBF0,QBFN,QAY2,QBVV,QA26,QAHE,QAKR,QANY,QDL9,QBWO,QBWN,QBWB,QA59 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMARTDrive: Maximum Cache Size</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 21, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q95531 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system versions 3.1, 3.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The cache size of SMARTDrive is limited by one 64 kilobyte (K) segment (or
the largest available upper memory block if you are loading SMARTDrive
high). In this 64K segment, SMARTDrive stores the code for its device
driver (10.5K), a read ahead buffer (16K) and an element table that
references each element block in the cache. The maximum cache size is
limited by available RAM and the size of the element table which is, in
turn, limited by the amount of space left in the 64K segment after
SMARTDrive and the read ahead buffer load.
<P>
If you are using the default element size (8K), SMARTDrive's cache has a
maximum size of 25 megabytes (MB). However, if you have an upper memory
block (UMB) provider (EMM386, for example) installed and you prevent
SMARTDrive from loading high by using the /L switch with the LH command,
the read ahead buffer splits off from the 64K segment. This makes more room
for the element table, increasing the maximum cache size of SMARTDrive to
35.7 MB.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
To determine the maximum cache size of SMARTDrive, use the following
formula:
<P>
<PRE>   CacheSize = ElementSize * (SegmentSpace / ElementDescriptor)

</PRE>ElementSize, by default, is 8K or 8192 bytes and refers to the element
block size in the SMARTDrive cache. ElementDescriptor is the memory
required to reference each element in the cache and is 12 bytes if the
element size is 8K or greater; it is 10 bytes if the element size is
less than 8K. SegmentSpace can be determined by subtracting the size
of the SMARTDrive device driver and the read ahead buffer from 64K (or
the largest available upper memory block):
<P>
<PRE>   One 64K segment:                       65536 bytes
   SMARTDrive device driver (10.5K):    - 10752 bytes
   Read ahead buffer (16K):             - 16384 bytes
   --------------------------------------------------
   Remaining segment space:               38400 bytes

   Note: If you have a UMB provider installed and you use the /L
   switch with the LH command, the read ahead buffer loads separately
   from the 64K segment, increasing the remaining segment space to
   54784 bytes or 53.5K.

</PRE>For example: If you do not load a UMB provider and do not change the
default element size of 8K, you can determine the maximum SMARTDrive
cache size by doing the following:

<OL><P><LI>Use the following values:
<P>
   ElementSize = 8192 bytes
   SegmentSpace = 38400 bytes
   ElementDescriptor = 12 bytes

<P><LI>Insert the values from Step 1 in the formula
<P>
   CacheSize = ElementSize * (SegmentSpace / ElementDescriptor)
<P>
   such that:
<P>
   CacheSize = 8192 * (38400 / 12) = 26214400 bytes = 25 MB
<P>
</OL>NOTE: Although you can specify a large cache size, Microsoft recommends a
maximum cache size of 2 MB for most situations. Few systems benefit from
large cache sizes; beyond 2 MB, cache performance does not increase
significantly.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbusage kbenv<BR>
KBSubcategory: winmem win31<BR>
Additional reference words: 3.10 3.11<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 21, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
