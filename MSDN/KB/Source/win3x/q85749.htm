

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WRK Translation Buffer Information Is Incorrect </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q85749 ">
<META NAME="KBModify" CONTENT="1994/11/23">
<META NAME="KBCreate" CONTENT="1992/06/18">
<META NAME="Keywords" CONTENT="kbdocerr">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  Page 269 of the  Microsoft Windows Resource Kit  (WRK) guide for Windows 3.1 gives inaccurate instructions for placing the 386 enhanced mode translation buffers in the upper memory area (UMA).  Paragraph 3 of the section titled  Freeing Conventiona...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBW6,QAIB,QBWQ,QBXT,QBWB,QA5V,QABO,QDMR,QBVV,QAIA,QAHE,QAAP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>WRK Translation Buffer Information Is Incorrect</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 23, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q85749 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Page 269 of the "Microsoft Windows Resource Kit" (WRK) guide for
Windows 3.1 gives inaccurate instructions for placing the 386 enhanced
mode translation buffers in the upper memory area (UMA).
<P>
Paragraph 3 of the section titled "Freeing Conventional Memory in 386
Enhanced Mode" states:
<P>
<PRE>   Then add an x= switch to the EMM386 line in the CONFIG.SYS to
   exclude the unused UMB ranges.

</PRE>Other information in this section indicates that Windows 3.1  uses
these excluded ranges for placement of the translation buffers.
<P>
This is incorrect; any UMAs excluded by an upper memory block (UMB)
provider will also be excluded from use by Windows 3.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Windows running in 386 enhanced mode queries any UMB provider (such as
EMM386.EXE, QEMM, and 386Max) for information about the UMB area.
<P>
Every UMB provider creates a data structure that contains the following
information in 4K granularity (that is, every 4K is marked as one of the
following):

<OL><P><LI>Part of a UMB
   Something has been loaded into this address range.

<P><LI>Part of an EMM page frame
   The memory is part of a LIM 4.0 page frame.

<P><LI>Part of an EMS page frame
   The memory is part of a LIM 3.2 page frame.

<P><LI>Usable
   This is the region that is "free." All areas marked by an I=
   parameter in EMM386.EXE, which are not actually used, will be
   marked as usable.

<P><LI>Unusable
   This is the region that is either RAM, ROM, or specifically
   excluded (for example, the X= parameter in EMM386.EXE).

<P><LI>Unknown
   All addresses that are not scanned will be marked as Unknown.
   This region will be scanned by Windows as it normally would.
<P>
</OL>Under Microsoft Windows 3.0, only numbers 1 and 3 are looked at.
Consequently, address ranges that need to be excluded on the command
line for the UMB provider should also be excluded in the [386Enh]
section of the SYSTEM.INI with an EMMExclude statement.
<P>
Under Microsoft Windows 3.1, the whole structure is looked at and assumed
to be valid. As a result, the following entries in the [386Enh] section of
the SYSTEM.INI are ignored, except where they do not conflict with the
structure created by the UMB provider:

<OL><P><LI>EMMINCLUDE

<P><LI>EMMEXCLUDE

<P><LI>RESERVEDHIGHAREA

<P><LI>USEABLEHIGHAREA

<P><LI>IGNOREINSTALLEDEMM

<P><LI>NOEMMDRIVER

<P><LI>EMMPAGEFRAME
<P>
</OL>For example, if EMM386.EXE is installed with the line
<P>
<PRE>   DEVICE=C:\Windows\EMM386.EXE NOEMS

</PRE></OL>then the line "EMMInclude=B000-B7FF" would be used by Windows 3.1
because the B000 region is not scanned by EMM386.EXE. However, the
line "EMMExclude=D800-DFFF" will be ignored because this region is
scanned by EMM386.EXE.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbother kbdocerr<BR>
KBSubcategory: win31 winmem<BR>
Additional reference words: 3.10 3.1<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 23, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
