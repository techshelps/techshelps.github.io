

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Definition of SMARTDrive Double Buffering </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q63914 ">
<META NAME="KBModify" CONTENT="1994/11/23">
<META NAME="KBCreate" CONTENT="1990/07/16">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  Microsoft Windows version 3.0 does not run properly in enhanced mode on machines equipped with Bus Master cards unless SMARTDrive is also running. The new SCSI drive controllers are an example of such a system. If SMARTDrive is not running, Windows...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAHH,QDL9,QBWO,QBWN,QAY5,QAC2,QDIR,QAMA,QAFO,QBFN,QA8T,QAR5,QAOE,QBWQ,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Definition of SMARTDrive Double Buffering</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 23, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q63914 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system versions 3.0, 3.0a
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft Windows version 3.0 does not run properly in enhanced mode
on machines equipped with Bus Master cards unless SMARTDrive is also
running. The new SCSI drive controllers are an example of such a
system. If SMARTDrive is not running, Windows 3.0 may stop responding (hang
or crash) in enhanced mode on these systems.
<P>
SMARTDrive provides double buffering when Windows is running in enhanced
mode, which resolves this problem.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Double buffering is a concept that addresses some problems with certain
types of hardware. The definition of double buffering, in the case of
SMARTDrive, is as follows:
<P>
<PRE>   ALL read/write operations to any SMARTDrive managed drive
   will always be done through the SMARTDrive-managed low-
   memory buffer regardless of any other parameters of the
   read/write. In other words, the read/write address for the
   operation passed to the hardware will ALWAYS be the address
   of a buffer inside SMARTDrive. The data is transferred from/to
   the real address for the operation, to/from the SMARTDrive
   buffer at an appropriate time (before or after the request) for
   the operation.

</PRE>This is important because a Bus Master DMA hard disk controller does
NOT use the system DMA controller, (that's why it's called a BUS master
card). For Windows enhanced mode, this would normally be a problem. Since
the Bus Master hardware is not "virtualized," like the system DMA
controller is, the correct linear to physical address mapping isn't
performed for the read/write operation.
<P>
This means that the read/write may be performed to the incorrect physical
address and the system will crash. By turning on double buffering in
SMARTDrive (this is done automatically by enhanced-mode Windows), all
read/write operations to the drive are transferred through a low-memory
SMARTDrive buffer where the following is true:
<P>
<PRE>   linear address = physical address

</PRE>As a result the Bus Master disk hardware needs to be virtualized because
it's been arranged, through SMARTDrive double buffering, for all read/write
operations to the disk to occur at an address where Linear=Physical. Most
of the new SCSI drive controllers are examples of such Bus Master Cards. If
you don't load SMARTDrive, these disks do NOT work with enhanced-mode
Windows. If you load SMARTDrive, they DO work. The reason is the double
buffering that SMARTDrive is told to do when enhanced mode is operating.
<P>
Double buffering has a performance impact on overall disk performance. This
cost is judged to be "worth the benefit" of getting the product to work on
a broader range of MS-DOS platforms.
<P>
If you want to learn more about the importance/relevance of Linear versus
Physical addresses, and how this impacts the operation of transfers to/from
a hardware device in the MS-DOS context, check the local bookstore for a
book on the operation of virtual memory, in paging operating systems, that
uses an operating system operating on the Intel 80386 processor as its
standard "working example." An example is "The 80386 Book," by Ross P.
Nelson, published by Microsoft Press.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbother<BR>
KBSubcategory: win30<BR>
Additional reference words: 3.00 3.0 3.0a 3.00a SmartDrive.sys winmem<BR>
win30<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 23, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
