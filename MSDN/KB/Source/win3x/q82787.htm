

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Meaning of LocalTSRs= in SYSTEM.INI </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q82787 ">
<META NAME="KBModify" CONTENT="1994/11/23">
<META NAME="KBCreate" CONTENT="1992/03/31">
<META NAME="Keywords" CONTENT="kbenv">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  In Windows version 3.1, the SYSTEM.INI file [NonWindowsApp] switch, LocalTSRs=, provides for a unique copy of terminate-and- stay-resident (TSR) programs (already loaded before Windows is started) in each virtual machine (VM) under the 386 enhanced...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QAH4,QALQ,QAKH,QBWQ,QDH9,QAGI,QBVV,QAX6,QAUD,QALM,QAKR,QAHE V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Meaning of LocalTSRs= in SYSTEM.INI</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 23, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q82787 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system versions 3.1, 3.11
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In Windows version 3.1, the SYSTEM.INI file [NonWindowsApp] switch,
LocalTSRs=, provides for a unique copy of terminate-and- stay-resident
(TSR) programs (already loaded before Windows is started) in each
virtual machine (VM) under the 386 enhanced mode of Windows.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Many non-Windows-aware TSR programs that are loaded prior to starting
Windows have problems when they are called in different VMs. For
instance, many MS-DOS line-editor TSRs (such as DOSEDIT) assume that
there is only one keyboard buffer rather than an independent buffer
for each VM. When these types of programs are called in different VMs
they can cause problems. They may reference a location in memory that
does not exist in a VM or they may return data that is valid in one VM
but not in the VM for which the call was made. To correct this, 386
enhanced mode will makes a unique copy of the code and data associated
with the TSR, assuring that the assumptions made by the TSR of only
one environment are valid in others since there is a unique TSR for
each environment.
<P>
There are some TSRs for which this method of creating uniqueness is
not sufficient. Most prominently, network-service provider TSRs are
very intimate with MS-DOS (directly modifying MS-DOS internal
structures that are common across all VMs) and so must be handled by a
more sophisticated virtual device driver. Additionally, it is more
memory efficient to use a virtual device driver to regulate access to
a TSR if the only problem is that the TSR cannot be reentered in
multiple VMs.
<P>
Additionally, some TSRs may only need a very small portion of the data
of the TSR to be unique in each VM. Using a virtual device driver to
make only the required data unique may reduce memory requirements and
make switching between VMs faster. Using a virtual device driver,
however, requires intimate knowledge of the TSR and how to develop a
virtual device driver.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbenv<BR>
KBSubcategory: win31 winmem<BR>
Additional reference words: 3.10 3.1 VxD winfest<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 23, 1994</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
