

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Description of the Map File Microsoft LINK Creates </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q80437 ">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1992/01/29">
<META NAME="Keywords" CONTENT="kb16bitonly LinkIss kbtool">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  When the Microsoft LINK command line includes the /MAP option, the           field specifies the name for the map file. The default map file name is the base name of the executable file with the extension .MAP. To suppress creating a map file, set ...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAC2,QAH4,QBE7,QBE6,QAR5,QBWD,QABA,QAIJ,QAJH,QA2O,QBW4,QBC9,QBC8,QANO,QAJ1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Description of the Map File Microsoft LINK Creates</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q80437 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.x 4.x 5.0x 5.1x 5.20 5.3x 5.50 | 5.0x 5.10 5.11 5.13 5.15
<PRE>MS-DOS                           | OS/2
</PRE>kbtool
<P>
 
The information in this article applies to:

<UL><LI>Microsoft LINK for MS-DOS, versions 3.x, 4.x, 5.0x, 5.1x, 5.2,
   5.3x, and 5.5
<LI>Microsoft LINK for OS/2, versions 5.0x, 5.1, 5.11, 5.13, and 5.15
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When the Microsoft LINK command line includes the /MAP option, the
&lt;mapfile&gt; field specifies the name for the map file. The default map file
name is the base name of the executable file with the extension .MAP. To
suppress creating a map file, set the map filename to NUL.
<P>
The map file contains the following contents:

<UL><LI>For each logical segment, the Start address, Stop address, Length,
   Name, and Class
<LI>Groups
<LI>Program Entry point
<P>
</UL>When the LINK command line includes the /MAP:ADDRESS option, the map file
also contains the following:

<UL><LI>Public symbols by Value
<P>
</UL>When the LINK command line includes the /MAP:FULL option, the map file
contains all the fields provided by the /MAP:ADDRESS option with the
addition of the following:

<UL><LI>Contributions of each object file to a segment (this information
   follows the description of each logical segment)
<LI>Public symbols by Name
<LI>Undecorated names of C++ symbols
<P>
</UL>The /LI[NENUMBERS] option adds to the map file source-file link numbers and
the address associated with each line.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
In applications developed for MS-DOS or OS/2 in real mode, the Start and
Stop addresses are 20-bit hexadecimal addresses relative to the
application's load image. In applications developed for Microsoft Windows
or OS/2 in protected mode, the Start and Stop addresses are 32-bit
addresses in segment:offset notation. In OS/2, the segment value represents
a selector in the descriptor table that contains information about the
segments.
<P>
A group is a collection of logical segments that total not more than 64K in
size. To create a group, use the GROUP assembler directive. Microsoft
language products create the group DGROUP that contains the _NULL, _DATA,
CONST, C_COMMON, _BSS, and STACK segments, among others. For additional
information, please see the following article(s) in the Microsoft Knowledge
Base:
<P>
ARTICLE-ID: <B><A HREF="../UTILITIES/Q48241.htm">Q48241</A></B>
<PRE>TITLE     : Relationship Between Map File and Physical Memory

</PRE>If an MS-DOS program contains overlays, the map file divides the logical
segment information into sections. The first section is labeled the
"Resident" portion of the program, and each subsequent overlay has its own
section labeled "Overlay 1h," "Overlay 2h," and so on. In addition, each
public symbol is assigned one of the following attributes:
<P>
<PRE>   RES --  The symbol resides in the resident portion
   OVL --  The symbol resides in an overlay
   ABS --  The symbol represents a constant value

</PRE>In applications developed for Windows or OS/2 protected mode, public
symbols might have one of the following attributes:
<P>
<PRE>   EXP --  If the symbol was exported
   IMP --  If the symbol was imported

</PRE>The program entry point is the location where the operating system begins
executing the program. The reported address is an offset from the lowest
memory address at which program code is loaded. The application loader
places this address into CS:IP when the application begins execution.
Applications developed with Microsoft language products require specific
initialization code; the entry point for each program is the symbol
__astart.
<P>
In an application developed for MS-DOS, the start segment is the base
address of the program segment prefix (PSP) plus the size of the PSP (100h
bytes). The loader places this value into the DS and ES registers when the
application begins execution. To retrieve this segment address in C,
declare the following variable:
<P>
<PRE>   extern unsigned _psp;

</PRE>The absolute starting address is the program entry point, plus the base
address of the PSP, plus the size of the PSP. In addition, to determine the
absolute address of any symbol, add its relative address given in the map
file to the base address of the PSP plus the size of the PSP.
<P>
In a protected-mode environment, there is no reliable method to determine
the address of a symbol because segments may move in memory or be
discarded.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.01.20 5.01.21 5.02 5.03 5.05 5.10 5.11<BR>
5.13<BR>
5.15 5.20 5.30 5.31.009 5.50<BR>
KBCategory: kbtool<BR>
KBSubcategory: LinkIss<BR>
Keywords            : kb16bitonly LinkIss kbtool<BR>
Version             : 3.x 4.x 5.0x 5.1x 5.20 5.3x 5.50<BR>
Platform            : MS-DOS OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
