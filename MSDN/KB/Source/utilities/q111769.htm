

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BUG: NMAKE May Incorrectly Think Targets are up to Date </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q111769">
<META NAME="KBModify" CONTENT="1995/01/05">
<META NAME="KBCreate" CONTENT="1994/02/17">
<META NAME="Keywords" CONTENT="kbtool kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  Running NMAKE on a very fast computer system and using the /B switch may not force NMAKE to build a target if the target has the same time stamp as it's dependent files.  RESOLUTION  The build process may need to be modified so that a target is del...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAU3,QAHE,QAKR,QAMR,QACE,QAL2,QAFH,QAJQ,QBWS,QBVV,QAIJ,QAGC,QAKP,QBWP,QA5A V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: NMAKE May Incorrectly Think Targets are up to Date</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 5, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q111769</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft NMAKE Utility for MS-DOS, versions 1.3, and 1.4
<LI>Microsoft NMAKE Utility for Windows NT, version 1.4 and 1.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Running NMAKE on a very fast computer system and using the /B switch may
not force NMAKE to build a target if the target has the same time stamp as
it's dependent files.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The build process may need to be modified so that a target is deleted when
it s dependents are updated. This could be done in the command block for
the dependents.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in NMAKE versions 1.3, 1.4,
and 1.5. We are researching this problem and will post new information here
in the Microsoft Knowledge Base as it becomes available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The /B switch tells NMAKE to execute a dependency even if time stamps are
equal. However, on very fast systems, NMAKE may incorrectly determine that
a target is up to date, even when the /B switch is used. The following
information is taken from NMAKE.WRI from the MSVC\HELP directory:
<P>
"/B
<PRE> Tells NMAKE to execute a dependency even if time stamps are equal.
 Most operating systems assign time stamps with a resolution of 2
 seconds. If your commands execute quickly, NMAKE may conclude that
 a file is up-to-date when in fact it is not. This option may result
 in some unnecessary build steps but is recommended when running
 NMAKE on very fast systems."

</PRE>The sample below shows that on very fast system, the reverse case can
occur, and that some build steps may not be executed.
<P>
The makefile and looping batch file shown below can be used to
illustrate this behavior. When the looping batch file is executed, the
following output should be repeatedly generated:
<P>
<PRE>    del target1
    del target2
    del target3
    echo "target2" &gt; target2
    echo "target3" &gt; target3
    echo "Creating target1!" &gt; target1

    del target2
    del target3
    echo "target2" &gt; target2
    echo "target3" &gt; target3
    echo "Creating target1!" &gt; target1

</PRE>However, on a very fast machine, the following output is periodically
generated:
<P>
<PRE>    del target1
    del target2
    del target3
    echo "target2" &gt; target2
    echo "target3" &gt; target3
    echo "Creating target1!" &gt; target1

    del target2
    del target3
    echo "target2" &gt; target2
    echo "target3" &gt; target3
    'target1' is up-to-date

</PRE>Using the makefile shown below it is not possible for target1 to be up
to date since both of it s dependents were deleted and recreated after
target1 already existed. The file target1 would have to have a time
stamp that was at least equal to the time stamp for it s dependents. Since
NMAKE was invoked with the /B switch, target1 should have been rebuilt. The
batch file may need to be run at least 10-20 times for the problem to show
up. It may also be necessary to supress output from NMAKE and the batch
file in order to allow NMAKE to run fast enough to reproduce the problem.
<P>
<P><h3>Sample Makefile</h3>
 
<P>
target1: target2 target3
<PRE>    echo "Creating target1!" &gt; target1

</PRE>target2:
<PRE>    echo "target2" &gt; target2

</PRE>target3:
<PRE>    echo "target3" &gt; target3

</PRE>clean:
<PRE>    del target2
    del target3

</PRE>reset:
<PRE>    del target1
    del target2
    del target3


</PRE><h3>Looping Batch File</h3>
 
<P>
:start
nmake /B reset target1
nmake /B clean target1
goto start:
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.30 1.40 1.50<BR>
KBCategory: kbtool kbbuglist<BR>
KBSubcategory: NmakeIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 5, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
