

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NMAKE Macros Cannot Expand to Multiple Command Lines </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q70146 ">
<META NAME="KBModify" CONTENT="1995/02/28">
<META NAME="KBCreate" CONTENT="1991/03/12">
<META NAME="Keywords" CONTENT="kbtool">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  NMAKE does not support using a macro to substitute for more than one command line in a makefile. An attempt to use a macro in this way fails when NMAKE treats the macro expansion as one long concatenated command line.  MORE INFORMATION  A makefile ...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAB9,QBV8,QAH4,QBXT,QA5V,QAIB,QAFI,QAVI,QAUD,QA5E,QAPF,QAJX,QAGI,QAEF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>NMAKE Macros Cannot Expand to Multiple Command Lines</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 28, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q70146 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft NMAKE Utility for MS-DOS, versions 1.01, 1.1, 1.11,
   1.12, 1.13, 1.2, 1.3, and 1.4
<LI>Microsoft NMAKE Utility for OS/2, versions 1.01, 1.11, 1.12, 1.13,
   and 1.21
<LI>Microsoft NMAKE Utility for Windows NT, versions 1.4 and 1.5
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
NMAKE does not support using a macro to substitute for more than one
command line in a makefile. An attempt to use a macro in this way
fails when NMAKE treats the macro expansion as one long concatenated
command line.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
A makefile can contain many description blocks, each of which contain
the same sequence of commands. Therefore, it would be useful to use a
macro instead of the multiple commands shared between description
blocks.
<P>
For example, your makefile might somewhat resemble to sample makefile
below. The macro in that makefile is designed to expand to the
commands CLS (clear screen) and DIR (directory). However, when this
makefile runs, the DIR command does not run because the command line
passed to the system is as follows:
<P>
<PRE>   CLS &lt;cr/lf&gt; DIR

</PRE>where &lt;cr/lf&gt; denotes a carriage return and a line feed character.
<P>
One method that effectively avoids repeating many command sequences in
your makefile involved creating a batch file that contains the
commands. The makefile calls the batch file when these commands are
required. In addition, in OS/2, you can specify more than one command
on a line by separating the commands with an ampersand (&amp;) character.
<P>
Under Windows NT, you can execute multiple commands by separating them with
a &amp;&amp;.
<P>
<P><h3>Sample Makefile</h3>
 
<P>
# This makefile attempts to clear the screen and request a directory
# listing by expanding one macro. However, the DIR command is not
# executed.
<P>
CMDS = CLS ^
<PRE>       DIR

</PRE>showdir:
<PRE>   $(CMDS)

</PRE>In order to achieve this on Windows NT, use
<P>
<P><h3>Sample Makefile</h3>
 
<P>
#
# This works on Windows NT
#
<P>
CMDS = CLS &amp;&amp; DIR
<P>
showdir:
<PRE>   $(CMDS)
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf kbinf 1.10 1.20 1.30 1.40 1.50<BR>
KBCategory: kbtool<BR>
KBSubcategory: NmakeIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 28, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
