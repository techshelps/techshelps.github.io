

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: "!" Modifier Fails in a Macro Substitution </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q94295 ">
<META NAME="KBModify" CONTENT="1995/02/14">
<META NAME="KBCreate" CONTENT="1993/01/04">
<META NAME="Keywords" CONTENT="kbtool kbprb">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  The  !  command modifier in a macro substitution does not work as expected. A  too many parameters  warning may also occur.  CAUSE =====  Either the $** or $? macro is modified using a macro substitution or it is placed in another macro.  STATUS ==...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QBBI,QAWF,QAKJ,QAB4,QBV8,QBWP,QBAC,QAF9,QAB9,QBVV,QATO,QAO4,QAMW,QAHT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: "!" Modifier Fails in a Macro Substitution</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 14, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q94295 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft NMAKE for MS-DOS, versions 1.11, 1.12, 1.13, 1.2,
   1.3, and 1.4
<LI>Microsoft NMAKE for OS/2, version 1.21
<LI>Microsoft NMAKE Utility for Windows NT, versions 1.4 and 1.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The "!" command modifier in a macro substitution does not work as expected.
A "too many parameters" warning may also occur.
<P>
<P><h2>CAUSE</h2>
 
<P>
Either the $** or $? macro is modified using a macro substitution or it is
placed in another macro.
<P>
<P><h2>STATUS</h2>
 
<P>
This behavior is expected. The "!" modifier is designed to work with the
$** and $? macros without any modifications.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The "!" modifier executes the specified command once for each specified
dependent file. It uses the $** and $? predefined macros to determine the
dependents. The error occurs when the $** or $? macro is modified or when
the macro is placed in another macro.
<P>
The following makefile illustrates this error because the targets "clean1"
and "clean2" do not execute commands separately for each dependent.
However, the target "clean3" executes correctly. The targets execute
commands as follows:
<P>
clean1
<PRE>   DEL test1.map test2.map

</PRE>clean2
<PRE>   DEL test1.exe test2.exe

</PRE>clean3
<PRE>   DEL test1.exe
   DEL test2.exe

</PRE><h3>Sample Makefile</h3>
 
<P>
# Command line options needed: none
<P>
FILES = test1.exe test2.exe
CMD   = !DEL $**
<P>
all : clean1 clean2 clean3
<P>
$(FILES):
<P>
# This should repeat once for each file
clean1 : $(FILES)
<PRE>    !DEL $(?:.exe=.map)

</PRE># This should repeat once for each file
clean2 : $(FILES)
<PRE>    !$(CMD)

</PRE># This works
clean3 : $(FILES)
<PRE>    !DEL $?
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.20 1.30 1.40 1.50<BR>
KBCategory: kbtool kbprb<BR>
KBSubcategory: NmakeIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 14, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
