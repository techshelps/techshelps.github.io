

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>QEMM and 386MAX: Functionality and Compatibility with CV </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q75043 ">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1991/08/07">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  The Quarterdeck Expanded Memory Manager (by Quarterdeck Office Systems), otherwise known as QEMM386, and 386MAX (by Qualitas) are memory managers providing support for expanded and VCPI-extended memory, the High Memory Area (HIMEM), and Upper Memor...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QDIO,QAB5,QDKI,QBFY,QAIB,QDJD,QAVX,QAVW,QBXT,QA5V,QAZR,QBV8,QBVV,QAPF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>QEMM and 386MAX: Functionality and Compatibility with CV</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q75043 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00 3.11 3.14 4.00 4.01 4.05 4.10
MS-DOS
kbtool
<P>
 
The information in this article applies to:

<UL><LI>Microsoft CodeView for MS-DOS, versions 3.0, 3.11, 3.14, 4.0,
   4.01, 4.05, and 4.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The Quarterdeck Expanded Memory Manager (by Quarterdeck Office
Systems), otherwise known as QEMM386, and 386MAX (by Qualitas) are
memory managers providing support for expanded and VCPI-extended
memory, the High Memory Area (HIMEM), and Upper Memory Blocks for
machines using the 80386 or 80486 processor.
<P>
Some customers have reported difficulties loading CodeView versions
3.x into extended memory when running under these managers. This
article deals with the errors, difficulties, and solutions regarding
compatibility issues among CodeView, QEMM, and/or 386MAX.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The first thing to check is the version of CodeView in use. CodeView
version 3.0 is not VCPI (Virtual Control Program Interface)
compatible, and therefore cannot be loaded into extended memory when
QEMM or 386MAX is resident. If you are using CodeView 3.0, you should
upgrade to a later version that is VCPI-compatible.
<P>
To make CodeView VCPI compatible, a change was necessary to allow
access to the memory manager using that management scheme. Since VCPI
is a superset of LIM 4.0, the first thing CodeView does is make a call
to the LIM driver to determine if it exists. This call actually
attempts to establish a 64K page frame. If this is not possible,
CodeView assumes there is no VCPI driver and looks for other methods
to load itself and the symbol table.
<P>
The most common mistake with QEMM is to use either the FRAME=NONE or
the NOEMS switch. In both cases, CodeView can't allocate the 64K EMS
page frame it requires. The same problem occurs when using 386MAX with
the NOFRAME or EMS=0 switch.
<P>
The other switches in QEMM and 386MAX are compatible with CodeView.
Care must be taken, however, to ensure that the allocation scheme
leaves enough VCPI memory for CodeView.
<P>
For example, if QEMM (or 386MAX) is configured so that there are four
megabytes (MB) of extended memory available and no expanded memory,
and a RAM drive is loaded to take up 3.5 MB, CodeView will not be able
to load because there will not be enough available extended memory.
Note that this is the simplest case and that there are many options
and combinations of options that could cause this type of problem.
<P>
The examples below illustrate various command-line options for
CodeView, QEMM, and 386MAX along with the resultant output.
<P>
Notes:

<OL><P><LI>Version 5.10 of QEMM386 and version 5.10 of 386MAX have been used
   for these examples.

<P><LI>386MAX can a command file (386MAX.PRO) to replace command-line
   switches. This file contains all the necessary options for 386MAX
   to load as the user has defined. For purposes of readability, only
   command-line options will be used in the examples.

<P><LI>BLUEMAX is a version of 386MAX that runs on a PS/2 and provides
   extra capabilities for that platform. For the purposes of this
   article, BLUEMAX and 386MAX can be considered identical.

<P><LI>Only one memory manager should be present at any one time. These
   examples contain the command line and results for both QEMM and
   386MAX for the purpose of seeing the result of what each line
   contains.

<P><LI>All of these examples assume that there is enough expanded or
   extended memory to completely load CodeView and the entire
   application program. If not, be aware that CodeView will not use
   disk overlays to load into conventional memory if it was able to
   partially load into any area above the 640K DOS boundary. If an
   "Out of Memory" error occurs, a common solution is to use the
   CVPACK.EXE utility included with the compiler.
<P>
</OL>Examples:
<P>
<P><h3>CV1301 Error: /X: CPU in protected or virtual mode</h3>
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys NOEMS
   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys FRAME=NONE
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys EMS=0
   command line           -&gt; cv /x test.exe

</PRE></OL><h3>CV1304 Error: /E: EMM driver not loaded</h3>
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys NOEMS
   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys FRAME=NONE
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys EMS=0
   command line           -&gt; cv /e test.exe

</PRE><h3>CodeView hang at load time</h3>
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys FORCEEMS
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys NOFRAME
   command line           -&gt; cv {/x | /e | /d} test.exe

</PRE><h3>CodeView successfully loaded into extended memory</h3>
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys
   command line           -&gt; cv {/x} test.exe

</PRE><h3>CodeView successfully loaded into expanded memory</h3>
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys
   command line           -&gt; cv /e test.exe

</PRE>CodeView successfully loaded using disk overlays or
gives an "Out of Memory" error for large applications
 
<P>
<PRE>   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys NOEMS
   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys FRAME=NONE
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys EMS=0
   command line           -&gt; cv test.exe

   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys
   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys NOEMS
   CONFIG.SYS with QEMM   -&gt; device=c:\qemm\qemm386.sys FRAME=NONE
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys
   CONFIG.SYS with 386MAX -&gt; device=c:\386max\386max.sys EMS=0
   command line           -&gt; cv /d test.exe
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf kbinf 3.00 4.00 4.10 QEMM-386 386-MAX<BR>
EMM386<BR>
EMM-386<BR>
KBCategory: kbtool<BR>
KBSubcategory: CvwIss<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
