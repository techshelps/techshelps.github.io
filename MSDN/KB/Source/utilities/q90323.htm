

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: MPC MP4007 Warning Possible Causes </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q90323 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/10/13">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  When building an application with Microsoft C/C++ version 7.0, the Make p- code utility, MPC, may issue the following warning:     MP4007: MAP file parse failed at line       in file             The map file is not corrupt, but the warning goes awa...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QBFY,QAJ1,QBVV,QAR4,QAQG,QAE2,QAKJ,QBCU,QAHD,QAEF,QAKP,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: MPC MP4007 Warning Possible Causes</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q90323 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
7.00
MS-DOS
kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft C/C++ for MS-DOS and Windows, version 7.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When building an application with Microsoft C/C++ version 7.0, the Make p-
code utility, MPC, may issue the following warning:
<P>
<PRE>   MP4007: MAP file parse failed at line &lt;no.&gt; in file &lt;filename&gt;

</PRE>The map file is not corrupt, but the warning goes away after the map file
is deleted.
<P>
<P><h2>CAUSE</h2>
 
<P>
When linking a p-code application, the linker creates a segmented
executable file (.EXE extension) and a segmented map file (.MAP file). Part
of what the MPC utility does is convert the segmented map file to a non-
segmented map file. Therefore, MPC expects to see a segmented map file.
<P>
If a non-segmented map file exists and the linker is not asked to generate
a new map file, MPC will try to convert the existing non-segmented map file
and will issue the MP4007 warning. This situation can be reproduced with
the following steps:
<P>
<PRE>   cl /Oq /Fm hello.c     (map file produced and converted)
   cl /Oq hello.c         (MP4007 error with existing map file)

</PRE>This warning can also occur if the executable is built in the following
manner:
<P>
<PRE>   cl /c /Oq hello.c
   link /PCODE hello,,hello;

</PRE>In this case, a segmented map file is created, but it will not contain the
list of public symbols. The MPC utility does not accept such a map file,
and issues the MP4007 warning. Linking with
<P>
<PRE>   link /PCODE hello,,hello /MAP;

</PRE>will place the symbols in the map file, and the warning will not be
generated.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
This is just a warning and does not indicate problems with the executable
file. To avoid the warning, delete the nonsegmented map file or regenerate
the map file every time the executable is linked, making sure that the
symbols are included by linking with the /MAP option.
<P>
It has been suggested that future versions of MPC ignore nonsegmented map
files and accept segmented map files that do not contain the list of public
symbols.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem with C/C++ version 7.0. This
problem was corrected in Visual C++ version 1.0.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 7.00<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubcategory: TlsMisc<BR>
Keywords          : kb16bitonly<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
