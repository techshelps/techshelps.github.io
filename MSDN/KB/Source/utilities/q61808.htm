

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Using "!" &amp; "$?" Do Not Work as Expected w/ NMAKE 1.11 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q61808 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1990/05/10">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  In an NMAKE description file, applying the  !  (exclamation point) operator to the beginning of a command line using the macro  $?  should cause the command to be executed once for every out-of-date dependent file. In version 1.11 of NMAKE (shipped...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAR4,QBFY,QAH4,QBXT,QBVV,QA5V,QAIB,QAAP,QBS8,QATO,QAKP,QAC1,QBCU,QA4F,QA3R V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Using "!" &amp; "$?" Do Not Work as Expected w/ NMAKE 1.11</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q61808 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.11   | 1.11
MS-DOS | OS/2
kbtool kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft NMAKE Utility for MS-DOS, version 1.11
<LI>Microsoft NMAKE Utility for OS/2, version 1.11
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In an NMAKE description file, applying the "!" (exclamation point)
operator to the beginning of a command line using the macro "$?"
should cause the command to be executed once for every out-of-date
dependent file. In version 1.11 of NMAKE (shipped with C version
6.00), the $? macro evaluates to the list of every dependent,
regardless of whether it is out of date or not. This is not the
correct behavior.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Fortunately, the problem above is easy to correct. NMAKE performs
correctly if two colons (::) are placed after the target NEW.LIB on
the dependency line. The NMAKE file may be rewritten as follows so
that the $? macro will work with NMAKE 1.11:
<P>
<PRE>   new.lib::a.obj b.obj c.obj
      !lib $@-+$?;

</PRE>The use of the $? macro is described on page 108 of the "Microsoft C
Advanced Programming Techniques" manual included with C version 6.00.
The use of the two colons on the dependency line is described on page
109.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in NMAKE version 1.11.
This problem was corrected in NMAKE version 1.12.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
To re-create this problem, save the following lines to a file called
MAKEFILE:
<P>
<PRE>   new.lib: a.obj b.obj c.obj
       !lib $@-+$?;

</PRE>Assuming that only A.OBJ is out of date with respect to NEW.LIB, the
following will be produced upon running NMAKE:

<OL><P><LI>NMAKE 1.00 or 1.12:
<P>
<P><PRE>      lib new.lib-+a.obj;
</PRE>
<P><LI>NMAKE 1.11:
<P>
<P><PRE>      lib new.lib-+a.obj
      lib new.lib-+b.obj
      lib new.lib-+c.obj
</PRE><P>
</OL>Example 1 above shows the correct function of the $? macro.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: buglist1.11 fixlist1.12<BR>
KBCategory: kbtool kbbuglist kbfixlist<BR>
KBSubcategory: NmakeIss<BR>
Keywords          : kb16bitonly<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
