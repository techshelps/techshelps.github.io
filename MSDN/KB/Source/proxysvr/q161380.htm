

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Only One Default Gateway Allowed on Proxy Server </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161380">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1996/12/20">
<META NAME="Keywords" CONTENT="kbinterop kbusage kberrmsg kbfaq">
<META NAME="KBArea" CONTENT="Support; KB; proxysvr, axsf, winnt, iis, mcis">
<META NAME="Description" CONTENT="  When you use a Winsock proxy or web proxy client, and if the Proxy Server is configured with more than one default gateway, you may get the following error message or related error messages:     Connection timed out  CAUSE =====  The Proxy Server d...">
<META NAME="Product" CONTENT="Proxy Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDKF,QAVZ,QAM5,QBVW,QABA,QAB4,QBWD,QAPP,QALQ,QDNT,QAJQ,QADX,QDIZ,QAKR,QAHE V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Only One Default Gateway Allowed on Proxy Server</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161380</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Proxy Server versions 1.0 and 2.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you use a Winsock proxy or web proxy client, and if the Proxy Server
is configured with more than one default gateway, you may get the following
error message or related error messages:
<P>
<PRE>   Connection timed out

</PRE><h2>CAUSE</h2>
 
<P>
The Proxy Server documentation states:
<P>
<PRE>   A Microsoft Proxy Server computer should have only one IP default
   gateway. The IP address of the default gateway should be configured on
   the external network adapter card only.

   This requirement is a result of the basic architecture of TCP/IP. Only
   one default gateway must be defined on a host that resides on 2 or more
   non-connected networks.

   If the Proxy server is configured with more than network interface, it
   is connected to two networks that are by design non-connected.

   A default gateway is a router that is supposed to be used for all
   traffic that has no specific route. If you have two default-gateways,
   the proxy server TCP/IP stack will assume that they lead to the same set
   of networks. This will cause the proxy server to send Internet traffic
   to the internal network, or internal traffic to the Internet.

</PRE><h2>WORKAROUND</h2>
 
<P>
Remove the default gateway from the advanced TCP/IP settings of the
internal network interface on the Proxy Server and define static routes to
the internal network segments.
<P>
Because no default gateway will be defined for the internal network, you
must add static routes using the Route Add command. These routes can be
made persistent by using the -p command switch.
<P>
For additional information on adding static routes to the routing table,
see the following:

<UL><LI>Type route /? for additional command switches.
<P>
   -or-

<LI>See the following Microsoft Knowledge Base article:
<P>
   ARTICLE-ID: <B><A HREF="../WINNT/Q140859.htm">Q140859</A></B>
<PRE>   TITLE     : TCP/IP Routing Basics for Windows NT

</PRE></UL><h2>MORE INFORMATION</h2>
 
<P>
This is not specific to Proxy Server. When the Microsoft Exchange Dynamic RAS connector contacts an ISP, you can get the above error message; however, the workaround is the same.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: proxy internet server timeout connect fail faq<BR>
frequently asked questions prx2faq winsock<BR>
Keywords          : kbinterop kbusage kberrmsg kbfaq<BR>
Version           : WINNT:1.0,2.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
