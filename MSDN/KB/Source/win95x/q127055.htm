

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How to Cause ScanDisk for Windows to Retest Bad Clusters </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q127055">
<META NAME="KBModify" CONTENT="1996/04/10">
<META NAME="KBCreate" CONTENT="1995/03/09">
<META NAME="Keywords" CONTENT="kbtool">
<META NAME="KBArea" CONTENT="Support; KB; win95x, crossnet, winprint">
<META NAME="Description" CONTENT=" IMPORTANT: This article contains information about editing the registry. Before you edit the registry, you should first make a backup copy of the registry files (System.dat and User.dat). Both are hidden files in the Windows folder.   By default, Sc...">
<META NAME="Product" CONTENT="Windows 95">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBXH,QDJ6,QDL9,QBWN,QBWO,QAVW,QAVX,QBWQ,QAVS,QAEF,QAAP,QAIQ,QBVV,QDJB,QAJX V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Cause ScanDisk for Windows to Retest Bad Clusters</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 10, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q127055</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows 95
</UL> 
<P>
IMPORTANT: This article contains information about editing the registry.
Before you edit the registry, you should first make a backup copy of the
registry files (System.dat and User.dat). Both are hidden files in the
Windows folder.
<P>
<P><h2>SUMMARY</h2>
 
<P>
By default, ScanDisk for Windows (Scandskw.exe) does not test clusters that
are marked as bad in the file allocation table (FAT). This behavior applies
for both compressed and uncompressed drives and is consistent with the
behavior of the MS-DOS ScanDisk utility (Scandisk.exe) included with MS-DOS
version 6.x and Windows 95.
<P>
You can configure ScanDisk for Windows to test clusters marked as bad in
the FAT by editing the registry. This article describes this procedure and
discusses why you might want to clear existing bad cluster marks in the
FAT.
<P>
WARNING: This procedure could possibly prevent certain applications from
functioning properly, prevent certain applications from running at all, or,
in rare cases, cause partial to complete data loss. Use the procedure
described below only at your own risk.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
ScanDisk for Windows does not normally attempt to repair clusters marked as
bad (FF7h for a 12-bit FAT and FFF7h for a 16-bit FAT) because there are
many instances in which the clusters have been marked as bad for a valid
reason. If a bad cluster mark is cleared in this situation, problems could
arise. The following situations are examples of how clearing a bad cluster
mark can cause problems:

<UL><LI>Some encryption programs and programs that are copy protected mark
   one or more clusters as bad to prevent other programs from accessing
   them. Removing the bad cluster mark could cause problems with these
   types of applications.

<LI>Clusters marked as bad may indicate legitimate media defects on the
   physical surface of the disk as identified by another surface scan
   utility. ScanDisk for Windows may not detect anything wrong with a
   marginal cluster that was marked as bad by another utility (such as
   the MS-DOS ScanDisk utility).
<P>
   NOTE: Bad cluster markings due to physical media defects should appear
   only on uncompressed drives. If ScanDisk is unable to read a cluster on
   a DriveSpace compressed drive, it will erase the Microsoft DriveSpace
   FAT (MDFAT) entry for that cluster and change the portion of the file
   that was using that cluster to zero bytes in length. The physical
   sectors previously used by the unreadable cluster are marked as free
   and can be used again.
<P>
</UL>While many clusters are marked as bad for valid reasons, some disk
utilities that are not designed to be run on DriveSpace compressed drives
may incorrectly mark a FAT cluster as bad if they are unable to read the
data for the compressed cluster. There may also be cases where a cluster is
incorrectly marked as bad on an uncompressed drive.
<P>
You can force ScanDisk for Windows to retest bad clusters by modifying the
value for the following registry key:
<P>
<PRE>   HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\
   Applets\Check Drive\Settings

</PRE>NOTE: For information about how to edit the registry, view the Changing
Keys And Values online Help topic in Registry Editor (Regedit.exe). Note
that you should make a backup copy of the registry files (System.dat and
User.dat) before you edit the registry.
<P>
WARNING: Using Registry Editor incorrectly can cause serious problems that
may require you to reinstall Windows 95. Microsoft cannot guarantee that
problems resulting from the incorrect use of Registry Editor can be solved.
Use Registry Editor at your own risk.
<P>
This registry key will exist only if ScanDisk for Windows has already been
run. To have ScanDisk test clusters that have been marked as bad, modify
the Settings value so that the last two digits are "04." For example, if
the current value for Settings is
<P>
<PRE>   81 03 40 00

</PRE>change it to read:
<P>
<PRE>   81 03 40 04

</PRE>Once you modify the value for Settings, ScanDisk for Windows will retest
any clusters marked as bad. If ScanDisk can correctly read a bad cluster,
the following message will be displayed:
<P>
<PRE>   ScanDisk found an error on &lt;volume label&gt; (&lt;drive&gt;)

   Cluster nnn is marked as bad, but ScanDisk cannot detect anything
   wrong with it. Bad clusters are physical areas of your disk that a
   program has identified as being unreliable for storing data.

    - Leave the cluster marked bad and continue. (Default)

      Ensures that the cluster will remain unavailable for storing data,
      which is the safest option. Some encryption programs, or programs
      that are copy protected, mark one or more clusters as bad to
      prevent other programs from accessing them. If you are using one
      of these programs, you should leave the bad cluster mark intact.

    - Clear the bad cluster mark.

      Marks the cluster available for storing data. Although ScanDisk
      did not detect anything wrong with this cluster, you may encounter
      errors if you use it.

    - Test the cluster again.

      Retests the bad cluster. If the test fails, ScanDisk will leave
      the cluster marked as bad and will continue searching your disk
      for other errors. If the test succeeds several times, it is
      probably safe to store data in this cluster.

</PRE>It is important to remember that bad cluster marks on an uncompressed drive
may indicate marginal media that cannot be read reliably. Letting ScanDisk
for Windows clear a bad cluster mark made by another surface scan utility
could result in partial or complete data loss if the cluster cannot be read
reliably. Make sure to back up your hard disk before you let ScanDisk
repair a bad cluster mark on an uncompressed drive.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbtool<BR>
KBSubcategory: wpp95 win95 diskmem<BR>
Additional reference words: 95<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 10, 1996</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
