

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: Too Many User Connections Keep SQL Server from Starting </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q75288 ">
<META NAME="KBModify" CONTENT="1997/04/25">
<META NAME="KBCreate" CONTENT="1991/08/18">
<META NAME="Keywords" CONTENT="kbprg SSrvDB_Lib SSrvServer SSrvTrans">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  Setting memory-related parameters too high can prevent SQL Server from starting properly. Each user connection costs 40K to 42K.  CAUSE =====  The User Connections parameter represents the single largest demand on machine resources. It equates to t...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAGU,QAI5,QBG2,QAKC,QBXS,QAIJ,QAHE,QBC6,QAG8,QAA1,QDI2,QBW7,QBVX,QAU3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Too Many User Connections Keep SQL Server from Starting</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q75288 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Setting memory-related parameters too high can prevent SQL Server
from starting properly. Each user connection costs 40K to 42K.
<P>
<P><h2>CAUSE</h2>
 
<P>
The User Connections parameter represents the single largest demand
on machine resources. It equates to the maximum number of
connections that SQL Server permits at any one time. (It is NOT
directly related to the number of users logged on to the system.)
This becomes a problem because each user costs 42K of SQL Server
memory that is preallocated at start time. This is documented in
the "Microsoft SQL Server System Administrator's Guide." However,
the implications of how rapidly this figure multiplies are easily
overlooked.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
The User Connections parameter must be set to the number of open
processes expected on SQL Server at any one time. It should be set
to the lowest possible value that still accommodates the number of
concurrent users you want to support. If users are denied access,
you might need to raise the figure slightly. Each DBPROCESS requires
one user connection.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For example, suppose there are 156 workstations on the network and
all of them require access to SQL Server on the same machine as the
file and print server.
<P>
SQL Server is installed on a machine containing 16 MB of RAM. Since
this machine is also the file and print server, SQL Server is
set with a memory option of 50 percent of installed memory, or 8192K
(see the "Microsoft SQL Server Installation Guide," page 24). The
procedure cache is left at the default value of 20 percent, and user
connections are set to 156 -- a figure that seems reasonable. The SQL
server is restarted.
<P>
At start-up, SQL Server looks at its configured parameters and
allocates 8192K of machine memory for its exclusive use. It then
preallocates memory for 156 User Connection structures at 42K each, or
6552K. Of the remaining 1640K, it sets aside 20 percent (or 328K) for
compiling stored procedures and related tasks.
<P>
The user connections structures plus the procedure cache total 6890K
of SQL Server's allocated 8192K, leaving only 1.3 MB for SQL Server to
allocate for all other parameters and operations. SQL Server attempts
to start, but cannot. As SQL Server tries to do the impossible,
endless lines of timing dots appear.
<P>
The principal limiting factor in any SQL Server installation is
available resources. SQL Server parameters should, therefore, be set
to the lowest value that still accommodates users' needs. Although
there may be 156 users who need access, the more important question
is, how many will actually have an open DBPROCESS at any one
time? That is, the number to which the User Connections parameter
should be set is the maximum number of expected simultaneous users.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: dblib<BR>
Keywords            : kbprg SSrvDB_Lib SSrvServer SSrvTrans<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 25, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
