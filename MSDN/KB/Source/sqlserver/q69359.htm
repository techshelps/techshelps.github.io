

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INF: Creating a Duplicate SQL Database </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q69359 ">
<META NAME="KBModify" CONTENT="1997/04/25">
<META NAME="KBCreate" CONTENT="1991/02/14">
<META NAME="Keywords" CONTENT="kbusage SSrvGen SSrvWinNT">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  This article describes one method for creating a duplicate SQL database.  MORE INFORMATION  1. Create a database device and log using the DISK INIT command.        disk init       name =                       physname =                             ...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAZV,QABM,QAUJ,QAPF,QAB5,QARM,QAFO,QBXR,QBWD,QAC9,QAK5,QDMH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Creating a Duplicate SQL Database</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q69359 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
  - Microsoft SQL Server versions 4.2, 4.21, and 4.21a
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article describes one method for creating a duplicate SQL
database.
<P>
<P><h2>MORE INFORMATION</h2>
 

<OL><P><LI>Create a database device and log using the DISK INIT command.
<P>
<P><PRE>      disk init
      name = "&lt;device name&gt;"
      physname = "&lt;full path name of .dat file&gt;"
      vdevno = &lt;unused device number&gt;
      size = &lt;size of device&gt;
</PRE><P>
   NOTE: Issue an sp_helpdevice to find out what devices are
   available. For example:
<P>
<P><PRE>      disk init
      name = "developmentdevice"
      physname = "d:\development\development.dat"
      vdevno = 8
      size = 5120
</PRE>
<P><LI>Dump the desired database to the disk dump. Following the example,
   this would be the development database:
<P>
<P><PRE>      dump database &lt;database name&gt; to &lt;dumpdevice&gt;
</PRE><P>
   For example:
<P>
<P><PRE>      dump database development to diskdumpdevelopment
</PRE><P>
   NOTE: Create a dump device by issuing the following command:
<P>
<P><PRE>      sp_addumpdevice "&lt;disk|diskette&gt;", "&lt;logical name&gt;",
      "&lt;physical name&gt;", &lt;cntrltype&gt;
</PRE><P>
   For example:
<P>
<P><PRE>      sp_addumpdevice "disk", "diskdumpdevelopment",
      "d:\dump.dat",2
</PRE>
<P><LI>Rename the desired database, again following this example. The
   desired database is the development database:
<P>
<P><PRE>      sp_renamedb &lt;currentname&gt;, &lt;newname&gt;
</PRE><P>
   For example:
<P>
<P><PRE>      sp_renamedb development, production
</PRE>
<P><LI>Execute the following to re-create the original database on the new
   device:
<P>
   a. create database &lt;database name&gt; on
<P><PRE>      &lt;database device name&gt; = &lt;size of database&gt;,
      &lt;log device name&gt; = &lt;size of log&gt;
</PRE><P>
<P><PRE>      For example:
</PRE><P>
<PRE>         create database development on developmentdevice = 5,
         developmentlog = 2

   b. sp_logdevice &lt;database name&gt;, &lt;logname&gt;

      For example:

         sp_logdevice development, developmentlog

   c. load database &lt;database name&gt; from &lt;dumpdevice&gt;

      For example:

         load database development from diskdumpdevelopment

</PRE></OL>Be sure to run the DBCC CHECKDB and DBCC CHECKALLOC diagnostics on the
newly created database to ensure that it was created correctly.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Dumping loading repair Windows NT<BR>
Keywords            : kbusage SSrvGen SSrvWinNT<BR>
Version             : 4.2 | 4.2 4.21 4.21a<BR>
Platform            : OS/2 WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 25, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
