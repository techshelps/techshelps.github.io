

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIX: Checkpoint Process Access Violation when Log Fills </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q158234">
<META NAME="KBModify" CONTENT="1997/04/09">
<META NAME="KBCreate" CONTENT="1996/10/25">
<META NAME="Keywords" CONTENT="kbbug6.50 kbfix6.50.sp2 kbnetwork SSrvErr_Log SSrvRISC">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="BUG #: 16060 (Windows NT: 6.5)   On SQL Server 6.5 SP1 (6.00.213) Alpha platforms, the checkpoint process will encounter an access violation (AV) if both of the following are true:   - A database's transaction log becomes full between cycles of the  ...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QBCF,QDMH,QAZV,QAI5,QDO3,QBW7,QAKP,QAR4,QAU5,QAHI,QA1S,QAAP,QDKW,QBCE V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Checkpoint Process Access Violation when Log Fills</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q158234</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5 Service Pack 1
</UL> 
BUG #: 16060 (Windows NT: 6.5)
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
On SQL Server 6.5 SP1 (6.00.213) Alpha platforms, the checkpoint process
will encounter an access violation (AV) if both of the following are true:

<UL><LI>A database's transaction log becomes full between cycles of the
   checkpoint process.
<P>
   -and-

<LI>The database has the option "trunc. log on chkpt" enabled.
<P>
</UL>This problem is specific to Alpha platforms, and does not occur on non-
Alpha versions of Microsoft SQL Server.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem, do not use the database option "trunc. log on
chkpt." Instead, do one of the following:

<UL><LI>Develop a procedure to regularly truncate your transaction log using the
   DUMP TRANSACTION command.
<P>
   -or-

<LI>Extend your transaction log to avoid encountering a transaction log full
   condition.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft SQL Server
version 6.5 Service Pack 1. This problem has been corrected in U.S. Service
Pack 2 for Microsoft SQL Server version 6.5. For more information, contact
your primary support provider.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The first symptom of this problem is a process filling up the transaction
log, resulting in the following error in the errorlog:
<P>
<PRE>   spid n Error : 1105, Severity: 17, State: 2

   spid n Can't allocate space for object 'Syslogs' in database 'pubs'
   because the 'logsegment' segment is full. If you ran out of space in
   Syslogs, dump the transaction log. Otherwise, use ALTER DATABASE or
   sp_extendsegment to increase the size of the segment.

</PRE>After the log is full and the checkpoint process wakes up (the checkpoint
process wakes up every 60 seconds), the following error will be written
into the errorlog:
<P>
<PRE>   spid n Automatic checkpointing is disabled in database 'pubs' because
   the log is out of space. It will continue when the DBO successfully
   checkpoints the database. Please free up some space or extend the
   database and then run CHECKPOINT.

   kernel checkpoint: Process 3 generated access violation; SQL Server is
   terminating this process.

</PRE>This problem can occur if the log fills for any database that has the
Truncate Log On Chkpt option enabled.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: SP1<BR>
Keywords            : kbbug6.50 kbfix6.50.sp2 kbnetwork SSrvErr_Log SSrvRISC<BR>
Version             : 6.5 SP1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 9, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
