

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INF: Additional Fallback Considerations </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q153728">
<META NAME="KBModify" CONTENT="1997/07/21">
<META NAME="KBCreate" CONTENT="1996/07/16">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  Fallback is a new feature of SQL Server 6.5 which enables machine fault tolerance for a user database by using a shared drive. For more information, see the following topic in Books Online:     What's New in SQL Server 6.5\Part 3 What's New for Adm...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAJQ,QDNQ,QAA1,QABM,QDI2,QAMA,QAWP,QBVV,QAI5,QAGU,QAZV,QABO,QBVX,QAUJ,QASR V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Additional Fallback Considerations</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q153728</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server version 6.5
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Fallback is a new feature of SQL Server 6.5 which enables machine fault
tolerance for a user database by using a shared drive. For more
information, see the following topic in Books Online:
<P>
<PRE>   What's New in SQL Server 6.5\Part 3 What's New for Administrators\
   Fallback Support.

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Here is a list of general steps to set up a fallback server before taking
the steps listed in Books Online. Note that some of the steps are suggested
to create a transparent change to the fallback server.

<OL><P><LI>Acquire any specialized hardware as defined in Books Online

<P><LI>Install the same network protocols on the fallback server as are on the
   primary computer (as listed in Control Panel\Network).

<P><LI>Choose the same domain for the fallback server as for the primary
   computer and place the fallback server on the same physical LAN segment.

<P><LI>Install SQL Server on the fallback server, making sure of the following:
<P>
   A. That the drive where you're installing SQL Server is not the shared
<P><PRE>      drive
</PRE><P>
   B. That the Net-Libraries listed on the fallback server are the same as
<P><PRE>      on the primary machine
</PRE><P>
   C. That the code page (character set) and sort order are the same as on
<P><PRE>      the primary computer
</PRE><P>
   D. That the sp_configure option "user connections" are set the same as
<P><PRE>      the primary computer
</PRE><P>
   E. That licensing is set up with the same mode as the primary computer,
<P><PRE>      and that the number of licenses for Per Server mode is the same as
      the primary machine. Note that this is legal since only one of the
      servers will use the licenses at a time.
</PRE>
<P><LI>Create SQL Server logons to match the primary computer. The following
   script will create a script of logons with the following exceptions:
<P>
   A. The passwords are null and need to be corrected by the user
<P>
   B. The default database can not be the same as one of the fallback
<P><PRE>      databases
</PRE><P>
   SELECT "exec sp_addlogin " + name + ",NULL," + dbname + "," +
<P><PRE>      language + "," + convert(char(6),suid) FROM syslogins WHERE name
      NOT IN ('sa','probe','repl_publisher','repl_subscriber')
</PRE><P>
   In order to correct the default database, run the following script to
   generate a script. Run the result script after the fallback server
   has taken over the database:
<P>
   SELECT "exec sp_defaultdb " + name + ","+ dbname FROM syslogins WHERE
<P><PRE>      name NOT IN ('sa','probe','repl_publisher','repl_subscriber')
</PRE>
<P><LI>If the primary server is using Integrated or Mixed security, perform the
   following steps:
<P>
   A. Create the same local groups on the fallback server as the primary
<P><PRE>      server using the User Manager for Domains application
</PRE><P>
   B. Create logon permissions on the fallback server with SQL Security
<P><PRE>      Manager or use the following script to create a script of the logon
      permissions:
</PRE><P>
<P><PRE>      CREATE TABLE #groups
<PRE></PRE>      (accountname     char(255) not null,
       grouptype       char(20)  null,
       privilege       char(5)   not null,
       mappedloginname char(255) null,
       permissionpath  char(255) null)
      insert #groups exec xp_logininfo
      select "exec xp_grantlogin '" + rtrim(accountname) + "','" +
         rtrim(privilege) + "'" from #groups

</PRE><P><LI>Test client connectivity by connecting directly to the fallback server.

<P><LI>If you use Remote Stored Procedure calls, then the remote servers and
   remote logons should also be set up on the fallback server.
<P>
</OL>Additionally, the following features of SQL Server may require additional
work to handle fallback support:
<P>
<PRE>   1. Replication
   2. Scheduled tasks
   3. Alerts
   4. SQLMail
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Setup sp_fallback fail over hot backup<BR>
Version             : 6.5<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 21, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
