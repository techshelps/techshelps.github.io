

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PRB: Problem Creating New Login </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q73559 ">
<META NAME="KBModify" CONTENT="1997/04/25">
<META NAME="KBCreate" CONTENT="1991/06/27">
<META NAME="Keywords" CONTENT="kbother SSrvAdmin">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  When trying to create a new login and user name, the following message is received:     User already has a login under a different name.  This happens using either SAF or the system procedures (sp_addlogin followed by sp_adduser).  CAUSE =====  Thi...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWF,QAML,QABM,QBCT,QAGC,QAGB,QAEF,QAGU,QBW7,QAZV,QDKD,QALQ,QAUJ,QAEV,QAJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Problem Creating New Login</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q73559 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When trying to create a new login and user name, the following
message is received:
<P>
<PRE>   User already has a login under a different name.

</PRE>This happens using either SAF or the system procedures (sp_addlogin
followed by sp_adduser).
<P>
<P><h2>CAUSE</h2>
 
<P>
This problem occurs only if the numerically last login [that is,
the login in the syslogins table with max(suid)] has been deleted
from the syslogins table and the username(s) associated with it
has not been deleted. Any login/user name combination created
thereafter may receive the above message.
<P>
In the sp_addlogin procedure, a unique identifier (suid) for a new
login is generated by using max(suid+1) in the query. If the
numerically last login in the syslogins table is deleted, its suid
will be reused by whatever login is created next. In addition, if
the user names previously associated with this suid were not
deleted, the mappings still exist from the syslogins table in
the master database to the sysusers table(s) in the other
database(s). Note that this is also the case if the last (n)
logins are deleted without deleting the associated user names,
since all the suid's will be reused.
<P>
The following are two examples of duplicate logins:
<P>
<P><h3>Using SAF Menu Functions</h3>
 

<OL><P><LI>If the default database for the new login is the same as that
   for the login just deleted, the user receives the message,
   "User already has a login under a different name." The new
   user name is disregarded and the old user name is granted
   privileges again.

<P><LI>The default database specified for the new login is different
   from that for the login just deleted. In this case, the user
   receives no message. The new login is created in the master
   database. The new user name is created in the default database.
   In addition, the mapping with the old user name is maintained.
   This is possible because a login can have several user names
   associated with it, provided they are in different databases.
<P>
</OL><h2>WORKAROUND</h2>
 
<P>
Under most circumstances, neither SAF nor the stored procedures
notify the user to drop a login that has associated user names.
Thus, whenever a login is to be deleted, ALL the user names
associated with it (in one or several databases) must be deleted.
This is mentioned on page 114 of the "Microsoft SQL Server System
Administrator's Guide." This problem becomes immediately noticeable
only if the numerically last login is dropped.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords            : kbother SSrvAdmin<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 25, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
