

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INF: Behavior of Cascading Triggers with Recursive Calls </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q89655 ">
<META NAME="KBModify" CONTENT="1997/04/03">
<META NAME="KBCreate" CONTENT="1992/09/28">
<META NAME="Keywords" CONTENT="kbusage">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  In the Microsoft SQL Server for OS/2 version 4.2  Language Reference  manual under CREATE TRIGGER, two statements refer to recursive behavior of cascading triggers. These statements are not complete in their description of cascading triggers with r...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QATP,QAXB,QAC1,QBD2,QAPN,QABM,QACI,QA9N,QAGI,QAB9,QAA5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Behavior of Cascading Triggers with Recursive Calls</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 3, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q89655 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In the Microsoft SQL Server for OS/2 version 4.2 "Language Reference"
manual under CREATE TRIGGER, two statements refer to recursive behavior of
cascading triggers. These statements are not complete in their description
of cascading triggers with recursive calls and can be misinterpreted. The
purpose of this article defines expected behavior of cascading triggers and
the possible recursive elements.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
There are two statements that appear on page 90 of the "Language Reference"
manual for SQL Server that describe behavior of cascading triggers and
possible recursion. The two statements are as follows:

<OL><P><LI>A trigger does not call itself in response to a second update to the
   same table within the trigger. For example, if an update trigger on
   one column of a table results in an update to another column, the
   update trigger activates only once.

<P><LI>A trigger activates only once per query. Query, in this case, means a
   single data modification statement. A complex query containing a
   WHILE loop can repeat an UPDATE or INSERT many times, an the trigger
   activates each time.
<P>
</OL>First, a trigger cannot cause itself to be fired. However, if a table has
separate triggers for UPDATE, INSERT, and/or DELETE, one of these triggers
can cause one of the remaining two to be activated.
<P>
If it is desired that a trigger cannot fire any other trigger on the same
table, the triggers should be combined into one single trigger, or the
database option for cascading triggers should be turned off.
<P>
Statement number two says that a trigger activates only once per single
data modification statement. This is correct, but it is important to
understand that any INSERT, UPDATE, or DELETE statement fired by a trigger
is its own single data modification statement.
<P>
With this in mind, it is possible to establish a recursive loop between two
or more triggers where the triggers can be on one or more tables. If an
uninterrupted recursive loop is encountered, all statements will be rolled
back after the maximum depth of 16 cascading triggers is reached.
<P>
To clarify how a recursive trigger can occur, use the following example:

<UL><LI>Table A has an INSERT trigger that issues an UPDATE statement to the row
   just inserted.

<LI>Table A has an UPDATE trigger that inserts another row into table A.
<P>
</UL>If a row is INSERTED into table A, the INSERT trigger would fire the UPDATE
trigger by issuing an UPDATE statement to table A. The UPDATE trigger then
issues an INSERT statement into table A that causes the UPDATE trigger to
fire. If this recursive loop is left uninterrupted, it will eventually
reach the maximum depth of 16 and would roll back.
<P>
With understanding of the above information and careful design of the
database, cascading triggers can be a valuable piece of the database
design.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.20 Transact-SQL Trigger<BR>
Keywords            : kbusage<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 3, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
