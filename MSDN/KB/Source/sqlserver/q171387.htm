

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INF: Explanation of Cache Column in Sysobjects &amp; Related Command </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q171387">
<META NAME="KBModify" CONTENT="1997/07/21">
<META NAME="KBCreate" CONTENT="1997/07/15">
<META NAME="Keywords" CONTENT="kbusage SSrvGen">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  Starting with SQL Server 6.5 Service Pack 3, the cache column in the sysobjects system table can be used to indirectly control the cache hit ratio on a per-table basis. This is an advanced configuration technique, and it is not necessary to achieve...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBF0,QBBI,QAHT,QAG8,QABM,QAKC,QAXB,QBWA,QAU3,QAMR,QBC6,QAJQ,QA28,QATJ,QAKD V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Explanation of Cache Column in Sysobjects &amp; Related Command</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q171387</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5 Service Pack 3
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Starting with SQL Server 6.5 Service Pack 3, the cache column in the
sysobjects system table can be used to indirectly control the cache hit
ratio on a per-table basis. This is an advanced configuration technique,
and it is not necessary to achieve good performance. It is strongly
recommended that sysobjects.cache not be adjusted except in highly
controlled situations where a methodical series of tests are run to
carefully evaluate the effects. In addition, the current and projected
locality of reference for a given table should be well understood before
using this technique.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Specifying a non-zero value for sysobjects.cache may, under some
circumstances, improve cache performance of tables that are accessed
non-uniformly. If a non-zero value is specified for this table, any page
that is referenced at least that many times is given an extra trip through
the cache least recently used (LRU) chain (and the reference count is
changed to zero).
<P>
This is similar to the effect of trace flag 1081, except trace flag 1081
applies to index pages of all tables and the reference-count threshold is
one (that is, a single reference is enough to grant an extra trip), whereas
reference-count favoring applies to all pages of specified tables. If a
reference-count threshold is specified for a table, it overrides the effect
of -T1081, except for the root index page. All other index pages for that
table must be referenced the specified number of times to receive an extra
trip through the cache.
<P>
If sysobjects.cache is set too low for a table, too many pages will receive
an extra trip, and no benefit will be realized. The same is true if all
pages of a table are referenced approximately the same number of times in
an interval. On the other hand, if fewer than half of the pages are
referenced significantly more often than the others, setting the threshold
correctly may improve the overall cache hit ratio. The "DBCC
SQLPERF(tabstats,&lt;dbid&gt;)" statement displays the average reference count
("hit count") and the number of pages that will get a second trip through
the cache ("favored pages") on a per-table basis. Set the reference count
threshold slightly above the average reference count, and note the effect
of that change on the number of 'favored' pages versus the total number of
pages of that table in the cache, as well as on the per-table cache-hit
ratio (also displayed by tabstats). Changes to the reference-count
threshold do not take place immediately; you must shut down and restart SQL
Server. Change the reference-count threshold by setting the "allow updates
to system tables" sp_configure option and using the SQL Server UPDATE
statement (you must execute the UPDATE statement in the database in which
the table resides). For example, use the following command:
<P>
<PRE>   update sysobjects set cache=6 where id=object_id('customer')

</PRE>The SQL Server 6.5 cache algorithm can be considered a derivative of the
<PRE>'clock' algorithm in which the rate at which the hands of the clock sweep
</PRE>is equal to the rate that free buffers are generated by the lazywriter, and
the distance between the hands of the clock is the size of the cache. If a
page is referenced at least as many times as the specified threshold
between the time it is touched by the two hands, it will remain in the
cache forever. That time can be determined by dividing the number of pages
on the LRU chain by the number of lazywrites plus clean steals per second.
All three of those values are supplied by the "DBCC SQLPERF(lrustats2)"
statement.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: SP3 SP<BR>
Keywords            : kbusage SSrvGen<BR>
Version             : 6.5<BR>
Platform            : WINNT<BR>
Issue type          : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 21, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
