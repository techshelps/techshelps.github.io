

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INF: Compaq IDA-2 Controller and SQL Data Corruption </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q98630 ">
<META NAME="KBModify" CONTENT="1997/04/28">
<META NAME="KBCreate" CONTENT="1993/05/11">
<META NAME="Keywords" CONTENT="kb3rdparty SSrvServer SSrvWinNT">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  There is a known problem with the Compaq IDA-2 disk controller that can cause SQL Server data corruption.  Compaq has confirmed that under high levels of stress, the Compaq IDA-2 controller may cause data corruption due to a firmware problem relate...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAC1,QAC9,QA39,QAY2,QAXB,QAPN,QBWA,QDJN,QAW6,QAKP,QAJG,QAA5,QBVV,QBFN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Compaq IDA-2 Controller and SQL Data Corruption</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 28, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q98630 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
  - Microsoft SQL Server versions 4.2, 4.21, and 4.21a
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
There is a known problem with the Compaq IDA-2 disk controller that
can cause SQL Server data corruption.
<P>
Compaq has confirmed that under high levels of stress, the Compaq
IDA-2 controller may cause data corruption due to a firmware problem
related to write-caching. The symptom is typically a 605 error, often on
syslogs:
<P>
<PRE>   Attempt to fetch logical page &lt;page&gt; in database &lt;db name&gt; belongs
   to object &lt;object name&gt; not to object &lt;object name&gt;

</PRE>The suggested solution is to run Compaq IDA-2 firmware level 2.60 or
later. An interim solution prior to updating is to turn off IDA-2
write-caching.
<P>
This firmware update is available in two versions:

<UL><LI>It can be downloaded from Compaq's web page at www.compaq.com. The
   upgrade changes are saved in the reserved area of each hard disk
   attached to the controller. In the event that it cannot be read from one
   disk, it is read from the next disk. If it cannot be read from any of
   the attached disks, the controller will revert to the previous version
   and the corruption may return.
<P>
   Upon replacement of any failed drive, Compaq recommends that the
   upgrade be performed again so that the new firmware is recorded on the
   new drive, thus preventing reversion to the previous state.

<LI>The firmware update is also available as a new firmware chip from
   Compaq or a Compaq dealer.
<P>
</UL>A separate problem was found with the Compaq IDA-E expansion
controller. This controller isn't as widely used, and is for attaching
an expansion chassis of hard disk drives to a SystemPro. In this case,
firmware version 1.18 or later is required.
<P>
The Compaq Diagnostic disk has a program called "inspect" that can be
used to determine what firmware version the system is running.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
With the above problem corrected, the Compaq IDA-2 is the only write-
caching controller currently known that potentially will not jeopardize SQL
Server data integrity. Compaq believes it has eliminated all known causes
of cache-induced problems in the IDA-2 design. It has on-board battery
backup, mirrored RAM, and they intercept in hardware all causes of bus and
controller reset, including the reboot switch.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: write caching Windows NT<BR>
Keywords            : kb3rdparty SSrvServer SSrvWinNT<BR>
Version             : 4.2 | 4.2 4.21 4.21a<BR>
Platform            : OS/2 WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 28, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
