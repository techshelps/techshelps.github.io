

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Exchange X.400 MTA over TP4 Sends Only 2 Queued Messages, Stops </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q159185">
<META NAME="KBModify" CONTENT="1997/04/15">
<META NAME="KBCreate" CONTENT="1996/11/11">
<META NAME="Keywords" CONTENT="kbnetwork XCON">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  The Microsoft Exchange Server message transfer agent (MTA) configured with an X.400 Connector over TP4, (1988, monolog) to a foreign X.400 MTA, only transmits two queued messages and fails to send more. Additionally, the association between MTAs wi...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH6,QBWP,QATR,QASC,QBE7,QBE6,QAYY,QAGI,QAIA,QAIB,QALQ,QABI,QAYV,QAR4,QAGB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Exchange X.400 MTA over TP4 Sends Only 2 Queued Messages, Stops</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 15, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q159185</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The Microsoft Exchange Server message transfer agent (MTA) configured with
an X.400 Connector over TP4, (1988, monolog) to a foreign X.400 MTA, only
transmits two queued messages and fails to send more. Additionally, the
association between MTAs will not be released.
<P>
<P><h2>CAUSE</h2>
 
<P>
Expedited data at the transport layer is being improperly handled by
components of Winsock and the TP4 protocol driver, Afd.sys and Isotp.sys
respectively.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem:

<UL><LI>Configure the foreign MTA’s TP4 (OSI) stack to disable or refuse the use
   of Transport Expedited Data during transport session negotiation of the
   association between the MTAs.
<P>
</UL>Consult the documentation of the foreign MTA for information on how to
disable this OSI feature.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.5x. A
supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
This is a post-SP5 fix. No additional official service packs are planned
for Windows NT 3.51. Contact Microsoft Technical Support for more
information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Transport Expedited Data is a special feature of the transport portion OSI
protocol that allows a frame to have a "higher priority" on the network. It
is the intention that this frame would be processed (up the stack) before
other pending, but non-expedited frames. It is typically used to signal th
t an important and timely change is requested, or about to occur (For
instance, a user hits Ctrl-C on a terminal to signal the other side to
cancel the previous request and return control to the user. The Ctrl-C may
be sent in an expedited’ frame if the application was coded to do so, and
expedited data support was negotiated by the transport layer).
<P>
Microsoft Exchange Server has a "Use Expedited data" check box in the X.400
Connector’s Stack property page. This specifies only whether the MTA will
send data via expedited transport frames (if that service has been
negotiated by the transport for the current association). The MTA does not
respond any differently to incoming data that has arrived via expedited
transport frames than it does to regular data, nor does selecting this
check box change the Windows NT TP4 stack behavior.
<P>
The Exchange X.400 MTA, when viewed as an OSI application, does not
configure or directly influence network features of any layer below the
Session layer of the OSI model. The Windows NT TP4 transport layer was
designed to negotiate for the use of expedited data, but to honor a refusal
of that feature when initiating a session. When responding to session
establishment requests, the Windows NT TP4 transport layer accepts whatever
the initiating side requests with regard to expedited data. There is no way
to override or force the Windows NT TP4 transport layer to require or deny
the use of transport expedited data.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: hang<BR>
Keywords            : kbnetwork XCON<BR>
Version             : 3.51 4.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 15, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
