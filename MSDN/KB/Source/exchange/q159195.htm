

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XCON: MTA Terminates Unexpectedly with Event ID 9405 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q159195">
<META NAME="KBModify" CONTENT="1997/04/09">
<META NAME="KBCreate" CONTENT="1997/02/11">
<META NAME="Keywords" CONTENT="kbbug4.00 kbfix4.00.sp4 kbusage XCON">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  The Microsoft Exchange message transfer agent (MTA) terminates unexpectedly with an event similar to the following (as viewed in the Application Event Log):     Event Id: 9405    Source:  MSExchangeMTA    Type:Error    Category: Field Engineering  ...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPN,QAO4,QA5E,QAGB,QBFY,QAI4,QAW6,QAUQ,QBW7,QA4H,QAYA,QAI5,QAAP,QDO3,QAJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XCON: MTA Terminates Unexpectedly with Event ID 9405</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q159195</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:
<P>
- Microsoft Exchange Server, version 4.0
 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The Microsoft Exchange message transfer agent (MTA) terminates unexpectedly
with an event similar to the following (as viewed in the Application Event
Log):
<P>
<PRE>   Event Id: 9405
   Source:  MSExchangeMTA
   Type:Error
   Category: Field Engineering
   Description:
   An unexpected error has occurred which may cause the MTA
   to terminate.  Error: Exception c0000005 occurred at Address
   0x02086698. (16)

</PRE><h2>CAUSE</h2>
 
<P>
An attempt is made to use an MTA Queue Object in a thread of the MTA. In a
different thread of the MTA, the same Queue Object was deleted. When the
first thread attempts to access this deleted object, it results in an MTA
failure.
<P>
<P><h2>STATUS</h2>
 
<P>
The MTA has been modified to attempt to lock the MTA Queue Object before
attempting to access it. This lock prevents other threads from deleting the
object before the first thread is done using it.
<P>
Microsoft has confirmed this to be a problem in Microsoft Exchange Server
version 4.0.
This problem was corrected in the latest Microsoft Exchange 4.0 U.S. Service Pack. For information on obtaining the service pack, query on the following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The Drwtsn32.log file may show a failure such as this (pay particular
attention to the function names listed on the stack back trace):
<P>
Application exception occurred:
<PRE>        App: emsmta.DBG (pid=171)
        Exception number: c0000005 (access violation)

</PRE>State Dump for Thread Id 0xe6
<P>
eax=01620a64 ebx=00000000 ecx=00000000 edx=0000003b esi=01485f60
edi=00000000
<PRE>eip=02086698 esp=004cfc04 ebp=004cfc54 iopl=0         nv up ei pl zr na po
nc
</PRE>cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000
efl=00000246
<P>
function: odplfarb
<PRE>        0208667a 8b4dd0           mov     ecx,[ebp-0x30]
</PRE>ss:009fe576=????????
<PRE>        0208667d 837c080900      cmp dword ptr [eax+ecx+0x9],0x0
</PRE>ds:0052e923=????????
<PRE>        02086682 74ca             jz      0208664e
        02086684 0fbf45dc         movsx   eax,word ptr [ebp-0x24]
</PRE>ss:009fe577=????
<PRE>        02086688 8bc8             mov     ecx,eax
        0208668a c1e004           shl     eax,0x4
        0208668d 03c1             add     eax,ecx
        0208668f 8b4dd0           mov     ecx,[ebp-0x30]
</PRE>ss:009fe576=????????
<PRE>        02086692 8b440809         mov     eax,[eax+ecx+0x9]
</PRE>ds:0052e923=????????
<PRE>        02086696 33c9             xor     ecx,ecx
FAULT -&gt;02086698 8a4805           mov     cl,[eax+0x5]
</PRE>ds:01b4f386=??
<PRE>        0208669b c1e110           shl     ecx,0x10
        0208669e 0fbf45dc         movsx   eax,word ptr [ebp-0x24]
</PRE>ss:009fe577=????
<P>
*----&gt; Stack Back Trace &lt;----*
<P>
FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
004cfc54 0208411f 004cfddc 00000001 00000001 0148609d EMSMTA!odplfarb
[omap]
004cfdf4 0211f763 01485f60 022f00fc 022f57d0 0149345c EMSMTA!odpdqgnx
[omap]
004cfe10 020915c9 00000003 022f57d0 022f0003 0149345c EMSMTA!oxpufsdb
[omap]
004cfe30 0212659c f8000001 004cfeb7 022f5823 022f57d0 EMSMTA!oxpuclos
[omap]
004cfe48 020ad389 f8000001 022e0006 022e0006 00000002 EMSMTA!oxpnlloc
[omap]
004cfec4 02001da4 00000002 00000000 022e0006 022e0035 EMSMTA!oxpgsyst
[omap]
004cfef8 02003528 77f5c0ee 77f42119 00145ab8 4f464e49 EMSMTA!sbpwrcv+0xb7
[omap]
004cff94 02018406 77fac8a0 00145ab8 000000ec 004cffec EMSMTA!sbpwinit+0xd51
[omap]
004cffa8 77e3167a 00000001 00145ac0 77e50000 77f46c2e EMSMTA!sbpisvep+0xa6
[omap]
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: failure crash lock mutually exclusive mutex<BR>
Keywords            : kbbug4.00 kbfix4.00.sp4 kbusage XCON<BR>
Version             : 4.0<BR>
Platform            : WINDOWS<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 9, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
