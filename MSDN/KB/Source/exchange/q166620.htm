

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XGEN: Credentials Caching for Internet Protocols </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166620">
<META NAME="KBModify" CONTENT="1998/01/06">
<META NAME="KBCreate" CONTENT="1997/04/08">
<META NAME="Keywords" CONTENT="XGen kbusage">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  Microsoft Exchange Server version 5.0 supports a number of native Internet protocols, including SMTP, POP3, NNTP, and LDAP. Of these protocols, POP3, NNTP, and LDAP support authentication, in which the user's logon credentials are validated to dete...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAK7,QBWP,QAGU,QAVZ,QBF0,QABA,QA5F,QAMA,QABN,QAI5,QAWK,QAU3,QAMR,QAY5,QACE V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XGEN: Credentials Caching for Internet Protocols</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 6, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166620</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, version 5.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft Exchange Server version 5.0 supports a number of native Internet
protocols, including SMTP, POP3, NNTP, and LDAP. Of these protocols, POP3,
NNTP, and LDAP support authentication, in which the user's logon
credentials are validated to determine their access permissions for the
desired mailbox, newsgroup, or directory object. Exchange Server 5.0
supports both the strong Windows NT Challenge/Response authentication,
which never passes the password across the network, as well as Basic (plain-
text password) authentication. Basic authentication can optionally be
combined with SSL network session encryption to protect passwords and
content against sniffer attacks. All logon processes are mapped to a
Windows NT security account, regardless of the authentication protocol
used.
<P>
Credentials caching is only performed with Basic authentication, not with
Windows NT Challenge/Response. With Basic authentication, the user's
Internet client supplies the user's name and password to the Exchange
Server computer over the wire in plain text. This is the standard method of
operation for Internet protocols. The Exchange Server uses these
credentials to create a session "as" the matching Windows NT user. For
performance reasons, the server caches these credentials in memory.
<P>
The design of the cache is that after a user's credentials have been
validated, the server saves the credentials (hashed using a secure hash)
and their token in memory. Subsequent logon processes using the same
credentials will use this cached token. Each credentials cache entry has a
maximum lifetime of 2 hours (by default), and an idle lifetime of 15
minutes.
<P>
The idle lifetime is the lifetime of the credential if the user never logs
on again with those credentials, the maximum lifetime is the total time a
credential will be cached, even if the session is active, before being
revalidated.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The credentials cache is controlled by the following registry values:
<P>
<PRE>   HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services
   \MsExchangeIs\ParametersNetIf
   \Credentials Cache Age Limit   (Default  = 120 minutes)

   HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services
   \MsExchangeIs\ParametersNetIf
   \Credentials Cache Idle Limit   (Default = 15 minutes)

   HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services
   \MsExchangeIs\ParametersNetIf
   \Credentials Cache Size (Default = 256 buckets; to turn
      off caching, you should set the size = 0)

</PRE>The age limit specifies the maximum length of time (in minutes) for entries
to live in the cache, the Idle limit specifies the amount of idle time
after which a credential cache element will be considered too old (and thus
discarded).
<P>
Most users will not be affected by this issue. For some environments this
behavior represents a relatively minor risk. If a user discovers that their
password has been compromised and changes their password, there is an
additional window of time (around 15 minutes if the session is idle) where
an attacker could still use the compromised password to access mail or
newsgroups via POP3 or NNTP.
<P>
Most users will not need to implement any changes to their environment.
Users who need additional assurances can change the registry parameters
indicated above to smaller values that are acceptable in their environment.
Setting the credentials cache size to 0 (zero) will cause a new
authentication to be performed for every Internet protocol user session.
Because of the nature of Internet sessions, which are often short and
bursty, the tradeoff for disabling credential caching is a potential
reduction in performance. Performance will be affected depending on the
number of Internet users on your system, the frequency with which they
check mail, and the location and load of your Windows NT Domain
Controllers. Setting the cache to zero is not recommended for most
environments.
<P>
This behavior is by product design.
<P>
For information about how to change the delay before user tokens are 
updated in Microsoft Internet Information Server, please see the following 
article in the Microsoft Knowledge Base:
<P>
<PRE>   Article-ID: <B><A HREF="../IIS/Q152526.htm">Q152526</A></B>
   TITLE:      Changing the Default Interval for User Tokens in IIS
</PRE> 
<PRE>Keywords          : XGen kbusage
Version           : 5.0
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 6, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
