

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XADM: Database Size After Offline Defrag Not Same as Total K </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q178931">
<META NAME="KBModify" CONTENT="1998/02/18">
<META NAME="KBCreate" CONTENT="1998/01/07">
<META NAME="Keywords" CONTENT="XADM kbusage">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  When you perform an offline defragmentation on the Priv.edb or the Pub.edb, the size of your database after defragmentation may not coincide with the Total K of all items in Mailbox Resources or Public Folder Resources.  CAUSE =====  There are seve...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAZV,QAEV,QAWH,QAEF,QBVV,QADP,QA1S,QA5M,QAYC,QAJQ,QBCT,QAR2,QAGC,QAGB,QDKY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XADM: Database Size After Offline Defrag Not Same as Total K</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 18, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q178931</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, versions 4.0, 5.0, 5.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you perform an offline defragmentation on the Priv.edb or the Pub.edb,
the size of your database after defragmentation may not coincide with the
Total K of all items in Mailbox Resources or Public Folder Resources.
<P>
<P><h2>CAUSE</h2>
 
<P>
There are several reasons why the actual database size may not match the
total size of Mailbox Resources. For example, if you add the Total K for
each mailbox listed in Mailbox Resources, and it equals 1 GB, and then you
run EDBUTIL /D on the Priv.edb, the resulting database size may be larger
than 1 GB. This difference could range from a few megabytes to several
gigabytes, depending on several factors on the Exchange Server computer,
described in 1-4 below:
<P>
NOTE: In Microsoft Exchange versions 4.0 and 5.0, you use the EDBUTIL /D
command to perform an offline defragmentation of a database. In Microsoft
Exchange version 5.5, you use the ESEUTIL /D command to perform an offline
defragmentation of a database.

<OL><P><LI>The Priv.edb stores more than mailbox messages and folders. Inbox Rules,
   Views, and other items associated with the mailbox are stored here as
   well but are not represented in the Mailbox Resources page.
</OL>2. After an item is deleted or moved, it is not immediately wiped from the
<PRE>   store. A background cleanup process has to run first in order to fully
   commit the change. For more information about background cleanup, see
   the following article in the Microsoft Knowledge Base:

      ARTICLE-ID: <B><A HREF="../EXCHANGE/Q159306.htm">Q159306</A></B>
      TITLE     : XADM: IS Maintenance Tasks Not on IS Schedule.

   Running EDBUTIL /D; after this will give you a better count of what is
   actually in the database.
</PRE></OL>3. Because of the Single Instance Storage feature, one message can belong
<PRE>   to many mailboxes. For example, if you send a message to several
   recipients who reside on the same Exchange Server computer, the message
   is only stored once in the information store, and the recipients just
   receive a pointer to the message. If one recipient deletes the message
   from his or her mailbox, the message is not deleted from the information
   store, only the pointer to it. The message itself is not deleted until
   the last recipient deletes it. This also means that all messages
   associated with a user may not be removed from the Exchange Server
   computer when you move the user's mailbox to another Exchange Server
   computer. The message sent to several recipients will remain on the
   Exchange Server computer until all recipients of the message have been
   moved to another Exchange Server computer or they all delete their
   pointer.
</PRE>4. The Jet database engine uses sector level allocation. Every operation
<PRE>   that requests new memory and requires that a new extent be allocated, is
   given a new extent of 16 pages (a page is 4 KB) -- regardless of the
   actual number of pages being requested (may be one page). This leads to
   a relatively sparse database structure. Therefore, it's generally true
   that the size of a Jet database will always be larger than the amount of
   data it contains.

</PRE>NOTE: Before you perform an EDBUTIL /d on any Microsoft Exchange database,
make sure the drive that the utility is running against has available free
disk space equal to twice the size of the database that is being
defragmented.
 
<PRE>Keywords          : XADM kbusage
Version           : WINDOWS:4.0,5.0,5.5
Platform          : WINDOWS
Issue type        : kbprb</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 18, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
