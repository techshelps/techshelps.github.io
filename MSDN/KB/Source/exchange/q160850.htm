

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XADM: DS_E_BUSY After Directory Service Restore </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q160850">
<META NAME="KBModify" CONTENT="1998/01/23">
<META NAME="KBCreate" CONTENT="1996/12/11">
<META NAME="Keywords" CONTENT="kbbug4.00 kbbug5.00 kbfix4.00 kbfix5.00.sp1 XADM kbidea">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  When a directory is restored from backup it attempts to get back copies of all the objects that it last modified or added and that it replicated out to other computers since it was backed up; this is called backsync. During backsync, you can get in...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBXB,QALW,QATJ,QAFI,QAKD,QAGC,QA5E,QAML,QAPN,QAFO,QBVV,QAO4,QAEF,QDKW,QBW1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XADM: DS_E_BUSY After Directory Service Restore</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 23, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q160850</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, versions 4.0 and 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When a directory is restored from backup it attempts to get back copies of
all the objects that it last modified or added and that it replicated out
to other computers since it was backed up; this is called backsync. During
backsync, you can get into a situation where it is not possible to make
directory changes for up to 16 hours. When you attempt to modify the
directory while it is in this state, the Microsoft Exchange Server
Administrator program will display the following message:
<P>
<PRE>   The directory is busy. Wait a few minutes and try again.

   Microsoft Exchange Directory
   ID no: DS_E_BUSY

</PRE>The following event ID will also be logged:
<P>
<PRE>   Event ID: 1173.  A privileged operation (rights required = 0x4) on
   object failed because a non-security related error occurred.

</PRE><h2>CAUSE</h2>
 
<P>
This will most often occur after the restoration of a directory on a server
that has the schedule on its connectors set to Never. The directory service
agent (DSA) is hardcoded to try to backsync for up to 16 hours even if it
is unable to do so.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem, do one of the following:

<UL><LI>Make sure that the schedule on the connector of the remote Directory
   Replication Bridgehead is not set to Never. If it is, either set it to
   Always to allow for the proper delivery of directory replication
   messages, or wait for 16 or 4 hours respectively for this to time out.
<P>
</UL>-OR-
<P>
In Microsoft Exchange Server 5.0 SP1, it is possible to add a value to the 
registry that will control this timeout:
<P>
<PRE>   Under the HKEY_LOCAL_MACHINE subtree, add the value in minutes to the
   following subkey:

      Key: System\CurrentControlSet\Services\MSExchangeDS\Parameters\
      Value: Replicator inter site backsync timeout
      Data Type: REG_DWORD
      Value data: &lt;number-of-minutes-in-hex&gt;
      
   The hex value of "f" equals 15 minutes in the line above.

   This value is case-sensitive and must be entered as shown above.

</PRE><h2>MORE INFORMATION</h2>
 
<P>
When a directory is restored from backup it attempts to get back --
backsync -- copies of all the objects which it last modifed or added which
it replicated out to other computers since it was backed up. These
computers can be in the same site or another site. Backsync is necessary
becuase normally changes made at a DSA do not replicate back to that
DSA, and also the Update Sequence Number (USN) for a restored computer
will be lower than the USN it had before being restored. This means that
if any changes are made at the restored computer before it has
backsync'ed, they will not replicate out until the USN climbs to the
value it was before the server was restored.
<P>
If the backsync is overridden by reducing the timeout, there is a risk
of this replication loss. Therefore the backsync timeout should only be
reduced or eliminated when you are sure that no changes were made at the
restored computer since the computer was backed up."
 
<PRE>Keywords          : kbbug4.00 kbbug5.00 kbfix4.00 kbfix5.00.sp1 XADM kbidea
Version           : 4.0 5.0
Platform          : winnt</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 23, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
