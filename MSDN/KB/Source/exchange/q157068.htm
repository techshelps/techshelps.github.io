

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XCON: MTA Server Work Queue Increases Perfmon Unrealistically </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q157068">
<META NAME="KBModify" CONTENT="1997/04/09">
<META NAME="KBCreate" CONTENT="1970/01/01">
<META NAME="Keywords" CONTENT="kbbug4.00 kbfix4.00.sp4 kbusage XADM kbbug4.00">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  After restarting the Microsoft Exchange message transfer agent (MTA), and viewing the Performance Monitor object (MSExchangeMTA, Work Queue Length), the value for this counter continues to increase at an unrealistic rate, and does not accurately re...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA26,QAG0,QAKC,QAPN,QBC6,QAM9,QALX,QABI,QDO3,QAG8,QAW6,QAR4,QAIJ,QAH6,QABH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XCON: MTA Server Work Queue Increases Perfmon Unrealistically</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q157068</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After restarting the Microsoft Exchange message transfer agent (MTA), and
viewing the Performance Monitor object (MSExchangeMTA, Work Queue Length),
the value for this counter continues to increase at an unrealistic rate,
and does not accurately reflect the number of work queue items on the work
queue.
<P>
<P><h2>CAUSE</h2>
 
<P>
During recovery (a process initiated shortly after an MTA restart when it
checks and rebuilds the various routing queues), the MTA could loop on an
object.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
There is no workaround available.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft Exchange version
4.0.
This problem was corrected in the latest Microsoft Exchange 4.0 U.S.
Service Pack. For information on obtaining the service pack, query on the
following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Recovery is the process of rebuilding the MTA's queues. After recovery
completes, fanout begins. Fanout is the process of placing objects onto the
various queues. Enabling medium level logging on "MSExchangeMTA, X.400
Service" allows a log of useful association and send (271)\receive (272)
events to be generated. Examining 271 and 272 events can confirm that the
MTA has completed recovery and started fanout and delivery of mail.
<P>
A formula for calculating the approximate number of messages currently
awaiting processing by the MTA is:
<P>
<PRE>   &lt;the number of *.dat files in \MTADATA&gt;/2

</PRE>Fanout can be expected after the Work Queue Length approaches this
calculated estimate. (The perfmon counter may exceed this estimate by 15 to
20 percent before fanout is observed.)
<P>
If all of these conditions are met, it is likely you are experiencing this
problem and should obtain the fix noted in the "Status" section of this
article:

<UL><LI>The Work Queue Length grows quickly after startup.
<LI>The Work Queue Length continues growing.
<LI>The Work Queue Length exceeds the calculated number above significantly.
<LI>The MTA has not begun fanout.
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbbug4.00 kbfix4.00.sp4 kbusage XADM kbbug4.00<BR>
Version             : 4.0<BR>
Platform            : WINDOWS<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 9, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
