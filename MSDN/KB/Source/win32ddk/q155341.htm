

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>New README File for Generic Port I/O Driver </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q155341">
<META NAME="KBModify" CONTENT="1997/04/07">
<META NAME="KBCreate" CONTENT="1996/08/27">
<META NAME="Keywords" CONTENT="NTDDKKMode kbreadme">
<META NAME="KBArea" CONTENT="Support; KB; win32ddk">
<META NAME="Description" CONTENT="  The README file in the Windows NT DDK genport contains insufficient data. This article contains a new README file designed to assist inexperienced NT developers. It can also be a useful reference tool for experienced developers.  MORE INFORMATION  ...">
<META NAME="Product" CONTENT="Win32 DDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAU9,QAVX,QAVW,QDJP,QAKG,QART,QAFI,QAB5,QAH4,QBXB,QAY2,QATJ,QAA5,QAPF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>New README File for Generic Port I/O Driver</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 7, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q155341</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.50 3.51 4.00
WINDOWS NT
kbreadme
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Win32 Device Driver Kit (DDK) for Windows NT,
   version 3.50, 3.51, 4.00
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The README file in the Windows NT DDK genport contains insufficient data.
This article contains a new README file designed to assist inexperienced NT
developers. It can also be a useful reference tool for experienced
developers.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Generic Port I/O Driver</h3>
 
<P>
Included with this file are:
<P>
- a Windows NT device driver to provide simple access to 8- 16- and 32-bit
<PRE>  IO ports.

</PRE>- some simple test programs that read from and write to ports.
<P>
The following sample is based on an x86 machine. If you use a Power PC,
a MIPS, or an Alpha machine, just replace the processor &lt;i386&gt; with
&lt;PPC&gt; or &lt;MIPS&gt; or &lt;ALPHA&gt;.
<P>
NOTE: This device driver provides an example of a minimal driver. Neither
it nor the sample programs are intended to be used in a production
environment. Rather, they are intended as a skeleton driver for those
devices that do not use interrupts or DMA.
<P>
Building the Driver and its Test Programs
 
<P>
To compile the device driver:

<OL><P><LI>Click the "Free Build Environment" or "Checked Build Environment"
   icon under your "Windows NT DDK" program's group to set basic
   environment variables needed by NT.

<P><LI>Change to the directory containing the device source code, such as
   cd SRC\GENERAL\PORTIO.

<P><LI>Run "BUILD -cef," or use the macro "BLD." This behavior invokes the
   Microsoft make routines that produce log files called BUILD.LOG,
   BUILD.WRN, and BUILD.ERR. The WRN file will contain warnings. If the
   build succeeds, the driver will be named "genport.sys," and it can be
   found in the I386 subdirectory of your DDK directory. The gpdRead.exe
   and gpdWrite.exe will be built and placed in the same &lt;i386&gt; output
   directory.
<P>
</OL><h3>Driver Installation Examples</h3>
 

<OL><P><LI>Copy the genport.sys file from the &lt;DDK&gt;\Lib\I386\&lt;Free or checked
   build&gt; subdirectory created by BUILD to the &lt;NTROOT&gt; \SYSTEM32\DRIVERS
   directory where all the NT device drivers are stored. If the system
   responds "ACCESS DENIED," a previous version of the file is currently in
   use and NT will not let you replace it. You can unload it by typing "net
   stop genport."

<P><LI>Copy gpdREAD.exe and gpdWRITE.exe from the &lt;DDK&gt;\Lib\I386\&lt;Free or
   checked build&gt; subdirectory created by BUILD to your target \&lt;Test
   directory&gt; where you will exercise the read and write test.

<P><LI>To install the Generic Port I/O driver (GENPORT):
<P>
   a. Copy &lt;ddkroot&gt;\src\general\portio\sys\genport.ini to anywhere
<P><PRE>      in your target machine so you can initialize the registry for this
      genport driver.
</PRE><P>
   b. Use the REGINI utility to create the entries listed in the
<P><PRE>      genport.ini file. For example:
</PRE><P>
<P><PRE>      Regini genport.ini
      (You must do this with "Administrator" privilege)
</PRE><P>
</OL>NOTE: This adds a GENPORT driver key to the
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\GenPort's tree in the
registry. You can verify this by running REGEDT32.EXE and looking in this
mentioned location.
<P>
<PRE>   c. Reboot a machine under test.

   When testing the gpdRead.exe or gpdWrite.exe, note that your driver is
   not loaded if an the error "Can't read from a device" appears on your
   screen. gpdRead and gpdWrite are defaulted to port address 300h.

   If this port has been claimed by another device, then the driver
   "genport.sys" won't be loaded and gpdRead and pgdWrite will not
   function. You can run "winmsd" to see if port address 300h is being
   used. If it is, go into the "genport" register entry to modify its port
   address to an unused address, and then reboot your machine. There should
   also be a message in the event log indicating that the driver didn't
   load if the conflict did occur.

   d. To test your genport driver, do the following:

   gpdRead  -b 1   {This reads a byte from port 0301H }
   gpdWrite -b 1   {This writes a byte to port 0301H }
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbreadme<BR>
KBSubcategory:<BR>
Additional reference words: 3.51 4.00 kbdsh Genport<BR>
Keywords            : NTDDKKMode kbreadme<BR>
Version             : 3.50 3.51 4.00<BR>
Platform            : NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 7, 1997</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
