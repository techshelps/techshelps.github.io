

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>INFO: Debug Printing Implementation in the Device Drivers </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q90082 ">
<META NAME="KBModify" CONTENT="1998/02/17">
<META NAME="KBCreate" CONTENT="1992/10/08">
<META NAME="Keywords" CONTENT="NTDDKDebug">
<META NAME="KBArea" CONTENT="Support; KB; win32ddk">
<META NAME="Description" CONTENT="  Each device driver uses its own method for debug printing. There are things that each method will have in common.  Many of the drivers use a debug print routine that controls the level of debug messages that are printed. Debug printing can also typ...">
<META NAME="Product" CONTENT="Win32 DDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAYL,QAOX,QAEV,QAA3,QAU9,QAVX,QAYC,QBWP,QATX,QAJQ,QANY,QAB5,QBVV,QBE7,QBE6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INFO: Debug Printing Implementation in the Device Drivers</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 17, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q90082 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Win32 Device Development Kit (DDK) for Windows NT,
   versions 3.1, 3.5, 3.51
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Each device driver uses its own method for debug printing. There are
things that each method will have in common.
<P>
Many of the drivers use a debug print routine that controls the level of
debug messages that are printed. Debug printing can also typically be
disabled. Here are some examples of the different print routines and how
they are used:
<P>
<PRE>   COM driver                           SerialDump()
   AT disk controller                   AtDump()
   SCSI class, port, and miniport       DebugPrint()

</PRE>In the SCSI drivers, if DBG is defined, then debug printing can be used
(checked build). If DBG is not defined, then debug printing is not used
(free build).
<P>
<PRE>   #if DBG
   #define DebugPrint(x)  ScsiDebugPrint x
   #else
   #define DebugPrint(x)
   #endif

</PRE>The messages that can be printed are classified by level, 0 being the
lowest level, 3 being the highest level. When a call is made to the
debug printing routine, the first variable is a message level and the
second variable is a message string.
<P>
<PRE>   DebugPrint((1,"ScsiCdRomRead: Invalid I/O parameters\n"));

</PRE>The debug printing routine compares the message level with a global
variable (defined by the device driver) that sets the current message
level that can be printed. If the message level is acceptable, the
message string is printed. The comparison method varies between drivers.
For example, messages from SCSI drivers are printed if they are less
than or equal to the current message level. The AT disk controller
performs an ORing operation to determine if the message is printable.
The following mechanism is used by the COM driver
<P>
<PRE>   #if DBG
   #define SerialDump(LEVEL, STRING) \
      do {\
         if(SerialDebugLevel &amp; LEVEL){\
            DbgPrint STRING; \
         }\
         if(LEVEL == SERBUGCHECK){\
            ASSERT(FALSE);\
         }\
      }while(0)
   #else
   #define SerialDump(LEVEL, STRING) do {NOTHING;} while(0)
   #endif

</PRE><h2>MORE INFORMATION</h2>
 
<P>
For the COM driver, the global variable used to store the current
message level is SerialDebugLevel. See INITUNLO.C to examine this
variable's usage. For the AT ESDI disk driver, the variable used is
AtDebugLevel. See ATDISK.C for this variables usage. The global variable
for SCSI drivers is ScsiDebug. All of these variables (SerialDebugLevel,
AtDebugLevel and ScsiDebug) have a default value of 0 and could be
modified to produce more debugging output.
<P>
Note, since source code for SCSIPORT.SYS is not available with the NT
DDK, this variable can only be modified from the kernel debugger in the
following manner:
<P>
<PRE>   kd &gt;ed scsiport!scsidebug 3
   kd &gt;g
</PRE> 
<PRE>Keywords          : NTDDKDebug
Version           : WINNT:3.1,3.5,3.51;
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 17, 1998</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
