

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BufferAccessScsiPortControlled Flag Information </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q116450">
<META NAME="KBModify" CONTENT="1995/09/18">
<META NAME="KBCreate" CONTENT="1994/06/20">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; win32ddk">
<META NAME="Description" CONTENT="  Both Windows NT and Windows 95 use SCSI miniport drivers, though there are implementation differences. Using Windows 95 SCSI miniport drivers, the SCSI port driver can emulate scatter-gather in some cases. A large performance benefit can be gained ...">
<META NAME="Product" CONTENT="Win32 DDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAU9,QBWP,QAY5,QDJP,QAKG,QDL9,QBWQ,QBWO,QBWN,QAU3,QAMR,QBXS,QBVV,QAYY,QBQU V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BufferAccessScsiPortControlled Flag Information</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q116450</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Win32 Device Development Kit (DDK) for Windows NT,
   versions 3.1, 3.5, and 3.51
<LI>Microsoft Win32 DDK for Windows 95
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Both Windows NT and Windows 95 use SCSI miniport drivers, though there are
implementation differences. Using Windows 95 SCSI miniport drivers, the
SCSI port driver can emulate scatter-gather in some cases. A large
performance benefit can be gained if a miniport driver is written cleanly
and notifies the port driver that it can emulate scatter-gather.
<P>
The PORT_CONFIGURATION_INFORMATION structure, defined in the header SRB.H,
contains configuration information used to initialize the adapter. This
structure contains a Boolean field BufferAccessScsiPortControlled which is
used to indicate to the port driver that the miniport driver will not
directly touch its data buffers. See "MORE INFORMATION" for details.
<P>
Using BufferAccessScsiPortControlled will currently effect behavior in
Windows 95. The current SCSI port driver implementation in Windows NT does
not look at this flag, so there is no current performance increase, but
designing a miniport to work well under Windows 95 will not hurt
performance under Windows NT.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The main reason for the Boolean BufferAccessScsiPortControlled is to give
the SCSI port driver the ability to determine if a SCSI miniport driver
does not include any coding behavior such as
<P>
<PRE>   DataBufferPointer = x

</PRE>and instead use the ScsiPort{Read,Write}XxxBuffer functions with the data
buffer pointer. When the Boolean is set, depending on the operating system
and SCSI port driver implementation, the the DataBuffer field in the
miniport may not necessarily actually point to the data buffer.
<P>
If a miniport always uses the set of ScsiPort{Read,Write}Xxx() functions
for I/O to ports and registers (using the character and buffer versions of
these functions for for uchar, ushort, ulong data transfers), a miniport
driver should set BufferAccessScsiPortControlled to TRUE. This will greatly
speed up I/O performance, allowing the SCSI port driver to manage its
scatter-gather support much more efficiently.
<P>
If a miniport directly touches the memory buffers from an SRB (for example,
it sets values in this buffer using some form of "buffer = value" instead
of using the ScsiPort{Read,Write}Xxx functions), then the driver should set
BufferAccessScsiPortControlled to FALSE (the default value). As a result,
the performance of this miniport will be much slower whenever the port
driver emulates scatter-gather.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10 3.50 4.00<BR>
KBCategory: kbprg<BR>
KBSubcategory:<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1995</FONT>
	<BR>
	<A HREF="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
