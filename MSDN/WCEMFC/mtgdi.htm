<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MTGDI</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h2><a name="_vcce_mtgdi"></a>MTGDI</h2>
<p>
The MTGDI sample is a demonstration of sharing GDI resources among multiple threads using the framework's single document interface (SDI) support for documents and views.</p>
<p>
You can use the menu to add 1, 10, or 25 new threads at a time. Each thread displays either a moving ball, rectangle, or line in a random color.</p>
<p>
MTGDI uses a set of <a href="cwinthrd.htm"><b>CWinThread</b></a>-derived classes, all of which are implemented in THREADS.CPP. The sample's own <b>CGDIThread</b> is the virtual base class for each of these GDI thread classes (one each for balls, rectangles, and lines). Since GDI resources cannot be shared among threads as MFC objects, this sample also demonstrates how to convert from standard GDI resources to MFC objects and back.</p>
<p>
The application creates the desired number of threads when the user chooses to add new objects to those being displayed by the Thread<b> </b>menu. Each new object displayed is handled in its own thread. Any number of threads can be added to those already in progress. The number of threads currently being handled is shown in the title bar.</p>
<p>
The threads are shut down all at once from the Thread<b> </b>menu, but you have a choice between whether this shutdown is done slowly or quickly. If there are fewer than 100 threads, it is difficult to tell the difference in speed between these two methods for MTGDI.</p>
<p>
This sample demonstrates the following keywords:</p>
<table cellspacing=4 cols=2 width=447>
<tr valign=top>
<td width=50%><a href="carchi_10.htm"><b>CArchive::IsStoring</b></a></td>
<td width=50%><a href="crect_15.htm"><b>CRect::SetRect</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_2.htm"><b>CDC::Attach</b></a></td>
<td width=50%><a href="csingllk_5.htm"><b>CSingleLock::Unlock</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_8.htm"><b>CDC::Detach</b></a></td>
<td width=50%><a href="cstring_9.htm"><b>CString::Format</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_16.htm"><b>CDC::Ellipse</b></a></td>
<td width=50%><a href="cstring_17.htm"><b>CString::LoadString</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_40.htm"><b>CDC::GetSafeHdc</b></a></td>
<td width=50%><a href="cwinapp_2.htm"><b>CWinApp::AddDocTemplate</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_51.htm"><b>CDC::LineTo</b></a></td>
<td width=50%><a href="cwinapp_21.htm"><b>CWinApp::OnFileNew</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_54.htm"><b>CDC::MoveTo</b></a></td>
<td width=50%><a href="cwinthrd_2.htm"><b>CWinThread::CreateThread</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_62.htm"><b>CDC::Rectangle</b></a></td>
<td width=50%><a href="cwinthrd_13.htm"><b>CWinThread::ResumeThread</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdc_70.htm"><b>CDC::SelectObject</b></a></td>
<td width=50%><a href="cwinthrd_15.htm"><b>CWinThread::SetThreadPriority</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cdialog_5.htm"><b>CDialog::DoModal</b></a></td>
<td width=50%><a href="cwnd_36.htm"><b>CWnd::GetClientRect</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cgdiob_2.htm"><b>CGDIObject::Attach</b></a></td>
<td width=50%><a href="cwnd_83.htm"><b>CWnd::Invalidate</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cgdiob_7.htm"><b>CGDIObject::Detach</b></a></td>
<td width=50%><a href="cwnd_190.htm"><b>CWnd::SetWindowText</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_3.htm"><b>CList::AddTail</b></a></td>
<td width=50%><object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_CloseHandle">
</object><a href=JavaScript:alink_1.Click()><b>CloseHandle</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_8.htm"><b>CList::GetCount</b></a></td>
<td width=50%><object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_CreateEvent">
</object><a href=JavaScript:alink_2.Click()><b>CreateEvent</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_10.htm"><b>CList::GetHeadPosition</b></a></td>
<td width=50%><object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_DeleteCriticalSection">
</object><a href=JavaScript:alink_3.Click()><b>DeleteCriticalSection</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_11.htm"><b>CList::GetNext</b></a></td>
<td width=50%><object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_EnterCriticalSection">
</object><a href=JavaScript:alink_4.Click()><b>EnterCriticalSection</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_17.htm"><b>CList::IsEmpty</b></a></td>
<td width=50%><object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_InitializeCriticalSection">
</object><a href=JavaScript:alink_5.Click()><b>InitializeCriticalSection</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="clist_20.htm"><b>CList::RemoveHead</b></a></td>
<td width=50%><object id=alink_6 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_LeaveCriticalSection">
</object><a href=JavaScript:alink_6.Click()><b>LeaveCriticalSection</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cobject_2.htm"><b>CObject::AssertValid</b></a></td>
<td width=50%><object id=alink_7 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_SetEvent">
</object><a href=JavaScript:alink_7.Click()><b>SetEvent</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="cobject_4.htm"><b>CObject::Dump</b></a></td>
<td width=50%><object id=alink_8 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_win32_WaitForSingleObject">
</object><a href=JavaScript:alink_8.Click()><b>WaitForSingleObject</b></a></td>
</tr>
<tr valign=top>
<td width=50%><a href="crect_13.htm"><b>CRect::OffsetRect</b></a></td>
<td width=50%></td>
</tr>
</table><br>
<p>
You can find the MTGDI project files  in the Wce\Samples\Mfc\MTGDI directory.</p>
<p>
To build the MTGDI sample, follow the procedure described in <object id=alink_9 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_wcesdk_Building_the_Sample_Applications">
</object><a href=JavaScript:alink_9.Click()>Building the Sample Applications</a>, selecting one or more of the following project configurations. </p>
<ul>
<li>
WCE x86em (Desktop PC Windows CE emulation)</li>
<li>
WCE x86</li>
<li>
WCE PPC</li>
<li>
WCE MIPS</li>
<li>
WCE SH</li>
</ul>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
