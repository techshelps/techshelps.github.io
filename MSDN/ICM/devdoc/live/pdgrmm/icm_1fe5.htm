<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using GDI Functions With ICM</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_using_gdi_functions_with_icm"></a>Using GDI Functions With ICM</h3>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
There are various functions in the graphics device interface (GDI) that use or operate on color data. Some are enabled for use with ICM and some are not. The following GDI functions are relevant to ICM:
<ul>
<li>
<a href="#_win32_device_context_functions_with_icm">Device Context Functions with ICM</a></li>
<li>
<a href="#_win32_pen_and_brush_functions_with_icm">Pen And Brush Functions with ICM</a></li>
<li>
<a href="#_win32_text_output_functions_with_icm">Text Output Functions with ICM</a></li>
<li>
<a href="#_win32_bitmap_functions_with_icm">Bitmap Functions with ICM</a></li>
</ul>

<h4><a name="_win32_device_context_functions_with_icm"></a>Device Context Functions with ICM</h4>
<dl>
<dt>
<b>CreateCompatibleDC</b></dt>
<dd>
If the device context (DC) that is passed to this function through its <i>hdc</i> parameter is enabled for ICM, then the DC the function creates is also ICM-enabled. The source and destination color spaces are specified in the DC.</dd>
<dt>
<b>CreateDC</b></dt>
<dd>
ICM can be enabled by setting the <b>dmICMMethod</b> member of the <b>DEVMODE</b> structure pointed to by the <i>pInitData </i>parameter to the appropriate value. For details, see the documentation in the Platform SDK on the <b>DEVMODE</b> structure.</dd>
<dt>
<b>ResetDC</b></dt>
<dd>
The color profile of the device context specified by the <i>hdc</i> parameter will be reset based on the information in the <b>DEVMODE</b> structure specified by the <i>lpInitData</i> parameter.
</dd>
</dl>

<h4><a name="_win32_pen_and_brush_functions_with_icm"></a>Pen And Brush Functions with ICM</h4>
<dl>
<dt>
<b>Brush Functions</b></dt>
<dd>
No color management is done at brush creation. However, color management will be performed when the brush is selected into an ICM-enabled DC.</dd>
<dt>
<b>CreatePen</b></dt>
<dd>
No color management is done at pen creation. However, color management will be performed when the brush is selected into an ICM-enabled DC.</dd>
<dt>
<b>ExtCreatePen</b></dt>
<dd>
No color management is done at pen creation. However, color management will be performed when the brush is selected into an ICM-enabled DC.</dd>
<dt>
<b>SelectObject</b></dt>
<dd>
If the object being selected is a brush or a pen, color management is performed.</dd>
<dt>
<b>SetDCBrushColor</b></dt>
<dd>
Color management is performed if ICM is enabled.</dd>
<dt>
<b>SetDCPenColor</b></dt>
<dd>
Color management is performed if ICM is enabled.
</dd>
</dl>

<h4><a name="_win32_text_output_functions_with_icm"></a>Text Output Functions with ICM</h4>
<dl>
<dt>
<b>SetBkColor</b></dt>
<dd>
Color management is performed if ICM is enabled.</dd>
<dt>
<b>SetTextColor</b></dt>
<dd>
Color management is performed if ICM is enabled.
</dd>
</dl>

<h4><a name="_win32_bitmap_functions_with_icm"></a>Bitmap Functions with ICM</h4>
<dl>
<dt>
<b>BitBlt</b></dt>
<dd>
No color management is performed when blits occur.</dd>
<dt>
<b>CreateDIBitmap</b></dt>
<dd>
The <i>fuUsage</i> parameter specifies that the <b>bmiColors </b>member of the <b>BITMAPINFO</b> structure pointed at by the <i>lpbmi</i> parameter does or does not contain color information. If it does not, no color management is performed for this bitmap. The bitmap must use version 4 or version 5 of the <b>BITMAPINFO</b> structure for color management to be enabled. The contents of the resulting bitmap are not color matched after the bitmap has been created.</dd>
<dt>
<b>CreateDIBSection</b></dt>
<dd>
If the <b>BITMAPINFO</b> structure passed through the <i>pbmi</i> parameter is not version 4 or version 5, no color management is done. If it is version 4 or 5, color management is enabled, and the specified color space is associated with the bitmap.</dd>
<dt>
<b>MaskBlt</b></dt>
<dd>
No color management is performed when blits occur.</dd>
<dt>
<b>SelectObject</b></dt>
<dd>
If the object is a bitmap created with <b>CreateDIBSection</b>, color management is performed. The bitmap's color space is used as the destination color space.</dd>
<dt>
<b>SetDIBits</b></dt>
<dd>
Color management is performed. If the specified <b>BITMAPINFO</b> structure is not version 4 or version 5, the color profile of the current DC is used as the source color space profile. If it does not have one, the sRGB space is used. If the specified <b>BITMAPINFO</b> structure is version 4 or version 5, the color space profile specified in the bitmap header is used as the source color space profile.</dd>
<dt>
<b>SetDIBitsToDevice</b></dt>
<dd>
Color management is performed. If the specified <b>BITMAPINFO</b> structure is not version 4 or version 5, the color profile of the current device context is used as the source color space profile. If it doesn't have one, the sRGB color space is used. If the specified <b>BITMAPINFO</b> structure is version 4 or version 5, the color space profile associated with the bitmap is used as the source color space.</dd>
<dt>
<b>SetDIBColorTable</b></dt>
<dd>
No color management is performed.</dd>
<dt>
<b>StretchBlt</b></dt>
<dd>
No color management is performed when blits occur.</dd>
<dt>
<b>StretchDIBits</b></dt>
<dd>
Color management is performed. If the specified <b>BITMAPINFO</b> structure is not version 4 or version 5, the color profile of the current DC is used as the source color space profile. If it does not have one, the sRGB space is used. If the specified <b>BITMAPINFO</b> structure is version 4 or version 5, the color space profile specified in the bitmap header is used as the source color space profile.
</dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
