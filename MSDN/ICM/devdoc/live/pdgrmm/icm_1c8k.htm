<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ColorMatchToTarget</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_colormatchtotarget"></a>ColorMatchToTarget</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>ColorMatchToTarget</b> function enables you to preview colors as they would appear on the target device. </p>
<pre><code><b>BOOL WINAPI ColorMatchToTarget(
  HDC </b><i>hDC</i><b>,</b>
<b>  HDC </b><i>hdcTarget</i><b>,</b>
<b>  DWORD </b><i>uiAction</i> 
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hDC</i></dt>
<dd>
Specifies the device context for previewing, generally the screen. </dd>
<dt>
<i>hdcTarget</i></dt>
<dd>
Specifies the target device context, generally a printer. </dd>
<dt>
<i>uiAction</i></dt>
<dd>
A constant that can have one of the following values.
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Constant</th>
<th align=left width=57%>Meaning</th>
</tr>
<tr valign=top>
<td width=43%>CS_ENABLE</td>
<td width=57%>Map the colors to the target device's color gamut. This enables color proofing. All subsequent draw commands to the DC will render colors as they would appear on the target device.</td>
</tr>
<tr valign=top>
<td width=43%>CS_DISABLE</td>
<td width=57%>Disable color proofing.</td>
</tr>
<tr valign=top>
<td width=43%>CS_DELETE_TRANSFORM</td>
<td width=57%>If color management is enabled for the target profile, disable it and delete the concatenated transform.</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Return Values</h4>
<p>
If this function succeeds, the return value is TRUE. </p>
<p>
If this function fails, the return value is FALSE. </p>
<h4>Remarks</h4>
<p>
<b>ColorMatchToTarget</b> can be used to proof the colors of a color output device on another color output device. Setting the <i>uiAction</i> parameter to CS_ENABLE causes all subsequent drawing commands to the DC to render colors as they would appear on the target device. If <i>uiAction</i> is set to CS_DISABLE, proofing is turned off.</p>
<p>
When <b>ColorMatchToTarget</b> is called, the color transform for the target device is performed first, and then the transform to the preview device is applied to the results of the first transform. This is used primarily for checking gamut mapping conditions. Before using this function, you must enable ICM for both device contexts.</p>
<p>
This function cannot be cascaded. While color mapping to the target is enabled by setting <i>uiAction</i> to CS_ENABLE, application changes to the color space or gamut mapping method are ignored. Those changes then take effect when color mapping to the target is disabled. </p>
<p>
<b>Note</b>&nbsp;&nbsp;A memory leak will not occur if an application does not delete a transform using CS_DELETE_TRANSFORM. The transform will be deleted when either the device context (DC) is closed, or when the application color space is deleted. However if the transform is not going to be used again, or if the application will not be performing any more color matching on the DC, it should explicitly delete the transform to free the memory it occupies. </p>
<p>
The <i>uiAction</i> parameter should only be set to CS_DELETE_TRANSFORM if color management is enabled before the <b>ColorMatchToTarget</b> function is called.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 4.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wingdi.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use gdi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="icm_156c.htm">Color Management Overview</a>, <a href="icm_4f77.htm">ICM 2.0 Functions</a> </p>
<p>&nbsp;</p></body>
</HTML>
