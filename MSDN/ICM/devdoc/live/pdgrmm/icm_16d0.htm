<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CMTranslateRGBsExt</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_cmtranslatergbsext"></a>CMTranslateRGBsExt</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>CMTranslateRGBsExt</b> function translates a bitmap from one defined format into a different defined format and calls a callback function periodically, if one is specified, to report progress and permit the calling application to terminate the translation. </p>
<pre><code><b>BOOL WINAPI CMTranslateRGBsExt(
  HCMTRANSFORM </b><i>hcmTransform</i><b>, </b>
<b>  LPVOID </b><i>lpSrcBits</i><b>,</b>
<b>  BMFORMAT </b><i>bmInput</i><b>,</b>
<b>  DWORD </b><i>dwWidth</i><b>, </b>
<b>  DWORD </b><i>dwHeight</i><b>,</b>
<b>  DWORD </b><i>dwInputStride</i><b>, </b>
<b>  LPVOID </b><i>lpDestBits</i><b>,</b>
<b>  BMFORMAT </b><i>bmOutput</i><b>, </b>
  <b>DWORD</b> <i>dwOutputStride</i><b>,</b>
<b>  LPBMCALLBACKFN</b><i> lpfnCallback</i><b>,</b>
<b>  ULONG </b><i>ulCallbackData</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hcmTransform</i></dt>
<dd>
Specifies the color transform to use.</dd>
<dt>
<i>lpSrcBits</i></dt>
<dd>
Pointer to the bitmap to translate.</dd>
<dt>
<i>bmInput</i></dt>
<dd>
Specifies the input bitmap format.</dd>
<dt>
<i>dwWidth</i></dt>
<dd>
Specifies the number of pixels per scan line in the input bitmap.</dd>
<dt>
<i>dwHeight</i></dt>
<dd>
Specifies the number of scan lines in the input bitmap.</dd>
<dt>
<i>dwInputStride</i></dt>
<dd>
Specifies the number of bytes from the beginning of one scan line to the beginning of the next in the input bitmap. If <i>dwInputStride</i> is set to zero, the CMM should assume that scan lines are padded so as to be <b>DWORD-</b>aligned.</dd>
<dt>
<i>lpDestBits</i></dt>
<dd>
Points to a destination buffer in which to place the translated bitmap.</dd>
<dt>
<i>bmOutput</i></dt>
<dd>
Specifies the output bitmap format.</dd>
<dt>
<i>dwOutputStride</i></dt>
<dd>
Specifies the number of bytes from the beginning of one scan line to the beginning of the next in the input bitmap. If <i>dwOutputStride</i> is set to zero, the CMM should pad scan lines so that they are <b>DWORD-</b>aligned.</dd>
<dt>
<i>lpfnCallback</i></dt>
<dd>
Pointer to an application-supplied callback function called periodically by <b>CMTranslateRGBsExt</b> to report progress and allow the calling process to cancel the translation. (See <a href="icm_5y23.htm"><b>ICMProgressProcCallback</b></a>.)</dd>
<dt>
<i>ulCallbackData</i></dt>
<dd>
Data passed back to the callback function, for example to identify the translation that is reporting progress.
</dd>
</dl>
<h4>Return Values</h4>
<p>
If this function succeeds, the return value is TRUE. </p>
<p>
If this function fails, the return value is FALSE and the CMM should call <b>SetLastError</b> to set the last error to a valid error value defined in Winerror.h.</p>
<h4>Remarks</h4>
<p>
Every CMM is required to export this function.</p>
<p>
When writing into the destination buffer, the CMM should make sure that scan lines are padded to be <b>DWORD</b>-aligned.</p>
<p>
If the input and output formats are not compatible with the color transform, this function fails.</p>
<p>
If both input and output bitmap formats are 3 channel, 4 bytes per pixel as in the case of BM_xRGBQUADS, the fourth bytes should be preserved and copied to the output buffer.</p>
<p>
If the callback function returns zero, processing should be cancelled and <b>CMTranslateRGBsExt</b> should return zero to indicate failure; the output buffer may be partially filled. </p>
<p>
Note that this function must support in-place translation. That is, whenever the memory footprint of the output is less than or equal to the memory footprint of the input, this function must be able to translate the bitmap colors even if the source and destination buffers are the same. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 98.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wingdi.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use gdi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="icm_156c.htm">Color Management Overview</a>, <a href="icm_4f77.htm">ICM 2.0 Functions</a>, <a href="icm_5y23.htm"><b>ICMProgressProcCallback</b></a>, <a href="icm_7s1c.htm#_win32_windows_bitmap_header_structures">Windows<b> </b>Bitmap Header Structures</a></p>
<p>&nbsp;</p></body>
</HTML>
