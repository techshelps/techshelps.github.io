<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WINS Consistency Check Tool -- Winschk.exe</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css">
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<h1>WINS Consistency Check Tool<br>
Winschk.exe</h1>
<h1>Windows&nbsp;NT® Resource Kits</h1>
<h3>Contents</h3>
<p>
Introduction</p>
<p>
Options</p>
<h2>Introduction</h2>
<p>
Winschk is a command-line utility that checks for name and version number inconsistencies in WINS (Windows Internet Name Service) databases, monitors replication activity, and verifies replication configuration.</p>
<p>
WINS is a service that maps computer names to IP (Internet Protocol) addresses, allowing users to communicate with other computers on a network or the World Wide Web without having to remember addresses in the form of strings of numbers.</p>
<p>
Winschk has no switches: when run at the command prompt, it displays the following options:</p>
<p>
0Enables or disables interactive mode</p>
<p>
1Tests for names on WINS servers</p>
<p>
2Checks for version number consistencies</p>
<p>
3Monitors WINS servers and detects communication failures</p>
<p>
4Verifies replication configuration</p>
<p>
99Exits Winschk</p>
<p>
These options are described in more detail below.</p>
<h2>Options</h2>
<p>
<b>0 - Enabling or disabling interactive mode</b></p>
<p>
Allows the user to enable or disable interactive mode. In interactive mode, status messages are displayed in the command-prompt window and recorded in Winstst.log. The first time you run Winschk, interactive mode is enabled by default.</p>
<p>
<b>1 - Testing names on WINS servers</b></p>
<p>
This option allows you to check quickly for consistency between WINS servers. This functionality is driven by two flat files, Names.txt and Servers.txt, which you can edit by using a text editor.</p>
<p>
Servers.txt contains the IP address of a source WINS server from which a list of all the replicating WINS servers is built up to query.</p>
<p>
Names.txt can contain multiple NetBIOS names (one per line) which need to be checked. The format of names in this file is:</p>
<p>
<i>name*16th_byte</i></p>
<p>
for example, FOOBAR*20</p>
<p>
<b>Note</b></p>
<p>
The names included in Names.txt must be specified in uppercase characters.</p>
<p>
Winschk queries each WINS server with the list of NetBIOS names. It checks for consistency of IP addresses and reports any mismatched IP addresses or occurrences of "name not found". It also reports non-responsive WINS servers.</p>
<p>
<b>2 - Checking for version number inconsistencies</b></p>
<p>
Using an RPC (remote procedure call) function, Winschk gets the owner address to version number mapping tables from different WINS servers and checks the consistency of their databases by ensuring that a WINS server always has the highest version number among the network of WINS servers for records it owns.</p>
<p>
In the following matrix, each record is a mapping table retrieved from a particular WINS server (the order of WINS servers being the same along both dimensions of the matrix), each diagonal element should have the highest version number among all the numbers in its column.</p>
<p>
ABCList of owners</p>
<p>
A1008079Mapping table retrieved from A</p>
<p>
B9575*65Mapping table retrieved from B</p>
<p>
C7845110Mapping table retrieved from C</p>
<p>
In this example, the intersection B with B indicates a problem that needs to be addressed.</p>
<p>
<b>3 - Monitoring WINS servers and detecting communication failures between WINS servers</b></p>
<p>
This option monitors WINS servers periodically to ensure that both the primary and backup WINS servers are not down at the same time. Winschk records WINS server activity in Monitor.log, and alerts the administrator to any situation that needs to be addressed.</p>
<p>
This option also periodically retrieves statistics from the WINS server, for example once every hour, to ensure that replication is not failing consistently. Communication problems might be due to a WINS server being disconnected or being down.</p>
<p>
You can run Winschk with this option as a one-time or a continuous version. The continuous version runs every 3 hours by default. You should not run this option too frequently to avoid excessive network activity.</p>
<p>
<b>4 - Verifying replication configuration</b></p>
<p>
Checks the Registry of a WINS server to ensure that each replication partner is configured as both pull and push and that a pull interval is defined. In this way, WINS database changes are replicated for the entire network. If Winschk detects an asymmetric partner relationship, it flags it for the administrator.</p>
<p>
<b>99 - Exits the tool</b></p>

</FONT>
</BODY>
</HTML>
