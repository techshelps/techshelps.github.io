<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Performance Overhead of Connections</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">The Performance Overhead of Connections</H2><P CLASS="t">Each connection that an IIS service establishes consumes some processor time. The network adapter card interrupts the processor to signal that a client has requested a connection. Further processing is required to establish and maintain the connection, to fulfill client requests sent on the connection and, when the connection is closed, processing is required to delete the structures that serviced the connection. Each time a connection is established, the load on the server increases.</P>
<P></P>
<P CLASS="t">One aspect of connection overhead is the time it takes to search the Transmission Control Block (TCB) table. TCP creates and maintains transmission control blocks (TCBs) to store data about connections. This might include data about the precedence of the connection and its local and remote socket numbers. The TCBs are stored in a hash table for efficient control. The hash table is stored in the operating system's nonpaged memory pool.</P>
<P CLASS="t">Internet Information Server 2.0 includes several features to optimize its handling of connections. Among these features are HTTP keep-alives. </P>
<P CLASS="t"><I>HTTP keep-alives</I> maintain a connection even after the connection's initial request is complete. This feature keeps the connection active and available for subsequent requests. Keep-alives are implemented to avoid the substantial cost of establishing and terminating connections. Both the client and the server must support keep-alives. Keep-alives are supported by Internet Information Server&nbsp;version 1.0 and later and Internet Explorer&nbsp;version 2.0 and later.</P>
<P CLASS="t">HTTP keep-alives are different from and independent of Transmission Control Protocol/Internet Protocol (TCP/IP) keep-alives. TCP/IP keep-alives are messages sent to determine whether an idle connection is still active.</P>
<P CLASS="t">HTTP keep-alives are enabled in Internet Information Server by default. Although keep-alives significantly improve bandwidth performance on most servers, you can modify or eliminate them if they are not needed. You can also measure their effect on the performance of your system. To test their effect on the server, you can disable them, but it is recommended that you reenable them when the test is concluded to maintain the performance of the server.</P>
<P CLASS="t">You can disable keep-alives by adding the <B>AllowKeepAlives</B> value entry to the Registry and setting its value to 0. To reenable keep-alives, delete the <B>AllowKeepAlives</B> value entry, or set it to 1. You must place <B>AllowKeepAlives</B> in: </P>
<P CLASS="t">HKEY_LOCAL_MACHINE\System<BR>    \CurrentControlSet<BR>        \Services<BR>            \W3SVC<BR>                \Parameters</P></BODY></HTML>
