<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows NT Startup Floppy Disk</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Windows&nbsp;NT Startup Floppy Disk</H3><P CLASS="t">You must format your Windows&nbsp;NT startup floppy disk when you are running Windows&nbsp;NT. You can use My Computer to format the floppy disk, or enter <B>format a:</B> at the command prompt. Both of these utilities copy the Windows&nbsp;NT Partition Boot Sector, which is required to load the Windows NT boot loader, to the floppy disk. Windows&nbsp;NT Help describes the procedure for formatting a floppy disk by using My Computer. </P>
<P CLASS="t">You can use the Windows&nbsp;NT startup floppy disk to start Windows&nbsp;NT in the following circumstances:</P>
<UL><LI>The Master Boot Record or Partition Boot Sector on the system partition has a problem.</LI><LI>There are problems with the disk that contains the system partition and the boot partition is on another disk.</LI><LI>You are reconfiguring hard disks and you want to be able to start Windows&nbsp;NT from the Windows&nbsp;NT startup floppy disk if you are having problems. </LI></UL><P CLASS="t">You can configure your system or boot partition as a mirror set. A mirror set creates an identical twin for the selected partition. Creating a mirror set is similar to making a copy of a document by using a copy machine. The original partition is like the original of the document, and the shadow partition is the copy. Unlike a copy machine, however, Windows&nbsp;NT continually updates the shadow partition when any changes are made to the original.</P>
<P CLASS="t">If you create a mirror set for your system or boot partition, there are more situations in which you can use the Windows&nbsp;NT startup floppy disk.</P>
<UL><LI>The system and boot partitions are the same partition, and the partition on the original disk has failed.</LI><LI>The system and boot partitions are different, and the system partition on the original disk has failed. Even though the boot partition is still good, the computer cannot access the startup files on the original system partition.</LI><LI>Your computer running Windows NT Server is an x86-based computer, the system partition is different from the boot partition, and the original boot partition has failed. Even though you still have the system partition, the ARC pathname in the Boot.ini file on the system partition points to the failed disk.</LI></UL><P CLASS="t"><B>Note</B></P>
<P>On x86-based computers, if the Partition Table in the Master Boot Record has been corrupted, especially if the information for the system partition or boot partition is all zeroes, you might not be able to start up by using the Windows&nbsp;NT startup floppy disk. If you have a current backup of the Master Boot Record, try starting MS-DOS from the MS-DOS bootable floppy disk, and use the DiskSave program to replace the Master Boot Record.</P>
<P CLASS="t">The files that you need to copy to the floppy disk normally have the Read Only, System, and Hidden attributes set. If the files have either the System or Hidden attribute set, they are not visible. You need to make the files visible before you can copy them. </P>
<H4 CLASS="h4"><A NAME="sec0"></A>To copy files to the Windows&nbsp;NT startup floppy disk</H4><P>    1.    Using My Computer or Windows&nbsp;NT Explorer, on the <B>View</B> menu, click <B>Options</B>.</P>
<P>    2.    On the <B>View</B> tab, select <B>Show all files</B>. Click <B>OK</B>.</P>
<P>    3.    Click the filename of the file to be copied. </P>
<P>    4.    On the <B>File</B> menu, click <B>Properties</B>. </P>
<P>    5.    In the <B>Attributes</B> box of the <B>General</B> tab, clear the <B>Read Only</B>, <B>System</B>, and <B>Hidden</B> check boxes, and click <B>OK</B>. </P>
<P>Do steps 3, 4, and 5 for each file that you want to copy.</P>
<P>Select the files, and then copy them to the floppy disk.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>Files to Copy for an x86-based Computer</H4><P CLASS="t">Copy the following files from the root folder of your system partition to the floppy disk you just formatted:</P>
<UL><LI>NTLDR — Windows&nbsp;NT boot loader program.</LI><LI>Boot.ini — describes the location of the boot partitions, specified by using Advanced RISC Computing (ARC) naming conventions.</LI><LI>Ntdetect.com — used for hardware detection.</LI><LI>Bootsect.dos — if you want to be able to dual-boot another operating system when using the Windows&nbsp;NT startup floppy disk.</LI><LI>Ntbootdd.sys — required only if you are using the scsi() syntax in the Boot.ini file. This file is not present in the root folder if you are using the multi() syntax.</LI></UL><P CLASS="t">The Ntbootdd.sys file is a renamed copy of the SCSI device driver used on your Windows&nbsp;NT computer. For example, if you are using the Adaptec 1542B SCSI controller, copy Aha154x.sys to the floppy disk, and then rename it to Ntbootdd.sys. If Windows&nbsp;NT Setup created an Ntbootdd.sys in your root folder, just copy that file. </P>
<P CLASS="t">You can find the device driver name by</P>
<UL><LI>Looking in the HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap\Scsi Registry key.</LI><LI>Double-clicking the SCSI Adapters option on Control Panel. In the<B> Devices</B> tab, click <B>Properties</B>. Click the <B>Driver</B> tab to see the driver filename.</LI></UL><H4 CLASS="h3"><A NAME="sec2"></A>Creating Alternate Boot Selections for an x86-based Computer</H4><P CLASS="t">To start Windows&nbsp;NT Server after the failure of the original system or boot partition on a mirror set, you need to have a path to the shadow boot partition in your Boot.ini file. Be sure to edit the Boot.ini file to create startup options for every contingency for your configuration. </P>
<P CLASS="t"><B>Note</B></P>
<P>If you have created a mirror set of your system partition, you need to set the Boot Indicator flag in the System ID field of the shadow partition. Disk Administrator does not set the Boot Indicator flag when it creates the shadow partition. Use the DiskProbe program to set this flag. For information about DiskProbe, see Chapter 10, "Disk, File System, and Backup Utilities." For more information about the Boot Indicator flag, see Chapter 3, "Disk Management Basics."</P>
<P CLASS="t">If the configuration of the partitions on your original disk and shadow disk are not the same, be sure to use the correct partition number when you create the path to the boot partition on the shadow disk. For example, you might have an EISA configuration partition as the first partition on your original disk, but not on the shadow disk. If you create a mirror set for each of the other partitions on the original disk, the partition numbers will be different on each disk.</P>
<P CLASS="t">The scsi() syntax is often required to start from the Windows&nbsp;NT startup floppy disk, even though the multi() syntax works to start from the hard disk. If your system fails to start from the Windows&nbsp;NT startup floppy disk, try using the scsi() syntax instead of the multi() syntax for the pathname.</P>
<P CLASS="t"><B>Note</B></P>
<P>The system BIOS controls whether your system starts up from a floppy or hard disk. The Boot.ini file controls from which hard disk and partition the computer loads the Windows NT system files.</P>
<P>The Boot.ini file has the Read Only attribute set by default. Remove this attribute before editing the file. Restoring the attribute is optional. Windows NT Setup sets the attribute to prevent accidental deletion.</P>
<P CLASS="t">The rest of this section has information for creating the pathnames for three different configurations of SCSI disks and controllers. In each example, the boot partition is configured as a mirror set. There is more information presented later in this chapter about configuring the system partition as a mirror set, in the section titled "Configuring the System Partition on a Mirror Set."</P>
<P CLASS="t">For more information about ARC pathnames, scsi() and multi() syntax, and examples with IDE and EIDE disks, see "Understanding ARC Pathnames," presented earlier in this chapter.</P>
<H5 CLASS="h4"><A NAME="sec3"></A>Single SCSI Controller </H5><P CLASS="t">To be able to start from the shadow boot partition by using the multi() syntax on computers with a single SCSI controller:</P>
<UL><LI>The shadow boot partition must be on one of the first two disks on the computer.</LI><LI>If the boot partition is on the second disk, the first two disks must be on the same controller.</LI><LI>The BIOS must be enabled on the controller.</LI><LI>You must have used the same apparent geometry when you low-level formatted each disk.</LI><LI>The disk with the shadow boot partition must be the next available SCSI ID on the bus. </LI><LI>The disk with the original boot partition must be powered down or removed from the bus. </LI></UL><P CLASS="t">The following example uses the multi() syntax.</P>
<P CLASS="spacing"><BR></P>
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\FT_TEST
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\FT_TEST="Windows&nbsp;NT Server" 
multi(0)disk(0)rdisk(0)partition(1)\FT_TEST="Windows&nbsp;NT Server [VGA]" /basevideo
<P CLASS="t">If the original disk cannot be powered down, you need to have an entry in the Boot.ini file to force NTLDR to load from the shadow boot partition. This Boot.ini file loads the system from the shadow disk of a mirror set while the original disk is still functional. Rdisk(1) refers to the ordinal number and not the SCSI ID of the disk. This example has an entry for the shadow partition.</P>
<P CLASS="spacing"><BR></P>
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\FT_TEST

[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\FT_TEST="Original Disk" 
multi(0)disk(0)rdisk(1)partition(1)\FT_TEST="Shadow Disk"
<H5 CLASS="h4"><A NAME="sec4"></A>More Than One SCSI Controller</H5><P CLASS="t">If you have more than one SCSI controller on the computer, startup after a failure to a mirror set is much easier if you use the following guidelines:</P>
<UL><LI>Use identical SCSI controllers. This minimizes problems with device driver, performance, and feature set differences.</LI><LI>Disable translation on the SCSI controllers. </LI><LI>When using duplexed mirror sets, load balance the controllers. Include the same number of disks on each controller, if possible. This step helps with performance.</LI><LI>Use the scsi() syntax in the Boot.ini file.</LI></UL><P CLASS="t">Here is a typical Boot.ini file for starting a computer with a mirrored boot partition, and each disk of the mirror set is on a different SCSI controller. Both the original and shadow disks are assigned SCSI ID 0 on their respective controllers.</P>
<P CLASS="spacing"><BR></P>
[boot loader]
timeout=30
default=scsi(0)disk(0)rdisk(0)partition(1)\FT_TEST
[operating systems]
scsi(0)disk(0)rdisk(0)partition(1)\FT_TEST="Original Disk" 
scsi(1)disk(0)rdisk(0)partition(1)\FT_TEST="Shadow Disk"

<P CLASS="t">If the shadow disk was assigned SCSI ID 3, then the second entry is:</P>
<P CLASS="spacing"><BR></P>
scsi(1)disk(3)rdisk(0)partition(1)\FT_TEST="Shadow Disk"
<H5 CLASS="h4"><A NAME="sec5"></A>Dual-Channel SCSI Controllers</H5><P CLASS="t">Many SCSI controllers have more than one channel on the adapter card. Even though there is a single card, it appears to the computer as if there are two separate controllers. There is quite a bit of variation in the way different manufacturers handle multiple channels. Be sure to test starting up from each of the channels and disks.</P>
<P CLASS="t">If a valid ARC path cannot be found to start the computer from the shadow boot partition, you need to make changes in the system configuration. It might be necessary to consult with the controller vendor to determine the correct configuration to be able to start Windows&nbsp;NT Server from the shadow partition if the original disk or SCSI channel fails. Many dual-channel controllers have an option in their Setup program, or the EISA configuration program, that enables you to specify the channel to use for the startup disk. </P>
<H4 CLASS="h3"><A NAME="sec6"></A>Files to Copy for a RISC-based Computer</H4><P CLASS="t">When you install Windows&nbsp;NT on a RISC-based computer, it creates a folder, such as \Os\Winnt40, that contains the Osloader.exe and Hal.dll files. On Alpha AXP-based computers, this folder also contains several files with the .pal extension. Some or all of these files might have the system, hidden, or read-only attributes set.</P>
<P CLASS="t">A Windows&nbsp;NT startup floppy disk for a RISC-based computer should have a folder tree identical to the RISC-based system partition. Therefore, you should create the \Os\Winnt40 folder on the floppy disk.</P>
<P CLASS="t">Copy the following files from the \Os\Winnt40 folder on your hard disk to the same folder on the floppy disk:</P>
<UL><LI>Osloader.exe</LI><LI>Hal.dll</LI><LI>*.pal (AXP-based computers only)</LI></UL><H4 CLASS="h3"><A NAME="sec7"></A>Creating Alternate Boot Selections for a RISC-based Computer</H4><P CLASS="t">RISC-based computers start from the system firmware. You should define a boot selection in the NVRAM that points to a Windows&nbsp;NT startup floppy disk. You only need to use the Windows&nbsp;NT startup floppy disk if your original disk fails and it contains the system partition (the partition with OSLOADER). If you create a mirror set for your boot partition, you should also create a path to the shadow boot partition.</P>
<P CLASS="t">If the configuration of the partitions on your original disk and shadow disk are not the same, be sure to use the correct partition number when you create the path to the boot partition on the shadow disk. For example, if you have an EISA configuration partition as the first partition on your original disk, but not on the shadow disk, the partition numbers on your shadow disk will be different than the partition numbers on your original disk.</P>
<P CLASS="t">There are three types of RISC-based computers: Alpha, MIPS, and Power PC. The examples in the remainder of this section are for an Alpha AXP computer. The firmware menus that you use to create and change boot selections can be different for MIPS and Power PC computers. For more information about RISC-based menus, see Chapter 19, "What Happens When You Start Your Computer," in the <I>Windows&nbsp;NT Workstation Resource Guide.</I> </P>
<H5 CLASS="h4"><A NAME="sec8"></A>Creating a Path to the Shadow Boot Partition</H5><P CLASS="t">To create a path to the shadow boot partition, create an alternate boot selection by using the <B>Add a boot selection</B> menu. These are the steps to get to that menu:</P>
<P>    1.    Start the computer. You see the <B>Boot</B> menu. </P>
<P>    2.    On the <B>Boot</B> menu, click <B>Supplementary menu</B>. </P>
<P>    3.    On the <B>Supplementary</B> menu, click <B>Setup the system</B>.</P>
<P>    4.    On the <B>Setup</B> menu, click <B>Manage boot selection menu</B>.</P>
<P>    5.    On the <B>Boot selections</B> menu, click <B>Add a boot selection</B>.</P>
<P CLASS="t">The following example shows the screens you would see and the selections you would make to create a path to the shadow boot partition. In this example, the system partition and the boot partition are separate partitions on the same physical disk. Both partitions are mirrored. If they were the same partition, you would have fewer entries to make to create the boot selection. If the boot partition and system partition are the same partition, that partition is considered to be the system partition.</P>
<P CLASS="t"><B>Note</B></P>
<P>The right justified arrows (&lt;----) in these examples indicate which selection was made, or the information that was entered.</P>
<P CLASS="spacing"><BR></P>
Thursday, 03-07-96   11:18:43 AM

Select a system partition for this boot selection:
        SCSI Bus 0 Hard Disk 0 Partition 1
        New system partition  &lt;-----------------------------------------

Enter location of system partition for this boot selection:
        Select Media:
    SCSI Hard Disk  &lt;---------------------------------------------------
    Floppy Disk
    CD-ROM

        Enter SCSI bus number: 0  &lt;-------------------------------------
        Enter SCSI ID: 2          &lt;-------------------------------------
        Enter Partition: 1        &lt;-------------------------------------

Enter the osloader directory and name: \os\winnt40\osloader.exe &lt;-------

Is the operating system in the same partition as the osloader:
        Yes
        No &lt;------------------------------------------------------------

Enter the location of os partition:
        Select Media:
    SCSI Hard Disk  &lt;---------------------------------------------------
    Floppy Disk
    CD-ROM

        Enter SCSI bus number: 0  &lt;-------------------------------------
        Enter SCSI ID: 2          &lt;-------------------------------------
        Enter Partition: 2        &lt;-------------------------------------

Enter the operating system root directory: \winnt40     &lt;---------------
Enter a name for this boot selection: Boot Shadow Disk  &lt;---------------

Do you want to initialize the debugger at boot time:
        Yes
        No  &lt;-----------------------------------------------------------
<P CLASS="t">After entering the data, you will be back at the <B>Boot selections</B> menu. Select<B> Setup menu</B>. On the <B>Setup</B> menu, select <B>Supplementary menu, and save changes</B>.</P>
<H5 CLASS="h4"><A NAME="sec9"></A>Creating a Path to the Windows&nbsp;NT Startup Floppy Disk</H5><P CLASS="t">Once you have created the Windows&nbsp;NT startup floppy disk, you need to create the path to it. If you do not create a path to the floppy disk ahead of time, and your original disk fails, you will have to create a path to the Windows&nbsp;NT startup floppy disk to be able to start the computer. </P>
<P CLASS="t">Listed below is a sample of the configuration options used to build an alternate boot selection when the Windows&nbsp;NT startup files are located on the Windows&nbsp;NT startup floppy disk. As in the earlier examples, the arrows indicate which selections were made or which data were entered.</P>
<P CLASS="spacing"><BR></P>
                                    Thursday, 03-07-96   11:25:13 AM

Select a system partition for this boot selection:
        SCSI Bus 0 Hard Disk 0 Partition 1
        New system partition  &lt;-----------------------------------------

Enter location of system partition for this boot selection:
        Select Media:
    SCSI Hard Disk
    Floppy Disk  &lt;------------------------------------------------------
    CD-ROM

        Enter floppy drive number: 0  &lt;---------------------------------

Enter the osloader directory and name: \os\winnt40\osloader.exe &lt;-------

Is the operating system in the same partition as the osloader:
        Yes
        No &lt;------------------------------------------------------------

Enter the location of os partition:
        Select Media:
    SCSI Hard Disk  &lt;---------------------------------------------------
    Floppy Disk
    CD-ROM

        Enter SCSI bus number: 0  &lt;-------------------------------------
        Enter SCSI ID: 2          &lt;-------------------------------------
        Enter Partition: 2        &lt;-------------------------------------

Enter the operating system root directory: \winnt40           &lt;---------
Enter a name for this boot selection: start from floppy disk  &lt;---------
Do you want to initialize the debugger at boot time:
        Yes
        No  &lt;-----------------------------------------------------------
<P CLASS="t">After entering the data, you will be back at the <B>Boot selections</B> menu. Select <B>Setup menu</B>. On the <B>Setup</B> menu, select <B>Supplementary menu, and save changes</B>.</P>
<H5 CLASS="h4"><A NAME="sec10"></A>Using Alternate Boot Selections</H5><P CLASS="t">When you have created alternate boot selections, you start an alternate one by selecting <B>Boot an alternate operating system</B> from the <B>Boot</B> menu. This example shows selecting the alternate operating system option.</P>
<P CLASS="spacing"><BR></P>
ARC Multiboot Alpha AXP Version 3.5-11 
Copyright (c) 1993 Microsoft Corporation
Copyright (c) 1993 Digital Equipment Corporation

Boot Menu:

    Boot Windows&nbsp;NT Server Version 4.0
    Boot an alternate operating system  &lt;-------------------------------
    Run a program
    Supplementary menu. . .

Use the arrow keys to select, then press Enter.
Seconds until auto-boot. Select another option to override: 9
<P CLASS="t">If you have added boot selections for the shadow boot partition and the Windows&nbsp;NT startup floppy disk, as described earlier in this section, and select <B>Boot an alternate operating system</B>, you would see a screen like the following.</P>
<P CLASS="spacing"><BR></P>
ARC Multiboot Alpha AXP Version 3.5-11 
Copyright (c) 1993 Microsoft Corporation
Copyright (c) 1993 Digital Equipment Corporation

Boot Menu:

    start from floppy disk
    Boot Shadow Disk
    Boot Windows&nbsp;NT Server 4.0 (Default)

Use the arrow keys to select, then press Enter.
<P CLASS="t">Each time you create a new boot selection, it becomes the default selection. The preceding example shows the menu you would see if you:</P>
<UL><LI>Installed Windows&nbsp;NT Server 4.0.</LI><LI>Added the selection for the shadow boot partition.</LI><LI>Added the selection for the Windows&nbsp;NT startup floppy disk. </LI></UL><P CLASS="t">You should use the <B>Rearrange boot selections</B> menu to change the default boot selection back to the hard disk. See the section titled "Using a RISC-based Computer's Boot Menu," in Chapter 19 of the <I>Windows&nbsp;NT Workstation Resource Guide</I>, "What Happens When You Start Your Computer," for information about managing boot selections.</P></BODY></HTML>
