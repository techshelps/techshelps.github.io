<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Optimizing Thread Values</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Optimizing Thread Values</H2><P CLASS="t">By default, the Internet Information Server process creates up to 10 threads per processor. Internet Information Server continually adjusts the number of threads in its process in response to server activity. For most systems, this tuning is sufficient to maintain the optimum number of threads, but you can change the maximum number of threads per processor, if your system requires it.</P>
<P></P>
<P CLASS="t">If the threads in the Internet Information Server process appear to be overworked or underutilized, consider these tuning strategies:</P>
<P>     If nearly all of the threads of the Internet Information Server process are busy nearly all of the time, and the processors are at or near their maximum capacity, consider distributing the workload among more servers. </P>
<P>You can also add processors, but do so cautiously. Unnecessary or underused processors will degrade performance, not improve it. </P>
<P>     If nearly all threads appear busy, but the processors are not always active, consider increasing the maximum number of threads per processor. Increasing the number of threads is typically an interim solution used while a bottleneck in another subsystem is being resolved.</P>
<P>Do not increase the maximum number of threads unless you have processors with excess capacity. More threads on the same number of processors cause more interrupts and context switches, and result in less processor time per thread. </P>
<P>     If many threads are continuously idle, you might save processor time and memory by reducing the number of threads in the process.</P>
<P></P>
<P CLASS="t">To adjust the maximum number of threads in the IIS service process, use a Registry editor to add the <B>MaxPoolThreads </B>value entry to the Registry. <B>MaxPoolThreads</B> does not appear in the Registry unless it is added. It must be added to the following:</P>
<P CLASS="t">HKEY_LOCAL_MACHINE\System<BR>    \CurrentControlSet<BR>        \Services<BR>            \Inetinfo<BR>                \Parameters</P>
<P CLASS="t"><B>MaxPoolThreads</B><B> </B>is calculated in units of threads-per-processor. If this value entry does not appear in the Registry, Internet Information Server allocates a maximum of 10 threads per processor. Do not set this value below 5 or above 20. For more information on <B>MaxPoolThreads</B>, see Regentry.hlp on the <I>Windows NT Workstation Resource Guide 4.0</I> CD.</P>
<P CLASS="t">Continue monitoring the system carefully to make sure that changing the numbers of threads achieves the desired effect.</P></BODY></HTML>
