<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NBF's Interface to the Lower OSI Layers - The NDIS Interface</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">NBF's Interface to the Lower OSI Layers - The NDIS Interface</H3><P CLASS="t">The NBF transport driver processes the TDI requests as frames that are to be sent out on the network in the Logical Link Control (LLC) layer. This lower edge, the LLC layer, is the NBF layer that receives frames sent from a remote computer on the network. </P>
<P CLASS="t">NBF conforms to the IEEE 802.2 LLC protocol standard and performs the following functions:</P>
<UL><LI>Link establishment (connection-oriented data transfer)</LI><LI>Maintenance and termination</LI><LI>Frame sequencing and acknowledgment</LI><LI>Frame flow control</LI><LI>Connectionless data transfer</LI></UL><P CLASS="t">At the LLC layer, NBF binds, receives, and sends packets to the underlying NIC drivers by using the NDIS 4.0 interface. (See the earlier note about the term "transport providers.")</P>
<P CLASS="t">Communication within the LLC layer is based on <I>service access points</I>, <I>links</I>, and <I>link stations</I>. Each LLC client program identifies itself by registering a unique <I>service access point</I> (SAP). A SAP is actually a mechanism by which the layer above can programmatically access a particular service implemented by the layer below. A SAP can also be thought of as the address of a software port as defined by the OSI model. There are well-known SAPs, similar to the well-known ports of TCP/IP. Because NBF is a NetBIOS implementation, it uses the well-known NetBIOS SAP (0xF0). This is illustrated in Figure 13.3, which shows the relationship of the SAP to the LLC Layer.</P>
<P><img src="XNG_Q05.gif"></P>
<P CLASS="cap"><B>Figure 13.3    The NBF LLC Layer and NDIS Interface to the Physical Layers</B></P>
<P CLASS="t">When a network client program uses LLC to send a frame on to the network, LLC specifies the client SAP as well as the destination SAP in the header of the LLC frame. The header of an LLC frame thus identifies the:</P>
<UL><LI>Source service access point (SSAP)<FONT FACE="Symbol">¾</FONT>the LLC client on the sending computer that created the frame.</LI><LI>Destination service access point (DSAP)—the LLC client on the receiving computer that should receive the frame.</LI></UL><P CLASS="t">The SSAP, DSAP, and NIC address of the destination client are all that is needed for <I>unreliable connectionless</I> data transfer, in which NBF transmits the message once or a specified number of times and is responsible only for ensuring that the frame is properly transmitted on the network medium. No acknowledgment from the destination client is required.</P>
<P CLASS="t"><I>Reliable connection-oriented</I> data transfer service requires establishment of a <I>link </I>between the sending and receiving LLC clients in which NBF is responsible for transferring the frame from the source client to the destination client and which requires an acknowledgment from the destination client that the frame is received. The link is established by using the sending client SAP, the destination client SAP, and the NIC address of the remote computer. Note that the NIC address of the receiving client can be specified as:</P>
<UL><LI>An individual computer's NIC address where the LLC frame is received by a single LLC client that registered the destination SAP.</LI><LI>A NetBIOS multicast address where the LLC frame is received by all LLC clients that have registered the multicast destination SAP.</LI></UL></BODY></HTML>
