<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Browse Service Across a WAN with TCP/IP</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Browse Service Across a WAN with TCP/IP</H3><P CLASS="t">Currently, Browser-service communication relies almost entirely on broadcasts. In a WAN environment, such as TCP/IP, where domains are separated by routers, special broadcast problems can arise because broadcasts, by default, do not pass through routers. There are two issues to consider.</P>
<UL><LI>How browsers separated by a router perform browser functions</LI><LI>How local clients browse remote domains that are not on their local network segment</LI></UL><P CLASS="t">The following topics discuss three methods that can be used to set up WAN browsing with TCP/IP. They are presented in order of preference. </P>
<H4 CLASS="h3"><A NAME="sec0"></A>The Windows Internet Name Service (WINS)</H4><P CLASS="t">The Windows Internet Name Service (WINS) resolves NetBIOS names to IP addresses so that datagrams can be sent to the targeted computer. Implementing WINS eliminates the need to configure the LMHOSTS file or to enable UDP port 137. Using WINS requires the following configuration.</P>
<UL><LI>WINS is configured on a computer running Windows&nbsp;NT Server 3.5 or later.</LI><LI>Clients are WINS-enabled. </LI></UL><P>WINS clients can be configured with Windows&nbsp;NT 3.5 or later, Windows&nbsp;95, Windows for Workgroups 3.11b running TCP/IP-32, LAN Manager 2.2c for MS-DOS, or Microsoft Network Client 3.0 for MS-DOS. The latter two are provided on the compact discs for versions 3.5 or later of Windows&nbsp;NT Server. </P>
<P CLASS="t">We usually recommend that you implement WINS for name resolution and browsing support. As an alternative, it is possible to have full domain browsing by using only LMHOSTS files on all computers, but this limits browsing to the local domain. Non-WINS clients still need the LMHOSTS file to browse a WAN, even if WINS has been implemented in the domain.</P>
<P CLASS="t"><B>Note</B></P>
<P>A client will participate in domain browsing only when that client is using a workgroup name that is equivalent to the domain name (workgroup=domain). In the case of Windows&nbsp;NT computers, they can also join the domain to gain this functionality, instead of participating in a workgroup.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>The LMHOSTS File</H4><P CLASS="t">NetBIOS name resolution is typically performed through broadcasts, which will resolve names only on the local network segment. To resolve names of computers located on another network segment, the LMHOSTS file (located under \&lt;<I>winnt_root</I>&gt;\System32\drivers\etc) must be configured. The LMHOSTS file must contain a NetBIOS name-to-IP address mapping for all computers that are not on the local network segment.</P>
<P CLASS="t">To implement communication between network segments and the domain master browser, the administrator must configure the LMHOSTS file with the NetBIOS names and IP addresses of all browsers. To ensure that the master browser for each network segment can access the domain's PDC, the PDC for each domain must exist in the LMHOSTS file on each master browser and have the #DOM tag.</P>
<P CLASS="t">The LMHOSTS file on each network segment's master browser should contain the following information.</P>
<UL><LI>IP address and NetBIOS name of the domain master browser</LI><LI>The domain name, preceded by the tags #PRE and #DOM, as in the following example</LI></UL><P>130.20.7.80 &lt;<I>Browser_name</I>&gt; #PRE #DOM:&lt;<I>domain_name</I>&gt;</P>
<P CLASS="t">To guarantee that the PDC can request the local browse list from the network segment's master browser, TCP/IP and all other WAN transports must cache the client's IP address.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>UDP Port 137 (NetBIOS Name Service Broadcasts)</H4><P CLASS="t">Not all WANs will have problems browsing. Some routers can be configured to forward specific types of broadcasts and filter out others.</P>
<P CLASS="t">All NetBIOS over TCP/IP (NetBT) broadcasts are sent to the UDP port 137, which is defined as the NetBT Name Service. This usage is defined by Request for Comment (RFC) 1001 and 1002. Routers normally filter out these frames because they are sent to the hardware and subnet broadcast addresses. However, some routers allow all frames sent to this particular UDP port — which is used only by NetBT—to be forwarded. As a result, the browser looks as if it is on one, big, network segment. All domains and computers within the network segments are seen by all computers, including Windows for Workgroups computers. </P></BODY></HTML>
