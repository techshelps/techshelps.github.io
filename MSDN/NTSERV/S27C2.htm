<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Performance Monitor to Monitor TCP Connections</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Using Performance Monitor to Monitor TCP Connections</H2><P CLASS="t">Performance Monitor includes many counters that monitor connections. The counters on the TCP object are the best indicators of the success of connection requests.</P>
<P CLASS="t">The counters on the HTTP Service, FTP Server, and Gopher Service performance objects monitor connections maintained by each IIS service. The counters on these objects display only successful connection requests. They do not display failed attempts to connect to these IIS services. Like all counters at the Application Layer, they do not have information about connections until the connections are established. Performance Monitor counters that display the number of simultaneous connections maintained by Internet Information Server are discussed in Chapter 6, "Preventing Processor Bottlenecks."</P>
<P></P>
<P CLASS="t">The following table lists and describes the Performance Monitor counters that monitor the success and failure of connections to TCP.</P>
<P>Table 7.6    Performance Monitor Counters for Monitoring TCP Connection Successes and Failures</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="121pt" VALIGN="TOP"><COL WIDTH="226pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>TCP: Connections Established</P></TD><TD VALIGN="TOP"><P>The number of simultaneous connections supported by TCP (at last observation). This counter displays the number of connections last observed to be in the ESTABLISHED or CLOSE-WAIT state. It displays the last observed value only; its value is not an average.</P></TD></TR><TR><TD VALIGN="TOP"><P>TCP: Connection Failures</P></TD><TD VALIGN="TOP"><P>The number of connections that have failed since the service was started (regardless of when Performance Monitor was started). TCP counts a connection as having failed when it goes directly from sending (SYNC-SENT) or receiving (SYNC-RCVD) to CLOSED or from receiving (SYNC-RCVD) to listening (LISTEN).</P></TD></TR><TR><TD VALIGN="TOP"><P>TCP: Connections Reset</P></TD><TD VALIGN="TOP"><P>The number of connections reset since the service was started (regardless of when Performance Monitor was started).</P>
<P>TCP counts a connection as having been reset when it goes directly from ESTABLISHED or CLOSE-WAIT to CLOSED.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">These counters are included in IISNet.pmw, a Performance Monitor workspace file on the <I>Supplement 1 </I>CD.</P></BODY></HTML>
