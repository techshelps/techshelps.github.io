<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Performance Monitor to Monitor the File System Cache</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Using Performance Monitor to Monitor the File System Cache</H2><P CLASS="t">Performance Monitor includes several counters in the Memory and Cache performance objects that monitor the size and effectiveness of the file system cache. The following table lists these counters.</P>
<P>Table 5.3    Performance Monitor Counters for the File System Cache</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Cache bytes</P></TD><TD VALIGN="TOP"><P>The size of the cache, in bytes. This counter displays the last observed value; it is not an average.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Cache faults/sec</P></TD><TD VALIGN="TOP"><P>How often data sought in the file system cache is not found there. The count includes faults for data found elsewhere in memory, as well as faults that require disk operations to retrieve the requested data. </P>
<P>This counter displays the number of faults, without regard for the number of pages retrieved in response to the fault.</P></TD></TR><TR><TD VALIGN="TOP"><P>Cache: MDL Reads/sec</P></TD><TD VALIGN="TOP"><P>How often the system attempts to read large blocks of data from the cache.</P>
<P>Memory Descriptor List (MDL) Reads are read operations in which the system uses a list of the physical address of each page to help it find the page. </P>
<P>MDL reads are often used to retrieve cached Web pages and FTP files.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P>Table 5.3    Performance Monitor Counters for the File System Cache <I>(Continued)</I></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Cache: MDL Read Hits %</P></TD><TD VALIGN="TOP"><P>How often attempts to find large sections of data in the cache are successful. </P>
<P>You can use the Cache: MDL Read Hits % counter to calculate the percentage of MDL misses. Misses are likely to result in disk I/O.</P></TD></TR><TR><TD VALIGN="TOP"><P>Cache: Data Maps/sec</P></TD><TD VALIGN="TOP"><P>How often pages are mapped into the cache from elsewhere in physical memory or from disk.</P>
<P>To measure the percentage of data maps from elsewhere in physical memory, use Cache: Data Map Hits %. The inverse of Cache: Data Map Hits % indicates data maps from disk.</P></TD></TR><TR><TD VALIGN="TOP"><P>Cache: Read Aheads/sec</P></TD><TD VALIGN="TOP"><P>A measure of sequential reading from the cache. When the system detects sequential reading, it anticipates future reads and reads in larger blocks of data. The read ahead counters are a useful measure of how effectively an application uses the cache.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Page Faults/sec</P></TD><TD VALIGN="TOP"><P>Hard and soft faults in the working set of the process. This counter displays the number of faults, without regard for the number of pages retrieved in response to the fault.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Page Reads/sec</P></TD><TD VALIGN="TOP"><P>Hard faults in the working sets of processes and in the file system cache.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">These counters are included in IISMem.pmw, a Performance Monitor workspace settings file on the <I>Supplement 1</I> CD. You should log this data for several days. You can use bookmarks in Performance Monitor to note times of unusually high and low server activity. </P>
<P></P></BODY></HTML>
