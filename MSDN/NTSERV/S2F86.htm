<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Customizing FTP Server</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Customizing FTP Server</H3><P CLASS="t">When a client connects to an FTP server, the user often lacks site information. Without site information, the user does not know if this is the correct FTP server, or what the files at the site contain. By adding a welcome message, exit message, and directory contents message, you can supply such information to visitors to your FTP site.</P>
<P CLASS="t">You can use two methods to add information about your FTP site. Both methods can enhance its usability.</P>
<P CLASS="t">You can use the Internet Service Manager to add default Welcome or Exit messages to the FTP server. Double-click the <B>FTP service</B>, then click <B>Messages</B> to add or change FTP service messages.</P>
<P CLASS="t">You can also add an FTP directory description file. For examples of this process, see Chapter 5, "Enterprise Scenarios."</P>
<H4 CLASS="h4"><A NAME="sec0"></A>To enable the FTP directory description file</H4><OL><LI>Click the <B>Start</B> button, then point to <B>Run</B>. In the <B>Open</B> box, type <B>regedt32.exe </B>and then click <B>OK</B>. </LI><P>The Registry Editor appears.</P>
<LI>Click the HKEY_LOCAL_MACHINE window and locate the following key:</LI><P>\System</P>
<P>  \CurrentControlSet</P>
<P>    \Services</P>
<P>      \MSFTPSVC</P>
<P>        \Parameters</P>
<LI>On the <B>Edit </B>menu, click <B>Add Value</B>.</LI><P>The <B>Add Value</B> dialog box appears.</P>
<LI>In the Value Name text box, type Annotate Directories.</LI><LI>In the Data Type box, select REG_DWORD and then click OK.</LI></OL><P>The <B>DWORD Editor</B> dialog box appears.</P>
<OL><LI>In the <B>Data</B> text box type <B>1</B> and click <B>OK</B>.</LI></OL><P>The Registry Editor adds the new value to the Parameters key.</P>
<OL><LI>Close the Registry Editor.</LI><LI>To implement these changes, stop and restart the FTP service.</LI></OL><H4 CLASS="h4"><A NAME="sec1"></A>To add an FTP directory description file</H4><OL><LI>Using a text editor, create the file ~ftpsvc~.ckm</LI><LI>In the file, type the following lines:</LI></OL><P><B>Directory for the Terra Flora FTP Server</B></P>
<P>------------------------------------------------------</P>
<OL><LI>Save the file in the root directory of the FTP server and close the editor.</LI><LI>At the command prompt in the root directory of the FTP server, type the following information and then press Enter.</LI></OL><P><B>attrib +h  ~ftpsvc~.ckm</B></P>
<P>This step hides the file.</P>
<H4 CLASS="h4"><A NAME="sec2"></A>To verify the customized FTP server</H4><OL><LI>At the command prompt, type the following information.</LI></OL><P><B>ftp 127.0.0.1</B></P>
<P>This step uses the IP loopback address to start an FTP session on your local computer.</P>
<P>The FTP client prompts you to log on.</P>
<OL><LI>Log on as Anonymous.</LI><P>The introductory message and the annotated directory listing appear.</P>
<LI>At the ftp&gt; command prompt, type the following information.</LI></OL><P><B>BYE</B></P>
<P>The exit message appears.</P></BODY></HTML>
