<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows NT Workstation and Windows NT Server Services</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Windows NT Workstation and Windows NT Server Services</H3><P CLASS="t">The Workstation and Server services are used for file and print sharing. Both use NetBIOS over TCP/IP to communicate with each other; however, they are not NetBIOS programs. They are written to talk directly to NetBT over the TDI interface. Being direct TDI clients, they are high performance and <I>not</I> subject to limitations of the NetBIOS interface, such as the 254 session limit. The Server Message Block (SMB) protocol is used to send commands and responses between clients and servers. Public SMB specifications are available from <B>ftp.microsoft.com</B>.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Logging On</H4><P CLASS="t">When a user logs on to a Windows NT domain, the following sequence of events occurs:</P>
<P>    1.    If the computer is WINS-enabled, a name query for the NetBIOS &lt;domain&gt;[1C] name is sent to the WINS server.</P>
<P>    2.    The WINS server responds with a list of up to 25 IP addresses corresponding to domain controllers for the specified domain name. One of the IP addresses in the list will always be the Primary Domain Controller.</P>
<P>    3.    A \MAILSLOT\NET\NTLOGON request is broadcast on the local subnet. If a response to the local subnet broadcast is received, then the logon process contacts the responding domain controller to attempt a logon.</P>
<P>    4.    Otherwise, the logon process sends a directed datagram to each of the addresses returned in the list from the WINS server, and attempts to log on to the first domain controller to respond.</P>
<P>    5.    All domain controllers register this &lt;domain&gt;[1C] name on the network, typically with the WINS database. All password information is encrypted before being transmitted on the network.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>Connecting to Network Resources</H4><P CLASS="t">When a workstation attempts to connect to a shared resource on the network, the resource is "called" by its NetBIOS name. The name-to -IP-address resolution is done in the manner illustrated in the NetBIOS Name Resolution Flowchart (Figures 6.5 through 6.7) in the section "NetBIOS Interface" earlier in this chapter. </P>
<P CLASS="t">Once the IP address of the target host is known, a standard TCP/IP connection is set up, and a NetBIOS session is established over that connection. The user is authenticated using encrypted passwords, and then client/server messages are exchanged using the SMB protocol. The workstation and server use sophisticated caching mechanisms to reduce network traffic and provide high performance. When WINS is used, there is no reliance on IP broadcasts, with the single exception of ARPs. </P>
<H4 CLASS="h3"><A NAME="sec2"></A>Optimizations</H4><P CLASS="t">The Windows NT Workstation and Windows NT Server services were designed with many optimizations to minimize network traffic and maximize throughput. The network redirector works closely with the Windows NT Cache Manager to provide read-ahead caching, write-behind caching, and search caching. Various file locking schemes, such as opportunistic locking and local file lock optimization, help to reduce network traffic. The SMB protocol which is used supports compound commands and responses, such as <I>LockAndRead</I> and <I>WriteAndUnlock</I>.</P></BODY></HTML>
