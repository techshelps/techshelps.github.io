<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Suggestions for Optimizing Memory on an IIS Server</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Suggestions for Optimizing Memory on an IIS Server</H2><P CLASS="t">Servers running Internet Information Server, like all high-performance file servers, benefit from ample physical memory. Generally, the more memory you add, the more the servers use and the better they perform. Most IIS servers perform acceptably with 32MB of memory. However, if you are running memory-intensive applications, like Common Gateway Interface (CGI) applications, you might need up to five times more memory to prevent a memory bottleneck.</P>
<P CLASS="t">Here are a few suggestions for optimizing memory performance without adding memory:</P>
<P>     Improve data organization. Keep related Web files on the same logical partitions of a disk. Keeping files together improves the performance of the file system cache and reduces the size of the process's working set. Also, defragment your disks. Even well organized files can take more time to retrieve if they are fragmented.</P>
<P>     Try disk mirroring or striping. The optimum configuration is to have enough physical memory to hold all static Web pages. However, if pages must be retrieved from disk, use mirroring or striping to make reading from disk sets faster. </P>
<P>     Replace or convert CGI applications. CGI applications use three to five times more processor time and memory space than equivalent ISAPI extensions. If you cannot or choose not to replace your CGI applications or to convert them to ISAPI extensions, you might need to add additional processors and memory. For more information on CGI and ISAPI applications, see Chapter 9, "Monitoring Dynamic Page Generation."</P>
<P>     Enlarge paging files. Add paging files and/or increase the size of your paging files. Windows&nbsp;NT creates one paging file on the system disk, but you can create a paging file on each logical partition of each disk.</P>
<P></P>
<P>     Resize the IIS Object Cache. If the system has enough memory, and most of the IIS Object Cache is used, consider increasing the size of the IIS Object Cache (<B>MemoryCacheSize</B>) or lengthening the period that an unused object can remain in the cache (<B>ObjectCacheTTL</B>). Alternatively, if memory is scarce and the contents of the object cache are volatile, consider reducing the size of the object cache or increasing the rate at which the cache is flushed.</P>
<P>     Change the balance of the cache to working set. By default, Windows&nbsp;NT servers are configured to give preference to the file system cache over the working sets of processes when allocating memory space. Although IIS servers benefit from a large file system cache, the <B>Maximize Throughput for File Sharing</B> option often causes the Internet Information Server pageable code to be written to disk, which results in lengthy processing delays. To avoid these processing delays, set Server properties to the <B>Maximize Throughput for Network Applications</B> option. </P>
<P> <FONT FACE="Symbol">Û</FONT>    To change Server properties:</P>
<P>    1.    Double-click the Network icon in Control Panel.</P>
<P>    2.    Click the <B>Services</B> tab.</P>
<P>    3.    Click <B>Server</B> to select it, and then click the <B>Properties</B> button.</P>
<P>    4.    Click <B>Maximize Throughput for Network Applications</B>, and then click <B>OK</B>.</P>
<P>    5.    Restart the computer.</P>
<P></P>
<P>     Limit connections. If your server is running out of memory, limiting the number of connections on the server might help because some physical memory is consumed by the data structures the system uses to keep track of connections.</P>
<P>Administrators can use the Internet Service Manager to limit the number of connections. On the property page for each service, click the <B>Service</B> tab, then change the value in the <B>Maximum Connections</B> field. The following table shows the default values for maximum connections by service.</P>
<P>Table 5.4    Default Values for Maximum Connections</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="161pt" VALIGN="TOP"><COL WIDTH="172pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Service</P></TD><TD VALIGN="TOP"><P>Default Maximum Connections</P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>FTP</P></TD><TD VALIGN="TOP"><P>1,000</P></TD></TR><TR><TD VALIGN="TOP"><P>Gopher</P></TD><TD VALIGN="TOP"><P>1,000</P></TD></TR><TR><TD VALIGN="TOP"><P>WWW (HTTP)</P></TD><TD VALIGN="TOP"><P>100,000</P></TD></TR></TBODY></TABLE>
</BODY></HTML>
