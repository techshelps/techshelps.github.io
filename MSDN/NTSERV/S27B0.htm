<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Performance Monitor to Monitor the IIS Working Set</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Using Performance Monitor to Monitor the IIS Working Set</H2><P CLASS="t">You can use the following Performance Monitor counters to monitor the working set of Inetinfo.exe. Internet Information Server and its component services run in the context of the Inetinfo process. (You can monitor the IIS Object Cache separately. For more information, see "Monitoring the IIS Object Cache" later in this chapter.)</P>
<P>Table 5.1    Performance Monitor Counters for the IIS Working Set</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="5%" VALIGN="TOP"><COL WIDTH="95%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Available Bytes</P></TD><TD VALIGN="TOP"><P>The amount of physical memory remaining and available for use, in bytes. This counter displays the amount of memory not currently used by the system or by running processes. This counter displays the last observed value, not an average. </P>
<P>The operating system attempts to prevent this value from falling below 4MB. The system often trims the working sets of processes to maintain the 4MB minimum available memory.</P></TD></TR><TR><TD VALIGN="TOP"><P>Process: Working Set: Inetinfo</P></TD><TD VALIGN="TOP"><P>Size of the working set of the process, in bytes. This counter displays the last observed value, not an average over time.</P>
<P>The working set is the space in physical memory available to the process. The working set contains recently used code and data. The working set of Inetinfo also contains the IIS Object Cache, buffers for IIS Log data, and the data structures HTTP uses to track connections.</P></TD></TR><TR><TD VALIGN="TOP"><P>Process: Page Faults/sec: Inetinfo</P></TD><TD VALIGN="TOP"><P>Hard and soft faults in the working set of the process.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Page Faults/sec</P></TD><TD VALIGN="TOP"><P>Hard and soft faults for all working sets running on the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Page Reads/sec</P></TD><TD VALIGN="TOP"><P>Hard page faults. This counter displays the number of times the disk is read to satisfy page faults. This counter displays the number of read operations, regardless of the number of pages read in each operation.</P>
<P>A sustained rate of 5 reads/sec or more might indicate a memory shortage.</P></TD></TR><TR><TD VALIGN="TOP"><P>Memory: Pages Input/sec</P></TD><TD VALIGN="TOP"><P>One measure of the cost of page faults. This counter displays the number of pages read to satisfy page faults. One page is faulted at a time, but the system can read multiple pages to prevent further faults.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">The counters in the preceding table are included in IISMem.pmw, a Performance Monitor workspace settings file on the <I>Supplement 1</I> CD.</P>
<P CLASS="t">You should log this data for several days. You can use <B>Bookmark</B> in the Performance Monitor log to identify times of unusually high and low server activity. </P></BODY></HTML>
