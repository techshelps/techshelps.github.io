<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Running WCAT</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css">
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<h2>Running WCAT</h2>
<p>
Running a WCAT test consists of the following steps:</p>
<p>
1.Preparing the controller input files</p>
<p>
2.Starting the WCAT clients</p>
<p>
3.Starting the WCAT controller </p>
<p>
4.Starting the WCAT, IIS, or Web server</p>
<p>
5.The warmup period</p>
<p>
6.The experimental period</p>
<p>
7.The cooldown period</p>
<p>
8.The reporting period</p>
<p>
9.Preparing the output files</p>
<p>
You begin a WCAT test by starting WCAT on the client computers and then starting WCAT on the controller computer. When you start WCAT on the controller, you specify the test you want to run and any special options for that test. You do not have to start WCAT on the server. </p>
<h3>Preparing the Controller Input Files </h3>
<p>
A WCAT test actually begins before the first WCAT computer is started. The test begins with the design of the input files. The input files direct the test and specify the activities of the clients during the test. The input files are stored on and interpreted by the controller computer. </p>
<p>
For a description of the WCAT input files, see &ldquo;Controller Input Files,&rdquo; earlier in this guide. For a description of how to design WCAT input files to test the configuration possibilities you want tested, see &ldquo;Changing Client Workloads,&rdquo; later in this guide.</p>
<p>
In addition to the standard controller input files, you can prepare an optional performance counter input file on the WCAT controller. For more information on doing so, see &ldquo;Using Performance Monitor Counters in a WCAT Test,&rdquo; later in this guide.</p>
<h3>Starting the WCAT Clients</h3>
<p>
The first step in a WCAT test run is to start the WCAT client program, Wcclient.exe, on the client computers. The client computers then attempt to connect to the controller computer. If the controller responds, the test proceeds; otherwise, the clients wait for 10 seconds and then try again to connect to the controller. This process is repeated until the clients connect to the controller or you stop the Wcclient.exe program.</p>
<p>
You can start WCAT on as many clients as you want and leave them running for as long as you want. However, the WCAT controller accepts connections from only the number of clients specified in the configuration input file. </p>
<p>
During the WCAT test, the WCAT clients simulate Web browsers by sending requests to the server. The clients keep in memory a log of statistics on the timing and frequency of requests sent to and received from the WCAT server. At the conclusion of the test, the clients send these statistics to the controller. The controller processes these statistics and records the information in the WCAT log file.</p>
<p>
<b>To start a WCAT client</b></p>
<p>
1.On the client computer, click <b>Start</b>, select <b>Programs</b>, and click <b>Command Prompt</b>. </p>
<p>
2.At the command prompt, type <b>cd </b><i>directory</i> where <i>directory </i>is the directory in which the WCAT client software is installed. Doing so switches to that directory. By default, the files are installed in \WebClient.</p>
<p>
3.At the command prompt, type <b>client </b>to start the WCAT client program.</p>
<p>
The client then tries to connect to the controller computer. Until the client has connected to the WCAT controller, it displays the following message on-screen:</p>
Connecting
Connect Failed. Error = 10061
Failed to connect to server 111.11.11.1
Controller is either not running a test or the name or ip address incorrect
Sleeping 10 seconds before trying to connect again....
</code>
<p>
This message indicates normal behavior of a WCAT client. It is not an error message.</p>
<p>
<b>To stop a WCAT client</b></p>
<p>
1.On the client computer, click <b>Start</b>, select <b>Programs</b>, and click <b>Command Prompt</b>.</p>
<p>
2.At the command prompt, type <b>ctrl+c</b></p>
<h3>Starting the WCAT Controller</h3>
<p>
After the clients are running, you start the WCAT controller program, Wcctl.exe, on the controller computer. The WCAT controller begins by locating and interpreting the controller input files. The controller uses the input files to send instructions to the clients. These instructions tell the clients which prepared test to run.</p>
<p>
Optionally, the controller can also monitor server performance during the test. This option requires the optional <i>testname</i>.pfc input file, where <i>testname </i>is the name of the test you are running. If you use this option, the controller starts Performance Monitor on the server computer and prepares to monitor the counters you identify in <i>testname.</i>pfc. </p>
<p>
The WCAT controller starts and monitors the WCAT test. When you start WCAT on the controller, you tell it which WCAT test to run. The controller begins the test by telling the WCAT clients which files to request, in which pattern and frequency. </p>
<p>
WCAT can run both the tests provided with WCAT and tests that you create. The tests provided with WCAT are described in &ldquo;WCAT Tests,&rdquo; later in this guide. For information on creating WCAT tests, see &ldquo;Designing Custom Tests,&rdquo; later in this guide.</p>
<p>
<b>To start a WCAT controller</b></p>
<p>
1.On the controller computer, click <b>Start</b>, select <b>Programs</b>, and click <b>Command Prompt</b>.</p>
<p>
2.At the command prompt, type <b>cd</b> <i>directory </i>where <i>directory </i>is the directory in which the WCAT controller files are installed. Doing so switches to that directory. By default, the files are installed in \WebCtrl.</p>
<p>
3.At the command prompt, type <b>run </b><i>testname</i> [<i>options</i>] where <i>testname </i>is the name of the prepared WCAT test you are running and <i>options </i>is options for that test. The test name does not include the test&rsquo;s filename extension. If you do not supply a test name, WCAT runs the 1ktest01 test. The possible test options you can use are described in &ldquo;Using Command Line Options,&rdquo; later in this guide.</p>

<h4>Note</h4>
<p>
WCAT uses the name of a particular test to name that test&rsquo;s output log file and optional performance results file. If you run a test more than once, WCAT overwrites any existing output files with the same test name. To preserve output files from a test before running the test again, use the<b> -e</b> option with the <b>run </b>command.</p>
<p>
When the controller&rsquo;s preparatory work is complete, it begins responding to client requests for connections to the controller. The controller allows the clients to connect to the controller one at a time, until the number of clients specified in the configuration input file for the test is reached. The status message &ldquo;All clients started&rdquo; appears in the controller&rsquo;s command prompt window when the required number of clients have successfully connected to the controller. </p>
<p>
If more than the required number of clients attempt to connect, the controller ignores the extra clients. If fewer than the required number of clients connect, the controller waits indefinitely for the others. You should start troubleshooting client status and connection to the network if the &ldquo;All clients started&rdquo; message does not display by the end of the warmup period.</p>
<p>
When the required number of clients have connected, the controller sends test instructions to the clients. The client computers display on-screen messages reflecting the receipt of these instructions. By default, the controller monitors the test on TCP/IP port 7232.</p>
<h3>Starting the WCAT, IIS, or Web Server</h3>
<p>
Next, start the Internet Information Server and HTTP Service on the WCAT server.</p>
<h3>The Warmup Period</h3>
<p>
The warmup period begins after the clients have received their instructions from the controller. During the warmup period, the clients start sending requests for Web pages to the server. However, the data collected by the clients and controller during the warmup period is not included in the output files, because work done during this period does not properly represent the full workload imposed on the server. </p>
<p>
Typically, servers respond more slowly during the warmup period than subsequently. This slow response comes from the fact the servers have not yet loaded frequently used pages into the file system cache, frequently used objects into the IIS Object Cache, or frequently used instructions into the processor cache. </p>
<h3>The Experimental Period</h3>
<p>
The experimental period is the body of the test. The length of the experimental period is referred to as the <i>duration</i> of the test, in other words the total test time minus the warmup and cooldown periods. During the experimental period, the clients request Web pages from the server based upon the controller&rsquo;s instructions. As the clients work, they gather statistics on their own behavior and on the response of the server.</p>
<p>
The controller is also active during the experimental period. The controller keeps track of the elapsed time of the test. It also monitors the Performance Monitor counters on the server computer, if that option is selected.</p>
<p>
During the experimental period, you might see one or more status messages displayed in the clients&rsquo; command prompt windows. These status messages provide information about the progress of the test. </p>
<h3>The Cooldown Period</h3>
<p>
When the experimental period stops, the cooldown period begins. </p>
<p>
During the cooldown period, the controller directs the clients to stop sending requests to the server. The clients complete requests in progress and continue to gather performance data. However, the data collected during the cooldown period is not included in the output files, because work done during this period does not properly represent the full workload imposed on the server.</p>
<h3>The Reporting Period</h3>
<p>
The reporting period occurs after the test. During the reporting period, the clients send the controller the data they collected during the test. After the controller has received all data, the controller closes all client connections. The clients then return to their pretest state. They resume periodic attempts to reconnect to the controller until you stop WCAT. </p>
<p>
At the end of the test, the results are computed and written to Scripts\<i>testname</i>.log, where <i>testname </i>is the name of the test run. A single line of information from the log file appears on each client&rsquo;s screen. This single line contains the total number of pages read, the average number of pages read per second, and the actual number of pages read by each client.</p>
<h3>Preparing the Output Files</h3>
<p>
During a WCAT test, the controller monitors the operation of the server and collects data on the response of the server to the test. The controller also collects data from the clients during the cooldown period. </p>
<p>
When the controller has gathered data from the clients, it calculates information from and summarizes that data. The controller then displays a brief summary of the data in its command prompt window and writes all data to the output log file.</p>
<p>
If the optional performance counter option is used with the <b>run</b> command, the controller adds a Performance Counters section to the log file and creates a performance results file from the data it has collected. For more information about the output files, see &ldquo;Analyzing the WCAT Log&rdquo; and &ldquo;Interpreting a Performance Results File,&rdquo; later in this guide.</p>
<p>
After the controller writes the output files, the controller program stops and closes connections to the client computers. Then the specified test is complete. If you are running multiple tests by using a batch file, the next test is automatically started. </p>
<p>
When the controller closes the client connections, each client attempts to reconnect to the controller until the client program (wcclient.exe) is stopped explicitly on each computer running that program.</p>

</FONT>
</BODY>
</HTML>
