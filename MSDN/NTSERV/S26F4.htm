<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Performance Monitor to Monitor the IIS Object Cache</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h2">Using Performance Monitor to Monitor the IIS Object Cache</H2><P CLASS="t">Performance Monitor includes a set of extensible counters you can use to monitor the IIS services. These counters are installed in Performance Monitor when you run Internet Information Server Setup. </P>
<P CLASS="t">For descriptions of the Internet Information Server counters, in the Performance Monitor <B>Add to Chart</B> dialog box, select the counter name, then click the <B>Explain</B> button. You can also use Counters.hlp, a help file for the Performance Monitor counters. The most recent version of Counters.hlp is included on the <I>Supplement 1</I> CD. Previous versions of Counters.hlp did not include descriptions of the Internet Information Server counters. </P>
<P>Many of the Internet Information Server counters display the last observed value or a cumulative count, not an average value or rate. To determine what a Performance Monitor counter displays, view its counter type in Counters.hlp. The <I>counter type</I> determines how the data Performance Monitor collects from internal counters is calculated and averaged. Counters.hlp lists the counter type of each counter and a description of the Performance Monitor counter types. </P>
<P CLASS="t">Performance Monitor includes four performance objects for measuring Internet Information Server performance:</P>
<P>     HTTP Service</P>
<P>     FTP Server</P>
<P>     Gopher Service</P>
<P>     Internet Information Services Global</P>
<P></P>
<P CLASS="t">The Internet Information Services Global performance object contains counters used by all three services. The counters that monitor the IIS Object Cache, which is shared by the services, are part of this performance object.</P>
<P></P>
<P CLASS="t">The following table lists the counters recommended for monitoring the IIS Object Cache. You should log the counters over time to record trends in the size, content, and effectiveness of the IIS Object Cache.</P>
<P>Table 5.2    Performance Monitor Counters for the IIS Object Cache</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="157pt" VALIGN="TOP"><COL WIDTH="198pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Internet Information Services Global: <BR>Cache Size</P></TD><TD VALIGN="TOP"><P>Maximum amount of space allocated for the IIS Object Cache, in bytes. This counter does not indicate how much of the space is occupied.</P>
<P>The default is 10% of physical memory.</P>
<P>(To change the size of the cache, edit the HKEY_LOCAL_MACHINE\System\<BR>     CurrentControlSet<BR>          \Services<BR>               \Inetinfo<BR>                    \Parameters<BR>                         \<B>MemoryCacheSize</B> </P>
<P>value entry in the Registry).</P></TD></TR><TR><TD VALIGN="TOP"><P>Internet Information Services Global: <BR>Cache Used</P></TD><TD VALIGN="TOP"><P>Space in the IIS Object Cache that is currently being used to store objects, in bytes.</P>
<P>Compare Internet Information Services Global: Cache Used to Internet Information Server: Cache Size.</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Internet Information Services Global: <BR>Cache Hits</P>
<P>Internet Information Services Global: <BR>Cache Misses</P>
<P>Internet Information Services Global: <BR>Cache Hits %</P></TD><TD VALIGN="TOP"><P>A measure of the efficiency of the IIS Object Cache. Internet Information Services Global: Cache Hits and Internet Information Services Global: Cache Hits % (Internet Information Services Global: Cache Hits/<BR>(Internet Information Services Global: Cache Hits + Internet Information Services Global: Cache Misses)) demonstrate how often data sought in the IIS Object Cache is found. Internet Information Services Global: Cache Misses indicates how often the system must search elsewhere in memory or on disk to satisfy a request. </P>
<P>Internet Information Services Global: Cache Hits and Internet Information Services Global: Cache Misses display the total number of hits and misses since the service started. These values always remain the same or increase over time.</P>
<P>Internet Information Services Global: Cache Hits % displays an instantaneous value, not an average over time.</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t"></P>
<P>Table 5.2    Performance Monitor Counters for the IIS Object Cache <I>(Continued)</I></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="157pt" VALIGN="TOP"><COL WIDTH="198pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Counter</P></TD><TD VALIGN="TOP"><P>Indicates</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Internet Information Services Global: <BR>Cache Flushes</P></TD><TD VALIGN="TOP"><P>How many times an object was deleted from the IIS Object Cache, either because it timed out, or because the object changed.</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Internet Information Services Global: <BR>Objects</P>
<P>Internet Information Services Global: <BR>Cached File Handles</P>
<P>Internet Information Services Global: <BR>Directory Listings</P></TD><TD VALIGN="TOP"><P>The number of objects currently stored in the IIS Object Cache.</P>
<P>Internet Information Services Global: Objects = Internet Information Services Global: Cached File Handles + Internet Information Services Global: Directory Listings + other objects, such as IDC queries and responses.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">These counters are included in IISCache.pmw, a Performance Monitor workspace settings file on the <I>Supplement 1</I> CD. The workspace sets up a chart and a report of the counters.</P></BODY></HTML>
