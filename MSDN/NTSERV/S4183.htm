<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Interactive and Remote Logon</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Interactive and Remote Logon</H3><P CLASS="t">Two logon processes can start logon authentication: </P>
<UL><LI>Interactive Logon</LI><LI>Remote Logon</LI></UL><H4 CLASS="h3"><A NAME="sec0"></A>Interactive Logon Authentication</H4><P CLASS="t"><I>Interactive logon</I> occurs when the user types information in the <B>Logon Information</B> dialog box displayed by the computer's operating system. In <B>Domain</B>, the user selects either the name of a domain or the name of the computer being used for logon, depending on where the user account being logged on to is defined. If the computer is a member of a workgroup and not of a domain, the <B>Logon Information</B> dialog box does not have a place for typing in the domain name.</P>
<P CLASS="t">The following table compares the logon options for a user on a computer running Windows&nbsp;NT in a workgroup, in a domain, and in a domain with a trust relationship. The unique identifier used by Windows&nbsp;NT after logon depends on the location of the database used to log on the user. The third column in this table describes the unique identifier used in each case. Any network connection requests sent elsewhere on the network include this unique identifier.</P>
<P CLASS="ttl"><B>Table 2.5    Summary of Interactive Logon Authentication</B></P>

<TABLE COLS="4" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="73pt" VALIGN="TOP"><COL WIDTH="118pt" VALIGN="TOP"><COL WIDTH="155pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="4" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>Computer is in</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>User can logon at</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Unique identifier</B></P></TD></TR><TR><TD COLSPAN="4" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Workgroup </P></TD><TD VALIGN="TOP"><P>Local database</P></TD><TD VALIGN="TOP"><P>Computername and username</P></TD></TR><TR><TD VALIGN="TOP"><P>Domain </P></TD><TD VALIGN="TOP"><P>Local database<BR>Domain database</P></TD><TD VALIGN="TOP"><P>Computername and username<BR>Domain name and username</P></TD></TR><TR><TD VALIGN="TOP"><P>Domain <BR>with a trust relationship</P></TD><TD VALIGN="TOP"><P>Local database<BR>Home domain database<BR>Trusted domain database</P></TD><TD VALIGN="TOP"><P>Computername and username<BR>Domain name and username<BR>Trusted-domain name and username</P></TD></TR><TR><TD VALIGN="TOP"><P>Domain without a trust relationship</P></TD><TD VALIGN="TOP"><P>Local database</P></TD><TD VALIGN="TOP"><P>Computername and username<BR>Untrusting-domain name and username</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><H4 CLASS="h3"><A NAME="sec1"></A>Remote Logon Authentication</H4><P CLASS="t"><I>Remote logon</I> takes place when a user is already logged on to a user account and makes a network connection to another computer. For example, the user connects to another computer using the <B>Map Network Drive</B> dialog box or the <B>net use </B>command.</P>
<P CLASS="t">A security-access token created at interactive logon is assigned to the initial process created for the user. When the user tries to access a resource on another computer, the remote server authenticates the user again and creates a security-access token for the user. The security-access token is placed in a table stored on the remote server. The server creates a user identifier (UID) for the user and maps it to the user's security-access token. This UID is sent back to the client redirector and is used in all further server-message-block (SMB) communication between the server and client. Subsequently, whenever a request for any resource on that server (and not just in the same share)comes in from the client, the UID identifies the user to the server process. The server checks the table and uses the security-access token stored for the UID. </P>
<P CLASS="t">For example, if a user attempts to connect to \\Myserver\share, a table entry on \\Myserver is set up with the user's SID. This is mapped to the user's access token. Later, if the user attempts to access a share called \art on \\Myserver, the original table entry will be used. The server examines the user's SID, locates an existing table entry, and validates (or denies) access to the files by comparing the access-token information to the access rights of the user. The attempt is successful in this example because the user had already established read access with the connection to \\Myserver\share. </P>
<P CLASS="t">If the user attempts to update information on \\Myserver\art and does not have write access to the share, access is denied. Even if the user is added to a group with write permissions, access will be denied because the one table entry still contains static information about the user's SID. The user must log off and log on again to create a new table entry. Then, the user will be able take advantage of the group's write permissions. </P>
<P CLASS="t">The server process creates a SID for the user and maps it to the user's security-access token. This SID is sent back to the client redirector and is used in all further server message block (SMB) communication between the server and client. Whenever a resource request comes in from the client, the SID identifies the user to the server process. The security-access token that maps to the user ID identifies the user to the remote security subsystem.</P>
<P><img src="XNG_B10.gif"></P>
<P CLASS="cap"><B>Figure 2.2    Remote logon authentication</B></P>
<P CLASS="t">The steps in a successful remote logon at a computer running Windows&nbsp;NT Workstation or Windows&nbsp;NT Server are:</P>
<P>    1.    The client computer sends the username, password, and domain name (the data entered in the <B>Begin Logon</B> dialog box) of the user to the remote Windows&nbsp;NT server. </P>
<P>    2.    The authenticating server compares the logon username and password with information in the user-accounts database.</P>
<P>    3.    If access is authorized, the server's LSA constructs an access token and passes it to the server process, which creates a user ID that refers to the access token.</P>
<P>    4.    The user ID is then returned to the client computer for use in all subsequent requests to the server.</P>
<P CLASS="t">After the session has been created, the client computer sends requests marked with the user ID it received during session setup. The server matches the user ID with the access token in an internal table. This access token at the server is used for access authentication.</P>
<P CLASS="t">The steps in a successful, remote logon at a Workgroup computer connecting to a computer running Windows&nbsp;NT in a domain are:</P>
<P>    1.    The local directory database performs interactive logon for the user at the workgroup computer (the client).</P>
<P>    2.    The client's username and a function of the password are passed to the specific server in the domain to which the client is trying to connect. This server checks the username and password with information in its local directory database. If there is a match, access to this server is allowed.</P>
<P CLASS="t">The steps in a successful remote logon at a domain computer connecting to a computer running Windows&nbsp;NT in the same domain are:</P>
<P>    1.    The domain's directory database performs interactive logon for the user at the client computer.</P>
<P>    2.    The client's domain name, username, and a function of the password are passed to the computer being accessed, which passes them to a computer running Windows&nbsp;NT Server in the domain. </P>
<P>    3.    The computer running Windows&nbsp;NT Server verifies that the domain name for the client matches this domain.</P>
<P>    4.    The computer running Windows&nbsp;NT Server checks the username and password against the domain's directory database. If there is a match, access is allowed.</P>
<P CLASS="t">The steps in a successful remote logon at a domain client in a trusted domain connecting to a Windows&nbsp;NT computer are:</P>
<P>    1.    The domain's directory database performs interactive logon for the user at the client computer. </P>
<P>    2.    The client's domain name, user name, and a function of the password are passed to the computer being accessed. That computer passes the logon information to a Windows&nbsp;NT Server in the domain. </P>
<P>    3.    The computer running Windows&nbsp;NT Server verifies that the client's domain is a trusted domain and then passes the client's identification information to a computer running Windows&nbsp;NT Server in the trusted domain. </P>
<P>    4.    A computer running Windows&nbsp;NT Server in the trusted domain (that is, in the same domain as the client computer) checks the user name and password against the domain's directory database. If there is a match, access is allowed.</P></BODY></HTML>
