<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Microsoft WINS Clients</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Microsoft WINS Clients</H3><P CLASS="t">WINS clients, referred to as <I>WINS-</I><I> </I><I>enabled</I> clients, are configured to use the services of a WINS server. </P>
<P CLASS="t">Windows NT- based clients are configured with the IP address of one or more WINS servers by using the <B>WINS Address</B> tab on the <B>Microsoft TCP/IP Properties</B> page in <B>Control Panel </B><FONT FACE="Symbol"><B>-</B></FONT><B> Network</B>. The following figure illustrates this configuration page.</P>
<P><img src="XNG_M02a.gif"></P>
<P CLASS="cap"><B>Figure 8.2    Enabling the WINS Service on a WINS Client</B></P>
<P CLASS="t">The WINS-enabled client communicates with the WINS server to:</P>
<UL><LI>Register the client names in the WINS database.</LI><LI>Get mappings for user names, NetBIOS names, DNS names, and IP addresses from the WINS database.</LI></UL><H4 CLASS="h3"><A NAME="sec0"></A>How WINS Clients Register Their Names</H4><P CLASS="t">When a WINS-enabled computer is started, the WINS client service attempts to directly contact the WINS server (by using point-to-point communication) to register the client names and corresponding IP address. The type of message the client sends is referred to as a <I>name registration</I> <I>request</I>. The WINS client sends one name registration request (which includes the computer IP address) for the computer, logged-on user, and networking services running on the computer. </P>
<P CLASS="t"><B>Note</B></P>
<P>The IP address is dynamically assigned by a DHCP server if the client is DHCP-enabled. If DHCP is not used, the IP address is a statically assigned number which you must get from a network administrator and manually configure on the computer.</P>
<P CLASS="t">When the WINS server receives a name registration request, it checks the WINS database to ensure that the name in the request is unique and does not exist in the WINS database. The WINS server responds with either a positive or negative <I>name registration response</I>. The following table describes the processing that occurs for each type of WINS server name registration response.</P>
<P CLASS="ttl"><B>Table 8.2   WINS Server Response to Name Registration Request</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="20%" VALIGN="TOP"><COL WIDTH="80%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>WINS server name registration response</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>WINS client behavior </B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>No response</P></TD><TD VALIGN="TOP"><P>The WINS client sends another name registration request.</P></TD></TR><TR><TD VALIGN="TOP"><P>Positive</P></TD><TD VALIGN="TOP"><P>The WINS server responds with a positive name registration response if there is not a duplicate name in the WINS database. The response includes a time- to- live (TTL) value that indicates how long the client can own that name. The client must renew the name registration before the TTL expires.</P></TD></TR><TR><TD VALIGN="TOP"><P>Negative</P></TD><TD VALIGN="TOP"><P>If there is an existing registration for the name in the WINS database, the WINS server sends a challenge, referred to as a <I>name query request</I>, to the currently registered owner of the name. </P>
<P>The WINS server sends the challenge three times, waiting 500 milliseconds between attempts. If the computer is multihomed, the WINS server tries each IP address it has for the computer until the WINS server receives a response or until all of the IP addresses have been tried.</P>
<P>If the WINS server receives a response from the current owner, it sends a negative name registration response to the WINS client attempting to register the name, by using the IP address included in the client registration request.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The following figure illustrates the flow of name registration request and name response. </P>
<P><img src="xng_m03.gif"></P>
<P CLASS="cap"><B>Figure 8.3    WINS Client Name Registration</B></P>
<H4 CLASS="h3"><A NAME="sec1"></A>How WINS Clients Renew Their Names</H4><P CLASS="t">WINS clients must renew their name registrations before the time-to-live (TTL) value expires. The TTL value indicates how long the client can own that name. </P>
<P CLASS="t">When a WINS client renews its name registration, it sends a <I>name refresh request</I> directly (point- to-point) to the WINS server. The name refresh request includes the WINS client's IP address and the name that the client is requesting to have refreshed. The WINS server responds to the name refresh request with a <I>name refresh response</I> that includes a new TTL for the name.</P>
<P CLASS="t">A WINS client first attempts to refresh its name registrations after one-half of the TTL is expired. If the WINS client does not receive a name refresh response from the WINS server, it sends name refresh requests every two minutes, until one-half of the TTL is expired. </P>
<P CLASS="t">If the WINS client does not receive a name refresh response and one-half of the TTL is expired, the WINS client begins sending name refresh requests to a secondary WINS server if the computer is configured with an IP address for a secondary WINS server. The WINS client attempts to refresh its registrations with the secondary WINS server as if it were the first refresh attempt— n time increments equal to one-eighth of the TTL. The WINS client sends the name refresh requests until it successfully receives a name refresh response, or one-half of the TTL is expired. If the WINS client cannot contact the secondary WINS server by the time half of the TTL has expired, it reverts back to the primary WINS server. After a WINS client has successfully refreshed its name registrations, it does not start subsequent name registration requests until one-half of the TTL is expired.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>How WINS Clients Release Their Names</H4><P CLASS="t">When a WINS-enabled computer is correctly stopped, the WINS client sends a <I>name release request </I>to the WINS server. A name release request is sent for each name associated with the computer, logged-on user, and network client service that is registered with the WINS server. The name release request includes the computer IP address and the name that should be released (deleted) from the WINS server database.</P>
<P CLASS="t">Because the WINS-enabled client is configured with the IP address of the WINS server, the name release requests are sent directly to the WINS server. When the WINS server receives a name release request, the WINS server checks the WINS database for the specified name. </P>
<P CLASS="t">Based on the results of the database check, the WINS server sends a positive or negative <I>name release response </I>to the WINS client and removes the specified name from the WINS database. The name release response contains the name released and a TTL of 0 (zero). </P>
<P CLASS="ttl"><B>Table 8.3    WINS Server Response to Name Release Request</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="20%" VALIGN="TOP"><COL WIDTH="80%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>WINS server  name release response</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>WINS client behavior</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>No response</P></TD><TD VALIGN="TOP"><P>The WINS client waits to receive the response, and if it does not receive one, it sends another name release request.</P></TD></TR><TR><TD VALIGN="TOP"><P>Positive</P></TD><TD VALIGN="TOP"><P>The WINS client releases the name and stops. Microsoft WINS clients ignore the contents of the name release response.</P></TD></TR><TR><TD VALIGN="TOP"><P>Negative</P></TD><TD VALIGN="TOP"><P>The WINS client releases the name and stops. Because Microsoft WINS clients ignore the contents of the name release response when the WINS server sends a negative name release response, the server does not prevent the client from releasing the name and stopping. </P>
<P>The WINS server sends a negative name release response only if it encounters a WINS database error or if the address of the WINS client does not match the address stored in the WINS database. </P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><H4 CLASS="h3"><A NAME="sec3"></A>How WINS Clients Perform Name Resolution</H4><P CLASS="t">WINS clients perform NetBIOS computer name-to-IP-address mapping resolution by using the NetBIOS over TCP/IP (NetBT) component. A Windows NT-based computer is automatically configured to use one of four different NetBT name resolution modes (methods), based on how TCP/IP is configured on the computer. The following table describes the computer (referred to as a node) configuration and its associated NetBT name resolution mode.</P>
<P CLASS="ttl"><B>Table 8.4   Description of NetBIOS Node Types</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="20%" VALIGN="TOP"><COL WIDTH="80%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>NetBIOS name resolution node type</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>b-node</P></TD><TD VALIGN="TOP"><P>Uses IP broadcast messages to register and resolve NetBIOS names to IP addresses. Windows&nbsp;NT-based computers can use <I>modified b-node</I> name resolution.</P></TD></TR><TR><TD VALIGN="TOP"><P>p-node</P></TD><TD VALIGN="TOP"><P>Uses point-to-point communications with a NetBIOS name server (in Windows&nbsp;NT-based networks, this is the WINS server) to register and resolve computer names to IP addresses. </P></TD></TR><TR><TD VALIGN="TOP"><P>m-node</P></TD><TD VALIGN="TOP"><P>Uses a combination (mix) of b-node and p-node communications to register and resolve NetBIOS names. M-node first uses b-node; then, if necessary, p-node. M-node is typically not the best choice for larger networks because its preference for b-node broadcasts increases network traffic.</P></TD></TR><TR><TD VALIGN="TOP"><P>h-node</P></TD><TD VALIGN="TOP"><P>Uses a <I>hybrid </I>combination of b-node and p-node. When configured to use h-node, a computer always tries p-node first and uses b-node <I>only</I> if p-node fails. When a Windows NT-based computer is configured as a WINS client, it is by default configured as h-node. To further lessen the potential for IP broadcasts, Windows NT-based computers are configured, by installation default, to use an LMHOSTS file to search for name –to- IP-address mappings before using b-node IP broadcasts.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t"><B>Note</B></P>
<P>Use the <B>ipconfig /all </B>command to display the TCP/IP configuration, including node type, of your computer. For example, on a computer that is configured as a WINS client, the node type Hybrid appears when the <B>ipconfig /all</B> command is entered.</P>
<P CLASS="t">The following figure illustrates the name resolution processes between a WINS client (h-node) and a WINS server.</P>
<P><img src="XNG_M04.gif"></P>
<P CLASS="cap"><B>Figure 8.4    H-Node Name Resolution for WINS Clients</B></P></BODY></HTML>
