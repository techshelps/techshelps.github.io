<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Browser</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">The Browser</H3><P CLASS="t">The Browser service (not to be confused with a Web browser) was originally designed to be a simple workgroup enumeration tool, but has been enhanced significantly over time. The Browser service supports browsing computers on the network and being browsed by other computers. </P>
<P CLASS="t">It is the service that gathers and organizes the list of computers and domains that is displayed in <B>Network Neighborhood.</B> (You can also see the browse list by typing <B>net view</B>in the command window.) The Browser maintains an up-to-date list of computers and provides this information to programs that require it.</P>
<P CLASS="t"><B>Note</B></P>
<P>Under Windows NT version 3.5<I>x</I>, use the File Manager <B>Connect Network Drive</B> dialog box to view the computer browser list.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Master Browser Elections</H4><P CLASS="t">The Primary Domain Controller (PDC) for a domain always functions as the Domain Master Browser and is responsible for replicating the browse lists to all Master Browsers within the domain. A Master Browser is elected on each subnet within the domain.</P>
<P CLASS="t">Each domain has one Master Browser per subnet that contains computers listening for server announcements. The Master Browser maintains lists of available resources that can be requested by client computers. </P>
<P CLASS="t">As the number of hosts on a subnet grows, the Master Browser will start to replicate the browse list to Backup Browsers. If the Master Browser is shut down, an election takes place to determine the new Master Browser. Existing Backup Browsers have an advantage in the election. For this process, workgroups and domains function alike, except that all Windows NT Servers are either a Master Browser or Backup Browser, and Windows NT Workstation and Windows for Workgroups computers are not allowed to become Backup or Master browsers unless specifically configured. </P>
<P CLASS="t">Master Browser elections take place over the special &lt;domain&gt;[1E] NetBIOS name using subnet broadcasts (without using WINS). The election is fully automatic and takes into consideration a number of heuristics: operating system, version number, uptime, role (Workstation, Backup Domain Controller, Primary Domain Controller), etc. In general, the most robust computer on the network wins. Elections are forced when:</P>
<UL><LI>A client cannot find its Master Browser at startup.</LI><LI>A client detects that a Master Browser has disappeared.</LI><LI>A Windows NT Server starts on the network.</LI></UL><H4 CLASS="h3"><A NAME="sec1"></A>Maintaining Browse Lists</H4><P CLASS="t">File servers periodically (once every 12 minutes) announce their presence to the special &lt;domain&gt;[1D] NetBIOS name in an IP subnet broadcast. The Master Browser builds a list from these broadcasts. In addition, all Master Browsers register a group name \0x01\0x02__MSBROWSE__\0x02\0x01on the local subnet (not with WINS). Periodically the Master Browsers in the domains and workgroups announce their presence to this special name. Thus, in addition to the workgroup or domain membership lists, Master Browsers also maintain lists of other domains with their associated Master Browsers.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>Requesting Browse Lists</H4><P CLASS="t">When a browse request is made from a client, a "GetBackupListRequest" is sent to the &lt;domain&gt;[1D] name (the Master Browser) that returns a list of Browser servers for the local subnet. The "GetBackupListRequest" is also unicast to the Domain Master Browser, which handles the case in which the queried domain has no members on the subnet. The client Browser service selects three of the browsers from the list and stores them for future use. Then when further browsing is done, by calling the <I>NetServerEnum</I> API, one of the three saved names is contacted by the client.</P>
<P CLASS="t">When a client queries its workgroup or domain browser, it first gets back a list of all of the domains and workgroups that the browser has learned about through the \0x01\0x02__MSBROWSE__\0x02\0x01 name as well as the name of the Master Browser for each. When the user expands a domain or workgroup into a membership list, the client sends a request to &lt;domain&gt;[1D] to get to the list (this is translated to a local subnet broadcast by WINS). If this fails, it contacts the Master Browser for the particular domain or workgroup and fetches the membership list.</P>
<H4 CLASS="h3"><A NAME="sec3"></A>The Domain Master Browser</H4><P CLASS="t">As mentioned earlier, the PDC always acts as the Domain Master Browser. Because each locally-elected Master Browser will only hear local membership announcements, there needs to be a mechanism to consolidate all of the members into a single list. This is the role of the Domain Master Browser. </P>
<P CLASS="t">Periodically, all of the locally-elected Master Browsers contact the PDC and replicate their membership lists to it. The PDC merges the list with the "master" list for the whole domain and replicates the master list back down. </P>
<P CLASS="t">The replication algorithm is "smart" in that the local Master Browsers only replicate the members that they have learned about locally to the domain master. This whole mechanism allows members in a domain to span subnets and, for all clients (eventually), to be able to get complete membership lists.</P>
<P CLASS="t">On WINS-enabled networks, the browser code in Windows&nbsp;NT versions 4.0 and 3.5<I>x</I> periodically connects to WINS and learns all of the computers that have registered any &lt;domain&gt;[1B] names. The Browser then does a GetDCName() on each of the &lt;domain&gt;[1B] names (followed by an attempt on &lt;domain&gt;[1C]), and adds the &lt;domain name&gt; &lt;master browser name&gt; to its domain/workgroup list. This allows members of one domain to locate the Master Browser for another domain even when it is on another subnet and the two domains have no "broadcast area" in common.</P>
<H4 CLASS="h3"><A NAME="sec4"></A>Browsing for Other Windows-based Computers</H4><P CLASS="t">Browser code for Windows for Workgroups computers has been enhanced several times to reduce the dependency on having a BDC per subnet. The updated files are available from <B>ftp.microsoft.com</B>. Windows 95 computers also contain enhanced browsing code.</P></BODY></HTML>
