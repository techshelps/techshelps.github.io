<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FTEdit - Recovering Volume Sets, Stripe Sets, and Stripe Sets With Parity</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">FTEdit - Recovering Volume Sets, Stripe Sets, and Stripe Sets With Parity </H3><P CLASS="t">The FTEdit utility on the <I>Windows&nbsp;NT Server Resource Kit</I> CD aids in the recovery of stripe sets, volume sets, stripe sets with parity, and mirror sets. For more information about using FTEdit, see Ftedit.hlp on the <I>Windows&nbsp;NT Server Resource Kit</I> CD.</P>
<P CLASS="t"><B>Note</B></P>
<P>You can recover and rebuild information for all of these volumes in the same way. However, rebuilding a mirror set with FTEdit is a waste of time, since the mirror set has to be regenerated anyway. You are better off simply breaking the mirror set by using Disk Administrator, and then recreating it. See Disk Administrator Help for the procedures.</P>
<P CLASS="t">Because stripe sets and volume sets are not fault tolerant, Windows&nbsp;NT Server performs orphan processing differently than it would for stripe sets with parity and mirror sets. If one of the disks in a stripe set or volume set fails, the entire volume is no longer usable, and all the primary partitions or logical drives that are members of the volume are marked as orphans. In Disk Administrator, the members of the volume are displayed as Unknown.</P>
<P CLASS="t">All data about the configuration of volume sets, stripe sets, mirror sets, and stripe sets with parity are contained in the HKEY_LOCAL_MACHINE\SYSTEM\DISK Registry key. This disk configuration information is stored in binary format, so it is not practical to edit it manually. When the Registry information is corrupt or missing, and no backups are available, you can use FTEdit to build the Registry information and allow the operating system to read the volumes.</P>
<P CLASS="t">For example, if the disk containing the boot partition becomes unusable, or the computer fails, you might want to move the disks containing the volumes to another computer. Alternatively, you might decide to reinstall the operating system on a new disk. In either case, the operating system does not have any information about the volumes. </P>
<P CLASS="t">The operating system has information about which disks are members of volumes, but it cannot distinguish between a stripe set, a stripe set with parity, a volume set, or a mirror set without the Registry information. In this situation, when the volumes are displayed in Disk Administrator, the file system might be displayed as Unknown, and there will be no drive letter assigned to the volumes. This is to prevent writing to the volume, which could corrupt it. </P>
<P CLASS="t">When using FTEdit to rebuild the DISK Registry subkey, you need to know the order in which the partitions on the disks were combined to create the volume. The following scenario shows why order is important. </P>
<P CLASS="t">A previous user created a volume set by combining unpartitioned areas on three disks in this order:</P>
<UL><LI>2 MB on disk 2</LI><LI>3 MB on disk 0</LI><LI>4 MB on disk 1</LI></UL><P CLASS="t">When a volume set is created, the Partition Boot Sector is the first sector on the first area selected. Data are written to the areas in the order in which they are combined. Thus, if someone created a 6&nbsp;MB file on this volume set, the file would occupy the following areas:</P>
<UL><LI>2 MB on disk 2</LI><LI>3 MB on disk 0</LI><LI>1 MB on disk 1</LI></UL><P CLASS="t">Now you need to use FTEdit to rebuild the volume set. You select the disks in the order disk 0, disk 1, and then disk 2. Windows&nbsp;NT will not be able to find the Partition Boot Sector for the volume set, because the first sector of the volume set that you rebuilt is on disk 0, which contains only data. The Partition Boot Sector is actually on disk 2, but that disk area is at the end of the volume set you created. Your attempt to rebuild the volume set has failed, because you did not know the order in which to combine the disk areas. </P>
<P CLASS="t">The remainder of this section describes using FTEdit to build Registry information for a stripe set with parity that has been moved from another computer. (Disks 1, 2, and 3 are the disks that have been moved.) Each disk is 519 MB and has one partition. Both computers are running Windows&nbsp;NT Server version 4.0.</P>
<H4 CLASS="h4"><A NAME="sec0"></A>To rebuild a stripe set with parity</H4><P>    1.    Open Disk Administrator, so that you can update the disk configuration information. Disk Administrator needs to store the disk signature and other basic disk information before the disks can be recognized.</P>
<P>    2.    Open FTEdit. The dialog box in Figure 7.4 is displayed. </P>
<P><img src="xsr_h09.gif"></P>
<P><B>Figure 7.4    Using FTEdit to recover a stripe set with parity</B></P>
<P>The <B>Disks</B> group box identifies all of the disks connected to the computer. The <B>Partitions</B> group box contains information about the disk currently selected, or the first disk, if none are selected. Disk 0 is two gigabytes, and contains two partitions.</P>
<P>    3.    On the <B>Edit</B> menu, click <B>Create FT Set</B>. In the <B>FT Set Type</B> dialog box, click the Option button for the type of volume you are building. In this example, click <B>Stripe Set with Parity</B>. </P>
<P><img src="xsr_h10.gif"></P>
<P>    4.    In the <B>Disks</B> list box, select the first disk that will be a member of the stripe set with parity. Available partitions are displayed in the <B>Partitions</B> list box on the right.</P>
<P>Double-click the partition from each disk that will make up the stripe set with parity. The disk and partition information will be displayed in the list box on the lower right. The title of this list box reflects the type of volume being built. For this example, the title is <B>Stripe Set with Parity</B>. The next screen shot shows the dialog box after double-clicking Partition 1 on each of Disk 1, Disk 2, and Disk 3.</P>
<P><img src="xsr_h11.gif"></P>
<P>    5.    Click the <B>Save FT Set</B> button. The information is transferred to the <B>FT Set Member Information</B> list box. Check to make sure the information is correct. FTEdit should look like the following illustration:</P>
<P><img src="xsr_h12.gif"></P>
<P>The <B>Partitions</B> list box shows the information for Disk 0. The disks that are used in creating the new volume are those listed in the <B>FT Set Member Information</B> list boxes.</P>
<P>    6.    On the <B>Edit</B> menu, click <B>Save Changes to System</B>. The following message box is displayed:</P>
<P><img src="xsr_h13.gif"></P>
<P>    7.    Exit FTEdit, close any open programs, and restart the system. You need to do this to get the new information loaded into the Registry.</P>
<P>    8.    Open Disk Administrator. </P>
<P>Click one of the partitions in the stripe set with parity. If the status bar has a message like <B>Stripe set with parity #N [INITIALIZING]</B>, the computer on which you were previously using the stripe set with parity did not finish shutdown. Wait for Disk Administrator to finish the initialization. If the volume was functional before the disks were moved, and the correct information was entered in FTEdit, the data on the volume should be intact.</P>
<P>    9.    From the Disk Administrator <B>Tools</B> menu, click <B>Drive Letter</B>.<B> </B>In the <B>Assign Drive Letter</B> dialog box, click <B>Assign drive letter</B>, and then choose a drive letter for the new volume.<B> </B></P>
<P>The volume is now accessible from Windows&nbsp;NT Explorer, My Computer, and by the rest of the operating system.</P>
<P>    10.    After confirming that the volume is correctly configured and is accessible, be sure to add this new configuration information to the records that you keep for this computer.</P>
<P>You might want to back up the stripe set with parity at this time.</P>
<P CLASS="t">These same steps can be used to recover volume sets and stripe sets. To successfully use FTEdit to build Registry information, you must know the following information:</P>
<UL><LI>Which disks contain stripe sets, stripe sets with parity, and volume sets.</LI><LI>Which partitions belong to the stripe sets, stripe sets with parity, and volume sets.</LI><LI>The order in which the partitions were combined into the stripe sets, stripe sets with parity, or volume sets.</LI></UL><P CLASS="t">If your configuration involves multiple stripe sets, stripe sets with parity, and volume sets on several different disks, you might face a very difficult job remembering which primary partitions and logical drives belong to which volumes. For this reason, it is a good idea to keep the disk configuration simple, and to keep recovery information as up-to-date as possible.</P>
<P CLASS="t"><B>Note</B></P>
<P>FTEdit edits the binary information in the Registry. It cannot recover damaged or corrupt data on the disk.</P></BODY></HTML>
