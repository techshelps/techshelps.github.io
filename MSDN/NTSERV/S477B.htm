<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating Remoteboot Configurations for New Adapters</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Creating Remoteboot Configurations for New Adapters</H3><P CLASS="t">The following section is for advanced administrators.</P>
<P CLASS="t"><B>Note</B></P>
<P>Before you use <B>rplcmd</B>, make sure that you have a backup copy of the remoteboot database. For details, see "Backing Up the Remoteboot Database" later in this chapter.</P>
<P CLASS="t">When the Remoteboot service receives a boot request, it looks up the workstation record associated with the client's network adapter ID (if there isn't one, then it creates an adapter record and does not attempt to boot the client). It then determines the profile associated with the workstation record and the configuration record that was used to create the profile. The configuration record contains a boot block record name, and more than one boot block record may have the same name. The Remoteboot service looks for a boot block record with this boot block record name and the vendor ID contained in the client's network adapter ID. The configuration record and the boot block record provide the information needed to boot the client.</P>
<P CLASS="t">Windows&nbsp;NT&nbsp;Server provides boot block and configuration records for the most popular network adapters. </P>
<P CLASS="t">Use the following procedure if Remoteboot Manager cannot assign a workstation record to the correct profile because the network adapter type is incompatible. This can happen when there is no existing boot block record mapping the network adapter vendor ID to the correct network adapter type. You must create a new boot block record specifying the vendor ID and the network adapter type. If any client with this network adapter type will boot to Windows&nbsp;95, you must create an MS-DOS boot block record and a Windows&nbsp;95 boot block record.</P>
<P CLASS="t"><B>To create a new boot block record for a supported network adapter type</B></P>
<P> <FONT FACE="symbol">·</FONT>    Use the <B>rplcmd</B> utility to add boot block records for the adapter and vendor ID. For details about the <B>rplcmd</B> utility, see the preceding section, "Using the Remoteboot Command Utility (RPLCMD.EXE)." </P>
<P>For <B>BootName</B>, use the name of an existing boot block record that boots clients with network adapters of this type (but with a different vendor ID).</P>
<P>For example, the following sequence of commands creates sample boot block records for MS-DOS and Windows&nbsp;95:</P>
<P CLASS="spacing"><BR></P>
C:\winnt\rpl&gt; rplcmd
Adapter Boot Config Profile Service Vendor Wksta [Quit]: b
Add Del Enum: a
BootName=DOSX
VendorName=012345
BbcFile=BBLOCK\NETBEUI\dirname\DOSBB.CNF
        All other parameters are optional
BootComment=Name of this adapter
WindowSize=0
Adapter Boot Config Profile Service Vendor Wksta [Quit]: b
Add Del Enum: a
BootName=W95X
VendorName=012345
BbcFile=BBLOCK\NETBEUI\dirname\W95BB.CNF
        All other parameters are optional
BootComment=Name of this adapter
WindowSize=0
Adapter Boot Config Profile Service Vendor Wksta [Quit]: v
Add Del Enum: a
VendorName=012345
BootComment=Name of this adapter
<P><B>Note </B> In this example, and in those that follow, the value <B>012345</B> represents the "vendor name" or network adapter prefix. Replace this with the first six digits of the network adapter type's adapter identification number.</P>
<P>If the adapter prefix for the new adapter type matches that of an existing adapter type, modify the BootName field of the boot block and workstation record field to be unique among all boot block or workstation records corresponding to that adapter prefix. For example, use <B>DOS</B> for IBM Token Ring and <B>DOSI</B> for IBM Ethernet.</P>
<P CLASS="t">If you want to use a new remoteboot-compatible network adapter that is not already supported by Windows&nbsp;NT Server, you must manually create a new boot block, boot block record(s), and a configuration record corresponding to the new adapter. This allows the Remoteboot service and Remoteboot Manager to recognize the new adapter type.</P>
<P CLASS="t">Microsoft does not guarantee support for adapters that are not on the list of supported adapters (see "Supported Network Adapters" earlier in this chapter). Note especially that the Remoteboot service does not support PCI, Token-Ring, or PNP adapters for Windows 95 remoteboot clients.</P>
<P CLASS="t">To support Windows&nbsp;95 clients with a particular network adapter type, you must create both an MS-DOS 6.2<I>x</I> configuration and a Windows&nbsp;95 configuration.</P>
<P CLASS="t"><B>To create an MS-DOS configuration for a new adapter</B></P>
<P>    1.    Copy the MS-DOS device driver for the network adapter to the <I>&lt;systemroot&gt;</I>\Rpl\Bblock\Ndis directory.</P>
<P>    2.    Create the directory <I>&lt;systemroot&gt;</I>\Rpl\Bblock\Netbeui\<I>adapter</I>, where <I>adapter</I> is the name of the adapter. Within this directory, create these files:</P>
<UL><LI>Dosbb.cnf</LI><LI>Protocol.ini</LI></UL><P>Pattern these files after existing files in a corresponding directory, but substitute the new driver names in the Dosbb.cnf file, and the correct driver information in the Protocol.ini file.</P>
<P>    3.    Use the <B>rplcmd</B> utility to add a boot block record for the new adapter. For details about the <B>rplcmd</B> utility, see the preceding section, "Using the Remoteboot Command Utility (RPLCMD.EXE)." </P>
<P>For example, the following sequence of commands creates a sample boot block record:</P>
<P CLASS="spacing"><BR></P>
C:\winnt\rpl&gt; rplcmd
Adapter Boot Config Profile Service Vendor Wksta [Quit]: b
Add Del Enum: a
BootName=DOSX
VendorName=012345
BbcFile=BBLOCK\NETBEUI\dirname\DOSBB.CNF
        All other parameters are optional
BootComment=Name of this adapter
WindowSize=0
<P>    4.    Use the <B>rplcmd</B> utility to add the new configuration.</P>
<P>For example, the following sequence of commands creates a sample configuration:</P>
<P CLASS="spacing"><BR></P>
C:\winnt\rpl&gt; rplcmd
Adapter Boot Config Profile Service Vendor Wksta [Quit]: c
Add Del Enum: a
ConfigName=DOS622X
BootName=DOSX
DirName=DOS
DirName2=DOS622
FitShared=fits\dos622.FIT
FitPersonal=fits\dos622p.FIT
        All other parameters are optional
ConfigComment=DOS 6.22 &lt;adapter name&gt;
DirName3=
DirName4=
<P>For <B>BootName</B>, enter the name of the boot block record you created in step 3.</P>
<P CLASS="t"><B>To create a Windows&nbsp;95 configuration for a new adapter</B></P>
<P>    1.    Boot the client to MS-DOS 6.2<I>x</I> to confirm that the MS-DOS configuration is correct. For details, see "Adding a New Client" earlier in this chapter. </P>
<P>    2.    In the <I>&lt;systemroot&gt;</I>\Rpl\Bblock\Netbeui\<I>adapter</I> directory, where <I>adapter</I> is the name of the adapter, copy the Dosbb.cnf file to W95bb.cnf.</P>
<P>    3.    Edit the new W95bb.cnf file to change the following line:</P>
<P CLASS="spacing"><BR></P>
EXE BBLOCK\I13.COM ~ ~ ~

<P>to read:</P>
<P CLASS="spacing"><BR></P>
EXE BBLOCK\W95I13.COM ~ ~ ~
<P>    4.    Use the <B>rplcmd</B> utility to add a boot block record for the new adapter. For details about the <B>rplcmd</B> utility, see the preceding section, "Using the Remoteboot Command Utility (RPLCMD.EXE)." </P>
<P>For example, the following sequence of commands creates a sample boot block record:</P>
<P CLASS="spacing"><BR></P>
C:\winnt\rpl&gt; rplcmd
Adapter Boot Config Profile Service Vendor Wksta [Quit]: b
Add Del Enum: a
BootName=W95X
VendorName=012345
BbcFile=BBLOCK\NETBEUI\dirname\W95BB.CNF
        All other parameters are optional
BootComment=Name of this adapter
WindowSize=0
<P>    5.    If there is not already a Windows&nbsp;95 configuration for this <B>BootName</B>, then use the <B>rplcmd</B> utility to add the new configuration.</P>
<P>For example, the following sequence of commands creates a sample configuration:</P>
<P CLASS="spacing"><BR></P>
C:\winnt\rpl&gt; rplcmd
Adapter Boot Config Profile Service Vendor Wksta [Quit]: c
Add Del Enum: a
ConfigName=W95X
BootName=W95X
DirName=DOS
DirName2=W95X
FitShared=fits\win95.FIT
FitPersonal=fits\win95p.FIT
        All other parameters are optional
ConfigComment=Windows 95 &lt;adapter name&gt;
DirName3=
DirName4=
<P>For <B>BootName</B>, enter the name of the boot block record you created in step 4.</P></BODY></HTML>
