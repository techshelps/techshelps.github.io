<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NTFS Recoverability</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">NTFS Recoverability</H3><P CLASS="t">A lazy-write file system, such as the FAT file system when running Windows&nbsp;NT, uses an intelligent cache-management strategy and provides a way to recover data (such as the Chkdsk<B> </B>program) if there is an error when writing to the disk. All data are accessed via the file cache. While the user searches folders or reads files, data to be written to disk accumulates in the file cache. If the same data are modified several times, all those modifications are captured in the file cache. The result is that the file system needs to write to disk only once to update the data. </P>
<P CLASS="t">NTFS is <I>recoverable file system</I>. It combines the speed of a lazy-write file system with virtually instant recovery.</P>
<P CLASS="t">The NTFS file system guarantees the consistency of the volume by using standard transaction logging and recovery techniques, although it doesn't guarantee the protection of user data. It includes a lazy-write technique plus a volume-recovery technique that takes typically only a second or two to insure the integrity of all NTFS volumes each time the computer is restarted.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Effects of File and Disk Cache on Recoverability</H4><P CLASS="t">The file cache is just an area of RAM that contains the data. When you write data to disk, Windows&nbsp;NT's lazy-write technique says that the data are written, when, in fact, they are still in RAM. </P>
<P CLASS="t">There can also be cache memory on the disk controller or on the disk itself. If you are running MS-DOS or Windows 3.1x, using the disk or controller cache can really help performance. Windows&nbsp;NT's use of the lazy-write technique improves performance to the point where you might not see much more improvement by using the cache on the disk or the controller.</P>
<P CLASS="t">This information should help you decide whether you want to enable the disk or controller cache: </P>
<UL><LI>If disk performance is an issue, and specifically if the disk is being heavily written, turning on write caching is an option for improving performance, especially if it can be measured to improve the performance of the system.</LI><LI>Controlling the write-back cache is a firmware function provided by the disk manufacturer. See the documentation supplied with the disk. You cannot configure the write cache from Windows&nbsp;NT.</LI><LI>Write caching does not impact the reliability of the file system's own structures (metadata). NTFS instructs the disk device driver to insure that metadata writes get written through regardless of whether write caching is enabled or not. Non-metadata is written to the disk normally, so caching can occur for such data.</LI><LI>Read caching in the disk has no impact on file system reliability. </LI></UL></BODY></HTML>
