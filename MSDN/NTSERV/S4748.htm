<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating Entries in the LMHOSTS File</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Creating Entries in the LMHOSTS File</H3><P CLASS="t">Use the following rules to create and to edit entries in the LMHOSTS file:</P>
<UL><LI>Each entry must be on a separate line. The final entry in the file must be terminated by a carriage return.</LI><LI>Enter the IP address in the first column, followed by the corresponding computer (NetBIOS) name. </LI></UL><P><B>Caution  </B>You cannot add an LMHOSTS entry for a computer that is a DHCP client, because the IP addresses of DHCP clients change dynamically. To avoid problems, make sure that the computers whose names are entered in the LMHOSTS files are configured with static IP addresses. </P>
<UL><LI>The address and the computer name must be separated by at least one space or tab. </LI><LI>NetBIOS names can contain uppercase and lowercase characters and special characters. If a name is placed between double quotation marks, it is used exactly as entered. For example, "AccountingPDC" is a mixed-case name, and "HumanRscSr\0x03" generates a name with a special character.</LI><LI>Every NetBIOS name is 16 characters long. The user-definable portion of the NetBIOS name is the first 15 characters. The16<SUP>th</SUP> character is reserved to identify the network client service that registered the name. The most familiar example of a NetBIOS name is the computer name on any Windows-based computer. When the computer is started, the Microsoft Network Client services are started and register their names, which consist of the computer name plus a unique 16<SUP>th</SUP> character. For example, the name &lt;computer_name[0x00]&gt; is the Microsoft Workstation service; the name &lt;computer_name[0x20]&gt; is the Microsoft Server service. As you can see, the only difference between these two names is the 16<SUP>th</SUP> character. The 16<SUP>th</SUP> character makes it possible to uniquely identify each of the Network Client services running on the computer. For more information, see Appendix G, "NetBIOS Names." </LI><LI>Entries in the LMHOSTS file can represent Windows&nbsp;NT Server computers, Windows&nbsp;NT Workstation computers, Windows 95 computers, LAN Manager servers, or Windows for Workgroups 3.11 computers running Microsoft TCP/IP. There is no need to distinguish between different platforms in LMHOSTS.</LI><LI>The number sign (#) character is usually used to mark the start of a comment. However, it can also designate special keywords, as described in Table 10.1.</LI></UL><P CLASS="t">The keywords listed in the following table can be used in the LMHOSTS file for Windows&nbsp;NT-based computers. (LAN Manager 2.<I>x</I>, which also uses LMHOSTS for NetBT name resolution, treats these keywords as comments.) </P>
<P CLASS="ttl"><B>Table 10.1   LMHOSTS Keywords</B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="109pt" VALIGN="TOP"><COL WIDTH="238pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>Keyword</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>\0x<I>nn</I></P></TD><TD VALIGN="TOP"><P>Support for nonprinting characters in NetBIOS names. Enclose the NetBIOS name in double quotation marks and use \0x<I>nn</I> notation to specify a hexadecimal value for the character. This enables custom applications that use special names to function properly in routed topologies. However, LAN Manager TCP/IP does not recognize the hexadecimal format, and so you surrender backward compatibility if you use this feature.</P>
<P>Note that the hexadecimal notation applies only to one character in the name. The name should be padded with blanks so that the special character is last in the string (character 16).</P></TD></TR><TR><TD VALIGN="TOP"><P>#BEGIN_ALTERNATE</P></TD><TD VALIGN="TOP"><P>Used to group multiple #INCLUDE statements. Any single successful #INCLUDE statement causes the group to succeed.</P></TD></TR><TR><TD VALIGN="TOP"><P>#END_ALTERNATE</P></TD><TD VALIGN="TOP"><P>Used to mark the end of an #INCLUDE statement grouping.</P></TD></TR><TR><TD VALIGN="TOP"><P>#DOM:&lt;<I>domain</I>&gt;</P></TD><TD VALIGN="TOP"><P>Part of the computer name-to-IP-address mapping entry that indicates that the IP address is a domain controller in the domain specified by &lt;<I>domain</I>&gt;. This keyword affects how the Browser and Logon services behave in routed TCP/IP environments. To preload a #DOM entry, you must <I>first</I> add the #PRE keyword to the line. #DOM groups are limited to 25 members.</P></TD></TR><TR><TD VALIGN="TOP"><P>#INCLUDE &lt;<I>filename</I>&gt;</P></TD><TD VALIGN="TOP"><P>Forces the system to seek the specified &lt;<I>filename</I>&gt; and parse it as if it were local. Specifying a Uniform Naming Convention (UNC) &lt;<I>filename</I>&gt; allows you to use a centralized LMHOSTS file on a server. If the server on which the specified &lt;<I>filename</I>&gt; exists is outside of the local broadcast subnet, you must add a preloaded entry for the server before adding the entry in the #INCLUDE section.</P></TD></TR><TR><TD VALIGN="TOP"><P>#MH</P></TD><TD VALIGN="TOP"><P>Part of the computer name-to-IP-address mapping entry that defines the entry as a unique name that can have more than one address. The maximum number of addresses that can be assigned to a unique name is 25. The number of entries is equal to the number of network cards in a multihomed computer. </P></TD></TR><TR><TD VALIGN="TOP"><P>#PRE</P></TD><TD VALIGN="TOP"><P>Part of the computer name-to-IP-address mapping entry that causes that entry to be preloaded into the name cache. (By default, entries are not preloaded into the name cache but are parsed only after WINS and name query broadcasts fail to resolve a name.) The #PRE keyword must be appended for entries that also appear in #INCLUDE statements; otherwise, the entry in the #INCLUDE statement is ignored.</P></TD></TR><TR><TD VALIGN="TOP"><P>#SG</P></TD><TD VALIGN="TOP"><P>Part of the computer name-to-IP-address mapping entry that associates that entry with a user-defined special (Internet) group specified by &lt;<I>name</I>&gt;. The #SG keyword defines Internet groups by using a NetBIOS name that has 0x20 in the 16<SUP>TH</SUP> byte. A special group is limited to 25 members.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The following example shows how all of these keywords are used:</P>
<P CLASS="spacing"><BR></P>
102.54.94.102    "appname        \0x14"                #special app server
102.54.94.123    printsrv            #PRE                 #source server
102.54.94.98        localsrv            #PRE
102.54.94.97        primary            #PRE #DOM:mydomain    #PDC for mydomain

#BEGIN_ALTERNATE
#INCLUDE \\localsrv\public\lmhosts        #adds LMHOSTS from this server
#INCLUDE \\primary\public\lmhosts        #adds LMHOSTS from this server
#END_ALTERNATE
<P CLASS="t">In the preceding example:</P>
<UL><LI>The servers named<B> </B>printsrv<B>, </B>localsrv<B>, </B>and primary are defined by using the #PRE keyword as entries to be preloaded into the NetBIOS cache at system startup.</LI><LI>The servers named localsrv and primary are defined as preloaded and also identified in the #INCLUDE statements as the location of the centrally maintained LMHOSTS file. </LI><LI>Note that the server named <B>"</B>appname        \0x14<B>" </B>contains a special character after the first 15 characters in its name (including the blanks), and so its name is enclosed in double quotation marks. </LI></UL><P CLASS="t">The following sections further explain the use of the keywords #PRE, #DOM, #INCLUDE, and #SG. </P></BODY></HTML>
