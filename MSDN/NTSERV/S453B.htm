<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FTP and Ports</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">FTP and Ports</H3><P CLASS="t">When FTP is running on a server, it constantly monitors port 21, the FTP control port, for a request for service from the FTP server. To connect to the FTP server, the FTP client computer sends a request to TCP port number 21 on the server computer.</P>
<P CLASS="t">For example, assume that computer A is the FTP client, computer B is the FTP server, and that they have the following IP addresses.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="167pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Computer A (FTP client)</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Computer B (FTP server)</B></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">IP address: 172.16.16.10</P></TD><TD VALIGN="TOP"><P CLASS="tt">IP address: 10.155.22.99</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The communication between the FTP client and FTP server follows this process.</P>
<OL><LI>At the command prompt on computer A, the user types the following information:</LI></OL><P><B>FTP 10.155.22.99</B></P>
<OL><LI>The operating system assigns a TCP port number greater than 1023 (for example, 1028) to the FTP client application.</LI><LI>TCP creates a packet that includes the following information:</LI></OL><P CLASS="ltbl"></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="154pt" VALIGN="TOP"><COL WIDTH="166pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="tt">Source IP Address</P></TD><TD VALIGN="TOP"><P CLASS="tt">172.16.16.10</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Source TCP Port Number</P></TD><TD VALIGN="TOP"><P CLASS="tt">1028</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Destination IP Address</P></TD><TD VALIGN="TOP"><P CLASS="tt">10.155.22.99</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Destination TCP Port Number</P></TD><TD VALIGN="TOP"><P CLASS="tt">21</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><OL><LI>The packet is sent across the network to IP address 10.155.22.99.</LI><LI>Computer B receives the packet and TCP forwards the packet to port 21 (FTP control).</LI><LI>The FTP service on computer B sends an acknowledgment (ACK) back to computer A by using both the IP address (172.16.16.10) and the port number (1028).</LI></OL><P CLASS="t">The packet cannot be accidentally delivered to a wrong port address on the server because the packet contains the correct port number before it leaves the client computer.</P></BODY></HTML>
