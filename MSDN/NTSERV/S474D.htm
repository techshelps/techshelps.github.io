<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Defining a Central LMHOST File by Using #Include</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Defining a Central LMHOST File by Using #Include</H3><P CLASS="t">For small-  to medium-sized networks with fewer than 20 domains, a single common LMHOSTS file usually satisfies all workstations and servers on the intranet. An administrator can: </P>
<UL><LI>Use the Windows&nbsp;NT Replicator service to maintain synchronized local copies of the global LMHOSTS file. </LI><LI>Use centralized LMHOSTS files, as described in this section.</LI></UL><P CLASS="t">Use the #BEGIN_ALTERNATE and #END_ALTERNATE keywords to provide a list of servers maintaining copies of the same LMHOSTS file. This is known as a <I>block inclusion</I>, which allows multiple servers to be searched for a valid copy of a specific file. The following example shows the use of the #INCLUDE and #_ALTERNATE keywords to include a local LMHOSTS file (in the C:\Private directory):</P>
<P CLASS="spacing"><BR></P>
102.54.94.97    primary            #PRE  #DOM:mydomain        #primary DC
102.54.94.99    backupdc            #PRE  #DOM:mydomain        #backup DC 
102.54.94.98    localsvr            #PRE  #DOM:mydomain

#INCLUDE     c:\private\lmhosts                #include a local lmhosts

#BEGIN_ALTERNATE
#INCLUDE        \\primary\public\lmhosts            #source for global file
#INCLUDE     \\backupdc\public\lmhosts        #backup source
#INCLUDE     \\localsvr\public\lmhosts        #backup source
#END_ALTERNATE
<P CLASS="t"><B>Important</B></P>
<P>This feature should never be used to include a remote file from a redirected drive because the LMHOSTS file is shared between local users who have different profiles and different logon scripts. Even on single-user systems, redirected drive mappings can change between logon sessions.</P>
<P CLASS="t">In the preceding example, the servers primary and backupdc are located on remote subnets from the computer that owns the file. The local user has decided to include a list of preferred servers in a local LMHOSTS file located in the C:\Private directory. During name resolution, the Windows&nbsp;NT computer first includes this private file, then gets the global LMHOSTS file from one of three locations: primary, backupdc, or localsvr. All names of servers in the #INCLUDE statements must have their addresses preloaded using the #PRE keyword; otherwise, the #INCLUDE statement is ignored.</P>
<P CLASS="t">The block inclusion is satisfied if one of the three sources for the global LMHOSTS file is available and none of the other servers is used. If no server is available, or for some reason the LMHOSTS file or path is incorrect, an event is added to the event log to indicate that the block inclusion failed.</P></BODY></HTML>
