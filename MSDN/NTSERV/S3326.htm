<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Managing the WINS Server Database</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Managing the WINS Server Database</H3><P CLASS="t">The WINS database under Windows NT Server 4.0 uses the performance-enhanced Exchange Server Storage engine version 4.0. </P>
<P CLASS="t">There is no built-in limit to the number of records that a WINS server can replicate or store. The size of the database is dependent upon the number of WINS clients on the network. The WINS database grows over time as a result of clients starting and stopping on the network. </P>
<P CLASS="t">The size of the WINS database is not directly proportional to the number of active client entries. Over time, as some WINS client entries become obsolete, and are deleted, there remains some unused space. </P>
<P CLASS="t">To recover the unused space, the WINS database is compacted. Under Windows&nbsp;NT Server 4.0, WINS server database compaction occurs as an automatic background process during idle time after a database update. </P>
<P CLASS="t">Because the WINS server database compaction occurs while the database is being used, you do not need to stop the WINS server to compact the database.</P>
<P CLASS="t"><B>Note</B></P>
<P>Under Windows NT Server 3.51 or earlier, you must manually compact the WINS server database. See the topic "Compacting the WINS Server Database" in the section "Troubleshooting the WINS Server Database" later in this chapter. In most cases there is no need to manually compact the WINS server database under Windows NT Server 4.0. However, if you decide to do so, use this same procedure.</P>
<P CLASS="t">The following database files are stored in the \%s<I>ystemroot%</I>\System32\Wins directory. </P>
<P CLASS="ttl"><B>Table 8.11    Microsoft WINS Server Database Files</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>File</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">J50.log and J50#####.log</P></TD><TD VALIGN="TOP"><P CLASS="tt">A log of all transactions done with the database. This file is used by WINS to recover data if necessary.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">J50.chk</P></TD><TD VALIGN="TOP"><P CLASS="tt">A checkpoint file.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Wins.mdb</P></TD><TD VALIGN="TOP"><P CLASS="tt">The WINS server database file which contains two tables:</P>
<P CLASS="tt">·   IP address-Owner ID mapping table</P>
<P CLASS="tt">·   Name-to-IP-address mapping table</P>
<P CLASS="tt"></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Winstmp.mdb</P></TD><TD VALIGN="TOP"><P CLASS="tt">A temporary file that is created by the WINS server service. This file is used by the database as a swap file during index maintenance operations and may remain in the %s<I>ystemroot%</I>\System32\Wins directory after a crash.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t"><B>Important</B></P>
<P>The J50.log, J50#####.log, Wins.mdb, and Winstmp.mdb files should not be removed or tampered with in any manner.</P>
<P CLASS="t">WINS Manager provides the tools you need to maintain, view, back up, and restore the WINS server database. For example, you use the WINS Manager to back up the WINS server database files, and this administrative task should be done when you back up other files on the WINS server.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Backing Up the Database</H4><P CLASS="t">WINS Manager provides backup tools so that you can back up the WINS database. After you specify a backup directory for the database, WINS performs complete database backups every three hours, by installation default.</P>
<P CLASS="t">For specific instructions on how to back up and restore the WINS database, see the Help topic "Backing Up and Restoring the Database" in WINS Manager Help.</P>
<P CLASS="t">You should also periodically back up the Registry entries for the WINS server. </P>
<H4 CLASS="h3"><A NAME="sec1"></A>Scavenging the Database</H4><P CLASS="t">Scavenging the WINS server database is an administrative task related to backing up the database. Like any database, the WINS server database of address mappings needs to be periodically cleaned and backed up. </P>
<P CLASS="t">The local WINS server database should periodically be cleared of released entries and old entries that were registered at another WINS server and replicated to the local WINS server, but for some reason did not get removed from the local WINS database when the entries were removed from the remote WINS server database.</P>
<P CLASS="t">This process, called <I>scavenging</I>, is done automatically over intervals defined by the relationship between the Renewal and Extinct intervals defined in the <B>Configuration</B> dialog box. You can also clean the database manually. </P>
<P CLASS="t">The following table describes the results of scavenging the WINS database. </P>
<P CLASS="ttl"><B>Table 8.12    Scavenging the WINS Database</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="175pt" VALIGN="TOP"><COL WIDTH="173pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P></P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>State before scavenging</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>State after scavenging</B></P></TD></TR><TR><TD VALIGN="TOP"><P></P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Owned active names for which the&nbsp;Renewal interval has expired</P></TD><TD VALIGN="TOP"><P CLASS="tt">Marked <I>released</I></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Owned released name for which the&nbsp;Extinct interval has expired</P></TD><TD VALIGN="TOP"><P CLASS="tt">Marked <I>extinct</I></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Owned extinct names for which the&nbsp;Extinct timeout has expired</P></TD><TD VALIGN="TOP"><P CLASS="tt">Deleted</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Replicas of extinct names for which the&nbsp;Extinct timeout has expired</P></TD><TD VALIGN="TOP"><P CLASS="tt">Deleted</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Replicas of active names for which the&nbsp;Verify interval has expired</P></TD><TD VALIGN="TOP"><P CLASS="tt">Revalidated</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Replicas of extinct or deleted names</P></TD><TD VALIGN="TOP"><P CLASS="tt">Deleted</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P></BODY></HTML>
