<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Configuring DHCP</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H3 CLASS="h2">Configuring DHCP</H3><H4 CLASS="h3"><A NAME="sec0"></A>Procedures Used to Set Up DHCP</H4><P CLASS="t">Computers running Windows&nbsp;NT Server are already placed throughout the Terra Flora network. On the Terra Flora network diagram, servers operating the DHCP service have been located in all three domains. In the California domain, CANTS40ENT03 is designated as a DHCP server. In the Northeast domain, NENTS40ENT01 plays that role, and in the Europe domain, it is EUNTS40ENT01. The DHCP service is part of the Windows&nbsp;NT Server product, and enabling the service is simple to do.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>Configuring Static Server Addresses</H4><P CLASS="t">A client computer obtains an address from a computer running the DHCP service when the client computer starts up. This depends on the client being able to locate the server responsible for leasing it an IP address. Because of this, the IP address of the server must not change; that is, the server running the DHCP service must have a static (unchanging) IP address.</P>
<P CLASS="t"><B>To configure a static server address</B></P>
<P>    1.    In the <B>Microsoft TCP/IP Properties</B> dialog box, click the <B>IP Address</B> tab.</P>
<P>    2.    In <B>Adapter</B>, select the network adapter for which you wish to specify an IP address<B> </B>(if necessary),<B> </B>and then click <B>OK</B>.</P>
<P>    3.    Click <B>Specify an IP address</B>.</P>
<P>The settings in your dialog box will be similar to the following:</P>
<P><img src="XNG_G04.gif"></P>
<P>You must restart the server for these settings to take effect. </P>
<P CLASS="t">The option selected in the diagram is <B>Specify an IP address</B>. The administrator assigns a static IP Address, Subnet Mask, and Default Gateway address for the DHCP server.</P>
<P CLASS="nt"><B>Note  </B>If the administrator specified an IP address and IP address information during the setup of Windows&nbsp;NT Server, the above step can be skipped.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>Installing the DHCP Service on the Windows&nbsp;NT Server</H4><P CLASS="t">DHCP can be installed as part of Setup. If DHCP is not installed as part of Setup, it must be configured on at least one network computer running Windows&nbsp;NT Server. </P>
<H5 CLASS="h4"><A NAME="sec3"></A>To install the DHCP server service on a computer running Windows&nbsp;NT Server</H5><P>    1.    Click <B>Start</B>, point to <B>Settings</B>,<B> </B>and click <B>Control Panel</B>.</P>
<P>    2.    Double-click <B>Network</B>.</P>
<P>    3.    Click the <B>Services</B> tab. </P>
<P>    4.    Click <B>Add</B>.</P>
<P>The <B>Select Network Services</B> dialog box appears.</P>
<P>    5.    In <B>Network Service</B>, click <B>Microsoft DHCP Server</B>.</P>
<P><img src="XNG_G05.gif"></P>
<P>    6.    Click <B>OK</B> if loading from the network. </P>
<P>Or, click <B>Have Disk</B> to load the software from disks or a CD-ROM.</P>
<P>    7.    Type the full path to the Windows&nbsp;NT Server DHCP files, and then click <B>OK</B>.</P>
<P>You must restart the server for the changes to take effect.</P>
<P CLASS="t"><B>Note</B></P>
<P>You must be logged on as a member of the Administrators group to install the DHCP service.</P>
<H4 CLASS="h3"><A NAME="sec4"></A>Accessing the DHCP Manager</H4><P CLASS="t">The addition of the DHCP service places DHCP Manager on the <B>Administrative Tools</B> menu. Once the installation is complete on the computer running Windows&nbsp;NT Server, use DHCP Manager to complete the configuration of the DHCP server.</P>
<P CLASS="t"><B>To access DHCP Manager</B></P>
<P CLASS="t">Click <B>Start</B>, point to <B>Programs</B>, point to <B>Administrative Tools</B>, and click <B>DHCP Manager</B>.</P>
<H4 CLASS="h3"><A NAME="sec5"></A>Adding Servers to the Server List</H4><P CLASS="t">Using the DHCP Manager, the administrators at Terra Flora can configure, set up and maintain all the computers running Windows&nbsp;NT Server with the DHCP Server service enabled from a single computer or from any computer.</P>
<P CLASS="t">The DHCP Manager contains a list of the servers that it can administer. Initially, this list is empty. Until servers are added to the server list, the options provided with DHCP are not available. Even the first computer running Windows&nbsp;NT Server on which you install DHCP must be added to the server list before it can be administered. DHCP Manager. </P>
<P CLASS="t"><B>To add a DHCP server to the Server List</B></P>
<P>    1.    On the <B>Server</B> menu of DHCP Manager, click <B>Add</B>. </P>
<P>The <B>Add DHCP Server to Server List</B> dialog box appears.</P>
<P><img src="XNG_G08.gif"></P>
<P>    2.    In <B>DHCP Server</B>, type the IP address of the DHCP server to be added to the list, and then click <B>OK</B>.</P>
<P>    3.    Repeat steps 1 and 2, if necessary, to add all the network computers running Windows&nbsp;NT Server with DHCP service enabled.</P>
<P CLASS="t"><B>Note</B></P>
<P>You cannot administer network servers running other dynamic addressing programs from a computer running Windows&nbsp;NT Server with DHCP service enabled. </P>
<H4 CLASS="h3"><A NAME="sec6"></A>Managing DHCP Scopes</H4><P CLASS="t">On any given network, for clients to obtain dynamic IP addresses, there must be at least one computer running Windows&nbsp;NT Server DHCP service. Once the DHCP Server service is installed on a computer running Windows&nbsp;NT Server, and the Windows&nbsp;NT server is added to the server list, a DHCP scope must be created. </P>
<P CLASS="t">A <I>DHCP scope</I> consists of a pool of IP addresses on a given subnet, such as 223.223.223.1 to 223.223.223.200, that the DHCP Server can lease to DHCP Clients. </P>
<P CLASS="t">At Terra Flora, each computer running Windows&nbsp;NT Server DHCP service will store at least one scope containing the     ranges of IP addresses that the Windows&nbsp;NT Server DHCP service can lease to requesting clients. Each scope will contain a unique pool of addresses from which to assign IP addresses. </P>
<P CLASS="t">Refer to the Terra Flora diagram. On the California domain PDC, a scope will be named CAPDCDHCP and will contain its own unique pool of IP addresses that will be assigned as clients start up. The scope on the BDC will be named CABDCDHCP and will also have a unique pool of addresses. </P>
<P CLASS="t">When the computer running Windows&nbsp;NT Server DHCP Service receives a request from a DHCP enabled client for an IP address, the DHCP server will select an available IP address from its pool of IP addresses and offer it to the DHCP client, along with other configuration information that can be displayed using various DOS commands. </P>
<P CLASS="t">The computers running Windows&nbsp;NT Server DHCP service will not only provide Terra Flora with the ability to dynamically configure clients IP addresses, but DHCP will, as part of the service it provides, record that address as leased to the client, eliminating the need for manual tracking of IP addresses. The DHCP leasing policy can be fully configured by administrators, eliminating any need for manual intervention.</P>
<P CLASS="t">The Windows&nbsp;NT Server DHCP service lease mechanism provides the following benefits:</P>
<UL><LI>No need for user configuration.</LI></UL><P>Users no longer need to acquire an IP address from an administrator to properly install and configure TCP/IP. When a client is configured to use automatic DHCP, it will automatically lease an IP address from a DHCP Server at start up.</P>
<UL><LI>No more configuration errors.</LI></UL><P>The Windows&nbsp;NT Server DHCP Service supplies all of the necessary configuration information to all of the DHCP-enabled clients and servers. As long as the DHCP Server maintains the correct configuration information, none of the clients or servers will ever be incorrectly configured. At Terra Flora, the difficulty of tracing network problems that resulted from incorrectly configured workstations and servers will be a thing of the past.</P>
<UL><LI>Very little administrative overhead.</LI></UL><P>Administrators define a pool of IP addresses that the Windows&nbsp;NT DHCP Service will lease to the DHCP clients. Administrators no longer need to keep track of which IP address are in use and which IP addresses are available.</P>
<UL><LI>No need to reconfigure clients or servers that change subnets.</LI></UL><P>When the client computer changes subnets and starts up on its new subnet, it will lease an IP address from a Windows&nbsp;NT Server running the DHCP Service that is appropriate for the subnet on which it is now located.</P>
<UL><LI>DHCP client configurations automatically updated during the renewal process. </LI></UL><P>For example, if you change a DNS server address, it gets distributed to the network client dynamically.</P>
<P CLASS="t"><B>Note</B></P>
<P>DHCP clients will cache their old IP addresses and will request the old IP addresses from the DHCP server if it is available. In most cases, the DHCP server will have the address available, as it assigns new addresses before scavenging old addresses.</P>
<P CLASS="t">A scope includes the following: </P>
<UL><LI>A range of IP addresses that can be leased by DHCP clients, referred to as a <I>pool of IP addresses</I> or an <I>IP address pool</I>. Each DHCP scope will have a unique pool of IP addresses, which it can lease to DHCP clients. The IP addresses in the pool will not exist in a scope stored on any other network computer running Windows&nbsp;NT Server DHCP service.</LI><LI>A valid Subnet Mask for the pool of IP addresses.</LI><LI>Any IP addresses in the IP address pool range that need to be excluded so that they will not be leased to DHCP clients, such as the IP addresses of the other DHCP servers on the network, WINS and DNS servers, subnet addresses, router IP addresses, or any range that will be used on the network by devices requiring static IP addresses. </LI><LI>The duration of the IP address lease, which defaults to three days. </LI></UL><P>The maximum lease duration can be set to either 'Unlimited' or up to 999 days, 23 hours, and 59 minutes. For details on what happens when a lease expires, see Chapter 7, "Managing Microsoft DHCP Servers."</P>
<P>The default length of an IP address lease can be configured to a longer or shorter amount of time by an administrator. </P>
<P>Based on the number of available IP addresses in the DHCP scopes, how many of the scope's IP addresses will typically be in use by DHCP clients, and the frequency with which the DHCP clients will be rebooting or changing subnets, the lease duration for a DHCP Lease duration at Terra Flora will be configured at 7 days. This will provide a good balance between having too many addresses leased out to computers that are no longer on the network, and the renewal network traffic. </P>
<P CLASS="t">At Terra Flora, the guidelines for determining the appropriate lease duration were:</P>
<UL><LI>Increasing the Lease Duration</LI></UL><P>Terra Flora had to consider the number of IP addresses available in each DHCP scope. If there would be a large number of IP addresses available in the DHCP scope and relatively few DHCP clients, the lease duration should likely be increased in length. Increasing the lease duration would reduce the frequency that the DHCP clients will query the DHCP Server to renew their leases and therefore somewhat reduce network traffic.</P>
<UL><LI>Reducing the Lease Duration</LI></UL><P>If there was to be a limited number of IP addresses available in the DHCP scope, most of which will be in use at any given time, it would be desirable to reduce the lease duration. In addition, if DHCP clients on a given network would frequently be changing subnets and therefore requiring a different IP address, it would be beneficial to reduce the lease duration, especially if there are a limited number of IP addresses available. Reducing the lease duration would require DHCP clients to renew their leases more frequently, but would also ensure that any unused IP addresses in the pool are seen as available to lease by the DHCP server as soon as possible. </P>
<UL><LI>The name of the scope, which is a maximum of 128 characters, and a descriptive comment about the DHCP Scope. </LI></UL><P>At Terra Flora, the descriptive comment will be the name of the Domain on which the DHCP server resides.</P>
<P CLASS="t">The creation of DHCP servers scopes is performed from the DHCP Manager </P>
<P CLASS="t"><B>To create a scope</B></P>
<P>    1.    Open DHCP Manager and double-click the DHCP server you want to manage. </P>
<P>    2.    On the <B>Scope</B> menu, click <B>Create</B>.</P>
<P><img src="XNG_G09.gif"></P>
<P>    3.    Under <B>IP Address Pool</B>, enter the server's beginning IP address in <B>Start Address</B>.</P>
<P>    4.    In <B>End Address</B>, enter the last IP address.</P>
<P>    5.    To add exclusion ranges, type a range in <B>Exclusion Range</B>, and click <B>Add</B>; then repeat for as many ranges as you want to set.</P>
<P>    6.    To remove exclusion ranges, click the range in <B>Excluded Address</B>, and then click <B>Remove</B>. </P>
<P>    7.    Under <B>Lease Duration</B>, click <B>Limited To</B> and enter the amount of time that the lease will last.</P>
<P>    8.    In <B>Name</B>, type the name of the scope.</P>
<P>    9.    If appropriate, type remarks in <B>Comment</B>, and then click <B>OK</B>.</P>
<P><img src="XNG_G10.gif"></P>
<P>Terra Flora will configure a scope named "California" for the California Domain on the PDC. The Lease Duration at Terra Flora will be defined at seven days. </P>
<P><B>Note</B>  Once the administrative scope has been created, it must be activated before the DHCP Server will lease any IP addresses from the DHCP scope's IP address pool. </P>
<P CLASS="t">A DHCP scope is activated and deactivated from the DHCP Manager <B>Scope</B> menu. In DHCP Manager, active scopes will be preceded by a light bulb icon that looks as it is turned on and deactivated scopes will be preceded by a gray light bulb that looks as if it is turned off. </P>
<P CLASS="t">Once a DHCP scope has been created any of the scope's settings, such as the range of the IP address pool, it can be modified from the <B>Scope Properties</B> menu.</P>
<H5 CLASS="h4"><A NAME="sec7"></A>Reserving IP addresses</H5><P CLASS="t">The DHCP Manager allows the reservation of a specific IP address for a computer. At Terra Flora, the plan is to reserve DHCP IP addresses on the network in the scope for the following devices and computers:</P>
<UL><LI>Domain controllers (since the network also uses LMHOSTS files that define IP addresses for domain controllers).</LI><LI>Clients that use IP addresses assigned by another TCP/IP configuration method, such as UNIX DNS and netware clients.</LI><LI>Any DNS Servers on the network, whether running Windows&nbsp;NT Server 4.0 DNS service or not.</LI><LI>Any Windows&nbsp;NT Server with WINS enabled.</LI><LI>Any Routers used to direct network traffic between subnets.</LI><LI>Any DHCP servers. </LI></UL><P>The IP address for the DHCP servers were assigned during the Windows&nbsp;NT Server Setup. The addresses assigned to the DHCP servers will now be reserved for those servers. </P>
<P CLASS="t">The administrator will reserve IP addresses using <B>Add Reservations</B> on the DHCP Manager<B> Scope</B> menu. When the computer client requests an IP address from the DHCP Server, the DHCP Server will always return the reserved IP address. </P>
<P CLASS="t"><B>Note</B></P>
<P>The static addresses placed in Add Reservations will always override any configuration options specified using DHCP Manager.</P>
<P CLASS="t"><B>To reserve a client address in DHCP:</B></P>
<P>    1.    In DHCP Manager, double-click the DHCP server you want to manage. </P>
<P>    2.    Click the scope in which you want to add reservations.</P>
<P>    3.    On the <B>Scope</B> menu, click <B>Add Reservations</B>.</P>
<P><img src="XNG_G12.gif"></P>
<P CLASS="t">Two important entries in the dialog box are:</P>
<UL><LI><B>Unique Identifier</B></LI></UL><P>The <I>unique identifier</I> is the media access control (MAC) address for the DHCP client and can be obtained by typing the following command at the command prompt on the client computer for which the address will be reserved: </P>
<UL><LI>IPCONFIG -ALL. </LI><LI>Press enter.</LI><LI>The MAC address is the address labeled as the Physical Address.</LI><LI><B>Client Name</B></LI></UL><P>This entry should be the computer name of the DHCP client. The name is used only for identification purposes. This entry is not available when adding reservations for MS-DOS–based DHCP clients.</P>
<P><B>Notes</B>  It is critical that <B>Unique Identifier</B> entry be correct because the MAC address is sent as part of the DHCP client's request for an IP address to the DHCP Server. If this value is not correct, no match is found on the DHCP server, which means the DHCP Server will assign the client any available IP address instead of the reserved IP address.</P>
<P>On Windows&nbsp;95 clients, you must run the program Winipcfg.exe to view the MAC or physical address.</P>
<H4 CLASS="h3"><A NAME="sec8"></A>Configuring DHCP Options</H4><P CLASS="t">At a minimum, a DHCP server must provide the DHCP client with the following information:</P>
<UL><LI>A valid IP address to lease (configured when the DHCP Scope is created).</LI><LI>A Subnet Mask (configured when the DHCP Scope is created).</LI><LI>A Default Gateway, which defaults to an IP address of 0.0.0.0 if not configured.</LI></UL><P CLASS="t">These items are referred to as <I>configuration parameters</I>. There are about 60 other predefined DHCP configuration parameters, called <I>options</I>, that an administrator can configure through the DHCP Manager for one or all scopes on a DHCP server. For a complete listing of the options and their meanings, see Chapter 7, "Managing Microsoft DHCP Servers"</P>
<P CLASS="t">There are four methods that can be used to set the DHCP Options:</P>
<UL><LI>Global</LI></UL><P>When you set a global DHCP option, the option takes affect for all DHCP scopes defined on the selected DHCP server. Global DHCP options appear in the DHCP Manager with a globe icon proceeding them.</P>
<UL><LI>Scope</LI></UL><P>Setting a scope DHCP option will set the option only for the selected scope on the <B>Options Scope</B> menu. DHCP options configured for a scope are displayed with a series of computer icons proceeding them in DHCP Manager.</P>
<UL><LI>Default</LI></UL><P>Setting a default DHCP option modifies the default value for one of the DHCP Options. When a default value is set, the default value becomes the default that was set during administration rather than the DHCP default that was set during installation of DHCP.</P>
<UL><LI>Client</LI></UL><P>This method can be used to configure one or more of the DHCP options for a specific DHCP client. DHCP options can be set for a client only if the DHCP client has a reserved IP address. The only way to see if a DHCP option is set for a DHCP client is to view the properties of an active client lease on the <B>Scope Active Leases</B> menu and then clicking <B>Options</B>.</P>
<H5 CLASS="h4"><A NAME="sec9"></A>Configuring a Global, Scope, or Default DHCP Option</H5><P CLASS="t">Configure a Global, Scope, or Default DHCP Option on the <B>DHCP Options</B> menu by clicking <B>Global</B>, <B>Scope</B>, or <B>Default</B>.</P>
<P CLASS="t">If <B>Scope</B> or <B>Global</B> is selected, the following dialog box appears, indicating which menu option was selected by printing the title of the menu option in the title bar. </P>
<P><img src="XNG_G14.gif"></P>
<P CLASS="t"><B>To configure DHCP options globally or by scope</B></P>
<P>    1.    In DHCP Manager,<B> </B>double-click the DHCP server you want to manage. </P>
<P>    2.    Click the scope for which you want to configure DHCP Options.</P>
<P>    3.    On the <B>DHCP Options</B> menu, click <B>Global</B> to change options globally.</P>
<P>Or, click <B>Scope</B>, to change options by scopes.</P>
<P><img src="XNG_G13.gif"></P>
<P>    4.    Click <B>Edit Array</B>.</P>
<P>Enter the changes that you want for DHCP options.</P>
<P><img src="XNG_G15.gif"></P>
<P>Using the dialog box, the administrator can change or add a new DHCP option to the list and configure it with the proper settings.</P>
<P><img src="XNG_G16.gif"></P>
<P CLASS="t"><B>To configure Default DHCP Options</B></P>
<P>    1.    If necessary, click the <B>DHCP Standard Options</B> default as the value in <B>Option Class</B>. </P>
<P>    2.    In <B>Option Name</B>, click <B>Change </B>to change the default.</P>
<P>Or, click <B>New</B> to create a new default.</P>
<P>    3.    When the fields that need to be changed appear, enter the appropriate settings, and then click <B>OK</B>.</P>
<H5 CLASS="h4"><A NAME="sec10"></A>Configuring DHCP Options for a Particular Client</H5><P CLASS="t">Configuring client options can be performed only if the IP address for the client has been reserved. Configuring client options is performed using a different graphical interface than was used to configure the Global, Scope or Default options. </P>
<P CLASS="t">For details about reserving addresses, see "Reserving IP addresses," earlier in this chapter.</P>
<P CLASS="t"><B>To configure DHCP options for a particular client</B></P>
<P>    1.    Click the server where the reserved client's IP address resides for which you want to enable options. </P>
<P>    2.    Click the scope that contains the client reservation.</P>
<P>    3.    On the <B>Scope </B>menu, click <B>Active Leases</B>.</P>
<P>    4.    Click the client that you want to configure.</P>
<P>    5.    Click <B>Properties.</B></P>
<P>    6.    Click <B>Options</B>. </P>
<P>The <B>DHCP Options: Reservations</B> dialog box appears.</P>
<P><img src="XNG_G17.gif"></P>
<P>    7.    In <B>Unused Options</B>, click the option you want to add for the client, and then click <B>Add</B>.</P>
<P>    8.    To change or enter a value for the option, click it in <B>Active Options</B>, and then click <B>Value</B>. </P>
<P>    9.    Enter the appropriate value, and click <B>OK</B>. </P>
<P CLASS="t">For a complete description of the options available, see Chapter 7, "Managing Microsoft DHCP Servers." </P>
<H5 CLASS="h4"><A NAME="sec11"></A>Precedence of DHCP Options</H5><P CLASS="t">If a DHCP option is set for more than one level, such as for both global and scope, precedence is in the following order: </P>
<UL><LI>Client overrides both scope and global.</LI><LI>Scope overrides global.</LI><LI>If there is no client or scope setting for a DHCP option, then the global setting has precedence.</LI></UL><H5 CLASS="h4"><A NAME="sec12"></A>Benefits of DHCP Options</H5><P CLASS="t">These include:</P>
<UL><LI>Centrally administered network settings</LI><LI>Dynamic updates</LI><LI>No need for manual entry on every client</LI></UL><H5 CLASS="h4"><A NAME="sec13"></A>Commonly Configured DHCP Options</H5><P CLASS="t">Some of the DHCP options administrators typically configure are:</P>
<UL><LI>003 Router</LI></UL><P>The Router parameter requires the IP addresses for one or more routers and is the equivalent of the Default Gateway entry in the TCP/IP configuration dialog box.</P>
<UL><LI>006 DNS Servers</LI></UL><P>The Domain Name Server parameter requires the IP addresses for one or more DNS servers.</P>
<UL><LI>015 Domain Name</LI></UL><P>This option is used to specify DNS domain names to be used for host name resolution. </P>
<UL><LI>044 WINS/NBNS Servers</LI></UL><P>The WINS/NBNS (NetBIOS Name Servers) Servers parameters requires IP addresses for one or more WINS/NBNS servers.</P>
<UL><LI>046 WINS/NBT node type</LI></UL><P>This DHCP option can be used to configure the method that the DHCP client will use to resolve computer (NetBIOS) names: 0x1 (b-node), 0x2 (p-node), 0x4 (m-node), or 0x8 (h-node). </P>
<P CLASS="t"><B>Note</B></P>
<P>A computer running Windows&nbsp;NT Server DHCP service can be configured to automatically provide IP addresses of the WINS and DNS servers used in the name resolution process. This removes the requirement of individually configuring each client with the WINS and DNS server IP addresses. The only requirement for the client is to click Obtain an IP address from a DHCP server on the Microsoft TCP/IP Properties dialog box.</P>
<H4 CLASS="h3"><A NAME="sec14"></A>Configuring a DHCP Relay Agent</H4><P CLASS="t">Computers running Windows&nbsp;NT Server DHCP service have the ability to use the bootP relay service which enables clients on one subnet to access a DHCP server on another subnet. Refer to the Terra Flora network diagram. In the Terra Flora California domain, all the servers running Windows&nbsp;NT Server DHCP service are located on the Enterprise level. </P>
<P CLASS="t">There are three subnets in the California domain, and only one subnet contains the servers running Windows&nbsp;NT Server DHCP service. The two subnets that do not contain computers running Windows&nbsp;NT Server DHCP service have a computer running Windows&nbsp;NT Workstation or Windows&nbsp;NT Server that acts as DHCP relay or bootP relay agent. The DHCP bootP relay agents are named CANTS40DIV03 and CANTS40DPT02. </P>
<P CLASS="t">When a dynamic client computer on the subnet where the bootP relay agent resides requests an IP address, the request is forwarded to the subnet's bootP relay agent. The bootP relay agent, in turn, is configured to forward the request directly to the correct computer running Windows&nbsp;NT Server DHCP service. The computer running Windows&nbsp;NT Server DHCP service returns an IP address directly to the requesting client.  </P>
<P CLASS="t">For a detailed discussion on the bootP relay agents, see Chapter 7, "Managing Microsoft DHCP Servers."</P>
<P CLASS="t">Configuration of the DHCP bootP relay agent is a two-step process. The first step is to install the DHCP Relay Agent Service on the computer that will act as a bootP relay agent. The DHCP Relay Agent Service is a Windows&nbsp;NT Server service. The bootP agents can then be configured, using the <B>Microsoft TCP/IP Protocol Properties</B> dialog box, with the IP address of the computer running Windows&nbsp;NT Server DHCP, so the agent will know where to forward requests from clients for available IP addresses. Installing the service and configuring the agents are both performed using Network in Control Panel. </P>
<P CLASS="t"><B>To install the DHCP Relay Agent Service</B></P>
<P>    1.    In the <B>Network</B> dialog box, click the <B>Services </B>tab. </P>
<P>    2.    Click <B>Add</B>. </P>
<P><img src="XNG_G06.gif"></P>
<P>    3.    Under <B>Network Service</B>, click <B>DHCP Relay Agent</B>, and then click <B>Have Disk</B> if loading the software from disks or a CD-ROM. </P>
<P>Or, click <B>OK</B> if loading from the network. </P>
<P>    4.    In the message that appears, type the full path to the Windows&nbsp;NT Server DHCP files, and click <B>OK</B>. </P>
<P>The DHCP service is installed.</P>
<P>    5.    Click <B>Close</B>.</P>
<P>Configuration and binding information is checked.</P>
<P CLASS="t">You must shut down and restart the computer before the new settings will take effect </P>
<P CLASS="t">Addition of the TCP/IP address of the computers running Windows&nbsp;NT Server DHCP service to the bootP relay agents is performed in the <B>TCP/IP Properties</B> dialog box.</P>
<P CLASS="t"><B>To add</B><B> an IP address to the bootP relay agent: </B></P>
<P>    1.    In the <B>Network </B>dialog box<B>, </B>click the <B>Protocols</B> tab. </P>
<P>    2.    Click <B>TCP/IP Protocol,</B> and then click <B>Properties</B>. </P>
<P>    3.    Click the <B>DHCP Relay</B> tab. </P>
<P><img src="XNG_G07.gif"></P>
<P>    4.    Check that the <B>Seconds threshold</B> and <B>Maximum hops</B> settings are set at 4<I>.</I> </P>
<P>    5.    Under <B>DHCP Servers</B>, type the IP address of the server that will provide the IP addresses to the subnet's requesting clients.</P>
<P>    6.    Click <B>Add</B>, and then click <B>OK</B>. </P></BODY></HTML>
