<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>PPTP Control Connection</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css">
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<h3>PPTP Control Connection</h3>
<p>
The PPTP protocol specifies a series of control messages sent between the PPTP-enabled client and the PPTP server. The control messages establish, maintain and end the PPTP tunnel. The following list presents the primary control messages used to establish and maintain the PPTP tunnel.</p>
<table cols=2>
<tr valign=top>
<td width=238><h4>Message Type</h4>
</td>
<td width=227><h4>Purpose</h4>
</td>
</tr>
<tr valign=top>
<td width=238>PPTP_START_SESSION_REQUEST</td>
<td width=227>Starts session</td>
</tr>
<tr valign=top>
<td width=238>PPTP_START_SESSION_REPLY</td>
<td width=227>Replies to start session request</td>
</tr>
<tr valign=top>
<td width=238>PPTP_ECHO_REQUEST</td>
<td width=227>Maintains session</td>
</tr>
<tr valign=top>
<td width=238>PPTP_ECHO_REPLY</td>
<td width=227>Replies to maintain session request</td>
</tr>
<tr valign=top>
<td width=238>PPTP_WAN_ERROR_NOTIFY</td>
<td width=227>Reports an error on the PPP connection</td>
</tr>
<tr valign=top>
<td width=238>PPTP_SET_LINK_INFO</td>
<td width=227>Configures the connection between client and PPTP server</td>
</tr>
<tr valign=top>
<td width=238>PPTP_STOP_SESSION_REQUEST</td>
<td width=227>Ends session</td>
</tr>
<tr valign=top>
<td width=238>PPTP_STOP_SESSION_REPLY</td>
<td width=227>Replies to end session request</td>
</tr>
</table><br>
<h4>Table 1 - PPTP Control Message Types</h4>
<p>
Control messages are transmitted in control packets in a TCP datagram. One TCP connection is created between the PPTP client and the PPTP server. This connection is used to exchange control messages. A datagram contains an IP header, a TCP header, a PPTP control message, and appropriate trailers, similar to the following:</p>
<p>
<img src="xs2_a19.gif" border=0></p>
<h4>Figure 4 - PPTP TCP Datagram with Control Messages</h4>
<p>
The exchange of messages between the PPTP client and the PPTP server over the TCP connection are used to create and maintain a PPTP tunnel. This entire process is illustrated below:</p>
<p>
<img src="xs2_a17.gif" border=0></p>
<h4>Figure 5 - PPTP Control Connection to PPTP Server Over PPP Connection to ISP</h4>
<p>
Note that in this illustration, the control connection is for the scenario in which the remote access client is the PPTP client. In the scenario in which the remote access client is not PPTP-enabled and uses a PPTP-enabled ISP network access server, the PPTP control connection begins at the ISP server. </p>
<h3></h3>

</FONT>
</BODY>
</HTML>
