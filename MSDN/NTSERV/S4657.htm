<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Browser Elections</title>
<style>@import url(msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="msdn_ie3.css"><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"></HEAD><BODY BGCOLOR="#FFFFFF">
<H2 CLASS="h1">Browser Elections</H2><P CLASS="t">Browser elections occur to select a new master browser under the following circumstances.</P>
<UL><LI>When a computer cannot locate a master browser</LI><LI>When a preferred master browser comes online</LI><LI>When a Windows&nbsp;NT domain-controller system starts</LI></UL><P CLASS="t">A computer initiates an election by sending a special datagram called an <I>election datagram</I>. All browsers can receive election datagrams. When a browser receives an election datagram, it examines that datagram's election criteria. If the browser has better election criteria than the sender of the election datagram, the browser will issue its own election datagram and enter what is called an <I>election in progress</I> state. If the browser does not have better election criteria than the sender of the election datagram, the browser attempts to determine which system is the new master browser.</P>
<P><img src="XNG_C03a.gif"></P>
<P CLASS="cap"><B>Figure 3.2    Browser election</B></P>
<P CLASS="t">The election criteria for a browser is based on the browser's current role in the domain and its current state, using the hierarchy in Table 3.2.</P>
<P CLASS="ttl"><B>Table 3.2    The hierarchy of criteria for a browser election </B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Operating System Type</P></TD><TD VALIGN="TOP"><P CLASS="tt">0xFF000000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Windows for Workgroups or Windows&nbsp;95</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x01000000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Windows&nbsp;NT Workstation</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x10000000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Windows&nbsp;NT Server</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x20000000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Election Version</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00FFFF00</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Per Version Criteria</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x000000FF</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">PDC</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000080</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">WINS System</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000020L</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Preferred Master</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000008</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Running Master    </P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000004</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">MaintainServerList = Yes</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000002</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt"> Running backup browser</P></TD><TD VALIGN="TOP"><P CLASS="tt">0x00000001</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The browser will use all of the appropriate election criteria to determine the sending computer's election criteria.</P>
<P CLASS="t">The following criteria determine whether or not a browser has won an election.</P>
<UL><LI>If the browser's election version is greater than the sender's election version, the browser wins. If not, the browser uses the next election criteria. The <I>election version</I> is a constant value that identifies the version of the browser-election protocol. The election version is the revision of the browser protocol and is not related to the operating-system version. </LI><LI>If the browser's election criteria is greater than the sender's election criteria, the browser wins. If not, the browser uses the next election criteria.</LI><LI>If the browser has been running longer than the sender, the browser wins. If not, the browser uses the next election criteria.</LI><LI>If none of the criteria above have determined the election, then the server with the lexically (alphabetically, including numbers and symbols) lowest name wins. For example,  a server named "A" will become master browser over a server named "X."</LI></UL><P CLASS="t">When a browser receives an election datagram indicating that it wins the election, the browser enters the <I>running election state</I>. While in this state, the browser sends out an election request after a delay, based on the browser's current role in the domain.</P>
<UL><LI>Master browsers and the primary domain controllers delay for 100 microseconds (ms).</LI><LI>Backup browsers and backup domain controllers randomly delay for 200 ms and 600 ms.</LI><LI>All other browsers randomly delay between 800 ms and 3000 ms.</LI></UL><P CLASS="t">This delay occurs because Windows for Workgroups browsers go "deaf" for several hundred microseconds after sending an election datagram. This delay reduces the number of election datagrams sent. A browser winning an election may receive a different election datagram, causing it to lose an election later. By having less-likely winners delay longer, the less-likely winners typically don't send election datagrams. </P>
<P CLASS="t">The browser sends up to four election datagrams. If no other browser responds with an election criteria datagram that would win the election, the computer is promoted to master browser. If the browser receives an election datagram indicating that another computer will win the election, and the computer is currently the master browser, the computer will demote itself from master browser and become a backup browser.</P>
<P CLASS="t">To force an election, the client computer will broadcast an election datagram to the domain, indicating that an election should occur. This datagram is created to prevent the client that sends the datagram from winning the election.</P>
<P CLASS="t">When an election occurs, the Browser service on the computer that forced the election will log an event in the Event Viewer System log, indicating that it forced the election. An event is logged for each protocol on which the Browser service forces an election.</P></BODY></HTML>
