<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Plug and Play Design for CardBus</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF"><font face="verdana,arial,helvetica" size="2">

<H2 CLASS="h1">Plug and Play Design for CardBus </H2><P CLASS="t">This section summarizes the Plug and Play requirements for CardBus cards. CardBus was designed as a combination of PC&nbsp;Card 16 and PCI. The goal is to gain the benefits of PCI in the PC&nbsp;Card format. Consistent with this goal, Windows support for CardBus places specific requirements on CardBus cards. </P>
<P CLASS="h4"><B>12. Configuration space meets the Common Silicon Guidelines </B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP">Required</TD><TD VALIGN="TOP"></TD><TD VALIGN="TOP"></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The standard for CardBus defines a PCI-like configuration space that is not fully compliant with the PCI specification. Specifically, under the CardBus Standard, card vendors do not have to implement certain critical fields in the configuration space (described in the PC&nbsp;Card Standard as "allocated"). In the PC&nbsp;Card Standard Guidelines for silicon common to both PCI and CardBus products, the implementation of these fields is recommended.</P>
<P CLASS="t">However, to maintain compatibility with existing PCI system software and drivers for PC 97, Windows will support only CardBus cards whose configuration space is designed to meet the Common Silicon Guidelines.</P>
<P CLASS="t">This is required because CardBus configuration is performed by the PCI software, which knows how to deal with all aspects of PCI topology configuration, including bridging. Without the "allocated" fields, the cards cannot be treated fully as PCI devices and therefore cannot be supported under Windows.</P>
<P CLASS="t">The required "allocated" fields are listed in the following table.</P>
<P CLASS="ttl"><B>Required "Allocated" Fields</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="60pt" VALIGN="TOP"><COL WIDTH="298pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">Field</TD><TD VALIGN="TOP">Description and comments</TD></TR><TR><TD VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">Vendor ID</TD><TD VALIGN="TOP">This read-only field contains a Unique ID (in PCI space) for the manufacturer of the card. It is allocated by the PCI SIG.</TD></TR><TR><TD VALIGN="TOP">Device ID<BR>Revision ID</TD><TD VALIGN="TOP">These read-only fields are vendor-assigned values that uniquely identify the device (among all vendors of PCI or CardBus products).</TD></TR><TR><TD VALIGN="TOP">Class Code</TD><TD VALIGN="TOP">These read-only fields are defined in the PCI 2.1 specification. They describe what type of device this card is.</TD></TR><TR><TD VALIGN="TOP">Max_Lat<BR>Min_Gnt</TD><TD VALIGN="TOP">These read-only fields specify the desired settings for Latency Timer values, according to the PCI 2.1 specification. Values of 0 indicate the device has no major requirements for the settings of Latency Timers.</TD></TR><TR><TD VALIGN="TOP">Interrupt Line</TD><TD VALIGN="TOP">This register must be read-write and must not be connected to anything, just as on PCI cards. This register is used to store the current IRQ routing for the device.</TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="h4"><B>13. RESERVED fields compliant with PCI v. 2.1</B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP">Required</TD><TD VALIGN="TOP"></TD><TD VALIGN="TOP"></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">The CardBus specification also lists two fields as RESERVED (offset 2C in the configuration space), which have since been defined in the PCI v. 2.1 specification. These are also required on CardBus cards for Windows compatibility.</P>
<P CLASS="ttl"><B>Required RESERVED Fields</B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="140pt" VALIGN="TOP"><COL WIDTH="210pt" VALIGN="TOP"><COL WIDTH="3pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">Field</TD><TD VALIGN="TOP">Description</TD></TR><TR><TD VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">SubSystem ID</TD><TD VALIGN="TOP">If different from Device ID</TD></TR><TR><TD VALIGN="TOP">SubSystem Vendor ID</TD><TD VALIGN="TOP">If different from Vendor ID</TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="h4"><B>14. CardBus required and recommended tuples implemented</B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP">Required</TD><TD VALIGN="TOP"></TD><TD VALIGN="TOP"></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">For CardBus, Windows also requires the same set of card tuples as recommended in the PC&nbsp;Card Guidelines, as summarized in the following table.</P>
<P CLASS="ttl"><B>Required Tuples for CardBus</B></P>

<TABLE COLS="6" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="60pt" VALIGN="TOP"><COL WIDTH="8pt" VALIGN="TOP"><COL WIDTH="137pt" VALIGN="TOP"><COL WIDTH="4pt" VALIGN="TOP"><COL WIDTH="142pt" VALIGN="TOP"><COL WIDTH="6pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="6" VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">Tuple <BR>identifier</TD><TD VALIGN="TOP">Tuple code</TD><TD VALIGN="TOP">Comments</TD></TR><TR><TD COLSPAN="6" VALIGN="TOP"><P></TD></TR><TR><TD VALIGN="TOP">04h</TD><TD VALIGN="TOP">CISTPL_CONFIG_CB</TD><TD VALIGN="TOP"></TD></TR><TR><TD VALIGN="TOP">05h</TD><TD VALIGN="TOP">CISTPL_CFTABLE_ENTRY_CB</TD><TD VALIGN="TOP"></TD></TR><TR><TD VALIGN="TOP">07h</TD><TD VALIGN="TOP">CISTPL_BAR</TD><TD VALIGN="TOP"></TD></TR><TR><TD VALIGN="TOP">13h</TD><TD VALIGN="TOP">CISTPL_LINKTARGET</TD><TD VALIGN="TOP">Required as first tuple by PC&nbsp;Card Standard</TD></TR><TR><TD VALIGN="TOP">15h</TD><TD VALIGN="TOP">CISTPL_VERS_1</TD><TD VALIGN="TOP"></TD></TR><TR><TD VALIGN="TOP">20h</TD><TD VALIGN="TOP">CISTPL_MANFID</TD><TD VALIGN="TOP"></TD></TR><TR><TD VALIGN="TOP">FFh</TD><TD VALIGN="TOP">CISTPL_END</TD><TD VALIGN="TOP">Required as end-of-chain tuple by PC&nbsp;Card Standard</TD></TR><TR><TD VALIGN="TOP">21h</TD><TD VALIGN="TOP">CISTPL_FUNCID</TD><TD VALIGN="TOP">Recommended in PC&nbsp;Card Standard; required for PC&nbsp;97</TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="h4"><B>15. Writable PCI Configuration Space bits not shared by CardBus controllers</B></P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"><COL WIDTH="25%" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP">Required</TD><TD VALIGN="TOP"></TD><TD VALIGN="TOP"></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="t">CardBus controllers are multifunction PCI devices, and Windows treats each function of a multifunction PCI device as an independent device. As such, there can be no sharing between functions of writable PCI Configuration Space bits (such as the Command register).</P>
<P CLASS="t">For more information requirements related to the PCI Configuration Space, see the "PCI" chapter in Part&nbsp;3 of this&nbsp;guide. </P></BODY></HTML>
