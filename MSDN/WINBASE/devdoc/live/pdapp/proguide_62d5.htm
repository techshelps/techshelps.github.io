<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Sample Media Label Library</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_zaw_sample_media_label_library"></a>Sample Media Label Library</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The following section contains the source code for an example media label library that identifies a fictitious media label. If you use industry-standard media formats, such as Microsoft tape format (MTF) and System Independent Data Format (SIDF), keep in mind that other companies use these formats. Your media label library should not recognize all MTF or SIDF media labels; it should recognize only those written by your application.</p>
<pre><code>DWORD ClaimMediaLabel (const BYTE * const pBuffer, 
                 const DWORD nBufferSize,
                 MediaLabelInfo *pLabelInfo)
{
    #include &lt;ntmsmli.h&gt;
    // local variables
    NTMS_FictLabel   *pLabel ;
    // see if this is our format ...
    pLabel = (NTMS_FictLabel *) pBuffer ;
    // if this is the NTMS Fictitious Media Label ... get the 
    // appropriate info out of it ...
    if (wcsncmp (pLabel-&gt;LabelType, L"NTMS Fictitious Media 
             Label", NTMS_FictLabelTypeSize)  == 0)
    {
        // use Unicode string copy functions ... if the 
        // strings in the media label are not in Unicode then 
        // they must first be converted to Unicode by using 
        // mbstowcs() routine and then copied into the 
        // MediaLabelInfo structure ...
        wcscpy (pLabelInfo-&gt;LabelType, pLabel-&gt;LabelType)
        pLabelInfo-&gt;LabelIDSize = pLabel-&gt;LabelIDSize ;
        memcpy (pLabelInfo-&gt;LabelID, pLabel-&gt;LabelID, 
              pLabelInfo-&gt;LabelIDSize) ;
        wcscpy (pLabelInfo-&gt;LabelAppDescr, 
              pLabel-&gt;LabelAppDescr) ;
        return NO_ERROR ;
    }
    // not an NTMS fictitious media label ...
    return ERROR_BAD_FORMAT ;
}
DWORD MaxMediaLabel (DWORD * const pMaxSize)
{
    // set the max size for the NTMS fictitious media label ...
    *pMaxSize = 1024 ;
    return NO_ERROR ;
}
 </code></pre>
<p>&nbsp;</p></body>
</HTML>
