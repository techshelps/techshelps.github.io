<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Restoring the RSM Database in the Absence of a Backup</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_zaw_restoring_the_rsm_database_in_the_absence_of_a_backup"></a>Restoring the RSM Database in the Absence of a Backup</h2>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
This section describes a strategy for an application to recover the RSM database when the database has been lost and there is no backup copy, but the application has not lost the database that refers to the lost RSM database. For this example it is assumed that the application has kept both the RSM <a href="ntmsglos_6ni1.htm#_zaw_lmid_gly">LMID</a> and its own <a href="ntmsglos_5fnd.htm#_zaw_omid_gly">OMID</a> information in its database. An application can take the following steps to recover the RSM database:
<ol>
<li>
All the media in the library will appear in the import pool.</li>
<li>
The application must have a mechanism that scans the Import media pool for its media. This can be accomplished by reading the OMID information of the partitions of the physical media and finding all media with the <i>szOmidLabelType</i> parameter that is the application's type. As an additional check the application can verify that the <i>szOmidLabelInfo</i> parameter is correct for the media.</li>
<li>
For all partitions found, the application must call the <a href="ntms_api_6275.htm"><b>AllocateNtmsMedia</b></a> function, specifying the partition and media pool, to allocate the target media pool.</li>
<li>
The application database must be updated with the new LMID that is assigned to the media. The application should search through its database for all cases of the OMID it has found and replace the corresponding LMID with the new one.</li>
<li>
After the operation is complete, both the RSM database and the application's database should be in a usable state again. </li>
<li>
Media that is not in the library must be inserted to fully reconstruct the RSM database.</li>
</ol>
<p>&nbsp;</p></body>
</HTML>
