<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Media States</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_zaw_media_states"></a>Media States</h3>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
Media states identify the condition of each partition of the media in an RSM system and define which applications have access to partitions. When media is introduced to RSM, RSM reads the <a href="ntmsglos_5fnd.htm#_zaw_omid_gly">OMID</a> or bar code of the media to determine the state of the partition. This process is known as classification.</p>
<p>
The following table describes the RSM media states.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Media State</th>
<th align=left width=52%>Description</th>
</tr>
<tr valign=top>
<td width=48%>Allocated</td>
<td width=52%>Media that are in use and assigned to application media pools.</td>
</tr>
<tr valign=top>
<td width=48%>Available</td>
<td width=52%>Media that can be allocated for use by applications.</td>
</tr>
<tr valign=top>
<td width=48%>Completed</td>
<td width=52%>Media that are in use but can no longer be used for write operations.</td>
</tr>
<tr valign=top>
<td width=48%>Decommissioned</td>
<td width=52%>Media that have reached their allocation maximum (specified by the administrator or an application) and cannot be used again.</td>
</tr>
<tr valign=top>
<td width=48%>Foreign</td>
<td width=52%>Media whose label types and label IDs are not recognized by RSM, and media that are new to RSM.</td>
</tr>
<tr valign=top>
<td width=48%>Imported</td>
<td width=52%>Media whose label types are recognized by RSM, but whose label IDs are not recognized by RSM.</td>
</tr>
<tr valign=top>
<td width=48%>Incompatible</td>
<td width=52%>Media that are not compatible with the library in which they were classified. This media should be immediately ejected from the media library unit. RSM puts Incompatible media in the foreign media pool.</td>
</tr>
<tr valign=top>
<td width=48%>Reserved</td>
<td width=52%>Media that are being held by an application.</td>
</tr>
<tr valign=top>
<td width=48%>Unprepared</td>
<td width=52%>Media that are in a scratch media pool but have not been assigned scratch labels by RSM. This is a temporary state; applications cannot allocate Unprepared media.</td>
</tr>
</table><br>

<h4><a name="_zaw_how_media_moves_among_states"></a>How Media Moves Among States</h4>
<p>
The following figure illustrates what happens when media is inserted into an RSM library.</p>
<p>
<img src="images/progd3.gif" border=0></p>
<p>
When media is inserted into a library unit in an RSM system, RSM classifies the medium by reading its bar code (if unique) or <a href="ntmsglos_5fnd.htm#_zaw_omid_gly">OMID</a>. If the RSM database contains information about the medium, RSM does not alter the current states of its partitions and relies on the information in the RSM database.</p>
<p>
If RSM does not recognize the label type of an OMID or if the medium is new to RSM, RSM sets the medium's state to Foreign. If RSM recognizes the label type but not the label ID, RSM sets the medium's state to Imported.</p>
<p>
If the medium is not compatible with the current library, RSM sets the medium's state to Incompatible. Media in the Incompatible state cannot be changed to another state, and it should be ejected from the media library unit.</p>
<p>
Foreign and Incompatible media do not have a recognized OMID and are not managed by RSM. They are deleted from the database when they are ejected.</p>
<p>
RSM never sets the state of inserted media to Reserved. This state can only be set by an application.</p>

<h4><a name="_zaw_foreign_state"></a>Foreign State</h4>
<p>
The following figure shows movement out of the Foreign state.</p>
<p>
<img src="images/progd4.gif" border=0></p>
<p>
When media that RSM cannot identify is inserted into a RSM library, RSM sets the medium's state to Foreign and moves the medium to the foreign media pool.</p>
<p>
Foreign media can only be changed to the Available state by moving it to the scratch pool. Foreign media must be explicitly changed by an administrator or an application.</p>

<h4><a name="_zaw_available_state"></a>Available State</h4>
<p>
The following figure shows movement in and out of the Available state.</p>
<p>
<img src="images/progd5.gif" border=0></p>
<p>
RSM moves media from the Available to the Allocated state when an application allocates it using the <a href="ntms_api_6275.htm"><b>AllocateNtmsMedia</b></a> function.</p>
<p>
When an application deallocates media, RSM checks the database for the number of times the specified medium has been allocated. If the medium has reached its allocation maximum, RSM changes the state of the medium to Decommissioned. Only media in the Available state can be changed to the Decommissioned state.</p>
<p>
When an application deallocates one partition of a piece of media that contains Reserved partitions, RSM changes the state of all Reserved partitions to Available.</p>
<p>
Available and Decommissioned media can be in scratch or application media pools.</p>

<h4><a name="_zaw_allocated_state"></a>Allocated State</h4>
<p>
The following figure shows movement in and out of the Allocated state.</p>
<p>
<img src="images/progd6.gif" border=0></p>
<p>
Media in the Allocated state can be changed to the Available and Completed states. The process of changing the state of media from Allocated to Available is called <i>deallocation</i>. The process of changing the state of a piece of media from Allocated to Completed is called <i>completion</i>.</p>
<p>
You can allocate and deallocate media without moving it out of an application media pool.</p>
<p>
When you use the _ALLOCATE_NEW option of the <a href="ntms_api_6275.htm"><b>AllocateNtmsMedia</b></a> function, RSM allocates one partition of the specified medium and sets the state of all other partitions to Reserved. You can specify the _ALLOCATE_NEXT option of the <b>AllocateNtmsMedia</b> function to allocate the next Reserved partition of the specified media. When there are no more Reserved partitions, RSM returns an error message.</p>

<h4><a name="_zaw_imported_state"></a>Imported State</h4>
<p>
The following figure shows movement in and out of the Imported state.</p>
<p>
<img src="images/progd7.gif" border=0></p>
<p>
The state of Imported media must be explicitly changed to Available or Allocated.</p>
<p>
When media are moved from the import media pool to a scratch media pool, RSM sets the state of the media to Available.</p>
<p>
RSM initially sets the state of CD-ROM media to Imported and places it in the import media pool.</p>

<h4><a name="_zaw_how_media_pools_and_media_states_are_related"></a>How Media Pools and Media States Are Related</h4>
<p>
Many changes in media state are accompanied by movement between media pools. For example, you can configure application media pools to automatically allocate media from scratch pools when there are no Available media in the application media pool; this is the <b>Draw from Scratch</b> option. You can also configure application media pools to automatically return Available media to scratch pools; this is the <b>Return to Scratch</b> option.. These options can be set using the RSM API or the RSM MMC snap-in.</p>
<p>
When RSM deallocates media and changes the state to Available, RSM checks the allocation count. If the specified medium has been allocated the maximum number of times, it is decommissioned by RSM. If the specified medium has not been allocated the maximum number of times, RSM checks the <b>Return to Scratch</b> option. If the <b>Return to Scratch</b> option for that application media pool is set to True, RSM returns the specified medium to the appropriate scratch media pool. If the <b>Return to Scratch</b> option is set to False, the media remains in the application media pool.</p>
<p>
The administrator can also set the <b>Draw from Scratch</b> option for an application media pool. If this option is set to True, RSM automatically allocates media from the appropriate scratch media pool when the application media pool does not contain any Available media. If this option is set to False, RSM generates an error message when there are no Available media in the application media pool.</p>
<p>&nbsp;</p></body>
</HTML>
