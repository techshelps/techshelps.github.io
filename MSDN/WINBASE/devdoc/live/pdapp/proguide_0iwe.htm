<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Manual Device Configuration</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_zaw_manual_device_configuration"></a>Manual Device Configuration</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
Because not all library hardware units and system configurations support the RSM autoconfiguration feature, RSM provides a method for manually configuring library hardware units. However, you should not use this method unless it is absolutely necessary, because manually configured devices do not recognize system configuration changes. Always let RSM autoconfigure all devices when you add, move, or remove a device in an RSM system. If the autoconfiguration fails, you can complete the configuration manually.</p>
<h5>&nbsp;&nbsp;&nbsp;&nbsp;To perform a manual configuration</h5>
<ol>
<li>
After installing, moving, or removing hardware, let RSM start the process of autoconfiguration. This process adds incomplete registry entries and generates an operator request to manually configure each changer it cannot autoconfigure. </li>
</ol>
<p>
<b>Note</b>&nbsp;&nbsp;If you manually configured a changer when it was installed, RSM does not recognize changes made to that changer or its associated drives, and RSM does not start the autoconfiguration process.
<ol start=2>
<li>
After RSM generates an operator request for each changer that it cannot autoconfigure, stop RSM.</li>
<li>
Back up the RSM database by copying %SYSTEMROOT%\System32\ntmsdata\* to a secure temporary directory.</li>
<li>
Open the Windows NT registry in Regedt32 or RegEdit.</li>
<li>
Go to the <b>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\<br>
MediaService\Config</b> key. There is a subkey for each changer in the system and a subkey for the stand-alone drives. The following figure illustrates a registry configuration that contains one changer (Changer0) and at least one stand-alone drive.<p>
<img src="images/progd11.gif" border=0>
<p>
The following table describes the registry entries in the preceding figure.
</li>
</ol>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=34%>Registry Entry</th>
<th align=left width=66%>Description</th>
</tr>
<tr valign=top>
<td width=34%>AutoCfg</td>
<td width=66%>Determines whether the current changer is automatically or manually configured. A value of zero (0) represents manual configuration, and a non-zero value represents autoconfiguration.</td>
</tr>
<tr valign=top>
<td width=34%>CurrentConfigPassed</td>
<td width=66%>Represents the success of the current configuration. A non-zero value indicates that RSM did not find a conflict with the configuration the last time RSM was started.</td>
</tr>
<tr valign=top>
<td width=34%>DriveBayX</td>
<td width=66%>Represents the drive bays associated with the changer (where X is a numeric value). Changers can be associated with any number of drive bays. The values of these entries map the drive bays to the drive inside them. Triple question marks (???) represent unrecognized drives that must be manually configured.<p>
<b>Note</b> When RSM cannot establish communication with the changer, RSM does not create any drive bay entries. Manual configuration cannot solve this problem; you might have to replace the changer driver.</p>
</td>
</tr>
</table><br>
<ol start=6>
<li>
Go to the subkey for the changer that RSM did not configure and note the name of each unrecognized drive bay. Unrecognized drive bays have a value of ??? instead of a drive device name.</li>
<li>
Open MMC and access the RSM Administration Tool.</li>
<li>
Insert media in a drive that RSM does not recognize. RSM typically categorizes unrecognized drives as stand-alone drives. Check each of the stand-alone drives listed until RSM updates the right pane with the inserted media. Note the name of the drive that contains the media you inserted. You must associate this drive name with the appropriate drive bay by replacing the ??? in the registry entry for that drive bay later in this procedure.<p>
If this identification process is unsuccessful, move to the next step. Otherwise, complete this step for each drive that RSM does not recognize and skip to step 12.
</li>
<li>
Go to the <b>HKEY_LOCAL_MACHINE\Hardware\DeviceMap\SCSI</b> key in the Windows NT registry and look for the port, bus, target, and logical unit ID of an unrecognized drive. Use the SCSI ID of the drive to ensure that you are looking at the correct drive.</li>
<li>
Note the value of the DeviceName entry in the right window pane. This is the name of the current drive that replaces the ??? in the registry entry for the current drive bay.</li>
<li>
Repeat steps 8 through 10 for each drive that RSM does not recognize.</li>
<li>
Stop all processes that are accessing RSM drives.</li>
<li>
Stop RSM.<p>
<b>Warning</b> Do not continue until you are sure RSM is not running. It is <i>very</i> important not to edit the RSM entries in the registry while RSM is running.
</li>
<li>
When all drive activity stops, go to the RSM configuration information in the <b>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\<br>
MediaService\Config</b> key of the Windows NT registry.</li>
<li>
Go to the first drive bay entry with a value of ???. This represents a drive that RSM does not recognize.</li>
<li>
Replace the ??? with the appropriate drive name for that drive bay.</li>
<li>
Set the AutoCfg flag to 0.</li>
<li>
Repeat steps 16 and 17 for each drive that is not configured.</li>
<li>
Close the Windows NT registry.</li>
<li>
Restart RSM. It will read the new configuration information and initialize the devices.</li>
<li>
Mount media in each drive in the library after RSM is initialized. If any of the configurations are incorrect, RSM generates an error message (during either initialization or mounting).</li>
<li>
If the manual configuration was unsuccessful, stop RSM. Copy your backup version of the RSM database files back to the %SYSTEMROOT%\System32\ntmsdata\ directory to restore the database and restart the manual configuration process.<p>
If RSM does not generate any error messages, the manual configuration was successful and you have completed the manual configuration process.
</li>
</ol>
<p>&nbsp;</p></body>
</HTML>
