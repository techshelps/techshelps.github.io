<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DeallocateNtmsMedia</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_zaw_deallocatentmsmedia"></a>DeallocateNtmsMedia</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>DeallocateNtmsMedia</b> function deallocates the partition associated with the specified logical media.</p>
<pre><code><b>DWORD WINAPI DeallocateNtmsMedia(
</b>  <b>HANDLE</b> <i>hSession</i><b>,</b> 
  <b>LPNTMS_GUID</b> <i>lpMediaId</i><b>,</b>
  <b>DWORD</b> <i>dwOptions</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hSession</i></dt>
<dd>
Handle to the session returned by the <a href="ntms_api_3kq6.htm"><b>OpenNtmsSession</b></a> function.</dd>
<dt>
<i>lpMediaId</i></dt>
<dd>
Specifies the unique identifier of logical media.</dd>
<dt>
<i>dwOptions</i></dt>
<dd>
Reserved; must be zero.
</dd>
</dl>
<h4>Return Values</h4>
<dl>
<dt>
ERROR_ACCESS_DENIED</dt>
<dd>
NTMS_MODIFY_ACCESS to media's media pool is denied. Other security errors are also possible, but they would indicate a security subsystem error.</dd>
<dt>
ERROR_DATABASE_FAILURE</dt>
<dd>
The database is inaccessible or damaged.</dd>
<dt>
ERROR_DATABASE_FULL</dt>
<dd>
The database is full.</dd>
<dt>
ERROR_INVALID_HANDLE</dt>
<dd>
The session handle is invalid or missing.</dd>
<dt>
ERROR_INVALID_MEDIA</dt>
<dd>
The LMID is invalid.</dd>
<dt>
ERROR_INVALID_PARAMETER </dt>
<dd>
The media or media pool ID is missing.</dd>
<dt>
ERROR_INVALID_PARTITION</dt>
<dd>
The LMID partition is invalid.</dd>
<dt>
ERROR_NOT_ENOUGH_MEMORY</dt>
<dd>
An allocation failure occurred during processing.</dd>
<dt>
ERROR_SUCCESS </dt>
<dd>
The function was successful.
</dd>
</dl>
<h4>Remarks</h4>
<p>
When a logical medium is deallocated with the <b>DeallocateNtmsMedia</b> function, RSM puts the partition associated with the logical media in the Available or Decommissioned media state. The logical media is deleted from the system when the logical media is deallocated.</p>
<p>
Partitions are decommissioned upon deallocation if the partition has been allocated the maximum number of times specified in the media pool. After media is in the Decommissioned state, it cannot be allocated again.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in ntmsapi.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use ntmsapi.lib.</p>
<h4>See Also</h4>
<p>
<a href="ntms_api_5nz9.htm#_zaw_media_services_functions">Media Services Functions</a>, <a href="ntms_api_6275.htm"><b>AllocateNtmsMedia</b></a></p>
<p>&nbsp;</p></body>
</HTML>
