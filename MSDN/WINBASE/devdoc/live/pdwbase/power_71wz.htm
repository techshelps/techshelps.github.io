<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Power Management Events</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_power_management_events"></a>Power Management Events</h2>
<p>
A <i>power management event</i> is a change in either the system power status or the operational mode of a device or the system. Because these events can affect the operation of applications and installable drivers and can lead to loss of data, the system notifies all applications and installable drivers by broadcasting a <a href="power_0304.htm">WM_POWERBROADCAST</a> message for each event.</p>
<h4>System Power Status Events</h4>
<p>
A <i>system power status event</i> occurs when there is a change in the power supply or in the system battery status. For example, the system broadcasts a <a href="power_1jfp.htm">PBT_APMPOWERSTATUSCHANGE</a> message whenever the user switches from battery to AC power or vice versa. The system also broadcasts this message when remaining battery power slips below the threshold specified by the user.</p>
<h4>Operational Mode Events</h4>
<p>
An <i>operational mode event</i> occurs when there is a change in power consumption, such as the system shutting itself down or the user turning the system off. If applications and drivers do not prepare for changes in operational mode, they can lose data. Therefore, the system broadcasts messages about these changes before they actually occur. For example, if the system determines that it is idle, it broadcasts a <a href="power_9ias.htm">PBT_APMSUSPEND</a> message notifying applications and drivers that it is about to suspend operation and shut itself down to save power. The applications and drivers can prepare for this suspension by closing files and saving data that may otherwise be lost when power is shut off. </p>
<p>
The system has two ways to shut itself down. It can suspend operation or carry out critical suspension. An application can also shut the system down by using the <a href="power_4wv9.htm"><b>SetSystemPowerState</b></a> function to suspend operation.</p>
<p>
When system operation is suspended, power to all devices is lost. The <a href="power_0304.htm">WM_POWERBROADCAST</a> message, sent immediately before suspension, allows device drivers to save the state of the device. For many devices (but not all), saving the state means the driver can restore the state when power is eventually restored, allowing the device to continue operation as if power had not been lost. </p>
<p>
When the system carries out a <i>critical suspension</i>, the system is shut down immediately because battery power is too low to let the system continue to run. In contrast to suspended operation, the system does not notify applications and drivers before carrying out a critical suspension. This means data may be lost.</p>
<p>
When system operation is restored after having been suspended, the system notifies all applications and drivers. It also identifies the manner in which the system was previously shut down so the application or driver can take appropriate steps to restore its data and continue its own operation. </p>
<p>
Applications should make every attempt to handle the transition to the sleeping state without any user intervention. When the system requests permission to enter the sleeping state, your application should check to see if it has any open files on removable drives or on the network. If so, the application should autosave and close its files. Applications should deny permission to enter the sleeping state only if an uninterruptible operation is in progress. </p>
<p>&nbsp;</p></body>
</HTML>
