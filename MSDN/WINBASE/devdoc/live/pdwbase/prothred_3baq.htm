<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>JOBOBJECT_ASSOCIATE_COMPLETION_PORT</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_jobobject_associate_completion_port_str"></a>JOBOBJECT_ASSOCIATE_COMPLETION_PORT</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>JOBOBJECT_ASSOCIATE_COMPLETION_PORT</b> structure contains information used to associate a completion port with a job object. </p>
<pre><code>typedef struct _JOBOBJECT_ASSOCIATE_COMPLETION_PORT {
    PVOID CompletionKey;
    HANDLE CompletionPort;
} JOBOBJECT_ASSOCIATE_COMPLETION_PORT, PJOBOBJECT_ASSOCIATE_COMPLETION_PORT;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>CompletionKey</b></dt>
<dd>
Specifies the value to use in the <i>dwCompletionKey</i> parameter of <a href="filesio_33g3.htm"><b>PostQueuedCompletionStatus</b></a> when messages are sent on behalf of the job object. </dd>
<dt>
<b>CompletionPort</b></dt>
<dd>
Specifies the completion port to use in the <i>CompletionPort</i> parameter of the <b>PostQueuedCompletionStatus</b> function when messages are sent on behalf of the job object. 
</dd>
</dl>
<h4>Remarks</h4>
<p>
The job object sends messages to the completion port when certain events occur. All messages are sent directly from the job object as if the job object had called the <a href="filesio_33g3.htm"><b>PostQueuedCompletionStatus</b></a> function. A thread monitoring the completion port using the <a href="filesio_071v.htm"><b>GetQueuedCompletionStatus</b></a> function must pick up the messages. The thread receives information in the <b>GetQueuedCompletionStatus</b> parameters shown in the following table. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Parameter</th>
<th align=left width=57%>Information Received</th>
</tr>
<tr valign=top>
<td width=43%></td>
<td width=57%></td>
</tr>
<tr valign=top>
<td width=43%><i>lpCompletionKey</i></td>
<td width=57%>The value specified in <b>CompletionKey</b> during the completion-port assocation. If a completion port is associated with multiple job objects, <b>CompletionKey</b> should help the caller determine which completion port is sending a message.</td>
</tr>
<tr valign=top>
<td width=43%><i>lpOverlapped</i></td>
<td width=57%>Message-specific value. For more information, see the following table of message identifiers.</td>
</tr>
<tr valign=top>
<td width=43%><i>lpNumberOfBytesTransfered</i></td>
<td width=57%>The message identifier that indicates which job-related event occurred. For more information, see the following table of message identifiers. </td>
</tr>
</table><br>
<p>
The following messages can be sent to the completion port. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=39%>Message Identifier</th>
<th align=left width=61%>Description</th>
</tr>
<tr valign=top>
<td width=39%></td>
<td width=61%></td>
</tr>
<tr valign=top>
<td width=39%>JOB_OBJECT_MSG_END_OF_JOB_TIME</td>
<td width=61%>Indicates that the JOB_OBJECT_POST_AT_END_OF_JOB option is in effect and the end-of-job time limit has been reached. Upon posting this message, the time limit is canceled and the job's processes can continue to run. <p>
The value of <i>lpOverlapped</i> in NULL.</p>
</td>
</tr>
<tr valign=top>
<td width=39%>JOB_OBJECT_MSG_END_OF_PROCESS_TIME</td>
<td width=61%>This message is sent whenever a process exceeds a per-process time limit. It is sent after the process termination has been requested. <p>
The value of <i>lpOverlapped</i> is the identifier of the process that exceeded its limit.</p>
</td>
</tr>
<tr valign=top>
<td width=39%>JOB_OBJECT_MSG_ACTIVE_PROCESS_LIMIT</td>
<td width=61%>This message is sent when the active process limit has been exceeded. <p>
The value of <i>lpOverlapped</i> is NULL.</p>
</td>
</tr>
<tr valign=top>
<td width=39%>JOB_OBJECT_MSG_ACTIVE_PROCESS_ZERO</td>
<td width=61%>This message is sent whenever the active process count is decremented to 0. For example, if the job currently has two active processes, this message is sent after they both terminate. <p>
The value of <i>lpOverlapped</i> is NULL.</p>
</td>
</tr>
</table><br>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winnt.h.</p>
<h4>See Also</h4>
<p>
<a href="prothred_86sz.htm">Processes and Threads Overview</a>, <a href="prothred_9nzn.htm">Process and Thread Structures</a>,  <a href="filesio_33g3.htm"><b>PostQueuedCompletionStatus</b></a>, <a href="prothred_0xbo.htm"><b>QueryInformationJobObject</b></a>, <a href="prothred_3lbo.htm"><b>SetInformationJobObject</b></a><b> </b></p>
<p>&nbsp;</p></body>
</HTML>
