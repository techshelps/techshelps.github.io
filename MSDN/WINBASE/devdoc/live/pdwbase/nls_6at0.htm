<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>GetTimeFormat</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_gettimeformat"></a>GetTimeFormat</h1>
<p>
The <b>GetTimeFormat</b> function formats a time as a time string for a specified locale. The function formats either a specified time or the local system time.</p>
<pre><code><b>int GetTimeFormat(
  LCID</b><i> Locale</i><b>,       </b>// locale for which time is to be formatted
<b>  DWORD</b><i> dwFlags</i><b>,             </b>// flags specifying function options
<b>  CONST SYSTEMTIME</b><i> </i>*<i>lpTime</i><b>,  </b>// time to be formatted
<b>  LPCTSTR</b><i> lpFormat</i><b>,          </b>// time format string
<b>  LPTSTR</b><i> lpTimeStr</i><b>,          </b>// buffer for storing formatted string
<b>  int</b><i> cchTime</i>                // size, in bytes or characters, of the buffer
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Locale</i></dt>
<dd>
Specifies the locale for which the time string is to be formatted. If <i>lpFormat</i> is NULL, the function formats the string according to the time format for this locale. If <i>lpFormat</i> is not NULL, the function uses the locale only for information not specified in the format picture string (for example, the locale's time markers).
<p>
This parameter can be a locale identifier created by the <a href="nls_7qck.htm"><b>MAKELCID</b></a> macro, or one of the following predefined values:

<table cellspacing=4 cols=2>
<tr valign=top>
<td width=50%>LOCALE_SYSTEM_DEFAULT</td>
<td width=50%>Default system locale.</td>
</tr>
<tr valign=top>
<td width=50%>LOCALE_USER_DEFAULT</td>
<td width=50%>Default user locale.</td>
</tr>
<tr valign=top>
<td width=50%>LOCALE_NEUTRAL</td>
<td width=50%>Default language-neutral locale.</td>
</tr>
</table><br>

</dd>
<dt>
<i>dwFlags</i></dt>
<dd>
A set of bit flags that specify various function options. You can specify a combination of the following flags:
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=49%>Flag</th>
<th align=left width=51%>Meaning</th>
</tr>
<tr valign=top>
<th align=left width=49%>LOCALE_NOUSEROVERRIDE</th>
<td width=51%>If set, the function formats the string using the system default time format for the specified locale. If not set, the function formats the string using any user overrides to the locale's default time format. This flag cannot be set if <i>lpFormat</i> is non-NULL.</td>
</tr>
<tr valign=top>
<th align=left width=49%>TIME_NOMINUTESORSECONDS</th>
<td width=51%>Do not use minutes or seconds.</td>
</tr>
<tr valign=top>
<th align=left width=49%>TIME_NOSECONDS</th>
<td width=51%>Do not use seconds.</td>
</tr>
<tr valign=top>
<th align=left width=49%>TIME_NOTIMEMARKER</th>
<td width=51%>Do not use a time marker.</td>
</tr>
<tr valign=top>
<th align=left width=49%>TIME_FORCE24HOURFORMAT</th>
<td width=51%>Always use a 24-hour time format.</td>
</tr>
</table><br>

</dd>
<dt>
<i>lpTime</i></dt>
<dd>
Pointer to a <a href="time_6sfm.htm"><b>SYSTEMTIME</b></a> structure that contains the time information to be formatted. If this pointer is NULL, the function uses the current local system time. </dd>
<dt>
<i>lpFormat</i></dt>
<dd>
Pointer to a format picture to use to form the time string. If <i>lpFormat</i> is NULL, the function uses the time format of the specified locale.
<p>
Use the following elements to construct a format picture string. If you use spaces to separate the elements in the format string, these spaces will appear in the same location in the output string. The letters must be in uppercase or lowercase as shown (for example, "ss", not "SS"). Characters in the format string that are enclosed in single quotation marks will appear in the same location and unchanged in the output string.

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=18%>Picture</th>
<th align=left width=82%>Meaning</th>
</tr>
<tr valign=top>
<td width=18%>h</td>
<td width=82%>Hours with no leading zero for single-digit hours; 12-hour clock</td>
</tr>
<tr valign=top>
<td width=18%>hh</td>
<td width=82%>Hours with leading zero for single-digit hours; 12-hour clock</td>
</tr>
<tr valign=top>
<td width=18%>H</td>
<td width=82%>Hours with no leading zero for single-digit hours; 24-hour clock</td>
</tr>
<tr valign=top>
<td width=18%>HH</td>
<td width=82%>Hours with leading zero for single-digit hours; 24-hour clock</td>
</tr>
<tr valign=top>
<td width=18%>m</td>
<td width=82%>Minutes with no leading zero for single-digit minutes</td>
</tr>
<tr valign=top>
<td width=18%>mm</td>
<td width=82%>Minutes with leading zero for single-digit minutes</td>
</tr>
<tr valign=top>
<td width=18%>s</td>
<td width=82%>Seconds with no leading zero for single-digit seconds</td>
</tr>
<tr valign=top>
<td width=18%>ss</td>
<td width=82%>Seconds with leading zero for single-digit seconds</td>
</tr>
<tr valign=top>
<td width=18%>t</td>
<td width=82%>One character time marker string, such as A or P</td>
</tr>
<tr valign=top>
<td width=18%>tt</td>
<td width=82%>Multicharacter time marker string, such as AM or PM</td>
</tr>
</table><br>


<p>
For example, to get the time string

<p class=indent1>
"11:29:40 PM"</p>

<p>
use the following picture string:

<p class=indent1>
"hh':'mm':'ss tt"</p>
</dd>
<dt>
<i>lpTimeStr</i></dt>
<dd>
Pointer to a buffer that receives the formatted time string.</dd>
<dt>
<i>cchTime</i></dt>
<dd>
Specifies the size, in bytes (ANSI version) or characters (Unicode version), of the <i>lpTimeStr</i> buffer. If <i>cchTime</i> is zero, the function returns the number of bytes or characters required to hold the formatted time string, and the buffer pointed to by <i>lpTimeStr</i> is not used.
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is the number of bytes (ANSI version) or characters (Unicode version) written to the buffer pointed to by <i>lpTimeStr</i>. If the <i>cchTime</i> parameter is zero, the return value is the number of bytes or characters required to hold the formatted time string. The count includes the terminating null.</p>
<p>
If the function fails, the return value is zero. To get extended error information, call <a href="errors_3uwi.htm"><b>GetLastError</b></a>. <b>GetLastError</b> may return one of the following error codes: </p>
<p>
ERROR_INSUFFICIENT_BUFFER<br>
ERROR_INVALID_FLAGS<br>
ERROR_INVALID_PARAMETER</p>
<h4>Remarks</h4>
<p>
If a time marker exists and the TIME_NOTIMEMARKER flag is not set, the function localizes the time marker based on the specified locale identifier. Examples of time markers are "AM" and "PM" for US English. </p>
<p>
The time values in the <a href="time_6sfm.htm"><b>SYSTEMTIME</b></a> structure pointed to by <i>lpTime</i> must be valid. The function checks each of the time values to determine that it is within the appropriate range of values. If any of the time values are outside the correct range, the function fails, and sets the last-error to ERROR_INVALID_PARAMETER. </p>
<p>
The function ignores the date portions of the <b>SYSTEMTIME</b> structure pointed to by <i>lpTime</i>: <b>wYear</b>, <b>wMonth</b>, <b>wDayOfWeek</b>, and <b>wDay</b>. </p>
<p>
If TIME_NOMINUTESORSECONDS or TIME_NOSECONDS is specified, the function removes the separator(s) preceding the minutes and/or seconds element(s). </p>
<p>
If TIME_NOTIMEMARKER is specified, the function removes the separator(s) preceding and following the time marker. </p>
<p>
If TIME_FORCE24HOURFORMAT is specified, the function displays any existing time marker, unless the TIME_NOTIMEMARKER flag is also set. </p>
<p>
The function does not include milliseconds as part of the formatted time string. </p>
<p>
To use the LOCALE_NOUSEROVERRIDE flag, <i>lpFormat</i> must be NULL. </p>
<p>
No errors are returned for a bad format string. The function simply forms the best time string that it can. If more than two hour, minute, second, or time marker format pictures are passed in, then the function defaults to two. For example, the only time marker pictures that are valid are L"t" and L"tt" (the 'L' indicates a Unicode (16-bit characters) string). If L"ttt" is passed in, the function assumes L"tt". </p>
<p>
<b>Windows CE:</b> The <i>Locale</i> parameter is ignored and the default system locale is always used. The <i>Locale</i> parameter should be set to LOCALE_SYSTEM_DEFAULT to ensure compatibility with future versions of Windows CE.</p>
<p>
Windows CE does not support the LOCALE_NOUSEOVERRIDE flag for the <i>dwFlags</i> parameter.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.5 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Requires version 1.0 or later.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winnls.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use kernel32.lib.<br>
<b>&nbsp;&nbsp;Unicode: </b>Implemented as Unicode and ANSI versions on Windows NT.</p>
<h4>See Also</h4>
<p>
<a href="nls_19f8.htm">National Language Support Overview</a>, <a href="nls_8d0z.htm">National Language Support Functions</a>, <a href="nls_5w6s.htm"><b>GetDateFormat</b></a>, <a href="time_6sfm.htm"><b>SYSTEMTIME</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
