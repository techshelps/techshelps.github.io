<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WM_IME_COMPOSITION</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_wm_ime_composition"></a>WM_IME_COMPOSITION</h1>
<p>
The WM_IME_COMPOSITION message is sent to an application when the IME changes composition status as a result of a key stroke. An application should process this message if it displays composition characters itself. Otherwise, it should send the message to the IME window.</p>
<pre><code>chDBCS = (WORD) wParam;
fFlags = (BOOL) lParam;
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>chDBCS</i></dt>
<dd>
DBCS character representing the latest change to the composition string.</dd>
<dt>
<i>fFlags</i></dt>
<dd>
Change flag, indicating how the composition string or character changed. This parameter can be one or more of the following values:
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=50%>GCS_COMPSTR</td>
<td width=50%>GCS_SETCURSORPOS</td>
</tr>
<tr valign=top>
<td width=50%>GCS_COMPATTR</td>
<td width=50%>GCS_RESULTSTR</td>
</tr>
<tr valign=top>
<td width=50%>GCS_COMPCLAUSE</td>
<td width=50%>GCS_RESULTCLAUSE</td>
</tr>
<tr valign=top>
<td width=50%>GCS_COMPREADSTR</td>
<td width=50%>GCS_RESULTREADSTR</td>
</tr>
<tr valign=top>
<td width=50%>GCS_COMPREADATTR</td>
<td width=50%>GCS_RESULTREADCLAUSE</td>
</tr>
<tr valign=top>
<td width=50%>GCS_COMPREADCLAUSE</td>
<td width=50%>GCR_ERRORSTR</td>
</tr>
<tr valign=top>
<td width=50%>GCS_TYPINGINFO</td>
<td width=50%>GCR_INFOSTR</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Return Values</h4>
<p>
No return value.</p>
<h4>Remarks</h4>
<p>
For more information about these values, see the "IME Composition String Values" table in <a href="ime_2cc3.htm">Input Method Editor Constants</a>.</p>
<p>
The <i>fFlags</i> parameter can also be a combination of the following values:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=32%>Value</th>
<th align=left width=68%>Meaning</th>
</tr>
<tr valign=top>
<td width=32%>CS_INSERTCHAR</td>
<td width=68%>Specifies that the given composition character should be inserted at the current insertion point. An application should display the composition character if it processes this message.</td>
</tr>
<tr valign=top>
<td width=32%>CS_NOMOVECARET</td>
<td width=68%>Specifies that the application must not move the caret position as a result of processing the message. For example, if an IME specifies a combination of CS_INSERTCHAR and CS_NOMOVECARET, the application should insert the given character at the current caret position but should not move caret to the next position. A subsequent WM_IME_COMPOSITION message with GCS_RESULTSTR will replace this character.</td>
</tr>
</table><br>
<p>
If the application has created an IME window, it should pass this message to that window. The <b>DefWindowProc</b> function processes this message by passing it to the default IME window.The IME window processes this message by updating its appearance based on the change flag given. An application can call <b>ImmGetCompositionString</b> to retrieve the new composition status.</p>
<p>
If none of the GCS_ values are set, the message indicates that the current composition has been canceled and applications that draw the composition string should delete the string.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 4.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Requires version 2.0 or later.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in imm.h.</p>
<h4>See Also</h4>
<p>
<a href="ime_5tiq.htm">Input Method Editor Overview</a>, <a href="ime_8cvn.htm">Input Method Editor Messages</a>, <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_defwindowproc">
</object><a href=JavaScript:alink_1.Click()><b>DefWindowProc</b></a>, <a href="ime_9753.htm"><b>ImmGetCompositionString</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
