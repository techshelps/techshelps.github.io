<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SERVICE_FAILURE_ACTIONS</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_service_failure_actions_str"></a>SERVICE_FAILURE_ACTIONS</h1>
<p>
The <b>SERVICE_FAILURE_ACTIONS</b> structure represents the action the service controller should take on each failure of a service. A service is considered failed when it terminates without reporting a status of SERVICE_STOPPED to the service controller.</p>
<pre><code>typedef struct _SERVICE_FAILURE_ACTIONS {
    DWORD       dwResetPeriod;
    LPTSTR       lpRebootMsg;
    LPTSTR       lpCommand;
    DWORD       cActions;
    SC_ACTION * lpsaActions;
} SERVICE_FAILURE_ACTIONS, *LPSERVICE_FAILURE_ACTIONS;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>dwResetPeriod</b></dt>
<dd>
Indicates the length of time, in seconds, after which to reset the failure count to zero if there are no failures. Specify INFINITE to indicate that this value should never be reset.</dd>
<dt>
<b>lpRebootMsg</b></dt>
<dd>
Message to broadcast to server users before rebooting in response to the SC_ACTION_REBOOT service controller action. 
<p>
If this value is NULL, the reboot message is unchanged. If the value is an empty string (""), the reboot message is deleted and no message is broadcast.
</dd>
<dt>
<b>lpCommand</b></dt>
<dd>
Command line of the process for the <a href="prothred_9dpv.htm"><b>CreateProcess</b></a> function to execute in response to the SC_ACTION_RUN_COMMAND service controller action. This process runs under the same account as the service. 
<p>
If this value is NULL, the command is unchanged. If the value is an empty string (""), the command is deleted and no program is run when the service fails. 
</dd>
<dt>
<b>cActions</b></dt>
<dd>
Number of elements in the <i>lpsaActions</i> array. 
<p>
If this value is 0, but <b>lpsaActions</b> is not NULL, the reset period and array of failure actions are deleted. 
</dd>
<dt>
<b>lpsaActions</b></dt>
<dd>
Pointer to an array of <a href="services_7v5e.htm"><b>SC_ACTION</b></a> structures. 
<p>
If this value is NULL, the <b>cActions</b> and <b>dwResetPeriod</b> members are ignored. 

</dd>
</dl>
<h4>Remarks</h4>
<p>
The service control manager counts the number of times each service has failed since the system booted. The count is reset to 0 if the service has not failed for <b>dwResetPeriod</b> seconds. When the service fails for the <i>N</i>th time, the service controller performs the action specified in element [<i>N</i>-1] of the <b>lpsaActions</b> array. If <i>N</i> is greater than <b>cActions</b>, the service controller repeats the last action in the array.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winsvc.h.<br>
<b>&nbsp;&nbsp;Unicode: </b>Defined as Unicode and ANSI structures.</p>
<h4>See Also</h4>
<p>
<a href="services_0p0z.htm">Services Overview</a>, <a href="services_0ofn.htm">Service Structures</a>, <a href="prothred_9dpv.htm"><b>CreateProcess</b></a>, <a href="services_7v5e.htm"><b>SC_ACTION</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
