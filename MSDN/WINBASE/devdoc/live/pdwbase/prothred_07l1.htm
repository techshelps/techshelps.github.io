<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SetProcessWorkingSetSize</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_setprocessworkingsetsize"></a>SetProcessWorkingSetSize</h1>
<p>
The <b>SetProcessWorkingSetSize</b> function sets the minimum and maximum working set sizes for a specified process. </p>
<p>
The working set of a process is the set of memory pages currently visible to the process in physical RAM memory. These pages are resident and available for an application to use without triggering a page fault. The size of the working set of a process is specified in bytes. The minimum and maximum working set sizes affect the virtual memory paging behavior of a process.</p>
<pre><code><b>BOOL SetProcessWorkingSetSize(
  HANDLE</b><i> hProcess</i><b>,                </b>// handle to the process of interest
<b>  DWORD</b><i> dwMinimumWorkingSetSize</i><b>,  </b>// specifies minimum working set size
<b>  DWORD</b><i> dwMaximumWorkingSetSize</i>   // specifies maximum working set size
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hProcess</i></dt>
<dd>
An open handle to the process whose working set sizes will be set. 
<p>
<b>Windows NT:</b> The handle must have PROCESS_SET_QUOTA access rights.  
</dd>
<dt>
<i>dwMinimumWorkingSetSize</i></dt>
<dd>
Specifies a minimum working set size for the process. The virtual memory manager attempts to keep at least this much memory resident in the process whenever the process is active. 
<p>
If both <i>dwMinimumWorkingSetSize</i> and <i>dwMaximumWorkingSetSize</i> have the value 0xffffffff, the function temporarily trims the working set of the specified process to zero. This essentially swaps the process out of physical RAM memory.
</dd>
<dt>
<i>dwMaximumWorkingSetSize</i></dt>
<dd>
Specifies a maximum working set size for the process. The virtual memory manager attempts to keep no more than this much memory resident in the process whenever the process is active and memory is in short supply. 
<p>
If both <i>dwMinimumWorkingSetSize</i> and <i>dwMaximumWorkingSetSize</i> have the value 0xffffffff, the function temporarily trims the working set of the specified process to zero. This essentially swaps the process out of physical RAM memory.

</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is nonzero.</p>
<p>
If the function fails, the return value is zero. Call <b>GetLastError</b> to obtain extended error information.</p>
<h4>Remarks</h4>
<p>
The working set of the specified process can be emptied by specifying the value 0xffffffff for both the minimum and maximum working set sizes.</p>
<p>
If the values of either <i>dwMinimumWorkingSetSize</i> or <i>dwMaximumWorkingSetSize</i> are greater than the process' current working set sizes, the specified process must have the SE_INC_BASE_PRIORITY_NAME privilege. Users in the Administrators and Power Users groups generally have this privilege. For more information about security privileges, see <a href="accctrl_42pf.htm">Privileges</a>. </p>
<p>
The operating system allocates working set sizes on a first-come, first-served basis. For example, if an application successfully sets 40 megabytes as its minimum working set size on a 64-megabyte system, and a second application requests a 40-megabyte working set size, the operating system denies the second application's request. </p>
<p>
Using the <b>SetProcessWorkingSetSize</b> function to set an application's minimum and maximum working set sizes does not guarantee that the requested memory will be reserved, or that it will remain resident at all times. When the application is idle, or a low-memory situation causes a demand for memory, the operating system can reduce the application's working set. An application can use the <b>VirtualLock</b> function to lock ranges of the application's virtual address space in memory; however, that can potentially degrade the performance of the system.</p>
<p>
When you increase the working set size of an application, you are taking away physical memory from the rest of the system. This can degrade the performance of other applications and the system as a whole. It can also lead to failures of operations that require physical memory to be present; for example, creating processes, threads, and kernel pool. Thus, you must use the <b>SetProcessWorkingSetSize</b> function carefully. You must always consider the performance of the whole system when you are designing an application. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.5 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winbase.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use kernel32.lib.</p>
<h4>See Also</h4>
<p>
<a href="prothred_86sz.htm">Processes and Threads Overview</a>, <a href="prothred_3mgj.htm">Process and Thread Functions</a>, <a href="prothred_5dnp.htm"><b>GetProcessWorkingSetSize</b></a>, <a href="memman_3tt7.htm"><b>VirtualLock</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
