<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CheckSumMappedFile</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_checksummappedfile"></a>CheckSumMappedFile</h1>
<p>
The <b>CheckSumMappedFile</b> function computes the checksum of the specified image file.</p>
<pre><code><b>PIMAGE_NT_HEADERS CheckSumMappedFile(
  IN LPVOID</b><i> BaseAddress</i><b>,  </b>
<b>  IN DWORD</b><i> FileLength</i><b>,    </b>
<b>  OUT LPDWORD</b><i> HeaderSum</i><b>,  </b>
<b>  OUT LPDWORD</b><i> CheckSum    </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>BaseAddress</i></dt>
<dd>
Specifies the base address of the mapped file. This value is obtained by calling the <a href="fmap3_8p9h.htm"><b>MapViewOfFile</b></a> function<i>.</i></dd>
<dt>
<i>FileLength</i></dt>
<dd>
Specifies the length of the file, in bytes.</dd>
<dt>
<i>HeaderSum</i></dt>
<dd>
Pointer to a variable that receives the original checksum from the image file, or zero if there is an error.</dd>
<dt>
<i>CheckSum</i></dt>
<dd>
Pointer to the variable that receives the computed checksum.
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is a pointer to the <b>IMAGE_NT_HEADERS</b>  structure contained in the mapped image.</p>
<p>
If the function fails, the return value is NULL. To retrieve extended error information, call <a href="errors_3uwi.htm"><b>GetLastError</b></a>.</p>
<h4>Remarks</h4>
<p>
The <b>CheckSumMappedFile</b> function computes a new checksum for the file and returns it in the <i>CheckSum</i> parameter. This function is used by any application that creates or modifies an executable image. Checksums are required for Windows NT kernel mode drivers and some system DLLs. The linker computes the original checksum at link time, if you use the appropriate linker switch. For more details, see your linker documentation.</p>
<p>
It is recommended that all images have valid checksums. It is the caller's responsibility to place the newly computed checksum into the mapped image and update the on-disk image of the file.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 4.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later. Available as a redistributable for Windows 95.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in imagehlp.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use imagehlp.lib.</p>
<h4>See Also</h4>
<p>
<a href="imgehlp1_3hzz.htm">PE Image Helper (ImageHlp) Overview</a>, <a href="imgehlp1_9coj.htm">ImageHlp Image Modification Functions</a>, <a href="imgehlp1_1l7x.htm"><b>MapFileAndCheckSum</b></a>, <a href="fmap3_8p9h.htm"><b>MapViewOfFile</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
