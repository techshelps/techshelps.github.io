<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Scheduling Priorities</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_scheduling_priorities"></a>Scheduling Priorities</h3>
<p>
Each thread is assigned a scheduling priority. The priority levels range from zero (lowest priority) to 31 (highest priority). Only the zero-page thread can have a priority of zero. The zero-page thread is a system thread. </p>
<p>
The priority of each thread is determined by the following criteria: 
<ul>
<li>
The priority class of its process </li>
<li>
The priority level of the thread within the priority class of its process </li>
</ul>
<p>
The priority class and priority level are combined to form the <i>base priority</i> of a thread. </p>
<h4>Priority Class</h4>
<p>
Each process belongs to one of the following priority classes: </p>
<p class=indent1>
IDLE_PRIORITY_CLASS<br>
NORMAL_PRIORITY_CLASS<br>
HIGH_PRIORITY_CLASS<br>
REALTIME_PRIORITY_CLASS</p>
<p>
By default, the priority class of a process is NORMAL_PRIORITY_CLASS. Use the <a href="prothred_9dpv.htm"><b>CreateProcess</b></a> function to specify the priority class of a child process when you create it. Use <a href="prothred_9z1v.htm"><b>SetPriorityClass</b></a> to change the priority class of a process and <a href="prothred_83sj.htm"><b>GetPriorityClass</b></a> to determine the current priority class of a process. </p>
<p>
Processes that monitor the system, such as screen savers or applications that periodically update a display, should use IDLE_PRIORITY_CLASS. This prevents the threads of this process, which do not have high priority, from interfering with higher priority threads. </p>
<p>
Use HIGH_PRIORITY_CLASS with care. If a thread runs at the highest priority level for extended periods, other threads in the system will not get processor time. If several threads are set at high priority at the same time, the threads lose their effectiveness. The high-priority class should be reserved for threads that must respond to time-critical events. If your application performs one task that requires the high-priority class while the rest of its tasks are normal priority, use <a href="prothred_9z1v.htm"><b>SetPriorityClass</b></a> to raise the priority class of the application temporarily; then reduce it after the time-critical task has been completed. Another strategy is to create a high-priority process that has all of its threads blocked most of the time, awakening threads only when critical tasks are needed. The important point is that a high-priority thread should execute for a brief time, and only when it has time-critical work to perform. </p>
<p>
You should almost never use REALTIME_PRIORITY_CLASS, because this interrupts system threads that manage mouse input, keyboard input, and background disk flushing. This class can be appropriate for applications that "talk" directly to hardware or that perform brief tasks that should have limited interruptions.  </p>
<h4>Priority Level</h4>
<p>
The following are priority levels within each priority class </p>
<p class=indent1>
THREAD_PRIORITY_IDLE<br>
THREAD_PRIORITY_LOWEST<br>
THREAD_PRIORITY_BELOW_NORMAL<br>
THREAD_PRIORITY_NORMAL<br>
THREAD_PRIORITY_ABOVE_NORMAL<br>
THREAD_PRIORITY_HIGHEST<br>
THREAD_PRIORITY_TIME_CRITICAL</p>
<p>
All threads are created using THREAD_PRIORITY_NORMAL. This means that the thread priority is the same as the process priority class. After you create a thread, use the <a href="prothred_9f5l.htm"><b>SetThreadPriority</b></a> function to adjust its priority relative to other threads in the process. </p>
<p>
A typical strategy is to use THREAD_PRIORITY_ABOVE_NORMAL or THREAD_PRIORITY_HIGHEST for the process's input thread, to ensure that the application is responsive to the user. Background threads, particularly those that are processor intensive, can be set to THREAD_PRIORITY_BELOW_NORMAL or THREAD_PRIORITY_LOWEST, to ensure that they can be preempted when necessary. However, if you have a thread waiting for another thread with a lower priority to complete some task, be sure to block the execution of the waiting high-priority thread. To do this, use a <a href="synchro_5vqr.htm">wait function</a>, <a href="synchro_2a2b.htm">critical section</a>, or the <a href="prothred_7jxs.htm"><b>Sleep</b></a> function, <a href="prothred_0o8o.htm"><b>SleepEx</b></a>, or <a href="prothred_30h0.htm"><b>SwitchToThread</b></a> function. This is preferable to having the thread execute a loop. Otherwise, the process may become deadlocked, because the thread with lower priority is never scheduled. </p>
<p>
To determine the current priority level of a thread, use the <a href="prothred_9uk9.htm"><b>GetThreadPriority</b></a> function. </p>
<h4>Base Priority</h4>
<p>
The priority level of a thread is determined by both the priority class of its process and its priority level. The priority class and priority level are combined to form the <i>base priority</i> of each thread. </p>
<p>
The following table shows the base priority levels for combinations of priority class and priority value. </p>
<table cellspacing=4 cols=3>
<tr valign=top>
<th align=left width=8%></th>
<th align=left width=41%>Process Priority Class</th>
<th align=left width=51%>Thread Priority Level</th>
</tr>
<tr valign=top>
<td width=8%>1</td>
<td width=41%>IDLE_PRIORITY_CLASS, NORMAL_PRIORITY_CLASS, or HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_IDLE</td>
</tr>
<tr valign=top>
<td width=8%>2</td>
<td width=41%>IDLE_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_LOWEST</td>
</tr>
<tr valign=top>
<td width=8%>3</td>
<td width=41%>IDLE_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_BELOW_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>4</td>
<td width=41%>IDLE_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>5</td>
<td width=41%>Background NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_LOWEST</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>IDLE_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_ABOVE_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>6</td>
<td width=41%>Background NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_BELOW_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>IDLE_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_HIGHEST</td>
</tr>
<tr valign=top>
<td width=8%>7</td>
<td width=41%>Foreground NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_LOWEST</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>Background NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>8</td>
<td width=41%>Foreground NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_BELOW_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_ABOVE_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>9</td>
<td width=41%>Foreground NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_HIGHEST</td>
</tr>
<tr valign=top>
<td width=8%>10</td>
<td width=41%>Foreground NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_ABOVE_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>11</td>
<td width=41%>HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_LOWEST</td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>Foreground NORMAL_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_HIGHEST</td>
</tr>
<tr valign=top>
<td width=8%>12</td>
<td width=41%>HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_BELOW_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>13</td>
<td width=41%>HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>14</td>
<td width=41%>HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_ABOVE_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>15</td>
<td width=41%>IDLE_PRIORITY_CLASS, NORMAL_PRIORITY_CLASS, or HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_TIME_CRITICAL </td>
</tr>
<tr valign=top>
<td width=8%></td>
<td width=41%>HIGH_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_HIGHEST</td>
</tr>
<tr valign=top>
<td width=8%>16</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_IDLE</td>
</tr>
<tr valign=top>
<td width=8%>22</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_LOWEST</td>
</tr>
<tr valign=top>
<td width=8%>23</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_BELOW_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>24</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>25</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_ABOVE_NORMAL</td>
</tr>
<tr valign=top>
<td width=8%>26</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_HIGHEST</td>
</tr>
<tr valign=top>
<td width=8%>31</td>
<td width=41%>REALTIME_PRIORITY_CLASS</td>
<td width=51%>THREAD_PRIORITY_TIME_CRITICAL</td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
