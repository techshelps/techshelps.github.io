<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>GetFileSecurity</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_getfilesecurity"></a>GetFileSecurity</h1>
<p>
The <b>GetFileSecurity</b> function obtains specified information about the security of a file or directory. The information obtained is constrained by the caller's access rights and privileges. </p>
<pre><code><b>BOOL GetFileSecurity(
  LPCTSTR</b><i> lpFileName</i><b>,       </b>// address of string for file name
<b>  SECURITY_INFORMATION</b><i> RequestedInformation</i><b>,</b>
<b>                            </b>// requested information
<b>  PSECURITY_DESCRIPTOR</b><i> pSecurityDescriptor</i><b>,</b>
<b>                            </b>// address of security descriptor
  <b>DWORD</b> <i>nLength</i><b>,</b>            // size of security descriptor buffer
<b>  LPDWORD</b><i> lpnLengthNeeded</i>   // address of required size of buffer
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>lpFileName</i></dt>
<dd>
Points to a null-terminated string specifying the file or directory for which security information is retrieved. </dd>
<dt>
<i>RequestedInformation</i></dt>
<dd>
Specifies a <a href="accctrl_9f8y.htm"><b>SECURITY_INFORMATION</b></a> value that identifies the security information being requested. </dd>
<dt>
<i>pSecurityDescriptor</i></dt>
<dd>
Points to a buffer that receives a copy of the security descriptor of the object specified by the <i>lpFileName</i> parameter. The calling process must have the right to view the specified aspects of the object's security status. The <a href="accctrl_6i5u.htm"><b>SECURITY_DESCRIPTOR</b></a> structure is returned in self-relative format. </dd>
<dt>
<i>nLength</i></dt>
<dd>
Specifies the size, in bytes, of the buffer pointed to by the <i>pSecurityDescriptor</i> parameter. </dd>
<dt>
<i>lpnLengthNeeded</i></dt>
<dd>
Points to a variable the function sets to zero if the file descriptor is copied successfully. If the buffer is too small for the security descriptor, this variable receives the number of bytes required. If this variable's value is greater than that of the <i>nLength</i> parameter when the function returns, none of the security descriptor is copied to the buffer. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is nonzero.</p>
<p>
If the function fails, the return value is zero. To get extended error information, call <a href="errors_3uwi.htm"><b>GetLastError</b></a>. </p>
<h4>Remarks</h4>
<p>
To read the owner, group, or DACL from the security descriptor for the specified file or directory, the DACL for the file or directory must grant READ_CONTROL access to the caller or the caller must be the owner of the file or directory.</p>
<p>
To read the system access-control list (SACL) of a file or directory, the SE_SECURITY_NAME privilege must be enabled for the calling process.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winbase.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use advapi32.lib.<br>
<b>&nbsp;&nbsp;Unicode: </b>Implemented as Unicode and ANSI versions on Windows NT.</p>
<h4>See Also</h4>
<p>
<a href="acctrlow_0xik.htm">Low-Level Access-Control Overview</a>, <a href="acctrlow_6iyb.htm">Low-Level Access Control Functions</a>, <a href="acctrlow_2v09.htm"><b>GetKernelObjectSecurity</b></a>, <a href="accclsrv_87p5.htm"><b>GetPrivateObjectSecurity</b></a>, <a href="acctrlow_1czd.htm"><b>GetUserObjectSecurity</b></a>, <a href="accctrl_6i5u.htm"><b>SECURITY_DESCRIPTOR</b></a>, <a href="accctrl_9f8y.htm"><b>SECURITY_INFORMATION</b></a>, <a href="acctrlow_9kvt.htm"><b>SetFileSecurity</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
