<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Writing to a Mailslot</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_writing_to_a_mailslot"></a>Writing to a Mailslot</h2>
<p>
Writing to a mailslot is similar to writing to a standard disk file. The following code uses the <a href="filesio_7wmd.htm"><b>CreateFile</b></a>, <a href="filesio_3kkl.htm"><b>WriteFile</b></a>, and <a href="handobj_289x.htm"><b>CloseHandle</b></a> functions to put a short message in a mailslot. The message is broadcast to every computer in the primary domain of the system. </p>
<pre><code>LPSTR lpszMessage = "Message for sample_mailslot in primary domain."; 
BOOL fResult; 
HANDLE hFile; 
DWORD cbWritten; 
 
hFile = CreateFile("\\\\*\\mailslot\\sample_mailslot", 
    GENERIC_WRITE, 
    FILE_SHARE_READ,  // required to write to a mailslot 
    (LPSECURITY_ATTRIBUTES) NULL, 
    OPEN_EXISTING, 
    FILE_ATTRIBUTE_NORMAL, 
    (HANDLE) NULL); 
 
if (hFile == INVALID_HANDLE_VALUE) 
{ 
    ErrorHandler(hwnd, "Primary domain"); // local error handler 
    return FALSE; 
} 
 
fResult = WriteFile(hFile, 
    lpszMessage, 
    (DWORD) lstrlen(lpszMessage) + 1,  // include terminating null 
    &amp;cbWritten, 
    (LPOVERLAPPED) NULL); 
 
if (!fResult) 
{ 
    ErrorHandler(hwnd, "WriteFile"); 
    return FALSE; 
} 
 
TextOut(hdc, 10, 10, "WriteFile successful.", 21); 
 
fResult = CloseHandle(hFile); 
 
if (!fResult) 
{ 
    ErrorHandler(hwnd, "CloseHandle"); 
    return FALSE; 
} 
 
TextOut(hdc, 10, 30, "CloseHandle successful.", 23); 
return TRUE; 
 </code></pre>
<p>
Messages broadcast to a domain must be no longer than 400 bytes. Messages that are not broadcast should be smaller than 64 kilobytes. There is no limit to the number of messages that can be sent to a mailslot. </p>
<p>&nbsp;</p></body>
</HTML>
