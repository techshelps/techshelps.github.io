<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Asynchronous Procedure Calls</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_asynchronous_procedure_calls"></a>Asynchronous Procedure Calls</h2>
<p>
An asynchronous procedure call (APC) is a function that executes asynchronously in the context of a particular thread. When an APC is queued to a thread, the system issues a software interrupt. The next time the thread is scheduled, it will run the APC function. APCs made by the system are called "kernel-mode APCs." APCs made by an application are called "user-mode APCs." A thread must be in an alertable state to run a user-mode APC.</p>
<p>
Each thread has its own APC queue. An application queues an APC to a thread by calling the <a href="synchro_3dk3.htm"><b>QueueUserAPC</b></a> function. The calling thread specifies the address of an APC function in the call to <b>QueueUserAPC</b>. The queuing of an APC is a request for the thread to call the APC function.</p>
<p>
When a user-mode APC is queued, the thread to which it is queued is not directed to call the APC function unless it is in an alertable state. A thread enters an alertable state when it calls the <a href="prothred_0o8o.htm"><b>SleepEx</b></a>, <a href="synchro_5h2s.htm"><b>SignalObjectAndWait</b></a>, <a href="synchro_6lh4.htm"><b>MsgWaitForMultipleObjectsEx</b></a>, <a href="synchro_5lbs.htm"><b>WaitForMultipleObjectsEx</b></a>, or <a href="synchro_5yrc.htm"><b>WaitForSingleObjectEx</b></a> function. Note that you can not use <b>WaitForSingleObjectEx</b> to wait on the handle to the object for which the APC is queued. Otherwise, when the asynchronous operation is completed, the handle is set to the signaled state and the thread is no longer in an alertable wait state, so the APC function will not be executed. However, the APC is still queued, so the APC function will be executed if you call another alertable wait function. </p>
<p>
Note that the <a href="filesio_0660.htm"><b>ReadFileEx</b></a>, <a href="synchro_6f1u.htm"><b>SetWaitableTimer</b></a>, and <a href="filesio_8r08.htm"><b>WriteFileEx</b></a> functions are implemented using an APC as the completion notification callback mechanism.</p>
<p>&nbsp;</p></body>
</HTML>
