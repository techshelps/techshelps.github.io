<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FAT Mirroring</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win95_fat_mirroring"></a>FAT Mirroring</h1>
<p>
On all FAT drives, there may be multiple copies of the FAT. If an error occurs reading the primary copy, the file system will attempt to read from the backup copies. On FAT16 and FAT12 drives, the first FAT is always the primary copy and any modifications will automatically be written to all copies. However, on FAT32 drives, FAT mirroring can be disabled and a FAT other than the first one can be the primary (or "active") copy of the FAT. </p>
<p>
Mirroring is enabled by clearing bit 0x0080 in the <b>extdpb_flags</b> member of a FAT32 Drive Parameter Block (DPB) structure, <b>DPB (FAT32)</b>. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td colspan=2 width=100%><b>When Enabled (bit 0x0080 clear)</b> </td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>With mirroring enabled, whenever a FAT sector is written, it will also be written to every other FAT. Also, a mirrored FAT sector can be read from any FAT. <p>
A FAT32 drive with multiple FATs will behave the same as FAT16 and FAT12 drives with multiple FATs. That is, the multiple FATs are backups of each other. </p>
</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%><b>When Disabled (bit 0x0080 set)</b> </td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>With mirroring disabled, only one of the FATs is active. The active FAT is the one specified by bits 0 through 3 of the <b>extdpb_flags</b> member of <b>DPB (FAT32)</b>. The other FATs are ignored. <p>
Disabling mirroring allows better handling of a drive with a bad sector in one of the FATs. If a bad sector exists, access to the damaged FAT can be completely disabled. Then, a new FAT can be built in one of the inactive FATs and then made accessible by changing the active FAT value in <b>extdpb_flags</b>. </p>
</td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
