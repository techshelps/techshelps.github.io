<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Interrupt 21h Function 440Dh Minor Code 6Ch</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win95_interrupt_21h_function_440dh_minor_code_6ch"></a>Interrupt 21h Function 440Dh Minor Code 6Ch</h1>
<p>
Polls the state of the access flag on a volume to determine if a write operation (for example, deleting or renaming a file or writing to a file) or a new file mapping has occurred since the last poll. </p>
<pre><code>mov ax, 440Dh        ; generic IOCTL
mov bl, DriveNum     ; see below
mov ch, 08h          ; device category (must be 08h)
mov cl, 6Ch          ; Get Lock Flag State
int 21h

jc error
mov [AccessFlag], ax  ; state of access flag
</code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>DriveNum</i></dt>
<dd>
Drive to poll. This parameter can be 0 for the default drive, 1 for A, 2 for B, and so on.
</dd>
</dl>
<h4>Return Value</h4>
<p>
Clears the carry flag and sets the AX register to one of the following values if successful:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=6%>0</td>
<td width=94%>No write operations or file mappings have occurred since the last poll.</td>
</tr>
<tr valign=top>
<td width=6%>1</td>
<td width=94%>A write operation has occurred since the last poll (clears the volume access flag).</td>
</tr>
<tr valign=top>
<td width=6%>2</td>
<td width=94%>A file mapping has occurred since the last poll, or a 32-bit Windows-based DLL or executable has been opened (clears the volume access flag).</td>
</tr>
</table><br>
<p>
Otherwise, the function sets the carry flag and sets the AX register to an error value. </p>
<h4>Remarks</h4>
<p>
Only the current lock owner may poll the access flag. The system fails other processes with ERROR_ACCESS_DENIED error value. Write operations performed by the lock owner do not cause a change in the state of the access flag.</p>
<p>
When a lock is obtained that allows write operations or new file mappings, the system sets a flag whenever one of these operations happens on the volume. If a write operation or new file mapping has occurred since the last poll, Get Lock Flag State returns 1 or 2 respectively in the AX register and clears the volume access flag. If the swap file has grown or shrunk since the last poll, Get Lock Flag State returns 1. Note that write operations to the swap file that do not cause a change in size do not cause a change in the state of the access flag. If a 32-bit Windows-based DLL or executable has been opened since the last poll, Get Lock Flag State returns 2.</p>
<p>&nbsp;</p></body>
</HTML>
