<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Interrupt 21h Function 7143h</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win95_interrupt_21h_function_7143h"></a>Interrupt 21h Function 7143h</h1>
<p>
Retrieves or sets the file attributes, gets the compressed file size, or retrieves or sets the date and time for the given file.</p>
<pre><code>mov ax, 7143h         ; Get or Set File Attributes
mov bl, Action        ; see below
mov cx, Attributes    ; see below
mov di, Date          ; see below
mov cx, Time          ; see below
mov si, MilliSeconds  ; see below
mov dx, seg Filename  ; see below
mov ds, dx
mov dx, offset Filename
int 21h

jc  error
; see below for return values 
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Action</i></dt>
<dd>
Action to take. This parameter can be one of the following values:
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=12%>0</td>
<td width=88%>Retrieve attributes.</td>
</tr>
<tr valign=top>
<td width=12%>1</td>
<td width=88%>Set specified attributes.</td>
</tr>
<tr valign=top>
<td width=12%>2</td>
<td width=88%>Get physical size of a compressed file.</td>
</tr>
<tr valign=top>
<td width=12%>3</td>
<td width=88%>Set last write date/time.</td>
</tr>
<tr valign=top>
<td width=12%>4</td>
<td width=88%>Get last write date/time.</td>
</tr>
<tr valign=top>
<td width=12%>5</td>
<td width=88%>Set last access date.</td>
</tr>
<tr valign=top>
<td width=12%>6</td>
<td width=88%>Get last access date.</td>
</tr>
<tr valign=top>
<td width=12%>7</td>
<td width=88%>Set creation date/time.</td>
</tr>
<tr valign=top>
<td width=12%>8</td>
<td width=88%>Get creation date/time.</td>
</tr>
</table><br>

</dd>
<dt>
<i>Attributes</i></dt>
<dd>
File attributes to set, which are used only if <i>Action</i> is 1. This parameter can be a combination of these values:

<table cellspacing=4 cols=2>
<tr valign=top>
<td colspan=2 width=100%>_A_NORMAL (0000h)</td>
</tr>
<tr valign=top>
<td width=20%></td>
<td width=80%>The file can be read from or written to. This value is valid only if used alone.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>_A_RDONLY (0001h)</td>
</tr>
<tr valign=top>
<td width=20%></td>
<td width=80%>The file can be read from, but not written to.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>_A_HIDDEN (0002h)</td>
</tr>
<tr valign=top>
<td width=20%></td>
<td width=80%>The file is hidden and does not appear in an ordinary directory listing.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>_A_SYSTEM (0004h)</td>
</tr>
<tr valign=top>
<td width=20%></td>
<td width=80%>The file is part of the operating system or is used exclusively by it.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>_A_ARCH (0020h)</td>
</tr>
<tr valign=top>
<td width=20%></td>
<td width=80%>The file is an archive file. Applications use this value to mark files for backup or removal.</td>
</tr>
</table><br>

</dd>
<dt>
<i>Time</i></dt>
<dd>
New time to set, which is used only if <i>Action</i> is 3 (set last write date/time) or 7 (set creation date/time) The time is a packed 16-bit value with the following form:

<table cellspacing=4 cols=2>
<tr valign=top>
<td width=13%><b>Bits</b></td>
<td width=87%><b>Contents</b></td>
</tr>
<tr valign=top>
<td width=13%>0–4</td>
<td width=87%>Second divided by 2</td>
</tr>
<tr valign=top>
<td width=13%>5–10</td>
<td width=87%>Minute (0–59)</td>
</tr>
<tr valign=top>
<td width=13%>11–15</td>
<td width=87%>Hour (0–23 on a 24-hour clock)</td>
</tr>
</table><br>

</dd>
<dt>
<i>Date</i></dt>
<dd>
New date to set, which is used only if <i>Action</i> is 3 (set last write date/time), 5 (set last access date), or 7 (set creation date/time). The date is a packed 16-bit value with the following form:

<table cellspacing=4 cols=2>
<tr valign=top>
<td width=13%><b>Bits</b></td>
<td width=87%><b>Contents</b></td>
</tr>
<tr valign=top>
<td width=13%>0–4</td>
<td width=87%>Day of the month (1–31)</td>
</tr>
<tr valign=top>
<td width=13%>5–8</td>
<td width=87%>Month (1 = January, 2 = February, and so on)</td>
</tr>
<tr valign=top>
<td width=13%>9–15</td>
<td width=87%>Year offset from 1980 (that is, add 1980 to get the actual year)</td>
</tr>
</table><br>

</dd>
<dt>
<i>MilliSeconds</i></dt>
<dd>
Number of 10 millisecond intervals in 2 seconds to add to the MS-DOS time. The number can be a value in the range 0 to 199. This value is only used if <i>Action</i> is 7 (set creation date/time).</dd>
<dt>
<i>Filename</i></dt>
<dd>
Address of a null-terminated string specifying the name of the file to retrieve or set attributes for. Long filenames are allowed.
</dd>
</dl>
<h4>Return Value</h4>
<p>
Clears the carry flag if successful.</p>
<p>
If <i>Action</i> is zero (retrieve attributes), the file attributes returned in the CX register may be a combination of the following values :</p>
<table cellspacing=4 cols=1>
<tr valign=top>
<td width=100%>_A_NORMAL (0000h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_RDONLY (0001h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_HIDDEN (0002h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_SYSTEM (0004h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_VOLID (0008h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_SUBDIR (0010h)</td>
</tr>
<tr valign=top>
<td width=100%>_A_ARCH (0020h)</td>
</tr>
</table><br>
<p>
If <i>Action</i> is 2 (get physical size of a compressed file), the size, in bytes, of the compressed file is returned in DX:AX. This value is the physical size of the compressed file — that is, the actual number of bytes that the compressed file occupies on disk.</p>
<p>
If <i>Action</i> is 4 (get last write date/time) or 8 (get creation date/time), the CX register contains the time as a packed 16-bit value with the following form: </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=15%>Bits</th>
<th align=left width=85%>Contents</th>
</tr>
<tr valign=top>
<td width=15%>0–4</td>
<td width=85%>Second divided by 2</td>
</tr>
<tr valign=top>
<td width=15%>5–10</td>
<td width=85%>Minute (0–59)</td>
</tr>
<tr valign=top>
<td width=15%>11–15</td>
<td width=85%>Hour (0–23 on a 24-hour clock)</td>
</tr>
</table><br>
<p>
If <i>Action</i> is 4 (get last write date/time), 6 (get last access date), or 8 (get creation date/time), the DI register contains the date as a packed 16-bit value with the following form: </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=16%>Bits</th>
<th align=left width=84%>Contents</th>
</tr>
<tr valign=top>
<td width=16%>0–4</td>
<td width=84%>Day of the month (1–31)</td>
</tr>
<tr valign=top>
<td width=16%>5–8</td>
<td width=84%>Month (1 = January, 2 = February, and so on)</td>
</tr>
<tr valign=top>
<td width=16%>9–15</td>
<td width=84%>Year offset from 1980 (that is, add 1980 to get the actual year)</td>
</tr>
</table><br>
<p>
If <i>Action</i> is 8 (get creation date/time), the SI register contains the number of 10 millisecond intervals in 2 seconds to add to the MS-DOS time. The number can be a value in the range of 0 to 199.</p>
<p>
If the function is not successful, it sets the carry flag and sets the AX register to an error value.</p>
<p>&nbsp;</p></body>
</HTML>
