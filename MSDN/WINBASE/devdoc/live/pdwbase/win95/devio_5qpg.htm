<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Checking for Asynchronous Operations</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_checking_for_asynchronous_operations_pt"></a>Checking for Asynchronous Operations</h2>
<p>
A VxD can determine whether an application has requested an asynchronous operation by checking the <b>lpoOverlapped</b> member of the <a href="95str_42gi.htm"><b>DIOCParams</b></a> structure. If <b>lpoOverlapped</b> specifies the address of an <a href="../synchro_8tf6.htm"><b>OVERLAPPED</b></a> structure, the application has requested an asynchronous operation. In that case, the VxD should return  – 1 in the EAX register and then process the specified control code. </p>
<p>
The operating system does not take any steps to make the application's memory available to the VxD at all times (in all contexts) for asynchronous operations. When implementing asynchronous operations, the VxD must use the appropriate virtual machine manager (VMM) services, such as <b>LinPageLock</b> with the PAGEMAPGLOBAL value, to make the application's memory pages available across contexts, including access to the <b>OVERLAPPED</b> structure. </p>
<p>
When the VxD finishes processing the control code, it must notify the application by calling the <a href="95msg_0bfp.htm"><b>VWIN32_DIOCCompletionRoutine</b></a> service provided by VWIN32.VXD. The EBX register must contain the value of the <b>Internal</b> member of the <b>OVERLAPPED</b> structure. This member is reserved for operating system use only. Also, if the VxD copies any data to the buffer specified by the <b>lpvOutBuffer</b> member of the <a href="95str_42gi.htm"><b>DIOCParams</b></a> structure, the VxD must specify the count of bytes copied to the buffer in the <b>InternalHigh</b> member of <b>OVERLAPPED</b>. The remaining members of <b>overlapped</b>, <b>Offset</b> and <b>OffsetHigh</b>, can be used for developer-defined data. </p>
<p>
Essentially, the <b>VWIN32_DIOCCompletionRoutine </b>service helps signal the event identified by the <b>hEvent</b> member of the <a href="../synchro_8tf6.htm"><b>OVERLAPPED</b></a> structure. The application monitors the event to determine when the asynchronous operation is completed. </p>
<p>&nbsp;</p></body>
</HTML>
