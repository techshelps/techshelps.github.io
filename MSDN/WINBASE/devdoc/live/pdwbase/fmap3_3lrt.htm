<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Sharing Files and Memory</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_sharing_files_and_memory"></a>Sharing Files and Memory</h2>
<p>
File mapping can be used to share a file or memory between two or more processes. To share a file or memory, all of the processes must use the name or the handle of the <i>same</i> file-mapping object. </p>
<p>
To share a file, the first process creates or opens a file by using the <a href="filesio_7wmd.htm"><b>CreateFile</b></a> function. Next, it creates a file-mapping object by using the <a href="fmap3_79wn.htm"><b>CreateFileMapping</b></a> function, specifying the file handle and a name for the file-mapping object. The names of event, semaphore, mutex, and file-mapping objects share the same name space. Therefore, the <b>CreateFileMapping </b>and <a href="fmap3_1h7r.htm"><b>OpenFileMapping</b></a> functions fail if they specify a name that is in use by an object of another type.</p>
<p>
To share memory that is not associated with a file, a process must use the <b>CreateFileMapping</b> function and specify (HANDLE)0xFFFFFFFF as the <i>hfile</i> parameter instead of an existing file handle. The corresponding file-mapping object accesses memory backed by the system paging file. You must specify a size greater than zero when you specify an <i>hfile</i> of (HANDLE)0xFFFFFFFF in a call to <b>CreateFileMapping</b>. </p>
<p>
The easiest way for other processes to obtain a handle of the file-mapping object created by the first process is to use the <a href="fmap3_1h7r.htm"><b>OpenFileMapping</b></a> function and specify the object's name. This is referred to as <i>named shared memory</i>. If the file-mapping object does not have a name, the process must obtain a handle to it through inheritance or duplication. For more information on inheritance and duplication, see <a href="prothred_6iw5.htm">Inheritance</a>.</p>
<p>
Processes that share files or memory must create file views by using the <a href="fmap3_8p9h.htm"><b>MapViewOfFile</b></a> or <a href="fmap3_2it4.htm"><b>MapViewOfFileEx</b></a> function. They must coordinate their access using semaphores, mutexes, events, or some other mutual exclusion technique. For more information, see <a href="synchro_4q3y.htm">Synchronization</a>. </p>
<p>
A shared file-mapping object will not be destroyed until all processes that use it close their handles to it by using the <a href="handobj_289x.htm"><b>CloseHandle</b></a> function.</p>
<p>&nbsp;</p></body>
</HTML>
