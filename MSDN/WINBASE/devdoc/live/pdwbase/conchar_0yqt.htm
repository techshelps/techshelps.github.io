<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creation of a Console</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_creation_of_a_console"></a>Creation of a Console</h3>
<p>
The system creates a new console when it starts a <i>console process</i>, a character-mode process whose entry point is the <b>main</b> function. For example, the system creates a new console when it starts the command processor. When the command processor starts a new console process, the user can specify whether the system creates a new console for the new process or whether it inherits the command processor's console. A process can create a console by using one of the following methods: 
<ul>
<li>
A graphical user interface (GUI) or console process that is not currently attached to a console can use the <a href="conchar_6smd.htm"><b>AllocConsole</b></a> function to create a new console. </li>
<li>
A GUI or console process can use the <a href="prothred_9dpv.htm"><b>CreateProcess</b></a> function to create a new console process and specify a flag to tell the system to create a new console. </li>
</ul>
<p>
Typically, a process uses <b>AllocConsole</b> to create a console when an error occurs requiring interaction with the user. For example, a GUI process can create a console when an error occurs that prevents it from using its normal graphical interface, or a console process that does not normally interact with the user can create a console when an error makes it necessary. The process that calls <b>AllocConsole</b> must not be attached to an existing console. GUI processes are not attached to any console when they are created. A console process is not attached to a console if the DETACHED_PROCESS flag was specified in a call to <b>CreateProcess</b> when the process was created. A process can use the <a href="conchar_7i3p.htm"><b>FreeConsole</b></a> function to detach itself from an inherited console or from a console created by <b>AllocConsole</b>. </p>
<p>
A process can also create a console by specifying the CREATE_NEW_CONSOLE flag in a call to <b>CreateProcess</b>. This method creates a new console that is accessible to the child process but not to the parent process. Separate consoles enable both parent and child processes to interact with the user without conflict. If this flag is not specified when a console process is created, both processes are attached to the same console, and there is no guarantee that the correct process will receive the input intended for it. Applications can prevent confusion by creating child processes that do not inherit handles of the input buffer, or by enabling only one child process at a time to inherit an input buffer handle while preventing the parent process from reading console input until the child has finished. </p>
<p>
Creating a new console results in a new console window, as well as separate I/O screen buffers. The process associated with the new console uses the <a href="conchar_7k9x.htm"><b>GetStdHandle</b></a> function to get the handles of the new console's input and screen buffers. These handles enable the process to access the console. </p>
<p>
When a process uses <a href="prothred_9dpv.htm"><b>CreateProcess</b></a>, it can specify a <a href="prothred_7sdu.htm"><b>STARTUPINFO</b></a> structure, whose members control the characteristics of the first new console (if any) created for the child process. The <b>STARTUPINFO</b> structure specified in the call to <b>CreateProcess</b> affects a console created if the CREATE_NEW_CONSOLE flag is specified. It also affects a console created if the child process subsequently uses <a href="conchar_6smd.htm"><b>AllocConsole</b></a>. The following console characteristics can be specified: 
<ul>
<li>
The size, in character cells, and the location, in screen pixel coordinates, of the new console window</li>
<li>
The size, in character cells, of the new console's screen buffer</li>
<li>
The text and background color attributes of the new console's screen buffer</li>
<li>
The name appearing in the title bar of the new console's window</li>
</ul>
<p>
The system uses default values if the <a href="prothred_7sdu.htm"><b>STARTUPINFO</b></a> values are not specified. A child process can use the <a href="prothred_2x9r.htm"><b>GetStartupInfo</b></a> function to determine the values in its <b>STARTUPINFO</b> structure. </p>
<p>
A process cannot change the location of its console window on the screen, but the following console functions are available to set or retrieve the other properties specified in the <b>STARTUPINFO</b> structure. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Function</th>
<th align=left width=57%>Description</th>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_34dr.htm"><b>GetConsoleScreenBufferInfo</b></a></td>
<td width=57%>Retrieves the window size, screen buffer size, and color attributes.</td>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_84mn.htm"><b>SetConsoleWindowInfo</b></a></td>
<td width=57%>Changes the size of the console window.</td>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_7sv9.htm"><b>SetConsoleScreenBufferSize</b></a></td>
<td width=57%>Changes the size of the screen buffer.</td>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_2tid.htm"><b>SetConsoleTextAttribute</b></a></td>
<td width=57%>Sets the color attributes.</td>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_2b1h.htm"><b>SetConsoleTitle</b></a></td>
<td width=57%>Sets the console window title.</td>
</tr>
<tr valign=top>
<td width=43%><a href="conchar_6t45.htm"><b>GetConsoleTitle</b></a></td>
<td width=57%>Retrieves the console window title.</td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
