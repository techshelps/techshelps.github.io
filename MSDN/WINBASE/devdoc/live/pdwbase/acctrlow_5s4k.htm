<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MakeSelfRelativeSD</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_makeselfrelativesd"></a>MakeSelfRelativeSD</h1>
<p>
The <b>MakeSelfRelativeSD</b> function creates a security descriptor in self-relative format by using a security descriptor in absolute format as a template. </p>
<pre><code><b>BOOL MakeSelfRelativeSD(
  PSECURITY_DESCRIPTOR</b><i> pAbsoluteSecurityDescriptor</i><b>,</b>  
                             // address of absolute SD
<b>  PSECURITY_DESCRIPTOR</b><i> pSelfRelativeSecurityDescriptor</i><b>,</b>  
                             // address self-relative SD
  <b>LPDWORD</b> <i>lpdwBufferLength</i>   // address of SD size
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>pAbsoluteSecurityDescriptor</i></dt>
<dd>
Points to a <a href="accctrl_6i5u.htm"><b>SECURITY_DESCRIPTOR</b></a> structure in absolute format. The function creates a version of this security descriptor in self-relative format without modifying the original. </dd>
<dt>
<i>pSelfRelativeSecurityDescriptor</i></dt>
<dd>
Points to a buffer the function fills with a security descriptor in self-relative format. </dd>
<dt>
<i>lpdwBufferLength</i></dt>
<dd>
Points to a variable specifying the size of the buffer pointed to by the <i>pSelfRelativeSecurityDescriptor</i> parameter. If the buffer is not large enough for the security descriptor, the function fails and sets this variable to the minimum required size. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is nonzero.</p>
<p>
If the function fails, the return value is zero. To get extended error information, call <a href="errors_3uwi.htm"><b>GetLastError</b></a>. </p>
<h4>Remarks</h4>
<p>
A security descriptor in absolute format contains pointers to the information it contains, rather than containing the information itself. A security descriptor in self-relative format contains the information in a contiguous block of memory. In a self-relative security descriptor, a <b>SECURITY_DESCRIPTOR</b> structure always starts the information, but the security descriptor's other components can follow the structure in any order. Instead of using memory addresses, the components of the security descriptor are identified by offsets from the beginning of the security descriptor. This format is useful when an security descriptor must be stored on a floppy disk or transmitted by means of a communications protocol. </p>
<p>
A server that copies secured objects to various media can use the <b>MakeSelfRelativeSD</b> function to create a self-relative security descriptor from an absolute security descriptor and the <b>MakeAbsoluteSD</b> function to create an absolute security descriptor from a self-relative security descriptor. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winbase.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use advapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="acctrlow_0xik.htm">Low-Level Access-Control Overview</a>, <a href="acctrlow_6iyb.htm">Low-Level Access Control Functions</a>, <a href="acctrlow_5vok.htm"><b>MakeAbsoluteSD</b></a>, <a href="accctrl_6i5u.htm"><b>SECURITY_DESCRIPTOR</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
