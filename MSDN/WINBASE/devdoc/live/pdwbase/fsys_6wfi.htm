<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>GetVolumeInformation</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_getvolumeinformation"></a>GetVolumeInformation</h1>
<p>
The <b>GetVolumeInformation</b> function returns information about a file system and volume whose root directory is specified. </p>
<pre><code><b>BOOL GetVolumeInformation(
  LPCTSTR</b><i> lpRootPathName</i><b>,        </b>// address of root directory of the 
                                 // file system
<b>  LPTSTR</b><i> lpVolumeNameBuffer</i><b>,     </b>// address of name of the volume
<b>  DWORD</b><i> nVolumeNameSize</i><b>,         </b>// length of <i>lpVolumeNameBuffer</i>
<b>  LPDWORD</b><i> lpVolumeSerialNumber</i><b>,  </b>// address of volume serial number
<b>  LPDWORD</b><i> lpMaximumComponentLength</i><b>,</b>
<b>                                 </b>// address of system's maximum 
                                 // filename length
<b>  LPDWORD</b><i> lpFileSystemFlags</i><b>,     </b>// address of file system flags
<b>  LPTSTR</b><i> lpFileSystemNameBuffer</i><b>, </b>// address of name of file system
<b>  DWORD</b><i> nFileSystemNameSize</i>      // length of <i>lpFileSystemNameBuffer</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>lpRootPathName</i></dt>
<dd>
Pointer to a string that contains the root directory of the volume to be described. If this parameter is NULL, the root of the current directory is used. If this parameter is a UNC name, you must follow it with an additional backslash. For example, you would specify \\MyServer\MyShare as \\MyServer\MyShare\.</dd>
<dt>
<i>lpVolumeNameBuffer</i></dt>
<dd>
Pointer to a buffer that receives the name of the specified volume. </dd>
<dt>
<i>nVolumeNameSize</i></dt>
<dd>
Specifies the length, in characters, of the volume name buffer. This parameter is ignored if the volume name buffer is not supplied. </dd>
<dt>
<i>lpVolumeSerialNumber</i></dt>
<dd>
Pointer to a variable that receives the volume serial number. This parameter can be NULL if the serial number is not required. </dd>
<dt>
<i>lpMaximumComponentLength</i></dt>
<dd>
Pointer to a doubleword value that receives the maximum length, in characters, of a filename component supported by the specified file system. A filename component is that portion of a filename between backslashes. 
<p>
The value stored in variable pointed to by <b>*</b><i>lpMaximumComponentLength</i> is used to indicate that long names are supported by the specified file system. For example, for a FAT file system supporting long names, the function stores the value 255, rather than the previous 8.3 indicator. Long names can also be supported on systems that use the NTFS file system.
</dd>
<dt>
<i>lpFileSystemFlags</i></dt>
<dd>
Pointer to a doubleword that receives flags associated with the specified file system. This parameter can be any combination of the following flags, however, FS_FILE_COMPRESSION and FS_VOL_IS_COMPRESSED are mutually exclusive. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=49%>Value</th>
<th align=left width=51%>Meaning</th>
</tr>
<tr valign=top>
<td width=49%>FS_CASE_IS_PRESERVED</td>
<td width=51%>The file system preserves the case of filenames when it places a name on disk.</td>
</tr>
<tr valign=top>
<td width=49%>FS_CASE_SENSITIVE</td>
<td width=51%>The file system supports case-sensitive filenames.</td>
</tr>
<tr valign=top>
<td width=49%>FS_UNICODE_STORED_ON_DISK</td>
<td width=51%>The file system supports Unicode in filenames as they appear on disk.</td>
</tr>
<tr valign=top>
<td width=49%>FS_PERSISTENT_ACLS</td>
<td width=51%>The file system preserves and enforces ACLs. For example, NTFS preserves and enforces ACLs, and FAT does not. </td>
</tr>
<tr valign=top>
<td width=49%>FS_FILE_COMPRESSION</td>
<td width=51%>The file system supports file-based compression.</td>
</tr>
<tr valign=top>
<td width=49%>FS_VOL_IS_COMPRESSED</td>
<td width=51%>The specified volume is a compressed volume; for example, a DoubleSpace volume.</td>
</tr>
<tr valign=top>
<td width=49%>FILE_SUPPORTS_ENCRYPTION</td>
<td width=51%>The file system supports the Encrypted File System (EFS).</td>
</tr>
<tr valign=top>
<td width=49%>FILE_SUPPORTS_OBJECT_IDS</td>
<td width=51%>The file system supports object identifiers.</td>
</tr>
<tr valign=top>
<td width=49%>FILE_SUPPORTS_REPARSE_POINTS</td>
<td width=51%>The file system supports reparse points.</td>
</tr>
<tr valign=top>
<td width=49%>FILE_SUPPORTS_SPARSE_FILES</td>
<td width=51%>The file system supports sparse files.</td>
</tr>
<tr valign=top>
<td width=49%>FILE_VOLUME_QUOTAS</td>
<td width=51%>The file system supports disk quotas.</td>
</tr>
</table><br>

</dd>
<dt>
<i>lpFileSystemNameBuffer</i></dt>
<dd>
Pointer to a buffer that receives the name of the file system (such as FAT or NTFS). </dd>
<dt>
<i>nFileSystemNameSize</i></dt>
<dd>
Specifies the length, in characters, of the file system name buffer. This parameter is ignored if the file system name buffer is not supplied. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
If all the requested information is retrieved, the return value is nonzero.</p>
<p>
If not all the requested information is retrieved, the return value is zero. To get extended error information, call <a href="errors_3uwi.htm"><b>GetLastError</b></a>. </p>
<h4>Remarks</h4>
<p>
If you are attempting to obtain information about a floppy drive that does not have a floppy disk or a CD-ROM drive that does not have a compact disc, the system displays a message box asking the user to insert a floppy disk or a compact disc, respectively. To prevent the system from displaying this message box, call the <a href="errors_38px.htm"><b>SetErrorMode</b></a> function with SEM_FAILCRITICALERRORS.</p>
<p>
The FS_VOL_IS_COMPRESSED flag is the only indicator of volume-based compression. The file system name is not altered to indicate compression. This flag comes back set on a DoubleSpace volume, for example. With volume-based compression, an entire volume is either compressed or not compressed.</p>
<p>
The FS_FILE_COMPRESSION flag indicates whether a file system supports file-based compression. With file-based compression, individual files can be compressed or not compressed.</p>
<p>
The FS_FILE_COMPRESSION and FS_VOL_IS_COMPRESSED flags are mutually exclusive; both bits cannot come back set.</p>
<p>
The maximum component length value, stored in the <b>DWORD</b> variable pointed to by <i>lpMaximumComponentLength</i>, is the only indicator that a volume supports longer-than-normal FAT (or other file system) file names. The file system name is not altered to indicate support for long file names.</p>
<p>
The <a href="fsys_8tt1.htm"><b>GetCompressedFileSize</b></a> function obtains the compressed size of a file. The <a href="filesio_9pgz.htm"><b>GetFileAttributes</b></a> function can determine whether an individual file is compressed.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winbase.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use kernel32.lib.<br>
<b>&nbsp;&nbsp;Unicode: </b>Implemented as Unicode and ANSI versions on Windows NT.</p>
<h4>See Also</h4>
<p>
<a href="fsys_4jeb.htm">File Systems Overview</a>, <a href="fsys_419v.htm">File System Functions</a>, <a href="fsys_8tt1.htm"><b>GetCompressedFileSize</b></a>, <a href="filesio_9pgz.htm"><b>GetFileAttributes</b></a>, <a href="errors_38px.htm"><b>SetErrorMode</b></a>, <a href="filesio_66r0.htm"><b>SetVolumeLabel</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
