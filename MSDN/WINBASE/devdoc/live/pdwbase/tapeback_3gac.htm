<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Tape Input and Output</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_tape_input_and_output"></a>Tape Input and Output</h2>
<p>
The Win32 API provides several functions that applications can use to perform input and output (I/O) on a tape drive. Tape I/O is similar to I/O performed on a communications device. </p>
<p>
When performing tape I/O, some tape drives store tape firmware information in the first few blocks on a tape, typically using some portion of the first 100 blocks. Applications should not use those blocks. More specific information on this subject is available from individual tape system manufacturers. In general, an application that skips the first 100 blocks on a tape will avoid tape drive idiosyncrasies. </p>
<p>
The <a href="tapeback_3226.htm"><b>GetTapePosition</b></a> and <a href="tapeback_8jzi.htm"><b>SetTapePosition</b></a> functions retrieve and move the current tape position. The <a href="tapeback_7fmz.htm"><b>WriteTapemark</b></a> function writes a specified number of setmarks, filemarks, short filemarks, and long filemarks. The <a href="tapeback_7l2d.htm"><b>EraseTape</b></a> function erases all or part of a tape. </p>
<p>
The <a href="filesio_39id.htm"><b>ReadFile</b></a> and <a href="filesio_3kkl.htm"><b>WriteFile</b></a> functions read and write file data from and to the tape. The data is read and written in complete blocks. If the tape's block size is 512 bytes, all read and write operations must use buffers that are simple integer multiples of that block size: 512, 1024, 1536, 2048, and so on. Most, if not all, drives only allow a write operation after the tape is rewound or after a read operation produces an end-of-data error message. </p>
<p>
If <b>ReadFile</b> encounters a filemark, the data up to the filemark is read and the function fails. (The <a href="errors_3uwi.htm"><b>GetLastError</b></a> function returns an error code indicating the type of filemark that was encountered.) The operating system moves the tape past the filemark, and an application can call <b>ReadFile</b> again to continue reading. </p>
<p>
<b>ReadFile</b> and <b>WriteFile</b> read and write only the data stream. The <a href="tapeback_5t0k.htm"><b>BackupRead</b></a> and <a href="tapeback_3bl1.htm"><b>BackupWrite</b></a> functions read and write all the streams associated with a file. These include data, extended attributes, security, and alternative data streams. The security and alternate data streams are relevant only on the NTFS partition. </p>
<p>
The <a href="tapeback_1fhn.htm"><b>BackupSeek</b></a> function seeks forward in a file initially accessed by <b>BackupRead</b> or <b>BackupWrite</b>. This function enables an application to skip information that causes access errors. </p>
<p>
If an application needs to access only the file data, it should use <a href="filesio_39id.htm"><b>ReadFile</b></a> and <a href="filesio_3kkl.htm"><b>WriteFile</b></a>. These functions can also read alternative data streams if the streams were created by using the <a href="filesio_7wmd.htm"><b>CreateFile</b></a> function. </p>
<p>
A tape-backup application must use <b>BackupRead</b> and <b>BackupWrite</b> to copy all information pertaining to a file. However, these functions do not read or write file characteristics such as attributes, file creation time, and so on. Applications must use the file input and output functions, such as <a href="filesio_9pgz.htm"><b>GetFileAttributes</b></a> and <a href="filesio_9a2b.htm"><b>SetFileAttributes</b></a>, to retrieve and set those values. </p>
<p>&nbsp;</p></body>
</HTML>
