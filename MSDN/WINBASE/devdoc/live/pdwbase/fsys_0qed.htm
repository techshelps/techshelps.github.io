<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IDiskQuotaControl::FindUserName</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_idiskquotacontrol_findusername"></a>IDiskQuotaControl::FindUserName</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
Locates a specific entry in the volume quota information. The user's domain and account name are used as the search key. </p>
<pre><code><b>HRESULT FindUserName(
</b>  <b>LPCWSTR</b> <i>pszDomain</i><b>,</b> 
  <b>LPCWSTR</b> <i>pszName</i><b>,</b> 
  <b>PDISKQUOTA_USER</b> <i>*ppUser</i>
<b>);</b>
<b> </b></code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>pszDomain</i></dt>
<dd>
Pointer to the user's domain name string.</dd>
<dt>
<i>pszName</i></dt>
<dd>
Pointer to the user's account name string.</dd>
<dt>
<i>ppUser</i></dt>
<dd>
Pointer to receive the <a href="fsys_3noy.htm"><b>IDiskQuotaUser</b></a> interface pointer to the quota user object.</dd>
<dt>
<i>fNameResolution</i></dt>
<dd>
Indicates how the user account information is to be obtained. The volume's quota information identifies users by security identifier (SID). The user account information (such as domain name, account name, and full name) must be obtained from the network domain controller, or the local computer if it is not on a network. This parameter can be one of the following values.
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=32%>Value</th>
<th align=left width=68%>Meaning</th>
</tr>
<tr valign=top>
<td width=32%>DISKQUOTA_USERNAME_RESOLVE_NONE</td>
<td width=68%>Do not resolve user account information.</td>
</tr>
<tr valign=top>
<td width=32%>DISKQUOTA_USERNAME_RESOLVE_SYNC</td>
<td width=68%>Resolve user account information synchronously. <b>FindUserName</b> returns when the information has been resolved. If the information exists in the disk quota SID cache, it is returned immediately. Otherwise, the method must locate the information. This can take several seconds.</td>
</tr>
<tr valign=top>
<td width=32%>DISKQUOTA_USERNAME_RESOLVE_ASYNC</td>
<td width=68%>Resolve user account information asynchronously. <b>FindUserName</b> returns immediately. The caller must implement the <a href="fsys_83jn.htm"><b>IDiskQuotaEvents</b></a> interface to receive notification when the information is available. If the information was cached during a previous request, notification occurs as soon as the object is serviced. Otherwise, the method obtains the information from the network domain controller, then notifies <b>IDiskQuotaEvents</b>.</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Return Values</h4>
<p>
This method returns one of the following values. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Value</th>
<th align=left width=57%>Meaning</th>
</tr>
<tr valign=top>
<td width=43%>S_OK</td>
<td width=57%>Success.</td>
</tr>
<tr valign=top>
<td width=43%>DQC_E_FILE_NOT_FOUND</td>
<td width=57%>The specified user account cannot be located.</td>
</tr>
<tr valign=top>
<td width=43%>E_POINTER</td>
<td width=57%>Either the <i>pUserSid</i> or <i>ppUser</i> parameter is NULL.</td>
</tr>
<tr valign=top>
<td width=43%>E_OUTOFMEMORY</td>
<td width=57%>Insufficient memory.</td>
</tr>
<tr valign=top>
<td width=43%>DQC_E_INVALID_SID</td>
<td width=57%>The SID for the user is invalid.</td>
</tr>
<tr valign=top>
<td width=43%>DQC_E_ACCESS_DENIED</td>
<td width=57%>The caller has insufficient access rights.</td>
</tr>
<tr valign=top>
<td width=43%>DQC_E_NO_SID_MAPPING</td>
<td width=57%>There is no mapping available for the SID.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
This method will return a user object even if there is no quota record for the user in the quota file. This is consistent with the idea of automatic user addition and default quota settings. If there is currently no quota entry for the requested user, and the user would be added to the quota file if he were to request disk space, the returned user object will have warning threshold and hard quota limits equal to the volume default settings.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in dskquota.h.</p>
<h4>See Also</h4>
<p>
<a href="fsys_4jeb.htm">File Systems Overview</a>, <a href="fsys_5ir7.htm">File System Interfaces</a>, <a href="fsys_6bvw.htm"><b>IDiskQuotaControl</b></a></p>
<p>&nbsp;</p></body>
</HTML>
