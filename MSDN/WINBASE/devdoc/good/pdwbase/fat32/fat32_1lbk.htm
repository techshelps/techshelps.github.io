<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Int 21h Function 440Dh Minor Code 66h (FAT32)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="funcs_0000000101000d00"></a>Int 21h Function 440Dh Minor Code 66h (FAT32) </h1>
<p>
[Windows 95 only.]</p>
<p>
Returns the volume label, serial number and file system for the specified drive. </p>
<pre><code>mov     bx, Drive            ;See below
mov     ch, DeviceCat        ;See below
mov     cl, 66h              ;Get Media ID
mov     dx, seg MediaID      ;See below
mov     ds, dx
mov     dx, offset MediaID   ;ds:dx points to MID structure
mov     ax, 440Dh            ;IOCTL for block device
int     21h

jc      error_handler        ;carry set means error
</code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Drive</i> </dt>
<dd>
Specifies the drive for which information is to be returned (0 = default drive, 1 = A, 2 = B, and so on). </dd>
<dt>
<i>DeviceCat</i> </dt>
<dd>
Specifies a FAT16, FAT12 or FAT32 drive. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Value</th>
<th align=left width=57%>Description </th>
</tr>
<tr valign=top>
<td width=43%>08h </td>
<td width=57%>FAT32, FAT16, or FAT12 drive. </td>
</tr>
<tr valign=top>
<td width=43%>48h </td>
<td width=57%>FAT32, FAT16, or FAT12 drive. This value is supported on Windows 95 OEM Service Release 2 and later. </td>
</tr>
</table><br>


<p>
<b>Note:</b> Because this call may be implemented in the device driver, the 48h form of this call may fail on FAT16 or FAT12 media. Therefore, applications making the 48h form of this call must fall back on the 08h form if the 48h call fails. 
</dd>
<dt>
<i>MediaID</i> </dt>
<dd>
Points to an MID structure that receives information that uniquely identifies a disk or other storage medium. The MID structure has the following form: 
<pre><code>MID STRUC
    midInfoLevel   dw  0           ;information level
    midSerialNum   dd  ?           ;serial number
    midVolLabel    db  11 dup (?)  ;ASCII volume label
    midFileSysType db  8 dup (?)   ;file system type
MID ENDS
</code></pre>
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function is successful, clears the carry flag, and fills in the parameter block (an MID structure) with information about the disk. Otherwise, sets the carry flag and sets the AX register to one of the following error values. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Value </th>
<th align=left width=59%>Name </th>
</tr>
<tr valign=top>
<td width=41%>0001h </td>
<td width=59%>ERROR_INVALID_FUNCTION </td>
</tr>
<tr valign=top>
<td width=41%>0002h </td>
<td width=59%>ERROR_FILE_NOT_FOUND </td>
</tr>
<tr valign=top>
<td width=41%>0005h </td>
<td width=59%>ERROR_ACCESS_DENIED </td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
Get Media ID returns 0002h (ERROR_FILE_NOT_FOUND) if the specified drive number is invalid. </p>
<p>&nbsp;</p></body>
</HTML>
