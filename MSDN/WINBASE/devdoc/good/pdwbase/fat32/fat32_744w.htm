<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Int 21h Function 440Dh Minor Code 40h (FAT32)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="funcs_0000000101000100"></a>Int 21h Function 440Dh Minor Code 40h (FAT32) </h1>
<p>
[Windows 95 only.]</p>
<p>
Sets the device parameters for the specified block device. </p>
<pre><code>mov  bx, Drive           ;See below
mov  ch, DeviceCat       ;See below
mov  cl, 40h             ;Set device parameters
mov  dx, seg DriveDP     ;See below
mov  ds, dx
mov  dx, offset DriveDP  ;ds:dx points to a device parameters structure
mov  ax, 440Dh           ;IOCTL for block device
int  21h

jc  error_handler       ;carry set means error
</code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Drive</i> </dt>
<dd>
Specifies the drive that parameters are being set for (0 = default drive, 1 = A, 2 = B, and so on). </dd>
<dt>
<i>DeviceCat</i> </dt>
<dd>
Specifies the expected format of the device parameters information structure. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=10%>Value </th>
<th align=left width=90%>Expected device parameters structure </th>
</tr>
<tr valign=top>
<td width=10%>08h </td>
<td width=90%>DEVICEPARAMS (FAT16 or FAT12 drive. Will fail on FAT32 drives.) </td>
</tr>
<tr valign=top>
<td width=10%>48h </td>
<td width=90%><a href="fat32_6l2o.htm">EA_DEVICEPARAMETERS (FAT32)</a> (FAT32, FAT16 or FAT12 drives). This value is supported on Windows 95 OEM Service Release 2 and later. </td>
</tr>
</table><br>


<p>
<b>Note:</b> Because this call may be implemented in the device driver, the 48h form of this call may fail on FAT16 or FAT12 media. Therefore, applications making the 48h form of this call must fall back on the 08h form if the 48h call fails. 
</dd>
<dt>
<i>DriveDP</i> </dt>
<dd>
Points to the applicable device parameters structure that contains the parameters for the specified block device. The format of the expected device parameters is indicated in the above DeviceCat field. </dd>
</dl>
<h4>Return Values</h4>
<p>
If the function is successful, clears the carry flag. Otherwise, sets the carry flag and sets the AX register to one of the following error values. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%>Value </th>
<th align=left width=59%>Name </th>
</tr>
<tr valign=top>
<td width=41%>0001h </td>
<td width=59%>ERROR_INVALID_FUNCTION </td>
</tr>
<tr valign=top>
<td width=41%>0002h </td>
<td width=59%>ERROR_FILE_NOT_FOUND </td>
</tr>
<tr valign=top>
<td width=41%>0005h </td>
<td width=59%>ERROR_ACCESS_DENIED </td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
Set Device Parameters returns 0002h (ERROR_FILE_NOT_FOUND) if the specified drive number is invalid. </p>
<p>
If the number of sectors specified in the applicable device parameters structure is not zero, a TRACKLAYOUT structure specifying the size of each sector must follow the device parameters structure. </p>
<p>
In the case of a FAT16 or FAT12 drive, the device parameters structure is a DEVICEPARAMS structure. For FAT32 drives, the device parameters structure is an <a href="fat32_6l2o.htm">EA_DEVICEPARAMETERS (FAT32)</a> structure. </p>
<p>&nbsp;</p></body>
</HTML>
