<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Int 21h Function 440Dh Minor Code 48h (FAT32)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="funcs_0000000101000600"></a>Int 21h Function 440Dh Minor Code 48h (FAT32) </h1>
<p>
[Windows 95 only.]</p>
<p>
Locks or unlocks the volume in the given drive (preventing or permitting its removal) or returns the locked status of the given drive. </p>
<pre><code>mov ax, 440Dh           ; Generic IOCTL
mov bx, DriveNum        ; See below 
mov ch, DeviceCat       ; See below
mov cl, 48h             ; Lock or unlock removable media
mov dx, seg ParamBlock  ; See below
mov ds, dx
mov dx, offset ParamBlock
int 21h

jc  error_handler       ; Carry set means error
</code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>DriveNum</i> </dt>
<dd>
Drive to lock or unlock (0 = default drive, 1 = A, 2 = B, and so on). </dd>
<dt>
<i>DeviceCat</i> </dt>
<dd>
Specifies a FAT16, FAT12 or FAT32 drive. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=43%>Value</th>
<th align=left width=57%>Description </th>
</tr>
<tr valign=top>
<td width=43%>08h </td>
<td width=57%>FAT32, FAT16, or FAT12 drive. </td>
</tr>
<tr valign=top>
<td width=43%>48h </td>
<td width=57%>FAT32, FAT16, or FAT12 drive. This value is supported on Windows 95 OEM Service Release 2 and later. </td>
</tr>
</table><br>


<p>
<b>Note:</b> Because this call may be implemented in the device driver, the 48h form of this call may fail on FAT16 or FAT12 media. Therefore, applications making the 48h form of this call must fall back on the 08h form if the 48h call fails. 
</dd>
<dt>
<i>ParamBlock</i> </dt>
<dd>
Address of a PARAMBLOCK structure that specifies the operation to carry out and receives a count of the number of locks on the drive. </dd>
</dl>
<h4>Return Values</h4>
<p>
If the function is successful, clears the carry flag and copies the number of pending locks on the given drive to the NumLocks member of the PARAMBLOCK structure. Otherwise, sets the carry flag and sets the AX register to one of the following error values. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=50%>Value</th>
<th align=left width=50%>Description </th>
</tr>
<tr valign=top>
<td width=50%>01h </td>
<td width=50%>The function is not supported. </td>
</tr>
<tr valign=top>
<td width=50%>B0h </td>
<td width=50%>The volume is not locked in the drive. </td>
</tr>
<tr valign=top>
<td width=50%>B2h </td>
<td width=50%>The volume is not removable. </td>
</tr>
<tr valign=top>
<td width=50%>B4h </td>
<td width=50%>The lock count has been exceeded. </td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
