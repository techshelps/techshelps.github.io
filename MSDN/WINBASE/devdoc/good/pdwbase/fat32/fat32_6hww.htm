<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DPB (FAT32)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="structs_0000000102000300"></a>DPB (FAT32) </h1>
<p>
[Windows 95 only.]</p>
<p>
The DPB was extended to include FAT32 information. Changes are effective for Windows 95 OEM Service Release 2 and later. </p>
<pre><code>DPB STRUC
    dpb_drive            DB    ?
    dpb_unit             DB    ?
    dpb_sector_size      DW    ?
    dpb_cluster_mask     DB    ?
    dpb_cluster_shift    DB    ?
    dpb_first_fat        DW    ?
    dpb_fat_count        DB    ?
    dpb_root_entries     DW    ?
    dpb_first_sector     DW    ?
    dpb_max_cluster      DW    ?
    dpb_fat_size         DW    ?
    dpb_dir_sector       DW    ?
    dpb_reserved2        DD    ?
    dpb_media            DB    ?
ifdef NOTFAT32
    dpb_first_access     DB    ?
else
    dpb_reserved         DB    ?
endif
    dpb_reserved3        DD    ?
    dpb_next_free        DW    ?
    dpb_free_cnt         DW    ?
ifndef NOTFAT32
    extdpb_free_cnt_hi   DW    ?
    extdpb_flags         DW    ?
    extdpb_FSInfoSec     DW    ?
    extdpb_BkUpBootSec   DW    ?
    extdpb_first_sector  DD    ?
    extdpb_max_cluster   DD    ?
    extdpb_fat_size      DD    ?
    extdpb_root_clus     DD    ?
    extdpb_next_free     DD    ?
endif
DPB ENDS
</code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>dpb_drive</b> </dt>
<dd>
The drive number (0 = A, 1 = B, and so on). </dd>
<dt>
<b>dpb_unit</b> </dt>
<dd>
Specifies the unit number. The device driver uses the unit number to distinguish the specified drive from the other drives it supports. </dd>
<dt>
<b>dpb_sector_size</b> </dt>
<dd>
The size of each sector, in bytes. </dd>
<dt>
<b>dpb_cluster_mask</b> </dt>
<dd>
The number of sectors per cluster minus 1. </dd>
<dt>
<b>dpb_cluster_shift</b> </dt>
<dd>
The number of sectors per cluster, expressed as a power of 2. </dd>
<dt>
<b>dpb_first_fat</b> </dt>
<dd>
The sector number of the first sector containing the file allocation table (FAT). </dd>
<dt>
<b>dpb_fat_count</b> </dt>
<dd>
The number of FATs on the drive. </dd>
<dt>
<b>dpb_root_entries</b> </dt>
<dd>
The number of entries in the root directory. </dd>
<dt>
<b>dpb_first_sector</b> </dt>
<dd>
The sector number of the first sector in the first cluster. </dd>
<dt>
<b>dpb_max_cluster</b> </dt>
<dd>
The number of clusters on the drive plus 1. This field is undefined for FAT32 drives. </dd>
<dt>
<b>dpb_fat_size</b> </dt>
<dd>
The number of sectors occupied by each FAT. The value of zero indicates a FAT32 drive. Use the value in <b>extdpb_fat_size</b> instead. </dd>
<dt>
<b>dpb_dir_sector</b> </dt>
<dd>
The sector number of the first sector containing the root directory. This field is undefined for FAT32 drives. </dd>
<dt>
<b>dpb_reserved2</b> </dt>
<dd>
Reserved field. Do not use. </dd>
<dt>
<b>dpb_media</b> </dt>
<dd>
Specifies the media descriptor for the medium in the specified drive. </dd>
<dt>
<b>reserved</b> </dt>
<dd>
Reserved field. Do not use. </dd>
<dt>
<b>dpb_first_access</b> </dt>
<dd>
Indicates whether the medium in the drive has been accessed. This field is initialized to -1 to force a media check the first time this DPB is used. </dd>
<dt>
<b>dpb_reserved3</b> </dt>
<dd>
Reserved field. Do not use. </dd>
<dt>
<b>dpb_next_free</b> </dt>
<dd>
The cluster number of the most recently allocated cluster. </dd>
<dt>
<b>dpb_free_cnt</b> </dt>
<dd>
The number of free clusters on the medium. This field is 0FFFFh if the number is unknown. </dd>
<dt>
<b>extdpb_free_cnt_hi</b> </dt>
<dd>
The high word of free count. </dd>
<dt>
<b>extdpb_flags</b> </dt>
<dd>
Flags describing the drive. The low 4 bits of this field contain the 0-based FAT number of the Active FAT. This field can contain a combination of the following values. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=50%>Value</th>
<th align=left width=50%>Description </th>
</tr>
<tr valign=top>
<td width=50%>BGBPB_F_ActiveFATMsk (000Fh)</td>
<td width=50%>Mask for low four bits. </td>
</tr>
<tr valign=top>
<td width=50%>BGBPB_F_NoFATMirror (0080h)</td>
<td width=50%>Do not Mirror active FAT to inactive FATs. </td>
</tr>
</table><br>


<p>
Bits 4-6 and 8-15 are reserved. 
</dd>
<dt>
<b>extdpb_FSInfoSec</b> </dt>
<dd>
The sector number of the file system information sector. This field is set to 0FFFFh if there is no FSINFO sector. Otherwise, this value must be non-zero and less than the reserved sector count. </dd>
<dt>
<b>extdpb_BkUpBootSec</b> </dt>
<dd>
The sector number of the backup boot sector. This field is set to 0FFFFh if there is no backup boot sector. Otherwise, this value must be non-zero and less than the reserved sector count. </dd>
<dt>
<b>extdpb_first_sector</b> </dt>
<dd>
The first sector of the first cluster. </dd>
<dt>
<b>extdpb_max_cluster</b> </dt>
<dd>
The number of clusters on the drive plus 1. </dd>
<dt>
<b>extdpb_fat_size</b> </dt>
<dd>
The number of sectors occupied by the FAT. </dd>
<dt>
<b>extdpb_root_clus</b> </dt>
<dd>
The cluster number of the first cluster in the root directory. </dd>
<dt>
<b>extdpb_next_free</b> </dt>
<dd>
The number of the cluster that was most recently allocated. </dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
