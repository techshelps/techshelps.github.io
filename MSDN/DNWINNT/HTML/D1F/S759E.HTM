<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Common Logon Scenarios</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Common Logon Scenarios</H3><P>The following examples describe various logon scenarios in a Windows&nbsp;NT environment. </P>
<H4><A NAME="sec0"></A>Example 1: Logging On to a Member of a Workgroup</H4><P>For a computer running Windows&nbsp;NT and participating in a workgroup, the logon information is compared with the local user accounts database. When a user logs on, the From box lists only the name of the local computer. The user cannot specify another workgroup or domain for logon. There is no discovery, because the Netlogon service is not running. If the user attempts access to another Windows&nbsp;NT computer, authentication proceeds as discussed in "Example 4: Logging On to an Untrusted Domain," later in this chapter. </P>
<P>After successful authentication, the username and password are cached by the computer's redirector for use when connecting to remote resources.</P>
<H4><A NAME="sec1"></A>Example 2: Logging On to the Home Domain</H4><P>From a Windows&nbsp;NT computer participating in a domain, a user can choose to have his or her logon information authenticated by the local computer or by a domain controller in its domain. If the user account is a domain account, a domain controller's SAM for the home domain or a trusted domain authenticates the logon. The workstation itself connects to a domain with a workstation trust account. </P>
<P>The From box lists the name of the local computer, the name of the home domain in which the computer participates, and the names of any trusted domains.</P>
<P><img src="xrgw06.gif"></P>
<P>Figure 4.10    Logging On from a Domain Workstation</P>
<P>The security access token generated in an interactive logon is maintained on the computer where the user is logged on. </P>
<H4><A NAME="sec2"></A>Example 3: Logging On to a Trusted Domain</H4><P>When a user at a Windows&nbsp;NT Workstation computer in a domain, or a Windows&nbsp;NT Server computer that is participating in a domain but not as a domain controller, attempts to log on to a trusted domain, the user's credentials are not authenticated on the local computer. The logon request is passed to a domain controller on the trusted domain and is authenticated there. </P>
<P>If the username is not valid and the Guest account of the computer on the computer the user is logging on to is enabled, the user is logged on to the trusted domain as a guest. If the Guest account is disabled, or if the username is valid but the password is not, the logon attempt fails with access denied. The Guest account is used only for remote logons.</P>
<P>The <B>net use </B>command prompts for a password if there is no corresponding user account in the trusted domain, or if there is a corresponding user account but the password does match the one supplied by the trusting domain. In situations where the <B>net use </B>command would require a password, the <B>net view</B> command simply fails with access denied.</P>
<P>The From box lists the domain and trusted domains for this computer. </P>
<P><img src="xrgw07.gif"></P>
<P>Figure 4.11    Authentication by a Trusted Domain Controller</P>
<H4><A NAME="sec3"></A>Example 4: Logging On to an Untrusted Domain</H4><P>If a client workstation or server connects by remote logon to a Windows&nbsp;NT computer and the domain name specified is not trusted by the domain the client workstation or server that the user is logged on to, the client computer checks its own user account for the username and password supplied. If the credentials are valid, the client logs the user on. If the username is not valid and the client's Guest account is enabled, the computer logs the user on as a guest and passes the credentials to the untrusted domain. </P>
<H4><A NAME="sec4"></A>Example 5: Logging on Without Specifying a Domain Name</H4><P>For workstations running Windows for Workgroups 3.1 or LAN Manager 2.0, the domain of the Windows&nbsp;NT computer being connected to might not be specified. For a user connecting to an individual or workgroup workstation, user credentials are authenticated only on the local computer. If the username is not valid and a Guest account is enabled, the user is logged on as a guest.</P>
<P>If the client is connecting to a domain of which the workstation is a member, user credentials are authenticated first by the workstation itself, and then by a domain controller. If the username is not valid for the domain and the domain controller's Guest account is enabled, the user is logged to the Guest account of the machine being connected to. If the username is valid but the password is not, or if the Guest account is disabled, the user is again prompted for a password, and then the logon attempt fails with access denied.</P>
<P>For a user logging onto a trusted domain from a domain workstation, it is not obvious where the user's domain account is defined. User credentials are authenticated in the following order until the user is successfully logged on: first by the workstation itself, then by the local domain server, and finally by the trusted domain. If all these logon attempts fail, the user is connected, if possible, to the local workstation's Guest account.</P></FONT></BODY></HTML>
