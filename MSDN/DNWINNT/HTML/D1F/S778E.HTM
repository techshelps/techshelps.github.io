<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Installing a Simple Internet Router Using PPP</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Installing a Simple Internet Router Using PPP</H2><P>Windows&nbsp;NT version 3.5 RAS was not designed to route packets from a local area network over a WAN link. However, by correctly configuring both the RAS computer acting as a router and the other computers on your small LAN, you can use the computer running Windows&nbsp;NT RAS as a simple router to the Internet.</P>
<P>The following items are the primary requirements to use Windows&nbsp;NT RAS as router between your LAN and the Internet.</P>
<UL><LI>A Windows&nbsp;NT computer with a high speed modem and a network adapter card.</LI><LI>A PPP connection to the Internet. </LI></UL><P><B>Note</B>   The Internet service provider you connect to cannot be a Windows&nbsp;NT 3.5 computer.</P>
<UL><LI>A valid class "C" network or a subnet, different from the subnet of the Internet service provider. </LI><LI>The proper registry and Default Gateway configurations on the computer acting as a router and the LAN clients. The configurations are described later in this section.</LI></UL><P>To be identified using names rather than IP addresses, you also need a domain name. Your Internet service provider might help you obtain a domain name.</P>
<P>When you establish your PPP account, you must also ensure your Internet service provider provides you with a valid class C network (255 nodes) or a valid IP subnet (and subnet mask) that contains sufficient IP addresses for every computer on your LAN. </P>
<P>Once you have a PPP connection, IP addresses for your subnet (and correct subnet mask), and (optionally) a domain name, you can then configure the RAS and LAN computers for Internet gateway as described below.</P>
<H3><A NAME="sec0"></A>To configure a small LAN for routing to the Internet over a dedicated PPP account</H3><OL><LI>Using the Registry path shown below, add the value <B>DisableOtherSrcPackets</B> to the Registry of the RAS computer that will route packets from the LAN to the Internet.</LI></OL><P>\HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\RasArp\Parameters</P>
<P><B>DisableOtherSrcPackets     REG_DWORD</B></P>
<P>By default, the header of each packet sent by the RAS computer over the PPP link uses the IP address of the RAS computer as the source. Since the packets that come from LAN clients are not originating from the RAS computer, you must set <B>DisableOtherSrcPacket</B> to 1 so the header sent over the PPP link retains the IP address of the LAN clients.</P>
<P>Range: 0-1<BR>Default: 0 (not in registry)</P>
<OL start=2><LI>If the subnet you have is in the same network class as your service provider, which is very likely in this scenario, you must also add the value <B>PriorityBasedOnSubNetwork </B>to the Registry of the RAS computer that routes packets from the LAN to the Internet.</LI></OL><P>\HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\RasMan\PPP\IPCP</P>
<P><B>PriorityBasedOnSubNetwork     REG_DWORD</B></P>
<P>A computer can connect to the LAN using a network card and a RAS connection. If the RAS connection and the LAN network adapter card are assigned addresses with the same network number and the Use Default Gateway On Remote Network check box is selected, then all packets are sent over the RAS connection, though the two addresses are in different subnetworks within the same network. </P>
<P>Set this parameter to 1 to send packets over the network card. For example, if the network adapter card has IP address 10.1.1.1 (subnet mask 255.255.0.0) and the RAS connection is assigned the address 10.2.1.1, RAS sends all 10.x.x.x packets using the RAS connection. If the parameter is set, RAS sends 10.2.x.x packets using the RAS connection and 10.1.x.x packets using the network adapter card.</P>
<P>Range: 0-1<BR>Default: 0 (not in registry)</P>
<OL start=3><LI>Configure the default gateway of all the computers on the LAN using the Network option in Control Panel. </LI></OL><P>The default gateway is set when you configure the TCP/IP protocol.</P>
<P>Use the IP address of the network card adapter in the RAS computer as the default gateway for all computers on the LAN except the computer acting as a router to the Internet. The default gateway for the computer acting as the router to the Internet should be left blank. Consult the following figure to determine the correct assignment pattern of IP addresses, subnet masks, and default gateways.</P>
<P><img src="INET16.gif"></P>
<P>Figure 22.5    Sample Configuration using RAS as a Simple Internet Router</P></FONT></BODY></HTML>
