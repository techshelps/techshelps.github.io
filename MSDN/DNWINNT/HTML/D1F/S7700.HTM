<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Advanced Configuration Parameters for FTP Server Service</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Advanced Configuration Parameters for FTP&nbsp;Server&nbsp;Service</H2><P>This section presents configuration parameters that affect the behavior of the FTP Server service and that can be modified only through Registry Editor. After you modify any of these value entries, you must restart the FTP Server service for the changes to take effect.</P>
<P><B>Caution    </B>You can impair or disable Windows&nbsp;NT if you make incorrect changes in the Registry while using Registry Editor. Whenever possible, use administrative tools such as Control Panel to make configuration changes, rather than using Registry Editor. If you make errors while changing values with Registry Editor, you will not be warned, because Registry Editor does not recognize semantic errors.</P>
<H3><A NAME="sec0"></A>To make changes to the FTP Server service configuration using Registry Editor</H3><OL><LI>    Run the REGEDT32.EXE program from File Manager or Program Manager.</LI></OL><P>    – Or –</P>
<P>    At the command prompt, type the <B>start regedt32</B> command, and then press ENTER.</P>
<P>    When the Registry Editor window appears, you can press F1 to get Help on how to make changes in Registry Editor.</P>
<OL start=2><LI>    In Registry Editor, select HKEY_LOCAL_MACHINE On Local Machine, and then click the icons for the SYSTEM subtree until you reach this subkey:</LI></OL><P>..\SYSTEM\CurrentControlSet\Services\ftpsvc\Parameters</P>
<P>    All of the parameters described here are located under this Registry subkey.</P>
<P>    You must restart the FTP Server service for the changes to take effect.</P>
<P>The following list describes the value entries for FTP Server service parameters that can only be set by adding an entry or changing their values in Registry Editor. These value entries do not appear by default in the Registry, so you must add an entry if you want to change its default value.</P>
<H4><A NAME="sec1"></A>AnnotateDirectories</H4><P><B>    </B>Data type = REG_DWORD <BR>Range = 0 or 1 <BR>Default = 0 (false—that is, directory annotation is off)</P>
<P>    This value entry defines the default behavior of directory annotation for newly connected users. Directory descriptions are used to inform FTP users of the contents of a directory on the server. The directory description is saved in a file named ~FTPSVC~.CKM, which is usually a hidden file. When this value is 1, directory annotation is on.</P>
<H4><A NAME="sec2"></A>ExitMessage</H4><P><B>    </B>Data type = REG_SZ <BR>Range = String<BR>Default = "Goodbye."</P>
<P>    This value entry defines a signoff message that will be sent to FTP clients upon receipt of a <B>quit</B> command.</P>
<H4><A NAME="sec3"></A>GreetingMessage</H4><P><B>    </B>Data type = REG_MULTI_SZ <BR>Range = String <BR>Default = None (no special greeting message)</P>
<P>    This value entry defines the message to be sent to new clients after their accounts have been validated. In accordance with Internet behavior, if the client logs on as anonymous and specifies an identity that starts with a minus sign (–), this greeting message is not sent.</P>
<H4><A NAME="sec4"></A>LogAnonymous</H4><P><B>    </B>Data type = REG_DWORD <BR>Range = 0 or 1 <BR>Default = 0 (false—that is, do not log successful anonymous logons)</P>
<P>    This value entry enables or disables logging of anonymous logons in the System event log.</P>
<H4><A NAME="sec5"></A>LogNonAnonymous</H4><P><B>    </B>Data type = REG_DWORD <BR>Range = 0 or 1 <BR>Default = 0 (false—that is, do not log successful nonanonymous logons)</P>
<P>    This value entry enables or disables logging of nonanonymous logons in the System event log.</P>
<H4><A NAME="sec6"></A>LogFileAccess</H4><P>    Data type = REG_DWORD <BR>Range = 0-2 <BR>Default = 0 (do not log file accesses to FTPSVC.LOG)</P>
<P>    This value entry specifies the logging behavior of FTP Server file access. Allowable values are:</P>
<P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="31pt" VALIGN="TOP"><COL WIDTH="268pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>0</P></TD><TD VALIGN="TOP"><P>Do not log file accesses (default)</P></TD></TR><TR><TD VALIGN="TOP"><P>1</P></TD><TD VALIGN="TOP"><P>Log file accesses to FTPSVC.LOG in the service's current directory, typically \<I>systemroot</I>\SYSTEM32. </P></TD></TR><TR><TD VALIGN="TOP"><P>2</P></TD><TD VALIGN="TOP"><P>Log file accesses to FT<I>yymmdd.</I>LOG, where <I>yy </I>is the current year, <I>mm </I>is the current month, and <I>dd </I>is the current day. The log file is located in the service's current directory, typically \<I>systemroot</I>\SYSTEM32. New log files are opened daily, as necessary.</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>    For each file opened by the FTP Server, the service log will contain a single line entry in the following format:</P>
<P>    <I>IPAddress username action path date_time</I></P>
<UL><LI><I>ip_address</I> is the client computer's IP address</LI><LI><I>username</I> is the user's name (or <I>password</I> for anonymous logons)</LI><LI><I>action</I> is either "opened," "created," or "appended"</LI><LI><I>path</I> is the fully qualified path of the file acted upon</LI><LI><I>date_time</I> is the date and time the action took place</LI></UL><P>    Entries are also written to the log whenever the FTP Server starts or stops. For example:</P>
<P>    ************** FTP SERVER SERVICE STARTING Fri Apr 29 10:28:49 1994<BR>11.101.199.173 daveo opened c:\tmp\tst.bat Fri Apr 29 10:29:42 1994<BR>11.101.199.173 daveo created c:\tmp\new.txt Fri Apr 29 10:30:25 1994<BR>11.101.199.173 daveo appended c:\tmp\new.txt Fri Apr 29 10:33:04 1994<BR>************** FTP SERVER SERVICE STOPPING Fri Apr 29 10:33:08 1994</P>
<H4><A NAME="sec7"></A>LogFileDirectory</H4><P>    Data type = REG_SZ <BR>Default = \<I>systemroot</I>\SYSTEM32</P>
<P>    This value entry specifies the target directory for the log file or files. The target directory does not have to reside on the system partition.</P>
<H4><A NAME="sec8"></A>LowercaseFiles</H4><P>    Data type = REG_DWORD <BR>Range = 0 or 1 <BR>Default = 0 (do not map filenames to lowercase)</P>
<P>    If this value entry is nonzero, all filenames returned by the <B>list</B> and <B>nlst</B> commands are mapped to lowercase for noncase-preserving file systems. This mapping only occurs when a directory listing is requested on a noncase-preserving file system. If this value is 0, case in all filenames is unaltered. Currently, FAT is the only noncase-preserving file system supported under Windows&nbsp;NT, so this flag has no effect when retrieving listings on HPFS or NTFS partitions.</P>
<H4><A NAME="sec9"></A>MaxClientsMessage</H4><P><B>    </B>Data type = REG_SZ <BR>Range = String <BR>Default = "Maximum clients reached, service unavailable."</P>
<P>    This value entry specifies the message to be sent to an FTP client if the maximum number of clients has been reached or exceeded. This message indicates that the server is refusing additional clients because it is currently servicing the maximum number of connections (as specified in the FTP Service dialog box or the <B>MaxConnections </B>value in the Registry).</P>
<H4><A NAME="sec10"></A>MsdosDirOutput</H4><P><B>    </B>Data type = REG_DWORD <BR>Range = 0 or 1 <BR>Default = 1 (true—that is, directory listings will look like MS-DOS)</P>
<P>    This value entry specifies the default behavior for whether the output of the <B>list</B> command looks like the output of the MS-DOS <B>dir</B> command or the output of the UNIX <B>ls</B> command. This value also controls the direction of slashes in paths sent by the <B>pwd</B> command. </P>
<P>    When this value is 1, directory listings look like MS-DOS listings, and the path will contain backward slashes ( \ ). If this value is 0, listings look like UNIX listings, and the path contains forward slashes (/ ).</P>
<P>The following Registry parameters can be set using the options available when configuring the FTP Server service in the Network Settings dialog box:</P>
<P><B>AllowAnonymous <BR>AnonymousOnly <BR>AnonymousUsername <BR>ConnectionTimeout <BR>HomeDirectory <BR>MaxConnections</B></P>
<P>The following Registry parameters can be set using the options available when you select the FTP Server icon in Control Panel and then choose the Security button:</P>
<P><B>ReadAccessMask <BR>WriteAccessMask</B></P>
<P>The ranges of values that can be entered for these parameters in Registry Editor are the same as those described in the related dialog boxes earlier in this chapter. You should use only the FTP Server service dialog boxes to set these values.</P></FONT></BODY></HTML>
