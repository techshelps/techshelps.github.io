<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Remote Logon</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Remote Logon</H3><P>A security access token created at interactive logon is assigned to the initial process created for the user. When the user tries to access a resource on another computer, the security access token is placed in a table in the remote server process. The server process creates a security ID for the user and maps it to the user's security access token. This security ID is sent back to the client redirector and is used in all further server message block (SMB) communication between the server and client. Whenever a resource request comes in from the client, the security ID identifies the user to the server process. The security access token that maps to the user ID identifies the user to the remote security subsystem.</P>
<P><img src="XRGW08.gif"></P>
<P>Figure 4.8    Remote Logon</P>
<P>The following list shows the steps in a successful remote logon at a Windows&nbsp;NT Workstation computer or Windows&nbsp;NT Server computer.</P>
<OL><LI>The username, password, and domain name  (the data entered in the Welcome dialog box) of the logged on user are sent from the user's computer to the remote Windows&nbsp;NT server. </LI><LI>The authenticating computer's SAM compares the logon username and password with information in the user accounts database.</LI><LI>If the access is authorized, the authenticating computer's LSA constructs a security access token and passes it to the server process, which creates a user ID referencing the security access token.</LI><LI>The user ID is then returned to the client computer for use in all subsequent requests to the server.</LI></OL><P>After the session has been created, the client computer sends requests marked with the user ID it received during session setup. The server matches the user ID with the proper access token kept in an internal table. This security access token at the remote computer is used for access authentication at the remote computer by that user.</P>
<H4><A NAME="sec0"></A>Remote Logon at a LAN Manager 2.x Server</H4><P>Remote logon at a LAN Manager 2<I>.x</I> server is basically the same as remote logon to a Windows&nbsp;NT computer. However, instead of comparing the user's logon information against a centralized user accounts database, the LAN Manager 2<I>.x</I> server compares the information with its local user accounts database. This database may be the server's own standalone database or a domain database shared by a group of servers. LAN Manager 2<I>.x</I> servers cannot use pass-through authentication.</P>
<P>Accessing resources on a LAN Manager 2<I>.x</I> server is similar to accessing resources on a Windows&nbsp;NT computer, except that the LAN Manager 2<I>.x</I> server does not use a security access token to identify resource requests. Instead, the security ID maps to the username, which is used to process resource requests.</P>
<P>If the LAN Manager 2<I>.x</I> server is in the same domain as a Windows&nbsp;NT Server computer, the server logon is identical to that used when accessing another Windows&nbsp;NT Server computer (except that the LAN Manager 2<I>.x</I> server does not generate or use security access tokens).</P>
<P>If the LAN Manager 2<I>.x</I> server is in another domain, the server logon is identical to logon for a Windows&nbsp;NT Workstation computer that is a member of a workgroup. This is true even for a trusted domain, since LAN Manager 2<I>.x</I> servers don't support trust relationships. An account must exist either in the LAN Manager 2<I>.x</I> server's domain or at the stand-alone server itself. </P>
<H4><A NAME="sec1"></A>Summary of Remote Logon Authentication</H4><P>This section summarizes the various remote logon scenarios.</P>
<H4><A NAME="sec2"></A>Workgroup computer connecting to a Windows&nbsp;NT computer in a domain</H4><P>Interactive logon for the user at the workgroup computer (the client) is performed by the local user accounts database.</P>
<P>The client's username and a function of the password are passed to the specific server in the domain to which the client is trying to connect. This server checks the username and password with information in its local user accounts database. If there is a match, access to this server is allowed.</P>
<H4><A NAME="sec3"></A>Domain computer connecting to a Windows&nbsp;NT computer in the same domain</H4><P>Interactive logon for the user at the client computer was performed by the domain's user accounts database.</P>
<P>The client's domain name, username, and a function of the password are passed to the computer being accessed, which passes them to a Windows&nbsp;NT Server computer in the domain. </P>
<P>The Windows&nbsp;NT Server computer verifies that the domain name for the client matches this domain. </P>
<P>Next the Windows&nbsp;NT Server computer check the username and password against the domain's user accounts database. If there is a match, access is allowed.</P>
<H4><A NAME="sec4"></A>Domain client in a trusted domain connecting to a Windows&nbsp;NT computer</H4><P>Interactive logon for the user at the client computer is performed by the domain's user accounts database.</P>
<P>The client's domain name, username, and a function of the password are passed to the computer being accessed. That computer passes the logon information to a Windows&nbsp;NT  Server in the domain. </P>
<P>The Windows&nbsp;NT Server computer verifies that the client's domain is a trusted domain and then passes the client's identification information to a Windows&nbsp;NT Server computer in that trusted domain. </P>
<P>A Windows&nbsp;NT Server computer in the trusted domain (that is, the same domain as the client computer) checks the username and password against the domain's user accounts database. If there is a match, access is allowed.</P></FONT></BODY></HTML>
