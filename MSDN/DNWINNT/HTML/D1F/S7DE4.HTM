<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dynamic Host Configuration Protocol</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Dynamic Host Configuration Protocol</H3><P>Assigning and maintaining IP address information can be an administrative burden for network administrators responsible for internetwork connections. Contributing to this burden is the problem that many users do not have the knowledge necessary to configure their own computers for internetworking and must therefore rely on their administrators.</P>
<P>The Dynamic Host Configuration Protocol (DHCP) was established to relieve this administrative burden. DHCP provides safe, reliable, and simple TCP/IP network configuration, ensures that address conflicts do not occur, and helps conserve the use of IP addresses through centralized management of address allocation. DHCP offers dynamic configuration of IP addresses for computers. The system administrator controls how IP addresses are assigned by specifying <I>lease</I> durations, which specify how long a computer can use an assigned IP address before having to renew the lease with the DHCP server. </P>
<P>As an example of how maintenance tasks are made easy with DHCP, the IP address is released automatically for a DHCP client computer that is removed from a subnet, and a new address for the new subnet is automatically assigned when that computer reconnects on another subnet. Neither the user nor the network administrator needs to intervene to supply new configuration information. This is a most significant feature for mobile computer users with portables that are docked at different computers, or for computers that are moved to different offices frequently.</P>
<P>The DHCP client and server services for Windows NT are implemented under Requests for Comments (RFCs) 1533, 1534, 1541, and 1542.</P>
<P>The following illustration shows an example of a DHCP server providing configuration information on two subnets. If, for example, ClientC is moved to Subnet&nbsp;1, the DHCP server automatically supplies new TCP/IP configuration information the next time that ClientC is started.</P>
<P><img src="XTC03_10.gif"></P>
<P>Figure 12.3    DHCP Clients and Servers on a Routed Network</P>
<P>DHCP uses a client-server model and is based on leases for IP addresses. During system startup (the <I>initializing</I> state), a&nbsp;DHCP client computer sends a <I>discover message</I> that is broadcast to the local network and might be relayed to all DHCP servers on the private internetwork. Each DHCP server that receives the discover message responds with an <I>offer</I> <I>message</I> containing an IP address and valid configuration information for the client that sent the request.</P>
<P>The DHCP client collects the configuration offerings from the servers and enters a&nbsp;<I>selecting</I> state. When the client enters the <I>requesting</I> state, it chooses one of the configurations and sends a <I>request message</I> that identifies the DHCP server for the selected configuration. </P>
<P>The selected DHCP server sends a <I>DHCP acknowledgment</I> <I>message</I> that contains the address first sent during the discovery stage, plus a valid lease for the address and the TCP/IP network configuration parameters for the client. After the client receives the acknowledgment, it enters a <I>bound</I> state and can now participate on the TCP/IP network and complete its system startup. Client computers that have local storage save the received address for use during subsequent system startup. As the lease approaches its expiration date, it attempts to renew its lease with the DHCP server, and is assigned a new address if the current IP address lease cannot be renewed.</P>
<P><img src="XTC03_01.gif"></P>
<P>Figure 12.4    DHCP Client State Transition During System Startup</P>
<P>In Windows&nbsp;NT Server, the network administrator uses DHCP Manager to define local policies for address allocation, leases, and other options. For information about using this tool, see Chapter&nbsp;13, "Installing and Configuring DHCP Servers." For information about the steps for setting up TCP/IP using DHCP, see "Configuring TCP/IP" in Chapter&nbsp;11, "Installing and Configuring Microsoft TCP/IP and SNMP." For information about setting up DHCP relaying, see the documentation for your router.</P></FONT></BODY></HTML>
