<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Troubleshooting SNMP</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Troubleshooting SNMP</H3><P>This section discusses problems that you might encounter using SNMP and what to do to resolve them. </P>
<H4><A NAME="sec0"></A>Timeout on WINS Server Queries</H4><P>When querying a WINS server, it might be necessary to increase the SNMP timeout on the SNMP management system. If some WINS queries work, and others time out, increase the timeout.</P>
<H4><A NAME="sec1"></A>Identifying SNMP Service Errors</H4><P>Event Viewer is the first place you should look to identify a problem with the SNMP service. SNMP service errors and activity are recorded in the system log, depending upon the specified LOGLEVEL. If there is no SNMP information in the event log, you may need to change the LOGLEVEL. See the earlier section "Turning SNMP On and Off" for information about this parameter.</P>
<P>For more information about Event Viewer, see online Help or the Event Viewer chapter in the <I>Windows&nbsp;NT System Guide</I> manual of the Windows&nbsp;NT 3.5 documentation set.</P>
<P CLASS="proch"><B>To use Event Viewer</B></P>
<P CLASS="ls">    1.    In Program Manager, open the Administrative Tools group.</P>
<P CLASS="ls">    2.    Double-click the Event Viewer icon.</P>
<P CLASS="ls">    3.    Click the message about which you want more information. In the View menu, select Detail and Event Viewer displays more information about the message.</P>
<P></P>
<H4><A NAME="sec2"></A>Application is Unable to Get Requested Variables</H4><P>The SNMP Manager API SnmpMgrStrToOid assumes that the Oid is under the Internet MIB in the mgmt subtree (1.3.6.1.2.1.x). </P>
<P>To get variables that are not under the mgmt subtree, the Oid must be preceded by a period (.). For example, if the application is trying to get the system group and passes an Oid of 1.3.6.1.2.1.1, the application will try to get</P>
<P>iso.org.dod.internet.mgmt.1.1.3.6.1.2.1.1</P>
<P>which does not exist. The correct way to get the system group is to pass .1.3.6.1.2.1.1 as the Oid parameter.</P>
<P>To walk the enterprises tree, specify .1.3.6.1.4.1 rather than 1.3.6.1.4.1.</P>
<H4><A NAME="sec3"></A>SNMP Agent Breaks Up Variable Bindings List</H4><P>When the SNMP agent receives a request for multiple variables in a single packet, the agent queries the required subagent (in this case the DLL acting as the agent) for each variable in the bindings list, packs the results in a response variable bindings list, and returns a single packet. </P>
<P>This table gives an example of variables requested and their respective MIBs.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="256pt" VALIGN="TOP"><COL WIDTH="91pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Variable</B></P></TD><TD VALIGN="TOP"><P><B>MIB</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>ip.iplnReceives </P></TD><TD VALIGN="TOP"><P>Internet MIB II</P></TD></TR><TR><TD VALIGN="TOP"><P>tcp.tcpMaxConn</P></TD><TD VALIGN="TOP"><P>Internet MIB II</P></TD></TR><TR><TD VALIGN="TOP"><P>iso.org.dod.internet.private.enterprises.lanmanager.<BR>lanmgr-2.common.comVersionMaj</P></TD><TD VALIGN="TOP"><P>LAN Manager <BR>MIB II</P></TD></TR><TR><TD VALIGN="TOP"><P>icmp.icmpOutErrors</P></TD><TD VALIGN="TOP"><P>Internet MIB II</P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The agent queries INETMIB1.DLL twice, LMMIB2.DLL once, and INETMIB1.DLL once. It packs the result in a response packet and sends it to the requesting manager. There is no "snapshot" of the MIB.</P>
<H4><A NAME="sec4"></A>No Counters Appear in Performance Monitor</H4><P>You must install the SNMP service to see any of the TCP/IP, FTP, Internet Control Message Protocol (ICMP), or UDP performance counters in Performance Monitor. Installing SNMP installs the MIBs into which the performance information is accumulated, and starts SNMP.</P>
<P>SNMP is not installed by default when you install TCP/IP. See the earlier section "Installing and Configuring SNMP" for more information.</P>
<P>For more information about Performance Monitor and the counters, see Chapter 17, "Using Performance Monitor with TCP/IP Services," in the <I>Windows&nbsp;NT Networking Guide</I>. </P></FONT></BODY></HTML>
