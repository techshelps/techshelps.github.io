<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Installing a Simple Internet Router that Uses PPP</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Installing a Simple Internet Router that Uses PPP</H3><P>Windows&nbsp;NT RAS version 3.5 or later was not designed to route packets from a large local area network over a dial-up link. However, by correctly configuring both the RAS computer acting as a router and the other computers on your small LAN with a static network configuration, you can use the computer running Windows&nbsp;NT RAS as a simple router to the Internet or to an enterprise TCP/IP network.</P>
<P>The following requirements are necessary for using Windows&nbsp;NT RAS as a dial-up router between your LAN and the Internet.</P>
<UL><LI> <FONT FACE="symbol">•</FONT>    A Windows&nbsp;NT computer with a high-speed modem and a network adapter card</LI><LI> <FONT FACE="symbol">•</FONT>    A Point-to-Point Protocol (PPP) connection to the Internet</LI><LI> <FONT FACE="symbol">•</FONT>    A valid network, or a subnet different from the subnet of the Internet service provider</LI><LI> <FONT FACE="symbol">•</FONT>    The proper Registry and Default Gateway configurations on the computer acting as a router and on the LAN clients. The configurations are described later in this section.</LI><LI> <FONT FACE="symbol">•</FONT>    A small LAN that does not require the automatic routing configuration provided by RIP. (You probably do not need RIP functionality if you have a small LAN that is not expected to grow or change.)</LI></UL><P></P>
<P>To be identified using names rather than IP addresses, you also need a domain name. Your Internet service provider might help you obtain a domain name.</P>
<P>Once you have a PPP connection, IP addresses for your subnet (and correct subnet mask), and (optionally) a domain name, you can then configure the RAS and LAN computers for Internet gateway as described in the following procedure.</P>
<P CLASS="proch"><B>To configure a small LAN for routing to the Internet over a dedicated PPP account</B></P>
<P CLASS="ls">    1.    On the RAS computer that will route packets from the LAN to the Internet, add the value <B>DisableOtherSrcPackets</B> to the Registry path shown below, and then set the value to 0. </P>
<P CLASS="lt1">By default, the header of each packet sent by the RAS computer over the PPP link uses the IP address of the RAS computer as the source. Since the packets that come from LAN clients are not originating from the RAS computer, you must set <B>DisableOtherSrcPackets</B> to 0 so that the packets will be forwarded over the PPP link.</P>
<P><BR></P>
<pre><code>\HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services<BR>    \RasArp\Parameters
</code></pre>
<P CLASS="lt1"><B>DisableOtherSrcPackets          REG_DWORD<BR></B>Range: 0-1<BR>Default: 1 (not in Registry)</P>
<P CLASS="ls">    2.    If the subnet you have is in the same network class as your service provider, (which is very likely in this scenario), you must also add the value <B>PriorityBasedOnSubNetwork </B>to the Registry of the RAS computer that routes packets from the LAN to the Internet, and then set this parameter to 1.</P>
<P CLASS="lt1">A computer can connect to the LAN using a network card and a RAS connection. If the RAS connection and the LAN network adapter card are assigned addresses with the same network number, and the Use Default Gateway On Remote Network check box is selected, then all packets are sent over the RAS connection, even though the two addresses are in different subnetworks within the same network. </P>
<P CLASS="lt1">For example, if the network adapter card has IP address 17.1.1.1 (subnet mask 255.255.0.0) and the RAS connection is assigned the address 17.2.1.1, RAS sends all 17.x.x.x packets using the RAS connection. If the parameter is set, RAS sends 17.2.x.x packets using the RAS connection and 17.1.x.x packets using the network adapter card.</P>
<P><BR></P>
<pre><code>\HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services<BR>     \RasMan\PPP\IPCP
</code></pre>
<P CLASS="lt1"><B>PriorityBasedOnSubNetwork          REG_DWORD<BR></B>Range: 0-1<BR>Default: 0 (not in Registry)</P>
<P></P>
<P CLASS="ls">    3.    Configure the default gateway of all the computers on the LAN using the Network option in Control Panel. </P>
<P CLASS="lt1">The default gateway is set when you configure the TCP/IP protocol.</P>
<P CLASS="lt1">Use the IP address of the network card adapter in the RAS computer acting as a router to the Internet as the default gateway for all computers on the LAN except this computer. The default gateway for the computer acting as the router to the Internet should be left blank. Refer to the following figure to determine the correct assignment pattern of IP addresses, subnet masks, and default gateways.</P>
<P CLASS="lt1"><img src="INET16.gif"></P>
<P CLASS="lt1"><B>Sample Configuration using RAS as a Simple Internet Router</B></P></FONT></BODY></HTML>
