<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Excluding Support for MS-DOS and Windows 16-bit Applications</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Excluding Support for MS-DOS and Windows 16-bit Applications</H3><P>To exclude the files needed to support for MS-DOS and Windows 16-bit applications, you must modify the INITIAL.INF file, commenting out the routine that modifies the Registry key for MS-DOS and Windows 16-bit support.If the supporting files are excluded but this routine is not commented out, Setup will report an error. Lines should be commented out using the semicolon (;) as shown in the following example:</P>
<P><BR></P>
<pre><code>;vdmconfig =+
;    shell "subroutn.inf" PushBillboard STATUSDLG $(Billboard5)
;    Debug-Output "SETUP.INF: Configuring the DOS Subsystem."
;    ifstr(i) $(!STF_WIN31UPGRADE) == NO
;        shell "registry.inf" AppendToSystemPath "%SystemRoot%"
;    endif
;    read-syms ConfigSysAppend
;    read-syms AutoexecBatAppend
;    LibraryProcedure STATUS,$(!LIBHANDLE),VdmFixup $(AddOnConfig) $(AddOnBatch)
;    ifstr(i) $(STATUS) == ERROR
;        shell "subroutn.inf" PopBillboard
;        EndWait
;        read-syms NonFatalError2$(!STF_LANGUAGE)
;        shell "subroutn.inf" SetupMessage $(!STF_LANGUAGE) NONFATAL $(NonFatal)
;        StartWait
;    endif
;    ifstr(i) $(!STF_PLATFORM) == $(!PlatformID_Mips)
;        set wowfile = krnl286
;    else
;        set wowfile = krnl386
;    endif
;    shell "registry.inf" MakeWOWEntry $(wowfile)</code></pre>
<P>Next, comment out the following files from the TXTSETUP.SIF, INITIAL.INF and DOSNET.INF files so the files that support MS-DOS and Windows 16-bit applications will not be installed. If you are upgrading from an earlier version of Windows&nbsp;NT in which MS-DOS and Windows 16-bit applications were used, list these same files in the [Files.DeleteOnUpgrade] section of the TXTSETUP.SIF file. Lines in this section use the following format:</P>
<P><I>file</I>, <I>dir</I></P>
<P>where <I>file</I> is the filename and <I>dir</I> is the code number that is assigned (in the [WinntDirectories] section) to the directory in which the file is found.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="126pt" VALIGN="TOP"><COL WIDTH="126pt" VALIGN="TOP"><COL WIDTH="126pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>_DEFAULT.PIF</P></TD><TD VALIGN="TOP"><P>ANSI.SYS</P></TD><TD VALIGN="TOP"><P>APP850.FON</P></TD></TR><TR><TD VALIGN="TOP"><P>APPEND.EXE</P></TD><TD VALIGN="TOP"><P>ATTRIB.EXE</P></TD><TD VALIGN="TOP"><P>AUTOEXEC.NT</P></TD></TR><TR><TD VALIGN="TOP"><P>BIOS1.ROM</P></TD><TD VALIGN="TOP"><P>BIOS2.ROM</P></TD><TD VALIGN="TOP"><P>BLACK16.SCR</P></TD></TR><TR><TD VALIGN="TOP"><P>CGA40850.FON</P></TD><TD VALIGN="TOP"><P>CGA40WOA.FON</P></TD><TD VALIGN="TOP"><P>CGA80850.FON</P></TD></TR><TR><TD VALIGN="TOP"><P>CGA80WOA.FON</P></TD><TD VALIGN="TOP"><P>CHCP.COM</P></TD><TD VALIGN="TOP"><P>CHKDSK.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>CMOS.RAM</P></TD><TD VALIGN="TOP"><P>COMM.DRV</P></TD><TD VALIGN="TOP"><P>COMMAND.COM</P></TD></TR><TR><TD VALIGN="TOP"><P>COMMDLG.DLL1</P></TD><TD VALIGN="TOP"><P>COMP.EXE</P></TD><TD VALIGN="TOP"><P>CONFIG.NT</P></TD></TR><TR><TD VALIGN="TOP"><P>COUNTRY.SYS</P></TD><TD VALIGN="TOP"><P>DDEML.DLL</P></TD><TD VALIGN="TOP"><P>DEBUG.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>DISKCOMP.COM</P></TD><TD VALIGN="TOP"><P>DISKCOPY.COM</P></TD><TD VALIGN="TOP"><P>DOSAPP.FON</P></TD></TR><TR><TD VALIGN="TOP"><P>DOSKEY.EXE</P></TD><TD VALIGN="TOP"><P>DOSX.EXE</P></TD><TD VALIGN="TOP"><P>DRWATSON.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>EDIT.COM</P></TD><TD VALIGN="TOP"><P>EDIT.HLP</P></TD><TD VALIGN="TOP"><P>EDLIN.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>EGA.CPI</P></TD><TD VALIGN="TOP"><P>EGA40850.FON</P></TD><TD VALIGN="TOP"><P>EGA40WOA.FON</P></TD></TR><TR><TD VALIGN="TOP"><P>EGA80850.FON</P></TD><TD VALIGN="TOP"><P>EGA80WOA.FON</P></TD><TD VALIGN="TOP"><P>EXE2BIN.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>EXPAND.EXE</P></TD><TD VALIGN="TOP"><P>FASTOPEN.EXE</P></TD><TD VALIGN="TOP"><P>FC.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>FIND.EXE</P></TD><TD VALIGN="TOP"><P>FINDSTR.EXE</P></TD><TD VALIGN="TOP"><P>FORCEDOS.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>FORMAT.COM</P></TD><TD VALIGN="TOP"><P>GDI.EXE</P></TD><TD VALIGN="TOP"><P>GRAFTABL.COM</P></TD></TR><TR><TD VALIGN="TOP"><P>GRAPHICS.COM</P></TD><TD VALIGN="TOP"><P>GRAPHICS.PRO</P></TD><TD VALIGN="TOP"><P>HELP.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>HIMEM.SYS</P></TD><TD VALIGN="TOP"><P>KB16.COM</P></TD><TD VALIGN="TOP"><P>KEYB.COM</P></TD></TR><TR><TD VALIGN="TOP"><P>KEYBOARD.DRV</P></TD><TD VALIGN="TOP"><P>KEYBOARD.SYS</P></TD><TD VALIGN="TOP"><P>KRNL386.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>LABEL.EXE</P></TD><TD VALIGN="TOP"><P>LANMAN.DRV</P></TD><TD VALIGN="TOP"><P>LOADFIX.COM</P></TD></TR><TR><TD VALIGN="TOP"><P>MAPI.DLL</P></TD><TD VALIGN="TOP"><P>MCIOLE16.DLL</P></TD><TD VALIGN="TOP"><P>MEM.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>MMSYSTEM.DLL1</P></TD><TD VALIGN="TOP"><P>MMTASK.TSK1</P></TD><TD VALIGN="TOP"><P>MODE.COM</P></TD></TR><TR><TD VALIGN="TOP"><P>MORE.COM</P></TD><TD VALIGN="TOP"><P>MOUSE.DRV</P></TD><TD VALIGN="TOP"><P>NTCMDS.HLP</P></TD></TR><TR><TD VALIGN="TOP"><P>NTCMDS.IND</P></TD><TD VALIGN="TOP"><P>NTDOS.SYS</P></TD><TD VALIGN="TOP"><P>NTIO.SYS</P></TD></TR><TR><TD VALIGN="TOP"><P>NTVDM.DLL</P></TD><TD VALIGN="TOP"><P>NTVDM.EXE</P></TD><TD VALIGN="TOP"><P>OLECLI.DLL</P></TD></TR><TR><TD VALIGN="TOP"><P>OLESVR.DLL1</P></TD><TD VALIGN="TOP"><P>PIFEDIT.EXE</P></TD><TD VALIGN="TOP"><P>QBASIC.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>RECOVER.EXE</P></TD><TD VALIGN="TOP"><P>REDIR.EXE</P></TD><TD VALIGN="TOP"><P>REGEDIT.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>REGEDIT.HLP</P></TD><TD VALIGN="TOP"><P>REMLINE.BAS</P></TD><TD VALIGN="TOP"><P>REPLACE.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>RESTORE.EXE</P></TD><TD VALIGN="TOP"><P>SETUP16.INF</P></TD><TD VALIGN="TOP"><P>SETVER.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>SHARE.EXE</P></TD><TD VALIGN="TOP"><P>SHELL.DLL1</P></TD><TD VALIGN="TOP"><P>SORT.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>SOUND.DRV</P></TD><TD VALIGN="TOP"><P>SUBST.EXE</P></TD><TD VALIGN="TOP"><P>SYSEDIT.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>SYSTEM.DRV</P></TD><TD VALIGN="TOP"><P>SYSTEM.INI</P></TD><TD VALIGN="TOP"><P>TOOLHELP.DLL</P></TD></TR><TR><TD VALIGN="TOP"><P>TREE.COM</P></TD><TD VALIGN="TOP"><P>V7VGA.ROM</P></TD><TD VALIGN="TOP"><P>VDMDBG.DLL</P></TD></TR><TR><TD VALIGN="TOP"><P>VDMREDIR.DLL</P></TD><TD VALIGN="TOP"><P>VER.DLL1</P></TD><TD VALIGN="TOP"><P>VGA.DRV</P></TD></TR><TR><TD VALIGN="TOP"><P>WFWNET.DRV</P></TD><TD VALIGN="TOP"><P>WIN.COM</P></TD><TD VALIGN="TOP"><P>WIN.INI</P></TD></TR><TR><TD VALIGN="TOP"><P>WIN87EM.DLL</P></TD><TD VALIGN="TOP"><P>WINFILE.INI</P></TD><TD VALIGN="TOP"><P>WINHELP.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>WOW32.DLL</P></TD><TD VALIGN="TOP"><P>WOWDEB.EXE</P></TD><TD VALIGN="TOP"><P>WOWEXEC.EXE</P></TD></TR><TR><TD VALIGN="TOP"><P>WRITE.EXE</P></TD><TD VALIGN="TOP"><P>XCOPY.EXE</P></TD><TD VALIGN="TOP"><P></P></TD></TR></TBODY></TABLE>
<P><BR></P><P>1    These files are listed twice in the INITIAL.INF file. Be sure to remove both occurrences of each to avoid receiving an error message from Setup.</P></FONT></BODY></HTML>
