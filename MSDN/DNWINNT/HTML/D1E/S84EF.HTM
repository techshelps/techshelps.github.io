<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Video Device Driver Entries</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Video Device Driver Entries</H3><P>This section describes the entries for video device drivers under the DeviceMap subkey and under the CurrentControlSet\Services subkeys for specific video drivers.</P>
<H4><A NAME="sec0"></A>Video Information in the DeviceMap Subkey</H4><P>The hardware device mapping for video is under the following subkey:</P>
<P><BR></P>
<pre><code>HKEY_LOCAL_MACHINE\Hardware\DeviceMap\Video</code></pre>
<P>This information is volatile and is reconstructed at startup by the video port driver. It can change from startup to startup based on external factors, such as failure to initialize a video adapter or the addition of other video cards to the system.</P>
<P>This subkey contains the mappings from Windows&nbsp;NT logical video devices to the physical device they represent in the CurrentControlSet\Services subkey. This mapping allows the system to find the right display driver for the currently installed video device.</P>
<P><I>%device_object_name%</I><B>     REG_SZ     </B><I>Registry path for device</I></P>
<P>Indicates the first logical video device is the first physical adapter. For example, the following entry indicates that the first logical video device is the second physical XGA adapter:</P>
<P><BR></P>
<pre><code>   Video\Device0 = \Registry\Machine\CurrentControlSet\Services\XGA\Device1</code></pre>
<P>In this example, the value in dicates that the second logical video device is the first physical VGA adapter:</P>
<P><BR></P>
<pre><code>   Video\Device1 = \Registry\Machine\CurrentControlSet\Serivces\Vga\Device0</code></pre>
<P>These values point to entries in the Services subkey, as described in the next section.</P>
<H4><A NAME="sec1"></A>Video Driver Entries in the Services Subkey</H4><P>The port driver portion of the video driver is hardware-independent and contains operating system-specific code. Therefore, the port driver, VIDEOPRT.SYS, can support one or more video devices. The Services\Videoprt subkey has no added parameters, and its standard entries are the following:</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="175pt" VALIGN="TOP"><COL WIDTH="217pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Value entry</P></TD><TD VALIGN="TOP"><P>Default value</P></TD></TR><TR><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>ErrorControl</B> </P></TD><TD VALIGN="TOP"><P>0x1 (Normal)</P></TD></TR><TR><TD VALIGN="TOP"><P><B>Group</B> </P></TD><TD VALIGN="TOP"><P>Video</P></TD></TR><TR><TD VALIGN="TOP"><P><B>Start</B> </P></TD><TD VALIGN="TOP"><P>0x1 (system)</P></TD></TR><TR><TD VALIGN="TOP"><P><B>Type</B> </P></TD><TD VALIGN="TOP"><P>0x1 (Kernel driver)</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>The specific subkey for each video driver contains all the information required to initialize and program the device properly. If several adapters can be handled by a single driver, the subkeys Device1, Device2, and so on will contain information for the other devices. The Registry path looks like this, where <I>VideoDriverName</I> is the name of a specific video device driver:</P>
<P><BR></P>
<pre><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services<BR>    \<I>VideoDriverName</I>\Device0</code></pre>
<P>The <I>VideoDriverName</I> subkeys for drivers in Windows&nbsp;NT include the following. This is not an exhaustive list:</P>
<P>Ati<BR>S3<BR>Wdvga<BR>ET4000<BR>Trident<BR>Xga<BR>Jazzg<I>xxx</I><BR>Vga</P>
<P>For example, the following subkey contains information for the first logical device of type VGA:</P>
<P><BR></P>
<pre><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Vga\Device0</code></pre>
<P>The following values can be set in a video driver subkey.</P>
<P><B>DefaultSettings.BitsPerPel     REG_DWORD</B><I>     Number of bits per pixel</I></P>
<P>Contains the number of colors for the mode requested by the user. For example, for the v7vram miniport, the following value yields a 256-color mode:</P>
<P><BR></P>
<pre><code>   DefaultSettings.BitsPerPel = 8</code></pre>
<P><B>DefaultSettings.Interlaced     REG_DWORD     </B><I>0 or 1</I></P>
<P>Determines whether the mode requested by the user is interlaced. For example, for the v7vram miniport:</P>
<P><BR></P>
<pre><code>   DefaultSettings.Interlaced = 0x0 (FALSE)</code></pre>
<P><B>DefaultSettings.VRefresh     REG_DWORD     </B><I>Number Hz</I></P>
<P>Contains the refresh rate of the mode requested by the user. For example, for the et4000 miniport:</P>
<P><BR></P>
<pre><code>   DefaultSettings.VRefresh = 72</code></pre>
<P><B>DefaultSettings.XResolution     REG_DWORD     </B><I>Number of pixels</I></P>
<P>Contains the width of the mode requested by the user. For example, for the et4000 miniport:</P>
<P><BR></P>
<pre><code>   DefaultSettings.Xresolution = 1024</code></pre>
<P><B>DefaultSettings.YResolution     REG_DWORD     </B><I>Number of pixels</I></P>
<P>Contains the height of the mode requested by the user. For example, for the et4000 miniport:</P>
<P><BR></P>
<pre><code>   DefaultSettings.Yresolution = 768</code></pre>
<P><B>DeviceData     REG_BINARY     </B><I>Binary code</I></P>
<P>Contains binary data specific to the Windows display driver. For example, for the VGA miniport:</P>
<P><BR></P>
<pre><code>   DeviceData = 05a0 5075 8ef0 8456 c8dd</code></pre>
<P><B>InstalledDisplayDrivers     REG_MULTI_SZ     </B><I>Driver names</I></P>
<P>Contains a list of names of display drivers that can function with this miniport, depending on which mode is selected by the user.</P>
<P></P>
<P><B>Note   </B>Display driver names do not contain the .DLL filename extension.</P>
<P>The system attempts to initialize the adapter by calling each display driver, using the user-selected parameter. If the combination of display driver and monitor do not support the mode requested by the user, the display driver fails to initialize and the system tries the next display driver. If all display drivers fail to initialize, the system calls the first display driver again to set the adapter to any mode it can. </P>
<P>For example, for the et4000 miniport:</P>
<P><BR></P>
<pre><code>   InstalledDisplayDrivers = "vga" "vga256" "vga64k"</code></pre>
<P>For the S3 miniport:</P>
<P><BR></P>
<pre><code>   InstalledDisplayDrivers = "s3"</code></pre>
<P><B>Monitor     REG_SZ     </B><I>Monitor name</I></P>
<P>This entry is reserved to contain the name of the VESA VDIF monitor information file for the monitor connected to the adapter. No such files are provided with Windows&nbsp;NT in the current version.</P>
<P>If a file is supplied and a value is added, the miniport can load this file to determine the exact timings of the monitor connected to the physical device.</P>
<P>For example, for the XGA miniport, if a NEC4FS monitor was attached to the XGA card:</P>
<P><BR></P>
<pre><code>   Monitor = "NEC4fg.vdb"</code></pre>
<P><B>VgaCompatible     REG_DWORD     </B><I>0 or 1</I></P>
<P>Determines whether the driver supports all of the VGA functionality required to perform full-screen operations.</P>
<P>If this value is 1, the driver supports full-screen applications in <I>x</I>86-based computers. If this value is 0, the VGA miniport (described under the Vga subkey) will also be used to enable and disable full-screen modes for non-Windows-based applications.</P>
<P>As a general rule, all drivers for SVGA adapters should set this value to 1, because they must implement all the VGA functionality to perform extended save/restore of all registers. A video accelerator designed as an accelerator working independently of the VGA miniport (via pass-through) can set this to 0 and let the VGA miniport do all the full-screen work.</P>
<P>For example, for the et4000 miniport:</P>
<P><BR></P>
<pre><code>   VgaCompatible = 0x1 (TRUE)</code></pre>
<P>For the S3 miniport:</P>
<P><BR></P>
<pre><code>   VgaCompatible = 0x0 (FALSE)</code></pre>
<P>This functionality is not required for other computer platforms, such as RISC-based computers, because the VDM sessions are emulated using NTVDM.EXE, and there are no full-screen sessions.</P>
<H4><A NAME="sec2"></A>Video Driver Entries in the Software Subkey</H4><P>The optional entries for open graphics libraries (OpenGL) are under the following subkey:</P>
<P><BR></P>
<pre><code>HKEY_LOCAL_MACHINE\Software\Microsoft\WindowsNT<BR>    \CurrentVersion\OpenGLDrivers</code></pre>
<P><I>%display_driver_name%</I><B>     REG_SZ     </B><I>%OpenGL_client_driver_name%</I></P>
<P>For example, suppose that MYOPENGL.DLL is the OpenGL client driver for the display driver MYDISP.DLL. Then the OpenGLDrivers subkey would have the value-data pair:</P>
<P><BR></P>
<pre><code>   mydisp: REG_SZ: myopengl</code></pre>
<P>The subkey may be empty if no OpenGL client drivers are installed. This value can be changed via the Control Panel Display option. Manual modification should not be necessary except for manual installation or uninstallation of OpenGL client drivers (which is different from the OpenGL built into the GDI). Only one client driver is allowed for each unique display driver name.</P></FONT></BODY></HTML>
