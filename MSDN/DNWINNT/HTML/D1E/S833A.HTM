<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Format of the TXTSETUP.SIF File</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Format of the TXTSETUP.SIF File</H3><P>Like the INITIAL.INF and PARTIAL.INF files, the TXTSETUP.SIF file is a text file containing sections marked by section titles in square brackets. The TXTSETUP.SIF file specifies what files are to be copied and what changes are to be made to an existing Registry during the initial, text mode, phase of Setup. The structure of this file allows conditional file copies.</P>
<P>For example, certain files might need to be copied only during an upgrade from an earlier version of Windows&nbsp;NT, and not during a fresh installation. Or, a file might need to be copied only if a version of the file already exists in the target directory. What Setup should do in each case is specified in the TXTSETUP.SIF file. In the case of an upgrade, sections in this file also specify changes to the existing Registry. In addition, the TXTSETUP.SIF file specifies supported hardware, files that should be deleted if found on the existing system, and options for booting.</P>
<P>The sections that you most likely need to modify in order to customize Setup are listed in the following table, in the order they are found in the TXTSETUP.SIF file.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="108pt" VALIGN="TOP"><COL WIDTH="246pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Section</P></TD><TD VALIGN="TOP"><P>Specifies</P></TD></TR><TR><TD VALIGN="TOP"><P>[Files.DeleteOnUpgrade]</P></TD><TD VALIGN="TOP"><P>Files used in a previous version of Windows&nbsp;NT that are to be deleted before the new version is installed.</P></TD></TR><TR><TD VALIGN="TOP"><P>[Files.BackupOnUpgrade]</P></TD><TD VALIGN="TOP"><P>Files used in a previous version of Windows&nbsp;NT that are to be backed up before the new version is installed.</P></TD></TR><TR><TD VALIGN="TOP"><P>[Files.BackupOnOverwrite]</P></TD><TD VALIGN="TOP"><P>Files that are to be backed up (if they exist) before overwriting them during Setup. The files are only backed up if they are to be overwritten.</P></TD></TR><TR><TD VALIGN="TOP"><P>[Files.UpgradeWin31]</P></TD><TD VALIGN="TOP"><P>Files used with a Microsoft Windows 3.1 product (including Windows for Workgroups) that are also used by Windows&nbsp;NT. These files will not be replaced with Windows&nbsp;NT files by the same name during Setup if you are installing Windows&nbsp;NT into a Windows 3.1 directory.</P></TD></TR><TR><TD VALIGN="TOP"><P>[WinntDirectories]</P></TD><TD VALIGN="TOP"><P>Numbers assigned to each subdirectory of the Windows&nbsp;NT root directory. These numbers are used in other sections to locate the individual files.</P></TD></TR><TR><TD VALIGN="TOP"><P>[SetupData]</P></TD><TD VALIGN="TOP"><P>Required resources, such as available disk space; also options to be used during setup, such as debugging.</P></TD></TR><TR><TD VALIGN="TOP"><P>[Media]</P></TD><TD VALIGN="TOP"><P>Short name assigned to each floppy disk in the Windows&nbsp;NT installation disk set or to the Windows&nbsp;NT installation CD.</P></TD></TR><TR><TD VALIGN="TOP"><P>[Files]</P></TD><TD VALIGN="TOP"><P>All files in the installation set for this platform.</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>There are also sections for manipulating the Registry. Generally, it is best to make changes to the Registry only through graphical interfaces such as the Administrative tools and Control Panel icons, and avoid working with the Registry directly. However, if you routinely use Regedit32 to change Registry entries after installation, you can use these sections to incorporate the changes during Setup. For more information, see "Using the TXTSETUP.SIF File to Update the Registry," later in this chapter.</P>
<H4><A NAME="sec0"></A>The [Files.DeleteOnUpgrade] Section</H4><P>The [Files.DeleteOnUpgrade] section of the TXTSETUP.SIF file lists the files that you might have installed in a previous version of Windows&nbsp;NT that need to be deleted when you upgrade to the current version.</P>
<P>The format of this section is <I>file</I>, <I>dir </I>where <I>file</I> is the filename and <I>dir</I> is the subdirectory of the Windows&nbsp;NT root directory where the file will be found. The subdirectory is specified with a number, as defined in the [WinntDirectories] section.</P>
<H4><A NAME="sec1"></A>The [Files.BackupOnUpgrade] Section</H4><P>The [Files.BackupOnUpgrade] section of the TXTSETUP.SIF file lists the files that you might have installed in a previous version of Windows&nbsp;NT that need to be backed up before you upgrade to the current version.</P>
<P>The format of this section is <I>file</I>, <I>dir</I>, <I>newname </I>where <I>file</I> is the filename, <I>dir</I> is the subdirectory of the Windows&nbsp;NT root directory where the file will be found, and <I>newname</I> is the name you want to give the backup copy of the file. The subdirectory is specified with a number, as defined in the [WinntDirectories] section.</P>
<H4><A NAME="sec2"></A>The [Files.BackupOnOverwrite] Section</H4><P>The [Files.BackupOnOverwrite] section of the TXTSETUP.SIF file lists the files that you might have installed in a previous version of Windows&nbsp;NT that need to be backed up before they are overwritten during an upgrade to the current version of Windows&nbsp;NT. If the files are not overwritten during the upgrade process, they are not backed up.</P>
<P>The format of this section is <I>file</I>, <I>dir</I>, <I>newname </I>where <I>file</I> is the filename, <I>dir</I> is the subdirectory of the Windows&nbsp;NT root directory where the file will be found, and <I>newname</I> is the name you want to give the backup copy of the file. The subdirectory is specified with a number, as defined in the [WinntDirectories] section.</P>
<H4><A NAME="sec3"></A>The [Files.UpgradeWin31] Section</H4><P>The [Files.UpgradeWin31] section of the TXTSETUP.SIF file lists the files that might exist in an existing installation of Windows 3.1 or related operating system (such as Windows for Workgroups 3.1) that are also used by Windows&nbsp;NT. The files are listed in this section if they are not to be replaced with Windows&nbsp;NT files by the same filename during setup.</P>
<P>The format of this section is <I>file</I>, <I>dir </I>where <I>file</I> is the filename and <I>dir</I> is the subdirectory of the Windows&nbsp;NT root directory where the file will be found. The subdirectory is specified with a number, as defined in the [WinntDirectories] section.</P>
<H4><A NAME="sec4"></A>The [WinntDirectories] Section</H4><P>The [WinntDirectories] section of the TXTSETUP.SIF file assigns a number to the Windows&nbsp;NT root directory and each of its subdirectories. These numbers are used in other sections of the TXTSETUP.SIF file to specify the locations of files. If you want to add a subdirectory for files specific to your corporation, you can specify it in this section.</P>
<P>The format of this section is <I>n</I> = <I>directory</I>, where <I>n</I> is an integer and <I>directory</I> is the path, relative to the Windows&nbsp;NT root directory. The following is an example of a typical [WinntDirectories] section:</P>
<P><BR></P>
<pre><code>[WinntDirectories]
1  = \
2  = system32
3  = system32\config
4  = system32\drivers</code></pre>
<H4><A NAME="sec5"></A>The [SetupData] Section</H4><P>The [SetupData] section of the TXTSETUP.SIF file supplies data used by Setup. This includes required resources, such as available disk space, and debugging options.</P>
<P>The following is an example of a typical [SetupData] section:</P>
<P><BR></P>
<pre><code>[SetupData]
ProductType = 0
MajorVersion = 3
MinorVersion = 50
FreeDiskSpace = 80000
FreeSysPartDiskSpace = 750
UpgradeFreeDiskSpace = 10000
UpgradeFreeSysPartDiskSpace = 500
DefaultPath=\WINNT35
LoadIdentifier  = "Windows&nbsp;NT Workstation Version 3.5"
BaseVideoLoadId = "Windows&nbsp;NT Workstation Version 3.5 [VGA mode]"
OsLoadOptions = "/nodebug"
AllowFloppySetup = 1
RequiredMemory = 7864320</code></pre>
<P>The lines that you might need to modify in the [SetupData] section are as follows:</P>
<P><B>FreeDiskSpace</B></P>
<P>Specifies the amount of free disk space that must be available for a fresh installation of Windows&nbsp;NT. If you add files to your custom installation, increase this value by the number of bytes in the files you add. If you exclude files from your custom installation, decrease this value by the number of bytes in the files you exclude.</P>
<P><B>UpgradeFreeDiskSpace</B></P>
<P>Specifies the amount of free disk space that must be available for an upgrade from an earlier version of Windows&nbsp;NT. If you add files to your custom installation, increase this value by the number of bytes in the files you add. If you exclude files from your custom installation, decrease this value by the number of bytes in the files you exclude.</P>
<P><B>DefaultPath</B></P>
<P>Specifies the location of the system root directory of Windows&nbsp;NT relative to the drive the files are installed on. If you want your custom installation to be written to a directory other than \WINNT35, change the specification on this line.</P>
<P><B>LoadIdentifier</B></P>
<P>Specifies the text that appears during setup to identify the system that is being installed. You can change the text in quotes to describe your custom installation.</P>
<P><B>BaseVideoLoadId</B></P>
<P>Specifies the text that appears when the installation is using the /BASEVIDEO option. This applies only when installing on x86 computers.</P>
<P><B>OsLoadOptions </B></P>
<P>Specifies debugging options, which are enclosed in double quote marks. The options you specify here apply only to text mode setup. To have one or more of these options applied after text mode setup (that is, during Graphical mode setup and any other time the computer is started), add the line <B>OsLoadOptionsVar = /</B><B><I>option</I></B><B> [/</B><B><I>option</I></B><B>...]</B>. For <B>OsLoadOptionsVar</B>, as for <B>OsLoadOptions</B>, the options you specify must be enclosed in double quote marks. </P>
<P>The options for OsLoadOptionsVAR<B> </B>are the same as those for OsLoadOptions and are listed in the following table:</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="93pt" VALIGN="TOP"><COL WIDTH="240pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Option</P></TD><TD VALIGN="TOP"><P>Description</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>/NODEBUG</P></TD><TD VALIGN="TOP"><P>The default; it means that no debugging information is collected or transmitted during installation.</P></TD></TR><TR><TD VALIGN="TOP"><P>/DEBUG</P></TD><TD VALIGN="TOP"><P>The customary switch to enable debugging. The last standard COM port found is used, unless a port is specified with the /DEBUGPORT=COM<I>x</I> switch.</P></TD></TR><TR><TD VALIGN="TOP"><P>/DEBUGPORT=COM<I>x</I></P></TD><TD VALIGN="TOP"><P>Sends debug output to the specific COM port.</P></TD></TR><TR><TD VALIGN="TOP"><P>/BAUDRATE=nnnnn</P></TD><TD VALIGN="TOP"><P>Specifies the baud rate at which data is sent through the COM port for remote debugging using a modem. The default is 19200.</P></TD></TR><TR><TD VALIGN="TOP"><P>/NoSerialMice</P></TD><TD VALIGN="TOP"><P>Disables the serial mouse detection on certain COM ports. It is mostly used to exclude ports used by the uninterruptible power supply (UPS) system. The detection signal causes some UPS units to power down, thereby turning off the computer. If you need to use this switch, you might also want to add it to the BOOT.INI file, as described in Chapter&nbsp;18, "Troubleshooting."</P>
<P>You can use multiple <B>/NoSerialMice</B> switches. The format is as follows:</P>
<P><B>/NoSerialMice=</B>[<B>COM</B><I>x</I> | <B>COM</B><I>x</I><B>,COM</B><I>y</I><B>,COM</B><I>z</I><B>,</B>...]</P>
<P>If <B>/NoSerialMice</B> is specified without parameters, serial mouse detection is disabled on all the serial ports. If <B>/NoSerialMice=COM</B><B><I>x</I></B> is specified, serial mouse detection is only disabled on COM<I>x</I>. If <B>/NoSerialMice=COM</B><B><I>x</I></B><B>,COM</B><B><I>y</I></B><B>,COM</B><B><I>z</I></B><B> ...</B> is specified, serial mouse detection is disabled on each of the specified ports.</P></TD></TR></TBODY></TABLE>
<P><BR></P><P><B>AllowFloppySetup</B></P>
<P>Specifies whether the installation must be from a CD or whether floppy disk sets can be used. To prevent installations from being made using floppy disk sets, set this value to <B>0</B>.</P>
<H4><A NAME="sec6"></A>The [Media] Section</H4><P>The [Media] section of the TXTSETUP.SIF file is used to assign a code to each of the floppy disks in the Windows&nbsp;NT installation disk set and to assign the <B>dx</B> code to the Windows&nbsp;NT installation CD. If you add a disk to the installation disk set, add it to the end of this section. The code you assign to it can then be used in other sections of the TXTSETUP.SIF file to indicate to Setup where to find the files you have placed on this disk. Files that you add to a distribution share will all be identified as being on&nbsp;<B>dx</B>.</P>
<H4><A NAME="sec7"></A>The [Files] Section</H4><P>The [Files] section of the TXTSETUP.SIF file lists all the files for the platform. Each file in this section is listed in the following format:</P>
<P><I>filename </I>= <B>dx</B>, <I>disk id</I>, [<I>boot floppy</I>], <I>install directory</I>, <I>conditions for upgrade </I>[,<I>conditions for fresh install</I>[,<I>new file name</I>]]</P>
<P>where the <B>dx</B> parameter is read when installing from the CD. It is defined in the [Media] section of this file, which immediately precedes the [Files] section. This parameter must always be present.</P>
<P><I>Disk id </I>is used when installing from a set of floppy disks, and specifies the floppy disk on which the file is found. It also is defined in the [Media] section.</P>
<P><I>Boot floppy </I>specifies the bootable floppy disk on which the file can be found. If the file is not on any bootable floppy disk, this field is blank. This parameter is primarily used to specify a SCSI miniport driver.</P>
<P><I>Install directory </I>is the directory to which the file will be copied, as defined in the [WinntDirectories] section. All definitions in the [WinntDirectories] section are subdirectories of the Windows&nbsp;NT root directory. You are prompted for this directory during the text mode stage of Setup.</P>
<P><I>Conditions for upgrade</I> is a single digit that specifies whether the file is to be copied during the text mode portion of setup when upgrading from an earlier version of Windows&nbsp;NT. The possible values for <I>conditions for upgrade</I> are listed in the following table:</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="72pt" VALIGN="TOP"><COL WIDTH="274pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Code</P></TD><TD VALIGN="TOP"><P>Action</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>0</P></TD><TD VALIGN="TOP"><P>Copy always</P></TD></TR><TR><TD VALIGN="TOP"><P>1</P></TD><TD VALIGN="TOP"><P>Copy only if the file exists in the install directory</P></TD></TR><TR><TD VALIGN="TOP"><P>2</P></TD><TD VALIGN="TOP"><P>Do not copy if the file exists in the install directory</P></TD></TR><TR><TD VALIGN="TOP"><P>3</P></TD><TD VALIGN="TOP"><P>Do not copy</P></TD></TR></TBODY></TABLE>
<P><BR></P><P><I>Conditions for fresh install </I>is a single digit that specifies whether the file is to be copied during the text mode portion of setup when installing on a computer that has no earlier version of Windows&nbsp;NT. This value is optional; if it is not included, the file is not copied. The possible values are the same as those for <I>conditions for upgrade</I>.</P>
<P><I>New file name </I>is the name the file will be renamed to when it is copied. If this parameter is omitted, the file will not be renamed.</P>
<P>The following is an example of a typical line in the [Files] section of the TXTSETUP.SIF file:</P>
<P><BR></P>
<pre><code>ntkrnlmp.exe = dx,d4,_1,2,3</code></pre>
<P>This line specifies that the file, NTKRNLMP.EXE, is found on the CD or on floppy disk <B>d4</B> (as defined in the [Media] section). It is also found on boot floppy disk <B>_1</B>, which is also defined in the [Media] section. It is to be installed in directory <B>2</B>, as defined in the [WinntDirectories] section. Since the line in the [WinntDirectories] section for directory 2 reads as <B>2 = system32</B>, the file is installed in the \SYSTEM32 subdirectory of the Windows&nbsp;NT root directory. The <B>3</B> at the end of the line means the file is not copied during text mode setup when upgrading from an earlier version of Windows&nbsp;NT. Since the last two parameters are missing, this line does not cause the file to be copied during text mode setup when installing on a computer that has no version of Windows&nbsp;NT installed, and the file is not renamed when copied.</P>
<P><B>Note</B>   Lines in the TXTSETUP.SIF file beginning with a semicolon (;) are comments and ignored by Setup. Remember that you must use the correct symbol for the file you are modifying; otherwise, Setup fails.</P></FONT></BODY></HTML>
