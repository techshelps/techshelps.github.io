<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MS-DOS Environment</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>MS-DOS Environment</H3><P>When run on Windows&nbsp;NT, MS-DOS-based applications run within the context of a process called a <I>Virtual DOS Machine</I> (VDM). A <I>VDM</I> is a Win32 application that establishes a complete virtual <I>x</I>86 (that is, 80386 or higher) computer running MS-DOS. There is no limit on the number of VDMs that can be run. Each VDM runs in its own address space, which protects the applications from each other and the rest of the operating system from the VDMs. </P>
<P>When Windows&nbsp;NT is running on an <I>x</I>86 processor, a processor mode called <I>Virtual-86</I> mode is available. This mode allows direct execution of most instructions in an MS-DOS – based application. A few instructions, such as I/O instructions, must be emulated in order to virtualize the hardware. When Windows&nbsp;NT is running on a RISC processor, hardware support for executing <I>x</I>86 instructions is not available. In such an environment, it is necessary to emulate all of the <I>x</I>86 instructions in addition to providing a virtual hardware environment.</P>
<P>To run MS-DOS – based applications, the VDM creates a virtual computer that provides the following features:</P>
<UL><LI>     Support for processing <I>x</I>86 instructions, provided by the Instruction Execution Unit </LI><LI>     Support for read-only memory basic input and output (ROM BIOS) interrupt services, provided by the MS-DOS emulation module </LI><LI>     Support for MS-DOS Interrupt 21 services, provided by the MS-DOS emulation module</LI><LI>     Virtual hardware for devices such as the screen and keyboard, provided by Virtual Device Drivers (VDDs)</LI></UL><P><img src="XRGA13.gif"></P>
<P>Figure 1.12    Structure of an MS-DOS VDM</P>
<P>On <I>x</I>86-based computers, character-based applications can run either in a window or in a full screen. Graphical applications can run only in full screen. If an application is in a window and then changes the video mode, it is automatically switched to full screen. On RISC-based computers, character-based and graphical applications run only in a window.</P></FONT></BODY></HTML>
