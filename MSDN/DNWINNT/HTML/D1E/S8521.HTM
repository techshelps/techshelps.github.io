<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Workstation Service Entries</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Workstation Service Entries</H3><P>You can modify the startup parameters for the Workstation service using the Registry Editor. Unless otherwise indicated, these value entries are found in the following Registry path:</P>
<P><BR></P>
<pre><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services<BR>    \LanmanWorkstation\Parameters</code></pre>
<P>The parameters that control network bindings for this service are described in "NetRules Subkey Entries," earlier in this chapter.</P>
<P><B>BufFilesDenyWrite     REG_DWORD     </B><I>0 or 1</I></P>
<P>Specifies whether the redirector should cache files that are opened with only FILE_SHARE_READ sharing access. Usually, if a file is opened with FILE_SHARE_READ specified, the file cannot be buffered because other processes may also be reading that file. This optimization allows the redirector to buffer such files. This optimization is safe because no process can write to the file.</P>
<P>Disable this parameter if it is necessary to preserve the strict semantics of the sharing modes specified.</P>
<P>Default:  1 (true)</P>
<P><B>BufNamedPipes     REG_DWORD     </B><I>0 or 1</I></P>
<P>Indicates whether the redirector should buffer character-mode named pipes.</P>
<P>Disable this parameter to guarantee that all pipe write operations are flushed to the server immediately and to disable read ahead on character-mode named pipes.</P>
<P>Default:  1 (true)</P>
<P><B>BufReadOnlyFiles     REG_DWORD     </B><I>0 or 1</I></P>
<P><BR></P>
<pre><code>...\CurrentControlSet\Services\LanmanWorkstation</code></pre>
<P>Specifies whether the redirector should cache files that are read-only. Usually, if a read-only file is opened, the file cannot be buffered because other processes may also be reading that file. This optimization allows the redirector to buffer such files. This optimization is safe because no process can write to the file. However, another user can modify the file to enable writing to the file, causing loss of data.</P>
<P>Disable this parameter if it is necessary to preserve the strict semantics of the sharing modes specified.</P>
<P>Default:  1 (true)</P>
<P><B>CacheFileTimeout     REG_DWORD     </B><I>Number of seconds</I></P>
<P>Specifies the maximum time that a file will be left in the cache after the application has closed the file.</P>
<P>Increase the value of this parameter if you are performing operations on the server that could cause files to be reopened more than 10 seconds after the application has closed them. For example, if you are performing a build over the network, you should increase this parameter's value.</P>
<P>Default:  10</P>
<P><B>CharWait     REG_DWORD     </B><I>0 to 65535 milliseconds</I></P>
<P>Specifies time to wait for an instance of a named pipe to become available when opening the pipe. </P>
<P>Increase this value if your pipe server application is typically very busy.</P>
<P>Default:  3600</P>
<P><B>CollectionTime     REG_DWORD     </B><I>0 to 65535000 milliseconds</I></P>
<P>Specifies the maximum time that write-behind data will remain in a character-mode pipe buffer. </P>
<P>Changing this value may cause a named pipe application's performance to improve (but it does not affect SQL Server applications).</P>
<P>Default:  250</P>
<P><B>DormantFileLimit     REG_DWORD     </B><I>Number of files</I></P>
<P>Specifies the maximum number of files that should be left open on a share after the application has closed the file.</P>
<P>This parameter exists because the default configuration of LAN Manager servers only allow a total of 60 open files from remote clients and 50 from each client workstation. Because the Windows&nbsp;NT redirector may keep files open in the cache after an application has closed the file, this means that the redirector may overload a misconfigured LAN Manager server. To correct this problem, either reduce this value, or increase the values for the LAN Manager server's <B>maxSessopens</B> and <B>maxOpens</B> parameters.</P>
<P>Default:  45</P>
<P><B>IllegalDatagramResetTime     REG_DWORD     </B><I>Number of seconds</I></P>
<P>Specifies the span of time during which the number of illegal datagram events is counted. Because Windows&nbsp;NT logs all illegal datagrams, it is possible for the event log to be filled with a proliferation of these in a short amount of time. This entry and the <B>NumIllegalDatagramEvents</B> entry work together to limit the number of illegal datagrams that are recorded in the log within a certain span of time.</P>
<P>Default:  60</P>
<P><B>KeepConn     REG_DWORD     </B><I>1 to 65535 seconds</I></P>
<P>Specifies the maximum amount of time that a connection can be left dormant. This&nbsp;parameter is the redirector equivalent of the <B>Disc </B>parameter in the Services\LanmanServer\Parameters subkey.</P>
<P>As a general rule, try increasing this value if your application closes and opens UNC files to a server less frequently than 10 minutes apart. This decreases the number of reconnections made to a server. </P>
<P>Default:  600</P>
<P><B>LockIncrement     REG_DWORD     </B><I>Number of milliseconds</I></P>
<P>This parameter is not used for Win32 applications. However, if OS/2-based applications request that a lock operation waits forever, and if the lock cannot be immediately granted on a non-LAN Manager version 2.0 server, this parameter controls the rate at which the redirector ramps back the failed lock operations.</P>
<P>This parameter should not be changed unless you are running an OS/2-based application that requests lock operations that might fail.</P>
<P>Default:  10</P>
<P><B>LockMaximum     REG_DWORD     </B><I>Number of milliseconds</I></P>
<P>Used to configure the lock backoff package. This parameter exists to prevent an errant application from "swamping" a server with nonblocking requests where there is no data available for the application. </P>
<P>Default:  500</P>
<P><B>LockQuota     REG_DWORD</B><I>     Bytes of data</I></P>
<P>Specifies the maximum amount of data that is read for each file using this optimization if the <B>UseLockReadUnlock</B> parameter is enabled.</P>
<P>Increase this value if your application performs a significant number of lock-and-read style operations. (This means performing lock operations and immediately reading the contents of the locked data.) It is conceivable that you could cause the system to run out of paged pool, but only by increasing this value to a few megabytes and by using an application that locks millions-of-byte ranges.</P>
<P>Default:  4096 (bytes)</P>
<P><B>LogElectionPackets     REG_DWORD</B><I>     0 or 1</I></P>
<P>Specifies whether the Browser should generate events when election packets are received.</P>
<P>Default:  0 (false)</P>
<P><B>MailslotBuffers     REG_DWORD</B><I>     Number of buffers</I></P>
<P>Specifies the maximum number of buffers available to process mailslot messages. If your application uses many mailslot operations, set this higher to avoid losing mailslot messages.</P>
<P>Default:  5</P>
<P><B>MaxCmds     REG_DWORD</B><I>     0 to 255</I></P>
<P>Specifies the maximum number of work buffers that the redirector reserves for performance reasons. </P>
<P>Increase this value to increase your network throughput. If your application performs more than 15 simultaneous operations, you might want to increase this value. Because this parameter actually controls the number of execution threads that can be simultaneously outstanding at any time, your network performance will not always be improved by increasing this parameter. Each additional execution threads takes about 1K of nonpaged pool if you actually load up the network. Resources will not be consumed, however, unless the user actually makes use of them.</P>
<P>Default:  15</P>
<P><B>MaxCollectionCount     REG_DWORD</B><I>     0 to 65535 bytes</I></P>
<P>Specifies the threshold for character-mode named pipes writes. If the write is smaller than this value, the write will be buffered. Adjusting this value may improve performance for a named-pipe application (but it will not affect SQL server applications).</P>
<P>Default:  16</P>
<P><B>NumIllegalDatagramEvents     REG_DWORD</B><I>     Number of events</I></P>
<P>Specifies the maximum number of datagram events to be logged within the span of time specified by the <B>IllegalDatagramResetTime</B> parameter. Because Windows&nbsp;NT logs all illegal datagrams, the event log can be filled with a proliferation of these in a short time. This entry and the <B>IllegalDatagramResetTime</B> entry work together.</P>
<P>Default:  5</P>
<P><B>OtherDomains     REG_SZ     </B><I>DomainNames</I></P>
<P>Specifies the Microsoft LAN Manager domains to be listed for browsing.</P>
<P>Default:  (none)</P>
<P><B>PipeIncrement     REG_DWORD</B><I>     Number of milliseconds</I></P>
<P>Controls the rate at which the redirector "backs off" on failing nonblocking pipe reads.</P>
<P>This parameter is used to prevent an errant application from swamping a server with nonblocking requests where there is no data available for the application. You can use the backoff statistics to tune this parameter to be more efficient for an application that uses nonblocking named pipes (except for SQL Server applications).</P>
<P>Default:  10</P>
<P><B>PipeMaximum     REG_DWORD</B><I>     Number of milliseconds</I></P>
<P>Controls the maximum time at which the redirector "backs off" on failing nonblocking pipe reads.</P>
<P>This parameter exists to prevent an errant application from swamping a server with nonblocking requests where there is no data available for the application. You can use the backoff statistics to tune this parameter to be more efficient for an application that uses nonblocking named pipes (except for SQL Server applications).</P>
<P>Default:  500</P>
<P><B>ReadAheadThroughput     REG_DWORD</B><I>     Kilobytes per second</I></P>
<P>Specifies the throughput required on a connection before the cache manager is told to enable read ahead.</P>
<P>Default:  0xffffffff</P>
<P><B>ServerAnnounceBuffers     REG_DWORD</B><I>     Number</I></P>
<P>Specifies the maximum buffers used to process server announcements. If your network has many servers, you can increase this value to avoid losing server announcements. </P>
<P>This parameter is found under the LanmanWorkstation\Parameters\Static subkey.</P>
<P>Default:  20</P>
<P><B>SessTimeout     REG_DWORD</B><I>     10 to 65535 seconds</I></P>
<P>Specifies the maximum amount of time that the redirector allows an operation that is not long-term to be outstanding. </P>
<P>Default:  45</P>
<P><B>SizCharBuf     REG_DWORD</B><I>     64 to 4096 bytes</I></P>
<P>Specifies the maximum number of bytes that will be written into a character-mode pipe buffer. Adjusting this value may improve performance for a named-pipe application (but it will not affect SQL server applications).</P>
<P>Default:  512</P>
<P><B>Transports     REG_MULTI_SZ</B><I>     List</I></P>
<P>Lists the transports that the redirector services and is found under the LanmanWorkstation\Linkage subkey. You should modify it by choosing the Network icon in Control Panel. </P>
<P>Default:  None</P>
<P><B>Use512ByteMaxTransfer     REG_DWORD     </B><I>0 or 1</I></P>
<P>Specifies whether the redirector should only send a maximum of 512 bytes in a request to an MS-Net server regardless of the servers-negotiated buffer size. If this parameter is disabled, request transfers from the Windows&nbsp;NT redirector could cause the MS-Net server to crash.</P>
<P>Default:  0 (false)</P>
<P><B>UseLockReadUnlock     REG_DWORD     </B><I>0 or 1</I></P>
<P>Indicates whether the redirector uses the lock-and-read and write-and-unlock performance enhancements. </P>
<P>When this value is enabled, it generally provides a significant performance benefit. However, database applications that lock a range and don't allow data within that range to be read will suffer performance degradation unless this parameter is disabled. </P>
<P>Default:  1 (true)</P>
<P><B>UseOpportunisticLocking     REG_DWORD     </B><I>0 or 1</I></P>
<P>Indicates whether the redirector should use opportunistic-locking (oplock) performance enhancement. This parameter should be disabled only to isolate problems.</P>
<P>Default:  1 (true)</P>
<P><B>UseRawRead     REG_DWORD     </B><I>0 or 1</I></P>
<P>Enables the raw-read optimization. This provides a significant performance enhancement on a local area network </P>
<P>Default:  1 (true)</P>
<P><B>UseRawWrite     REG_DWORD     </B><I>0 or 1</I></P>
<P>Enables the raw-write optimization. On a LAN, this provides a significant performance enhancement. </P>
<P>Default:  1 (true)</P>
<P><B>UseUnlockBehind     REG_DWORD     </B><I>0 or 1</I></P>
<P>Indicates whether the redirector will complete an unlock operation before it has received confirmation from the server that the unlock operation has completed. Disable this parameter only to isolate problems or to guarantee that all unlock operations complete on the server before completing the application's unlock request.</P>
<P>Default:  1 (true)</P>
<P><B>UseWriteRawData     REG_DWORD     </B><I>0 or 1</I></P>
<P>Enables the raw-write-with-data optimization. This allows the redirector to send 4K of data with each write-raw operation. This provides a significant performance enhancement on a local area network. </P>
<P>Default:  1 (true)</P>
<P><B>UtilizeNtCaching     REG_DWORD     </B><I>0 or 1</I></P>
<P>Indicates whether the redirector uses the cache manager to cache the contents of files. Disable this parameter only to guarantee that all data is flushed to the server immediately after it is written by the application.</P>
<P>Default:  1 (true)</P></FONT></BODY></HTML>
