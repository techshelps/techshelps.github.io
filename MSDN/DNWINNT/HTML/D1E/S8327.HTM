<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Example 4: When a Custom Application Assigns Permissions</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Example 4: When a Custom Application Assigns Permissions</H3><P><B>Important</B>   The three preceding examples demonstrate discretionary access control for file and directory permissions that are applied through the Windows&nbsp;NT Permissions Editor (found in File Manager) either directly or  by inheritance. If you use a custom application that sets and changes permissions on files and directories, the Windows&nbsp;NT Permissions Editor may not be able to handle the ACL that the custom application creates or modifies. </P>
<P>Even though the logic above still applies, there is no way of precisely determining the access to the object. The following example illustrates this point.</P>
<P>The user BobMgr wants Read and Write access to the file object that has the discretionary ACL shown next. The access token for BobMgr indicates that he is a member of the groups Users, JnrMgrs, and Everyone.</P>
<P><img src="XRGU18.gif"></P>
<P>In this example, a custom application has been used to update the ACL for a file, thus confusing the usual order in which the ACEs for this file are processed. Normally, all AccessDenied ACEs are processed first.</P>
<P>Windows&nbsp;NT evaluates this ACL as follows:</P>
<OL><LI>    Windows NT reads BobMgr's desired access mask to see that he is trying to gain Read and Write access.</LI><LI>    Windows&nbsp;NT reads the AccessAllowed ACE for BobMgr and finds a match to the Read permission requested in the desired access mask.</LI><LI>    Windows&nbsp;NT reads the AccessAllowed ACE for Everyone and finds a match to the Write permission requested in the desired access mask.</LI></OL><P>BobMgr is granted Read and Write access to the file object, even though the third ACE explicitly denies JnrMgrs access to the file object.</P>
<P>If the Windows&nbsp;NT Permissions Editor had been used to apply the same permissions to the file object, the AccessDenied ACE for JnrMgrs would have been ordered first in the ACL, and BobMgr would have been denied access to  the file.</P></FONT></BODY></HTML>
