<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Data Integrity and Recoverability with NTFS</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Data Integrity and Recoverability with NTFS</H2><P>Each I/O operation that modifies a file on the NTFS volume is viewed by the file system as a transaction and can be managed as an atomic unit. </P>
<P><img src="XRGB07.gif"></P>
<P>Figure 5.7    Interaction Between NTFS and Other Windows&nbsp;NT Components</P>
<P>When a user updates a file, the Log File Service logs all redo and undo information for the transaction. For recoverability, <I>redo</I> is the information that tells NTFS how to repeat the transaction, and <I>undo</I> tells how to roll back the transaction that was incomplete or that had an error. </P>
<P>If a transaction completes successfully, the file update is committed. If the transaction is incomplete, NTFS ends or rolls back the transaction by following instructions in the undo information. If NTFS detects an error in the transaction, the transaction is also rolled back.</P>
<P>File system recovery is straightforward with NTFS. If the system crashes, NTFS performs three passes — an <I>analysis pass</I>, a <I>redo pass</I>, and an <I>undo pass</I>. During the analysis pass, NTFS appraises the damage and determines exactly which clusters must now be updated, per the information in the log file. The redo pass performs all transaction steps logged from the last checkpoint. The undo pass backs out any incomplete (uncommitted) transactions.</P></FONT></BODY></HTML>
