<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HKEY_LOCAL_MACHINE\HARDWARE Subtree</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>HKEY_LOCAL_MACHINE\HARDWARE Subtree</H3><P>The HKEY_LOCAL_MACHINE\HARDWARE subtree contains the hardware data in the Registry that is computed at system startup. This includes information about hardware components on the system board and about the interrupts hooked by specific hardware devices.</P>
<P>The Hardware subtree contains distinct and important sets of data in three subkeys — Description, DeviceMap, and ResourceMap. These keys are described in the following sections.</P>
<P>All information in HKEY_LOCAL_MACHINE\HARDWARE is <I>volatile</I>, which means that the settings are computed each time the system is started and then discarded when the system is shut down. Applications and device drivers use this subtree to read information about the system components, store data directly into the DeviceMap subkey, and store data indirectly into the ResourceMap subkey.</P>
<P><img src="XRGF08.gif"></P>
<P></P>
<P><b>Tip</b></P>
<P>Do not try to edit the data in HKEY_LOCAL_MACHINE\HARDWARE; much of the information appears in binary format, making it difficult to decipher.</P>
<P>To view data about a computer's hardware in an easy-to-read format for troubleshooting, run Windows&nbsp;NT Diagnostics, and choose the Devices button. Windows&nbsp;NT Diagnostics extracts the information from the Registry and renders it in a more readable format.</P>
<P></P>
<H4><A NAME="sec0"></A>Description Subkey</H4><P>The Description subkey under HKEY_LOCAL_MACHINE\HARDWARE displays information from the hardware database built by the firmware, the Hardware Recognizer (NTDETECT.COM), and the Executive itself, which manages the interface between the Kernel and the environment subsystems:</P>
<UL><LI>     If the computer is a RISC-based computer, this database is a copy of the ARC configuration database taken from the firmware. </LI><LI>     If the computer is an <I>x</I>86-based computer, this database contains the data found by the Hardware Recognizer, which is a program that runs as part of the Windows&nbsp;NT startup sequence<I>.</I> The Hardware Recognizer on <I>x</I>86-based computers is NTDETECT.COM. </LI><LI>     If the target computer is not PC-compatible, the OEM provides its own version of NTDETECT.COM as the Hardware Recognizer.</LI></UL><P>The Hardware Recognizer for <I>x</I>86-based computers detects the following items:</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Bus/adapter type</P></TD><TD VALIGN="TOP"><P>Video adapter</P></TD></TR><TR><TD VALIGN="TOP"><P>Keyboard</P></TD><TD VALIGN="TOP"><P>Floating point coprocessor</P></TD></TR><TR><TD VALIGN="TOP"><P>SCSI adapters</P></TD><TD VALIGN="TOP"><P>Mouse</P></TD></TR><TR><TD VALIGN="TOP"><P>Communication ports</P></TD><TD VALIGN="TOP"><P>Floppy drives</P></TD></TR><TR><TD VALIGN="TOP"><P>Machine ID</P></TD><TD VALIGN="TOP"><P>Parallel ports</P></TD></TR></TBODY></TABLE>
<P><BR></P><P><B>Note</B>   Network adapter cards are not detected as part of startup but are instead detected during Windows&nbsp;NT Setup or if you double-click the Network icon in Control Panel to install a new network adapter. For details, see "Network Settings in the Registry," later in this chapter.</P>
<P>HKEY_LOCAL_MACHINE\HARDWARE\Description\System\MultifunctionAdapter contains several other subkeys, each corresponding to specific bus controllers on the local computer. Each of these subkeys describes a class (or type) of controller, including controllers for disk drives, display, keyboard, parallel ports, pointing devices, serial ports, and SCSI devices. The subkey's path describes the type of component. The numbering for hardware components is 0-based, which means that, for example, the first (or only) disk controller appears under the 0 subkey.</P>
<P>The name of the <I>MultiFunctionAdapter</I> subkey depends on the bus type. For example, the subkey name for ISA and MCA buses appears as <I>MultiFunctionAdapter</I>. For EISA buses, the subkey name is EisaAdapter, and for TurboChannel buses, the subkey name can be TcAdapter.</P>
<P><img src="XRGF09.gif"></P>
<P>For each detected hardware component, the optional <B>Component Information</B> and&nbsp;<B>Configuration Data </B>value entries store version and configuration data in binary format. The <B>Identifier</B> entry contains the name of a component, if specified. For&nbsp;details about these entries, see "Registry Entries for Device Drivers" in Chapter&nbsp;14, "Registry Value Entries."</P>
<H4><A NAME="sec1"></A>DeviceMap Subkey</H4><P>Under HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap, each <I>Device</I> subkey contains one or more values to specify the location in the Registry for specific driver information for that kind of component. </P>
<P>The following illustration shows an example of the DeviceMap subkey and the value entry for a selected device name.</P>
<P><img src="XRGF10.gif"></P>
<P>The value for each <I>Device</I> subkey describes an actual port name or the path for a <I>Service </I>subkey in HKEY_LOCAL_MACHINE\SYSTEM\ControlSet<I>nnn</I>\Services, which contains information about a device driver. That <I>Service</I> subkey contains the information a system administrator might need for troubleshooting and is also the information presented about the device by Windows&nbsp;NT Diagnostics.</P>
<P>The following shows DeviceMap entries for a computer that has multiple SCSI adapters.</P>
<P><img src="XRGF11.gif"></P>
<H4><A NAME="sec2"></A>ResourceMap Subkey</H4><P>The ResourceMap subkey under HKEY_LOCAL_MACHINE\HARDWARE maps device drivers to resources that the drivers use. Each ResourceMap subkey contains data reported by the device driver about its use of I/O ports, I/O memory addresses, interrupts, DMA channels and so on. The data in the ResourceMap subkey is volatile, so this subkey is recreated each time you start Windows&nbsp;NT. </P>
<P>Under the ResourceMap subkey, there are <I>DeviceClass</I> subkeys for the general class (or type) of devices. Each of these subkeys contains one or more <I>DriverName</I> subkeys with information about a specific driver. For example, in the following illustration, Sermouse is the <I>DriverName </I>subkey under the PointerPort <I>DeviceClass</I> subkey. (The driver names in these subkeys match the services listed in HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services.)</P>
<P><img src="XRGF12.gif"></P>
<P><B>Tip</B>   If you need to resolve resource conflicts, use Windows&nbsp;NT Diagnostics to view the data from these subkeys in an easily readable format. </P></FONT></BODY></HTML>
