<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>README.TXT</title>
<link disabled rel=stylesheet href=../../../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>
<h2><a name="_code_context4186"></a>README.TXT</h2>
<pre><code>This sample demonstrates how to maintain a Keep-Alive connection while using worker <br>threads in an ISAPI dll.  Please note the following points: <br> <br>1. The way that this dll maintains the connection is in the following <br>line from WorkerFunction: <br> <br>dwState = HSE_STATUS_SUCCESS_AND_KEEP_CONN; <br>pECB-&gt;ServerSupportFunction(pECB-&gt;ConnID, HSE_REQ_DONE_WITH_SESSION, &amp;dwState, NULL, 0); <br> <br>The passing of dwState is what tells IIS to keep the connection open. <br> <br>2. A thread pool is used because if the thread that makes the above call <br>to server support function exits or is terminated, the connection will <br>be closed by IIS.  Using a thread pool avoids this.  <br> <br>3. This dll creates a number of system objects, which are not <br>deallocated.  The presumption is that this dll will remain loaded until <br>the INETINFO.EXE process terminates; at which point these objects will <br>be released by the operating system.  However, if the WWW service is <br>stopped and restarted without the INETINFO.EXE process ending, these <br>objects will remain allocated, and new ones will be created when the dll <br>is reloaded.  If it is desired to implement this sample code in a <br>production environment, code to deallocate these objects should be added <br>in DllMain or TerminateExtension.  </code></pre>
<p>&nbsp;</p></body>
</HTML>
