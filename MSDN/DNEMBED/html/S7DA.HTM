<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using the SQLCA Data Structure</TITLE><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF" link=#003399 vlink=#996699>
<FONT FACE="Verdana, Arial, Helvetica"SIZE="2">

<H2>Using the SQLCA Data Structure</H2><P CLASS="t">SQL&nbsp;Server uses the SQL communications area (SQLCA) data structure to trap and report run-time errors to your Embedded SQL applications. Your application can check the error fields and status indicators of the SQLCA data structure to determine the success or failure of an Embedded SQL statement. The precompiler automatically includes the SQLCA data structure in Embedded SQL applications.</P>
<P CLASS="t">You can include routines in your application to test the SQLCODE, SQLWARN, SQLERRM, SQLERRD, and SQLSTATE fields of the SQLCA data structure and to provide followup procedures according to the status that is returned. The SQLCODE field contains the negative SQL&nbsp;Server error code (the Embedded SQL standard requires that error codes be negative). The SQLWARN flags are set if certain exceptions, such as data truncation, occur. The SQLERRD1 field contains the error number; the SQLERRMC field contains the text of the error message. The SQLERRD3 array indicates the number of rows that are affected. The SQLSTATE field contains run-time errors that generate ANSI-standard SQLSTATE codes.</P>
<P CLASS="t">Because the character fields of SQLCA (like SQLWARN and SQLERRMC) are FAR pointers in Windows, you must use the <B>%Fs</B> format specifier for them when using <B>printf</B> and similar functions.</P>
<P CLASS="t">For more information about the SQLCA data structure, see Appendix A, "Advanced Programming."</P>
</FONT>
</BODY>
</HTML>
