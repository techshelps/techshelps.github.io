<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Statistics</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>	<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


	<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<h3>Statistics</H3><P>Microsoft DNS keeps track of a number of query statistics. These statistics can be seen via the DNS Manager. These statistics are cumulative since the last time the DNS service was started. They are useful when comparing relative loading between two DNS servers to determine how many requests each is servicing. If one server is busier than the other, then you might want to consider changing the current DNS architecture or reconfiguring some of the resolvers. The following figure displays the statistics for server \\B20TCP:</P>
<P><img src="39097.gif"></P>
<P>For capacity planning purposes, on a dedicated DNS server, it is important to log the statistics periodically and watch the growth of the queries vs. the memory, disk, network, and CPU performance of the server. Since the statistics are kept since the DNS service was restarted, you will probably want to note the date and time the DNS service was started (you can get this information from the Eventlog). </P>
<P>Now that you know how many queries per second the DNS server is answering, how many is too many? The answer depends on:</P>
<UL><LI>What hardware is the server running on?</LI><LI>Is the machine dedicated to DNS or is it being used for other purposes?</LI><LI>What is the current network bandwidth?</LI></UL><P>If you feel that your DNS server is not responding as fast as it should, then you should first look at the following performance monitor counters on that server. If any of these thresholds are being hit, then the system has a performance problem and you will need to do more investigation:</P>
<P></P>

<TABLE COLS="4" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="85pt" VALIGN="TOP"><COL WIDTH="94pt" VALIGN="TOP"><COL WIDTH="72pt" VALIGN="TOP"><COL WIDTH="198pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD COLSPAN="2" VALIGN="TOP"><P>Counter</P></TD>

<TD COLSPAN="2" VALIGN="TOP"><P>Threshold</P></TD>

<TD COLSPAN="2" VALIGN="TOP"><P>Notes</P></TD>

</TR><TR><TD COLSPAN="2" VALIGN="TOP"><UL>% processor time</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>&gt; 80%</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL></UL></TD>

</TR><TR><TD COLSPAN="2" VALIGN="TOP"><UL>available bytes</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>&lt; 1MB</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL></UL></TD>

</TR><TR><TD COLSPAN="2" VALIGN="TOP"><UL>% disk time </UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>&gt; 67%</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>only available if you start the counters from the command line with diskperf -y and reboot</UL></TD>

</TR><TR><TD COLSPAN="2" VALIGN="TOP"><UL>% network utilization </UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>&gt; 40%</UL></TD>

<TD COLSPAN="2" VALIGN="TOP"><UL>only available if Network Monitor Agent is installed</UL></TD>

</TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P>If memory is an issue then you should check the "process" object, "DNS" instance, "Private Bytes" counter. If this counter is very high then the DNS service is what is causing the memory available bytes counter to be low. If this is the case then you should add more memory, or possibly investigate what records are currently active in the DNS cache and find out the TTL associated with each.</P>
<P>If processor is an issue then you should check the "process" object, "DNS" instance, "%processor time" counter. If this is &gt; 80 % then you might consider running the DNS server on a more powerful server. If this is not high, and processor %processor time is still high, look at all the other processes and determine which process is requiring large amounts of CPU time.</P>
<P>On a DNS server, physical disk %disk time should not be a problem, unless the system has started paging for lack of memory. If this is the case then you need to treat this as a memory issue.</P>
<P>If network utilization is a problem, you need to find out if it is the DNS server that is causing all of the traffic or another server on the same segment. To do this, use the full featured Network Monitor utility that ships with Microsoft Systems Management Server (this allows you to capture all traffic to and from any specific hardware address) or the reduced feature set utility that ships with Windows&nbsp;NT 4.0 (this only allows you to track traffic to and from the local server).</P></BODY></HTML>
