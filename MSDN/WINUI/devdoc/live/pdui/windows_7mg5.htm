<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WM_NCCALCSIZE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_wm_nccalcsize"></a>WM_NCCALCSIZE</h1>
<p>
The WM_NCCALCSIZE message is sent when the size and position of a window's client area must be calculated. By processing this message, an application can control the content of the window's client area when the size or position of the window changes. </p>
<pre><code>WM_NCCALCSIZE 
fCalcValidRects = (BOOL) wParam;        // valid area flag 

lpncsp = (LPNCCALCSIZE_PARAMS) lParam;  // size calculation data 

   or   

lpncsp = (LPRECT) lParam;               // new window coordinates 
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>fCalcValidRects</i></dt>
<dd>
The value of <i>wParam</i>. If <i>wParam</i> is TRUE, it specifies that the application should indicate which part of the client area contains valid information. The system copies the valid information to the specified area within the new client area. 
<p>
If <i>wParam</i> is FALSE, the application does not need to indicate the valid part of the client area. 
</dd>
<dt>
<i>lpncsp</i></dt>
<dd>
Value of <i>lParam</i>. If <i>wParam </i> is TRUE, <i>lParam</i> points to an <a href="windows_15v6.htm"><b>NCCALCSIZE_PARAMS</b></a> structure that contains information an application can use to calculate the new size and position of the client rectangle. 
<p>
If <i>wParam</i> is FALSE, <i>lParam</i> points to a <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_rect_str">
</object><a href=JavaScript:alink_1.Click()><b>RECT</b></a> structure. On entry, the structure contains the proposed window rectangle for the window. On exit, the structure should contain the screen coordinates of the corresponding window client area.

</dd>
</dl>
<h4>Return Values</h4>
<p>
If the <i>fCalcValidRects</i> parameter is FALSE, the application should return zero. </p>
<p>
If <i>fCalcValidRects</i> is TRUE, the application should return zero or a combination of the following values: </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td class=indent1 width=12%><b>Value</b></td>
<th align=left width=88%>Meaning</th>
</tr>
<tr valign=top>
<td colspan=2 width=100%>WVR_ALIGNTOP, WVR_ALIGNLEFT, WVR_ALIGNBOTTOM, WVR_ALIGNRIGHT</td>
</tr>
<tr valign=top>
<td width=12%></td>
<td width=88%>These values, used in combination, specify that the client area of the window is to be preserved and aligned appropriately relative to the new position of the window. For example, to align the client area to the lower-left corner, return the WVR_ALIGNLEFT and WVR_ALIGNBOTTOM values.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>WVR_HREDRAW, WVR_VREDRAW</td>
</tr>
<tr valign=top>
<td width=12%></td>
<td width=88%>These values, used in combination with any other values, cause the window to be completely redrawn if the client rectangle changes size horizontally or vertically. These values are similar to the CS_HREDRAW and CS_VREDRAW class styles.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>WVR_REDRAW</td>
</tr>
<tr valign=top>
<td width=12%></td>
<td width=88%>This value causes the entire window to be redrawn. It is a combination of WVR_HREDRAW and WVR_VREDRAW values.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>WVR_VALIDRECTS</td>
</tr>
<tr valign=top>
<td width=12%></td>
<td width=88%>This value indicates that, upon return from WM_NCCALCSIZE, the rectangles specified by the <b>rgrc[1]</b> and <b>rgrc[2]</b> members of the <a href="windows_15v6.htm"><b>NCCALCSIZE_PARAMS</b></a> structure contain valid destination and source area rectangles, respectively. The system combines these rectangles to calculate the area of the window to be preserved. The system copies any part of the window image that is within the source rectangle and clips the image to the destination rectangle. Both rectangles are in parent-relative or screen-relative coordinates.</td>
</tr>
<tr valign=top>
<td width=12%></td>
<td width=88%>This return value allows an application to implement more elaborate client-area preservation strategies, such as centering or preserving a subset of the client area.</td>
</tr>
</table><br>
<p>
If <i>fCalcValidRects</i> is TRUE and an application returns zero, the old client area is preserved and is aligned with the upper-left corner of the new client area. </p>
<h4>Default Action</h4>
<p>
The window may be redrawn, depending on whether the CS_HREDRAW or CS_VREDRAW class style is specified. This is the default, backward-compatible processing of this message by the <b>DefWindowProc</b> function (in addition to the usual client rectangle calculation described in the preceding table). </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in winuser.h.</p>
<h4>See Also</h4>
<p>
<a href="windows_6t2r.htm">Windows Overview</a>, <a href="windows_2v8z.htm">Window Messages</a>, <a href="winprocs_10o3.htm"><b>DefWindowProc</b></a>, <a href="windows_92nr.htm"><b>MoveWindow</b></a>, <a href="windows_2blf.htm"><b>SetWindowPos</b></a>, <a href="windows_15v6.htm"><b>NCCALCSIZE_PARAMS</b></a>, <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_rect_str">
</object><a href=JavaScript:alink_2.Click()><b>RECT</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
