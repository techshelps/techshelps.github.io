<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Processing the WM_DRAWITEM Message</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_processing_the_wm_drawitem_message"></a>Processing the WM_DRAWITEM Message</h3>
<p>
An owner-drawn combo box sends the <a href="combobox_3sx9.htm">WM_DRAWITEM</a> message to its parent window or dialog box procedure each time the application must repaint a list item. The <i>lParam</i> parameter points to a <a href="combobox_88s2.htm"><b>DRAWITEMSTRUCT</b></a> structure that identifies the control and list item. It also contains information needed to paint the item. </p>
<p>
The example in <a href="combobox_23w8.htm">Creating a Square Meal Dialog Box</a> displays the list-item text and the bitmap associated with the food group. If the item has the focus, it also draws a focus rectangle. Before displaying the text, the example sets the foreground and background colors, based on the item selected. Because the combo box has the CBS_HASSTRINGS style, the combo box maintains the text for each list item that can be retrieved using the <a href="combobox_6bjo.htm">CB_GETLBTEXT</a> message. </p>
<p>
The bitmaps used for the list item depend on the food group. <code>InitGroupList</code> uses the <a href="combobox_2yxt.htm">CB_SETITEMDATA</a> message to associate a constant with each list item, identifying the corresponding food group. The window procedure uses this value, contained in the <b>itemData</b> member of the <a href="combobox_88s2.htm"><b>DRAWITEMSTRUCT</b></a> structure, to determine which bitmaps to display. The system uses two bitmaps for each food group symbol: a monochrome bitmap with the SRCAND raster operation to erase the irregular region behind the image, and a color bitmap with the SRCPAINT raster operation to paint the image. </p>
<p>&nbsp;</p></body>
</HTML>
