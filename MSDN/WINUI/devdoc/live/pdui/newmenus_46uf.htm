<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting the Owner-Drawn Flag</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_setting_the_owner_drawn_flag"></a>Setting the Owner-Drawn Flag</h3>
<p>
You cannot define an owner-drawn menu item in your application's resource-definition file. Instead, you must create a new menu item or modify an existing one by using the MFT_OWNERDRAW menu flag. </p>
<p>
You can use the <a href="newmenus_4c6l.htm"><b>InsertMenuItem</b></a> or <a href="newmenus_39f3.htm"><b>SetMenuItemInfo</b></a><b> </b>function to specify an owner-drawn menu item. Use <b>InsertMenuItem</b> to insert a new menu item at the specified position in a menu bar or menu. Use <b>SetMenuItemInfo</b> to change the contents of a menu.</p>
<p>
When calling these two functions, you must specify the address of a <a href="newmenus_3n1u.htm"><b>MENUITEMINFO</b></a> structure, giving the properties of the new menu item or the properties you want to change for an existing menu item. To make an item an owner-drawn item, specify the MIIM_TYPE value for the <b>fMask</b> member and the MFT_OWNERDRAW value for the <b>fType</b> member.</p>
<p>
By setting the appropriate members of the <b>MENUITEMINFO</b> structure, you can associate an application-defined value, which is called<i> item data</i>, with each menu item. To do so, specify the MIIM_DATA value for the <b>fMask</b> member and the application-defined value for the <b>dwItemData</b> member.</p>
<p>
You can use item data with any type of menu item, but it is particularly useful for owner-drawn items. For example, suppose a structure contains information used to draw a menu item. An application might use the item data for a menu item to store a pointer to the structure. The item data is sent to the menu's owner window with the <a href="combobox_85d9.htm">WM_MEASUREITEM</a> and <a href="combobox_3sx9.htm">WM_DRAWITEM</a> messages. To retrieve the item data for a menu at any time, use the <a href="newmenus_7rhr.htm"><b>GetMenuItemInfo</b></a> function.</p>
<p>
Applications written for earlier versions of the system can continue to call <a href="newmenus_0met.htm"><b>AppendMenu</b></a>, <a href="newmenus_9yid.htm"><b>InsertMenu</b></a>, or <a href="newmenus_2yr9.htm"><b>ModifyMenu</b></a> to assign the MF_OWNERDRAW flag to an owner-drawn menu item.</p>
<p>
When you call any of these three functions, you can pass a 32-bit value as the <i>lpNewItem</i> parameter. This value can represent any information that is meaningful to your application, and that will be available to your application when the item is to be displayed. For example, the value could contain a pointer to a structure; the structure, in turn, might contain a text string and the handle to a logical font that your application will use to draw the string. </p>
<p>&nbsp;</p></body>
</HTML>
