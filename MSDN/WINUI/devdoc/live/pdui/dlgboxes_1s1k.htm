<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Initializing a Dialog Box</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_initializing_a_dialog_box"></a>Initializing a Dialog Box</h2>
<p>
You initialize the dialog box and its contents while processing the <a href="dlgboxes_4n1j.htm">WM_INITDIALOG</a> message. The most common task is to initialize the controls to reflect the current dialog box settings. Another common task is to center a dialog box on the screen or within its owner window. A useful task for some dialog boxes is to set the input focus to a given control rather than accept the default input focus. </p>
<p>
In the following example, the dialog box procedure centers the dialog box and sets the input focus while processing the WM_INITDIALOG message. To center the dialog box, the procedure retrieves the window rectangles for the dialog box and the owner window and calculates a new position for the dialog box. To set the input focus, the procedure checks the <i>wParam</i> parameter to determine the identifier of the default input focus: </p>
<pre><code>HWND hwndOwner; 
RECT rc, rcDlg, rcOwner; 
 
    case WM_INITDIALOG: 
 
        // Get the owner window and dialog box rectangles. 
 
        if ((hwndOwner = GetParent(hwndDlg)) == NULL) 
        {
            hwndOwner = GetDesktopWindow(); 
        }

        GetWindowRect(hwndOwner, &amp;rcOwner); 
        GetWindowRect(hwndDlg, &amp;rcDlg); 
        CopyRect(&amp;rc, &amp;rcOwner); 
 
         // Offset the owner and dialog box rectangles so that 
         // right and bottom values represent the width and 
         // height, and then offset the owner again to discard 
         // space taken up by the dialog box. 
 
        OffsetRect(&amp;rcDlg, -rcDlg.left, -rcDlg.top); 
        OffsetRect(&amp;rc, -rc.left, -rc.top); 
        OffsetRect(&amp;rc, -rcDlg.right, -rcDlg.bottom); 
 
         // The new position is the sum of half the remaining 
         // space and the owner's original position. 
 
        SetWindowPos(hwndDlg, 
            HWND_TOP, 
            rcOwner.left + (rc.right / 2), 
            rcOwner.top + (rc.bottom / 2), 
            0, 0,          // ignores size arguments 
            SWP_NOSIZE); 
 
        if (GetDlgCtrlID((HWND) wParam) != ID_ITEMNAME) 
        { 
            SetFocus(GetDlgItem(hwndDlg, ID_ITEMNAME)); 
            return FALSE; 
        } 
        return TRUE; 
 </code></pre>
<p>
In the preceding statements, the procedure uses the <a href="windows_8ewk.htm"><b>GetParent</b></a> function to retrieve the owner window handle for a dialog box. The function returns the owner window handle for dialog boxes, and the parent window handle for child windows. Because an application can create a dialog box that has no owner, the procedure checks the returned handle and uses the <a href="windows_6uuv.htm"><b>GetDesktopWindow</b></a> function to retrieve the desktop window handle, if necessary. After calculating the new position, the procedure uses the <a href="windows_2blf.htm"><b>SetWindowPos</b></a> function to move the dialog box, specifying the HWND_TOP value to ensure that the dialog box remains on top of the owner window. </p>
<p>
Before setting the input focus, the procedure checks the control identifier of the default input focus. The system passes the window handle of the default input focus in the <i>wParam</i> parameter. The <a href="dlgboxes_2zz8.htm"><b>GetDlgCtrlID</b></a> function returns the identifier for the control identified by the window handle. If the identifier does not match the correct identifier, the procedure uses the <a href="keybinpt_8yb7.htm"><b>SetFocus</b></a> function to set the input focus. The <a href="dlgboxes_7k8d.htm"><b>GetDlgItem</b></a> function is required to retrieve the window handle of the desired control. </p>
<p>&nbsp;</p></body>
</HTML>
