<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Customizing the Color Dialog Box</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_customizing_the_color_dialog_box"></a>Customizing the Color Dialog Box</h3>
<p>
To customize a <b>Color</b> dialog box, you can use any of the following methods: 
<ul>
<li>
Specify values in the <a href="commdlg3_6p2q.htm"><b>CHOOSECOLOR</b></a> structure when you create the dialog box.</li>
<li>
Provide a custom template.</li>
<li>
Provide a hook procedure.</li>
</ul>
<p>
You can modify the appearance and behavior of the <b>Color</b> dialog box by setting flags in the <b>Flags</b> member of the <b>CHOOSECOLOR</b> structure. For example, you can set the CC_SOLIDCOLOR flag to direct the dialog box to display only solid colors. To cause the dialog box to initially select a color other than black, set the CC_RGBINIT flag and specify a color in the <b>rgbResult</b> member.</p>
<p>
You can provide a custom template for the <b>Color</b> dialog box, for example, if you want to include additional controls that are unique to your application. The <a href="commdlg3_4p4i.htm"><b>ChooseColor</b></a> function uses your custom template in place of the default template. </p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To provide a custom template for the Color dialog box</h5>
<ol>
<li>
Create the custom template by modifying the default template specified in the COLOR.DLG file. The control identifiers used in the default Color dialog template are defined in the COLORDLG.H file.</li>
<li>
Use the <a href="commdlg3_6p2q.htm"><b>CHOOSECOLOR</b></a> structure to enable the template as follows:<ul>
<li>
If your custom template is a resource in an application or dynamic-link library, set the CC_ENABLETEMPLATE flag in the <b>Flags</b> member. Use the <b>hInstance</b> and <b>lpTemplateName</b> members of the structure to identify the module and resource name. <p>
<b>-Or-</b>
</li>
<li>
If your custom template is already in memory, set the CC_ENABLETEMPLATEHANDLE flag. Use the <b>hInstance</b> member to identify the memory object that contains the template. </li>
</ul>
</li>
</ol>
<p>
You can provide a <a href="commdlg3_04yr.htm"><b>CCHookProc</b></a> hook procedure for the <b>Color</b> dialog box. The hook procedure can process messages sent to the dialog box. It can also use registered messages to control the behavior of the dialog box. If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls. </p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To enable a hook procedure for the Color dialog box</h5>
<ol>
<li>
Set the CC_ENABLEHOOK flag in the <b>Flags</b> member of the <a href="commdlg3_6p2q.htm"><b>CHOOSECOLOR</b></a> structure.</li>
<li>
Specify the address of the hook procedure in the <b>lpfnHook</b> member.</li>
</ol>
<p>
After processing its <a href="dlgboxes_4n1j.htm">WM_INITDIALOG</a> message, the dialog box procedure sends a WM_INITDIALOG message to the hook procedure. The <i>lParam</i> parameter of this message is a pointer to the <b>CHOOSECOLOR</b> structure used to initialize the dialog box. </p>
<p>
The dialog box sends the <a href="commdlg3_3d2f.htm">COLOROKSTRING</a> registered message to the hook procedure when the user clicks the <b>OK</b> button. The hook procedure can reject the selected color and force the dialog box to remain open by returning zero when it receives this message. The hook procedure can force the dialog box to select a particular color by sending the <a href="commdlg3_96jr.htm">SETRGBSTRING</a> registered message to the dialog box. To use these registered messages, you must pass the COLOROKSTRING and SETRGBSTRING constants to the <a href="messques_10h1.htm"><b>RegisterWindowMessage</b></a> function to get a message identifier. You can then use the identifier to detect and process messages sent from the dialog box, or to send messages to the dialog box. </p>
<p>&nbsp;</p></body>
</HTML>
