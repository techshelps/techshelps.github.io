<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The WM_PAINT Message</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_the_wm_paint_message"></a>The WM_PAINT Message</h2>
<p>
Typically, an application draws in a window in response to a <a href="pantdraw_88ac.htm">WM_PAINT</a> message. The system sends this message to a window procedure when changes to the window have altered the content of the client area. The system sends the message only if there are no other messages in the application message queue. </p>
<p>
Upon receiving a WM_PAINT<b> </b>message, an application can call <a href="pantdraw_7b78.htm"><b>BeginPaint</b></a> to retrieve the display device context for the client area and use it in calls to GDI functions to carry out whatever drawing operations are necessary to update the client area. After completing the drawing operations, the application calls the <a href="pantdraw_1th0.htm"><b>EndPaint</b></a> function to release the display device context. </p>
<p>
Before <b>BeginPaint</b> returns the display device context, the system prepares the device context for the given window. It first sets the clipping region for the device context to be equal to the intersection of the portion of the window that needs updating and the portion that is visible to the user. Only those portions of the window that have changed are redrawn. Attempts to draw outside this region are clipped and do not appear on the screen. </p>
<p>
The system can also send <a href="pantdraw_8gdw.htm"><b>WM_NCPAINT</b></a> and <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_erasebkgnd">
</object><a href=JavaScript:alink_1.Click()>WM_ERASEBKGND</a> messages to the window procedure before <b>BeginPaint</b> returns. These messages direct the application to draw the nonclient area and window background. The <i>nonclient area</i> is the part of a window that is outside of the client area. The area includes features such as the title bar, window menu (also known as the System menu), and scroll bars. Most applications rely on the default window function, <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_defwindowproc">
</object><a href=JavaScript:alink_2.Click()><b>DefWindowProc</b></a>, to draw this area and therefore pass the <b>WM_NCPAINT</b> message to this function. The <i>window background</i> is the color or pattern a window is filled with before other drawing operations begin. The background covers any images previously in the window or on the screen under the window. If a window belongs to a window class having a class background brush, the <b>DefWindowProc</b> function draws the window background automatically. </p>
<p>
<b>BeginPaint</b> fills a <a href="pantdraw_9ape.htm"><b>PAINTSTRUCT</b></a><b> </b>structure with information such as the dimensions of the portion of the window to be updated and a flag indicating whether the window background has been drawn. The application can use this information to optimize drawing. For example, it can use the dimensions of the update region, specified by the <b>rcPaint</b> member, to limit drawing to only those portions of the window that need updating. If an application has very simple output, it can ignore the update region and draw in the entire window, relying on the system to discard (clip) any unneeded output. Because the system clips drawing that extends outside the clipping region, only drawing that is in the update region is visible. </p>
<p>
<a href="pantdraw_7b78.htm"><b>BeginPaint</b></a> sets the update region of a window to NULL. This clears the region, preventing it from generating subsequent <a href="pantdraw_88ac.htm">WM_PAINT</a> messages. If an application processes a WM_PAINT<b> </b>message but does not call <b>BeginPaint</b> or otherwise clear the update region, the application continues to receive WM_PAINT<b> </b>messages as long as the region is not empty. In all cases, an application must clear the update region before returning from the WM_PAINT<b> </b>message. </p>
<p>
After the application finishes drawing, it should call <a href="pantdraw_1th0.htm"><b>EndPaint</b></a>. For most windows, <b>EndPaint</b> releases the display device context, making it available to other windows. <b>EndPaint</b> also shows the caret, if it was previously hidden by <b>BeginPaint</b>. <b>BeginPaint</b> hides the caret to prevent drawing operations from corrupting it. </p>
<p>&nbsp;</p></body>
</HTML>
