<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Device-Independent Bitmaps</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_device_independent_bitmaps"></a>Device-Independent Bitmaps</h3>
<p>
Bitmaps that contain a<i> color table</i> are device-independent. A<i> </i>color table describes how pixel values correspond to <i>RGB</i> color values. RGB is a model for describing colors that are produced by emitting light. A DIB contains the following color and dimension information: 
<ul>
<li>
The color format of the device on which the rectangular image was created. </li>
<li>
The resolution of the device on which the rectangular image was created. </li>
<li>
The palette for the device on which the image was created. </li>
<li>
An array of bits that maps red, green, blue (<a href="colors_8bvm.htm">RGB</a>) triplets to pixels in the rectangular image. </li>
<li>
A data-compression identifier that indicates the data compression scheme (if any) used to reduce the size of the array of bits. </li>
</ul>
<p>
The color and dimension  information is stored in a <a href="bitmaps_0zn6.htm"><b>BITMAPINFO</b></a> structure. </p>
<p>
The BITMAPINFO structure consists of a bitmap information header structure (see <a href="bitmaps_7ltf.htm"><b>Bitmap Header Types</b></a>) followed by two or more <a href="bitmaps_5f8y.htm"><b>RGBQUAD</b></a> structures. The bitmap information header structure specifies the dimensions of the pixel rectangle, describes the device's color technology, and identifies the compression schemes used to reduce the bitmap's size. The <b>RGBQUAD</b> structures identify the colors that appear in the pixel rectangle. </p>
<p>
There are two varieties of DIBs:
<ul>
<li>
A "bottom-up" DIB, in which the origin lies at the lower left corner.</li>
<li>
A "top-down" DIB, in which the origin lies at the upper left corner. </li>
</ul>
<p>
If the height of a DIB, as indicated by the <i><b>Height</b> </i>member of the bitmap information header structure, is a positive value, it is a bottom-up DIB; if the height is a negative value, it is a top-down DIB. Top-down DIBs cannot be compressed. </p>
<p>
The color format is specified in terms of a count of color planes and color bits. The count of color planes is always 1; the count of color bits is 1 for monochrome bitmaps, 4 for VGA bitmaps, and 8, 16, 24, or 32 for bitmaps on other color devices. An application retrieves the number of color bits a particular display (or printer) uses by calling the <a href="devcons_88s3.htm"><b>GetDeviceCaps</b></a> function, specifying BITSPIXEL as the second argument. </p>
<p>
The resolution of a display device is specified in pixels per meter. An application can retrieve the horizontal resolution for a video display, or printer, by following a three-step process: 
<ol>
<li>
Call the <b>GetDeviceCaps</b> function, specifying HORZRES as the second argument. </li>
<li>
Call <b>GetDeviceCaps</b> a second time, specifying HORZSIZE as the second argument. </li>
<li>
Divide the first return value by the second return value. </li>
</ol>
<p>
The application can retrieve the vertical resolution by using the same three-step process with different parameters: VERTRES in place of HORZRES, and VERTSIZE in place of HORZSIZE. </p>
<p>
The palette is represented by an array of <a href="bitmaps_5f8y.htm"><b>RGBQUAD</b></a> structures that specify the red, green, and blue intensity components for each color in a display device's color palette. Each color index in the palette array maps to a specific pixel in the rectangular region associated with the bitmap. The size of this array, in bits, is equivalent to the width of the rectangle, in pixels, multiplied by the height of the rectangle, in pixels, multiplied by the count of color bits for the device. An application can retrieve the size of the device's palette by calling the <a href="devcons_88s3.htm"><b>GetDeviceCaps</b></a> function, specifying the NUMCOLORS constant as the second argument. </p>
<p>
The Win32 API supports the compression of the palette array for 8-bit-per-pixel and 4-bit-per-pixel bottom-up DIBs. These arrays can be compressed by using the run-length encoding (RLE) scheme. The RLE scheme uses 2-byte values, the first byte specifying the number of consecutive pixels that use a color index and the second byte specifying the index. For more information about bitmap compression, see the description of the <a href="bitmaps_1rw2.htm"><b>BITMAPINFOHEADER</b></a>, <a href="bitmaps_7jaq.htm"><b>BITMAPCOREHEADER</b></a>, <a href="bitmaps_62uq.htm"><b>BITMAPFILEHEADER</b></a>, <a href="bitmaps_2k1e.htm"><b>BITMAPV4HEADER</b></a>, and<b> <a href="bitmaps_7c36.htm">BITMAPV5HEADER</a></b> structures. </p>
<p>
An application can create a DIB from a DDB by initializing the required structures and calling the <a href="bitmaps_7gms.htm"><b>GetDIBits</b></a> function. To determine whether a device supports this function, call the<a href="devcons_88s3.htm"> <b>GetDeviceCaps</b></a> function, specifying RC_DI_BITMAP as the RASTERCAPS flag. </p>
<p>
An application that needs to copy a bitmap can use <a href="bitmaps_2y9g.htm"><b>TransparentBlt</b></a><b> </b>to copy all pixels in a source bitmap to a destination bitmap except those pixels that match the transparent color. </p>
<p>
An application can use a DIB to set pixels on the display device by calling the <a href="bitmaps_8e5h.htm"><b>SetDIBitsToDevice</b></a> or the <a href="bitmaps_1ppv.htm"><b>StretchDIBits</b></a> function. To determine whether a device supports the <b>SetDIBitsToDevice</b> function, call the <b>GetDeviceCaps</b> function, specifying RC_DIBTODEV as the RASTERCAPS flag. Specify RC_STRETCHDIB as the RASTERCAPS flag to determine if the device supports <b>StretchDIBits</b>.<b> </b>  </p>
<p>
An application that simply needs to display a pre-existing DIB can use the <b>SetDIBitsToDevice</b> function. For example, a spreadsheet application can open existing charts and display them in a window by using the <b>SetDIBitsToDevice</b> function. To repeatedly redraw a bitmap in a window, however, the application should use the <a href="bitmaps_0fzo.htm"><b>BitBlt</b></a> function. For example, a multimedia application that combines animated graphics with sound would benefit from calling the <b>BitBlt</b> function because it executes faster than <b>SetDIBitsToDevice</b>. </p>
<p>&nbsp;</p></body>
</HTML>
