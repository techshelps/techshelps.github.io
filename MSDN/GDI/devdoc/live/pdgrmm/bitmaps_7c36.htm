<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BITMAPV5HEADER</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_bitmapv5header_str"></a>BITMAPV5HEADER</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>BITMAPV5HEADER</b> structure is the Windows NT 5.0 and Windows 98 bitmap information header file. The Independent Color Management interface (ICM) 2.0 allows International Color Consortium (ICC) color profiles to be linked or embedded in device-independent bitmaps (DIBs). See <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_using_structures_in_icm_2.0">
</object><a href=JavaScript:alink_1.Click()>Using Structures in ICM 2.0</a> for more information. </p>
<p>
Applications written for Windows NT 4.0 and Windows 95 can use the <a href="bitmaps_2k1e.htm"><b>BITMAPV4HEADER</b></a> structure. Applications written for earlier versions of Windows NT should continue to use the <a href="bitmaps_1rw2.htm"><b>BITMAPINFOHEADER</b></a> structure. </p>
<p>
The<b> BITMAPV5HEADER</b> is an extended version of <b>BITMAPINFOHEADER</b> that allows a JPEG image to be passed as the source image to<b> <a href="bitmaps_1ppv.htm">StretchDIBits</a></b>.</p>
<pre><code>typedef struct { 
    DWORD        bV5Size; 
    LONG         bV5Width; 
    LONG         bV5Height; 
    WORD         bV5Planes; 
    WORD         bV5BitCount; 
    DWORD        bV5Compression; 
    DWORD        bV5SizeImage; 
    LONG         bV5XPelsPerMeter; 
    LONG         bV5YPelsPerMeter; 
    DWORD        bV5ClrUsed; 
    DWORD        bV5ClrImportant; 
    DWORD        bV5RedMask; 
    DWORD        bV5GreenMask; 
    DWORD        bV5BlueMask; 
    DWORD        bV5AlphaMask; 
    DWORD        bV5CSType; 
    CIEXYZTRIPLE bV5Endpoints; 
    DWORD        bV5GammaRed; 
    DWORD        bV5GammaGreen; 
    DWORD        bV5GammaBlue; 
    DWORD        bV5Intent; 
    DWORD        bV5ProfileData; 
    DWORD        bV5ProfileSize; 
    DWORD        bV5Reserved; 
} BITMAPV5HEADER, FAR *LPBITMAPV5HEADER, *PBITMAPV5HEADER; 
#define BI_JPEG  4L
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>bV5Size</b></dt>
<dd>
Specifies the number of bytes required by the structure. Applications should use this member to determine which bitmap information header structure is being used.</dd>
<dt>
<b>bV5Width</b></dt>
<dd>
Specifies the width of the bitmap, in pixels. 
<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>bV5Compression</b> is BI_JPEG, the <b>bV5Width</b> member specifies the width of the decompressed JPEG image in pixels.
</dd>
<dt>
<b>bV5Height</b></dt>
<dd>
Specifies the height of the bitmap, in pixels. If the value of <b>bV5Height</b> is  positive, the bitmap is a bottom-up DIB and its origin is the lower-left corner. If <b>bV5Height</b> value is negative, the bitmap is a top-down DIB and its origin is the upper-left corner. 
<p>
If <b>bV5Height</b> is negative, indicating a top-down DIB, <b>bV5Compression</b> must be either BI_RGB or BI_BITFIELDS. Top-down DIBs cannot be compressed.

<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>bV5Compression</b> is BI_JPEG, the <b>bV5Height</b> member specifies the height of the decompressed JPEG image in pixels.
</dd>
<dt>
<b>bV5Planes</b></dt>
<dd>
Specifies the number of planes for the target device. This value must be set to 1. </dd>
<dt>
<b>bV5BitCount</b></dt>
<dd>
Specifies the number of bits that define each pixel and the maximum number of colors in the bitmap. 
<p>
This member can be one of the following values. 

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=12%>Value</th>
<th align=left width=88%>Meaning</th>
</tr>
<tr valign=top>
<td width=12%>0</td>
<td width=88%><b>Windows 98, Windows NT 5.0 and later:</b> The number of bits per pixel is specified or is implied by the JPEG file format.</td>
</tr>
<tr valign=top>
<td width=12%>1</td>
<td width=88%>The bitmap is monochrome, and the <b>bmiColors</b> member contains two entries. Each bit in the bitmap array represents a pixel. If the bit is clear, the pixel is displayed with the color of the first entry in the <b>bmiColors</b> color table. If the bit is set, the pixel has the color of the second entry in the table.</td>
</tr>
<tr valign=top>
<td width=12%>4</td>
<td width=88%>The bitmap has a maximum of 16 colors, and the <b>bmiColors</b> member contains up to 16 entries. Each pixel in the bitmap is represented by a 4-bit index into the color table. For example, if the first byte in the bitmap is 0x1F, the byte represents two pixels. The first pixel contains the color in the second table entry, and the second pixel contains the color in the sixteenth table entry.</td>
</tr>
<tr valign=top>
<td width=12%>8</td>
<td width=88%>The bitmap has a maximum of 256 colors, and the <b>bmiColors</b> member contains up to 256 entries. In this case, each byte in the array represents a single pixel.</td>
</tr>
<tr valign=top>
<td width=12%>16</td>
<td width=88%>The bitmap has a maximum of 2^16 colors. If the <b>biCompression</b> member of the <b>BITMAPV5HEADER </b>structure is BI_RGB, the <b>bmiColors</b> member is NULL. Each <b>WORD</b> in the bitmap array represents a single pixel. The relative intensities of red, green, and blue are represented with 5 bits for each color component. The value for blue is in the least significant 5 bits, followed by 5 bits each for green and red. The most significant bit is not used. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPV5HEADER</b>. <p>
If the <b>biCompression</b> member of the <b>BITMAPV5HEADER</b> is BI_BITFIELDS, the <b>bmiColors</b> member contains three <b>DWORD </b>color masks that specify the red, green, and blue components, respectively, of each pixel. Each <b>WORD </b>in the bitmap array represents a single pixel.</p>
<p>
When the <b>biCompression</b> member is BI_BITFIELDS, bits set in each <b>DWORD </b>mask must be contiguous and should not overlap the bits of another mask. All the bits in the pixel do not need to be used. </p>
</td>
</tr>
<tr valign=top>
<td width=12%>24</td>
<td width=88%>The bitmap has a maximum of 2^24 colors, and the <b>bmiColors</b> member is NULL. Each 3-byte triplet in the bitmap array represents the relative intensities of blue, green, and red, respectively, for a pixel. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPV5HEADER </b>structure.  </td>
</tr>
<tr valign=top>
<td width=12%>32</td>
<td width=88%>The bitmap has a maximum of 2^32 colors. If the <b>biCompression</b> member of the <b>BITMAPV5HEADER</b> is BI_RGB, the <b>bmiColors</b> member is NULL. Each <b>DWORD</b> in the bitmap array represents the relative intensities of blue, green, and red, respectively, for a pixel. The high byte in each <b>DWORD</b> is not used. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPV5HEADER</b>. <p>
If the <b>biCompression</b> member of the <b>BITMAPV5HEADER</b> is BI_BITFIELDS, the <b>bmiColors</b> member contains three <b>DWORD </b>color masks that specify the red, green, and blue components of each pixel. Each <b>DWORD </b>in the bitmap array represents a single pixel.</p>
</td>
</tr>
</table><br>

</dd>
<dt>
<b>bV5Compression</b></dt>
<dd>
Specifies that the bitmap is not compressed. The <b>bV5RedMask</b>, <b>bV5GreenMask</b>, and <b>bV5BlueMask</b> members specify the red, green, and blue components of each pixel. This is valid when used with 16- and 32-bit-per-pixel bitmaps. This member can be one of the following values. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=27%>Value</th>
<th align=left width=73%>Meaning</th>
</tr>
<tr valign=top>
<td width=27%>BI_RGB</td>
<td width=73%>An uncompressed format.</td>
</tr>
<tr valign=top>
<td width=27%>BI_RLE8</td>
<td width=73%>A run-length encoded (RLE) format for bitmaps with 8 bits per pixel. The compression format is a two-byte format consisting of a count byte followed by a byte containing a color index. If <b>bV5Compression</b> is BI_RGB and the <b>bV5BitCount </b>member is 16, 24, or 32, the bitmap array specifies the actual intensities of blue, green, and red rather than using color table indexes. For more information, see <a href="bitmaps_6x0u.htm">Bitmap Compression</a>.</td>
</tr>
<tr valign=top>
<td width=27%>BI_RLE4</td>
<td width=73%>An RLE format for bitmaps with 4 bits-per-pixel. The compression format is a two-byte format consisting of a count byte followed by two word-length color indexes. For more information, see <a href="bitmaps_6x0u.htm">Bitmap Compression</a>.</td>
</tr>
<tr valign=top>
<td width=27%>BI_BITFIELDS</td>
<td width=73%>Specifies that the bitmap is not compressed and that the color table consists of three <b>DWORD</b> color masks that specify the red, green, and blue components of each pixel. Valid when used with 16- and 32-bit-per-pixel bitmaps.</td>
</tr>
<tr valign=top>
<td width=27%>BI_JPEG</td>
<td width=73%><b>Windows 98, Windows NT 5.0 and later:</b> Specifies that the image is compressed using the JPEG file Interchange Format. JPEG compression trades off compression against loss; it can achieve a compression ratio of 20:1 with little noticeable loss. </td>
</tr>
</table><br>

</dd>
<dt>
<b>bV5SizeImage</b></dt>
<dd>
Specifies the size, in bytes, of the image. This may be set to zero for BI_RGB bitmaps.
<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>bV5Compression</b> is BI_JPEG, <b>bVSizeImage</b> is the size of the JPEG image buffer. 
</dd>
<dt>
<b>bV5XPelsPerMeter</b></dt>
<dd>
Specifies the horizontal resolution, in pixels per meter, of the target device for the bitmap. An application can use this value to select a bitmap from a resource group that best matches the characteristics of the current device. </dd>
<dt>
<b>bV5YPelsPerMeter</b></dt>
<dd>
Specifies the vertical resolution, in pixels per meter, of the target device for the bitmap. </dd>
<dt>
<b>bV5ClrUsed</b></dt>
<dd>
Specifies the number of color indexes in the color table that are actually used by the bitmap. If this value is zero, the bitmap uses the maximum number of colors corresponding to the value of the <b>bV5BitCount</b> member for the compression mode specified by <b>bV5Compression</b>. 
<p>
If <b>bV5ClrUsed</b> is nonzero and <b>bV5iBitCount</b> is less than 16, the <b>bV5ClrUsed</b> member specifies the actual number of colors the graphics engine or device driver accesses. If <b>bV5BitCount</b> is 16 or greater, the <b>bV5ClrUsed</b> member specifies the size of the color table used to optimize performance of the system color palettes. If <b>bV5BitCount</b> equals 16 or 32, the optimal color palette starts immediately following the BITMAPV5HEADER. If<b> BV5ClrUsed</b> is nonzero, the color table is used on palettized devices, and <b>bV5ClrUsed</b> specifies the number of entries. 

<p>
When the bitmap array immediately follows the <a href="bitmaps_0zn6.htm"><b>BITMAPINFO</b></a> header, it is a packed bitmap. Packed bitmaps are  referenced by a single pointer. Packed bitmaps require that the <b>bV4ClrUsed</b> member must be either zero or the actual size of the color table. 
</dd>
<dt>
<b>bV5ClrImportant</b></dt>
<dd>
Specifies the number of color indexes that are required for displaying the bitmap. If this value is zero, all colors are required. </dd>
<dt>
<b>bV5RedMask</b></dt>
<dd>
Color mask that specifies the red component of each pixel, valid only if <b>bV5Compression</b> is set to BI_BITFIELDS.</dd>
<dt>
<b>bV5GreenMask</b></dt>
<dd>
Color mask that specifies the green component of each pixel, valid only if <b>bV5Compression</b> is set to BI_BITFIELDS.</dd>
<dt>
<b>bV5BlueMask</b></dt>
<dd>
Color mask that specifies the blue component of each pixel, valid only if <b>bV5Compression</b> is set to BI_BITFIELDS.</dd>
<dt>
<b>bV5AlphaMask</b></dt>
<dd>
Color mask that specifies the alpha component of each pixel. </dd>
<dt>
<b>bV5CSType</b></dt>
<dd>
Specifies the color space of the device-independent bitmap. 
<p>
The following table specifies the values for <b>bV5CSType</b>.

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=51%>Value</th>
<th align=left width=49%>Meaning</th>
</tr>
<tr valign=top>
<td width=51%>LCS_CALIBRATED_RGB</td>
<td width=49%>This value implies that endpoints and gamma values are given in the appropriate fields.</td>
</tr>
<tr valign=top>
<td width=51%>LCS_sRGB</td>
<td width=49%>Specifies that the bitmap is in sRGB color space. </td>
</tr>
<tr valign=top>
<td width=51%>LCS_WINDOWS_COLOR_SPACE</td>
<td width=49%>This value indicates that the bitmap is in the system default color space, sRGB. </td>
</tr>
<tr valign=top>
<td width=51%>PROFILE_LINKED</td>
<td width=49%>This value indicates that <b>bV5ProfileDat</b>a points to the file name of the profile to use (gamma and endpoints values are ignored). </td>
</tr>
<tr valign=top>
<td width=51%>PROFILE_EMBEDDED</td>
<td width=49%>This value indicates that <b>bV5ProfileData</b> points to a memory buffer that contains the profile to be used (gamma and endpoints values are ignored).</td>
</tr>
</table><br>


<p>
See the <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_logcolorspace_str">
</object><a href=JavaScript:alink_2.Click()><b>LOGCOLORSPACE</b></a> structure for information that defines a logical color space.
</dd>
<dt>
<b>bV5EndPoints </b></dt>
<dd>
A <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_ciexyztriple_str">
</object><a href=JavaScript:alink_3.Click()><b>CIEXYZTRIPLE</b></a> structure that specifies the x, y, and z coordinates of the three colors that correspond to the red, green, and blue endpoints for the logical color space associated with the bitmap. This member is ignored unless the <b>bV5CSType</b> member specifies LCS_CALIBRATED_RGB. </dd>
<dt>
<b>bV5GammaRed</b></dt>
<dd>
Toned response curve for red. Used if <b>bV5CSType </b>is set to LCS_CALIBRATED_RGB. Specified in 16^16 format. </dd>
<dt>
<b>bV5GammaGreen</b></dt>
<dd>
Toned response curve for green. Used if <b>bV5CSType </b>is set to LCS_CALIBRATED_RGB. Specified in 16^16 format. </dd>
<dt>
<b>bV5GammaBlue</b></dt>
<dd>
Toned response curve for blue. Used if <b>bV5CSType </b>is set to LCS_CALIBRATED_RGB. Specified in 16^16 format. </dd>
<dt>
<b>bV5Intent</b></dt>
<dd>
Rendering intent for bitmap.</dd>
<dt>
<b>bV5ProfileData</b></dt>
<dd>
The offset, in bytes, from the beginning of the<b> BITMAPV5HEADER</b> structure to the start of the profile data. If the profile is embedded, profile data is the actual profile, and it is linked. (The profile data is the null-terminated file name of the profile.) This cannot be a Unicode string. It must be composed exclusively of characters from the Windows character set (code page 1252). These profile members are ignored unless the <b>bV5CSType</b> member specifies PROFILE_LINKED or PROFILE_EMBEDDED. </dd>
<dt>
<b>bV5ProfileSize</b></dt>
<dd>
Size, in bytes, of embedded profile data.</dd>
<dt>
<b>bV5Reserved</b></dt>
<dd>
This member has been reserved for future use. Its value should be set to zero.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>BITMAPINFO</b> structure combines the <b>BITMAPV5HEADER</b> structure and a color table to provide a complete definition of the dimensions and colors of a DIB. For more information about DIBs, see <a href="bitmaps_9c6r.htm">Device-Independent Bitmaps</a> and <a href="bitmaps_0zn6.htm"><b>BITMAPINFO</b></a>. </p>
<p>
An application should use the information stored in the <b>bV5Size</b> member to locate the color table in a <b>BITMAPINFO</b> structure, as follows: </p>
<pre><code>pColor = ((LPSTR)pBitmapInfo + 
    (WORD)(pBitmapInfo-&gt;bmiHeader.biSize)); 
 </code></pre>
<p>
If <b>bV5Height</b> is negative, indicating a top-down DIB, <b>bV5Compression</b> must be either BI_RGB or BI_BITFIELDS. Top-down DIBs cannot be compressed.</p>
<p>
When a DIB is loaded into memory, the profile data (if present) should follow the color table, and the <b>bV5ProfileData</b> should provide the offset of the profile data from the beginning of the <b>BITMAPV5HEADER</b> structure. The value stored in <b>bV5ProfileDate</b> will be different from the value returned by the <b>sizeof</b> operator given the <b>BITMAPV5HEADER</b> argument, because <b>bV5ProfileData</b> is the offset in bytes from the beginning of the <b>BITMAPV5HEADER</b> structure to the start of the profile data. (Bitmap bits do not follow the color table in memory). Applications should modify the <b>bV5ProfileData</b> member after loading the DIB into memory. </p>
<p>
For packed DIBs, the profile data should follow the bitmap bits similar to the file format. The <b>bV5ProfileData</b> member should still give the offset of the profile data from the beginning of the <b>BITMAPV5HEADER</b>. </p>
<p>
Applications should access the profile data only when <b>bV5Size</b> equals the size of the <b>BITMAPB5HEADER</b> and <b>bV5CSType</b> equals PROFILE_EMBEDDED or PROFILE_LINKED.</p>
<p>
If a profile is linked, the path of the profile can be any fully qualified name (including a network path) that can be opened using the <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_createfile">
</object><a href=JavaScript:alink_4.Click()><b>CreateFile</b></a> function. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 98 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wingdi.h.</p>
<h4>See Also</h4>
<p>
<a href="bitmaps_99ir.htm">Bitmaps Overview</a>, <a href="bitmaps_2w1f.htm">Bitmap Structures</a> </p>
<p>&nbsp;</p></body>
</HTML>
