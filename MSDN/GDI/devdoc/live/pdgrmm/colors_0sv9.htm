<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SetSystemPaletteUse</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_setsystempaletteuse"></a>SetSystemPaletteUse</h1>
<p>
The <b>SetSystemPaletteUse</b> function allows an application to specify whether the system palette contains 2 or 20 static colors. The default system palette contains 20 static colors. (Static colors cannot be changed when an application realizes a logical palette.) </p>
<pre><code><b>UINT SetSystemPaletteUse(
  HDC</b><i> hdc</i><b>,      </b>// handle of device context
<b>  UINT</b><i> uUsage</i>   // palette-usage flag
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hdc</i></dt>
<dd>
Handle to the device context. This device context must refer to a device that supports color palettes. </dd>
<dt>
<i>uUsage</i></dt>
<dd>
Specifies the new use of the system palette. This parameter can be one of the following values: 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=38%>Value</th>
<th align=left width=62%>Meaning</th>
</tr>
<tr valign=top>
<td width=38%>SYSPAL_NOSTATIC</td>
<td width=62%>The system palette contains two static colors (black and white).</td>
</tr>
<tr valign=top>
<td width=38%>SYSPAL_NOSTATIC256</td>
<td width=62%><b>Windows NT 5.0 or later:</b> The system palette contains no static colors.</td>
</tr>
<tr valign=top>
<td width=38%>SYSPAL_STATIC</td>
<td width=62%>The system palette contains static colors that will not change when an application realizes its logical palette.</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is the previous system palette. It can be either SYSPAL_NOSTATIC, SYSPAL_NOSTATIC256, or SYSPAL_STATIC.</p>
<p>
If the function fails, the return value is SYSPAL_ERROR. </p>
<p>
<b>Windows NT:</b> To get extended error information, call <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_getlasterror">
</object><a href=JavaScript:alink_1.Click()><b>GetLastError</b></a>. </p>
<h4>Remarks</h4>
<p>
An application can determine whether a device supports palette operations by calling the <a href="devcons_88s3.htm"><b>GetDeviceCaps</b></a> function and specifying the RASTERCAPS constant. </p>
<p>
When an application window moves to the foreground and the SYSPAL_NOSTATIC value is set, the application must call the <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_getsyscolor">
</object><a href=JavaScript:alink_2.Click()><b>GetSysColor</b></a> function to save the current system colors setting. It must also call <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_setsyscolors">
</object><a href=JavaScript:alink_3.Click()><b>SetSysColors</b></a> to set reasonable values using only black and white. When the application returns to the background or terminates, the previous system colors must be restored. </p>
<p>
If the function returns SYSPAL_ERROR, the specified device context is invalid or does not support color palettes. </p>
<p>
An application must call this function only when its window is maximized and has the input focus. </p>
<p>
If an application calls <b>SetSystemPaletteUse</b> with <i>uUsage</i> set to SYSPAL_NOSTATIC, the system continues to set aside two entries in the system palette for pure white and pure black, respectively. </p>
<p>
After calling this function with <i>uUsage</i> set to SYSPAL_NOSTATIC, an application must take the following steps: 
<ol>
<li>
Realize the logical palette. </li>
<li>
Call the <b>GetSysColor</b> function to save the current system-color settings. </li>
<li>
Call the <b>SetSysColors</b> function to set the system colors to reasonable values using black and white. For example, adjacent or overlapping items (such as window frames and borders) should be set to black and white, respectively. </li>
<li>
Send the WM_SYSCOLORCHANGE message to other top-level windows to allow them to be redrawn with the new system colors. </li>
</ol>
<p>
When the application's window loses focus or closes, the application must perform the following steps: 
<ol>
<li>
Call <b>SetSystemPaletteUse</b> with the <i>uUsage</i> parameter set to SYSPAL_STATIC. </li>
<li>
Realize the logical palette. </li>
<li>
Restore the system colors to their previous values. </li>
<li>
Send the WM_SYSCOLORCHANGE message. </li>
</ol>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wingdi.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use gdi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="colors_87zn.htm">Colors Overview</a>, <a href="colors_61v7.htm">Color Functions</a>, <a href="devcons_88s3.htm"><b>GetDeviceCaps</b></a>, <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_getsyscolor">
</object><a href=JavaScript:alink_4.Click()><b>GetSysColor</b></a>, <object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_setsyscolors">
</object><a href=JavaScript:alink_5.Click()><b>SetSysColors</b></a>, <a href="colors_3tlx.htm"><b>GetSystemPaletteUse</b></a></p>
<p>&nbsp;</p></body>
</HTML>
