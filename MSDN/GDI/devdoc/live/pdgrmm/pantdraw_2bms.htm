<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Window Background</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_window_background"></a>Window Background</h2>
<p>
The window background is the color or pattern used to fill the client area before a window begins drawing. The window background covers whatever was on the screen before the window was moved there, erasing existing images and preventing the application's new output from being mixed with unrelated information. </p>
<p>
The system paints the background for a window or gives the window the opportunity to do so by sending it a <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_erasebkgnd">
</object><a href=JavaScript:alink_1.Click()>WM_ERASEBKGND</a> message when the application calls <a href="pantdraw_7b78.htm"><b>BeginPaint</b></a>. If an application does not process the message but passes it to <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_defwindowproc">
</object><a href=JavaScript:alink_2.Click()><b>DefWindowProc</b></a>, the system erases the background by filling it with the pattern in the background brush specified by the window's class. If the brush is not valid or the class has no background brush, the system sets the <b>fErase</b> member in the <a href="pantdraw_9ape.htm"><b>PAINTSTRUCT</b></a> structure <b>BeginPaint</b> returns, but carries out no other action. The application then has a second chance to draw the window background, if necessary. </p>
<p>
If it processes WM_ERASEBKGND, the application should use the message's <i>wParam</i> parameter to draw the background. This parameter contains the handle of the display device context for the window. After drawing the background, the application should return a nonzero value. This ensures that <b>BeginPaint</b> does not erroneously set the <b>fErase</b> member of the <b>PAINTSTRUCT</b> structure to a nonzero value (indicating the background should be erased) when the application processes the subsequent <a href="pantdraw_88ac.htm">WM_PAINT</a> message. </p>
<p>
An application can define a class background brush by assigning a brush handle or a system color value to the <b>hbrBackground</b> member of the <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wndclass_str">
</object><a href=JavaScript:alink_3.Click()><b>WNDCLASS</b></a> structure when registering the class with the <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_registerclass">
</object><a href=JavaScript:alink_4.Click()><b>RegisterClass</b></a> function. The <a href="devcons_1t10.htm"><b>GetStockObject</b></a> or <a href="brushes_52y0.htm"><b>CreateSolidBrush</b></a> function can be used to create a brush handle. A system color value can be one of those defined for the <object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_setsyscolors">
</object><a href=JavaScript:alink_5.Click()><b>SetSysColors</b></a> function. (The value must be increased by one before it is assigned to the member.) </p>
<p>
An application can process the WM_ERASEBKGND message even though a class background brush is defined. This is typical in applications that enable the user to change the window background color or pattern for a given window without affecting other windows in the class. In such cases, the application must not pass the message to <b>DefWindowProc</b>. </p>
<p>
It is not necessary for an application to align brushes, because the system draws the brush using the window origin as the point of reference. Given this, the user can move the window without affecting the alignment of pattern brushes. </p>
<p>&nbsp;</p></body>
</HTML>
