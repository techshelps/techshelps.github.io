<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BITMAPINFOHEADER</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_bitmapinfoheader_str"></a>BITMAPINFOHEADER</h1>
<p>
The <b>BITMAPINFOHEADER</b> structure contains information about the dimensions and color format of a device-independent bitmap (DIB). </p>
<p>
Applications developed for Windows NT 4.0 and Windows 95 may use the <a href="bitmaps_2k1e.htm"><b>BITMAPV4HEADER</b></a> structure. Applications developed for Windows NT 5.0 and Windows 98 may use the <a href="bitmaps_7c36.htm"><b>BITMAPV5HEADER</b></a> structure for increased functionality. </p>
<pre><code>typedef struct tagBITMAPINFOHEADER{ // bmih 
    DWORD  biSize; 
    LONG   biWidth; 
    LONG   biHeight; 
    WORD   biPlanes; 
    WORD   biBitCount 
    DWORD  biCompression; 
    DWORD  biSizeImage; 
    LONG   biXPelsPerMeter; 
    LONG   biYPelsPerMeter; 
    DWORD  biClrUsed; 
    DWORD  biClrImportant; 
} BITMAPINFOHEADER; 
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>biSize</b></dt>
<dd>
Specifies the number of bytes required by the structure. </dd>
<dt>
<b>biWidth</b></dt>
<dd>
Specifies the width of the bitmap, in pixels. 
<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>biCompression</b> is BI_JPEG, the <b>biWidth</b> member specifies the width of the decompressed JPEG image file. 
</dd>
<dt>
<b>biHeight</b></dt>
<dd>
Specifies the height of the bitmap, in pixels. If <b>biHeight</b> is positive, the bitmap is a bottom-up DIB and its origin is the lower-left corner. If <b>biHeight</b> is negative, the bitmap is a top-down DIB and its origin is the upper-left corner.
<p>
If <b>biHeight</b> is negative, indicating a top-down DIB, <b>biCompression</b> must be either BI_RGB or BI_BITFIELDS. Top-down DIBs cannot be compressed.

<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>biCompression</b> is BI_JPEG, the <b>biHeight</b> member specifies the height of the decompressed JPEG image file. 
</dd>
<dt>
<b>biPlanes</b></dt>
<dd>
Specifies the number of planes for the target device. This value must be set to 1. </dd>
<dt>
<b>biBitCount</b></dt>
<dd>
Specifies the number of bits per pixel. The <b>biBitCount</b> member of the <a href="#_win32_bitmapinfoheader_str"><b>BITMAPINFOHEADER</b></a> structure determines the number of bits that define each pixel and the maximum number of colors in the bitmap. This member must be one of the following values. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=12%>Value</th>
<th align=left width=88%>Meaning</th>
</tr>
<tr valign=top>
<td width=12%>0</td>
<td width=88%><b>Windows 98, Windows NT 5.0 and later:</b> The number of bits per pixel is specified or is implied by the JPEG format. </td>
</tr>
<tr valign=top>
<td width=12%>1</td>
<td width=88%>The bitmap is monochrome, and the <b>bmiColors</b> member contains two entries. Each bit in the bitmap array represents a pixel. If the bit is clear, the pixel is displayed with the color of the first entry in the <b>bmiColors</b> table; if the bit is set, the pixel has the color of the second entry in the table.</td>
</tr>
<tr valign=top>
<td width=12%>4</td>
<td width=88%>The bitmap has a maximum of 16 colors, and the <b>bmiColors</b> member contains up to 16 entries. Each pixel in the bitmap is represented by a 4-bit index into the color table. For example, if the first byte in the bitmap is 0x1F, the byte represents two pixels. The first pixel contains the color in the second table entry, and the second pixel contains the color in the sixteenth table entry.</td>
</tr>
<tr valign=top>
<td width=12%>8</td>
<td width=88%>The bitmap has a maximum of 256 colors, and the <b>bmiColors</b> member contains up to 256 entries. In this case, each byte in the array represents a single pixel.</td>
</tr>
<tr valign=top>
<td width=12%>16</td>
<td width=88%>The bitmap has a maximum of 2^16 colors. If the <b>biCompression</b> member of the <a href="#_win32_bitmapinfoheader_str"><b>BITMAPINFOHEADER</b></a> is BI_RGB, the <b>bmiColors</b> member is NULL. Each <b>WORD</b> in the bitmap array represents a single pixel. The relative intensities of red, green, and blue are represented with 5 bits for each color component. The value for blue is in the least significant 5 bits, followed by 5 bits each for green and red. The most significant bit is not used. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPINFOHEADER</b>. <p>
If the <b>biCompression</b> member of the <b>BITMAPINFOHEADER</b> is BI_BITFIELDS, the <b>bmiColors</b> member contains three <b>DWORD </b>color masks that specify the red, green, and blue components, respectively, of each pixel. Each <b>WORD </b>in the bitmap array represents a single pixel.</p>
<p>
<b>Windows NT</b>: When the <b>biCompression</b> member is BI_BITFIELDS, bits set in each <b>DWORD </b>mask must be contiguous and should not overlap the bits of another mask. All the bits in the pixel do not have to be used. </p>
<p>
<b>Windows 95 and Windows 98: </b>When the <b>biCompression</b> member is BI_BITFIELDS, the system supports only the following 16bpp color masks: A 5-5-5 16-bit image, where the blue mask is 0x001F, the green mask is 0x03E0, and the red mask is 0x7C00; and a 5-6-5 16-bit image, where the blue mask is 0x001F, the green mask is 0x07E0, and the red mask is 0xF800.</p>
</td>
</tr>
<tr valign=top>
<td width=12%>24</td>
<td width=88%>The bitmap has a maximum of 2^24 colors, and the <b>bmiColors</b> member is NULL. Each 3-byte triplet in the bitmap array represents the relative intensities of blue, green, and red, respectively, for a pixel. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPINFOHEADER</b>. </td>
</tr>
<tr valign=top>
<td width=12%>32</td>
<td width=88%>The bitmap has a maximum of 2^32 colors. If the <b>biCompression</b> member of the <b>BITMAPINFOHEADER</b> is BI_RGB, the <b>bmiColors</b> member is NULL. Each <b>DWORD</b> in the bitmap array represents the relative intensities of blue, green, and red, respectively, for a pixel. The high byte in each <b>DWORD</b> is not used. The <b>bmiColors</b> color table is used for optimizing colors used on palette-based devices, and must contain the number of entries specified by the <b>biClrUsed </b>member of the <b>BITMAPINFOHEADER</b>. <p>
If the <b>biCompression</b> member of the <b>BITMAPINFOHEADER</b> is BI_BITFIELDS, the <b>bmiColors</b> member contains three <b>DWORD </b>color masks that specify the red, green, and blue components, respectively, of each pixel. Each <b>DWORD </b>in the bitmap array represents a single pixel.</p>
<p>
<b>Windows NT:</b> When the <b>biCompression</b> member is BI_BITFIELDS, bits set in each <b>DWORD </b>mask must be contiguous and should not overlap the bits of another mask. All the bits in the pixel do not need to be used.</p>
<p>
<b>Windows 95 and Windows 98:</b> When the <b>biCompression</b> member is BI_BITFIELDS, the system supports only the following 32bpp color mask: The blue mask is 0x000000FF, the green mask is 0x0000FF00, and the red mask is 0x00FF0000. </p>
</td>
</tr>
</table><br>

</dd>
<dt>
<b>biCompression</b></dt>
<dd>
Specifies the type of compression for a compressed bottom-up bitmap (top-down DIBs cannot be compressed). This member can be one of the following values. 
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=27%>Value</th>
<th align=left width=73%>Description</th>
</tr>
<tr valign=top>
<td width=27%>BI_RGB</td>
<td width=73%>An uncompressed format.</td>
</tr>
<tr valign=top>
<td width=27%>BI_RLE8</td>
<td width=73%>A run-length encoded (RLE) format for bitmaps with 8 bits per pixel. The compression format is a 2-byte format consisting of a count byte followed by a byte containing a color index. For more information, see <a href="bitmaps_6x0u.htm">Bitmap Compression</a>. </td>
</tr>
<tr valign=top>
<td width=27%>BI_RLE4</td>
<td width=73%>An RLE format for bitmaps with 4 bits per pixel. The compression format is a 2-byte format consisting of a count byte followed by two word-length color indexes. For more information, see <a href="bitmaps_6x0u.htm">Bitmap Compression</a>.</td>
</tr>
<tr valign=top>
<td width=27%>BI_BITFIELDS</td>
<td width=73%>Specifies that the bitmap is not compressed and that the color table consists of three <b>DWORD</b> color masks that specify the red, green, and blue components, respectively, of each pixel. This is valid when used with 16- and 32-bit-per-pixel bitmaps.</td>
</tr>
<tr valign=top>
<td width=27%>BI_JPEG</td>
<td width=73%><b>Windows 98, Windows NT 5.0 and later:</b> Indicates that the image is a JPEG image.</td>
</tr>
</table><br>

</dd>
<dt>
<b>biSizeImage</b></dt>
<dd>
Specifies the size, in bytes, of the image. This may be set to zero for BI_RGB bitmaps. 
<p>
<b>Windows 98, Windows NT 5.0 and later:</b> If <b>biCompression</b> is JBI_JPEG, <b>biSizeImage</b> indicates the size of the JPEG image buffer. 
</dd>
<dt>
<b>biXPelsPerMeter</b></dt>
<dd>
Specifies the horizontal resolution, in pixels per meter, of the target device for the bitmap. An application can use this value to select a bitmap from a resource group that best matches the characteristics of the current device. </dd>
<dt>
<b>biYPelsPerMeter</b></dt>
<dd>
Specifies the vertical resolution, in pixels per meter, of the target device for the bitmap. </dd>
<dt>
<b>biClrUsed</b></dt>
<dd>
Specifies the number of color indexes in the color table that are actually used by the bitmap. If this value is zero, the bitmap uses the maximum number of colors corresponding to the value of the <b>biBitCount</b> member for the compression mode specified by <b>biCompression</b>. 
<p>
If <b>biClrUsed</b> is nonzero and the <b>biBitCount</b> member is less than 16, the <b>biClrUsed</b> member specifies the actual number of colors the graphics engine or device driver accesses. If <b>biBitCount</b> is 16 or greater, the <b>biClrUsed</b> member specifies the size of the color table used to optimize performance of the system color palettes. If <b>biBitCount</b> equals 16 or 32, the optimal color palette starts immediately following the three <b>DWORD</b> masks. 

<p>
If the bitmap is a packed bitmap (a bitmap in which the bitmap array immediately follows the <a href="bitmaps_0zn6.htm"><b>BITMAPINFO</b></a> header and is referenced by a single pointer), the <b>biClrUsed</b> member must be either zero or the actual size of the color table. 
</dd>
<dt>
<b>biClrImportant</b></dt>
<dd>
Specifies the number of color indexes that are required for displaying the bitmap. If this value is zero, all colors are required. 
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>BITMAPINFO</b> structure combines the <b>BITMAPINFOHEADER</b> structure and a color table to provide a complete definition of the dimensions and colors of a DIB. For more information about DIBs, <a href="bitmaps_9c6r.htm">Device-Independent Bitmaps</a> and <a href="bitmaps_0zn6.htm"><b>BITMAPINFO</b></a>. </p>
<p>
An application should use the information stored in the <b>biSize</b> member to locate the color table in a <b>BITMAPINFO</b> structure, as follows: </p>
<pre><code>pColor = ((LPSTR)pBitmapInfo + 
    (WORD)(pBitmapInfo-&gt;bmiHeader.biSize)); 
 </code></pre>
<p>
<b>Windows 98, Windows NT 5.0 and later:</b> The <b>BITMAPINFOHEADER </b>structure is extended to allow a JPEG image to be passed as the source image to<b> <a href="bitmaps_1ppv.htm">StretchDIBits</a></b>. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Requires version 1.0 or later.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wingdi.h.</p>
<h4>See Also</h4>
<p>
<a href="bitmaps_99ir.htm">Bitmaps Overview</a>, <a href="bitmaps_2w1f.htm">Bitmap Structures</a> </p>
<p>&nbsp;</p></body>
</HTML>
