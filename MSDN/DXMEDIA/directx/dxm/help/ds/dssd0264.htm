<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CVideoTransformFilter Class</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<META NAME="MS-HKWD" CONTENT="CVideoTransformFilter Class">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">
</HEAD>
<BODY TOPMARGIN=0 LEFTMARGIN=0 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<A NAME="pagetop"></A><A NAME="CVideoTransformFilter"></A>

<OBJECT ID="DAControl" 
  STYLE="position:absolute; left:0; top:11;width:702;height:90"
  CLASSID="CLSID:B6FFC24C-7E13-11D0-9B47-00C04FC2F51D">
</OBJECT>
<!--STYLE="width:702;height:110"-->
<SCRIPT LANGUAGE="JScript">
<!--
  // The DirectAnimation library
  m = DAControl.PixelLibrary;

  /* -- Insert your code here --*/ 

  mediaBase = "art\\";
  glowBase = m.importImage(mediaBase + "glow.gif");
  xImage = m.importImage(mediaBase + "newtransx.gif");
  xImage = xImage.Transform(m.Translate2(-303,0));
  //header1 = m.importImage(mediaBase + "header1.gif");
  //header1 = header1.Transform(m.Translate2(-301,0));

  //header2 = m.importImage(mediaBase + "hdrd3drm.gif");
  //header2 = header2.Transform(m.Translate2(-143,0));

  //header3 = m.importImage(mediaBase + "header3.gif");
  //header3 = header3.Transform(m.Translate2(157,-18));

  //background = m.Overlay(header1, m.Overlay( header2, header3));

  glowPath1 = m.Polyline( new Array( 295,26, 305,26, 305,50, 310,57, 519,57, 
    536,40, 536,17, 675,17, 675,23 ) );

  glowPath2 = m.PolyLine( new Array( 44,41, 44,25, 52,16, 84,16, 106,16 ) );

  glowPath3 = m.PolyLine( new Array( 57,55, 69,55, 78,65, 92,65, 99,58,
    99,82, 95,85, 95,93, 132,93, 132,78,
    303,78, 315,66, 549,66, 549,17, 675,17,
    675,23 ) );

  glowPath4 = m.PolyLine( new Array( 29,55, 19,55, 19,31, 38,30, 38,21,
    46,16, 106,16 ) );

  glowPath5 = m.PolyLine( new Array( 45,62, 45,81, 37,81, 41,85, 46,85,   
  51,91, 68,91, 66,81, 90,81, 90,65, 94,65, 105,47 ) );

  glow1 = glowBase.Transform( moveGlow( glowPath1, 5 ) );
  glow2 = glowBase.Transform( moveGlow( glowPath2, 2 ) );
  glow3 = glowBase.Transform( moveGlow( glowPath3, 8 ) );
  glow4 = glowBase.Transform( moveGlow( glowPath4, 2.5 ) );
  glow5 = glowBase.Transform( moveGlow( glowPath5, 2 ) );

  finalImg = m.Overlay(xImage, m.Overlay( glow5, m.Overlay( glow4, 
    m.Overlay( glow3, m.Overlay( glow2, glow1)))));


  // set the model, an image, as the model to be displayed
  DAControl.Image = finalImg;//m.Overlay(finalImg, background);
  // set the background in case of a non-windowless browser (like IE3)
  DAControl.BackgroundImage = m.SolidColorImage(m.Blue);     
     
  // start the animation       
  DAControl.Start()


  function moveGlow(path, speed)  {
    imDimX = 702;
    imDimY = 120;

    coordsXf = m.Translate2(-imDimX/2, -imDimY/2);
    path = path.Transform(coordsXf);
    return xf = m.FollowPath(path, speed).Repeat(1);
  }

//-->
</SCRIPT>
<TABLE BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="/directx/dxm/help/ds/art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CVideoTransformFilter Class"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="/directx/dxm/help/ds/art/hdrdshow.gif" WIDTH="210" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CVideoTransformFilter Class"></TD><TD VALIGN="TOP" WIDTH="383"><IMG SRC="/directx/dxm/help/ds/art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="*">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="/directx/dxm/help/d3drm/art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR><TR><TD VALIGN="TOP"><PRE><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="/directx/dxm/help/ds/index.htm">Index</A>  <IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="/directx/dxm/help/ds/dssd0188.htm">Topic Contents</A>
</FONT></PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><FONT FACE="Verdana,Arial,Helvetica" SIZE="1"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="/directx/dxm/help/ds/dssd0263.htm">CUnknown Class</A>
<IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="/directx/dxm/help/ds/dssd0265.htm">FOURCCMap Class</A>
</FONT></PRE></TD></TR></TABLE><BR CLEAR=ALL>
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><BLOCKQUOTE STYLE="margin:15pt">
<H2>CVideoTransformFilter Class</H2>
<BR CLEAR=ALL>
<P><IMG SRC="/directx/dxm/help/ds/art/vtsip01.gif" WIDTH="323" HEIGHT="261" ALT="CVideoTransformFilter class hierarchy">

<P>The <B>CVideoTransformFilter</B> class is designed primarily as a base class for AVI decompressor filters. It is based on a "copying" transform class and assumes that the output buffer will likely be a video buffer or Microsoft&#174; DirectDraw&#174; buffer, although this could be used as a base class for other types of transform filters. The main feature of this class is that it enables quality-control management in a transform filter. This means that it decides to drop frames based on receiving a quality notification from the renderer, and taking into account other factors about the media stream it is processing and the filter's own behavior.

<P>Every time the <A HREF="/directx/dxm/help/ds/dssd0264.htm#Receive">CVideoTransformFilter::Receive</A> member function is called, it calls
<A HREF="/directx/dxm/help/ds/dssd0264.htm#ShouldSkipFrame">CVideoTransformFilter::ShouldSkipFrame</A> to determine whether to start, continue, or 
stop skipping frames. This member function starts skipping samples 
only if all the following conditions are true.
<UL><LI>The average time to decode is more than one fourth of the frame time.
 <LI>The filter is running at least one frame late.
 <LI>The next anticipated key frame is estimated to be no more than one frame early. 
 <LI>The occurrence of key frames is sufficiently frequent. 
</UL>
<P>Once the class starts to skip frames, it will skip all frames until a key frame
appears, at which time it resets the <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_bSkipping">m_bSkipping</A> flag and processes
the sample. 


<P>Key frames are defined as AVI key frames or MPEG I frames. These require no
history to decode and, if they are skipped, no other frames can be decoded 
until the next key frame. Non-key frames include AVI non-key frames, MPEG P frames,
and MPEG B frames. MPEG B frames are treated the same as other non-key frames by 
this class. (MPEG B frames can be dropped without the need to skip further frames;
however, because this class is aimed primarily at AVI decompressors, it does not
allow for this. Once any frame is skipped, all frames are skipped up to the next
key frame.)

<A NAME="Protected_Data_Membe"></A><P><B>Protected Data Members</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_bNoSkip">m_bNoSkip</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Set to TRUE to prevent skipping to the next key frame (for debugging the filter).
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_bQualityChanged">m_bQualityChanged</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Status flag that indicates if the stream has degraded. This is set to TRUE in 
<A HREF="/directx/dxm/help/ds/dssd0264.htm#Receive">CVideoTransformFilter::Receive</A> if the call to the derived class 
<A HREF="/directx/dxm/help/ds/dssd0257.htm#Transform">Transform</A> member function fails. 
(<A HREF="/directx/dxm/help/ds/dssd0264.htm#Receive">Receive</A> returns NOERROR in this case 
because returning S_FALSE indicates that end-of-stream has arrived.) 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_bSkipping">m_bSkipping</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Set to TRUE if the filter is skipping to the next key frame.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_idFrameType">m_idFrameType</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Performance-measuring frame type identifier (available if <A HREF="/directx/dxm/help/ds/dssd0403.htm#PERF">PERF</A> is defined).
Logs 1 for key frames; logs 2 for nonkey frames.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_idLate">m_idLate</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Performance identifier for measuring lateness (available if PERF is defined).
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_idSkip">m_idSkip</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Performance identifier for measuring frame skipping (available if <A HREF="/directx/dxm/help/ds/dssd0403.htm#PERF">PERF</A> is defined).
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_idTimeTillKey">m_idTimeTillKey</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Performance identifier that represents an estimate of the 
time in milliseconds until the next key frame arrives 
(available if <A HREF="/directx/dxm/help/ds/dssd0403.htm#PERF">PERF</A> is defined). 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_itrAvgDecode">m_itrAvgDecode</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Average time required to decode (transform) the sample. If this is less than
one-fourth of the frame time, it is assumed the quality problems are not
being generated by this filter and no frames are dropped. 

</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_itrLate">m_itrLate</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Amount of time that the current frame is late. This is originally set to the
value of the <A HREF="/directx/dxm/help/ds/dssd0298.htm#Quality">Quality</A> structure's <A HREF="/directx/dxm/help/ds/dssd0298.htm#Late">Late</A> member passed in the quality
control message from the renderer filter. It is decremented by the frame time 
of each frame that is skipped.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_nFramesSinceKeyFrame">m_nFramesSinceKeyFrame</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Used to count frames since the last key frame. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_nKeyFramePeriod">m_nKeyFramePeriod</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The largest observed interval between key frames. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_nWaitForKey">m_nWaitForKey</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Used to ensure output after a format change before getting the first key frame. 
When nonzero, frames are not passed to the renderer. Set to 30 when format is 
changed and decremented on each non-key frame. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="CVideoTransformFilter::m_tDecodeStart">m_tDecodeStart</A></B> 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Time since the start of the decoding.
</FONT></TD></TR></TABLE>
<A NAME="Member_Functions"></A><P><B>Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#AlterQuality">AlterQuality</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Receives a quality-control notification from the output pin and provides 
an opportunity to alter the quality of the media stream. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#+">CVideoTransformFilter</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Constructs a <A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter</A> object.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#ShouldSkipFrame">ShouldSkipFrame</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if the filter should start, continue, or stop skipping frames.
</FONT></TD></TR></TABLE>
<A NAME="Overridable_Member_F"></A><P><B>Overridable Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#EndFlush">EndFlush</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Receives notification of leaving the flushing state and passes it downstream.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#Receive">Receive</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Receives the media sample and either skips the sample or 
transforms and delivers the media sample.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilte">RegisterPerfId</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Registers a performance measurement identifier.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#StartStreaming">StartStreaming</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Overrides <A HREF="/directx/dxm/help/ds/dssd0257.htm#StartStreaming">CTransformFilter::StartStreaming</A> to reset the quality control 
information when streaming starts or flushing starts.
</FONT></TD></TR></TABLE>
<H3><HR COLOR="#0000FF"><A NAME="AlterQuality">CVideoTransformFilter::AlterQuality</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Receives a quality-control notification and provides an opportunity to alter the quality 
of the media stream. 

<P><B>virtual</B> <B>HRESULT</B> <B>AlterQuality</B><B>(</B><BR>&nbsp;&nbsp;<B>Quality</B> <I>q</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>q</I>
</DT><DD>Quality-control notification message.
</DD></DL>
<H5>Return Values</H5>
<P>This member function returns E_FAIL by default. 


<H5>Remarks</H5>
<P>This member function overrides the <A HREF="/directx/dxm/help/ds/dssd0257.htm#AlterQuality">CTransformFilter::AlterQuality</A> member function. 
It is called by the <A HREF="/directx/dxm/help/ds/dssd0259.htm#Notify">CTransformOutputPin::Notify</A> member function before calling the 
<A HREF="/directx/dxm/help/ds/dssd0203.htm#PassNotify">CBaseInputPin::PassNotify</A> member function to pass the quality control message 
upstream. This function sets the <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_itrLate">CVideoTransformFilter::m_itrLate</A> data member to the 
value <A HREF="/directx/dxm/help/ds/dssd0298.htm#Quality">Quality</A> structure's <A HREF="/directx/dxm/help/ds/dssd0298.htm#Late">Late</A> member so that the filter can determine whether 
to skip frames. It returns E_FAIL so that the renderer downstream will continue to handle 
quality control.
<H3><HR COLOR="#0000FF"><A NAME="+">CVideoTransformFilter::CVideoTransformFilter</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Constructs a <A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter</A> object.

<P><B>CVideoTransformFilter</B><B>(</B><BR>&nbsp;&nbsp;<B>TCHAR</B> <I>*pName</I><B>,</B><BR>&nbsp;&nbsp;<B>LPUNKNOWN</B> <I>pUnk</I><B>,</B><BR>&nbsp;&nbsp;<B>REFCLSID</B> <I>clsid</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pName</I>
</DT><DD>Name given to the <A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter</A> object.
</DD><DT><I>pUnk</I>
</DT><DD>Pointer to LPUNKNOWN.
</DD><DT><I>clsid</I>
</DT><DD>Class identifier of the <A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter</A> class.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<H3><HR COLOR="#0000FF"><A NAME="EndFlush">CVideoTransformFilter::EndFlush</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Receives notification that the filter is leaving the flushing state and passes it downstream.

<P><B>HRESULT</B> <B>EndFlush</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns <A HREF="/directx/dxm/help/ds/dssd0308.htm#VFW_E_NOT_CONNECTED">VFW_E_NOT_CONNECTED</A> if the filter finds no input pin; otherwise, returns the value that the <A HREF="/directx/dxm/help/ds/dssd0170.htm#EndFlush">IPin::EndFlush</A> method returns.


<H5>Remarks</H5>
<P>This member function overrides the <A HREF="/directx/dxm/help/ds/dssd0257.htm#EndFlush">CTransformFilter::EndFlush</A> member function to reset quality management information. 
<H3><HR COLOR="#0000FF"><A NAME="Receive">CVideoTransformFilter::Receive</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Receives the media sample and either skips the sample or 
transforms and delivers the media sample.

<P><B>HRESULT</B> <B>Receive</B><B>(</B><BR>&nbsp;&nbsp;<B>IMediaSample</B> <I>*pSample</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pSample</I>
</DT><DD>Sample to deliver.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="/directx/dxm/help/ds/dssd0308.htm#HRESULT">HRESULT</A> value.


<H5>Remarks</H5>
<P>This member function overrides the <A HREF="/directx/dxm/help/ds/dssd0257.htm#Receive">CTransformFilter::Receive</A> member function.
Override only if you need more control of the process. 
<H3><HR COLOR="#0000FF"><A NAME="CVideoTransformFilte">CVideoTransformFilter::RegisterPerfId</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Registers performance measurement identifiers.

<P><B>virtual</B> <B>void</B> <B>RegisterPerfId</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>No return value.
<H5>Remarks</H5>
<P>By default, this member function registers the following performance identifiers.

<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Performance identifier </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Registered string
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_idSkip">m_idSkip</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Video transform skip frame
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_idFrameType">m_idFrameType</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Video transform frame type
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_idLate">m_idLate</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Video transform lateness
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_idTimeTillKey">m_idTimeTillKey</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Video transform estd. time to next key
</FONT></TD></TR></TABLE>
<P>This member function also calls <A HREF="/directx/dxm/help/ds/dssd0257.htm#RegisterPerfId">CTransformFilter::RegisterPerfId</A> for its
performance identifier.

<P>Override this member function if you want to register performance measurement identifiers
in the derived class. If you do this, be sure to register these as well. 
This member function is enabled only when <A HREF="/directx/dxm/help/ds/dssd0403.htm#PERF">PERF</A> is defined. 
<H3><HR COLOR="#0000FF"><A NAME="ShouldSkipFrame">CVideoTransformFilter::ShouldSkipFrame</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Determines if the filter should start, continue, or stop skipping frames.

<P><B>BOOL</B> <B>ShouldSkipFrame</B><B>(</B><BR>&nbsp;&nbsp;<B>IMediaSample</B> <B>*</B> <I>pIn</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pIn</I>
</DT><DD>Received sample to be transformed or skipped.
</DD></DL>
<H5>Return Values</H5>
<P>Returns TRUE if the filter should skip this sample; otherwise, returns FALSE.


<H5>Remarks</H5>
<P>This member function sets the <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_bSkipping">m_bSkipping</A> member variable to FALSE if
the sample is a key frame (sync point) and returns FALSE. This stops any skipping 
that has started. This member function starts skipping samples (sets <B>m_bSkipping</B>
to TRUE and returns TRUE) only if all of the following conditions are true.
<UL><LI>The average time to decode is more than one-fourth of the frame time.
 <LI>The filter is running at least one frame late.
 <LI>The next anticipated key frame is estimated to be no more than one frame early. 
 <LI>The occurrence of key frames is sufficiently frequent. 
</UL>
<P>This member function sends an <A HREF="/directx/dxm/help/ds/dssd0306.htm#EC_QUALITY_CHANGE">EC_QUALITY_CHANGE</A> notification when sample skipping
starts. Once skipping starts, all samples are skipped until the next key frame arrives.
<H3><HR COLOR="#0000FF"><A NAME="StartStreaming">CVideoTransformFilter::StartStreaming</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0264.htm">CVideoTransformFilter Class</A>
<P>Overrides <A HREF="/directx/dxm/help/ds/dssd0257.htm#StartStreaming">CTransformFilter::StartStreaming</A> to reset the quality control 
 information when streaming starts or flushing starts.

<P><B>virtual</B> <B>HRESULT</B> <B>StartStreaming</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns NOERROR. 


<H5>Remarks</H5>
<P>This member function sets several quality control member variables to 0,
including <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_itrLate">m_itrLate</A>, <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_nKeyFramePeriod">m_nKeyFramePeriod</A>, <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_nFramesSinceKeyFrame">m_nFramesSinceKeyFrame</A>,
<A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_bSkipping">m_bSkipping</A>, and <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_tDecodeStart">m_tDecodeStart</A>. It sets <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_itrAvgDecode">m_itrAvgDecode</A>
to 3000, and sets <A HREF="/directx/dxm/help/ds/dssd0264.htm#CVideoTransformFilter::m_bQualityChanged">m_bQualityChanged</A> and 
<A HREF="/directx/dxm/help/ds/dssd0257.htm#CTransformFilter::m_bSampleSkipped">m_bSampleSkipped</A> to FALSE. 
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="../cpyright.htm" TARGET="_top">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
</FONT>
<BR CLEAR=ALL><P>
<FONT FACE="Verdana,Arial,Helvetica" SIZE="1"><A HREF="#pagetop"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*">Top of Page</A></FONT>
</BLOCKQUOTE><P>
</FONT><P>
</BODY></HTML>
