<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CImageDisplay Class</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<META NAME="MS-HKWD" CONTENT="CImageDisplay Class">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">
</HEAD>
<BODY TOPMARGIN=0 LEFTMARGIN=0 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<A NAME="pagetop"></A><A NAME="CImageDisplay"></A>

<OBJECT ID="DAControl" 
  STYLE="position:absolute; left:0; top:11;width:702;height:90"
  CLASSID="CLSID:B6FFC24C-7E13-11D0-9B47-00C04FC2F51D">
</OBJECT>
<!--STYLE="width:702;height:110"-->
<SCRIPT LANGUAGE="JScript">
<!--
  // The DirectAnimation library
  m = DAControl.PixelLibrary;

  /* -- Insert your code here --*/ 

  mediaBase = "art\\";
  glowBase = m.importImage(mediaBase + "glow.gif");
  xImage = m.importImage(mediaBase + "newtransx.gif");
  xImage = xImage.Transform(m.Translate2(-303,0));
  //header1 = m.importImage(mediaBase + "header1.gif");
  //header1 = header1.Transform(m.Translate2(-301,0));

  //header2 = m.importImage(mediaBase + "hdrd3drm.gif");
  //header2 = header2.Transform(m.Translate2(-143,0));

  //header3 = m.importImage(mediaBase + "header3.gif");
  //header3 = header3.Transform(m.Translate2(157,-18));

  //background = m.Overlay(header1, m.Overlay( header2, header3));

  glowPath1 = m.Polyline( new Array( 295,26, 305,26, 305,50, 310,57, 519,57, 
    536,40, 536,17, 675,17, 675,23 ) );

  glowPath2 = m.PolyLine( new Array( 44,41, 44,25, 52,16, 84,16, 106,16 ) );

  glowPath3 = m.PolyLine( new Array( 57,55, 69,55, 78,65, 92,65, 99,58,
    99,82, 95,85, 95,93, 132,93, 132,78,
    303,78, 315,66, 549,66, 549,17, 675,17,
    675,23 ) );

  glowPath4 = m.PolyLine( new Array( 29,55, 19,55, 19,31, 38,30, 38,21,
    46,16, 106,16 ) );

  glowPath5 = m.PolyLine( new Array( 45,62, 45,81, 37,81, 41,85, 46,85,   
  51,91, 68,91, 66,81, 90,81, 90,65, 94,65, 105,47 ) );

  glow1 = glowBase.Transform( moveGlow( glowPath1, 5 ) );
  glow2 = glowBase.Transform( moveGlow( glowPath2, 2 ) );
  glow3 = glowBase.Transform( moveGlow( glowPath3, 8 ) );
  glow4 = glowBase.Transform( moveGlow( glowPath4, 2.5 ) );
  glow5 = glowBase.Transform( moveGlow( glowPath5, 2 ) );

  finalImg = m.Overlay(xImage, m.Overlay( glow5, m.Overlay( glow4, 
    m.Overlay( glow3, m.Overlay( glow2, glow1)))));


  // set the model, an image, as the model to be displayed
  DAControl.Image = finalImg;//m.Overlay(finalImg, background);
  // set the background in case of a non-windowless browser (like IE3)
  DAControl.BackgroundImage = m.SolidColorImage(m.Blue);     
     
  // start the animation       
  DAControl.Start()


  function moveGlow(path, speed)  {
    imDimX = 702;
    imDimY = 120;

    coordsXf = m.Translate2(-imDimX/2, -imDimY/2);
    path = path.Transform(coordsXf);
    return xf = m.FollowPath(path, speed).Repeat(1);
  }

//-->
</SCRIPT>
<TABLE BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="/directx/dxm/help/ds/art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageDisplay Class"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="/directx/dxm/help/ds/art/hdrdshow.gif" WIDTH="210" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageDisplay Class"></TD><TD VALIGN="TOP" WIDTH="383"><IMG SRC="/directx/dxm/help/ds/art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="*">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="/directx/dxm/help/d3drm/art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR><TR><TD VALIGN="TOP"><PRE><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="/directx/dxm/help/ds/index.htm">Index</A>  <IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="/directx/dxm/help/ds/dssd0188.htm">Topic Contents</A>
</FONT></PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><FONT FACE="Verdana,Arial,Helvetica" SIZE="1"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="/directx/dxm/help/ds/dssd0229.htm">CImageAllocator Class</A>
<IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="/directx/dxm/help/ds/dssd0231.htm">CImagePalette Class</A>
</FONT></PRE></TD></TR></TABLE><BR CLEAR=ALL>
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><BLOCKQUOTE STYLE="margin:15pt">
<H2>CImageDisplay Class</H2>
<BR CLEAR=ALL>
<P><IMG SRC="/directx/dxm/help/ds/art/wutil06.gif" WIDTH="205" HEIGHT="56" ALT="CImageDisplay class hierarchy">

<P>This class initializes itself with a display format so that other objects can
query or reset the display type. It also provides member functions to check display formats
and accept only those video formats that can be efficiently rendered by using GDI calls.

<A NAME="Protected_Data_Membe"></A><P><B>Protected Data Members</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="m_Display">m_Display</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure corresponding to the current device display type.
</FONT></TD></TR></TABLE>
<A NAME="Member_Functions"></A><P><B>Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CheckBitFields">CheckBitFields</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Checks that the bit fields on a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure are correct.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CheckHeaderValidity">CheckHeaderValidity</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if a <A HREF="/directx/dxm/help/ds/dssd0078.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure is valid.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CheckMediaType">CheckMediaType</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if the filter can support the media type proposed by the output pin.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CheckPaletteHeader">CheckPaletteHeader</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if the palette on a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure is correct.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CheckVideoType">CheckVideoType</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Compares a video type to determine if it is compatible with the current display mode.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#+">CImageDisplay</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Constructs a <A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay</A> object.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CountPrefixBits">CountPrefixBits</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Counts the number of prefix bits.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#CountSetBits">CountSetBits</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Counts the total number of bits set in a field.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#GetBitMasks">GetBitMasks</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves a set of color element bitmasks for the supplied <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A>
structure.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#GetColourMask">GetColourMask</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves a set of individual color element masks.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#GetDisplayDepth">GetDisplayDepth</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves the bit depth of the current display mode.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#GetDisplayFormat">GetDisplayFormat</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the current display mode.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#IsPalettized">IsPalettized</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if the display uses a palette.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#RefreshDisplayType">RefreshDisplayType</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Updates the <A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay</A> object with the current display type.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="/directx/dxm/help/ds/dssd0230.htm#UpdateFormat">UpdateFormat</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Updates the <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to remove implicit assumptions.
</FONT></TD></TR></TABLE>
<H3><HR COLOR="#0000FF"><A NAME="CheckBitFields">CImageDisplay::CheckBitFields</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Checks that the bit fields in the <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure are correct.

<P><B>BOOL</B> <B>CheckBitFields</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to check.
</DD></DL>
<H5>Return Values</H5>
<P>Returns one of the following values.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">TRUE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Bit fields are correct.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">FALSE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Bit fields contain an error.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>The assumption throughout the object is that any bitmasks are allowed no
more than 8 bits to store a color component. This member function checks that the
bit count assumption is enforced, and also ensures that all the bits set are contiguous.

<P>This is a protected member function.
<H3><HR COLOR="#0000FF"><A NAME="CheckHeaderValidity">CImageDisplay::CheckHeaderValidity</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Determines if a <A HREF="/directx/dxm/help/ds/dssd0078.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure is valid.

<P><B>BOOL</B> <B>CheckHeaderValidity</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure that contains the bitmap details.
</DD></DL>
<H5>Return Values</H5>
<P>Returns one of the following values.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">TRUE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Format is valid.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">FALSE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Format contains an error.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>The <A HREF="/directx/dxm/help/ds/dssd0078.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure might be rejected for a number of reasons.
These might include a number-of-planes entry greater or less than one, the size of the
structure not being equal to the size of <B>BITMAPINFOHEADER</B>, 
or, perhaps, being asked to validate a YUV format (this member function only
validates RGB formats; it will always return FALSE for YUV types).

<H3><HR COLOR="#0000FF"><A NAME="CheckMediaType">CImageDisplay::CheckMediaType</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Determines if the filter can support the media type proposed by the output pin.

<P><B>HRESULT</B> <B>CheckMediaType</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>CMediaType</B> <I>*pmtIn</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pmtIn</I>
 </DT><DD>Media type to check.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="/directx/dxm/help/ds/dssd0308.htm#HRESULT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This helper member function can be used to validate a video media type. It
examines the major and minor type <A HREF="/directx/dxm/help/ds/dssd0412.htm#GUID">GUID</A>s and verifies that the format <B>GUID</B> defines a
<A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure.
<H3><HR COLOR="#0000FF"><A NAME="CheckPaletteHeader">CImageDisplay::CheckPaletteHeader</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Determines if the palette on a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure is correct.

<P><B>BOOL</B> <B>CheckPaletteHeader</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to validate.
</DD></DL>
<H5>Return Values</H5>
<P>Returns one of the following values.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">TRUE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Palette is correct.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">FALSE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">No valid palette.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>This member function returns FALSE if the format specifies that no palette is
available (it might be a true-color format). It also returns FALSE if the
number of palette colors used (or those that are important) exceeds the number
specified for the video format.
<H3><HR COLOR="#0000FF"><A NAME="CheckVideoType">CImageDisplay::CheckVideoType</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Compares a video type to determine if it is compatible with the current display mode.

<P><B>HRESULT</B> <B>CheckVideoType</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to validate.
</DD></DL>
<H5>Return Values</H5>
<P>Returns NOERROR if successful or E_INVALIDARG if unsuccessful.

<H5>Remarks</H5>
<P>Many video rendering filters want a function to determine if proposed
formats are okay. This member function checks the <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure
passed as a media type and returns NOERROR if the media type is valid; otherwise,
it returns E_INVALIDARG434. Note, however, that only formats that can be
easily displayed on the current display device are accepted; so, for example, a 16-bit device
will not accept 24-bit images. Because most displays draw 8-bit palettized images efficiently,
this format is always accepted unless the display is 16-color VGA.

<H3><HR COLOR="#0000FF"><A NAME="+">CImageDisplay::CImageDisplay</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Constructs a <A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay</A> object.

<P><B>CImageDisplay</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>No return value.
<H5>Remarks</H5>
<P>The <A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay</A> class helps renderers that want to determine the format of the
current display mode. This member function retrieves the display mode and creates a
<A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure that represents its format. The class supplies that format
for clients through member functions such as <A HREF="/directx/dxm/help/ds/dssd0230.htm#IsPalettized">IsPalettized</A>
and <A HREF="/directx/dxm/help/ds/dssd0230.htm#GetDisplayFormat">GetDisplayFormat</A>.
If a client detects the display format has changed (perhaps it receives a
WM_DISPLAYCHANGED message), it should call
<A HREF="/directx/dxm/help/ds/dssd0230.htm#RefreshDisplayType">RefreshDisplayType</A>.
<H3><HR COLOR="#0000FF"><A NAME="CountPrefixBits">CImageDisplay::CountPrefixBits</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Helper member function to count the number of prefix bits.

<P><B>DWORD</B> <B>CountPrefixBits</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>DWORD</B> <I>Field</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>Field</I>
 </DT><DD>Input bitmask field.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<H5>Remarks</H5>
<P>Given a bitmask, this member function counts the number of zero bits up to the least
significant set bit. So, for a binary number 00000100, the member function returns
2 (decimal). The member function does, however, work on <A HREF="/directx/dxm/help/ds/dssd0404.htm#DWORD">DWORD</A> values, so it counts from
the least significant bit up through the <B>DWORD</B> to the last bit (0x80000000). If no
bits are found, this will return the (impossible) value 32 (decimal).

<P>This is a protected member function.
<H3><HR COLOR="#0000FF"><A NAME="CountSetBits">CImageDisplay::CountSetBits</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Counts the number of bit sets in the <I>Field</I> parameter.

<P><B>DWORD</B> <B>CountSetBits</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>DWORD</B> <I>Field</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>Field</I>
 </DT><DD>Field in which to count bit sets.
</DD></DL>
<H5>Return Values</H5>
<P>Returns the number of bit sets.

<H5>Remarks</H5>
<P>This is a protected member function.
<H3><HR COLOR="#0000FF"><A NAME="GetBitMasks">CImageDisplay::GetBitMasks</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Retrieves a set of color element bitmasks for the supplied <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A>
structure.

<P><B>const</B> <B>DWORD</B> <B>*GetBitMasks</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pVideoInfo</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pVideoInfo</I>
 </DT><DD>Input <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure format.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<H5>Remarks</H5>
<P>This member function should be called only with RGB formats. If the RGB format has a
bit depth of 16/32 bits per pixel, it will return the bitmasks for
the individual red, green, and blue color elements (for example, RGB565
is 0xF800, 0x07E0, and 0x001F). For RGB24, this will return 0xFF0000, 0xFF00,
and 0xFF. For palettized formats, this will return all zeros.
<H3><HR COLOR="#0000FF"><A NAME="GetColourMask">CImageDisplay::GetColourMask</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Retrieves a set of individual color element masks.

<P><B>BOOL</B> <B>GetColourMask</B><B>(</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskRed</I><B>,</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskGreen</I><B>,</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskBlue</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pMaskRed</I>
 </DT><DD>Holds red mask.
</DD><DT><I>pMaskGreen</I>
 </DT><DD>Holds green mask.
</DD><DT><I>pMaskBlue</I>
 </DT><DD>Holds blue mask.
</DD></DL>
<H5>Return Values</H5>
<P>Returns one of the following values.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">TRUE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Masks were filled out correctly.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">FALSE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">No masks were available for the display.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>Given a video format described by a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure,
this member function returns the mask
that is used to obtain the range of acceptable colors for this type (for
example, the mask for a 24-bit true color format is 0xFF in all cases). A
16-bit 5:6:5 display format uses 0xF8, 0xFC, and 0xF8. Therefore, given any
RGB triplets, this member function can find one that is
compatible with the display format by using a bitwise-AND operation.

<H3><HR COLOR="#0000FF"><A NAME="GetDisplayDepth">CImageDisplay::GetDisplayDepth</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Retrieves the bit depth of the current display mode.

<P><B>WORD</B> <B>GetDisplayDepth</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns the number of bits per pixel used on the display.

<H3><HR COLOR="#0000FF"><A NAME="GetDisplayFormat">CImageDisplay::GetDisplayFormat</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Retrieves a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the current display mode.

<P><B>const</B> <B>VIDEOINFO</B> <B>*GetDisplayFormat</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns a <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the display format.

<H3><HR COLOR="#0000FF"><A NAME="IsPalettized">CImageDisplay::IsPalettized</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Determines if the display uses a palette.

<P><B>BOOL</B> <B>IsPalettized</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns TRUE if the display uses a palette; otherwise, returns FALSE.

<H3><HR COLOR="#0000FF"><A NAME="RefreshDisplayType">CImageDisplay::RefreshDisplayType</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Updates the <A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay</A> object with the current display type.

<P><B>HRESULT</B> <B>RefreshDisplayType</B><B>(</B><BR>&nbsp;&nbsp;<B>LPSTR</B> <I>szDeviceName</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>szDeviceName</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0404.htm#LPSTR">LPSTR</A> value that contains the name of the device to update. If omitted, this parameter defaults to the main device.
</DD></DL>
<H5>Return Values</H5>
<P>Returns NOERROR if successful; E_FAIL if unsuccessful.

<H5>Remarks</H5>
<P>This member function should be called when a WM_DISPLAYCHANGED message is received.
<H3><HR COLOR="#0000FF"><A NAME="UpdateFormat">CImageDisplay::UpdateFormat</A></H3>
<A HREF="/directx/dxm/help/ds/dssd0230.htm">CImageDisplay Class</A>
<P>Updates the <A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to remove implicit assumptions.

<P><B>HRESULT</B> <B>UpdateFormat</B><B>(</B><BR>&nbsp;&nbsp;<B>VIDEOINFO</B> <I>*pVideoInfo</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pVideoInfo</I>
 </DT><DD><A HREF="/directx/dxm/help/ds/dssd0298.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to update.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="/directx/dxm/help/ds/dssd0308.htm#HRESULT">HRESULT</A> value. Current implementation returns NOERROR.

<H5>Remarks</H5>
<P>This member function is probably suitable only for specific filters to use.
The <A HREF="/directx/dxm/help/ds/dssd0078.htm#BITMAPINFO">BITMAPINFO</A> structure has certain fields that are not well
specified. In particular, the number of colors specified for a palette can be zero,
in which case it is defined to be the maximum for that format type.
This member function updates these fields so that their contents are explicit.
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="../cpyright.htm" TARGET="_top">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
</FONT>
<BR CLEAR=ALL><P>
<FONT FACE="Verdana,Arial,Helvetica" SIZE="1"><A HREF="#pagetop"><IMG SRC="/directx/dxm/help/ds/art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*">Top of Page</A></FONT>
</BLOCKQUOTE><P>
</FONT><P>
</BODY></HTML>
