<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DirectX Media SDK DirectAnimation Tutorial</TITLE>
<LINK REL=STYLESHEET HREF="/directx/dxm/webcd/da/tutorial.css">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="noindex">
</HEAD>
<BODY BGCOLOR="WHITE" LINK="#0033CC" TOPMARGIN=0 LEFTMARGIN=20>
<!--TOOLBAR_START-->
<!--TOOLBAR_EXEMPT-->
<!--TOOLBAR_END-->

<DIV CLASS="flush">
<TABLE WIDTH="100%" BORDER=0 BGCOLOR="#000000">
<TR ALIGN=RIGHT><TD VALIGN=TOP><FONT CLASS=desc1 SIZE=2>
<A HREF="Section3.html" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/u_prev.gif"
 WIDTH=71 HEIGHT=16 BORDER=0 ALT="Previous Topic">
</A><A HREF="/directx/dxm/webcd/da/tutorial_main.htm" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/d_home.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Tutorial Home Page"></A>
<A HREF="Section5.html" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/u_next.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Next Topic">
</A></FONT></TD><TD WIDTH=30></TD></TR></TABLE></DIV>

<FONT CLASS=title><CENTER>Construct a 3-D rendered Image</CENTER></FONT>
<BR>
<FONT CLASS=code>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> Constructs one of the puzzle images by rendering
 three intertwined and animate instances of a doughnut.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">public ImageBvr createGeoImage() {<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> construct a color with a time- varying hue</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">NumberBvr hue1 = mul(localTime, toBvr(0.2));<BR>
ColorBvr col = colorHsl(hue1, toBvr(0.5), toBvr(0.5));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> import a half doughnut in the positive Y half space</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr halfDonut =<BR>
</DIV><DIV STYLE="margin-left: 0.375in">importGeometry(buildURL(_geoBase,"hlfdonut.x"));</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> Construct a complete doughnut by combining with the second half.
 The resulting doughnut is centered around the origin and is of
 [-1,1] extent in X and Y.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr donut = union(halfDonut,<BR>
</DIV><DIV STYLE="margin-left: 0.875in">halfDonut.transform(rotate(xVector3, toBvr(Math.PI))));</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> The first doughnut rotates around the Y axis and
 has the time-varying color.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr donut0 =<BR>
</DIV><DIV STYLE="margin-left: 0.375in">donut.transform(compose(rotate(yVector3, localTime),<BR>
</DIV><DIV STYLE="margin-left: 1.875in">scale3(toBvr(0.3)))).diffuseColor(col);</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> The second doughnut is based on the first one scaled down by 25%,
 shifted by 0.2 in positive Z,
 and animated at a 30% faster rate than the first one.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr donut1 = (GeometryBvr)<BR>
</DIV><DIV STYLE="margin-left: 0.375in">donut0.transform(compose(translate(0,0,0.2),<BR>
</DIV><DIV STYLE="margin-left: 1.9375in">scale3(0.75)))</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> when the first doughnut progresses by one unit,
 this second doughnut progresses by 1.3 units.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.75in">.substituteTime(mul(localTime, toBvr(1.3)));</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> The third doughnut is based on the first one scaled down by 25%,
 shifted by 0.2 in negative Z,
 and animated at a 40% slower rate than the first one.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr donut2 = (GeometryBvr)<BR>
</DIV><DIV STYLE="margin-left: 0.375in">donut0.transform(compose(translate(0,0,-0.2),<BR>
</DIV><DIV STYLE="margin-left: 0.5in">scale3(0.75))).substituteTime(mul(localTime, toBvr(0.6)));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> Construct a 3-D rotational transform with a time-varying
 axis of rotation and a time-varying angle of rotation.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">Transform3Bvr xf = rotate(vector3(sin(localTime),<BR>
</DIV><DIV STYLE="margin-left: 0.375in">cos(localTime), sin(mul(toBvr(1.34), localTime))),<BR>
</DIV><DIV STYLE="margin-left: 0.5in">mul(localTime, toBvr(0.62)));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> The geometry for the image is the aggregation of the
 three doughnuts from above with the animate rotational transform applied.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">GeometryBvr donuts = union(donut0, union(donut1, donut2)).transform(xf);<BR>
</DIV><DIV STYLE="margin-left: 0.625in"></DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> a camera with projection point at 3 and near plane at 2</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">CameraBvr cam = perspectiveCamera(toBvr(3),toBvr(2));<BR>
</DIV><BR>
<DIV STYLE="margin-left: 0.25in">GeometryBvr geoWithLight = union(donuts, directionalLight);<BR>
</DIV><DIV STYLE="margin-left: 0.375in"><BR>
</DIV><DIV STYLE="margin-left: 0.25in">ImageBvr im = geoWithLight.render(cam);</DIV>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> This translates the image so that its lower left corner
 is approximately at the origin. This approximation allows
 the image (doughnuts really) to get clipped slightly.</FONT></TD></TR></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">im = im.transform(translate(0.5,0.5));<BR>
</DIV><BR>
<DIV STYLE="margin-left: 0.25in">return overlay(im, solidColorImage(white));<BR>
</DIV><DIV STYLE="margin-left: 0.125in">}<BR>
<BR>
</DIV><BR></FONT>
<FONT CLASS=link><A CLASS=cpslug HREF="http://www.microsoft.com/misc/cpyright.htm"  TARGET="_top">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A></FONT>

<BR>
<BR>
<DIV CLASS="flush">
<TABLE WIDTH="100%" BORDER=0 BGCOLOR="#000000">
<TR ALIGN=RIGHT><TD VALIGN=TOP><FONT CLASS=desc1 SIZE=2>
<A HREF="Section3.html" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/u_prev.gif"
 WIDTH=71 HEIGHT=16 BORDER=0 ALT="Previous Topic">
</A><A HREF="/directx/dxm/webcd/da/tutorial_main.htm" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/d_home.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Tutorial Home Page"></A>
<A HREF="Section5.html" TARGET="_top">
<IMG SRC="/directx/dxm/media/image/u_next.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Next Topic">
</A></FONT></TD></TR><TR><TD WIDTH=30></TD></TR></TABLE></DIV>

</BODY>
</HTML>
