<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RAS Security DLL Authentication Transaction</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_ras_security_dll_authentication_transaction"></a>RAS Security DLL Authentication Transaction</h3>
<p>
The Windows NT RAS server calls the security DLL's <a href="remacces_45da.htm"><b>RasSecurityDialogBegin</b></a> function to begin an authentication of a remote user. The RAS server is blocked and cannot accept any other calls until <b>RasSecurityDialogBegin</b> returns. For this reason, <b>RasSecurityDialogBegin</b> should copy the input parameters, create a thread to perform the authentication, and return as quickly as possible. </p>
<p>
The thread created by the security DLL uses the <a href="remacces_38x0.htm"><b>RasSecurityDialogSend</b></a> and <a href="remacces_3rvp.htm"><b>RasSecurityDialogReceive</b></a> functions to communicate with the remote computer. These functions are not available for static import from any library. Instead, the security DLL must use the <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_loadlibrary">
</object><a href=JavaScript:alink_1.Click()><b>LoadLibrary</b></a> and <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_getprocaddress">
</object><a href=JavaScript:alink_2.Click()><b>GetProcAddress</b></a> functions to dynamically link to these functions in RASMAN.DLL. </p>
<p>
During an authentication transaction, the RAS connection manager on the remote computer displays a terminal window. The thread of the security DLL calls <b>RasSecurityDialogSend</b> to send a message to display in the terminal window. The thread then calls <b>RasSecurityDialogReceive</b> to receive the input that the remote user types in the terminal window. The thread can make any number of <b>RasSecurityDialogSend</b> calls, with each call followed by a <b>RasSecurityDialogReceive</b> call. After each call to <b>RasSecurityDialogReceive</b>, the thread must call one of the wait functions, such as <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_waitforsingleobject">
</object><a href=JavaScript:alink_3.Click()><b>WaitForSingleObject</b></a>, to wait for the asynchronous send and receive operations to be completed. The RAS server signals an event object when the receive operation has been completed or when an optional time-out interval has elapsed.</p>
<p>
When the thread has finished authenticating the remote user, it calls the <a href="remacces_8lph.htm"><b>RasSecurityDialogComplete</b></a> function. This call passes a <a href="remacces_1baq.htm"><b>SECURITY_MESSAGE</b></a> structure containing the results of the authentication transaction to the RAS server. The RAS server then performs a cleanup sequence that includes a call to the DLL's <a href="remacces_2l0k.htm"><b>RasSecurityDialogEnd</b></a> function. This gives the security DLL an opportunity to perform any necessary cleanup. </p>
<p>
The security DLL can call the <a href="remacces_43u7.htm"><b>RasSecurityDialogGetInfo</b></a> function to retrieve information about the port associated with an authentication transaction. <b>RasSecurityDialogGetInfo</b> fills in a <a href="remacces_3yeq.htm"><b>RAS_SECURITY_INFO</b></a> structure that indicates the state of the last <a href="remacces_3rvp.htm"><b>RasSecurityDialogReceive</b></a> call for the port</p>
<p>&nbsp;</p></body>
</HTML>
