<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CERT_PHYSICAL_STORE_INFO</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_crypto2_cert_physical_store_info"></a>CERT_PHYSICAL_STORE_INFO</h1>
<p>
The <b>CERT_PHYSICAL_STORE_INFO</b> structure contains the information on physical certificate stores. The Open fields in this structure are passed directly to <a href="certstor_12sl.htm"><b>CertOpenStore</b></a> to open the physical store.</p>
<pre><code>typedef struct _CERT_PHYSICAL_STORE_INFO{
    DWORD               cbSize;
    LPSTR               pszOpenStoreProvider;
    DWORD               dwOpenEncodingType;
    DWORD               dwOpenFlags;
    CRYPT_DATA_BLOB     OpenParameters;         // REG_BINARY
    DWORD               dwFlags;                // REG_DWORD
    DWORD               dwPriority;             // REG_DWORD
} CERT_PHYSICAL_STORE_INFO, *PCERT_PHYSICAL_STORE_INFO;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>cbSize</b></dt>
<dd>
Set by <a href="certstor_12sl.htm"><b>CertOpenStore</b></a> to the size of this structure.</dd>
<dt>
<b>pszOpenStoreProvider</b></dt>
<dd>
See description of store provider in the documentation for <a href="certstor_12sl.htm"><b>CertOpenStore</b></a><b>.</b>
<p>
Pointer to a string that determines the store provider type. Predefined store provider types are in the documentation for <a href="certstor_12sl.htm">CertOpenStore</a>. Additional store providers may be installed or registered via <a href="oidsupp_3y5v.htm"><b>CryptInstallOIDFunctionAddress</b></a> or <a href="oidsupp_4c32.htm"><b>CryptRegisterOIDFunction</b></a>. For additional information, see <a href="oid_9mnt.htm">Extending CertOpenStore Functionality</a>. 
</dd>
<dt>
<b>dwOpenEncodingType</b></dt>
<dd>
This member is applicable only when CERT_STORE_PROV_MSG, CERT_STORE_PROV_PKCS7, or CERT_STORE_PROV_FILENAME is passed in <i>lpszStoreProvider</i>. Otherwise, this member is unused. The LOWORD specifies the encoding type of certificates CRLs, and CTLs. The HIWORD specifies the encoding type of the message. 
<p>
Both a certificate and a message encoding type are required. They are specified by combining the two encoding types with a bitwise OR operation, as in the following example:

<p class=indent1>
X509_ASN_ENCODING | PKCS_7_ASN_ENCODING</p>

<p>
Currently defined encoding types are:

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=60%>Encoding type</th>
<th align=left width=40%>Value</th>
</tr>
<tr valign=top>
<td width=60%>X509_ASN_ENCODING</td>
<td width=40%>0x00000001</td>
</tr>
<tr valign=top>
<td width=60%>PKCS_7_ASN_ENCODING</td>
<td width=40%>0x00010000</td>
</tr>
</table><br>

</dd>
<dt>
<b>dwOpenFlags</b></dt>
<dd>
If a system store is opened via the SERVICES or USERS store location, the <b>dwOpenFlags</b> store location is set to CERT_SYSTEM_STORE_USERS or CERT_SYSTEM_STORE_SERVICES.</dd>
<dt>
<b>OpenParameters</b></dt>
<dd>
If a system store is opened via the SERVICES or USERS store location and the physical store is CERT_SYSTEM_STORE_CURRENT_USER or CERT_SYSTEM_STORE_CURRENT_SERVICE, the ServiceName is placed in front of the <b>OpenParameters</b>. 
<p>
If a physical store is opened remotely and a SYSTEM, SYSTEM_REGISTRY or PHYSICAL provider type is used, the \\ComputerName is implicitly placed in front of the <b>OpenParameters</b>.
</dd>
<dt>
<b>dwFlags</b></dt>
<dd>
The following <b>dwFlags </b>for CERT_PHYSICAL_STORE_INFO are defined in wincrypt.h: 
<dl>
<dt>
CERT_PHYSICAL_STORE_ADD_ENABLE_FLAG</dt>
<dd>
This flag is to enable the adding of a context to the store.</dd>
<dt>
CERT_PHYSICAL_STORE_OPEN_DISABLE_FLAG</dt>
<dd>
This flag is set by <a href="certstor_9skl.htm"><b>CertRegisterPhysicalStore</b></a>. By default, all system stores located in the registry have an implicit SystemRegistry physical store that is opened. To disable the opening of this store, the SystemRegistry physical store corresponding to the System store must be registered with CERT_PHYSICAL_STORE_OPEN_DISABLE_FLAG set or a physical store named ".Default" may be registered with <a href="certstor_9skl.htm"><b>CertRegisterPhysicalStore</b></a>. </dd>
<dt>
CERT_PHYSICAL_STORE_REMOTE_OPEN_DISABLE_FLAG</dt>
<dd>
When this flag is set, remote opens of the physical store are disabled.</dd>
<dt>
CERT_PHYSICAL_STORE_INSERT_COMPUTER_NAME_ENABLE_FLAG</dt>
<dd>
When this flag is set , a \\ComputerName is placed in front of other provider types.</dd>
<dt>
CERT_SYSTEM_STORE_RELOCATE_FLAG </dt>
<dd>
When this flag is set in the <b>dwFlags </b>member, <b>CertOpenStore</b> can be open a store relative to a user specified HKEY instead of one of the predefined HKEY constants. For example, HKEY_CURRENT_USER can be replaced with a user specified HKEY. When CERT_SYSTEM_STORE_RELOCATE_FLAG is set, the <i>pvPara</i> passed to <b>CertOpenStore</b> points to a <a href="structs_9bvl.htm">CERT_SYSTEM_STORE_RELOCATE_PARA</a> data structure instead of pointing to the store name as a null terminated unicode or ASCII string.</dd>
</dl>
</dd>
<dt>
<b>dwPriority</b></dt>
<dd>
When a system store is opened, its physical stores are ordered according to their <b>dwPriority</b> settings. A higher <b>dwPriority</b> indicates higher priority. <b>dwPriority</b> is passed to <a href="certstor_2uni.htm"><b>CertAddStoreToCollection</b></a>.
</dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
