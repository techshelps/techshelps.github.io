<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CertEnumPhysicalStore</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_crypto2_certenumphysicalstore"></a>CertEnumPhysicalStore</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The <b>CertEnumPhysicalStore</b> function enumerates the physical stores for a specified system store.</p>
<pre><code><b>#include &lt;wincrypt.h&gt;
BOOL WINAPI CertEnumPhysicalStore(
  const void</b> <i>pvSystemStore</i>,              // in
  <b>DWORD </b><i>dwFlags</i>,                         // in
  <b>void </b><i>*pvArg</i>,                           // in
  <b>PFN_CERT_ENUM_PHYSICAL_STORE</b> <i>pfnEnum</i>   // in
<b>);</b>
<b> </b></code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>pvSystemStore</i></dt>
<dd>
If CERT_SYSTEM_STORE_RELOCATE_FLAG is set in <i>dwFlags</i>, <i>pvSystemStore</i> points to a <a href="structs_9bvl.htm">CERT_SYSTEM_STORE_RELOCATE_PARA</a> that indicates both the name and the location of the system store. Otherwise it is a pointer to a unicode string that names the system store whose physical stores are to be enumerated. See<b> <a href="certstor_06lh.htm">CertRegisterSystemStore</a></b> for details on prefixing a ServiceName or ComputerName to the system store name.</dd>
<dt>
<i>dwFlags</i></dt>
<dd>
The HIWORD of the <i>dwFlags</i> parameter specifies the location of the system store.The following dwFlags are defined:
<dl>
<dt>
CERT_SYSTEM_STORE_CURRENT_USER <br>
CERT_SYSTEM_STORE_CURRENT_SERVICE <br>
CERT_SYSTEM_STORE_LOCAL_MACHINE<br>
CERT_SYSTEM_STORE_LOCAL_MACHINE_GROUP_POLICY<br>
CERT_SYSTEM_STORE_CURRENT_MACHINE_GROUP_POLICY<br>
CERT_SYSTEM_STORE_SERVICES <br>
CERT_SYSTEM_STORE_USERS</dt>
</dl>

<p>
In addition CERT_SYSTEM_STORE_RELOCATE_FLAG may be ORed with any of the HIWORD location flags.
</dd>
<dt>
<i>pvArg</i></dt>
<dd>
Pointer to a void which allows the application to declare, define, and initialize a data structure to hold any information to be passed to the callback enumeration function.</dd>
<dt>
<i>pfnEnum</i></dt>
<dd>
Pointer to the callback function used to show the details for each physical store. This callback function determines the content and format for the presentation of information on each physical store. The application must provide the callback function and declare the following signature :
<pre><code>BOOL WINAPI CertEnumPhysicalStoreCallback(
  const void *pvSystemStore,             // in
  DWORD dwFlags,                         // in
  PCERT_SYSTEM_STORE_INFO pStoreInfo,    // in
  void *pvReserved,                      // in, optional
  void *pvArg                            // in, optional
);
 </code></pre>

<p>
The <i>pvArg </i>passed to the callback function is the <i>pvArg pointer</i> passed to <b>CertEnumPhysicalStore</b>.

</dd>
</dl>
<h4>Return Values</h4>
<p>
The function returns TRUE if another physical store was found. If another physical store was not found, it returns FALSE. </p>
<p>
If the system store location only supports system stores and does not support physical stores, the function returns FALSE and <b>GetLastError</b> returns ERROR_NOT_SUPPORTED.</p>
<h4>Remarks</h4>
<p>
To use <b>CertEnumPhysicalStore</b>, an application must declare and define the ENUM_ARG data structure and an enumeration callback function.</p>
<p>
To access a remote store, the Security Permissions in the registry keys on that remote computer must be set to allow access. For more information on setting Security Permissions in an NT registry, see MDSN Article ID Q155363. For information on what to do to enable remote administration on a Win95 registry.</p>
<h4>Example</h4>
<p>
See <a href="mancerts_32r7.htm">Example Code for Listing System and Physical Stores</a>. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wincrypt.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use crypt32.lib.</p>
<h4>See Also</h4>
<p>
<a href="certstor_06lh.htm"><b>CertRegisterSystemStore</b></a>,<b> <a href="certstor_9skl.htm">CertRegisterPhysicalStore</a></b>,<b> <a href="certstor_8i91.htm">CertUnregisterSystemStore</a></b>,<b> <a href="certstor_3so5.htm">CertUnregisterPhysicalStore</a></b>,<b> <a href="certstor_1wha.htm">CertEnumSystemStoreLocation</a></b>,<b> <a href="certstor_419h.htm">CertEnumSystemStore</a></b></p>
<p>&nbsp;</p></body>
</HTML>
