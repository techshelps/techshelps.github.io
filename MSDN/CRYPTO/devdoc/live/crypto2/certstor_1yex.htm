<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CertGetCTLContextProperty</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_crypto2_certgetctlcontextproperty"></a>CertGetCTLContextProperty</h1>
<p>
The <b>CertGetCTLContextProperty</b> function gets a property for the specified CTL context.</p>
<pre><code><b>#include &lt;wincrypt.h&gt;
BOOL WINAPI CertGetCTLContextProperty(
  PCCTL_CONTEXT</b><i> pCtlContext</i><b>,   </b>// in
<b>  DWORD</b><i> dwPropId</i><b>,              </b>// in
<b>  void </b><i>*pvData</i><b>,                </b>// out
<b>  DWORD </b>*<i>pcbData               </i>// in/out
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>pCtlContext</i></dt>
<dd>
Pointer to the CTL context.</dd>
<dt>
<i>dwPropId</i></dt>
<dd>
ID for the desired property.
<p>
See <a href="certstor_9ce1.htm"><b>CertGetCertificateContextProperty</b></a> for a complete list of property IDs. CERT_SHA1_HASH_PROP_ID or CERT_NEXT_UPDATE_LOCATION_PROP_ID are the predefined properties of most interest.
</dd>
<dt>
<i>pvData</i></dt>
<dd>
Pointer to a buffer that receives the data as indicated by <i>dwPropId</i>. Elements pointed to by fields in the <i>pvData</i> structure follow the structure. Therefore, the size contained in <i>pcbData</i> may exceed the size of the structure. 
<p>
This parameter can be NULL to set the size of this information for memory allocation purposes. For more information, see <a href="refoview_46pf.htm">Common In/Out Parameter Conventions</a>. 
</dd>
<dt>
<i>pcbData</i></dt>
<dd>
Pointer to a variable that specifies the size, in bytes, of the buffer pointed to by the <i>pvData</i> parameter. When the function returns, the variable pointed to by the <i>pcbData</i> parameter contains the number of bytes stored in the buffer. This parameter can be NULL, only if <i>pvData</i>  is NULL.
<p>
<b>Note</b>&nbsp;&nbsp;When processing the data returned in the buffer, applications need to use the actual size of the data returned. The actual size may be slightly smaller than the size of the buffer specified on input. (On input, buffer sizes are usually specified large enough to ensure that the largest possible output data will fit in the buffer.) On output, the variable pointed to by this parameter is updated to reflect the actual size of the data copied to the buffer.

</dd>
</dl>
<h4>Return Values</h4>
<p>
TRUE if the function succeeded. FALSE if the function failed. </p>
<p>
Call <b>GetLastError</b> to see the reason for any failures. Note that errors from the called function <a href="certhelp_2jxh.htm"><b>CryptHashCertificate</b></a> may be propagated to this function. This function has the following error codes:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Error code</th>
<th align=left width=52%>Description</th>
</tr>
<tr valign=top>
<td width=48%>ERROR_MORE_DATA</td>
<td width=52%>If the buffer specified by the <i>pvData </i>parameter is not large enough to hold the returned data, the function sets the ERROR_MORE_DATA code, and stores the required buffer size, in bytes, into the variable pointed to by <i>pcbData</i>.</td>
</tr>
<tr valign=top>
<td width=48%>CRYPT_E_NOT_FOUND </td>
<td width=52%>The CTL doesn't have the specified property.</td>
</tr>
</table><br>
<h4>Example</h4>
<p>
See the example for <a href="certstor_3qk3.htm"><b>CertEnumCertificateContextProperties</b></a>, and extrapolate from a certificate to a CTL ( PCCERT_CONTEXT becomes PCCTL_CONTEXT, pCertContext becomes pCTLContext, CertEnumCertificateContextProperties becomes <a href="certstor_1noz.htm"><b>CertEnumCTLContextProperties</b></a>, and <a href="certstor_9ce1.htm"><b>CertGetCertificateContextProperty</b></a> becomes <b>CertGetCTLContextProperty</b>).</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 4.0 SP3 or later. Available also in IE 3.02 and later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 OSR2 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in wincrypt.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use crypt32.lib.</p>
<h4>See Also</h4>
<p>
<a href="certstor_1noz.htm"><b>CertEnumCTLContextProperties</b></a>,<b> <a href="certstor_9oc9.htm">CertSetCTLContextProperty</a> </b></p>
<p>&nbsp;</p></body>
</HTML>
