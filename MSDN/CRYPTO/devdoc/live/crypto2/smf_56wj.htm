<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using the CryptDecryptMessage Function and Associated Structures</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_crypto2_using_the_cryptdecryptmessage_function_and_associated_structures"></a>Using the CryptDecryptMessage Function and Associated Structures</h3>
<p>
Only <a href="sca_73j9.htm"><b>CryptDecryptMessage</b></a> is needed to accomplish all of the tasks listed in the previous section. Initialization of structures and other data is necessary first. The following illustration shows the relationship between those function parameters that point to structures or arrays and their initialized data.</p>
<p>
<img src="images/crypdecr.gif" border=0></p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To decrypt data using CryptDecryptMessage</h5>
<ol>
<li>
Get a pointer to the encrypted blob.</li>
<li>
Get a pointer to a certificate store.</li>
<li>
Create a certificate store array.</li>
<li>
Initialize the <a href="structs_87vl.htm"><b>CRYPT_DECRYPT_MESSAGE_PARA</b></a> structure.</li>
<li>
Call <a href="sca_73j9.htm"><b>CryptDecryptMessage</b></a> to decrypt the data contained in the message.</li>
</ol>
<p>&nbsp;</p></body>
</HTML>
