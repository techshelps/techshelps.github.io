<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DELETE: Delete File</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_cifs_81"></a>DELETE: Delete File</h3>
<p>
The delete file message is sent to delete a data file.  The appropriate <i>tid</i> and additional pathname are passed.  Read only files may not be deleted, the read-only attribute must be reset prior to file deletion.</p>
<table border=1 cellspacing=4 cols=2 frame=box rules=cols>
<tr valign=top>
<td width=50%>Client Request<br>
==================================</td>
<td width=50%>Description<br>
=================================</td>
</tr>
<tr valign=top>
<td width=50%>UCHAR WordCount;</td>
<td width=50%>Count of parameter words = 1</td>
</tr>
<tr valign=top>
<td width=50%>USHORT SearchAttributes;</td>
<td width=50%></td>
</tr>
<tr valign=top>
<td width=50%>USHORT ByteCount;</td>
<td width=50%>Count of data bytes;    min = 2</td>
</tr>
<tr valign=top>
<td width=50%>UCHAR BufferFormat;</td>
<td width=50%>0x04</td>
</tr>
<tr valign=top>
<td width=50%>STRING FileName[];</td>
<td width=50%>File name</td>
</tr>
</table><br>
<p>
Multiple files may be deleted in response to a single request as SMB_COM_DELETE supports wildcards </p>
<p>
<i>SearchAttributes</i> indicates the attributes that the target file(s) must have.  If the attribute is zero then only normal files are deleted.  If the system file or hidden attributes are specified then the delete is inclusive -both the specified type(s) of files and normal files are deleted.  Attributes are described in the "Attribute Encoding" section of this document.</p>
<p>
If <i>bit0</i> of the <i>Flags2</i> field of the SMB header is set, a pattern is passed in, and the file has a long name, then the passed pattern  much match the long file name for the delete to succeed.  If <i>bit0</i> is clear, a pattern is passed in, and the file has a long name, then the passed pattern must match the file's short name for the deletion to succeed.</p>
<table border=1 cellspacing=4 cols=2 frame=box rules=cols>
<tr valign=top>
<td width=50%>Server Response<br>
==================================</td>
<td width=50%>Description<br>
=================================</td>
</tr>
<tr valign=top>
<td width=50%>UCHAR WordCount;</td>
<td width=50%>Count of parameter words = 0</td>
</tr>
<tr valign=top>
<td width=50%>USHORT ByteCount;</td>
<td width=50%>Count of data bytes = 0</td>
</tr>
</table><br>
<h4>Errors</h4>
<p>
ERRDOS/ERRbadpath<br>
ERRDOS/ERRbadfile<br>
ERRDOS/ERRnoaccess<br>
ERRHRD/ERRnowrite<br>
ERRSRV/ERRaccess<br>
ERRSRV/ERRinvdevice<br>
ERRSRV/ERRinvid<br>
ERRSRV/ERRbaduid</p>
<p>&nbsp;</p></body>
</HTML>
