<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TRANS2_REPORT_DFS_INCONSISTENCY: Inform a server about DFS Error</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_cifs_99"></a>TRANS2_REPORT_DFS_INCONSISTENCY: Inform a server about DFS Error</h3>
<p>
As part of the Distributed Name Resolution algorithm, a DFS client may discover a  knowledge inconsistency between the referral server (i.e., the server that handed out a referral), and the storage server (i.e., the server to which the client was redirected to by the referral server). When such an inconsistency is discovered, the DFS client optionally sends this SMB to the referral server, allowing the referral server to take corrective action.</p>
<table border=1 cellspacing=4 cols=2 frame=box rules=cols>
<tr valign=top>
<td width=49%>Client Request<br>
==================================</td>
<td width=51%>Description<br>
==================================</td>
</tr>
<tr valign=top>
<td width=49%>WordCount</td>
<td width=51%>15</td>
</tr>
<tr valign=top>
<td width=49%>MaxParameterCount</td>
<td width=51%>0</td>
</tr>
<tr valign=top>
<td width=49%>SetupCount</td>
<td width=51%><code>1</code></td>
</tr>
<tr valign=top>
<td width=49%>Setup[0]</td>
<td width=51%><code>TRANS2_REPORT_DFS_INCONSISTENCY</code></td>
</tr>
<tr valign=top>
<td width=49%></td>
<td width=51%></td>
</tr>
<tr valign=top>
<td width=49%></td>
<td width=51%></td>
</tr>
<tr valign=top>
<td width=49%>Parameter Block Encoding<br>
==================================</td>
<td width=51%>Description<br>
==================================</td>
</tr>
<tr valign=top>
<td width=49%>UNICODESTRING RequestFileName;</td>
<td width=51%>DFS Name of file for which referral was sought</td>
</tr>
</table><br>
<p>
The data part of this request contains the referral element (Version 1 format only) believed to be in error.  These are encoded as described in the <code>TRANS2_GET_DFS_REFERRAL </code>response.  If the server returns success, the client can resubmit the <code>TRANS2_GET_DFS_REFERRAL</code> request to this server to get a new referral.  It is not mandatory for the DFS knowledge to be automatically repaired – the client must be prepared to receive further errant referrals and must not wind up looping between this request and the <code>TRANS2_GET_DFS_REFERRAL</code> request.</p>
<p>
<i>Bit15</i> of <i>Flags2</i> in the SMB header must be set, indicating this is a UNICODE request.</p>
<p>&nbsp;</p></body>
</HTML>
