<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Valid SMB Requests by Negotiated Dialect</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_cifs_60"></a><i></i>Valid SMB Requests by Negotiated Dialect</h2>
<p>
The following SMB messages may be exchanged by CIFS clients and servers if the "<code>PC NETWORK PROGRAM 1.0"</code> dialect is negotiated:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=50%><code>SMB_COM_CREATE_DIRECTORY</code></td>
<td width=50%><code>SMB_COM_DELETE_DIRECTORY</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_OPEN</code></td>
<td width=50%><code>SMB_COM_CREATE</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_CLOSE</code></td>
<td width=50%><code>SMB_COM_FLUSH</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_DELETE</code></td>
<td width=50%><code>SMB_COM_RENAME</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_QUERY_INFORMATION</code></td>
<td width=50%><code>SMB_COM_SET_INFORMATION</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_READ</code></td>
<td width=50%><code>SMB_COM_WRITE</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_LOCK_BYTE_RANGE</code></td>
<td width=50%><code>SMB_COM_UNLOCK_BYTE_RANGE</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_CREATE_TEMPORARY</code></td>
<td width=50%><code>SMB_COM_CREATE_NEW</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_CHECK_DIRECTORY</code></td>
<td width=50%><code>SMB_COM_PROCESS_EXIT</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_SEEK</code></td>
<td width=50%><code>SMB_COM_TREE_CONNECT</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_TREE_DISCONNECT</code></td>
<td width=50%><code>SMB_COM_NEGOTIATE</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_QUERY_INFORMATION_DISK</code></td>
<td width=50%><code>SMB_COM_SEARCH</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_OPEN_PRINT_FILE</code></td>
<td width=50%><code>SMB_COM_WRITE_PRINT_FILE</code></td>
</tr>
<tr valign=top>
<td width=50%><code>SMB_COM_CLOSE_PRINT_FILE</code></td>
<td width=50%><code>SMB_COM_GET_PRINT_QUEUE</code></td>
</tr>
</table><br>
<p>
If the "<code>LANMAN 1.0"</code> dialect is negotiated, all of the messages in the previous list must be supported.  Clients negotiating <code>LANMAN 1.0</code> and higher dialects will probably no longer send SMB_COM_PROCESS_EXIT, and the response format for SMB_COM_NEGOTIATE is modified as well.  New messages introduced with the <code>LANMAN 1.0</code> dialect are:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><code>SMB_COM_LOCK_AND_READ</code></td>
<td width=52%><code>SMB_COM_WRITE_AND_UNLOCK</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_READ_RAW</code></td>
<td width=52%><code>SMB_COM_READ_MPX</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_WRITE_MPX</code></td>
<td width=52%><code>SMB_COM_WRITE_RAW</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_WRITE_COMPLETE</code></td>
<td width=52%><code>SMB_COM_WRITE_MPX_SECONDARY</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_SET_INFORMATION2</code></td>
<td width=52%><code>SMB_COM_QUERY_INFORMATION2</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_LOCKING_ANDX</code></td>
<td width=52%><code>SMB_COM_TRANSACTION</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_TRANSACTION_SECONDARY</code></td>
<td width=52%><code>SMB_COM_IOCTL</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_IOCTL_SECONDARY</code></td>
<td width=52%><code>SMB_COM_COPY</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_MOVE</code></td>
<td width=52%><code>SMB_COM_ECHO</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_WRITE_AND_CLOSE</code></td>
<td width=52%><code>SMB_COM_OPEN_ANDX</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_READ_ANDX</code></td>
<td width=52%><code>SMB_COM_WRITE_ANDX</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_SESSION_SETUP_ANDX</code></td>
<td width=52%><code>SMB_COM_TREE_CONNECT_ANDX</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_FIND</code></td>
<td width=52%><code>SMB_COM_FIND_UNIQUE</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_FIND_CLOSE</code></td>
<td width=52%></td>
</tr>
</table><br>
<p>
The "<code>LM1.2X002"</code> dialect introduces these new SMBs:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><code>SMB_COM_TRANSACTION2</code></td>
<td width=52%><code>SMB_COM_TRANSACTION2_SECONDARY</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_FIND_CLOSE2</code></td>
<td width=52%><code>SMB_COM_LOGOFF_ANDX</code></td>
</tr>
</table><br>
<p>
<code>"NT LM 0.12"</code> dialect introduces:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><code>SMB_COM_NT_TRANSACT</code></td>
<td width=52%><code>SMB_COM_NT_TRANSACT_SECONDARY</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_NT_CREATE_ANDX</code></td>
<td width=52%><code>SMB_COM_NT_CANCEL</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_NT_RENAME</code></td>
<td width=52%><code>SMB_COM_READ_BULK</code></td>
</tr>
<tr valign=top>
<td width=48%><code>SMB_COM_WRITE_BULK</code></td>
<td width=52%><code>SMB_COM_WRITE_BULK_DATA</code></td>
</tr>
</table>
<p>&nbsp;</p></body>
</HTML>
