<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WM_IME_COMPOSITION</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>WM_IME_COMPOSITION </H3><P>Sent two bytes of composition characters to the application. This message is sent when an IME changes composition status as a result of a user's keystroke. The IME user interface window changes its appearance when it processes this message. An application can call <B>ImmGetCompositionString</B> to obtain detailed composition status. </P>
<UL><LI>     No return value. </LI></UL><P></P>
<P><I>wParam</I> </P>
<P>Double byte character that is the latest change of composition character. </P>
<P><I>lParam</I> </P>
<P>Flag that indicates how the composition string or character changed. An application check this to retrieve necessary information. It can be a combination of the following values: </P>
<P>GCS_COMPSTR </P>
<P>GCS_COMPATTR </P>
<P>GCS_COMPCLAUSE </P>
<P>GCS_COMPREADSTR </P>
<P>GCS_COMPREADATTR </P>
<P>GCS_COMPREADCLAUSE </P>
<P>GCS_TYPINGINFO </P>
<P>GCS_SETCURSORPOS </P>
<P>GCS_RESULTSTR </P>
<P>GCS_RESULTCLAUSE </P>
<P>GCS_RESULTREADSTR </P>
<P>GCS_RESULTREADCLAUSE </P>
<P>GCR_ERRORSTR </P>
<P>GCR_INFOSTR </P>
<P>The following values are special styles for WM_IME_COMPOSITION. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>CS_INSERTCHAR </P></TD><TD VALIGN="TOP"><P>An IME specifies this value when <I>wParam</I> shows a composition character which should be inserted into the current insertion point. An application should display a composition character if it processes this bit flag. </P></TD></TR><TR><TD VALIGN="TOP"><P>CS_NOMOVECARET </P></TD><TD VALIGN="TOP"><P>An IME specifies this value to prevent an application from moving the caret position as a result of processing WM_IME_COMPOSITION. For example, if an IME specifies a combination of CS_INSERTCHAR and CS_NOMOVECARET, it means that an application should insert a character given by <I>wParam</I> into the current caret position, but should not move caret. Subsequent WM_IME_COMPOSITION with GCS_RESULTSTR replace this character. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>An application that needs to display composition characters by itself should not pass this message to either the application IME user interface window or <B>DefWindowProc</B>, which passes the message to the default IME window. An IME should give this message to an application even when the IME simply cancels the current composition. An application or IME UI should use this message to erase the current composition string. </P>
<P></P>
<P></P></FONT></BODY></HTML>
