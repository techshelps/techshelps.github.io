<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IFSMgr_ServerDOSCall</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IFSMgr_ServerDOSCall </H3><P>This service is provided so that FSDs that need to do a server DOS call to obtain certain services need not do an int 21h call any more. They can directly call this service now. The parameters for this service are passed in registers. </P>
<P><I>[EBX]</I> </P>
<P>Handle of current VM. </P>
<P><I>[ECX]</I> </P>
<P>Function number. </P>
<P><I>[ESI]</I> </P>
<P>Pointer to extended 32-bit DPL. This structure looks as follows: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>DPL32 Structure:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_EAX</I> </P></TD><TD VALIGN="TOP"><P>Supplies EAX register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_EBX</I> </P></TD><TD VALIGN="TOP"><P>Supplies EBX register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_ECX</I> </P></TD><TD VALIGN="TOP"><P>Supplies ECX register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_EDX</I> </P></TD><TD VALIGN="TOP"><P>Supplies EDX register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_ESI</I> </P></TD><TD VALIGN="TOP"><P>Supplies ESI register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_EDI</I> </P></TD><TD VALIGN="TOP"><P>Supplies EDI register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_EBP</I> </P></TD><TD VALIGN="TOP"><P>Supplies EBP register. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_UID</I> </P></TD><TD VALIGN="TOP"><P>Supplies the user id. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_PID</I> </P></TD><TD VALIGN="TOP"><P>Supplies the process id. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_DTA</I> </P></TD><TD VALIGN="TOP"><P>Supplies a flat pointer to the DTA. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>DPL32_FLAGS</I> </P></TD><TD VALIGN="TOP"><P>Supplies special flags. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>DPL32 Flag Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>DPL32_USE_ANSI</B> </P></TD><TD VALIGN="TOP"><P>Requests the IFS manager to assume that the path strings passed in are in Windows ANSI. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>DPL32_USE_OEM</B> </P></TD><TD VALIGN="TOP"><P>Requests the IFS manager to assume that the path strings passed in are in the current OEM codepage. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>DPL32_USE_UNICODE</B> </P></TD><TD VALIGN="TOP"><P>Requests IFS manager to assume everything is passed in unicode. By default, the IFS manager selects the codepage based on the current thread context. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>DPL32_8_3_MATCHING</B> </P></TD><TD VALIGN="TOP"><P>If this flag is set, the IFS manager will force 8.3 matching semantics on the pathname passed in even though it came in via an LFN api. The path can contain long names, but the filename itself cannot be a long name. This api is provided because the server may have to issue an LFN api call on a call that originated as a normal api at the client end if the sharename is long. However, a normal LFN api has LFN matching semantics and this poses compatibility issues for old-style apps. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>DPL32_PAD</I> </P>
<P>Filler bytes to align structure. </P>
<P><I>[EBP]</I> </P>
<P>Pointer to client register frame. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>     <I>Carry clear</I> </P></TD><TD VALIGN="TOP"><P>Request was processed. Client registers set appropriately to indicate status of the call. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>Carry set</I> </P></TD><TD VALIGN="TOP"><P>Request was not processed by the IFS manager. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P></P>
<P></P></FONT></BODY></HTML>
