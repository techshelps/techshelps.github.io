<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Device Driver Services and Messages</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Device Driver Services and Messages </H3><P>A device driver controls and manages the device hardware. Device drivers are responsible for identifying the specific resource requirements of the given device and for setting the device to operate with the configuration assigned by the Configuration Manager. The Configuration Manager provides services and messages that a device driver can use to carry out its tasks. In particular, a device driver can register a configuration handler function by using the <B>CONFIGMG_Register_Device_Driver</B> service. Once the handler is registered, the Configuration Manager sends it configuration messages whenever it needs the device driver to carry out a configuration task. </P>
<P>These are the device driver services: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="230pt" VALIGN="TOP"><COL WIDTH="100pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Service </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_CallBack_Device_Driver</B> </P></TD><TD VALIGN="TOP"><P>Calls back to the device driver, once per devnode, with CONFIGMG_Register_Device_Driver. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Device_Driver_Private_DWord</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the private value for a device driver in a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Register_Device_Driver</B> </P></TD><TD VALIGN="TOP"><P>Registers a configuration handler for a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Set_Device_Driver_Private_DWord</B> </P></TD><TD VALIGN="TOP"><P>Sets the private value for a device driver in a device node. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>These are the configuration messages: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="174pt" VALIGN="TOP"><COL WIDTH="174pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Message </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_ENUMERATE </P></TD><TD VALIGN="TOP"><P>Directs a driver to enumerate its immediate children. This message is sent when a device is inserted or removed. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_FILTER </P></TD><TD VALIGN="TOP"><P>Directs a driver to process a new device or changes to the configuration of a device. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_REMOVE </P></TD><TD VALIGN="TOP"><P>Notifies the driver that the associated device node is being removed from the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_START </P></TD><TD VALIGN="TOP"><P>Notifies the driver that a configuration has been allocated for the device node; the driver can retrieve the configuration and begin to use it. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_STOP </P></TD><TD VALIGN="TOP"><P>Directs the driver to stop using its currently allocated configuration. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_TEST </P></TD><TD VALIGN="TOP"><P>Requests permission from the driver to invalidate the assigned configuration or remove the given device node; the driver should not grant permission if it cannot stop using the current configuration or is not prepared for the device to be removed from the system. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The device driver must return CR_DEFAULT for any configuration messages it does not process. </P></FONT></BODY></HTML>
