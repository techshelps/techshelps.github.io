<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Specifying Resource Requirements</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Specifying Resource Requirements </H3><P>The resource requirements and constraints of the CX2590 are listed below: </P>
<UL><LI>     Four contiguous IO ports based at 180H, 190H, 1A0h or 1B0h. </LI><LI>     One exclusive IRQ chosen from 4,5,9,10,11. </LI><LI>     One DMA channel, although the board will work without one. </LI></UL><P></P>
<P>Use Infedit to put this logical configuration information into the Log Config Sections folder: </P>
<P>    1.     Right-click on the Log Config Sections folder and then select the New Logical Configuration Section option from the popup menu to create a new subfolder under the Log Config folder. </P>
<P>    2.     Double-click on the new subfolder to display the items you can edit. </P>
<P></P>
<P>You are given the opportunity to edit two items: Section Name and Priority. </P>
<UL><LI>     Double-click on the item name Section Name in the edit area to display an Edit String dialog. You can name the new logical configuration section anything; for this example the section name "CX2590_DMA" was entered into the dialog box. </LI><LI>     Since it is normal to run the CX2590 with a DMA channel (although it will run without one), the Priority item should be set to NORMAL. This may already be set as the default Priority value. If not, double-click on the Priority label of the Item column in the Infedit interface edit area and use the dropdown list in the dialog box. For more information about the meaning of each of the priority options in the dropdown list, see the Log Config Sections topic in the "Reference" section. </LI></UL><P></P>
<P>To enter the I/O port, IRQ, and DMA channel requirements, right-click on the subfolder you just named (in this example, that subfolder is named CX2590_DMA). At this point, the relevant part of the Infedit screen will look like this, with the popup menu: </P>
<P>    <img src="screen04.gif"></P>
<H4><A NAME="sec0"></A>Adding the I/O Description Item </H4><P>The I/O port requirements for the CX2590 are four contiguous I/O ports based at I/O addresses 180H, 190H, 1A0h and 1B0h. </P>
<P>To add the I/O port requirements for the CX2590: </P>
<P>    1.      Select the Add I/O Descriptor option from the popup menu to add an I/O descriptor subfolder. </P>
<P>    2    If you double-click on the new subfolder in order to edit items, the edit area on the right side of the Infedit screen does not give you an opportunity to edit any items. This indicates that there is another popup menu available, so right-click in the new subfolder to display the popup. </P>
<P></P>
<P>The popup menu gives you two options for edit displays: Add Type 1 I/O Range and Add Type 2 I/O Range. These are just two different ways of entering the same information, but for some I/O port requirements (such as the ones used in this example), the Type 2 form is quicker to use. See the Log Config Sections topic in "References" for details about the two different ways of expressing I/O port requirements. </P>
<P>To continue with the example, after you select the Add Type 2 I/O Range option an Input/Output Range 0 subfolder is created. Double-click on the new subfolder to display the items you can edit in the edit area. </P>
<P>Since the I/O port requirements for the CX2590 are four contiguous I/O ports based at I/O addresses 180H, 190H, 1A0h and 1B0h you can double-click on each of the items in the edit display, except Alias Offset and Attributes, and use the Edit String dialogs to produce an edit display that looks like the screen shown below. When you enter a value into the Edit String dialog, you do not need to enter the entire hexadecimal expression. For example, when you enter the value for the Size item, just enter "4" instead of "0x0004." </P>
<P>    <img src="screen00.gif"></P>
<P>Note that when you double-click the Attributes item, no Edit String dialog box is displayed. That is because the Attributes item is reserved for future use. </P>
<H4><A NAME="sec1"></A>Adding the IRQ Description Item </H4><P>The IRQ requirements for the CX2590 are one exclusive IRQ chosen from IRQ 4, 5, 9, 10, or 11. </P>
<P>To add the IRQ requirements to the XSCSI.INF file for the CX2590: </P>
<P>    1.      Right-click on the CX2590_DMA subfolder under the Log Config Sections folder and select the Add IRQ Descriptor option. This will create an IRQ Descriptor subfolder. </P>
<P>    2    Double-click on the new subfolder. </P>
<P></P>
<P>An array of IRQs and Yes/No values appears in the edit area. Double-click on individual IRQ item names to set IRQs 4, 5, 9, 10, and 11 to Yes and all other IRQs to No. When you are done, the IRQ array in the edit area will look like this: </P>
<P><BR></P>
<PRE>Item             Value
  IRQ Sharable     No
  IRQ  0           No
  IRQ  1           No
  IRQ  2           No
  IRQ  3           No
  IRQ  4           Yes
  IRQ  5           Yes
  IRQ  6           No
  IRQ  7           No
  IRQ  8           No
  IRQ  9           Yes
  IRQ 10           Yes
  IRQ 11           Yes
  IRQ 12           No
  IRQ 13           No
  IRQ 14           No
  IRQ 15           No
</PRE>
<H4><A NAME="sec2"></A>Adding the DMA Description Item </H4><P>The CX2590 requires one DMA channel for NORMAL operation. The CX2590 can use either DMA channel 0, 1, 2, or 3 and the DMA bus width is eight bits. </P>
<P>To add the DMA requirements to the XSCSI.INF file for the CX2590: </P>
<P>    1.      Right-click on the CX2590_DMA subfolder under the Log Config Sections folder and select the Add DMA Descriptor option. This will create an DMA Descriptor subfolder. </P>
<P>    2.     Double-click on the new subfolder. </P>
<P></P>
<P>An array of DMAs and Yes/No values appears in the edit area. Double-click on individual DMA item names to set DMA channels 0, 1, 2, and 3 to Yes and all other DMAs to No. In this example, there is no need to change the default DMA bus width of 8 bits. When you are done, the DMA array will look like this: </P>
<P><BR></P>
<PRE>Item             Value
  DMA Bus Width    8 bits
  DMA  0           Yes
  DMA  1           Yes
  DMA  2           Yes
  DMA  3           Yes
  DMA  4           No
  DMA  5           No
  DMA  6           No
  DMA  7           No
</PRE>
<P>Note that given the requirements in this example, adding this DMA descriptor to the INF file does not satisfy all the DMA requirements for this example. The DMA requirements are: </P>
<P>"One DMA channel, although the board will work without one." </P>
<P>In order to meet the requirement "the board will work without one," you will have to add another logical configuration section to the INF file, with priority set to SUBOPTIMAL and with no DMA item. The method for doing this is shown in the next section. </P>
<H4><A NAME="sec3"></A>Adding a Suboptimal Logical Configuration Section </H4><P>To add a second logical configuration section to the INF file XSCSI.INF </P>
<P>    1.      Right-click on the Log Config Sections folder and select the New Logical Configuration Section option from the popup menu. A new subfolder will be displayed with no section name (the displayed section name will be &lt;Section name&gt;. </P>
<P>    2.     Double-click on the new folder to display the items you can edit. </P>
<P></P>
<P>You are given the opportunity to edit two items: Section Name and Priority. </P>
<UL><LI>     Double-click on the item name Section Name in the edit area to display an Edit String dialog. You can name the new logical configuration section anything; for this example the self-documenting section name "CX2590_NoDMA" was entered in the dialog box. </LI><LI>     Since the board will run without a DMA channel, but sub optimally relative to when it runs with a DMA channel, set the Priority item value to SUBOPTIMAL. Double-click on the Priority item label in the edit area and select the value SUBOPTIMAL from the dropdown list in the Edit List dialog box. </LI></UL><P></P>
<P>To enter the IO port and IRQ requirements, right-click on the subfolder you just named and follow the same procedures as shown in the earlier topics "Adding the I/O Description Item" and "Adding the IRQ Description Item." </P>
<P>Note that you will not add a DMA description item to this logical configuration section because it describes the device configuration where the device is running sub optimally, without a DMA channel. </P>
<H4><A NAME="sec4"></A>Adding the Logical Configuration Sections to the Install Section </H4><P>For the logical configuration sections you have built (named CX2590_DMA and CX2590_NoDMA) to be recognized by the operating system installer, the names of the two sections have to be added to the Install section. To do this </P>
<P>    1.     Double-click on the Install sections subfolder named CX2590.Install. A list of all the types of sections that can be referred to in an Install section will be displayed in the edit area on the right side of the screen. </P>
<P>    2.     Since you want to add logical configuration names to the install section, double-click the Log Config item in the edit box list. The Edit Section List dialog is displayed with the a list section names displayed in the Available Sections list box on the left-hand side of the dialog. </P>
<P>    3.     Highlight the names of both logical configuration sections, CX2590_DMA and CX2590_NoDMA, and select the Add&gt; button to move both section names to the Included Sections list on the right of the dialog. Then click the OK button. </P>
<P></P>
<P>At this point, the edit display looks like this: </P>
<P>    <img src="screen08.gif"></P>
<P>This display reflects that the two logical configuration sections have been put into the INF file and added to the install section script. Other types of sections have to be built to complete the INF file requirements stated in "Sample INF File Requirements." Entries have to added to the registry and device driver files have to be copied from a device installation diskette to the appropriate sub directories on the hard drive. </P></FONT></BODY></HTML>
