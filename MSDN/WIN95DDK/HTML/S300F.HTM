<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IOS_SendCommand</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IOS_SendCommand </H3><P><BR></P>
<PRE>mov esi, CmdData  ; address of BCB or IOR
mov edi, DevData  ; address of BDD or DCB
VxDCall IOS_SendCommand
</PRE>
<P>Directs the IOS to carry out a command specified by a BlockDev Command Block (BCB) or an I/O Request (IOR), depending on a given version flag. </P>
<UL><LI>     No return value. </LI></UL><P></P>
<P><I>CmdData</I> </P>
<P>Address of a <B>IOR</B> structure if the <B>IOR_flags</B> member is set to IORF_VERSION_002. Otherwise, this parameter is the address of a <B>BlockDev_Command_Block</B> structure. </P>
<P><I>DevData</I> </P>
<P>Address of a <B>DCB_bdd</B> structure (member of a <B>DCB</B> if the <B>IOR_flags</B> member is set to IORF_VERSION_002. Otherwise, this parameter is the address of a <B>BlockDev_Device_Descriptor</B> structure. </P>
<P>Use of BCBs is provided for backward BlockDev client compatibility. </P>
<P>When passing command data in an <B>IOR</B> structure, the client or driver must set the <B>IOR_vol_designtr</B>, <B>IOR_func</B>, <B>IOR_flags</B>, and possibly <B>IOR_callback</B> members prior to calling the service. If the IORF_SYNC_COMMAND bit is <I>not</I> set, the IOS returns immediately but continues to carry out the I/O request asynchronously. When an asynchronous operation completes or terminates, the IOS notifies the requestor by calling the specified callback procedure (address in the <B>IOR_callback</B> member) and passing on the stack the value contained in <B>IOR_req_req_handle</B> member. </P>
<P>If the IORF_SYNC_COMMAND flag is set, the IOS waits until the I/O request completes or terminates before returning control to the requestor. In this case, the specified callback procedure is never called. </P>
<P>If the IORF_DOUBLE_BUFFER flag is set, the IOS transfers all data through buffers that are manged by the IOS. Clients typically use this flag with I/O requests for which direct DMA to the client's buffer is not possible. This flag may be used with read or write requests only. If the IORF_DOUBLE_BUFFER flag is set, the <B>IOR_sgd_lin_phys</B> member must be set to the 32-bit linear address of an array of scatter/gather descriptors, and the buffer address in each scatter/gather descriptor must also be a 32-bit linear address. </P>
<P>See also <B>DCB</B>, <B>IOR</B> </P>
<P></P>
<P></P></FONT></BODY></HTML>
