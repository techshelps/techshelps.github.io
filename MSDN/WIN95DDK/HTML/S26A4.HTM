<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>About SCS_SETSTR</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>About SCS_SETSTR </H3><P>If the <I>dwIndex</I> parameter of <B>ImeSetCompositionString</B> is SCS_SETSTR, the IME can clean up all of the <B>COMPOSITIONSTR</B> structure of <I>hIMC</I>. </P>
<P>If it is necessary, IME may update the candidate information and generate the candidate messages IMN_OPENCANDIDATE, IMN_CHANGECANDIDATE, or IMN_CLOSECANDIDATE. </P>
<P>If the <I>lpRead</I> parameter of <B>ImeSetCompositionString</B> is available, IME should make the composition string from the reading string that is in <I>lpRead</I>. Then the IME makes the attribute and clause information for both the new composition string and the reading string of <I>lpRead</I>. The IME generates WM_IME_COMPOSITION with (GCS_COMP | GCS_COMPREAD). Sometimes IME needs to make it finalize automatically. In this case, the IME may generate WM_IME_COMPOSITION with (GCS_RESULT | GCS_RESULTREAD) instead of GCS_COMPxxx. </P>
<P>If the <I>lpComp</I> parameter of <B>ImeSetCompositionString</B> is available, the IME should make the composition attribute and clause information from the composition string in <I>lpComp</I>. The IME generates WM_IME_COMPOSITION with GCS_COMP. If the IME has the capability of SCS_CAP_MAKEREAD, the IME should make new reading string at same time. The IME generates WM_IME_COMPOSITION with (GCS_COMP | GCS_COMPREAD). Sometimes IME needs to make it finalize automatically. In this case, the IME may generate WM_IME_COMPOSITION with (GCS_RESULT | GCS_RESULTREAD) instead of GCS_COMPxxx. </P>
<P>If both the <I>lpRead</I> and <I>lpComp</I> parameters are available, the IME should make the composition string and the reading string. At this time, IME does not need to follow <I>lpComp</I> and <I>lpRead</I> completely. If IME cannot make the relation between <I>lpRead</I> and <I>lpComp</I> that is specified by the application, the IME should correct the composition string. The IME makes the attribute and clause information for both the new composition string and the reading string of <I>lpRead</I>. The IME generates WM_IME_COMPOSITION with (GCS_COMP | GCS_COMPREAD). Sometimes, IME needs to make it finalize automatically. Then the IME may generate WM_IME_COMPOSITION with (GCS_RESULT | GCS_RESULTREAD) instead of GCS_COMPxxx. </P></FONT></BODY></HTML>
