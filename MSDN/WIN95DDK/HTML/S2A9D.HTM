<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Multimedia Device Information (INF) Files</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Multimedia Device Information (INF) Files </H3><P>IHVs who develop a multimedia hardware device for Windows 95 must provide a device information file (.INF) file on the device driver installation diskette for the device. There are two DDK sample INF files for multimedia hardware devices that you can use as models for your INF file. They are located in the directory \DDK\MMEDIA\SAMPLES\INF. The sample INF files are: </P>
<UL><LI>     MIDI.INF, which is used to install a MIDI device. </LI><LI>     WAVE.INF, which is used to install a waveform-audio device. </LI></UL><P></P>
<P>These sample INF files are both relatively straightforward. The DDK chapter "Device Information Files" in the Plug and Play section of the Windows 95 DDK documentation gives you enough information to interpret the sample INF files and make any necessary changes to fit your device. The following topics give information specific to multimedia hardware device INF files that is not found in the "Device Information Files" chapter. Information about INF files for multimedia software components will be provided in a future release of the Windows 95 DDK documentation. </P>
<H4><A NAME="sec0"></A>Multimedia Device Hardware Class </H4><P>Hardware multimedia devices, of which MIDI and waveform-audio devices are two examples, are all members of the MEDIA class of devices for Windows 95. In the [Version] section of the INF file for your device, you should use the following key: </P>
<P><BR></P>
<PRE>Class = MEDIA
</PRE>
<H4><A NAME="sec1"></A>Multimedia Device Class Registration </H4><P>Every INF file should contain a device-class registration section, because a particular Windows 95 user may have never previously installed a device of that class on their Windows 95 machine. (For more information, see the topic "ClassInstall Section" in the "Device Information Files" chapter.) </P>
<P>For example, in the sample MIDI.INF file, the ClassInstall section and sections associated with it contain the following lines: </P>
<P><BR></P>
<PRE>[ClassInstall]
AddReg=MidiReg

[MidiReg]
HKR,,,,%MediaClassName%
HKR,,Icon,,1
. . .
[Strings]
MediaClassName="Media Devices"
</PRE>
<P>The sample WAVE.INF file contains a ClassInstall section and associated sections with lines that are shown below: </P>
<P><BR></P>
<PRE>[ClassInstall]
AddReg=Class.AddReg

[Class.AddReg]
HKR,,,,%MediaClassName%
HKR,,Icon,,1
. . .
[Strings]
MediaClassName="Media Devices"
</PRE>
<P>These INF file sections from both the MIDI.INF and WAVE.INF sample INF files register a descriptive string for a MEDIA class device: "Media Devices." All multimedia hardware device INF files must register this same descriptive string, "Media Devices," in this way. This descriptive string is displayed by Windows 95 in the user interface to describe the group of all MEDIA class devices. </P>
<P>Note that the descriptive string itself ("Media Devices") is in the [Strings] section of the INF file along with other displayable strings. Putting all displayable strings in one section of an INF file makes it easier for translators to locate the words and phrases they have to translate for world markets. </P>
<H4><A NAME="sec2"></A>Device Loader for Windows 95 Multimedia Devices </H4><P>All multimedia device drivers must be loaded by the Windows 95 device loader MMDEVLDR.VXD, which establishes the device driver(s) in Ring 3, as described earlier in this chapter. All of the sample multimedia INF files have the following line in the section that adds the device to the registry: </P>
<P><BR></P>
<PRE>HKR,,DevLoader,,mmdevldr.vxd
</PRE>
<P>For example, in the MIDI.INF sample file, such a line is found in both the [MPU401.AddReg] and [ADLIB.addreg] sections. Your INF file must use the same line in the comparable section that adds your device to the registry. </P>
<H4><A NAME="sec3"></A>Internal/External Switch for MIDI Devices </H4><P>For MIDI devices, one statement type that can be used in an INF file is not documented in the "Device Information Files" chapter. (For multimedia hardware devices other than MIDI devices, there are no INF file statement types other than those documented in the "Device Information Files" chapter; no special switches have to be set for non-MIDI devices.) </P>
<P>If your MIDI device drives a synthesizer that is not on the device, include a statement that sets an "External" switch in the Drivers key of the registry for your device by using an INF file statement of the form: </P>
<P><BR></P>
<PRE>HKR,Drivers\midi\msmpu401.drv,External,1,01,00,00,00
</PRE>
<P>Following is an example of such a statement, in the context of the entire section that puts values into the Drivers key for the device (note that this example section is not taken from the sample MIDI.INF file). </P>
<P><BR></P>
<PRE>[MPU401.AddReg]
HKR,,Driver,,msmpu401.vxd
HKR,Drivers\midi\msmpu401.drv,Driver,,msmpu401.drv
; following is the statement to use for external synthesizer
HKR,Drivers\midi\msmpu401.drv,External,1,01,00,00,00
HKR,Drivers,SubClasses,,"midi"
</PRE></FONT></BODY></HTML>
