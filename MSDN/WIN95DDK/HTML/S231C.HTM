<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Service Functions</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Service Functions </H3><P>The service functions let drivers and TSRs obtain the Windows version number, obtain the current virtual-machine (VM) identifier, set critical sections, and retrieve the addresses of the entry points for virtual-device service functions. There are the following service functions: </P>
<UL><LI>     Get Windows Installed State (Interrupt 2Fh Function 1600h) </LI><LI>     Get Windows Entry-Point Address (Interrupt 2Fh Function 1602h) </LI><LI>     Release Current VM Time-Slice (Interrupt 2Fh Function 1680h) </LI><LI>     Begin Critical Section (Interrupt 2Fh Function 1681h) </LI><LI>     End Critical Section (Interrupt 2Fh Function 1682h) </LI><LI>     Get Current Virtual Machine ID (Interrupt 2Fh Function 1683h) </LI><LI>     Get Device Entry Point Address (Interrupt 2Fh Function 1684h) </LI><LI>     Switch VMs and CallBack (Interrupt 2Fh Function 1685h) </LI><LI>     Detect Interrupt 31h Services (Interrupt 2Fh Function 1686h) </LI></UL><P></P>
<P>Windows issues Windows Initialization Notification (Interrupt 2Fh Function 1605h) and Windows Termination Notification (Interrupt 2Fh Function 1606h). These notifications gives MS-DOS drivers and TSR programs in either Windows environment the opportunity to free extended memory before Windows starts, and reallocate the memory when Windows stops. </P>
<P>Windows also support Detect Interrupt 31h Services. Supporting these services lets MS-DOS drivers and TSR programs check for and use these service functions. </P>
<P>If the user starts a TSR program after Windows starts, the TSR program can always use Get Windows Installed State (Interrupt 2Fh Function 1600h) to determine whether Windows is running. </P></FONT></BODY></HTML>
