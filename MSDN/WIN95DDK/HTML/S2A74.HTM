<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Cursor Types</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Cursor Types </H3><P>A cursor VxD must draw the cursor appropriately for each video mode it supports. The VxD must draw a graphics cursor in graphics mode and a text cursor in text mode. A <I>graphics cursor</I> is a bitmapped image that moves over the images on the screen and can move to any pixel position on the display. A <I>text cursor</I> is typically either a block the size of a character cell, or a horizontal line that is one character-cell wide and one or more scan lines tall. A text cursor can occupy any character cell on the display. By default, VMOUSE displays a block cursor in text modes and an arrow cursor in graphics modes. </P>
<H4><A NAME="sec0"></A>Graphics Cursors </H4><P>To set a new graphics cursor, VMOUSE passes the address of a <B>GRAPHICSCURSOR</B> structure to the cursor VxD's <B>SETGRAPHICSCURSOR</B> function. The cursor VxD sets a new graphics cursor based on the information in the structure. </P>
<P>A graphics cursor is a bitmapped image that moves over the images on the screen. The width and height of the cursor image is expressed in pixels and is defined by the <B>wWidth</B> and <B>wHeight</B> members of the <B>GRAPHICSCURSOR</B> structure. </P>
<P>The pixels in the cursor image interact with the pixels on the display in a manner defined by the screen mask and the cursor mask. The screen mask determines whether the cursor pixels are part of the cursor's shape or part of the background; the cursor mask determines how the pixels under the cursor contribute to the color of the cursor. </P>
<P>To create the cursor, a cursor VxD operates on the bits in the computer's video memory that correspond to the image under the cursor. First, the VxD must expand each bit in the screen and cursor masks to match the number of bits in video memory required for each screen pixel's color information. Next, the VxD does a logical AND operation between the expanded screen-mask bits and the color-information bits. The color of the pixels under the cursor remains unchanged wherever a screen-mask bit is 1 and changes wherever the screen-mask bit is 0. Finally, the VxD does a logical XOR operation between the pixel bits and the expanded bits from the cursor mask. Where the cursor mask is 0, the screen pixels are unchanged. Where the mask is 1, the color of the pixels is inverted. </P>
<P>The <B>dwOffset32Masks</B> member of the <B>GRAPHICSCURSOR</B> structure specifies the offset from the beginning of the structure to the screen and cursor masks. The cursor mask must follow the screen mask. </P>
<P>A graphics cursor must have a <I>hot spot</I>, a single pixel in the cursor used to identify the cursor's location on the screen. The <B>wHotX</B> and <B>wHotY</B> members of <B>GRAPHICSCURSOR</B> define the coordinates of the hot spot relative to the upper-left corner of the cursor bitmasks. </P>
<P>See also <B>GRAPHICSCURSOR</B>, <B>SETGRAPHICSCURSOR</B> </P>
<H4><A NAME="sec1"></A>Text Cursors </H4><P>To set a new text cursor, VMOUSE calls the cursor VxD's <B>SETTEXTCURSOR</B> function, passing the address of a <B>TEXTCURSOR</B> structure. The cursor VxD sets a new text cursor based on the information in the structure. </P>
<P>The <B>bFlags</B> member of <B>TEXTCURSOR</B> indicates whether the new cursor is a hardware or software text cursor. If <B>bFlags</B> is 1, the new cursor is a hardware text cursor, and the <B>XORMask</B> and <B>ANDMask</B> members specify the first and last scan lines of the cursor. The VxD draws the cursor by directing the display adapter to turn on the specified scan lines in the character cell that contains the cursor. A scan line that is turned on typically appears as a bar in the character cell. </P>
<P>If the <B>bFlags</B> member of <B>TEXTCURSOR</B> is 0, the new cursor is a software text cursor. In this case, the <B>XORMask</B> and <B>ANDMask </B>members specify the cursor mask and screen mask, respectively. The cursor and screen masks are bitmasks that define how the cursor affects the character and attributes of the character cell it occupies. The <I>screen mask</I> is a 16-bit value that determines which of the character cell's attributes are preserved; the <I>cursor mask</I> is a 16-bit value that determines how the preserved attributes change to yield the cursor. </P>
<P>To draw the cursor, the VxD operates on the screen data that defines the attributes of the character cell occupied by the cursor. The screen data for a character cell has the following format. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Bits </B></P></TD><TD VALIGN="TOP"><P><B>Purpose </B></P></TD></TR><TR><TD VALIGN="TOP"><P>15 </P></TD><TD VALIGN="TOP"><P>Sets blinking or nonblinking character </P></TD></TR><TR><TD VALIGN="TOP"><P>12 – 14 </P></TD><TD VALIGN="TOP"><P>Sets background color </P></TD></TR><TR><TD VALIGN="TOP"><P>11 </P></TD><TD VALIGN="TOP"><P>Sets intensity </P></TD></TR><TR><TD VALIGN="TOP"><P>8 – 10 </P></TD><TD VALIGN="TOP"><P>Sets foreground color </P></TD></TR><TR><TD VALIGN="TOP"><P>0 – 7 </P></TD><TD VALIGN="TOP"><P>Specifies ASCII value of character </P>
<P></P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The VxD first does a logical AND operation between the screen mask and the screen data for the character cell. Next, it does a logical XOR operation between the cursor mask and the result of the AND operation, producing the cursor's appearance on the display. </P>
<P>See also <B>SETTEXTCURSOR</B>, <B>TEXTCURSOR</B> </P></FONT></BODY></HTML>
