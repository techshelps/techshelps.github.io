<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Enumerator Services and Messages</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Enumerator Services and Messages </H3><P>Enumerators locate and identify Plug and Play devices and retrieve information about these devices to use to construct the hardware tree. The Configuration Manager provides services for registering enumerators as well as services enumerators can use to carry out their enumeration tasks. In particular, an enumerator can register an enumeration handler function by using the <B>CONFIGMG_Register_Enumerator</B> service. The Configuration Manager sends an enumeration message to this handler whenever it needs the enumerator to carry out a task. </P>
<P>There are these enumeration services: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="223pt" VALIGN="TOP"><COL WIDTH="108pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Service </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_CallBack_Enumerator</B> </P></TD><TD VALIGN="TOP"><P>Calls back to the device driver, once per devnode. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Bus_Info</B> </P></TD><TD VALIGN="TOP"><P>Gets bus information from the devnode. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Register_Enumerator</B> </P></TD><TD VALIGN="TOP"><P>Registers the enumerator handler for the device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Set_Bus_Info</B> </P></TD><TD VALIGN="TOP"><P>Sets bus information in the devnode. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>There are these enumeration messages: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="223pt" VALIGN="TOP"><COL WIDTH="108pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Message </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_ENUMERATE </P></TD><TD VALIGN="TOP"><P>Directs a driver to enumerate its immediate children. This message is sent when a device is inserted or removed. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_FILTER </P></TD><TD VALIGN="TOP"><P>Directs a driver to process a new device or changes to the configuration of a device. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_REMOVE </P></TD><TD VALIGN="TOP"><P>Notifies the driver that the associated device node is being removed from the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_START </P></TD><TD VALIGN="TOP"><P>Notifies the driver that a configuration has been allocated for the device node; the driver can retrieve the configuration and begin to use it. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_STOP </P></TD><TD VALIGN="TOP"><P>Directs the driver to stop using its currently allocated configuration. </P></TD></TR><TR><TD VALIGN="TOP"><P>CONFIG_TEST </P></TD><TD VALIGN="TOP"><P>Requests permission from the driver to invalidate the assigned configuration or remove the given device node; the driver should not grant permission if it cannot stop using the current configuration or is not prepared for the device to be removed from the system. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The enumeration handler must return CR_DEFAULT for any messages it does not not process. </P>
<P>Enumerators are responsible for creating device identifiers for the devices they locate. Each identifier must be unique and be consistently the same on each system boot. The string must be constructed so that it can serve to identify a unique entry in the registry. The string must start with the enumerator's name followed by a backslash. For example, the ISA Plug and Play enumerator starts all device identifiers with "ISAPNP\". </P></FONT></BODY></HTML>
