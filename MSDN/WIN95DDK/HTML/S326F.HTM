<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_TestGlobalV86Mem</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>_TestGlobalV86Mem </H3><P><BR></P>
<PRE>include vmm.inc

VMMcall _TestGlobalV86Mem, &lt;VMLinAddr, nBytes, flags&gt;

mov     [Result], eax           ; 0 if local, 1 if global, 2 if mixed,
                                ; 3 if includes instance data region
</PRE>
<P>Tests whether a V86 address range is global, local, or instanced. Uses EAX, ECX, EDX, and Flags. </P>
<UL><LI>     Returns one of these values in the EAX register: </LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>0 </P></TD><TD VALIGN="TOP"><P>Address range either contains local memory, or is not a valid V86 address range. </P></TD></TR><TR><TD VALIGN="TOP"><P>1 </P></TD><TD VALIGN="TOP"><P>Address range contains global memory. </P></TD></TR><TR><TD VALIGN="TOP"><P>2 </P></TD><TD VALIGN="TOP"><P>Address range contains both local and global memory. </P></TD></TR><TR><TD VALIGN="TOP"><P>3 </P></TD><TD VALIGN="TOP"><P>Address range contains global memory, but also includes an instance data region. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P><I>VMLinAddr</I> </P>
<P>Ring-0 linear address of the first byte of the V86 address range. For example, the linear address of the V86 address 02C1h:0FC5h is 3BD5h (02C10h + 0FC5h). </P>
<P><I>nBytes</I> </P>
<P>Size of the V86 address range, in bytes. </P>
<P><I>flags</I> </P>
<P>Operation flags. Must be zero. </P>
<P>Global V86 memory has addresses that are valid and identical in all virtual machines. Local memory has addresses that are only valid in one virtual machine. Instanced memory has addresses that are valid in all virtual machines, but the content of the memory varies with each virtual machine. </P>
<P>This service may incorrectly report the type of memory in addresses above page 0A0h (in the device adapter area). If this service returns global for memory in this area, it is global. If the service returns local, however, the memory may actually be global. Generally, this region is local. </P>
<P>Operations involving global address ranges typically do not need to be virtualized since the range is valid and addressable in all virtual machines. Operations involving local address ranges may have to be virtualized since it is possible for software, such as an interrupt handler, to use a local address in the wrong virtual machine. </P>
<P></P>
<P></P></FONT></BODY></HTML>
