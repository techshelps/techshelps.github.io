<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Call_When_Task_Switched</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Call_When_Task_Switched </H3><P><BR></P>
<PRE>include vmm.inc

mov     esi, OFFSET32 TaskSwitchCallback
VMMcall Call_When_Task_Switched
</PRE>
<P>Installs a task-switched callback function which the system calls whenever it carries out a task switch. This service should be used sparingly, and the callback function should be optimized for speed. </P>
<UL><LI>     No return value. </LI></UL><P></P>
<P><I>TaskSwitchCallback</I> </P>
<P>Address of the callback function to install. For more information about the callback function, see <B>TaskSwitchCallback</B>. </P>
<P>Some virtual devices must save the state of a hardware device every time a task switch occurs and restore the hardware state for the virtual machine that is about to be run. However, virtual machine events can often be used in place of using this service. </P>
<P>Virtual devices can install any number of callback functions. The system calls each one in the order installed, until all functions have been called. </P>
<P>See also <B>Call_When_Idle</B>, <B>Call_When_Not_Critical</B>, <B>Call_When_Thread_Switched</B>, <B>Cancel_Call_When_Task_Switched</B>, <B>TaskSwitchCallback</B> </P>
<P></P>
<P></P></FONT></BODY></HTML>
