<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VIDEOHDR</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>VIDEOHDR </H3><P>Contains header information that identifies a video data buffer. </P>
<P><BR></P>
<PRE>typedef struct {
    LPSTR lpData;            // address of video buffer
    DWORD dwBufferLength;    // size, in bytes, of the data buffer
    DWORD dwBytesUsed;       // see below
    DWORD dwTimeCaptured;    // see below
    DWORD dwUser;            // user-specific data
    DWORD dwFlags;           // see below
    DWORD dwReserved[4];     // reserved; do not use
} VIDEOHDR;
</PRE>
<P><B>dwBytesUsed</B> </P>
<P>Number of bytes used in the data buffer. </P>
<P><B>dwTimeCaptured</B> </P>
<P>Time, in milliseconds, when the frame was captured relative to the first frame in the stream. </P>
<P>Synchronization of audio and video in the resulting AVI file depends solely on this parameter, which should be derived directly from a counter (VSYNC_Count) incremented by a vertical sync interrupt. When using NTSC frame rates and frame-based interrupts, the returned value would be: </P>
<P><BR></P>
<PRE>dwTimeCaptured = VSYNC_Count * 1/29.97.
</PRE>
<P>The capture driver must maintain VSYNC_Count accurately by allowing recursive entry into the interrupt service routine (if only for the purpose of incrementing VSYNC_Count) and by not disabling interrupts for long periods of time. </P>
<P><B>dwFlags</B> </P>
<P>Flags giving information about the data buffer. The following flags are defined for this field: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>VHDR_DONE </P></TD><TD VALIGN="TOP"><P>Set by the device driver to indicate it is finished with the data buffer and it is returning the buffer to the application. </P></TD></TR><TR><TD VALIGN="TOP"><P>VHDR_PREPARED </P></TD><TD VALIGN="TOP"><P>Set by the system to indicate the data buffer has been prepared with <B>videoStreamPrepareHeader</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>VHDR_INQUEUE </P></TD><TD VALIGN="TOP"><P>Set by the system to indicate the data buffer is queued for playback. </P></TD></TR><TR><TD VALIGN="TOP"><P>VHDR_KEYFRAME </P></TD><TD VALIGN="TOP"><P>Set by the device driver to indicate a key frame. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
</FONT></BODY></HTML>
