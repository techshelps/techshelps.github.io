<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Device-Independent Bitmaps</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Device-Independent Bitmaps </H3><P>A device-independent bitmap (DIB) is a color bitmap in a format that eliminates the problems that occur when transferring device-dependent bitmaps to devices having difference bitmap formats. DIBs provide color and bitmap information that any display or printer driver can translate into the proper format for its corresponding device. </P>
<P>A display driver can support DIBs by providing the following device-independent bitmap functions. Because the DIB engine provides support for DIBs, the following functions are optional for a minidriver to implement. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Function </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>DeviceBitmapBits</B> </P></TD><TD VALIGN="TOP"><P>Copies a DIB to a device-dependent bitmap or a device-dependent bitmap to a DIB. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>SetDIBitsToDevice</B> </P></TD><TD VALIGN="TOP"><P>Copies any portion of a DIB to the screen. This function copies the bits directly without applying a raster operation. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>StretchDIBits</B> </P></TD><TD VALIGN="TOP"><P>Moves a source rectangle into a destination rectangle, stretching or compressing the bitmap if necessary to fit the dimensions of the destination rectangle. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>These functions receive and operate on <B>BITMAPINFO</B>, <B>BITMAPINFOHEADER</B>, and <B>RGBQUAD</B> structures. </P>
<P>A display driver that supports DIBs must provide the <B>CreateDIBitmap</B> function as well. The function should do nothing more than return zero, indicating that the creation of a DIB is not supported at the driver level. </P>
<P>If a display driver supports DIBs, it must set one or more of the RC_DI_BITMAP, RC_DIBTODEV, and RC_STRETCHDIB values in the <B>dpRaster</B> member of the <B>GDIINFO</B> structure. If a driver does not set the RC_DI_BITMAP value, GDI simulates DIB conversions using monochrome bitmaps. The DIB engine supports of these capabilities and minidrivers may rely on the DIB engine for these functions. </P>
<H4><A NAME="sec0"></A>Logical-Color Tables </H4><P>Drivers use a logical-color table when translating a device-specific bitmap into a DIB. The table resides in the DIB header block. Because color mapping is a complex process, minidrivers should let the DIB engine create the logical color table. </P>
<H4><A NAME="sec1"></A>DIB to Device </H4><P>A display driver can copy a DIB directly to the screen using the <B>SetDIBitsToDevice</B> function or call the DIB engine function <B>DIB_DibToDevice</B>. <B>SetDIBitsToDevice</B> saves the trouble of first converting the DIB into the device-dependent format and then, transferring it onto the screen. However, only a direct copy of the DIB is provided. Moreover, only one direction of copy (DIB to screen) is provided. </P></FONT></BODY></HTML>
