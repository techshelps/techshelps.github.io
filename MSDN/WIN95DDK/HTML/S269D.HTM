<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Generating Messages</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H2>Generating Messages </H2><P>The IMEs need to generate IME messages. When the IME starts a conversion, the IME must generate the WM_IME_STARTCOMPOSITION message. If the IME changes the composition string, the IME must generate the WM_IME_COMPOSITION message. The events from IMEs are realized as generating messages to the window that is associated with the input context. Basically, the IMEs use the <I>lpdwTransKey</I> buffer that is provided by the parameter of the <B>ImeToAsciiEx</B> function to generate the message. The IME puts the messages into the <I>lpdwTransKey</I> buffer when <B>ImeToAsciiEx</B> is called. Even if <B>ImeToAsciiEx</B> is not called, the IME can generate the message to the window that is associated with the input context by using the message buffer of the input context. The input context has the message buffer as a handle of a memory block. The IME puts the messages into the memory block that is provided by the handle of the message buffer. Then the IME calls <B>ImmGenerateMessage</B>. The <B>ImmGenerateMessage</B> function sends the messages that are stored in the message buffer to the proper window. </P></FONT></BODY></HTML>
