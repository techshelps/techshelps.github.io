<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Adjust_Thread_Exec_Priority</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Adjust_Thread_Exec_Priority </H3><P><BR></P>
<PRE>include vmm.inc

mov     eax, PriorityBoost
mov     edi, ThreadHandle
VMMcall Adjust_Thread_Exec_Priority
</PRE>
<P>Raises or lowers the execution priority of the specified thread. The service adds the specified boost to the thread's current execution priority. Uses Flags. </P>
<UL><LI>     No return value. </LI></UL><P></P>
<P><I>PriorityBoost</I> </P>
<P>A signed integer value representing the positive or negative priority boost for the thread. This parameter must be a value such that when added to the current execution priority, the result is within the range Reserved_Low_Boost to Reserved_High_Boost. The following lists some common priority boost values, from lowest to highest: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>Reserved_Low_Boost </P></TD><TD VALIGN="TOP"><P>Reserved for use by system. </P></TD></TR><TR><TD VALIGN="TOP"><P>Cur_Run_VM_Boost </P></TD><TD VALIGN="TOP"><P>Use to boost the priority of each thread, in turn, forcing them to run for their allotted timeslices. </P></TD></TR><TR><TD VALIGN="TOP"><P>Low_Pri_Device_Boost </P></TD><TD VALIGN="TOP"><P>Use for operations that need timely processing but are not time critical. </P></TD></TR><TR><TD VALIGN="TOP"><P>High_Pri_Device_Boost </P></TD><TD VALIGN="TOP"><P>Use for time-critical operations that should not circumvent the critical section boost. </P></TD></TR><TR><TD VALIGN="TOP"><P>Critical_Section_Boost </P></TD><TD VALIGN="TOP"><P>Use to boost the priority of the thread whenever it enters a critical section (calls <B>Begin_Critical_Section)</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>Time_Critical_Boost </P></TD><TD VALIGN="TOP"><P>Use for operations that require immediate processing, even when another thread is in a critical section. For example, VPICD uses this when simulating hardware interrupts. </P></TD></TR><TR><TD VALIGN="TOP"><P>Reserved_High_Boost </P></TD><TD VALIGN="TOP"><P>Reserved for use by system. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>ThreadHandle</I> </P>
<P>Handle of the thread. </P>
<P>Because the nonsuspended thread with the highest execution priority is always the current thread, this service causes a task switch under two circumstances: </P>
<P>    1    The execution priority of the current thread is lowered (EAX is negative), and there is another thread with a higher priority that is not suspended. </P>
<P>    2    The execution priority of a nonsuspended thread which is not the current thread is raised (EAX is positive) higher than the current thread's execution priority. </P>
<P></P>
<P>Even if the current thread is in a critical section, a task switch will still occur if the priority of another nonsuspended thread is raised higher than the current thread's priority. However, this will only occur when a thread is given a time-critical boost, for example, to simulate a hardware interrupt. </P>
<P>It is often more convenient to call the <B>Call_Priority_VM_Event</B> service than to call this service directly. </P>
<P>See also <B>Adjust_Exec_Priority</B>, <B>Begin_Critical_Section</B>, <B>Call_Priority_VM_Event</B> </P></FONT></BODY></HTML>
