<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LDRSRV_COPY_EXTENDED_MEMORY</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>LDRSRV_COPY_EXTENDED_MEMORY </H3><P><BR></P>
<PRE>mov   ax, 0006h             ; Copy_Extended_Memory
call  dword ptr [_ServiceEntry]  ; service entry point passed to
                                 ; real-mode initialization procedure
</PRE>
<P>Allocates a block of extended memory in the specified data group (init, locked, or pageable) to the size requested and initializes the block with the given data. </P>
<UL><LI>     If the carry flag is clear, EAX contains the linear address of the memory block. Otherwise, the allocation failed and no memory block is allocated </LI></UL><P></P>
<P>AX </P>
<P>Must be 0006h. </P>
<P>CX </P>
<P>Number of bytes to allocate. Actual size is rounded up to the nearest DWORD. </P>
<P>DX </P>
<P>Type of data being allocated. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>LDRSRV_COPY_INIT </P></TD><TD VALIGN="TOP"><P>INIT data </P></TD></TR><TR><TD VALIGN="TOP"><P>LDRSRV_COPY_LOCKED </P></TD><TD VALIGN="TOP"><P>LOCKED data </P></TD></TR><TR><TD VALIGN="TOP"><P>LDRSRV_COPY_PAGEABLE </P></TD><TD VALIGN="TOP"><P>PAGEABLE data </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>DS:SI </P>
<P>Address of data to be copied. </P>
<P>This service provides a way for VxDs to pass data to their protected-mode portions. The VxD creates a block of extended memory and passes its linear address through the VxD reference DWORD (that is, the value of EDX on exit from real-mode initialization). Multiple blocks allocated by a single VxD are guaranteed to be contiguous in linear address space, but not necessarily in physical address space. PAGEABLE data may actually be allocated as LOCKED data, at the loader's discretion. Initialization (INIT) data is always locked, and is discarded after all VxD initialization phases are completed. </P>
<P></P>
<P></P></FONT></BODY></HTML>
