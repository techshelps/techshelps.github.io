<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_PageLock</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>_PageLock </H3><P><BR></P>
<PRE>include vmm.inc

VMMcall _PageLock, &lt;hMem, nPages, PageOff, flags&gt;

or      eax, eax        ; nonzero if locked, zero if error
jz      not_locked
</PRE>
<P>Locks one or more pages in the specified memory block. Uses EAX, ECX, EDX, and Flags. </P>
<UL><LI>     Returns a nonzero value in the EAX register if successful, zero otherwise. </LI></UL><P></P>
<P><I>hMem</I> </P>
<P>Handle (base linear address) of the memory block that contains the pages to lock. This value have been previously returned by the <B>_PageAllocate</B>, <B>_PageReAllocate,</B> or <B>_PageReserve</B> service. </P>
<P><I>nPages</I> </P>
<P>Number of pages to lock. </P>
<P><I>PageOff</I> </P>
<P>Offset in pages from the start of the memory block to the first page to lock. </P>
<P><I>flags</I> </P>
<P>Operation flags. Can be zero or the PAGELOCKEDIFDP value. All other values are reserved. </P>
<P>If the PAGELOCKEDIFDP value is specified, pages are locked only if the virtual swap device uses MS-DOS or BIOS functions to write pages to the hardware. The PAGELOCKEDIFDP value cannot be used until after the <B>Init_Complete</B> message has been processed. </P>
<P>The <B>_LinPageLock</B> service is the preferred method of locking pages. </P>
<P>This service returns an error if the sum of the <I>PageOff</I> and <I>nPages</I> parameters is greater than the number of pages in the memory block. </P>
<P>This service has no effect on memory blocks allocated using the PAGEFIXED value; such memory is always locked. </P>
<P>Virtual devices must not assume that the requested number of pages can always be locked. </P>
<P>Each page in a memory block has an individual lock count. This service increments the lock count each time the page is locked, and decrements the count each time the page is unlocked. The lock count must be zero for the page to be unlocked. This means that if the handle is locked 5 times, it has to be unlocked 5 times. Virtual devices must not leave handles locked when not needed. </P>
<P>See also <B>_PageAllocate</B>, <B>_PageUnLock</B> </P>
<P></P>
<P></P></FONT></BODY></HTML>
