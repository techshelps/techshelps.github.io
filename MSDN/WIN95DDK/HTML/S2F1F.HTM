<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Sample Language Monitor</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H2>Sample Language Monitor </H2><P>This section describes the sample PJL language monitor source code shipped with the Windows 95 DDK. The source code builds an executable named PJLMON.DLL, so the sample language monitor will be called PJLMON in this section. </P>
<P>After the Windows 95 DDK is installed, the sample language monitor source code is in the \%DDKROOT%\PRINTER\SAMPLES\SPOOLER\PJLMON directory. </P>
<P>The C source code modules and their header files that make up the sample language monitor PJLMON are identified and briefly described in the following table. If you are developing a different language monitor, suggestions on how you might use each of the modules are also in the following table. Note that an object module, PARSEPJL.OBJ, is also part of the sample language monitor. This object module parses the data read from the printer, using PJL language rules. PARSEPJL.OBJ is included in the sample language monitor directory to enable you to build the language monitor. When you develop the object module that parses the printer status language your printer uses, you will have to substitute it for PARSEPJL.OBJ when you build your language monitor. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Source Module Name/Description </B></P></TD><TD VALIGN="TOP"><P><B>Comment </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>PJLMON.C </B></P></TD><TD VALIGN="TOP"><P><B></B></P></TD></TR><TR><TD VALIGN="TOP"><P>Contains the <B>InitializeMonitorEx</B> and <B>LibMain</B> functions and all of the functions that <B>InitializeMonitorEx</B> puts pointers to in the <B>MONITOR</B> structure. </P></TD><TD VALIGN="TOP"><P>Contains two functions, <B>CreateUstatusThread</B> and <B>UstatusThread</B>, that manage the thread that handles unsolicited responses from the printer. The <B>IsPJL</B> and <B>Find1284Key</B> that determine if the printer connected to the port is bi-directional and if it is PJL-capable. Another interesting set of functions is <B>ProcessPJLString</B>, <B>InterpretTokens</B>, and <B>ProcessParserError</B>, which are the callers of the working parser functions in PARSEPJL.C. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>UTILLM.C </B></P></TD><TD VALIGN="TOP"><P><B></B></P></TD></TR><TR><TD VALIGN="TOP"><P>Utility functions that provide memory allocation, string handling, semaphore management, and debugging services. </P></TD><TD VALIGN="TOP"><P>Contains a function that finds a particular <B>PINIPORT</B> structure in an array of such structures. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>SPLTYPES.H </B></P></TD><TD VALIGN="TOP"><P><B></B></P></TD></TR><TR><TD VALIGN="TOP"><P>Header file for PJLMON.C </P></TD><TD VALIGN="TOP"><P>Defines the <B>PINIPORT</B> structure, which the sample language monitor uses to keep track of the status of the port being monitored. You may want to change the contents of this structure. This header file also defines PP_* constants which define the bit positions in the <I>status</I> member of the <B>PINIPORT</B> structure (port is open, sending data to the printer, PJL command was sent to printer, etc.). </P></TD></TR><TR><TD VALIGN="TOP"><P><B>LOCAL.H </B></P></TD><TD VALIGN="TOP"><P><B></B></P></TD></TR><TR><TD VALIGN="TOP"><P>Header file for UTILLM.C </P></TD><TD VALIGN="TOP"><P></P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P></FONT></BODY></HTML>
