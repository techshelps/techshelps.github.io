<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Safe MBR Hook</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H2>Safe MBR Hook </H2><P>To create a safe MBR hook for translation, you can either write an MBR hooker and a corresponding VSD or just write an MBR hooker that sets the <B>smhflgs</B> member to 1. In either case, the MBR hooker must have a <B>SafeMBRHook</B> structure at the beginning of its hook routine, as described in <I>About Vendor-Supplied Drivers</I>. </P>
<P>You do not have to write a VSD if the MBR hooker only has functionality that the Windows 95 IDE driver already supports. In this case, the MBR hooker can set the <B>smhflgs</B> member to 1 on its own so that Windows 95 can take over in protect mode. </P>
<P>If the MBR hooker has functionality that is not already supported by Windows 95, for example, encryption, you must write a VSD or leave your MBR hooker marked as unsafe. If you write a VSD to support the extra functionality in protect mode, the VSD is responsible for setting the <B>smhflgs</B> member to 1 to indicate to Windows 95 that it is safe to take over in protect mode. </P>
<P> </P>
</FONT></BODY></HTML>
