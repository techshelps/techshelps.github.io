<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Microsoft Real-time Compression Interface</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Microsoft Real-time Compression Interface </H3><P>The Microsoft Real-time Compression Interface (MRCI) is a software interface that gives real-mode applications and device drivers success to compression services. The MRCI has been revised and enhanced for Windows 95. This section provides a summary of the revisions and enhancements. </P>
<H4><A NAME="sec0"></A>32-bit Signature Values </H4><P>A 32-bit MRCI client uses the sigOLD_EDX and sigNEW_EDX signature values to verify that an MRCI server has responded to the Detect MRCI Server (Interrupt 2Fh Function 04A12h) or Detect ROM BIOS MRCI Service (Interrupt 1Ah Function 0B001h) service. A 16-bit MRCI client uses the sigOLD_CX, sigNEW_CX, sigOLD_DX, and sigNEW_DX values. </P>
<P>Note that 32-bit MRCI clients must be virtual devices (VxDs). The Interrupt 2Fh interface is not directly callable from a Win32 application. </P>
<H4><A NAME="sec1"></A>Server Capability Flags </H4><P>Additional flag values have been added to indicate the new capabilities of an MRCI server. These value are returned in the <B>mi_flCapability</B> field of the <B>MRCINFO</B> structure as a result of calling the Detect MRCI Server or Detect ROM BIOS MRCI Server service. The values also double as operation codes that a client passes to the server entry point specified by the <B>mi_pfnOperate</B> field. </P>
<P>There are the following new flag values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>micapALTCOMP </P></TD><TD VALIGN="TOP"><P>Alternate compression </P></TD></TR><TR><TD VALIGN="TOP"><P>micapALTDECOMP </P></TD><TD VALIGN="TOP"><P>Alternate decompression </P></TD></TR><TR><TD VALIGN="TOP"><P>micapMRCI32 </P></TD><TD VALIGN="TOP"><P>Server has a 32-bit interface </P></TD></TR><TR><TD VALIGN="TOP"><P>micapSPRCOMP </P></TD><TD VALIGN="TOP"><P>SuperCompress&trade; compression </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<H4><A NAME="sec2"></A>MRCREQUEST Structure </H4><P>The <B>MRCREQUEST</B> structure has been revised. The <B>mr_Reserved</B> field has changed to <B>mr_offUpdate</B>, which is used for Update compression (<B>micap_UPDCOMP</B>) and Update SuperCompress (<B>micap_SPRCOMP</B>) compression only. When sending a request to a server, the <B>mr_offUpdate</B> field specifies the offset in the source buffer where the changed uncompressed data starts. The server responds to the request by copying, into <B>mr_offUpdate</B>, the offset in the destination buffer where the changed compressed data starts. </P>
<H4><A NAME="sec3"></A>Error Values </H4><P>The MRCI server operation function, pointed to by the <B>mi_pfnOperate</B> field of the <B>MRCINFO</B> structure, can return the following new error values if the requested operation fails: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>MRCI_ERROR_INVALID_SIZE </P></TD><TD VALIGN="TOP"><P>Invalid buffer size. </P></TD></TR><TR><TD VALIGN="TOP"><P>MRCI_ERROR_BUFFER_TOO_SMALL </P></TD><TD VALIGN="TOP"><P>Work buffer is too small. </P></TD></TR><TR><TD VALIGN="TOP"><P>MRCI_ERROR_RESTART </P></TD><TD VALIGN="TOP"><P>Incremental compression was interrupted and must be restarted from the beginning. </P></TD></TR><TR><TD VALIGN="TOP"><P>MRCI_ERROR_CONTINUE </P></TD><TD VALIGN="TOP"><P>Incremental compression in not finished but can be continued. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P></FONT></BODY></HTML>
