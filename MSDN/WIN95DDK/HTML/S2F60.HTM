<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IOS Services</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IOS Services </H3><P>The IOS provides drivers and clients with memory management and timer services. There are the following services: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="223pt" VALIGN="TOP"><COL WIDTH="124pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>ISP_ALLOC_MEM (3) </P></TD><TD VALIGN="TOP"><P>Allocate block from IOS memory. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_ASSOCIATE_DCB (6) </P></TD><TD VALIGN="TOP"><P>Associate <B>DCB</B> and relative drive number. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_CREATE_DCB (1) </P></TD><TD VALIGN="TOP"><P>Create <B>DCB</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_CREATE_DDB (0) </P></TD><TD VALIGN="TOP"><P>Create <B>DDB</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_CREATE_IOP (2) </P></TD><TD VALIGN="TOP"><P>Allocate <B>IOP</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DEALLOC_DDB (9) </P></TD><TD VALIGN="TOP"><P>Free <B>DDB</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DEALLOC_MEM (4) </P></TD><TD VALIGN="TOP"><P>Free block of IOS memory. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DELETE_LDM_ENTRY (19) </P></TD><TD VALIGN="TOP"><P>Delete LDM entry. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DESTROY_DCB (10) </P></TD><TD VALIGN="TOP"><P>Free <B>DCB</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DEVICE_ARRIVED (14) </P></TD><TD VALIGN="TOP"><P>Indicate that a device has arrived. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DEVICE_REMOVED (13) </P></TD><TD VALIGN="TOP"><P>Indicate that a device has been removed. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DISASSOCIATE_DCB (15) </P></TD><TD VALIGN="TOP"><P>Disassociate <B>DCB</B> and drive number. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_DRIVE_LETTER_PICK (16) </P></TD><TD VALIGN="TOP"><P>Pick a drive letter. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_FIND_LDM_ENTRY (18) </P></TD><TD VALIGN="TOP"><P>Find LDM entry. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_GET_DCB (7) </P></TD><TD VALIGN="TOP"><P>Return <B>DCB</B> for logical volume. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_GET_FIRST_NEXT_DCB (8) </P></TD><TD VALIGN="TOP"><P>Get first or next <B>DCB.</B> </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_INSERT_CALLDOWN (5) </P></TD><TD VALIGN="TOP"><P>Insert calldown entry in <B>DCB</B>. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_QUERY_MATCHING_DCBS (11) </P></TD><TD VALIGN="TOP"><P>Ask for logical-to-physical info. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_QUERY_REMOVE_DCB (12) </P></TD><TD VALIGN="TOP"><P>Ask if we can remove a device. </P></TD></TR><TR><TD VALIGN="TOP"><P>ISP_REGISTRY_READ (17) </P></TD><TD VALIGN="TOP"><P>Read registry. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>A driver can use an IOS service to carry out a task by calling the IOS service routine after pushing the address of a structure, called an IOS service packet (ISP), on the stack. The address of the IOS service routine is in the <B>ILB_service_rtn</B> member of the <B>ILB</B>. The content and format of the structure to pass to the routine varies from service to service, but all structures start with a standard header as defined by the <B>ISP</B> structure. This structure includes the <B>ISP_func</B> member that identifies the service to carry out and the <B>ISP_result</B> member that the IOS uses to indicate whether it completed the service or encountered an error. The driver should check the value of <B>ISP_result</B> after the IOS returns. </P>
<P>See also <B>DCB</B>, <B>DDB</B>, <B>ILB</B>, <B>IOP</B>, <B>ISP</B> </P></FONT></BODY></HTML>
