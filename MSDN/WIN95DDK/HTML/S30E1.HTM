<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IFSMgr_SetupConnection</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IFSMgr_SetupConnection </H3><P><BR></P>
<PRE>IFSMgr_SetupConnection(
 pioreq pir,
 unsigned int Options,
 unsigned int ResType
 )
</PRE>
<P>This service can be called by an FSD to obtain a connection to a resource dynamically. This cannot be used to connect to a network drive directly since a driveletter cannot be specified. It is provided for special network FSD requirements. The IFS manager allocates an IFS internal request structure, which contains the Ioreq as its first element. When the IFS manager passes the address of the Ioreq to an FSD, it is also passing the address of the IFS request structure. On certain functions, such as Server Enumeration functions, the network FSD calls the IFSMgr_SetupConnection service to perform a connection with the Ioreq address it was originally passed. The IFS manager establishes the connection by calling the FSD on the FS_ConnectResource api and fills in the fields in the IFS request structure that the Ioreq is a part of. The network FSD never needs to look at any of the fields in the IFS request structure. It can now use this initialized Ioreq to perform other operations. When it is done, it can free the connection by calling the IFSMgr_DerefConnection service described below. </P>
<P><I>ir_ppath</I> </P>
<P>Supplies the parsed canonicalized unicode pathname the connection is to be performed to. </P>
<P><I>ir_password</I> </P>
<P>Supplies password string (if any). This string is not in unicode, it is in the same context it was originally passed in by the user. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Connection Option Values:</B> </P>
<P>One of the following options will be specified. </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_UNCREQUEST</B> </P></TD><TD VALIGN="TOP"><P>UNC style path based anonymous connection request. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_DEVATTACH</B> </P></TD><TD VALIGN="TOP"><P>Explicit device redirection. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_UNCCONNECT</B> </P></TD><TD VALIGN="TOP"><P>Explicit UNC style connection. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_DISCONNECTED</B> </P></TD><TD VALIGN="TOP"><P>Connection is to be setup disconnected, without touching the net. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_NO_CREATE</B> </P></TD><TD VALIGN="TOP"><P>Do not create a resource for this connection, just verify the connection exists. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESOPT_STATIC</B> </P></TD><TD VALIGN="TOP"><P>This connection is established at startup and disconnected only at shutdown, no user apis can disconnect it. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>ResType</I> </P></TD><TD VALIGN="TOP"><P>Supplies resource type for connection. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Connection Resource Type Values:</B> </P>
<P>One of the following resource types will be specified. </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESTYPE_WILD</B> </P></TD><TD VALIGN="TOP"><P>Wild card resource type. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESTYPE_DISK</B> </P></TD><TD VALIGN="TOP"><P>Disk resource. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESTYPE_SPOOL</B> </P></TD><TD VALIGN="TOP"><P>Spooled printer resource. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESTYPE_CHARDEV</B> </P></TD><TD VALIGN="TOP"><P>Character device resource. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>RESTYPE_IPC</B> </P></TD><TD VALIGN="TOP"><P>Interprocess communication resource. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<UL><LI>     This function has no return value other than in <I>ir_error</I>. Appropriate fields in the Ioreq are filled in. </LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>IOREQ Structure:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><I>ir_error</I> </P></TD><TD VALIGN="TOP"><P>Returns 0 if successful, errorcode if failure. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>ir_rh</I> </P></TD><TD VALIGN="TOP"><P>Returns the resource handle for the connection if success. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>ir_ppath</I> </P></TD><TD VALIGN="TOP"><P>Returns a pointer to the tail of the original pathname after the server and share name. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>ir_options</I> </P></TD><TD VALIGN="TOP"><P>Returns special server security information. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P></P>
<P></P></FONT></BODY></HTML>
