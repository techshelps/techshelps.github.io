<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>COMPOSITIONSTR</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>COMPOSITIONSTR </H3><P><BR></P>
<PRE>typedef struct tagCOMPOSITIONSTR {
  DWORD  dwSize;
  DWORD  dwCompReadAttrLen;
  DWORD  dwCompReadAttrOffset;
  DWORD  dwCompReadClsLen;
  DWORD  dwCompReadClsOffset;
  DWORD  dwCompReadStrLen;
  DWORD  dwCompReadStrOffset;
  DWORD  dwCompAttrLen;
  DWORD  dwCompAttrOffset;
  DWORD  dwCompClsLen;
  DWORD  dwCompClsOffset;
  DWORD  dwCompStrLen;
  DWORD  dwCompStrOffset;
  DWORD  dwCursorPos;
  DWORD  dwDeltaStart;
  DWORD  dwResultReadClsLen;
  DWORD  dwResultReadClsOffset;
  DWORD  dwResultReadStrLen;
  DWORD  dwResultReadStrOffset;
  DWORD  dwResultClsLen;
  DWORD  dwResultClsOffset;
  DWORD  dwResultStrLen;
  DWORD  dwResultStrOffset;
  DWORD  dwPrivateSize;
  DWORD  dwPrivateOffset; 
} COMPOSITIONSTR;
</PRE>
<P>Contains composition information. During conversion, IME puts conversion information into this structure. </P>
<P><B>dwSize</B> </P>
<P>Size, in bytes, of this structure. </P>
<P><B>dwCompReadAttrLen</B> </P>
<P>Length of the attribute information of the reading string of the composition string. </P>
<P><B>dwCompReadAttrOffset</B> </P>
<P>Offset from the beginning of this structure to the attribute information. </P>
<P><B>dwCompReadClsLen</B> </P>
<P>Length of the clause information of the reading string of the composition. </P>
<P><B>dwCompReadClsOffset</B> </P>
<P>Offset from the beginning of this structure to the clause information. </P>
<P><B>dwCompReadStrLen</B> </P>
<P>Length of the reading string of the composition string. </P>
<P><B>dwCompReadStrOffset</B> </P>
<P>Offset from the beginning of this structure to the reading string of the composition string. </P>
<P><B>dwCompAttrLen</B> </P>
<P>Length of the attribute information of the composition string. </P>
<P><B>dwCompAttrOffset</B> </P>
<P>Offset from the beginning of this structure to the attribute information. </P>
<P><B>dwCompClsLen</B> </P>
<P>Length of the clause information of the composition string. </P>
<P><B>dwCompClsOffset</B> </P>
<P>Offset from the beginning of this structure to the clause information. </P>
<P><B>dwCompStrLen</B> </P>
<P>Length of the composition string. </P>
<P><B>dwCompStrOffset</B> </P>
<P>Offset from the beginning of this structure to the composition string. </P>
<P><B>dwCursorPos</B> </P>
<P>Cursor position in the composition string. </P>
<P><B>dwDeltaStart</B> </P>
<P>Start position of change in the composition string. If the composition string has changed from the previous state, the first position of such a change is stored here. </P>
<P><B>dwResultReadClsLen</B> </P>
<P>Length of the clause information of the reading string of the result string. </P>
<P><B>dwResultReadClsOffset</B> </P>
<P>Offset from the beginning of this structure to the clause information of the reading string of the result string.. </P>
<P><B>dwResultReadStrLen</B> </P>
<P>Length of the reading string of the result string. </P>
<P><B>dwResultReadStrOffset</B> </P>
<P>Offset from the beginning of this structure to the reading string of the result string. </P>
<P><B>dwResultClsLen</B> </P>
<P>Length of the clause information of the result string. </P>
<P><B>dwResultClsOffset</B> </P>
<P>Offset from the beginning of this structure to the clause information of the result string. </P>
<P><B>dwResultStrLen</B> </P>
<P>Length of the result string. </P>
<P><B>dwResultStrOffset</B> </P>
<P>Offset from the beginning of this structure to the result string. </P>
<P><B>dwPrivateSize</B> </P>
<P>Private area in this memory block. </P>
<P><B>dwPrivateOffset</B> </P>
<P>Offset from the beginning of this structure to the private area. </P>
<P>The attribute information is a single-byte array and specifies the attributes of the string. The contents of the array are as follows: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_xxxxxxxxxxxx </P></TD><TD VALIGN="TOP"><P>Specifies the status of composition string. </P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_INPUT </P></TD><TD VALIGN="TOP"><P>Character currently being entered. </P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_TARGET_CONVERTED </P></TD><TD VALIGN="TOP"><P>Character currently being converted (already converted). </P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_CONVERTED </P></TD><TD VALIGN="TOP"><P>Character given from conversion. </P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_TARGET_NOTCONVERTED </P></TD><TD VALIGN="TOP"><P>Character currently being converted (yet to be converted). </P></TD></TR><TR><TD VALIGN="TOP"><P>ATTR_INPUT_ERROR </P></TD><TD VALIGN="TOP"><P>The character is error character and can not be converted by IME. </P></TD></TR><TR><TD VALIGN="TOP"><P>Other than above: </P></TD><TD VALIGN="TOP"><P>Reserved </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>Each content is as follows: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>Character currently being entered: </P></TD><TD VALIGN="TOP"><P>The character the user is entering. In Japanese, this character is a hiragana, katakana, or alphanumeric, which is yet to be converted by the IME. </P></TD></TR><TR><TD VALIGN="TOP"><P>Character currently being converted (already converted): </P></TD><TD VALIGN="TOP"><P>The character that has been selected for conversion by the user and converted by the IME. </P></TD></TR><TR><TD VALIGN="TOP"><P>Character given from conversion: </P></TD><TD VALIGN="TOP"><P>The character to which the IME has converted. </P></TD></TR><TR><TD VALIGN="TOP"><P>Character currently being converted (yet to be converted): </P></TD><TD VALIGN="TOP"><P>The character that has been selected for conversion by the user and not yet converted by the IME. In Japanese, this character is a hiragana, katakana, or alphanumeric, which the user has entered. </P></TD></TR><TR><TD VALIGN="TOP"><P>Character is error character and can not be converted by IME: </P></TD><TD VALIGN="TOP"><P>The character is an error character, the IME can not convert this character. For example, some consonants can not put together. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The length of the attribute information is the same as the length of the string. Each byte corresponds to each byte of the string. Even if the string includes DBCS characters, the attribute information has the information bytes of both the lead byte and the second byte. </P>
<P>The clause information is a double word array and specifies the numbers that are the positions of the clause. The position of the clause is one of the positions of the composition string and this clause starts from this position. At a minimum, the length of this information is two double words. This means the length of the clause information is 8 bytes. The first double word has to be 0. This is the starting position of the first clause. The last double word has to be the length of this string. For example, if the string has three clauses, the clause information has four double words. The first double word is 0. The second double word specifies the starting position of the second clause. The third double word specifies the starting position of the third clause. The last double word is the length of this string. </P>
<P>The <B>dwCursorPos</B> member specifies the character in the composition string where the cursor is located, in terms of the count of that character. The counting starts at 0. If the cursor is to be positioned immediately after the composition string, this value is equal to the length of the composition string. In case there is no cursor (if such a condition exists), a value -1 is specified here. If a composition string does not exist, this member is invalid. </P>
<P></P>
<P></P></FONT></BODY></HTML>
