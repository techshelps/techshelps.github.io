<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Hardware Tree, Device Nodes, and Device Identifiers</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Hardware Tree, Device Nodes, and Device Identifiers </H3><P>The <I>hardware tree</I> is a structure, in memory that is built and maintained by the Configuration Manager. The hardware tree contains configuration information for all devices in the computer and Configuration Manager uses it to keep track of the resources associated with each device, such as IRQs, IO ports and even non-sharable resources like SCSI identifiers. The hardware tree describes existing devices and resources, resource requirements, resource interdependencies, and current resource allocations. </P>
<P>A <I>device node</I> is a specific entry in the hardware tree. Each device node contains a unique device identifier and a list of resource requirements. The <I>device identifier</I> is a string which uniquely describes the device. The string typically identifies the component that found the device, but because it is also used as a key in the registry, it must be unique within the system so that information about the device can be retrieved reliably. </P>
<P>The <I>requirements list</I> identifies the type resources the device needs to successfully operate and any constraints associated with those resources. IRQs, IO ports, DMA channels and memory ranges are examples of types of resources. Constraints are often resource interdependencies; such a device requiring that it must use IRQ3 and IO port 02F8 in combination in order to operate successfully. </P>
<P>Although a device driver or other component cannot access the hardware tree or the device nodes directly, it can retrieve a handle to any device node and carry out tasks that retrieve and set information in the device node. The Configuration Manager provides these services to carry out tasks on a device node: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="223pt" VALIGN="TOP"><COL WIDTH="108pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Service </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Create_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Adds a device node to the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Disable_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Disables a device node in the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Enable_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Enables a device node in the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Child</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the first child of a given device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Depth</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the depth of a device node in the hardware tree. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Device_ID</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the device identifier for a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Device_ID_Size</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the size of a device identifier from a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_DevNode_Status</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the status of a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Parent</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the handle of a parent of a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Get_Sibling</B> </P></TD><TD VALIGN="TOP"><P>Retrieves the sibling of a device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Locate_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Retrieves a pointer to the device node corresponding to a specified device driver. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Move_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Replaces a root enumerated devnode by the valid non-root enumerated devnode. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Query_Remove_SubTree</B> </P></TD><TD VALIGN="TOP"><P>Checks whether a device node and its progeny can be removed. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Reenumerate_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Causes the enumerator of the specified device node to receive the CONFIG_ENUMERATE enumerator function. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Remove_SubTree</B> </P></TD><TD VALIGN="TOP"><P>Removes a device node and its children. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Remove_Unmarked_Children</B> </P></TD><TD VALIGN="TOP"><P>Removes any children of a device node that have the DN_HAS_MARK flag cleared. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Reset_Children_Marks</B> </P></TD><TD VALIGN="TOP"><P>Resets the DN_HAS_MARK flag in the children of a specified device node. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>CONFIGMG_Setup_DevNode</B> </P></TD><TD VALIGN="TOP"><P>Reenables and configures a specified device node, or requests the enumerator to download information. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The device nodes in the hardware tree are arranged hierarchically. This means a device node is either at the root of the hardware tree or is the child of a parent device node. A device node can have child device nodes. The other children of a device node's parent are call siblings. </P>
<P>The hardware tree is built each time the computer is started. Furthermore, it is completely dynamic, changing even while the computer is running if a device is removed or added to the system. </P></FONT></BODY></HTML>
