<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VID_IRET_Proc</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>VID_IRET_Proc </H3><P><BR></P>
<PRE>include vpicd.inc

clc
cmp     [TimeOut],0
jz      no_timeout
stc

no_timeout:
mov     eax, IRQHandle
mov     ebx, VMHandle
call    VID_IRET_Proc
</PRE>
<P>Handles attempts by a virtual machine to return from an interrupt. The system calls this procedure whenever a virtual machine executes an <B>iret</B> instruction, or whenever a time out occurs for a simulated interrupt. </P>
<P>The system disables interrupts before calling this procedure. The procedure can re-enable interrupts if necessary. Uses EAX, EBX, ECX, EDX, ESI, and Flags. </P>
<UL><LI>     No return value. </LI></UL><P></P>
<P><I>IRQHand</I> </P>
<P>Handle of the interrupt request. </P>
<P><I>VM</I> </P>
<P>Handle of the current virtual machine. </P>
<P>This procedure is useful for devices that must simulate large numbers of interrupts in a short period of time. For example, the virtual COM device simulates an interrupt, allows one character to be read from the COM port, and waits for the virtual machine to execute an <B>iret</B> instruction before putting more data into the virtual COM receive buffer. </P>
<P></P>
<P></P></FONT></BODY></HTML>
