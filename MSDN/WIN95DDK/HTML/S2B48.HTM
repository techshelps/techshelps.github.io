<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MODM_CACHEPATCHES</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>MODM_CACHEPATCHES </H3><P>Sent to a MIDI output driver to request that it cache or uncache the specified patches. This allows internal synthesizer drivers to load the patches needed by a client application. </P>
<UL><LI>     Returns zero if the operation is successful. Otherwise, it returns an error number. Possible error values include the following: </LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="223pt" VALIGN="TOP"><COL WIDTH="110pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>MMSYSERR_NOTENABLED </P></TD><TD VALIGN="TOP"><P>The driver failed to load or initialize. </P></TD></TR><TR><TD VALIGN="TOP"><P>MMSYSERR_NOTSUPPORTED </P></TD><TD VALIGN="TOP"><P>Function isn't supported. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P><I>dwParam1</I> </P>
<P>Specifies a far pointer to a <B>PATCHARRAY</B> array indicating which patches should be cached or uncached. </P>
<P><I>dwParam2</I> </P>
<P>The high-order word specifies which bank of patches the array is referring to. The low-order word specifies whether the patches should be cached or uncached according to one of the following flags: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>MIDI_CACHE_ALL </P></TD><TD VALIGN="TOP"><P>All patches specified in the array should be cached. If the synthesizer cannot cache all the patches, it should cache none at all, clear the <B>PATCHARRAY</B> and return MMSYSERR_NOMEM. </P></TD></TR><TR><TD VALIGN="TOP"><P>MIDI_CACHE_BESTFIT </P></TD><TD VALIGN="TOP"><P>If the driver can cache all of the patches specified in the array, it should do so. Otherwise, it should cache as many as it can (selection of which patches to cache is at the discretion of the driver), alter the <B>PATCHARRAY</B> to reflect what it has actually cached, and return MMSYSERR_NOMEM. </P></TD></TR><TR><TD VALIGN="TOP"><P>MIDI_CACHE_QUERY </P></TD><TD VALIGN="TOP"><P>The <B>PATCHARRAY</B> should be changed to reflect which patches the driver actually has cached. </P></TD></TR><TR><TD VALIGN="TOP"><P>MIDI_UNCACHE </P></TD><TD VALIGN="TOP"><P>Patches specified in the array should be uncached and the <B>PATCHARRAY</B> should be cleared. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>Only drivers for internal synthesizer devices can support patch caching. Drivers for MIDI output ports should return a MMSYSERR_NOTSUPPORTED error for this message. Support for patch caching is optional for internal synthesizer devices. When a driver receives a MODM_GETDEVCAPS message, it should indicate support for patch caching by setting or clearing the MIDICAPS_CACHE bit in the <B>dwSupport</B> field of the <B>MIDIOUTCAPS</B> data structure. </P>
<P></P>
<P></P></FONT></BODY></HTML>
