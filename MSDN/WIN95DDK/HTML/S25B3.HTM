<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting Up the Microsoft Windows System Debugger</title>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>

<BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">

<H3>Setting Up the Microsoft Windows System Debugger </h3>

<P>This document is a list of frequently asked
questions about setting up kernel debugging for Microsoft Windows
95. You'll find answers here about getting started with the
System Debugger (WDEB386), but you won't find techniques for
debugging your device driver. </p>

<H4><a name="sec0"></a>How do I get started? </h4>

<P>You need a computer with a serial port, and you'll
need to buy or make a null-modem cable. You only need a
three-line null modem cable (transmit, receive, and ground). You
don't need one with handshaking lines because WDEB386 doesn't use
handshaking. You should also disable handshaking on your
computer. (Handshaking allows slower receivers to keep up with
the amount of data being transmitted by telling the transmitter
to stop sending data until it has a chance to catch up.) </p>

<H4><a name="sec1"></a>How do I handle transmission
speed issues without handshaking? </h4>

<P>Because handshaking is disabled, it is possible that
WDEB386 could send characters to the terminal faster than the
terminal can display them. If you find that characters are
dropped, you should increase the delay between lines (often a
terminal drops characters while scrolling). Use the y
CRDELAY=delay debugger command where &quot;value&quot; ranges
from 0 (no delay) to FFFF (maximum delay). Increase the delay
until your terminal stops dropping characters. You can also lower
the speed of the connection. To do this, use the /c: command-line
option with WDEB386 to set the baud rate. </p>

<H4><a name="sec2"></a>How do I change the COM port? </h4>

<P>Use the /r: command-line option with WDEB386 to
change the COM port. By default, WDEB386 uses COM1 at 19200 bits
per second (bps). </p>

<H4><a name="sec3"></a>What is a null-modem cable? </h4>

<P>Typically with serial ports, you connect a computer
to something like a modem. This is how serial ports are designed:
you connect a computer, or Data Terminal Equipment (DTE), to a
modem, or Data Communication Equipment (DCE). When you connect a
computer to another computer, or DTE to DTE, you need a special
cable called a null-modem cable. WDEB386 requires only the most
basic null-modem cable, the three-line null-modem cable. The
following illustration shows the null-modem cable's connectors.
(The pin numbering would be backwards if you were looking at the
computer's ports.) </p>

<P><img src="dbg01.gif" width="259" height="67"> </p>

<P>The following table shows the pin numbers and names
of the cable's three lines: </p>

<table border="0" cellpadding="7" cols="2">
    <tr>
        <td valign="top"><b>Pin </b></td>
        <td valign="top"><b>Name </b></td>
    </tr>
    <tr>
        <td valign="top">Pin 2 </td>
        <td valign="top">Receive </td>
    </tr>
    <tr>
        <td valign="top">Pin 3 </td>
        <td valign="top">Transmit </td>
    </tr>
    <tr>
        <td valign="top">Pin 5 </td>
        <td valign="top">Ground </td>
    </tr>
</TBODY></table>

<P><br>
</p>

<H4><a name="sec4"></a>Can I use a Laplink V serial
cable with WDEB386? </h4>

<P>Yes. The blue Laplink cable works fine. Remember to
disable handshaking. </p>

<H4><a name="sec5"></a>How do I disable handshaking on
Windows 95? </h4>

<P>1.     Using your right mouse button, click My Computer,
and then click Properties. </p>

<P>2.      In the System Properties dialog box, click the
Device Manager tab. </p>

<P>3.      In the list of device types, double-click Ports
(COM &amp; LPT). </p>

<P>4.      Double-click the name of the port the cable is
connected to, usually Communications Port (COM2). </p>

<P>5.      In the Communications Port Properties dialog box,
click the Port Settings tab. </p>

<P>6.      In the Flow Control list, click None. </p>

<P>7.      Click OK. </p>

<H4><a name="sec6"></a>How do I set up WDEB386? </h4>

<P>1.     Install the Windows 95 Device Driver Kit (DDK). </p>

<P>2.      At the command prompt, go to the Debug
subdirectory of the directory you installed the DDK in. </p>

<P>3.      To set up the debug environment, type the
following, and then press ENTER: </p>

<P><br>
</p>

<pre>ddkdebug set
</pre>

<P>This Ddkdebug batch file copies the debug VxDs to
the \System\Vmm32 subdirectory of your Windows directory. </p>

<P>4.     To restore the retail version of Windows 95, type
the following, and then press ENTER: </p>

<P><br>
</p>

<pre>ddkdebug restore
</pre>

<P>For more information, see Debug.txt in the Debug
subdirectory of the directory you installed the DDK in. </p>

<H4><a name="sec7"></a>How do I start up WDEB386? </h4>

<P>The Ddkdebug batch file creates Runwdeb.bat in the
System subdirectory of your Windows directory. Runwdeb.bat is a
batch file that starts WDEB386. To use this batch file to start
WDEB386, carry out the following procedure: </p>

<P>1.      Click the Start button, and then click Shut Down.
</p>

<P>2.      In the Shut Down Windows dialog box, click the
option that enables you to restart the computer in MS-DOS mode,
and then click Yes. </p>

<P>3.      At the command prompt, go to the System
subdirectory of your Windows directory, type the following, and
then press ENTER: </p>

<P><br>
</p>

<pre>runwdeb.
</pre>

<P>If you want to change the COM port or baud rate,
edit Runwdeb.bat. The /c: option determines the COM port, and the
/r: option determines the baud rate. </p>

<H4><a name="sec8"></a>Where can I find out about
WDEB386 commands? </h4>

<P>See the Appendix for the Windows 95 DDK, either the
help file or the Microsoft Word file, in the Windows System
Debugger topic. &lt;&lt;this needs to be changed when we know
where we're going to put it&gt;&gt; </p>

<H4><a name="sec9"></a>What do I do if I don't have
another computer with a serial port? </h4>

<P>You can use screen swapping. This requires that you
set the resolution of your computer to 640 ( 480 with 16 colors
and add the following line to the [386Enh] section of System.ini:
</p>

<P><br>
</p>

<pre>debugvga=1
</pre>

<P>To start the debugger, press the F12 key. </p>

<H4><a name="sec10"></a>I'm an NT developer. Can I use
windbg for kernel debugging on Windows 95? </h4>

<P>No, you can use only WDEB386 or a third-party
debugger such as SoftIce/W for kernel debugging. </p>

<H4><a name="sec11"></a>What should I do if I can't
get WDEB386 to work? </h4>

<ul>
    <li>Make sure you are using build 950 of the DDK. You need
        this version to work with the retail version of Windows
        95. </li>
    <li>Run Direct Cable Connection (DCC) to make sure your
        null-modem cable works. DCC is optionally installed with
        Windows 95. To see if it is installed, click the Start
        button, point to Accessories, and then look for Direct
        Cable Connection in the menu. If it is not there, use the
        Add/Remove Programs Control Panel to install it. </li>
    <li>Make sure handshaking is disabled on your computer. </li>
</ul>

<H4><a name="sec12"></a>Can I use WDEB386 as a VxD? </h4>

<P>Yes, and you'll save about 90K of conventional
memory. You won't, however, be able to access symbols until after
the Device_Init message is sent to your VxDs. So if you use the
/b option with WDEB386 to break in VMM32 initialization, the
debugger will have no knowledge of symbols until Device_Init is
sent. </p>

<H4><a name="sec13"></a>How do I set up WDEB386 as a
VxD? </h4>

<P>The Ddkdebug.bat batch file creates a file called
Wdebvxd.ins in the Debug subdirectory of the directory you
installed the DDK in. You should insert the contents of this file
into the [386Enh] section of System.ini. Make sure you comment
out the following WDEB386 device lines from the [Enh386] section
of System.ini when you restore the retail version of Windows 95: </p>

<P><br>
</p>

<pre>Device=WDEB386.EXE
Device=DEBUGCMD.VXD
</pre>

<P>For information about restoring the retail version
of Windows 95, see &quot;How do I set up WDEB386?&quot; </p>

<H4><a name="sec14"></a>How do I change the baud rate
or COM port with the VxD version of WDEB386? </h4>

<P>To change the COM port, change the value in the
debugcom= line in the [386Enh] section of System.ini. The
following entry sets the COM port to COM2: </p>

<P><br>
</p>

<pre>debugcom=2
</pre>

<P>To change the baud rate, change the value in the
debugbaud= line. The following entry sets the baud rate to
19,200: </p>

<P><br>
</p>

<pre>debugbaud=19200
</pre>
</FONT></BODY>
</html>
