<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DRP</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>DRP </H3><P><BR></P>
<PRE>#include &lt;drp.h&gt;

typedef struct DRP { 
    CHAR   DRP_eyecatch_str[8];  // eye catcher string
    ULONG  DRP_LGN;              // load group number; see below
    PVOID  DRP_aer;              // addr of asynchronous event routine
    PVOID  DRP_ilb;              // address of ILB; see below
    CHAR   DRP_ascii_name[16];   // driver name; see below
    BYTE   DRP_revision;         // driver revision
    ULONG  DRP_feature_code;     // feature code; see below
    USHORT DRP_if_requirements;  // I/F requirements; see below
    UCHAR  DRP_bus_type;         // type of I/O bus; see below
    USHORT DRP_reg_result;       // registration result; see below
    ULONG  DRP_reference_data;   // data to pass with AEP_INITIALIZE
    UCHAR  DRP_reserved1[2];     // reserved
    ULONG  DRP_reserved2[1];     // reserved; must be zero
} DRP, *PDRP;
</PRE>
<P>Contains driver registration packet information. </P>
<P><B>DRP_eyecatch_str</B> </P>
<P>Eye catcher string. Must be "XXXXXXXX". </P>
<P><B>DRP_LGN</B> </P>
<P>Load group mask for the driver. Can be a combination of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>DRP_IFS </P></TD><TD VALIGN="TOP"><P>Reserved for IFSMGR. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FSD </P></TD><TD VALIGN="TOP"><P>Installable file system layer. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FSD_EXT_1 </P></TD><TD VALIGN="TOP"><P>FSD extension, for example, DBLSPACE. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FSD_EXT_2 </P></TD><TD VALIGN="TOP"><P>FSD extension, for example, encryption. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VOLTRK </P></TD><TD VALIGN="TOP"><P>Post-volume tracking value added driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_CLASS_DRV </P></TD><TD VALIGN="TOP"><P>Class driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_TSD </P></TD><TD VALIGN="TOP"><P>Type specific driver (TSD). </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_1 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 1. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_2 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 2. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_3 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 3. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_SCSI_LAYER </P></TD><TD VALIGN="TOP"><P>SCSI'izer. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_4 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 4. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_5 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 5. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_6 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 6. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_7 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 7. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_8 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 8. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_VSD_9 </P></TD><TD VALIGN="TOP"><P>Driver is in vendor enhancement layer 9. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_MISC_PD </P></TD><TD VALIGN="TOP"><P>Other port drivers. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_NT_MPD </P></TD><TD VALIGN="TOP"><P>SCSI miniport drivers. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_NT_PD </P></TD><TD VALIGN="TOP"><P>Windows NT, hardware-independent port driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_ESDI_PD </P></TD><TD VALIGN="TOP"><P>ESDI port driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_ESDIEMUL_PD </P></TD><TD VALIGN="TOP"><P>Port drivers for ESDI emulators. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_ABIOS_PD </P></TD><TD VALIGN="TOP"><P>ABIOS port driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_ABIOS_PREMPT_PD </P></TD><TD VALIGN="TOP"><P>ABIOS pre-empting port drivers. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_NEC_FLOPPY </P></TD><TD VALIGN="TOP"><P>NEC floppy driver layer. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_SOC_SER_DRV </P></TD><TD VALIGN="TOP"><P>Socket service drivers. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_SOC_DRV </P></TD><TD VALIGN="TOP"><P>Socket drivers. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_IOS_REG </P></TD><TD VALIGN="TOP"><P>Reserved for IOS registry. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>All other values are reserved and must not be used. </P>
<P><B>DRP_ilb</B> </P>
<P>Virtual address of the <B>ILB</B> structure that receives IOS linkage information. </P>
<P><B>DRP_ascii_name</B> </P>
<P>16-byte string specifying the name of the driver. </P>
<P><B>DRP_feature_code</B> </P>
<P>Feature code; must match the feature code in the <B>DVT</B>. Can be a combination of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>DRP_FC_SCAN_DOWN </P></TD><TD VALIGN="TOP"><P>BIOS scans targets from high to low. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_IO_FOR_INQ_AEP </P></TD><TD VALIGN="TOP"><P>Port driver needs to send I/O through IOP in response to an AEP_DEVICE_INQUIRY function. Results in AEP_CONFIG_DCB function for inquiry DCB. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_HALF_SEC </P></TD><TD VALIGN="TOP"><P>Notify driver every half second. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_1_SEC </P></TD><TD VALIGN="TOP"><P>Notify driver every second. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_2_SECS </P></TD><TD VALIGN="TOP"><P>Notify driver every two seconds. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_4_SECS </P></TD><TD VALIGN="TOP"><P>Notify driver every four seconds. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_DYNALOAD </P></TD><TD VALIGN="TOP"><P>Driver was dynamically loaded by IOS. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_NEED_PRELOAD </P></TD><TD VALIGN="TOP"><P>Driver needs to hook I/O even before the port driver. When set, the AEP_CONFIG_DCB function is received before the port driver. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_FC_NEED_PRE_POST_LOAD </P></TD><TD VALIGN="TOP"><P>Same as DRP_FC_NEED_PRELOAD except the drive will receive 2 AEP_CONFIG_DCB function calls for each DCB: one call before the port driver, and another after layers before its load group have been initialized. Note that care must be taken not to insert twice into the same DCB. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><B>DRP_if_requirements</B> </P>
<P>I/F requirements. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>DRP_IF_ISA </P></TD><TD VALIGN="TOP"><P>Driver supports ISA platforms. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_IF_EISA </P></TD><TD VALIGN="TOP"><P>Driver supports EISA platforms. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_IF_MCA </P></TD><TD VALIGN="TOP"><P>Driver supports MCA platforms. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_IF_STD </P></TD><TD VALIGN="TOP"><P>Driver supports all standard platforms. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><B>DRP_bus_type</B> </P>
<P>Type of I/O bus if port driver. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>DRP_BT_ESDI </P></TD><TD VALIGN="TOP"><P>ESDI or ESDI emulator. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_BT_SCSI </P></TD><TD VALIGN="TOP"><P>SCSI or SCSI emulator. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_BT_FLOPPY </P></TD><TD VALIGN="TOP"><P>NEC FLOPPY or FLOPPY emulator. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_BT_SMART </P></TD><TD VALIGN="TOP"><P>Smart device. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_BT_ABIOS </P></TD><TD VALIGN="TOP"><P>ABIOS or ABIOS emulator. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><B>DRP_reg_result</B> </P>
<P>Registration result. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>DRP_REMAIN_RESIDENT </P></TD><TD VALIGN="TOP"><P>Driver should remain resident. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_MINIMIZE </P></TD><TD VALIGN="TOP"><P>Driver should minimize. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_ABORT </P></TD><TD VALIGN="TOP"><P>Driver should not load. </P></TD></TR><TR><TD VALIGN="TOP"><P>DRP_INVALID_LAYER </P></TD><TD VALIGN="TOP"><P>Bad layer number; abort driver. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><B>DRP_reference_data</B> </P>
<P>Data to pass with subsequent AEP_INITIALIZE functions. </P>
<P>See also <B>IOS_Register</B>, <B>AEP</B> </P>
<P></P>
<P></P></FONT></BODY></HTML>
