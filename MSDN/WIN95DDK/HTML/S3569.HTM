<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VPowerHandlerProc</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>VPowerHandlerProc </H3><P><BR></P>
<PRE>POWERRET VPowerHandlerProc(POWERFUNC PowerFunc, ULONG Flags);
</PRE>
<P>A driver-supplied callback function that receives notifications of power management events. This function must be registered using the <B>_VPOWERD_Register_Power_Handler</B> service and must be in locked code. </P>
<P><B>This is intended for use by Configuration Manager only</B>. Virtual devices that require notification of power changes should install a message hook procedure using the <B>_SHELL_HookSystemBroadcast</B> service. </P>
<UL><LI>     Returns PR_SUCCESS if it handles the event successfully, or one of the error values beginning with PR_ listed in VPOWERD.H. </LI></UL><P></P>
<P><I>PowerFunc</I> </P>
<P>Power function. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>PF_SUSPEND_PHASE1 </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_SUSPEND_PHASE2 </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_RESUME_PHASE2 </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_RESUME_PHASE1 </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_BATTERY_LOW </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_POWER_STATUS_CHANGE </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PF_UPDATE_TIME </P></TD><TD VALIGN="TOP"><P></P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>Flags</I> </P>
<P>Power flags. Can be one of these values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>PFG_UI_ALLOWED (0x00000001) </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PFG_CANNOT_FAIL (0X00000002) </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>PFG_REQUEST_VETOED (0X00000004) </P></TD><TD VALIGN="TOP"><P>Indicates that the user may not be available to answer questions prior to the suspend operation. If this value is not given, higher levels of software may attempt some user interaction prior to accepting a suspend request. </P></TD></TR><TR><TD VALIGN="TOP"><P>PFG_REVERSE (0x00000008) </P></TD><TD VALIGN="TOP"><P>Clear for suspend operations, set on resume. </P></TD></TR><TR><TD VALIGN="TOP"><P>PFG_STANDBY (0x00000010) </P></TD><TD VALIGN="TOP"><P>Indicates a standby request when set as opposed to a suspend request. </P></TD></TR><TR><TD VALIGN="TOP"><P>PFG_CRITICAL (0x00000020) </P></TD><TD VALIGN="TOP"><P>Set to notify power handlers of critical resume operations so that they may attempt to resume their clients as best as possible. Critical suspends do not reach the power handlers in order to maintain compliance with the APM 1.1 specification. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>Although the callback function is called from within application time, the function must not use application-time services when interrupts are disabled. </P></FONT></BODY></HTML>
