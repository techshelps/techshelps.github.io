<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IFSMgr_UseDel</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IFSMgr_UseDel </H3><P><BR></P>
<PRE>IFSMgr_UseDel(
 pioreq pir,
 int proId,
 netuse_info *pinfo
 )
</PRE>
<P>This service is called by an FSD to perform a network delete use operation to delete a connection to a network resource. </P>
<P><I>pir</I> </P>
<P>Supplies pointer to IOREQ structure. If a NULL is passed in for the IOREQ pointer, the IFS manager allocates an IOREQ structure for the duration of this call. In this case, the caller also needs to pass in the pinfo parameter so that the IOREQ structure can be appropriately initialized. The IOREQ structure is freed before return from the service. </P>
<P><I>ir_data</I> </P>
<P>Supplies the ASCIIZ string the resource to be disconnected is currently connected to viz. a device name or driveletter or UNC name. </P>
<P><I>ir_flags</I> </P>
<P>Supplies the force level to use for the disconnection. There are 4 possible force levels: from 0 through 3. The force level has different semantics based on the type of connection. These are described below. Note that static connections cannot be blasted by any of these force levels. They are disconnected only when the system shuts down. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>UNC Disconnection Force Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 0</B> </P></TD><TD VALIGN="TOP"><P>Fails if there are any open files. If there are multiple UNC connections to the same resource, this disconnects only one of them. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 1</B> </P></TD><TD VALIGN="TOP"><P>Fails if there are any open files. It blasts all UNC connections to the resource if there are no open files. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 2, 3</B> </P></TD><TD VALIGN="TOP"><P>Forces open files closed and then destroys all UNC connections to the resource. Any references to these open files that have been forced closed will be failed by the IFS manager. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Drive-based Disconnection Force Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 0, 1</B> </P></TD><TD VALIGN="TOP"><P>Fails if there are any open files on the resource or if it is the current drive. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 2</B> </P></TD><TD VALIGN="TOP"><P>Force closes open files and then disconnects the drive. The disconnection will be failed on level 2 if the drive to be disconnected is the current drive. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 3</B> </P></TD><TD VALIGN="TOP"><P>Force closes open files and disconnects the drive even if it is the current drive. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Device-based Disconnection Force Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 0, 1</B> </P></TD><TD VALIGN="TOP"><P>Fails if there any open files. If there are no open files, the device will be disconnected. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FORCE LEVEL 2, 3</B> </P></TD><TD VALIGN="TOP"><P>Force closes any open files and then disconnects the device. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>proId</I> </P>
<P>Supplies the provider id of the provider requesting the disconnect. </P>
<P><I>pinfo</I> </P>
<P>Supplies an optional pointer to a netuse_info structure, this should only be passed in if the provider has no IOREQ available i.e. NULL is passed in on the <I>pir</I> parameter above. The fields that need to be initialized are described below. All other fields should be set to zero. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Netuse_Info Structure:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><I>nu_data</I> </P></TD><TD VALIGN="TOP"><P>Supplies the ASCIIZ string the resource to be disconnected is currently connected to viz. a device name or driveletter or UNC name. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>nu_level</I> </P></TD><TD VALIGN="TOP"><P>Disconect force level. </P></TD></TR><TR><TD VALIGN="TOP"><P><I>nu_flags</I> </P></TD><TD VALIGN="TOP"><P>Supplies flags for the request. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FSD_NETAPI_USEOEM</B> </P></TD><TD VALIGN="TOP"><P>Is set if you are passing in OEM strings, otherwise strings are assumed to be ANSI. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>FSD_NETAPI_USELFN</B> </P></TD><TD VALIGN="TOP"><P>This flag specifies that the remote name passed in should be treated as a long name. Otherwise, it is treated as a short name. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>nu_rsvd</I> </P>
<P>Must be set to 0xff always. </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>     <I>ir_error</I> </P></TD><TD VALIGN="TOP"><P>Returns 0 if success, errorcode if failure. </P>
<P>Returns 0 if no error, errorcode otherwise. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P></P>
<P></P></FONT></BODY></HTML>
