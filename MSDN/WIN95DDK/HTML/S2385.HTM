<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Copying Files</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Copying Files </H3><P>One or more sections must be put into the INF file that causes the files on an installation diskette to be copied to specific sub directories on the hard disk, and these section names must be listed in the CX2590.Install section in the INF file. Corporation X is providing two files to support the device on one installation diskette: </P>
<UL><LI>     A SCSI miniport driver with the filename CX2590.MPD, which must be copied from a device installation diskette to the directory %WINROOT%\SYSTEM\IOSUBSYS on the Windows 95 computer. </LI><LI>     A utility program with the filename SRSUTIL.EXE, which must be copied from a device installation diskette to the BIN sub directory of the Windows 95 computer boot directory. The BIN subdirectory of the computer boot directory is the default destination directory for this installation. </LI><LI>     Both CX2590.MPD and SRSUTIL.EXE fit on one installation diskette. The descriptive name of a device installation diskette is "CX2590 Windows 95 Installation Disk" (this is the name of the installation diskette that is displayed to the user during the device installation procedure). The installation diskette label is "Instd1" and there is no serial number on the installation diskette. </LI></UL><P></P>
<P>The following sections walk through the procedure of using Infedit to add the required sections and Install section items to the INF file. Note that in this example case, no files have to be renamed when they are copied from the diskette to the hard disk; if renaming was required, a Rename Files-type section would have to be put into the INF file. Also note that for this example CX2590 installation, no preexisting files on the hard drive, such as obsolete drivers, have to be deleted as part of the overall file copying strategy; if there were such requirements, a DelFiles-type section would have to be put in the INF file. </P>
<H4><A NAME="sec0"></A>Specifying the Default Destination Directory </H4><P>The default destination directory for an installation is specified in the INF file header section. (The header section of an INF file is also called the Version section.) To use Infedit to specify the default destination directory: </P>
<P>    1.      Double-click on the root folder of the Infedit display (the folder at the top of the tree in the Infedit user interface, which is labeled C:\sampinf\xscsi.inf in this example). </P>
<P>    2    Double-click on the label Default Destination Directory in the Item column of the edit area of the Infedit user interface. This causes the Edit Destination dialog to be displayed. </P>
<P>    3    In the Edit Destination dialog, select LDID_BOOT from the LDID dropdown list, and then enter "BIN" in the Subdirectory Relative to LDID Path edit box. </P>
<P>    4    Select the OK button on the dialog box and the path C:\BIN appears in the Default Destination Directory value column in the edit area (if, as in this example, the computer boot directory is C:\). </P>
<P></P>
<H4><A NAME="sec1"></A>Specifying the Files to Copy and Their Destination </H4><P>To put the names of the two files to be copied and their directory destinations on the hard disk of the computer, you can use the Infedit interface in the following way: </P>
<P>    1.      To create a CopyFiles-type section in the INF file, right-click on the CopyFiles Sections folder and select the New Copy Files Section option. This creates a new subfolder labelled NewFileSection that represents the new CopyFiles-type section in the INF file. </P>
<P>    2    To enter the name of the new CopyFiles-type section and the destination directory for the files listed in that section, double-click on the new subfolder. </P>
<P>    3    To change the section name, double-click on Section Name in the Item column and use the Edit String dialog to enter a section name. You can use any section name, as long as it is a unique section name in the INF file. For this example, the section name MoveMiniport is used because this is the section that will contain the destination directory for the file CX2590.MPD. </P>
<P>    4    To change the destination directory to C:\WINDOWS\SYSTEM\IOSUBSYS, double-click on Destination Directory in the Item column of the edit area and use the Edit Destination Directory dialog. From the LDID list box, select LDID_IOS. Notice that at the bottom of the dialog, you can see the complete path that corresponds to the LDID value you selected and it is C:\WINDOWS\SYSTEM\IOSUBSYS. Note that you may need to blank out the Subdirectory Relative to LDID Path edit box. For more information about LDID values, see the topic DestinationDirs Section topic in "Reference." </P>
<P></P>
<P>Now you need to specify all the files on the installation diskette(s) that will be copied into the LDID_IOS sub directory. In this example, there is only one: CX2590.MCD. To use the Infedit interface to add this filename as an item to the MoveMiniport section: </P>
<P>    1.      Right-click on the subfolder named MoveMiniport and select Add File Name from the popup menu. This will cause a File Name item to be added to the edit area: </P>
<P></P>
<P>    <img src="screen13.gif"></P>
<P>    2    Double-click on File Name in the Item column of the edit area and use the Edit String dialog to enter the filename CX2590.MCD. </P>
<P></P>
<P>You can repeat steps 1 and 2 as many times as necessary to list all the files that are to be copied into the sub directory whose complete path is the value of the Destination Directory item in this section. If you make a mistake with a File Name item, right-click on File Name for the mistaken item and select Delete from the popup menu. </P>
<P>To put the file copy information into the INF file for the other file on the installation diskette, the file named SRSUTIL.EXE, repeat the process you used for CX2590.MPD. Start by right-clicking the CopyFiles Sections folder and selecting the New Copy Files Section item from the popup menu. Note that the name of the default destination directory path which you set earlier in the INF file header section (C:\BIN in this example) is displayed in the edit area. Since that is the destination directory for SRSUTIL.EXE, it is not necessary to use the Edit Destination dialog in this case. You can also accept the default value for the Name item, which is the value NewFileSection, as long as it is a unique section name in the INF file. </P>
<H4><A NAME="sec2"></A>Specifying the Source Diskette(s) </H4><P>CX2590.MPD and SRSUTIL.EXE are on an installation diskette. with the descriptive name of "CX2590 Windows 95 Installation Disk." The installation diskette label is "Instd1" and there is no serial number on the installation diskette. </P>
<P>To use Infedit to add a Disk Names-type section to the INF file, you can: </P>
<P>    1.      Right-click on the Disk Names Section folder and select the Add Diskname option. This creates a new subfolder labeled with the logical disk number, 1. </P>
<P>    2    To add items to the new Disk Names-type section, double-click on the new subfolder. The items that can be put into a Disk Names-type section are displayed in the edit area of the Infedit screen. </P>
<P>    3    To enter the descriptive name of the installation diskette, double-click on the Disk Description label in the Item column of the edit area and use the Edit String dialog to enter the string "CX2590 Windows 95 Installation Disk." </P>
<P>    4    To enter the label of the installation diskette, double-click on the Disk Label label in the Item column of the edit area and use the Edit String dialog to enter the string "Instd1." </P>
<P>    5    To add the filenames of all the files on the installation diskette to the INF file, double-click on the File Name(s) label in the Items column of the edit area and use the Edit Disk File List dialog. Move the two filenames, CX2590.MPD and SRSUTIL.EXE, from the Available Files list to the Included Files list. </P>
<P></P>
<P>When you are done with these steps, the edit area looks like this: </P>
<P>At this point, all the sections necessary to copy the files from the installation diskette to the appropriate sub directories on the hard disk have been added to the INF file, except for adding references in the install section to the two new CopyFiles-type sections that have just been built. </P>
<P>    <img src="screen16.gif"></P>
<H4><A NAME="sec3"></A>Adding References to the CopyFiles-Type Sections to the Install Section </H4><P>For the CopyFiles-type sections you have built (named MoveMiniPort and NewFileSection) to be recognized by the operating system installer, the names of the two sections have to be added to the Install section. </P>
<P>    1.      Double-click on the Install sections subfolder named CX2590.Install. A list of all the types of sections that can be referred to in an Install section will be displayed in the edit area on the right side of the screen. </P>
<P>    2    Since you want to add the names of CopyFiles-type sections to the Install section of the INF file, double-click the Copy File Sections item in the edit area. Then use the Edit Section List dialog to move the two CopyFiles-type section names from the Available sections list box to the Included Sections list box and then click OK. </P>
<P></P>
<P>At this point, the edit display looks like this: </P>
<P>    <img src="screen17.gif"></P>
<P>This display reflects that the two CopyFiles-type sections have been put into the INF file and the names of the two sections have been added to the Install section. At this point, the Install section is complete. It refers to two Copy File Sections names, two AddReg section names, and two LogConfig section names. </P></FONT></BODY></HTML>
