<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MAKE_HARDWARE_NOT_BUSY (Function 15)</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>MAKE_HARDWARE_NOT_BUSY (Function 15) </H3><P><B>Call With</B></P>
<P>EAX: Contains the CRTC owner's VM handle. </P>
<P>EBX: Contains the currently running VM handle. </P>
<P>ECX: Contains the MemC owner's VM handle. </P>
<P>EDX: Contains the CRTC index register (which must be saved over call). </P>
<P><B>Return Values</B></P>
<P>Save anything that you use. </P>
<P><B>Remarks</B></P>
<P>If your hardware must complete a BLTer drawing operation before having its MemC state switched from Windows hi-res mode to VGA planar mode, then you must implement <B>MAKE_HARDWARE_NOT_BUSY</B>. Many cards (especially those based on IBM's 8514 architecture) have a command FIFO and drawing engine which should not be disturbed while drawing. This routine gives the mini-VDD notice that a switch of the MemC state will be occurring and allows it to delay that switch until the drawing engine has completed its work. </P>
<P>Note that many chipsets cannot be interrupted while waiting for source data to be delivered to the BLTer during a memory to screen BLT. In this case, <B>MAKE_HARDWARE_NOT_BUSY</B> will never show the hardware to be not busy if it happens to be called when the display driver is delivering data to the BLTer from system memory. To take care of this situation, the mini-VDD, display driver, and Main VDD must implement <B>VDD_Set_Sleep_Flag_Addr </B>which tells the main VDD to hold-off switching the MemC state of a MS-DOS VM until the display driver has finished delivering source data to the hardware. See <B>VDD_Set_Sleep_Flag_Addr</B> for more details. </P>
<P>See also <B>VDD_Set_Sleep_Flag_Addr</B> </P>
<P></P>
<P></P></FONT></BODY></HTML>
