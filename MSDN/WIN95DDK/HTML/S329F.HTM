<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VMM_GetSystemInitState</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>VMM_GetSystemInitState </H3><P><BR></P>
<PRE>include vmm.inc

VMMCall VMM_GetSystemInitState

mov [InitState], eax
</PRE>
<P>Retrieves the current system initialization state. Uses EAX, ECX, Flags. </P>
<UL><LI>     Returns the current system initialization state in the EAX register. 
<P>The following table identifies initialization milestones and return values for VMM_GetSystemInitState. Milestones are listed in the table in chronological order. When a milestone completes, this service returns the value (one of the values) listed to the right of the milestone. The first value is returned if the first milestone has not been completed. </P></LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Milestone </B></P></TD><TD VALIGN="TOP"><P><B>VMM_GetSystemInitState return value </B></P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PRESYSCRITINIT (00000000h) </P></TD><TD VALIGN="TOP"><P>SYS_CRITICAL_Init is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PREDEVICEINIT (10000000h) </P></TD><TD VALIGN="TOP"><P>DEVICE_INIT is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PREINITCOMPLETE (20000000h) </P></TD><TD VALIGN="TOP"><P>INIT_COMPLETE is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_VXDINITCOMPLETED (40000000h) </P></TD><TD VALIGN="TOP"><P>KERNEL32_INITIALIZED is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_KERNEL32INITED (50000000h) </P></TD><TD VALIGN="TOP"><P>KERNEL32_SHUTDOWN is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_KERNEL32TERMINATED (A0000000h) </P>
<P>STATE_PRESYSVMTERMINATE (B0000000h) </P></TD><TD VALIGN="TOP"><P>SYS_VM_TERMINATE is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PRESYSTEMEXIT (E0000000h) </P></TD><TD VALIGN="TOP"><P>SYSTEM_EXIT is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PRESYSTEMEXIT2 (E4000000h) </P></TD><TD VALIGN="TOP"><P>SYSTEM_EXIT2 is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PRESYSCRITEXIT (F0000000h) </P></TD><TD VALIGN="TOP"><P>SYS_CRITICAL_EXIT is broadcast </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_PRESYSCRITEXIT2 (F4000000h) </P></TD><TD VALIGN="TOP"><P>SYS_CRITICAL_EXIT2 is broadcast. </P></TD></TR><TR><TD VALIGN="TOP"><P>SYSSTATE_POSTSYSCRITEXIT2 (FFF00000h) </P></TD><TD VALIGN="TOP"><P>Return to real mode </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P>Future versions of Windows may have additional initialization states with values between the ones defined here, which implies that you should use a relational comparison to test the initialized state. Currently, this service returns zero in ECX, but additional information may be returned in this register in the future. </P>
</FONT></BODY></HTML>
