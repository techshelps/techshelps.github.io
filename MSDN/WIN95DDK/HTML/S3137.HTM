<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IFSMgr_GetLockState</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>IFSMgr_GetLockState </H3><P><BR></P>
<PRE>IFSMgr_GetLockState(
 unsigned long Drive,
 unsigned long * pLockType,
 unsigned long * pLockFlags,
 unsigned long * pLockOwner
 )
</PRE>
<P>This service returns information about volume locks on a given drive. </P>
<P><I>Drive</I> </P>
<P>Supplies the 0-based drive number to query the volume lock information for. </P>
<P><I>pLockType</I> </P>
<P>Supplies a pointer to the variable to contain the type of volume lock in effect. </P>
<P><I>pLockFlags</I> </P>
<P>Supplies a pointer to the variable to contain flags for the volume lock in effect. </P>
<P><I>pLockOwner</I> </P>
<P>Supplies a pointer to the variable to contain the process id of the process owning the volume lock. </P>
<UL><LI>     Returns 0 if success, errorcode if failure. </LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><I>pLockType</I> </P></TD><TD VALIGN="TOP"><P>Returns the current lock level in effect. The lock level can take on the values listed below. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Lock Type Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>-1</B> </P></TD><TD VALIGN="TOP"><P>This indicates that no lock is currently in effect. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>0</B> </P></TD><TD VALIGN="TOP"><P>This indicates that a level 0 lock is currently in effect. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>1</B> </P></TD><TD VALIGN="TOP"><P>This indicates that a level 1 lock is currently in effect. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>2</B> </P></TD><TD VALIGN="TOP"><P>This indicates that a level 2 lock is currently in effect. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>3</B> </P></TD><TD VALIGN="TOP"><P>This indicates that a level 3 lock is currently in effect. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><I>pLockFlags</I> </P></TD><TD VALIGN="TOP"><P>Returns flags operative for the current lock level, if any. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Lock Flag Values:</B> </P></TD><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>LOCKP_ALLOW_WRITES</B> </P></TD><TD VALIGN="TOP"><P>Indicates that the volume lock taken allows writes to happen while it is in effect. If this flag is not set and a volume lock is in effect, the volume lock does not allow writes to happen. This flag is not valid for a level 0 lock, it is valid on all other lock levels. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>LOCKP_FAIL_MEM_MAPPING</B> </P></TD><TD VALIGN="TOP"><P>Indicates that memory-mapping operations cannot be done while the volume lock is effect. If this flag is not set and a volume lock is in effect, memory-mappings are allowed while the volume lock is operative. This flag is not valid for a level 0 lock, it is valid on all other lock levels. </P></TD></TR><TR><TD VALIGN="TOP"><P><B>LOCKP_LOCK_FOR_FORMAT</B> </P></TD><TD VALIGN="TOP"><P>Indicates that the volume is locked for a format operation. This flag is valid only when the lock level is 0. If this flag is not and a level 0 lock is in effect, the volume is not locked for formatting. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><I>pLockOwner</I> </P></TD><TD VALIGN="TOP"><P>Returns the process id of the process owning the lock. Note that this is an internally generated process id and does not refer to any specific data structure. It is purely to be used for identification purposes without any interpretations done on it. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P></P>
<P></P></FONT></BODY></HTML>
