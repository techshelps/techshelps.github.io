<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Set_Device_Focus</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>Set_Device_Focus </H3><P><BR></P>
<PRE>include vmm.inc

mov     ebx, VMHandle
mov     edx, VID
mov     esi, Flags
mov     edi, AssocVMHandle
mov     eax, Set_Device_Focus
VMMcall System_Control
</PRE>
<P>Sets the focus of the specified virtual device to the specified virtual machine. The virtual device may modify all general registers and flags. </P>
<UL><LI>     This message cannot be failed. The virtual device must return carry clear. </LI></UL><P></P>
<P><I>VMHandle</I> </P>
<P>Handle of the virtual machine. </P>
<P><I>VID</I> </P>
<P>Identifier of the virtual device that should change its focus. If this parameter is zero, all virtual devices should change their focus to the indicated virtual machine. Otherwise, all devices whose device IDs are different from <I>VID</I> should ignore the message. </P>
<P><I>Flags</I> </P>
<P>Flags specifying how to set the focus if the <I>VID</I> parameter is zero. Can be this value: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Meaning </B></P></TD></TR><TR><TD VALIGN="TOP"><P>1 </P></TD><TD VALIGN="TOP"><P>Used by the virtual shell device to determine which virtual machine to set focus for. If this value is given, the <I>AssocVMHandle</I> parameter may specify a virtual machine. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>All other values are reserved. </P>
<P><I>AssocVMHandle</I> </P>
<P>Handle of a virtual machine associated with a problem. This parameter is zero if there is no such virtual machine. This parameter is used only if the <I>Flags</I> parameter is set to 1. </P>
<P>A virtual device that is instructed to change its focus should take steps, such as disabling I/O trapping, to allow the specified virtual machine to run as fast as possible. </P>
<P>This is one of the few messages that arbitrary virtual devices are permitted to send. Typically, a virtual device sends this message with EDX = ESI = 0, to indicate that all devices should set the focus to the indicated virtual machine. </P>
<P></P>
<P></P></FONT></BODY></HTML>
