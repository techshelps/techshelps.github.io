<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LOCK/UNLOCK</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>LOCK/UNLOCK </H3><P><BR></P>
<PRE>mov bx, DriveNum  ; drive number 0=default, 1=A, 2=B ...
mov ch, 8         ; device category must be 8
mov cl, 48h       ; LOCK/UNLOCK minor number 
mov ax, 440D      ; generic IOCTL function number
mov dx, seg ParamBlock
mov ds, dx
mov dx, offset ParamBlock
int 21h
jnc success
mov [ErrorValue], ax  
</PRE>
<P>Locks or unlocks the drive. </P>
<UL><LI>     On error sets the Carry flag and the AX register to one of these error values: </LI></UL>
<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>01h </P></TD><TD VALIGN="TOP"><P>Function not supported </P></TD></TR><TR><TD VALIGN="TOP"><P>B0h </P></TD><TD VALIGN="TOP"><P>Volume not locked in drive </P></TD></TR><TR><TD VALIGN="TOP"><P>B2h </P></TD><TD VALIGN="TOP"><P>Volume not removable </P></TD></TR><TR><TD VALIGN="TOP"><P>B4h </P></TD><TD VALIGN="TOP"><P>Lock count exceeded </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P></P>
<P><I>DriveNum</I> (BX) </P>
<P>Specifies the drive for the operation. Can be 0 for the default drive, 1 for A, 2 for B, and so on. </P>
<P><I>ParamBlock</I> (DS:DX) </P>
<P>Address of the parameter block for the function. The block has two byte fields. The first is LOCK_UNLOCK_OP, which has one of the following values: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="190pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>0 </P></TD><TD VALIGN="TOP"><P>Lock volume in drive </P></TD></TR><TR><TD VALIGN="TOP"><P>1 </P></TD><TD VALIGN="TOP"><P>UnLock volume in drive </P></TD></TR><TR><TD VALIGN="TOP"><P>02 </P></TD><TD VALIGN="TOP"><P>Return lock/unlock status </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>The values 03h through 0FFh are reserved. </P>
<P>The second byte field is filled on return from the call as the lock status of the drive. </P>
<P></P>
<P></P></FONT></BODY></HTML>
