<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IFSMgr_ReassignLockFileInst</title>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>

<BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">

<form name="x">
    <p><object
    classid="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016"
    align="baseline" border="0" width="50" height="50" name="iv"></object></p>
</form>

<H3>IFSMgr_ReassignLockFileInst </h3>

<P><br>
</p>

<pre>IFSMgr_ReassignLockFileInst(
 void * pFSDLockListHead,
 void * pOldOpenFileInstance,
 void * pNewOpenFileInstance
 )
</pre>

<P>This service is provided for the FSD to activate any
previously active locks for a given file instance. When the file
is reopened by the IFS manager on the release of the level 3
lock, it provides an indication to the FSD that the file being
reopened previously had active locks on it. In addition, the FSD
is passed the pointer to the original lock list which was
deactivated by calling IFSMgr_UnassignLockList previously. There
is one more problem activating the lock i.e. since the open file
structure as well as the open file instance structures were freed
on the &quot;virtual close&quot;, the file instance field in the
lock structure could be invalid. To work around this, the IFS
manager also passes in the pointer to the old file instance
structure. Armed with these pieces of information, the locks for
each open file instance can be reactivated and the entire lock
list can thus be reconstructed. </p>

<P><i>pFSDLockListHead</i> </p>

<P>Supplies a pointer to the head of the list of
locks. This pointer is the same as what it was before the
&quot;virtual close&quot; on the level 3 lock. </p>

<P><i>pOldOpenFileInstance</i> </p>

<P>Supplies the old value of the file instance
structure pointer. </p>

<P><i>pNewOpenFileInstance</i> </p>

<P>Supplies the new value for the file instance
structure pointer after the file has been reopened. </p>

<ul>
    <li>Nothing. </li>
</ul>
</FONT></BODY>
</html>
