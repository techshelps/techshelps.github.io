<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>V86MMGR_Load_Client_Ptr</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H3>V86MMGR_Load_Client_Ptr </H3><P><BR></P>
<PRE>include v86mmgr.inc

mov     ebx, VMHandle
mov     ebp, OFFSET32 ClientRegisters
mov     ah, IdSegmentReg
mov     al, IdOffsetReg
VxDcall V86MMGR_Load_Client_Ptr
</PRE>
<P>Loads the FS:ESI register pair with the far pointer in the specified client registers. Uses ESI, Flags, FS. </P>
<UL><LI>     Returns with the specified client pointer in the FS:ESI register pair. </LI></UL><P></P>
<P><I>VMHandle</I> </P>
<P>Handle of the current VM. The VM must be in protected mode. </P>
<P><I>ClientRegisters</I> </P>
<P>Address of a <B>Client_Reg_Struc</B> structure containing the register values of the current VM. </P>
<P><I>IdSegmentReg</I> and <I>IdOffsetReg</I> </P>
<P>Values identifying the client's segment register and offset register. These values refer to <B>Client_Reg_Struc</B> structure fields. For example, to load the pointer in the virtual machine's DS:(E)DX register pair: </P>
<P><BR></P>
<PRE>mov     ax, (Client_DS * 100h) + Client_DX
VxDcall V86MMGR_Load_Client_Ptr
</PRE>
<P>If the virtual machine is running a 16-bit protected-mode application, the high word of the offset in ESI is set to zero. Otherwise, if the virtual machine is running a 32-bit program or is in VxD_Exec_Mode, the high word of ESI is not set to zero. This allows most translation procedures to operate correctly without the need to test the execution mode of the current virtual machine. </P>
<P></P>
<P></P></FONT></BODY></HTML>
