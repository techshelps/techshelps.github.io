<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating a Custom OEM Pen Driver</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" SIZE="2">
<H2>Creating a Custom OEM Pen Driver </H2><P>The sample Unidriver code supports the following pen hardware: </P>
<UL><LI>     Compaq Concerto </LI><LI>     Wacom Digitizer HD-648A </LI><LI>     Wacom Digitizer SD-510C </LI><LI>     Wacom Digitizer UD-0608R </LI></UL><P></P>
<P>For OEM hardware compatible with one of the above devices, a developer can literally create a custom pen device driver in a few hours or less. The simplest approach is to define a constant in the DEFINES.H file located in the \PEN\INC sub directory. </P>
<P>DEFINES.H defines the following values corresponding to the devices listed above: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Value </B></P></TD><TD VALIGN="TOP"><P><B>Supported Devices </B></P></TD></TR><TR><TD VALIGN="TOP"><P>CPQ </P></TD><TD VALIGN="TOP"><P>Compaq Concerto </P></TD></TR><TR><TD VALIGN="TOP"><P>WACOM2 </P></TD><TD VALIGN="TOP"><P>Wacom Digitizer HD-648A </P></TD></TR><TR><TD VALIGN="TOP"><P>WACOM2 </P></TD><TD VALIGN="TOP"><P>Wacom Digitizer SD 510C </P></TD></TR><TR><TD VALIGN="TOP"><P>WACOM4 </P></TD><TD VALIGN="TOP"><P>Wacom Digitizer UD0608R </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>To create a driver specifically for one of the devices in the list, simply remove the unneeded definitions in DEFINES.H. For example, to customize the pen Unidriver for the Wacom UD0608R device, keep these three lines in DEFINES.H: </P>
<P><BR></P>
<PRE>#ifdef UNIDRV
#define WACOM4
#endif
</PRE>
<P>Then run the MAKE file to build the Wacom UD0608R device driver. </P>
<P>You can also trim the source code, if desired, to remove distractions and improve compilation speed. To trim the source, remove the <B>#ifdef</B> blocks, <B>#pragmas</B>, and commented code for other devices from the OEM source files in the \PEN\SAMPLES\VPEND sub directory. The source files OEMs will want to work on are identified in the following table: </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="144pt" VALIGN="TOP"><COL WIDTH="204pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>OEM Source File </B></P></TD><TD VALIGN="TOP"><P><B>Description </B></P></TD></TR><TR><TD VALIGN="TOP"><P>OEMAPI.C </P></TD><TD VALIGN="TOP"><P>OEM message handling. </P></TD></TR><TR><TD VALIGN="TOP"><P>OEMHWINT.C </P></TD><TD VALIGN="TOP"><P>OEM hardware interrupt servicing. </P></TD></TR><TR><TD VALIGN="TOP"><P>INITUTIL.C </P></TD><TD VALIGN="TOP"><P>Initializes the <B>DRV_PENINFO</B> and <B>_HARDWAREINFO</B> structures by reading values from the Windows 95 registry. </P></TD></TR><TR><TD VALIGN="TOP"><P>MISCUTIL.C </P></TD><TD VALIGN="TOP"><P>Miscellaneous OEM hardware-specific code. Hardware-specific code is also found in the source modules named for specific devices, such as CONCERTO.C. </P></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>If writing for a device other than a Wacom tablet, ignore the files VPEND.H and VPEND.INC in the \PEN\INC sub directory. </P>
</FONT></BODY></HTML>
