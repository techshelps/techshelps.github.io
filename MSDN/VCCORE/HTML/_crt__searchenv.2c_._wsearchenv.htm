<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_searchenv, _wsearchenv</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_crt__searchenv.2c_._wsearchenv"></A><SUP></SUP>_searchenv, _wsearchenv</H1>

<P>Searches for a file using environment paths.</P>

<P><B>void</B> <B>_searchenv(</B> <B>const</B> <B>char</B> <B>*</B><I>filename</I><B>,</B> <B>const</B> <B>char</B> <B>*</B><I>varname</I><B>,</B> <B>char</B> <B>*</B><I>pathname</I> <B>);</B></P>

<P><B>void</B> <B>_wsearchenv(</B> <B>const</B> <B>wchar_t</B> <B>*</B><I>filename</I><B>,</B> <B>const</B> <B>wchar_t</B> <B>*</B><I>varname</I><B>,</B> <B>wchar_t</B> <B>*</B><I>pathname</I> <B>);</B></P>

<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=22%><B>Routine</B></TD>
<TD class=label width=34%><B>Required Header</B></TD>
<TD class=label width=44%><B>Compatibility</B></TD>
</TR>

<TR VALIGN="top">
<TD width=22%><B>_searchenv</B></TD>
<TD width=34%>&lt;stdlib.h&gt;</TD>
<TD width=44%>Win 95, Win NT</TD>
</TR>

<TR VALIGN="top">
<TD width=22%><B>_wsearchenv</B></TD>
<TD width=34%>&lt;stdlib.h&gt; or &lt;wchar.h&gt;</TD>
<TD width=44%>Win NT</TD>
</TR>
</TABLE><BR>

<P>For additional compatibility information, see <A HREF="_crt_compatibility.htm">Compatibility</A> in the Introduction.</P>

<P class=label><B>Libraries</B></P>

<TABLE border=1 cellpadding=5 cols=2 frame=below rules=rows>

<TR VALIGN="top">
<TD width=24%>LIBC.LIB</TD>
<TD width=76%>Single thread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>LIBCMT.LIB</TD>
<TD width=76%>Multithread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>MSVCRT.LIB</TD>
<TD width=76%>Import library for MSVCRT.DLL, retail version</TD>
</TR>
</TABLE><BR>

<P class=label><B>Return Value</B></P>

<P>None</P>

<P class=label><B>Parameters</B></P>

<P class=dt><I>filename</I></P>

<P class=indent>Name of file to search for</P>

<P class=dt><I>varname</I></P>

<P class=indent>Environment to search</P>

<P class=dt><I>pathname</I></P>

<P class=indent>Buffer to store complete path</P>

<P class=label><B>Remarks</B></P>

<P>The <B>_searchenv</B> routine searches for the target file in the specified domain. The <I>varname</I> variable can be any environment or user-defined variable that specifies a list of directory paths, such as <B>PATH</B>, <B>LIB</B>, and <B>INCLUDE</B>.<B>_searchenv</B> is case sensitive, so <I>varname</I> should match the case of the environment variable.</P>

<P>The routine searches first for the file in the current working directory. If it does not find the file, it looks next through the directories specified by the environment variable. If the target file is in one of those directories, the newly created path is copied into <I>pathname</I>. If the <I>filename</I> file is not found, <I>pathname</I> contains an empty, null-terminated string.</P>

<P>The <I>pathname</I> buffer must be large enough to accomodate the full length of the constructed path name. Otherwise, <B>_searchenv</B> will overwite the <I>pathname</I> buffer resulting in unexpected behavior. This condition can be avoided by ensuring that the length of the constructed path name does not exceed the size of the <I>pathname</I> buffer, by calculating the maximum sum of the <I>filename</I> and <I>varname</I> lengths before calling <B>_searchenv</B>.</P>

<P><B>_wsearchenv</B> is a wide-character version of <B>_searchenv</B>; the arguments to <B>_wsearchenv</B> are wide-character strings. <B>_wsearchenv</B> and <B>_searchenv</B> behave identically otherwise.</P>

<P class=label><B>Generic-Text Routine Mappings</B></P>

<TABLE border=1 cellpadding=5 cols=4 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=17%><B>TCHAR.H Routine </B></TD>
<TD class=label width=29%><B>_UNICODE &amp; _MBCS Not Defined</B></TD>
<TD class=label width=26%><B>_MBCS Defined</B></TD>
<TD class=label width=28%><B>_UNICODE Defined</B></TD>
</TR>

<TR VALIGN="top">
<TD width=17%>_tsearchenv</TD>
<TD width=29%>_searchenv</TD>
<TD width=26%>_searchenv</TD>
<TD width=28%>_wsearchenv</TD>
</TR>
</TABLE><BR>

<P class=label><B>Example</B></P>

<PRE><CODE>/* SEARCHEN.C: This program searches for a file in
 * a directory specified by an environment variable.
 */

#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

void main( void )
{
   char pathbuffer[_MAX_PATH];
   char searchfile[] = "CL.EXE";
   char envvar[] = "PATH";

   /* Search for file in PATH environment variable: */
   _searchenv( searchfile, envvar, pathbuffer );
   if( *pathbuffer != '\0' )
      printf( "Path for %s: %s\n", searchfile, pathbuffer );
   else
      printf( "%s not found\n", searchfile );
}

</CODE></PRE>

<P class=label><B>Output</B></P>

<PRE><CODE>Path for CL.EXE: C:\msvcnt\c32\bin\CL.EXE

</CODE></PRE>

<P><A HREF="_crt_directory_control.htm">Directory Control Routines</A></P>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="_crt_getenv.2c_._wgetenv.htm">getenv</A>, <A HREF="_crt__putenv.2c_._wputenv.htm">_putenv</A></P>
</font>
</BODY>
</HTML>
