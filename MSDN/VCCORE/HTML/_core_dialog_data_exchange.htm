<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dialog Data Exchange</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addui_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_sample_mfc_scribble">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="Scribble dialog">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_dialog_data_exchange"></A>Dialog Data Exchange</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_dialog_boxes.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_dialog.2d.box_tasks.htm">How Do I</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Sample</A>  |&nbsp; <A HREF="JavaScript:hhobj_3.Click()">Tutorial</A></P>

<P>If you use the DDX mechanism, you set the initial values of the dialog object’s member variables, typically in your <B>OnInitDialog</B> handler or the dialog constructor. Immediately before the dialog is displayed, the framework’s DDX mechanism transfers the values of the member variables to the controls in the dialog box, where they appear when the dialog box itself appears in response to <B>DoModal</B> or <B>Create</B>. The default implementation of <B>OnInitDialog</B> in <B>CDialog</B> calls the <B>UpdateData</B> member function of class <B>CWnd</B> to initialize the controls in the dialog box.</P>

<P>The same mechanism transfers values from the controls to the member variables when the user clicks the OK button (or whenever you call the <B>UpdateData</B> member function with the argument <B>TRUE</B>). The dialog data validation mechanism validates any data items for which you specified validation rules. </P>

<P>The following figure illustrates dialog data exchange.</P>

<P class=label><B>Dialog Data Exchange</B></P>

<P><IMG SRC="m04ddex.gif" ALT="" BORDER=0></P>

<P><B>UpdateData</B> works in both directions, as specified by the <B>BOOL</B> parameter passed to it. To carry out the exchange, <B>UpdateData</B> sets up a <B>CDataExchange</B> object and calls your dialog class’s override of <B>CDialog</B>’s <B>DoDataExchange</B> member function. <B>DoDataExchange</B> takes an argument of type <B>CDataExchange</B>. The <B>CDataExchange</B> object passed to <B>UpdateData</B> represents the context of the exchange, defining such information as the direction of the exchange.</P>

<P>When you (or ClassWizard) override <B>DoDataExchange</B>, you specify a call to one DDX function per data member (control). Each DDX function knows how to exchange data in both directions based on the context supplied by the <B>CDataExchange</B> argument passed to your <CODE>DoDataExchange</CODE> by <B>UpdateData</B>.</P>

<P>MFC provides many DDX functions for different kinds of exchange. The following example shows a <CODE>DoDataExchange</CODE> override in which two DDX functions and one DDV function are called:</P>

<PRE><CODE>void CMyDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);    // Call base class version
    //{{AFX_DATA_MAP(CMyDialog)
    DDX_Check(pDX, IDC_MY_CHECKBOX, m_bVar);
    DDX_Text(pDX, IDC_MY_TEXTBOX, m_strName);
    DDV_MaxChars(pDX, m_strName, 20);
    //}}AFX_DATA_MAP
}
</CODE></PRE>

<P>The <CODE>DDX_</CODE> and <CODE>DDV_</CODE> lines between the <CODE>//{{AFX_DATA_MAP</CODE> and <CODE>//}}AFX_DATA_MAP</CODE> delimiters are a data map. The sample DDX and DDV functions shown are for a check-box control and an edit-box control, respectively.</P>

<P>If the user cancels a modal dialog box, the <B>OnCancel</B> member function terminates the dialog box and <B>DoModal</B> returns the value <B>IDCANCEL</B>. In that case, no data is exchanged between the dialog box and the dialog object.</P>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="_core_life_cycle_of_a_dialog_box.htm">Life Cycle of a Dialog Box</A>, <A HREF="_core_dialog_data_validation.htm">Dialog Data Validation</A></P>
</font>
</BODY>
</HTML>
