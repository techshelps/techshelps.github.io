<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_utime, _wutime</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_crt__utime.2c_._wutime"></A><SUP></SUP>_utime, _wutime</H1>

<P>Set the file modification time.</P>

<P><B>int</B> <B>_utime(</B> <B>unsigned char</B> <B>*</B><I>filename</I><B>,</B> <B>struct</B> <B>_utimbuf</B> <B>*</B><I>times</I> <B>);</B></P>

<P><B>int</B> <B>_wutime(</B> <B>wchar_t</B> <B>*</B><I>filename</I><B>,</B> <B>struct</B> <B>_utimbuf</B> <B>*</B><I>times</I> <B>);</B></P>

<TABLE border=1 cellpadding=5 cols=4 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=16%><B>Routine</B></TD>
<TD class=label width=28%><B>Required Headers</B></TD>
<TD class=label width=27%><B>Optional Headers</B></TD>
<TD class=label width=29%><B>Compatibility</B></TD>
</TR>

<TR VALIGN="top">
<TD width=16%><B>_utime</B></TD>
<TD width=28%>&lt;sys/utime.h&gt;</TD>
<TD width=27%>&lt;errno.h&gt;</TD>
<TD width=29%>Win 95, Win NT</TD>
</TR>

<TR VALIGN="top">
<TD width=16%><B>_wutime</B></TD>
<TD width=28%>&lt;utime.h&gt; or &lt;wchar.h&gt;</TD>
<TD width=27%>&lt;errno.h&gt;</TD>
<TD width=29%>Win 95, Win NT</TD>
</TR>
</TABLE><BR>

<P>For additional compatibility information, see <A HREF="_crt_compatibility.htm">Compatibility</A> in the Introduction.</P>

<P class=label><B>Libraries</B></P>

<TABLE border=1 cellpadding=5 cols=2 frame=below rules=rows>

<TR VALIGN="top">
<TD width=24%>LIBC.LIB</TD>
<TD width=76%>Single thread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>LIBCMT.LIB</TD>
<TD width=76%>Multithread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>MSVCRT.LIB</TD>
<TD width=76%>Import library for MSVCRT.DLL, retail version</TD>
</TR>
</TABLE><BR>

<P class=label><B>Return Value</B></P>

<P>Each of these functions returns 0 if the file-modification time was changed. A return value of –1 indicates an error, in which case <B>errno</B> is set to one of the following values:</P>

<P class=dt><B>EACCES</B></P>

<P class=indent>Path specifies directory or read-only file</P>

<P class=dt><B>EINVAL</B></P>

<P class=indent>Invalid <I>times</I> argument</P>

<P class=dt><B>EMFILE</B></P>

<P class=indent>Too many open files (the file must be opened to change its modification time)</P>

<P class=dt><B>ENOENT</B></P>

<P class=indent>Path or filename not found</P>

<P class=label><B>Parameters</B></P>

<P class=dt><I>filename</I></P>

<P class=indent>Path or filename</P>

<P class=dt><I>times</I></P>

<P class=indent>Pointer to stored time values</P>

<P class=label><B>Remarks</B></P>

<P>The <B>_utime</B> function sets the modification time for the file specified by <I>filename.</I> The process must have write access to the file in order to change the time. Under Windows NT and Windows 95, you can change the access time and the modication time in the <B>_utimbuf</B> structure. If <I>times</I> is a <B>NULL</B> pointer, the modification time is set to the current local time. Otherwise, <I>times</I> must point to a structure of type <B>_utimbuf</B>, defined in SYS\UTIME.H. </P>

<P>The <B>_utimbuf</B> structure stores file access and modification times used by <B>_utime</B> to change file-modification dates. The structure has the following fields, which are both of type <B>time_t</B>:</P>

<P class=dt><B>actime</B></P>

<P class=indent>Time of file access</P>

<P class=dt><B>modtime</B></P>

<P class=indent>Time of file modification</P>

<P><B>_utime</B> is identical to <B>_futime</B> except that the <I>filename</I> argument of <B>_utime</B> is a filename or a path to a file, rather than a handle to an open file.</P>

<P><B>_wutime</B> is a wide-character version of <B>_utime</B>; the <I>filename</I> argument to <B>_wutime</B> is a wide-character string. These functions behave identically otherwise.</P>

<P class=label><B>Generic-Text Routine Mappings</B></P>

<TABLE border=1 cellpadding=5 cols=4 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=17%><B>TCHAR.H Routine </B></TD>
<TD class=label width=29%><B>_UNICODE &amp; _MBCS Not Defined</B></TD>
<TD class=label width=26%><B>_MBCS Defined</B></TD>
<TD class=label width=28%><B>_UNICODE Defined</B></TD>
</TR>

<TR VALIGN="top">
<TD width=17%>_tutime</TD>
<TD width=29%>_utime</TD>
<TD width=26%>_utime</TD>
<TD width=28%>_wutime</TD>
</TR>
</TABLE><BR>

<P class=label><B>Example</B></P>

<PRE><CODE>/* UTIME.C: This program uses _utime to set the
 * file-modification time to the current time.
 */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/utime.h&gt;

void main( void )
{
   /* Show file time before and after. */
   system( "dir utime.c" );
   if( _utime( "utime.c", NULL ) == -1 )
      perror( "_utime failed\n" );
   else
      printf( "File time modified\n" );
   system( "dir utime.c" );
}

</CODE></PRE>

<P class=label><B>Output</B></P>

<PRE><CODE> Volume in drive C is ALDONS
 Volume Serial Number is 0E17-1702

 Directory of C:\dolphin\crt\code

05/03/94  10:00p                   451 utime.c
               1 File(s)            451 bytes
                             83,320,832 bytes free
 Volume in drive C is ALDONS
 Volume Serial Number is 0E17-1702

 Directory of C:\dolphin\crt\code

05/03/94  10:00p                   451 utime.c
               1 File(s)            451 bytes
                             83,320,832 bytes free
File time modified

</CODE></PRE>

<P><A HREF="_crt_time_management.htm">Time Management Routines</A></P>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="_crt_asctime.2c_._wasctime.htm">asctime</A>, <A HREF="_crt_ctime.2c_._wctime.htm">ctime</A>, <A HREF="_crt__fstat.2c_._fstati64.htm">_fstat</A>, <A HREF="_crt__ftime.htm">_ftime</A>, <A HREF="_crt__futime.htm">_futime</A>, <A HREF="_crt_gmtime.htm">gmtime</A>, <A HREF="_crt_localtime.htm">localtime</A>, <A HREF="_crt__stat.2c_._wstat.2c_._stati64.2c_._wstati64.htm">_stat</A>, <A HREF="_crt_time.htm">time</A></P>
</font>
</BODY>
</HTML>
