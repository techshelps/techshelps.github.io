<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_umask</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_crt__umask"></A><SUP></SUP>_umask</H1>

<P>Sets the default file-permission mask.</P>

<P><B>int</B> <B>_umask(</B> <B>int</B> <I>pmode</I> <B>);</B></P>

<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=17%><B>Routine</B></TD>
<TD class=label width=38%><B>Required Header</B></TD>
<TD class=label width=45%><B>Compatibility</B></TD>
</TR>

<TR VALIGN="top">
<TD width=17%><B>_umask</B></TD>
<TD width=38%>&lt;io.h&gt; and &lt;sys/stat.h&gt; and &lt;sys/types.h&gt;</TD>
<TD width=45%>Win 95, Win NT</TD>
</TR>
</TABLE><BR>

<P>For additional compatibility information, see <A HREF="_crt_compatibility.htm">Compatibility</A> in the Introduction.</P>

<P class=label><B>Libraries</B></P>

<TABLE border=1 cellpadding=5 cols=2 frame=below rules=rows>

<TR VALIGN="top">
<TD width=24%>LIBC.LIB</TD>
<TD width=76%>Single thread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>LIBCMT.LIB</TD>
<TD width=76%>Multithread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>MSVCRT.LIB</TD>
<TD width=76%>Import library for MSVCRT.DLL, retail version</TD>
</TR>
</TABLE><BR>

<P class=label><B>Return Value</B></P>

<P><B>_umask</B> returns the previous value of <I>pmode.</I> There is no error return.</P>

<P class=label><B>Parameter</B></P>

<P class=dt><I>pmode</I></P>

<P class=indent>Default permission setting</P>

<P class=label><B>Remarks</B></P>

<P>The <B>_umask</B> function sets the file-permission mask of the current process to the mode specified by <I>pmode.</I> The file-permission mask modifies the permission setting of new files created by <B>_creat</B>, <B>_open</B>, or <B>_sopen</B>. If a bit in the mask is 1, the corresponding bit in the file’s requested permission value is set to 0 (disallowed). If a bit in the mask is 0, the corresponding bit is left unchanged. The permission setting for a new file is not set until the file is closed for the first time.</P>

<P>The argument <I>pmode</I> is a constant expression containing one or both of the manifest constants <B>_S_IREAD</B> and <B>_S_IWRITE</B>, defined in SYS\STAT.H. When both constants are given, they are joined with the bitwise-OR operator ( <B>|</B> ). If the <I>pmode</I> argument is <B>_S_IREAD</B>, reading is not allowed (the file is write-only). If the <I>pmode</I> argument is <B>_S_IWRITE</B>, writing is not allowed (the file is read-only). For example, if the write bit is set in the mask, any new files will be read-only. Note that with MS-DOS, Windows NT, and Windows 95, all files are readable; it is not possible to give write-only permission. Therefore, setting the read bit with <B>_umask</B> has no effect on the file’s modes.</P>

<P class=label><B>Example </B></P>

<PRE><CODE>/* UMASK.C: This program uses _umask to set
 * the file-permission mask so that all future
 * files will be created as read-only files.
 * It also displays the old mask.
 */

#include &lt;sys/stat.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;io.h&gt;
#include &lt;stdio.h&gt;

void main( void )
{
   int oldmask;

   /* Create read-only files: */
   oldmask = _umask( _S_IWRITE );
   printf( "Oldmask = 0x%.4x\n", oldmask );
}

</CODE></PRE>

<P class=label><B>Output</B></P>

<PRE><CODE>Oldmask = 0x0000

</CODE></PRE>

<P><A HREF="_crt_file_handling.htm">File Handling Routines</A>  |&nbsp; <A HREF="_crt_low.2d.level_i.2f.o.htm">Low-level I/O Routines</A></P>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="_crt__chmod.2c_._wchmod.htm">_chmod</A>, <A HREF="_crt__creat.2c_._wcreat.htm">_creat</A>, <A HREF="_crt__mkdir.2c_._wmkdir.htm">_mkdir</A>, <A HREF="_crt__open.2c_._wopen.htm">_open</A></P>
</font>
</BODY>
</HTML>
