<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Serializing Data to and from Files</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>


<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addui_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_sample_mfc_scribble">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_gs_Creating_the_Document">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CObject.3a3a.Serialize">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CArchive">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_serializing_data_to_and_from_files"></A>Serializing Data to and from Files</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_document.2f.view.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_document.2f.view_tasks.htm">How Do I</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Sample</A>  |&nbsp; <A HREF="JavaScript:hhobj_3.Click()">Tutorial</A></P>

<P>The basic idea of persistence is that an object should be able to write its current state, indicated by the values of its member variables, to persistent storage. Later, the object can be re-created by reading, or "deserializing," the object's state from persistent storage. A key point here is that the object itself is responsible for reading and writing its own state. Thus, for a class to be persistent, it must implement the basic serialization operations.</P>

<P>The framework provides a default implementation for saving documents to disk files in response to the Save and Save As commands on the File menu and for loading documents from disk files in response to the Open command. With very little work, you can implement a document's ability to write and read its data to and from a file. The main thing you must do is override the <A HREF="JavaScript:hhobj_4.Click()">Serialize</A> member function in your document class.</P>

<P>AppWizard places a skeletal override of the <B>CDocument</B> member function <B>Serialize</B> in the document class it creates for you. After you have implemented your application's member variables, you can fill in your <CODE>Serialize</CODE> override with code that sends the data to an "archive object" connected to a file. A <A HREF="JavaScript:hhobj_5.Click()">CArchive</A> object is similar to the <B>cin</B> and <B>cout</B> input/output objects from the C++ iostream library. However, <B>CArchive</B> writes and reads binary format, not formatted text. </P>

<H3>What do you want to know more about?</H3>

<UL type=disc>
	<LI><A HREF="_core_serialization_.28.object_persistence.29.htm">Serialization</A><BR><BR></LI>

	<LI><A HREF="#_core_the_document.92.s_role_in_serialization">The document's role in serialization</A><BR><BR></LI>

	<LI><A HREF="#_core_the_data.92.s_role_in_serialization">The data's role in serialization</A><BR><BR></LI>

	<LI><A HREF="_core_bypassing_the_serialization_mechanism.htm">Bypassing the serialization mechanism</A></LI>
</UL>



<H2><A NAME="_core_the_document.92.s_role_in_serialization"></A>The Document's Role in Serialization</H2>

<P>The framework responds automatically to the <B>File</B> menu's <B>Open</B>, <B>Save</B>, and <B>Save As</B> commands by calling the document's <CODE>Serialize</CODE> member function if it is implemented. An <B>ID_FILE_OPEN</B> command, for example, calls a handler function in the application object. During this process, the user sees and responds to the File Open dialog box and the framework obtains the filename the user chooses. The framework creates a <B>CArchive</B> object set up for loading data into the document and passes the archive to <CODE>Serialize</CODE>. The framework has already opened the file. The code in your document's <CODE>Serialize</CODE> member function reads the data in through the archive, reconstructing data objects as needed. For more information about serialization, see the article <A HREF="_core_serialization_.28.object_persistence.29.htm">Serialization (Object Persistence)</A></P>



<H2><A NAME="_core_the_data.92.s_role_in_serialization"></A>The Data's Role in Serialization</H2>

<P>In general, class-type data should be able to serialize itself. That is, when you pass an object to an archive, the object should know how to write itself to the archive and how to read itself from the archive. MFC provides support for making classes serializable in this way. If you design a class to define a data type and you intend to serialize data of that type, design for serialization. </P>
</font>
</BODY>
</HTML>
