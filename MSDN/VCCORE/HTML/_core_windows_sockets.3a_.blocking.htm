<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows Sockets: Blocking</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addpf_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CAsyncSocket">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CSocket">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.GetLastError">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnReceive">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CAsyncSocket">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CSocket">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnSend">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_windows_sockets.3a_.blocking"></A>Windows Sockets: Blocking</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_windows_sockets_for_network_programming.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_windows_sockets_tasks.htm">How Do I</A>  |&nbsp; <A HREF="_core_windows_sockets_sample_list.htm">Sample</A></P>

<P>This article and two companion articles explain several issues in Windows Sockets programming. This article covers blocking. The other issues are covered in the articles: <A HREF="_core_windows_sockets.3a_.byte_ordering.htm">Windows Sockets: Byte Ordering</A> and <A HREF="_core_windows_sockets.3a_.converting_strings.htm">Windows Sockets: Converting Strings</A>. </P>

<P>If you use or derive from class <A HREF="JavaScript:hhobj_2.Click()">CAsyncSocket</A>, you will need to manage these issues yourself. If you use or derive from class <A HREF="JavaScript:hhobj_3.Click()">CSocket</A>, MFC manages them for you. </P>

<H2>Blocking</H2>

<P>A socket can be in “blocking mode” or “nonblocking mode.” The functions of sockets in blocking (or synchronous) mode do not return until they can complete their action. This is called blocking because the socket whose function was called can’t do anything — is blocked — until the call returns. A call to the <B>Receive</B> member function, for example, might take an arbitrarily long time to complete as it waits for the sending application to send (this is if you are using <B>CSocket</B>, or using <B>CAsyncSocket</B> with blocking). If a <B>CAsyncSocket</B> object is in nonblocking mode (operating asynchronously), the call returns immediately and the current error code, retrievable with the <A HREF="JavaScript:hhobj_4.Click()">GetLastError</A> member function, is <B>WSAEWOULDBLOCK</B>, indicating that the call would have blocked had it not returned immediately because of the mode. (<B>CSocket</B> never returns <B>WSAEWOULDBLOCK</B>. The class manages blocking for you.)</P>

<P>The behavior of sockets is different under Windows 95 and Windows NT than under Windows 3.1 (16 bit). Unlike Windows 3.1, both Windows 95 and Windows NT use preemptive multitasking and provide multithreading. Under these 32-bit operating systems, you can put your sockets in separate worker threads. A socket in a thread can block without interfering with other activities in your application and without spending compute time on the blocking. For information on multithreaded programming, see the article <A HREF="_core_multithreading_topics.htm">Multithreading</A>. </P>

<P class=indent><B><B>Note</B></B>&nbsp;&nbsp;&nbsp;In multithreaded applications, you can use the blocking nature of <B>CSocket</B> to simplify your program’s design without affecting the responsiveness of the user interface. By handling user interactions in the main thread and <B>CSocket</B> processing in alternate threads, you can separate these logical operations. In an application that is not multithreaded, these two activities must be combined and handled as a single thread, which usually means using <B>CAsyncSocket</B> so you can handle communications requests on demand, or overriding <B>CSocket::OnMessagePending</B> to handle user actions during lengthy synchronous activity.</P>

<P>The rest of this discussion is for programmers targeting Windows 3.1.</P>

<P>Normally, if you’re using <B>CAsyncSocket</B>, you should avoid using blocking operations and operate asynchronously instead. In asynchronous operations, from the point at which you receive a <B>WSAEWOULDBLOCK</B> error code after calling <B>Receive</B>, for example, you wait until your <B>OnReceive</B> member function is called to notify you that you can read again. Asynchronous calls are made by calling back your socket’s appropriate callback notification function, such as <A HREF="JavaScript:hhobj_5.Click()">OnReceive</A>. </P>

<P>Under Windows, blocking calls are considered bad practice. By default, <A HREF="JavaScript:hhobj_6.Click()">CAsyncSocket</A> supports asynchronous calls, and you must manage the blocking yourself using callback notifications. Class <A HREF="JavaScript:hhobj_7.Click()">CSocket</A>, on the other hand, is synchronous. It pumps Windows messages and manages blocking for you.</P>

<P>For more information about blocking, see the Windows Sockets specification. For more information about “On” functions, see the articles <A HREF="_core_windows_sockets.3a_.socket_notifications.htm">Windows Sockets: Socket Notifications</A> and <A HREF="_core_windows_sockets.3a_.deriving_from_socket_classes.htm">Windows Sockets: Deriving from Socket Classes</A>. </P>

<H3>What do you want to know more about?</H3>

<UL type=disc>
	<LI><A HREF="_core_windows_sockets.3a_.using_class_casyncsocket.htm">Windows Sockets: Using Class CAsyncSocket</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.using_sockets_with_archives.htm">Windows Sockets: Using Sockets with Archives</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.background.htm">Windows Sockets: Background</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.stream_sockets.htm">Windows Sockets: Stream Sockets</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.datagram_sockets.htm">Windows Sockets: Datagram Sockets</A> </LI>
</UL>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="JavaScript:hhobj_8.Click()">CAsyncSocket::OnSend</A></P>
</font>
</BODY>
</HTML>
