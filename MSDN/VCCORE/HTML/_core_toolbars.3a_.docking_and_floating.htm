<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Toolbars: Docking and Floating</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addui_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_gs_edit_scribble.27.s_toolbar">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_SAMPLE_mfc_DOCKTOOL">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CFrameWnd.3a3a.EnableDocking">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CControlBar.3a3a.EnableDocking">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CFrameWnd.3a3a.FloatControlBar">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CFrameWnd.3a3a.DockControlBar">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CFrameWnd.3a3a.FloatControlBar">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CToolBar.3a3a.Create">
</OBJECT>
<OBJECT ID="hhobj_10" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CToolBar.3a3a.GetButtonStyle">
</OBJECT>
<OBJECT ID="hhobj_11" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_sample_mfc_DOCKTOOL">
</OBJECT>
<OBJECT ID="hhobj_12" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CControlBar">
</OBJECT>
<OBJECT ID="hhobj_13" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CToolBar">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_toolbars.3a_.docking_and_floating"></A>Toolbars: Docking and Floating</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_toolbars.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_toolbar_tasks.htm">How Do I</A>  |&nbsp; <A HREF="_core_toolbar_sample_list.htm">Sample</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Tutorial</A></P>

<P>The Microsoft Foundation Class Library supports dockable toolbars. A dockable toolbar can be attached, or docked, to any side of its parent window, or it can be detached, or floated,&nbsp; in its own mini-frame window. This article explains how to use dockable toolbars in your applications.</P>

<P>If you use AppWizard to generate the skeleton of your application, you are asked to choose whether you want dockable toolbars. By default, AppWizard generates the code that performs the three actions necessary to place a dockable toolbar in your application: 

<UL type=disc>
	<LI><A HREF="#_core_enabling_docking_in_a_frame_window">Enable docking for the frame window</A>.<BR><BR></LI>

	<LI><A HREF="#_core_enabling_docking_for_a_toolbar">Enable docking for the toolbar</A>.<BR><BR></LI>

	<LI><A HREF="#_core_docking_the_toolbar">Dock the toolbar to the frame window</A>.</LI>
</UL>

<P>If any of these steps are missing, your application will display a standard toolbar. The last two steps must be performed for each dockable toolbar in your application.</P>

<P>Other topics covered in this article include:

<UL type=disc>
	<LI><A HREF="#_core_floating_the_toolbar">Floating the toolbar</A><BR><BR></LI>

	<LI><A HREF="#_core_dynamically_resizing_the_toolbar">Dynamically resizing the toolbar</A><BR><BR></LI>

	<LI><A HREF="#_core_setting_wrap_positions_for_a_fixed.2d.style_toolbar">Setting wrap positions for a fixed-style toolbar</A></LI>
</UL>

<P>See the MFC General sample <A HREF="JavaScript:hhobj_3.Click()">DOCKTOOL</A> for examples.</P>



<H2><A NAME="_core_enabling_docking_in_a_frame_window"></A>Enabling Docking in a Frame Window</H2>

<P>To dock toolbars to a frame window, the frame window (or destination) must be enabled to allow docking. This is done using the <A HREF="JavaScript:hhobj_4.Click()">CFrameWnd::EnableDocking</A> function, which takes one <B>DWORD</B> parameter that is a set of style bits indicating which side of the frame window accepts docking. If a toolbar is about to be docked and there are multiple sides that it could be docked to, the sides indicated in the parameter passed to <B>EnableDocking</B> are used in the following order: top, bottom, left, right. If you want to be able to dock control bars anywhere, pass <B>CBRS_ALIGN_ANY</B> to <B>EnableDocking</B>.</P>



<H2><A NAME="_core_enabling_docking_for_a_toolbar"></A>Enabling Docking for a Toolbar</H2>

<P>After you have prepared the destination for docking, you must prepare the toolbar (or source) in a similar fashion. Call <A HREF="JavaScript:hhobj_5.Click()">CControlBar::EnableDocking</A> for each toolbar you want to dock, specifying the destination sides to which the toolbar should dock. If none of the sides specified in the call to <B>CControlBar::EnableDocking</B> match the sides enabled for docking in the frame window, the toolbar cannot dock — it will float. Once it has been floated, it remains a floating toolbar, unable to dock to the frame window.</P>

<P>If the effect you want is a permanently floating toolbar, call <B>EnableDocking</B> with a parameter of 0. Then call <A HREF="JavaScript:hhobj_6.Click()">CFrameWnd::FloatControlBar</A>. The toolbar remains floating, permanently unable to dock anywhere.</P>



<H2><A NAME="_core_docking_the_toolbar"></A>Docking the Toolbar</H2>

<P>The framework calls <A HREF="JavaScript:hhobj_7.Click()">CFrameWnd::DockControlBar</A> when the user attempts to drop the toolbar on a side of the frame window that allows docking. </P>

<P>In addition, you can call this function at any time to dock control bars to the frame window. This is normally done during initialization. More than one toolbar can be docked to a particular side of the frame window.</P>



<H2><A NAME="_core_floating_the_toolbar"></A>Floating the Toolbar</H2>

<P>Detaching a dockable toolbar from the frame window is called floating the toolbar. Call <A HREF="JavaScript:hhobj_8.Click()">CFrameWnd::FloatControlBar</A> to do this. Specify the toolbar to be floated, the point where it should be placed, and an alignment style that determines whether the floating toolbar is horizontal or vertical.</P>

<P>The framework calls this function when a user drags a toolbar off its docked location and drops it in a location where docking is not enabled. This can be anywhere inside or outside the frame window. As with <B>DockControlBar</B>, you can also call this function during initialization.</P>

<P>The MFC implementation of dockable toolbars does not provide some of the extended features found in some applications that support dockable toolbars. Features such as customizable toolbars are not provided.</P>



<H2><A NAME="_core_dynamically_resizing_the_toolbar"></A>Dynamically Resizing the Toolbar</H2>

<P>As of Visual C++ version 4.0, you can make it possible for users of your application to resize floating toolbars dynamically. Typically, a toolbar has a long, linear shape, displayed horizontally. But you can change the toolbar’s orientation and its shape. For example, when the user docks a toolbar against one of the vertical sides of the frame window, the shape changes to a vertical layout. It’s also possible to reshape the toolbar into a rectangle with multiple rows of buttons.</P>

<P>You can:

<UL type=disc>
	<LI>Specify dynamic sizing as a toolbar characteristic.<BR><BR></LI>

	<LI>Specify fixed sizing as a toolbar characteristic.</LI>
</UL>

<P>To provide this support, there are two new toolbar styles for use in your calls to the <A HREF="JavaScript:hhobj_9.Click()">CToolBar::Create</A> member function. They are

<UL type=disc>
	<LI><B>CBRS_SIZE_DYNAMIC</B>&nbsp;&nbsp;&nbsp;Control bar is dynamic.<BR><BR></LI>

	<LI><B>CBRS_SIZE_FIXED</B>&nbsp;&nbsp;&nbsp;Control bar is fixed.</LI>
</UL>

<P>The size dynamic style lets your user resize the toolbar while it is floating, but not while it is docked. The toolbar “wraps” where needed to change shape as the user drags its edges.</P>

<P>The size fixed style preserves the wrap states of a toolbar, fixing the position of the buttons in each column. Your application’s user can’t change the shape of the toolbar. The toolbar wraps at designated places, such as the locations of separators between the buttons. It maintains this shape whether the toolbar is docked or floating. The effect is a fixed palette with multiple columns of buttons.</P>

<P>You can also use <A HREF="JavaScript:hhobj_10.Click()">CToolBar::GetButtonStyle</A> to return a state and style for buttons on your toolbars. A button’s style determines how the button appears and how it responds to user input; the state tells whether the button is in a wrapped state.</P>



<H2><A NAME="_core_setting_wrap_positions_for_a_fixed.2d.style_toolbar"></A>Setting Wrap Positions for a Fixed-Style Toolbar</H2>

<P>For a toolbar with the size fixed style, designate toolbar button indexes at which the toolbar will wrap. The following code shows how to do this in your main frame window’s <CODE>OnCreate</CODE> override:</P>

<PRE><CODE>// Get the style of the first button separator
UINT nStyle = m_wndToolBar-&gt;GetButtonStyle( 3 );
// Augment the state for wrapping
nStyle |= TBBS_WRAPPED;
m_wndToolBar-&gt;SetButtonStyle( 3, nStyle );

// Do the same for other wrap locations ...

// Set the bar style to size fixed
m_wndToolBar-&gt;SetBarStyle(m_wndToolBar-&gt;GetBarStyle() |
       CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_FIXED);

// Call docking/floating functions as needed ...
</CODE></PRE>

<P>The MFC General sample <A HREF="JavaScript:hhobj_11.Click()">DOCKTOOL</A> shows how to use member functions of classes <A HREF="JavaScript:hhobj_12.Click()">CControlBar</A> and <A HREF="JavaScript:hhobj_13.Click()">CToolBar</A> to manage dynamic layout of a toolbar. See the file EDITBAR.CPP in DOCKTOOL.</P>

<H3>What do you want to know more about?</H3>

<UL type=disc>
	<LI><A HREF="_core_toolbars.3a_.fundamentals.htm">Toolbar fundamentals</A><BR><BR></LI>

	<LI><A HREF="_core_toolbars.3a_.tool_tips.htm">Toolbar tool tips</A><BR><BR></LI>

	<LI><A HREF="_core_toolbars.3a_.using_your_old_toolbars.htm">Using your old toolbars</A></LI>
</UL>
</font>
</BODY>
</HTML>
