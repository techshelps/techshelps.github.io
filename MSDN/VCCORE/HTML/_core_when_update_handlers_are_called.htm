<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>When Update Handlers Are Called</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addui_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CFrameWnd.3a3a.m_bAutoMenuEnable">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_when_update_handlers_are_called"></A>When Update Handlers Are Called</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_menus.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_menu_tasks.htm">How Do I</A>  |&nbsp; <A HREF="_core_menu_sample_list.htm">Sample</A></P>

<P>Suppose the user clicks the mouse in the File menu, which generates a <B>WM_INITMENUPOPUP</B> message. The framework’s update mechanism collectively updates all items on the File menu before the menu drops down so the user can see it.</P>

<P>To do this, the framework routes update commands for all menu items in the pop-up menu along the standard command routing. Command targets on the routing have an opportunity to update any menu items by matching the update command with an appropriate message-map entry (of the form <B>ON_UPDATE_COMMAND_UI</B>) and calling an “update handler” function. Thus, for a menu with six menu items, six update commands are sent out. If an update handler exists for the command ID of the menu item, it is called to do the updating. If not, the framework checks for the existence of a handler for that command ID and enables or disables the menu item as appropriate.</P>

<P>If the framework does not find an <B>ON_UPDATE_COMMAND_UI</B> entry during command routing, it automatically enables the user-interface object if there is an <B>ON_COMMAND</B> entry somewhere with the same command ID. Otherwise, it disables the user-interface object. Therefore, to ensure that a user-interface object is enabled, supply a handler for the command the object generates or supply an update handler for it. See the figure in the topic <A HREF="_core_user.2d.interface_objects_and_command_ids.htm">User-Interface Objects and Command IDs</A>. </P>

<P>It is possible to disable the default disabling of user-interface objects. For more information, see the <A HREF="JavaScript:hhobj_2.Click()">m_bAutoMenuEnable</A> member of class <B>CFrameWnd</B> in the <I>Class Library Reference</I>. </P>

<P>Menu initialization is automatic in the framework, occurring when the application receives a <B>WM_INITMENUPOPUP</B> message. During the idle loop, the framework searches the command routing for button update handlers in much the same way as it does for menus. </P>
</font>
</BODY>
</HTML>
