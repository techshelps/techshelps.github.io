<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How Can I Tell If Ad-Hoc Updates to SQL Server System Catalogs Are Required?</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="vceditions">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_how_can_i_tell_if_ad.2d.hoc_updates_to_sql_server_system_catalogs_are_required.3f"></A>How Can I Tell If Ad-Hoc Updates to SQL Server System Catalogs Are Required?</H1>

<P class=indent><B><B>Feature Only in Enterprise Edition</B></B>&nbsp;&nbsp;&nbsp;This feature is supported only in Visual C++ Enterprise Edition. For more information, see <A HREF="JavaScript:hhobj_1.Click()">Visual C++ Editions</A>.</P>

<P>Certain stored procedures that ship with Microsoft SQL Server directly modify the system catalogs. By default, SQL Server does not allow such ad-hoc updates to system catalogs. If you try to edit and save one of these stored procedures in a database that does not allow ad-hoc updates, the following may occur:

<UL type=disc>
	<LI>You edit a stored procedure such as sp_bindefault (that resides in the master database and performs ad-hoc updates to the system catalog). When you save the procedure, you receive the following error message: PROCEDURE: sp_bindefault 3700[Microsoft][ODBC SQL Server Driver][SQL Server] Ad-hoc updates to the system catalogs not enabled. <BR><BR></LI>

	<LI>Visual C++ Enterprise Edition attempts to add the altered stored procedure you have edited. This operation fails, because the execution plan generated for this stored procedure will alter system catalogs, and by default, SQL Server prevents this.
<P class=tl>Because of the way Visual C++ updates the stored procedure, the database no longer contains this stored procedure; it has been deleted. You still have the text of the altered stored procedure, however, and can recover from this situation. You still have the local copy of the stored procedure, and after your system administrator alters the defaults on the database, you can save it.</P></LI>
</UL>

<P class=indent><B><B>Note</B></B>&nbsp;&nbsp;&nbsp;Do not refresh from the database at this point.</P>

<P>To fix the problem so that you can edit the stored procedure and alter the system catalogue, your System Administrator must reconfigure the system catalogs. You can contact your database administrator and request that the database be reconfigured to allow ad-hoc updates of the system catalogs. The database administrator can change the default setting by running the following script:</P>

<PRE><CODE>sp_configure 'allow updates',1
go
reconfigure with override
</CODE></PRE>

<P>or by running the following ad-hoc statements:</P>

<PRE><CODE>exec sp_configure 'allow updates',1
go
reconfigure with override
</CODE></PRE>

<P>These statements permit ad-hoc modifications to stored procedures that alter system catalogs.</P>

<P>For more information, see “Error 259” in Chapter 25 “Handling Error Messages” of Part 8 “Troubleshooting” in Administrator’s Companion in the SQL Server online documentation.</P>
</font>
</BODY>
</HTML>
