<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Collections: Creating Stack and Queue Collections</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addpf_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_Sample_mfc_collect">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="Scribble start">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_collections.3a_.creating_stack_and_queue_collections"></A>Collections: Creating Stack and Queue Collections</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_collections.2c_.working_with_aggregate_data.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_collection_class_tasks.htm">How Do I</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Sample</A>  |&nbsp; <A HREF="JavaScript:hhobj_3.Click()">Tutorial</A></P>

<P>This article explains how to create other data structures, such as <A HREF="#_core_stacks">stacks</A> and <A HREF="#_core_queues">queues</A>, from MFC list classes. The examples use classes derived from <B>CList</B>, but you can use <B>CList</B> directly unless you need to add functionality.</P>



<H2><A NAME="_core_stacks"></A>Stacks</H2>

<P>Because the standard list collection has both a head and a tail, it is easy to create a derived list collection that mimics the behavior of a last-in-first-out stack. A stack is like a stack of trays in a cafeteria. As trays are added to the stack, they go on top of the stack. The last tray added is the first to be removed. The list collection member functions <B>AddHead</B> and <B>RemoveHead</B> can be used to add and remove elements specifically from the head of the list; thus, the most recently added element is the first to be removed.</P>

<P class=label><B>To create a stack collection</B>

<UL type=disc>
	<LI>Derive a new list class from one of the existing MFC list classes and add more member functions to support the functionality of stack operations.
<P class=tl>The following example shows how to add member functions to push elements on to the stack, peek at the top element of the stack, and pop the top element from the stack:</P>
<PRE><CODE>class CTray : public CObject { ... };

class CStack : public CTypedPtrList&lt; CObList, CTray* &gt;
{
public:
    // Add element to top of stack
    void Push( CTray* newTray )
        { AddHead( newTray ); }

    // Peek at top element of stack
    CTray* Peek()
        { return IsEmpty() ? NULL : GetHead(); }

    // Pop top element off stack
    CTray* Pop()
        { return RemoveHead(); }
};
</CODE></PRE>
</LI>
</UL>

<P>Note that this approach exposes the underlying <B>CObList</B> class. The user can call any <B>CObList</B> member function, whether it makes sense for a stack or not.</P>



<H2><A NAME="_core_queues"></A>Queues</H2>

<P>Because the standard list collection has both a head and a tail, it is also easy to create a derived list collection that mimics the behavior of a first-in-first-out queue. A queue is like a line of people in a cafeteria. The first person in line is the first to be served. As more people come, they go to the end of the line to wait their turn. The list collection member functions <B>AddTail</B> and <B>RemoveHead</B> can be used to add and remove elements specifically from the head or tail of the list; thus, the most recently added element is always the last to be removed.</P>

<P class=label><B>To create a queue collection</B>

<UL type=disc>
	<LI>Derive a new list class from one of the predefined list classes provided with the Microsoft Foundation Class Library and add more member functions to support the semantics of queue operations.
<P class=tl>The following example shows how you can append member functions to add an element to the end of the queue and get the element from the front of the queue.</P>
<PRE><CODE>class CPerson : public CObject { ... };

class CQueue : public CTypedPtrList&lt; CObList, CPerson* &gt;
{ 
public:
    // Go to the end of the line
    void AddToEnd( CPerson* newPerson )
        { AddTail( newPerson ); }        // End of the queue

    // Get first element in line
    CPerson* GetFromFront()
        { return IsEmpty() ? NULL : RemoveHead(); }
}; 
</CODE></PRE>
</LI>
</UL>
</font>
</BODY>
</HTML>
