<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Build Settings for an MFC DLL</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_begin_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="MFC Samples">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="building">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_build_settings_for_an_mfc_dll"></A>Build Settings for an MFC DLL</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_overview.3a_.creating_an_mfc_dll.htm">Overview</A>  |&nbsp; <A HREF="_core_build_settings_generated_when_you_create_a_visual_c.2b2b_.program.htm">How Do I</A>  |&nbsp; <A HREF="_core_details.3a_.beginning_your_program.htm">Details</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Sample</A></P>

<P>The project settings that the MFC AppWizard (DLL version) sets for DLLs are almost the same as for the MFC AppWizard (EXE version). The following table describes the compiler options and preprocessor defines that the MFC AppWizard sets that distinguishes DLLs from EXEs and distinguishes each kind of MFC DLL from each other.</P>

<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=26%><B>Kind of DLL</B></TD>
<TD class=label width=37%><B>Compiler options</B></TD>
<TD class=label width=37%><B>Preprocessor defines</B></TD>
</TR>

<TR VALIGN="top">
<TD width=26%>Regular, statically linked to MFC</TD>
<TD width=37%><A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/MT</A> or <A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/MTd</A></TD>
<TD width=37%>_WINDLL<BR>
_USRDLL</TD>
</TR>

<TR VALIGN="top">
<TD width=26%>Regular, using the shared MFC DLL</TD>
<TD width=37%><A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/ML</A> or <A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/MLd</A></TD>
<TD width=37%>_WINDLL<BR>
_USRDLL<BR>
_AFXDLL<BR>
</TD>
</TR>

<TR VALIGN="top">
<TD width=26%>Extension DLL</TD>
<TD width=37%><A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/MD</A> or <A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/MDd</A></TD>
<TD width=37%>_WINDLL<BR>
_AFXDLL<BR>
_AFXEXT<BR>
</TD>
</TR>
</TABLE><BR>

<P>The preprocessor defines identify the kind of MFC DLL that you are building. The /<B>MD</B>, /<B>MT</B>, and /<B>ML</B> options determine whether the DLL being built has single-thread support (/<B>MD</B>), multithread support (/<B>MT</B>), or uses the shared MFC DLL (<B>/ML</B>) option.</P>

<P>It is usually best to use the MFC AppWizard (DLL version) default option /<B>MD</B> or /<B>MT</B> when building a DLL. These options support multithread applications. When you specify the /<B>ML</B> option, your DLL will work only when called by single-thread applications. A multithread application that calls a DLL without multithread awareness is likely to fail. Therefore, don’t specify the /<B>ML</B> option unless you know that it will be used only by single-thread applications.</P>

<P>The MFC AppWizard (DLL version) sets the Link option <A HREF="_core_.2f.md.2c_2f.ml.2c_2f.mt.2c_2f.ld.htm">/DLL</A> for all three kinds of MFC DLLs. The /DLL option causes the linker to build a DLL and do the following:

<UL type=disc>
	<LI>Look for the <B>DllMain</B> function in the source code.<BR><BR></LI>

	<LI>Link with DLL startup code that performs some initialization for you.<BR><BR></LI>

	<LI>Produce an import library for applications using your DLL to link with.</LI>
</UL>

<P>Note that the MFC AppWizard (DLL version) does not set the <A HREF="_core_.2f.def.htm">/DEF</A> option; this option is for use only on the command line. If a .DEF has been added to the project, the linker will use it automatically.</P>

<H3>What do you want to do?</H3>

<UL type=disc>
	<LI><A HREF="_core_dlls.3a_.overview.htm">Learn more about DLLs</A><BR><BR></LI>

	<LI><A HREF="_core_overview.3a_.creating_an_mfc_dll.htm">Create an MFC DLL</A><BR><BR></LI>

	<LI><A HREF="_core_classes_and_functions_appwizard_generates_for_mfc_dlls.htm">Learn about the classes and functions AppWizard generates for MFC DLLs</A><BR><BR></LI>

	<LI><A HREF="JavaScript:hhobj_3.Click()">Learn how to build my program</A></LI>
</UL>
</font>
</BODY>
</HTML>
