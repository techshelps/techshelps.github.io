<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Windows Sockets: Deriving from Socket Classes</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addpf_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CAsyncSocket">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_MFC_CSocket">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnReceive">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnSend">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnAccept">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnConnect">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CAsyncSocket.3a3a.OnClose">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CSocket.3a3a.OnMessagePending">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_windows_sockets.3a_.deriving_from_socket_classes"></A>Windows Sockets: Deriving from Socket Classes</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_windows_sockets_for_network_programming.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_windows_sockets_tasks.htm">How Do I</A>  |&nbsp; <A HREF="_core_windows_sockets_sample_list.htm">Sample</A></P>

<P>This article describes some of the functionality you can gain by deriving your own class from one of the socket classes.</P>

<P>You can derive your own socket classes from either <A HREF="JavaScript:hhobj_2.Click()">CAsyncSocket</A> or <A HREF="JavaScript:hhobj_3.Click()">CSocket</A> to add your own functionality. In particular, these classes supply a number of virtual member functions that you can override. These functions include <A HREF="JavaScript:hhobj_4.Click()">OnReceive</A>, <A HREF="JavaScript:hhobj_5.Click()">OnSend</A>, <A HREF="JavaScript:hhobj_6.Click()">OnAccept</A>, <A HREF="JavaScript:hhobj_7.Click()">OnConnect</A>, and <A HREF="JavaScript:hhobj_8.Click()">OnClose</A>. You can override the functions in your derived socket class to take advantage of the notifications they provide when network events occur. The framework calls these notification callback functions to notify you of important socket events, such as the receipt of data that you can begin reading. For more information about notification functions, see <A HREF="_core_windows_sockets.3a_.socket_notifications.htm">Windows Sockets: Socket Notifications</A>. For an illustration of overriding the notification functions, see the CHATTER and CHATSRVR sample applications.&nbsp; </P>

<P>Additionally, class <B>CSocket</B> supplies the <A HREF="JavaScript:hhobj_9.Click()">OnMessagePending</A> member function (an advanced overridable). MFC calls this function while the socket is pumping Windows-based messages. You can override <B>OnMessagePending</B> to look for particular messages from Windows and respond to them. </P>

<P>The default version of <B>OnMessagePending</B> supplied in class <B>CSocket</B> examines the message queue for <B>WM_PAINT</B> messages while waiting for a blocking call to complete. It dispatches paint messages in order to improve display quality. Aside from doing something useful, this illustrates one way you might override the function yourself. As another example, consider using <B>OnMessagePending</B> for the following task. Suppose you display a modeless dialog box while waiting for a network transaction to complete. The dialog box contains a Cancel button that the user can use to cancel blocking transactions that take too long. Your <CODE>OnMessagePending</CODE> override might pump messages related to this modeless dialog box.</P>

<P>In your <CODE>OnMessagePending</CODE> override, return either <B>TRUE</B> or the return from a call to the base-class version of <B>OnMessagePending</B>. Call the base-class version if it performs work that you still want done.</P>

<H3>What do you want to know more about?</H3>

<UL type=disc>
	<LI><A HREF="_core_windows_sockets.3a_.using_sockets_with_archives.htm">Windows Sockets: Using Sockets with Archives</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.using_class_casyncsocket.htm">Windows Sockets: Using Class CAsyncSocket</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.blocking.htm">Windows Sockets: Blocking</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.byte_ordering.htm">Windows Sockets: Byte Ordering</A><BR><BR></LI>

	<LI><A HREF="_core_windows_sockets.3a_.converting_strings.htm">Windows Sockets: Converting Strings</A></LI>
</UL>
</font>
</BODY>
</HTML>
