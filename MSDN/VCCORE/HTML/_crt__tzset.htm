<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>_tzset</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_crt__tzset"></A><SUP></SUP>_tzset</H1>

<P>Sets time environment variables.</P>

<P><B>void</B> <B>_tzset(</B> <B>void</B> <B>);</B></P>

<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=16%><B>Routine</B></TD>
<TD class=label width=26%><B>Required Header</B></TD>
<TD class=label width=58%><B>Compatibility</B></TD>
</TR>

<TR VALIGN="top">
<TD width=16%><B>_tzset</B></TD>
<TD width=26%>&lt;time.h&gt;</TD>
<TD width=58%>Win 95, Win NT</TD>
</TR>
</TABLE><BR>

<P>For additional compatibility information, see <A HREF="_crt_compatibility.htm">Compatibility</A> in the Introduction.</P>

<P class=label><B>Libraries</B></P>

<TABLE border=1 cellpadding=5 cols=2 frame=below rules=rows>

<TR VALIGN="top">
<TD width=24%>LIBC.LIB</TD>
<TD width=76%>Single thread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>LIBCMT.LIB</TD>
<TD width=76%>Multithread static library, retail version</TD>
</TR>

<TR VALIGN="top">
<TD width=24%>MSVCRT.LIB</TD>
<TD width=76%>Import library for MSVCRT.DLL, retail version</TD>
</TR>
</TABLE><BR>

<P class=label><B>Return Value</B></P>

<P>None</P>

<P class=label><B>Remarks</B></P>

<P>The <B>_tzset</B> function uses the current setting of the environment variable <B>TZ</B> to assign values to three global variables: <B>_daylight</B>, <B>_timezone</B>, and <B>_tzname</B>. These variables are used by the <A HREF="_crt__ftime.htm">_ftime</A> and <A HREF="_crt_localtime.htm">localtime</A> functions to make corrections from coordinated universal time (UTC) to local time, and by the <B>time</B> function to compute UTC from system time. Use the following syntax to set the <B>TZ</B> environment variable:</P>

<P><B>set TZ</B>=<I>tzn</I>[+ | –]<I>hh</I>[<B>:</B><I>mm</I>[<B>:</B><I>ss</I>] ][<I>dzn</I>]</P>

<P class=dt><I>tzn</I></P>

<P class=indent>Three-letter time-zone name, such as PST. You must specify the correct offset from local time to UTC.</P>

<P class=dt><I>hh</I></P>

<P class=indent>Difference in hours between UTC and local time. Optionally signed.</P>

<P class=dt><I>mm</I></P>

<P class=indent>Minutes. Separated from <I>hh</I> by a colon (<B>:</B>).</P>

<P class=dt><I>ss</I></P>

<P class=indent>Seconds. Separated from <I>mm</I> by a colon (<B>:</B>).</P>

<P class=dt><I>dzn</I></P>

<P class=indent>Three-letter daylight-saving-time zone such as PDT. If daylight saving time is never in effect in the locality, set <B>TZ</B> without a value for <I>dzn.</I> The C run-time library assumes the United States’s rules for implementing the calculation of Daylight Saving Time (DST). </P>

<P>For example, to set the <B>TZ</B> environment variable to correspond to the current time zone in Germany, you can use one of the following statements:</P>

<PRE><CODE>set TZ=GST-1GDT
set TZ=GST+1GDT
</CODE></PRE>

<P>These strings use GST to indicate German standard time, assume that Germany is one hour ahead of UTC, and assume that daylight savings time is in effect.</P>

<P>If the <B>TZ</B> value is not set, <B>_tzset</B> attempts to use the time zone information specified by the operating system. Under Windows NT and Windows 95, this information is specified in the Control Panel’s Date/Time application. If <B>_tzset</B> cannot obtain this information, it uses PST8PDT by default, which signifies the Pacific time zone. </P>

<P>Based on the <B>TZ</B> environment variable value, the following values are assigned to the global variables <B>_daylight</B>, <B>_timezone</B>, and <B>_tzname</B> when <B>_tzset</B> is called:</P>

<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD class=label width=21%><B>Global Variable</B></TD>
<TD class=label width=55%><B>Description</B></TD>
<TD class=label width=24%><B>Default Value</B></TD>
</TR>

<TR VALIGN="top">
<TD width=21%><B>_daylight</B></TD>
<TD width=55%>Nonzero value if a daylight-saving-time zone is specified in <B>TZ</B> setting; otherwise, 0</TD>
<TD width=24%>1</TD>
</TR>

<TR VALIGN="top">
<TD width=21%><B>_timezone</B></TD>
<TD width=55%>Difference in seconds between UTC and local time.</TD>
<TD width=24%>28800 (28800 seconds equals 8 hours)</TD>
</TR>

<TR VALIGN="top">
<TD width=21%><B>_tzname</B>[0]</TD>
<TD width=55%>String value of time-zone name from <B>TZ</B> environmental variable; empty if <B>TZ</B> has not been set</TD>
<TD width=24%>PST</TD>
</TR>

<TR VALIGN="top">
<TD width=21%><B>_tzname</B>[1]</TD>
<TD width=55%>String value of daylight-saving-time zone; empty if daylight-saving-time zone is omitted from <B>TZ</B> environmental variable</TD>
<TD width=24%>PDT</TD>
</TR>
</TABLE><BR>

<P>The default values shown in the preceding table for <B>_daylight</B> and the <B>_tzname</B> array correspond to “PST8PDT.” If the DST zone is omitted from the <B>TZ</B> environmental variable, the value of <B>_daylight</B> is 0 and the <B>_ftime</B>, <B>gmtime</B>, and <B>localtime</B> functions return 0 for their DST flags. </P>

<P class=label><B>Example</B></P>

<PRE><CODE>/* TZSET.C: This program first sets up the time zone by
 * placing the variable named TZ=EST5 in the environment
 * table. It then uses _tzset to set the global variables
 * named _daylight, _timezone, and _tzname.
 */

#include &lt;time.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

void main( void )
{
   if( _putenv( "TZ=EST5EDT" ) == -1 )
   {
      printf( "Unable to set TZ\n" );
      exit( 1 );
   }
   else
   {
      _tzset();
      printf( "_daylight = %d\n", _daylight );
      printf( "_timezone = %ld\n", _timezone );
      printf( "_tzname[0] = %s\n", _tzname[0] );
   }
   exit( 0 );
}

</CODE></PRE>

<P class=label><B>Output</B></P>

<PRE><CODE>_daylight = 1
_timezone = 18000
_tzname[0] = EST

</CODE></PRE>

<P><A HREF="_crt_time_management.htm">Time Management Routines</A></P>

<P><B>See Also</B>&nbsp;&nbsp;&nbsp;<A HREF="_crt_asctime.2c_._wasctime.htm">asctime</A>, <A HREF="_crt__ftime.htm">_ftime</A>, <A HREF="_crt_gmtime.htm">gmtime</A>, <A HREF="_crt_localtime.htm">localtime</A>, <A HREF="_crt_time.htm">time</A>, <A HREF="_crt__utime.2c_._wutime.htm">_utime</A></P>
</font>
</BODY>
</HTML>
