<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Defining a Message Handler for a Reflected Message</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addpf_home">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="Scribble start">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CWnd.3a3a.SendMessage">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_defining_a_message_handler_for_a_reflected_message"></A>Defining a Message Handler for a Reflected Message</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_working_with_classes.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_working_with_classes_tasks.htm">How Do I</A>  |&nbsp; <A HREF="JavaScript:hhobj_2.Click()">Tutorial</A></P>

<P>Once you have created a new MFC control class, you can use either ClassWizard or WizardBar to define message handlers for it. Reflected message handlers allow your control class to handle its own messages before the message is received by the parent. You can use the MFC <A HREF="JavaScript:hhobj_3.Click()">CWnd::SendMessage</A> function to send messages from your control to a parent window.</P>

<P>With this functionality you could, for example, create a list box that will redraw itself rather than relying on the parent window to do so (owner drawn). For more information on reflected messages, see <A HREF="_core_handling_reflected_messages.htm">Handling Reflected Messages</A>. To create an <A HREF="_core_activex_controls.htm">ActiveX control</A> with the same functionality, you would have to create a project for the ActiveX control.</P>

<P class=label><B>To define a message handler for a reflected message with ClassWizard</B>

<OL>
	<LI>in ClassWizard, click the <B>Message Maps</B> tab.<BR><BR></LI>

	<LI>From the <B>Class name</B> drop-down list, select the name of your control class.<BR><BR></LI>

	<LI>In the <B>Object IDs</B> box, select the name of your control class.<BR><BR></LI>

	<LI>In the <B>Messages</B> box, select the message for which you want to define a handler. Your class's reflected messages are marked with an equal sign (=).
<P class=tl>A message with a handler already defined is displayed in bold.</P>
<P class=atl><B><B>Tip</B></B>&nbsp;&nbsp;&nbsp;Selecting a message displays a brief description of it at the bottom of the <B>MFC ClassWizard</B> dialog box.</p></LI>

	<LI>Click <B>Add Function</B> (or double-click the message name). 
<P class=tl>For messages that do not already have a predefined name for the handler function, the Add Member Function dialog box appears.</P></LI>

	<LI>Click <B>OK</B> to accept the proposed name.
<P class=tl>ClassWizard reappears. The message name is displayed in bold to show that a message handler is defined. The name of the new message hander appears in the <B>Member functions</B> box.</P></LI>

	<LI>At this point you have several options. You can:
<UL type=disc>
	<LI>Click <B>Cancel</B> to avoid updating your source code with the selected member functions.<BR><BR></LI>

	<LI>Add more message handlers.<BR><BR></LI>

	<LI>Click <B>OK </B>to automatically update your source code with selected member functions and close ClassWizard. You can return to ClassWizard any time during the development process.<BR><BR></LI>

	<LI>Click <B>Edit Code</B> to jump to the empty function body just created by ClassWizard and begin defining the function's behavior.</LI>
</UL>

<P class=tl>When you click <B>OK</B> or <B>Edit Code</B>, ClassWizard updates your source code as follows:</P>
<UL type=disc>
	<LI>A function declaration is inserted into the header file.<BR><BR></LI>

	<LI>A complete, correct function definition with a skeletal implementation is inserted into the implementation file.<BR><BR></LI>

	<LI>The class's message map is updated to include the new message-handling function.</LI>
</UL>
</LI>
</OL>

<P class=label><B>To define a message handler for a reflected message with WizardBar</B>

<OL>
	<LI>Using WizardBar, select the control class from the <B>Class </B>drop-down list, and click the Action button to navigate to the class's implementation (.cpp) file.<BR><BR></LI>

	<LI>From the Action menu, select <B>Add Windows Message Handler</B>.
<P class=tl>The <B>New Windows Message Handler</B> dialog appears.</P></LI>

	<LI>In <B>Class or object to handle</B>, the name of the control class should be selected.<BR><BR></LI>

	<LI>In the <B>New windows messages </B>box, select the message for which you want to define a handler. A class's reflected messages are marked with an equal sign (=).
<P class=tl>Click <B>Add Handler</B> or <B>Add and Edit</B>. WizardBar updates your source code as follows:</P>
<UL type=disc>
	<LI>A function declaration is inserted into the header file.<BR><BR></LI>

	<LI>A complete, correct function definition with a skeletal implementation is inserted into the implementation file.<BR><BR></LI>

	<LI>The class's message map is updated to include the new message-handling function.</LI>
</UL>

<P class=tl>WizardBar then moves the text-editor's insertion point to the body of the function.</P></LI>
</OL>
</font>
</BODY>
</HTML>
