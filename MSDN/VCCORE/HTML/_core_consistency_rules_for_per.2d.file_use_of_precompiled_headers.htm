<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Consistency Rules for Per-File Use of Precompiled Headers</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_compiling_home">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_consistency_rules_for_per.2d.file_use_of_precompiled_headers"></A><SUP></SUP>Consistency Rules for Per-File Use of Precompiled Headers</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_overviews.3a_.compiling_and_linking.htm">Overview</A>  |&nbsp; <A HREF="_core_set_compiler_options.htm">How Do I</A>  |&nbsp; <A HREF="_core_compiler_reference.htm">Compiler Options</A></P>

<P>When you use a PCH, the compiler assumes the same compilation environment—using consistent compiler options, pragmas, and so on—that was in effect when you created the PCH, unless you specify otherwise. If the compiler detects an inconsistency, it issues a warning and identifies the inconsistency where possible. Such warnings do not necessarily indicate a problem with the PCH; they simply warn you of possible conflicts. The consistency requirements for PCHs are explained in the following list: </P>

<P class=dt><B>Compiler Option Consistency</B></P>

<P class=indent>The following compiler options can trigger an inconsistency warning when using a PCH:

<UL type=disc>
	<LI>Macros created using the Preprocessor (/D) option must be the same between the compilation that created the PCH and the current compilation. The state of defined constants is not checked, but unpredictable results can occur if these change.<BR><BR></LI>

	<LI>PCHs do not work with the /E and /EP options.<BR><BR></LI>

	<LI>PCHs must be created using either the Generate Browse Info (/FR) option or the Exclude Local Variables (/Fr) option before subsequent compilations that use the PCH can use these options. </LI>
</UL>

<P class=dt><B>C 7.0-Compatible (/Z7)</B></P>

<P class=indent>If this option is in effect when the PCH is created, subsequent compilations that use the PCH can use the debugging information.</P>

<P class=tl>If the C 7.0-Compatible (/Z7) option is not in effect when the PCH is created, subsequent compilations that use the PCH and that option trigger a warning. The debugging information is placed in the current .OBJ file, and local symbols defined in the PCH are not available to the debugger.</P>
<P class=dt><B>Include Path Consistency</B></P>

<P class=indent>A PCH does not contain information about the include path that was in effect when it was created. When you use a .PCH file, the compiler always uses the include path specified in the current compilation.</P>

<P class=dt><B>Source File Consistency</B></P>

<P class=indent>When you specify the Use Precompiled Header File (/Yu) option, the compiler ignores all preprocessor directives (including pragmas) that appear in the source code that will be precompiled. The compilation specified by such preprocessor directives must be the same as the compilation used for the Create Precompiled Header File (/Yc) option. </P>

<P class=dt><B>Pragma Consistency</B></P>

<P class=indent>Pragmas processed during the creation of a PCH usually affect the file with which the PCH is subsequently used. The comment and message pragmas do not affect the remainder of the compilation.</P>

<P class=tl>The following pragmas are retained as part of a PCH. They do affect the remainder of a compilation that uses the PCH.</P>
<TABLE border=1 cellpadding=5 cols=3 frame=below rules=rows>

<TR VALIGN="top">
<TD width=30%>alloc_text</TD>
<TD width=35%>include_alias</TD>
<TD width=35%>pack</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>auto_inline</TD>
<TD width=35%>init_seg</TD>
<TD width=35%>pointers_to_members</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>check_stack</TD>
<TD width=35%>inline_depth</TD>
<TD width=35%>setlocale</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>code_seg</TD>
<TD width=35%>inline_recursion</TD>
<TD width=35%>vtordisp</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>data_seg</TD>
<TD width=35%>intrinsic</TD>
<TD width=35%>warning</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>function</TD>
<TD width=35%>optimize</TD>
<TD width=35%>&nbsp;</TD>
</TR>
</TABLE><BR>
</font>
</BODY>
</HTML>
