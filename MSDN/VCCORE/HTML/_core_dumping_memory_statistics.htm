<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dumping Memory Statistics</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_Diagnostic_Services">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_mfc_CMemoryState">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_dumping_memory_statistics"></A>Dumping Memory Statistics</H1>

<P>The <B>CMemoryState</B> member function <B>Difference</B> determines the difference between two memory-state objects. It detects any objects that were not deallocated from the heap between the beginning and end memory-state snapshots.</P>

<P class=label><B><A NAME="_core_to_dump_memory_statistics"></A>To dump memory statistics</B>

<UL type=disc>
	<LI>The following example (continuing the example from the previous topic) shows how to call <B>DumpStatistics</B> to get information about the objects that have not been deallocated:
<PRE><CODE>if( diffMemState.Difference( oldMemState, newMemState ) )
{
    TRACE( "Memory leaked!\n" );
    diffMemState.DumpStatistics();
}
</CODE></PRE>

<P class=tl>A sample dump from the example above is shown here:</P>
<PRE><CODE>0 bytes in 0 Free Blocks
22 bytes in 1 Object Blocks
45 bytes in 4 Non-Object Blocks
Largest number used: 67 bytes
Total allocations: 67 bytes
</CODE></PRE>

<UL type=disc>
	<LI>The first line describes the number of blocks whose deallocation was delayed if <B>afxMemDF</B> was set to <B>delayFreeMemDF</B>. For a description of <B>afxMemDF</B>, see the procedure “To select specific memory diagnostic features with <B>afxMemDF</B>” presented under <A HREF="_core_memory_diagnostics.htm">Memory Diagnostics</A>.<BR><BR></LI>

	<LI>The second line describes how many objects remain allocated on the heap. <BR><BR></LI>

	<LI>The third line describes how many nonobject blocks (arrays or structures allocated with <B>new</B>) were allocated on the heap and not deallocated.<BR><BR></LI>

	<LI>The fourth line gives the maximum memory used by your program at any one time.<BR><BR></LI>

	<LI>The last line lists the total amount of memory used by your program.</LI>
</UL>
</LI>
</UL>

<P>For more information, see <A HREF="_core_dumping_all_objects.htm">Dumping All Objects</A>, <A HREF="_core_tracking_memory_allocations.htm">Tracking Memory Allocations</A>, <A HREF="JavaScript:hhobj_1.Click()">AfxEnableMemoryTracking</A>, and <A HREF="JavaScript:hhobj_2.Click()">CMemoryState</A>.</P>
</font>
</BODY>
</HTML>
