<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Fortran Calls to C</TITLE>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink">
	<PARAM NAME="DefaultTopic" VALUE="_topic_not_found.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_vc_addpf_home">
</OBJECT>
</TD></TR></TABLE>


<font face="verdana,arial,helvetica" size="2">
<H1><A NAME="_core_fortran_calls_to_c"></A>Fortran Calls to C</H1>

<P><A HREF="JavaScript:hhobj_1.Click()">Home</A>  |&nbsp; <A HREF="_core_mixed.2d.language_programming.3a_.overview.htm">Overview</A>  |&nbsp; <A HREF="_core_mixed.2d.language_programming_tasks.htm">How Do I</A></P>

<P>This article applies the principles in <A HREF="_core_mixed.2d.language_issues.htm">Mixed-Language Issues</A> to a typical case involving one function call and one subroutine call from Fortran to C. Default conventions are assumed for C, so adjustments are made to the Fortran code. The example in this article is the converse of that in <A HREF="_core_c_calls_to_fortran.htm">C Calls to Fortran</A>.</P>

<P>The Fortran main program uses the <B>C</B> attribute to call the C functions with the correct calling convention. The <B>C</B> attribute causes Fortran to generate all-lowercase names, so the <B>ALIAS</B> attribute must be used to preserve mixed case. Finally, pass by value and pass by reference are specified explicitly, though pass by value would have been assumed because of the <B>C</B> attribute.</P>

<PRE><CODE>C   File FORMAIN.FOR
C
      INTERFACE TO INTEGER*4 FUNCTION Fact [C,ALIAS:'_Fact'] (n)
      INTEGER*4 n [VALUE]
      END

      INTERFACE TO SUBROUTINE Pythagoras [C,ALIAS:'_Pythagoras'] (a,b,c)
      REAL*4 a [VALUE]
      REAL*4 b [VALUE]
      REAL*4 c [REFERENCE]
      END

      INTEGER*4 Fact
      REAL*4 c
      WRITE (*,*) 'Factorial of 7 is ', Fact (7)
      CALL Pythagoras (30, 40, c)
      WRITE (*,*) 'Hypotenuse if sides 30, 40 is ', c
      END

/*  File CSUBS.C  */

#include &lt;math.h&gt;

int Fact( int n )
{
    if (n &gt; 1)
        return( n * Fact( n - 1 ));
    return 1;
}

void Pythagoras( float a, float b, float *c)
{
    *c = sqrt( a * a + b * b );
}
</CODE></PRE>
</font>
</BODY>
</HTML>
