<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<HEAD>
<meta name="PREMIUM" content="MSDN">
<meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
<meta name="MS.LOCALE" content="EN-US">
<meta name="DESCRIPTION" content="This page is from the Microsoft Proxy Server book, found in the Tools and Technologies Section in the MSDN Library">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Appendix G: IIS Considerations</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>


<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

<p align="left"><a name="Top"><font size="2"
face="Verdana, Arial, Helvetica"><img src="onepix.gif" alt="Space"
align="top" width="1" height="1"></font></a></p>

<hr>

<h3><a name="AppendixG"><font size="2" face="Verdana, Arial, Helvetica"><br>
Appendix G</font></a></h3>

<p><a name="IISConsiderations"><font size="6"
face="Verdana, Arial, Helvetica"><strong>IIS Considerations</strong></font></a></p>

<blockquote>
    <p><a href="#g900h1"><font size="2" face="Verdana, Arial, Helvetica">The
    Default Configuration<br>
    </font></a><a href="#2h1"><font size="2"
    face="Verdana, Arial, Helvetica">Publishing to the Internet</font></a><font
    size="2" face="Verdana, Arial, Helvetica"><br>
    </font><a href="#3h1"><font size="2" face="Verdana, Arial, Helvetica">Publishing
    On Your Private Network</font></a></p>
</blockquote>

<hr>

<h1><a href="#Top"><font size="2" face="Verdana, Arial, Helvetica"><img
src="up.gif" alt="To Top" align="middle" border="0" width="14"
height="11"></font></a><a name="g900h1"><font size="2"
face="Verdana, Arial, Helvetica">The Default Configuration</font></a></h1>

<p><font size="2" face="Verdana, Arial, Helvetica">Microsoft Proxy Server
must be installed on a server that already has Microsoft Internet
Information Server (IIS) installed. When Microsoft Proxy Server
is installed on a server, it configures IIS so that it will not
listen to Internet requests (requests sent to the IP address of
the server&#146;s network adapter card that is connected to the
Internet). In this default configuration, requests from Internet
clients are ignored. IIS cannot publish to Internet clients, but
can publish to private network (internal) clients. </font></p>

<hr>

<h1><a href="#Top"><font size="2" face="Verdana, Arial, Helvetica"><img
src="up.gif" alt="To Top" align="middle" border="0" width="14"
height="11"></font></a><a name="2h1"><font size="2"
face="Verdana, Arial, Helvetica">Publishing to the Internet</font></a></h1>

<blockquote>
    <p align="left"><a href="#2h2"><font size="2"
    face="Verdana, Arial, Helvetica">Internet Publishing with Microsoft
    Proxy Server</font></a><font size="2" face="Verdana, Arial, Helvetica"><br>
    </font><a href="#1h2"><font size="2" face="Verdana, Arial, Helvetica">How
    to Enable Publishing to the Internet<br>
    </font></a><a href="#3h2"><font size="2"
    face="Verdana, Arial, Helvetica">Further Suggestions Before Publishing</font></a></p>
</blockquote>

<h2 align="left"><a href="#Top"><font size="2"
face="Verdana, Arial, Helvetica"><img src="up.gif" alt="To Top"
align="middle" border="0" width="14" height="11"></font></a><a
name="2h2"><font size="2" face="Verdana, Arial, Helvetica">Internet
Publishing with Microsoft Proxy Server</font></a></h2>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">The
Microsoft Proxy Server was designed primarily to manage outbound
connections and performance for internal clients on a private
network accessing Internet services. Although it offers increased
security for your network, using a gateway computer running
Microsoft Proxy Server for Internet publishing is not a preferred
solution. </font></p>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">If you do
decide to use Microsoft Proxy Server and IIS together for
external Web publishing, it is recommended that you use different
computers for Microsoft Proxy Server and IIS whenever possible. </font></p>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">If you
have a small network and server costs are a primary concern, you
may want to consider hosting your organization&#146;s Web site by
using leased server space available through your Internet service
provider. Many ISPs offer this type of hosting service to
businesses for a fixed monthly rate. For larger networks, where
server security is of primary concern, consider carefully the
possible consequences of combining Web servers publishing to the
Internet, and the need for maintaining security and privacy for
your internal network.</font></p>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">The
following sections discuss steps needed to configure Microsoft
Proxy Server for external publishing to the Internet. Also, a
number of suggestions are provided to help you in making your
private network secure when publishing on the Internet.</font></p>

<h2 align="left"><a href="#Top"><font size="2"
face="Verdana, Arial, Helvetica"><img src="up.gif" alt="To Top"
align="middle" border="0" width="14" height="11"></font></a><a
name="1h2"><font size="2" face="Verdana, Arial, Helvetica">How to Enable
Internet Publishing</font></a></h2>

<ol>
    <li><font size="2" face="Verdana, Arial, Helvetica">From Internet
        Service Manager, double-click the computer name next to
        the <strong>Web Proxy </strong>service<strong>.</strong></font><p><font
        size="2" face="Verdana, Arial, Helvetica">The <strong>Service
        Properties</strong> window appears. Make sure the <strong>Service</strong>
        tab is selected. </font></p>
    </li>
    <li><font size="2" face="Verdana, Arial, Helvetica">Set the <strong>Enable
        Internet Publishing</strong> option.</font><p><font
        size="2" face="Verdana, Arial, Helvetica">By default, this option
        is cleared. Selecting this option allows IIS to listen on
        port 80 of the server&#146;s network adapter card that is
        connected to the Internet, allowing Internet Web clients
        to access published documents on this server. Clearing
        this option prevents the WWW service of IIS from
        publishing to the Internet. </font></p>
        <p><font size="2" face="Verdana, Arial, Helvetica"><strong>Note</strong>&nbsp;&nbsp;&nbsp;This
        option has no effect on FTP or Gopher publishing to the
        Internet using ports 21 and 70 respectively. FTP and
        Gopher services do not distinguish between internal and
        external publishing. To restrict access from the Internet
        to these services other security measures should be used,
        such as setting ACL permissions for FTP or Gopher
        published files. Also, it is recommended that if FTP or
        Gopher services are not used, these services should be
        turned off using Internet Service Manager to stop each
        service. </font></p>
    </li>
    <li><font size="2" face="Verdana, Arial, Helvetica">From the <strong>Services</strong>
        tab, click <strong>OK</strong>.</font><p><font size="2"
        face="Verdana, Arial, Helvetica">The Internet Service Manager
        window returns. </font></p>
    </li>
</ol>

<hr>

<p align="left"><font color="#FF0000" size="2"
face="Verdana, Arial, Helvetica"><strong>Warning</strong></font><font
size="2" face="Verdana, Arial, Helvetica">&nbsp;&nbsp;&nbsp;Publishing on
the Internet compromises gateway security and increases the
exposure of your private network to external users. </font></p>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">When
Microsoft Proxy Server is used to service outbound proxy
connections, your network and server are not continuously present
or visible to Internet users. When Web publishing is allowed,
your server maintains a continuous presence on the Internet and
can allow users to try random or varied methods for intrusion to
your network. Also, where interactive scripts or programming
extensions (such as CGI or ISAPI DLLs) are used to allow dynamic
changes in Web published content, the possibility exists for
users to search out server security leaks through Web server
applications that are not thoroughly tested or carefully
designed.</font></p>

<hr>

<h2 align="left"><a href="#Top"><font size="2"
face="Verdana, Arial, Helvetica"><img src="up.gif" alt="To Top"
align="middle" border="0" width="14" height="11"></font></a><a
name="3h2"><font size="2" face="Verdana, Arial, Helvetica">Further
Suggestions Before Publishing</font></a></h2>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">If you are
further considering using Microsoft Proxy Server for your
Internet publishing server, the following is a list of items that
suggest some ways to further secure your private network when
doing so.</font></p>

<ul>
    <li><font size="2" face="Verdana, Arial, Helvetica"><strong>Never add
        external IP addresses used on the Internet to the Local
        Address Table (LAT) on the Microsoft Proxy Server.</strong></font><p><font
        size="2" face="Verdana, Arial, Helvetica">Whether you are
        considering publishing to the Internet or not, adding
        external IP addresses to the LAT exposes your entire
        private network to Internet servers and clients. This can
        severely jeopardize your private network&#146;s security.
        </font></p>
    </li>
    <li><p align="left"><font size="2" face="Verdana, Arial, Helvetica"><strong>Separate
        Microsoft Proxy Server and IIS publishing onto different
        computers or separate domains.</strong> </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">If
        your private network is large enough and you have
        multiple Windows&nbsp;NT domain servers, consider
        creating a separate domain for all computers running
        Microsoft Proxy Server and those running IIS for external
        publishing. By using separate Windows&nbsp;NT domains and
        establishing a single, one-way trust relationship between
        the Microsoft Proxy Server domain and another internal
        domain, you can further restrict access to your private
        network. </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">For
        example, if you have an internal domain named CORPORATE
        established for internal Windows&nbsp;NT-based servers on
        your private network, you might add a new domain named
        PROXY to include the computer running Microsoft Proxy
        Server and any IIS-based servers publishing to the
        Internet. By setting a single domain trust relationship
        where the PROXY domain trusts the CORPORATE domain, you
        can allow users on your internal network to have fully
        assignable access permissions to Microsoft Proxy Server
        services on the PROXY domain, but restrict Internet users
        from accessing resources on the internal CORPORATE
        domain. </font></p>
    </li>
    <li><p align="left"><font size="2" face="Verdana, Arial, Helvetica"><strong>Set
        default access to shared volumes and directories to
        read-only access.</strong> </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">Use
        Windows&nbsp;NT Explorer to set up default sharing
        permissions for all users and limit external user logons.
        </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">Set
        a default Access Control List (ACL) for all URL cache and
        IIS publishing directories (such as
        C:\Winnt\System32\Inetsrv\Wwwroot) on the Microsoft Proxy
        Server to allow <strong>Read Access</strong> for
        Everyone. </font></p>
    </li>
    <li><p align="left"><font size="2" face="Verdana, Arial, Helvetica"><strong>Do
        not use network drive mappings.</strong> </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">Network
        drive mappings to other remote servers on your internal
        network should not be used. This is critically important
        if you are also using the same computer for Microsoft
        Proxy Server and for Web publishing with IIS. </font></p>
    </li>
    <li><p align="left"><font size="2" face="Verdana, Arial, Helvetica"><strong>Avoid
        publishing with active scripts or input forms.</strong> </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">If
        you choose to combine external Web publishing with
        Microsoft Proxy Server, it is better to avoid using
        active HTML-based scripts when publishing Web documents.
        Active HTML-based scripts can include any Common Gateway
        Interface (CGI), Visual Basic (VB), ActiveX, or Java
        scripts or forms that are used in your Web publishing. If
        scripts are used in Web publishing, be sure that
        Windows&nbsp;NT File System (NTFS) partitions are used to
        secure script directories. </font></p>
    </li>
    <li><p align="left"><font size="2" face="Verdana, Arial, Helvetica"><strong>Enable
        auditing of all system and critical directories for
        server volumes.</strong> </font></p>
        <p align="left"><font size="2" face="Verdana, Arial, Helvetica">For
        more information on setting up auditing of Microsoft
        Proxy Server server volumes, see</font><a
        href="05_msp.htm"><font size="2" face="Verdana, Arial, Helvetica">
        &#147;Server Administration.&#148;</font></a><font
        size="2" face="Verdana, Arial, Helvetica"> </font></p>
    </li>
</ul>

<hr>

<h1 align="left"><a href="#Top"><font size="2"
face="Verdana, Arial, Helvetica"><img src="up.gif" alt="To Top"
align="middle" border="0" width="14" height="11"></font></a><a
name="3h1"><font size="2" face="Verdana, Arial, Helvetica">Publishing on
Your Private Network</font></a></h1>

<p align="left"><font size="2" face="Verdana, Arial, Helvetica">You can
use the copy of IIS that is on the same computer as Microsoft
Proxy Server to publish to private network clients with no effect
on gateway security.</font></p>

<hr>

<p align="center"><font size="2" face="Verdana, Arial, Helvetica"><i>©
1996 by Microsoft Corporation. All rights reserved.</i> </font></p>
</FONT>
</FONT>
</BODY>
</html>
