<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Writing Streams to a File</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_writing_streams_to_a_file"></a>Writing Streams to a File</h3>
<p>
You can also create a file containing data streams by writing a new data stream to a file. </p>
<p>
You can create a new stream in a new or existing file by using the <a href="../pdref/mmfunc_3xkd.htm"><b>AVIFileCreateStream</b></a> function. This function defines a new stream according to the characteristics described in an <a href="../pdref/mmstr_3lyq.htm"><b>AVISTREAMINFO</b></a> structure, creates a stream interface for the new stream, increments the reference count of the stream, and returns the address of the stream-interface pointer.</p>
<p>
Before you write the content of the stream, you must specify the stream format. You can set the stream format by using the <a href="../pdref/mmfunc_66k4.htm"><b>AVIStreamSetFormat</b></a> function. When setting the format of a video stream, you must supply this function with a <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_bitmapinfo_str">
</object><a href=JavaScript:alink_1.Click()><b>BITMAPINFO</b></a> structure containing the appropriate information. When setting the format of an audio stream, you must supply a <a href="../pdref/mmstr_5kky.htm"><b>WAVEFORMAT</b></a> or <a href="../pdref/mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure containing the appropriate information. The information you need to supply to the function for other stream types depends on the stream type and the stream handler.</p>
<p>
You can write the multimedia content in a stream by using the <a href="../pdref/mmfunc_2z51.htm"><b>AVIStreamWrite</b></a> function. This function copies raw data from an application-supplied buffer into the specified stream. The default AVI file handler appends information to the end of a stream. The default WAVE handler can write waveform-audio data within a stream as well as at the end of a stream.</p>
<p>
You can write supplementary information about the file or stream that is not included in the <b>AVIFileCreateStream</b> or <b>AVIStreamSetFormat</b> function by using the <a href="../pdref/mmfunc_3n1d.htm"><b>AVIFileWriteData</b></a> and <a href="../pdref/mmfunc_19sx.htm"><b>AVIStreamWriteData</b></a> functions. You can record data that is applicable to the entire file, such as copyright information and modification history, by using <b>AVIFileWriteData</b>. You can record stream-specific information, such as compression and decompression settings, by using <b>AVIStreamWriteData</b>. The supplementary information is stored in separate chunks within the file.</p>
<p>
You can close the stream after you finish writing to the new stream by using the <a href="../pdref/mmfunc_7usl.htm"><b>AVIStreamRelease</b></a> function. This function clears buffers used in recording the stream data, and it completes and closes any incomplete data chunks in the file.</p>
<p>&nbsp;</p></body>
</HTML>
