<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Palettes</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_palettes"></a>Palettes</h3>
<p>
The DrawDib functions require that an application respond to two palette-oriented messages: <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_querynewpalette">
</object><a href=JavaScript:alink_1.Click()>WM_QUERYNEWPALETTE</a> and <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_palettechanged">
</object><a href=JavaScript:alink_2.Click()>WM_PALETTECHANGED</a>. If your application is not palette-aware, you will need to add a handler for each of these messages. For more information about processing the WM_QUERYNEWPALETTE and WM_PALETTECHANGED messages, see <a href="drawdib_5r3n.htm">Adding Palette Message Handlers</a>.</p>
<p>
You can realize the current DrawDib palette to the DC by using the <a href="../pdref/mmfunc_5j39.htm"><b>DrawDibRealize</b></a> function. You should realize the palette in response to the WM_QUERYNEWPALETTE or WM_PALETTECHANGED message, or when you prepare to display an image sequence by using the <a href="../pdref/mmfunc_76if.htm"><b>DrawDibDraw</b></a> function.</p>
<p>
You can draw an image mapped to another palette by using the <a href="../pdref/mmfunc_09ut.htm"><b>DrawDibSetPalette</b></a> function. This function forces the DrawDib DC to use the specified palette, which can affect the image quality. For example, an application that is palette-aware might have realized a palette and needs to prevent DrawDib from realizing its own palette. The application can use <b>DrawDibSetPalette</b> to notify DrawDib of the palette to use. </p>
<p>
You can obtain a handle of the current foreground palette by using the <a href="../pdref/mmfunc_0mlh.htm"><b>DrawDibGetPalette</b></a> function. If your application uses the current foreground palette, it does not have exclusive use of the palette and another application can invalidate the palette handle. Your application should not free the palette when you finish using it. Freeing the palette could invalidate the palette handle for another application. </p>
<p>
You can prepare DrawDib to receive new color values for its palette by using the <a href="../pdref/mmfunc_2l45.htm"><b>DrawDibChangePalette</b></a> function. In the code following <b>DrawDibChangePalette</b>, you assign new values for the palette color table. If the DDF_ANIMATE flag is not set in the DrawDib DC when you call <b>DrawDibChangePalette</b>, you can enact the palette changes by using <b>DrawDibRealize</b> to realize the palette. You can then use <b>DrawDibDraw</b> to redraw the image. If the DDF_ANIMATE flag is set in the DrawDib DC, you can animate the palette and the colors of the displayed bitmap by using <b>DrawDibDraw</b> or <b>DrawDibRealize</b>. You can update the DDF_ANIMATE flag by using the <a href="../pdref/mmfunc_3y04.htm"><b>DrawDibEnd</b></a> and <a href="../pdref/mmfunc_7usu.htm"><b>DrawDibBegin</b></a> functions.</p>
<p>
<b>Note</b>&nbsp;&nbsp;If you free the DrawDib palette while it is selected by a DC, a graphics device interface (GDI) error can result when the DC uses the palette. Instead, your application should use <a href="../pdref/mmfunc_09ut.htm"><b>DrawDibSetPalette</b></a> to change the DrawDib DC to use the default palette or another palette.</p>
<p>
The <a href="../pdref/mmfunc_3y04.htm"><b>DrawDibEnd</b></a>, <a href="../pdref/mmfunc_7hut.htm"><b>DrawDibClose</b></a>, and <a href="../pdref/mmfunc_7usu.htm"><b>DrawDibBegin</b></a> functions can free the DrawDib palette. However, these functions should be used only when the palette has not been selected by the DC. The <a href="../pdref/mmfunc_76if.htm"><b>DrawDibDraw</b></a> function can also free the palette when it uses the same DrawDib DC, but specifies different drawing parameters (<i>lpbi</i>, <i>dxDst</i>, <i>dyDst</i>, <i>dxSrc</i>, or <i>dySrc</i>) or a different format. </p>
<p>&nbsp;</p></body>
</HTML>
