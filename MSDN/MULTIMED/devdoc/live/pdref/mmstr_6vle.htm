<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ACMFORMATCHOOSE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_acmformatchoose_str"></a>ACMFORMATCHOOSE</h1>
<p>
The <b>ACMFORMATCHOOSE</b> structure contains information the ACM uses to initialize the system-defined waveform-audio format selection dialog box. After the user closes the dialog box, the system returns information about the user's selection in this structure.</p>
<pre><code>typedef struct { 
    DWORD                   cbStruct; 
    DWORD                   fdwStyle; 
    HWND                    hwndOwner; 
    LPWAVEFORMATEX          pwfx; 
    DWORD                   cbwfx; 
    LPCSTR                  pszTitle; 
    char szFormatTag[ACMFORMATTAGDETAILS_FORMATTAG_CHARS]; 
    char szFormat[ACMFORMATDETAILS_FORMAT_CHARS]; 
    LPSTR                   pszName; 
    DWORD                   cchName; 
    DWORD                   fdwEnum; 
    LPWAVEFORMATEX          pwfxEnum; 
    HINSTANCE               hInstance; 
    LPCSTR                  pszTemplateName; 
    LPARAM                  lCustData; 
    ACMFORMATCHOOSEHOOKPROC pfnHook; 
} ACMFORMATCHOOSE; 
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>cbStruct</b></dt>
<dd>
Size, in bytes, of the <b>ACMFORMATCHOOSE</b> structure. This member must be initialized before an application calls the <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a> function. The size specified in this member must be large enough to contain the base <b>ACMFORMATCHOOSE</b> structure.</dd>
<dt>
<b>fdwStyle</b></dt>
<dd>
Optional style flags for the <b>acmFormatChoose</b> function. This member must be initialized to a valid combination of the following flags before an application calls the <b>acmFormatChoose</b> function:
<dl>
<dt>
ACMFORMATCHOOSE_STYLEF_CONTEXTHELP</dt>
<dd>
Context-sensitive help will be available in the dialog box. To use this feature, an application must register the ACMHELPMSGCONTEXTMENU and ACMHELPMSGCONTEXTHELP constants, using the <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_registerwindowmessage">
</object><a href=JavaScript:alink_1.Click()><b>RegisterWindowMessage</b></a> function. When the user invokes help, the registered message will be posted to the owning window. The message will contain the <i>wParam</i> and <i>lParam</i> parameters from the original WM_CONTEXTMENU or WM_CONTEXTHELP message.</dd>
<dt>
ACMFORMATCHOOSE_STYLEF_ENABLEHOOK</dt>
<dd>
Enables the hook function pointed to by the <b>pfnHook</b> member. An application can use hook functions for a variety of customizations, including answering the <a href="mmmsg_3f39.htm">MM_ACM_FORMATCHOOSE</a> message.</dd>
<dt>
ACMFORMATCHOOSE_STYLEF_ENABLETEMPLATE</dt>
<dd>
Causes the ACM to create the dialog box template identified by <b>hInstance</b> and <b>pszTemplateName</b>.</dd>
<dt>
ACMFORMATCHOOSE_STYLEF_ENABLETEMPLATEHANDLE</dt>
<dd>
The <b>hInstance</b> member identifies a data block that contains a preloaded dialog box template. If this flag is specified, the ACM ignores the <b>pszTemplateName</b> member.</dd>
<dt>
ACMFORMATCHOOSE_STYLEF_INITTOWFXSTRUCT</dt>
<dd>
The buffer pointed to by <b>pwfx</b> contains a valid <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure that the dialog box will use as the initial selection.</dd>
<dt>
ACMFORMATCHOOSE_STYLEF_SHOWHELP</dt>
<dd>
A help button will appear in the dialog box. To use a custom Help file, an application must register the ACMHELPMSGSTRING constant with the <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_registerwindowmessage">
</object><a href=JavaScript:alink_2.Click()><b>RegisterWindowMessage</b></a> function. When the user presses the help button, the registered message will be posted to the owner.</dd>
</dl>
</dd>
<dt>
<b>hwndOwner</b></dt>
<dd>
Handle of the window that owns the dialog box. This member can be any valid window handle, or NULL if the dialog box has no owner. This member must be initialized before calling the <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a> function.</dd>
<dt>
<b>pwfx</b></dt>
<dd>
Address of a <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure. If the ACMFORMATCHOOSE_STYLEF_INITTOWFXSTRUCT flag is specified in the <b>fdwStyle</b> member, this structure must be initialized to a valid format. When the <b>acmFormatChoose</b> function returns, this buffer contains the selected format. If the user cancels the dialog box, no changes will be made to this buffer.</dd>
<dt>
<b>cbwfx</b></dt>
<dd>
Size, in bytes, of the buffer pointed to by <b>pwfx</b>. If the buffer is too small to contain the format information, the <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a> function returns ACMERR_NOTPOSSIBLE. Also, the ACM copies the required size into this member. An application can use the <a href="mmfunc_5ohf.htm"><b>acmMetrics</b></a> and <a href="mmfunc_4jqr.htm"><b>acmFormatTagDetails</b></a> functions to determine the largest size required for this buffer.</dd>
<dt>
<b>pszTitle</b></dt>
<dd>
Address of a string to be placed in the title bar of the dialog box. If this member is NULL, the ACM uses the default title (that is, "Sound Selection").</dd>
<dt>
<b>szFormatTag</b></dt>
<dd>
Buffer containing a null-terminated string describing the format tag of the format selection when the <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a> function returns. This string is equivalent to the <b>szFormatTag</b> member of the <a href="mmstr_8smq.htm"><b>ACMFORMATTAGDETAILS</b></a> structure returned by the <a href="mmfunc_4jqr.htm"><b>acmFormatTagDetails</b></a> function. If the user cancels the dialog box, this member will contain a null-terminated string.</dd>
<dt>
<b>szFormat</b></dt>
<dd>
Buffer containing a null-terminated string describing the format attributes of the format selection when the <b>acmFormatChoose</b> function returns. This string is equivalent to the <b>szFormat</b> member of the <a href="mmstr_8d0y.htm"><b>ACMFORMATDETAILS</b></a> structure returned by the <a href="mmfunc_0wkz.htm"><b>acmFormatDetails</b></a> function. If the user cancels the dialog box, this member will contain a null-terminated string.</dd>
<dt>
<b>pszName</b></dt>
<dd>
Address of a string for a user-defined format name. If this is a non-null-terminated string, the ACM will attempt to match the name with a previously saved user-defined format name. If a match is found, the dialog box is initialized to that format. If a match is not found or this member is a null-terminated string, this member is ignored on input. When the <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a> function returns, this buffer contains a null-terminated string describing the user-defined format. If the format name is untitled (that is, the user has not given a name for the format), this member will be a null-terminated string on return. If the user cancels the dialog box, no changes will be made to this buffer.
<p>
If the ACMFORMATCHOOSE_STYLEF_INITTOWFXSTRUCT flag is specified in the <b>fdwStyle</b> member, the <b>pszName</b> member is ignored for input. 
</dd>
<dt>
<b>cchName</b></dt>
<dd>
Size, in characters, of the buffer identified by the <b>pszName</b> member. This buffer should be at least 128 characters long. If the <b>pszName</b> member is NULL, this member is ignored.</dd>
<dt>
<b>fdwEnum</b></dt>
<dd>
Optional flags for restricting the type of formats listed in the dialog box. These flags are identical to the <i>fdwEnum</i> flags for the <a href="mmfunc_3dt9.htm"><b>acmFormatEnum</b></a> function. If <b>pwfxEnum</b> is NULL, this member should be zero. The following values are defined:
<dl>
<dt>
ACM_FORMATENUMF_CONVERT</dt>
<dd>
The <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate only destination formats that can be converted from the given <b>pwfxEnum</b> format.</dd>
<dt>
ACM_FORMATENUMF_HARDWARE</dt>
<dd>
The enumerator should enumerate only formats that are supported in hardware by one or more of the installed waveform-audio devices. This flag provides a way for an application to choose only formats native to an installed waveform-audio device.</dd>
<dt>
ACM_FORMATENUMF_INPUT</dt>
<dd>
The enumerator should enumerate only formats that are supported for input (recording).</dd>
<dt>
ACM_FORMATENUMF_NCHANNELS</dt>
<dd>
The <b>nChannels</b> member of the <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate only a format that conforms to this attribute.</dd>
<dt>
ACM_FORMATENUMF_NSAMPLESPERSEC</dt>
<dd>
The <b>nSamplesPerSec</b> member of the <b>WAVEFORMATEX</b> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate only a format that conforms to this attribute.</dd>
<dt>
ACM_FORMATENUMF_OUTPUT</dt>
<dd>
The enumerator should enumerate only formats that are supported for output (playback).</dd>
<dt>
ACM_FORMATENUMF_SUGGEST</dt>
<dd>
The <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate all suggested destination formats for the given <b>pwfxEnum</b> format.</dd>
<dt>
ACM_FORMATENUMF_WBITSPERSAMPLE</dt>
<dd>
The <b>wBitsPerSample</b> member of the <b>WAVEFORMATEX</b> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate only a format that conforms to this attribute.</dd>
<dt>
ACM_FORMATENUMF_WFORMATTAG</dt>
<dd>
The <b>wFormatTag</b> member of the <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a> structure pointed to by the <b>pwfxEnum</b> member is valid. The enumerator will enumerate only a format that conforms to this attribute.</dd>
</dl>
</dd>
<dt>
<b>pwfxEnum</b></dt>
<dd>
Address of a <b>WAVEFORMATEX</b> structure that will be used to restrict the formats listed in the dialog box. The <b>fdwEnum</b> member defines the members of the structure pointed to by <b>pwfxEnum</b> that should be used for the enumeration restrictions. If no special restrictions are desired, this member can be NULL. For other requirements associated with the <b>pwfxEnum</b> member, see the description for the <a href="mmfunc_3dt9.htm"><b>acmFormatEnum</b></a> function.</dd>
<dt>
<b>hInstance</b></dt>
<dd>
Handle of a data block that contains a dialog box template specified by the <b>pszTemplateName</b> member. This member is used only if the <b>fdwStyle</b> member specifies the ACMFORMATCHOOSE_STYLEF_ENABLETEMPLATE or ACMFORMATCHOOSE_STYLEF_ENABLETEMPLATEHANDLE flag; otherwise, this member should be NULL on input.</dd>
<dt>
<b>pszTemplateName</b></dt>
<dd>
Address of a null-terminated string that specifies the name of the resource file for the dialog box template that is to be substituted for the dialog box template in the ACM. An application can use the <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_makeintresource">
</object><a href=JavaScript:alink_3.Click()><b>MAKEINTRESOURCE</b></a> macro for numbered dialog box resources. This member is used only if the <b>fdwStyle</b> member specifies the ACMFORMATCHOOSE_STYLEF_ENABLETEMPLATE flag; otherwise, this member should be NULL on input.</dd>
<dt>
<b>lCustData</b></dt>
<dd>
Application-defined data that the ACM passes to the hook function identified by the <b>pfnHook</b> member. The system passes the data in the <i>lParam</i> parameter of the <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_initdialog">
</object><a href=JavaScript:alink_4.Click()>WM_INITDIALOG</a> message.</dd>
<dt>
<b>pfnHook</b></dt>
<dd>
Address of a hook function that processes messages intended for the dialog box. An application must specify the ACMFORMATCHOOSE_STYLEF_ENABLEHOOK flag in the <b>fdwStyle</b> member to enable the hook; otherwise, this member should be NULL. The hook function should return FALSE to pass a message to the standard dialog box procedure or TRUE to discard the message.
</dd>
</dl>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in msacm.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use msacm32.lib.<br>
<b>&nbsp;&nbsp;Unicode: </b>Implemented as Unicode and ANSI versions on Windows NT.</p>
<h4>See Also</h4>
<p>
<a href="../pdgrmm/audcomp_3kc2.htm">Audio Compression Manager Overview</a>, <a href="../pdgrmm/audcomp_28ky.htm">Audio Compression Structures</a>, <a href="mmfunc_0l5x.htm"><b>acmFormatChoose</b></a>, <a href="mmfunc_0wkz.htm"><b>acmFormatDetails</b></a>, <a href="mmstr_8d0y.htm"><b>ACMFORMATDETAILS</b></a>, <a href="mmfunc_3dt9.htm"><b>acmFormatEnum</b></a>, <a href="mmfunc_4jqr.htm"><b>acmFormatTagDetails</b></a>, <a href="mmstr_8smq.htm"><b>ACMFORMATTAGDETAILS</b></a>, <a href="mmfunc_5ohf.htm"><b>acmMetrics</b></a>, <object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_makeintresource">
</object><a href=JavaScript:alink_5.Click()><b>MAKEINTRESOURCE</b></a>, <a href="mmmsg_3f39.htm">MM_ACM_FORMATCHOOSE</a>, <object id=alink_6 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_registerwindowmessage">
</object><a href=JavaScript:alink_6.Click()><b>RegisterWindowMessage</b></a>, <a href="mmstr_625u.htm"><b>WAVEFORMATEX</b></a>, <object id=alink_7 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_initdialog">
</object><a href=JavaScript:alink_7.Click()>WM_INITDIALOG</a> </p>
<p>&nbsp;</p></body>
</HTML>
