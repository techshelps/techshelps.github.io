<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MCI_RESERVE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_mci_reserve"></a>MCI_RESERVE</h1>
<p>
The <b>MCI_RESERVE</b> command allocates contiguous disk space for the workspace of the device driver instance for use with subsequent recording. Digital-video devices recognize this command. </p>
<pre><code>MCIERROR mciSendCommand(MCIDEVICEID wDeviceID, MCI_RESERVE, 
    DWORD dwFlags, (DWORD) (LPMCI_DGV_RESERVE_PARMS) lpReserve);
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>wDeviceID</i></dt>
<dd>
Device identifier of the MCI device that is to receive the command message.</dd>
<dt>
<i>dwFlags</i></dt>
<dd>
MCI_NOTIFY, MCI_WAIT, or MCI_TEST. For information about these flags, see <a href="../pdgrmm/mci_9v3n.htm">The Wait, Notify, and Test Flags</a>.</dd>
<dt>
<i>lpReserve</i></dt>
<dd>
Address of an <a href="mmstr_3pma.htm"><b>MCI_DGV_RESERVE_PARMS</b></a> structure.
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if successful or an error otherwise.</p>
<h4>Remarks</h4>
<p>
If the workspace contains unsaved data, this data is lost. If disk space is not reserved prior to recording, the <a href="mmcmd_2tpg.htm"><b>MCI_RECORD</b></a> command performs an implied reserve with device-specific default parameters. On some implementations, reserve is not required and might be ignored by the device driver. Explicitly reserving space gives you better control over when the delay for disk allocation occurs, how much space is allocated, and where the disk space is allocated. The amount and location of disk space already reserved for this device instance can be changed by issuing <b>MCI_RESERVE</b> again. Any allocated and still unused disk space is not deallocated until any recorded data is saved or until the device driver instance is closed. </p>
<p>
If video is turned off with the MCI_OFF flag of the <a href="mmcmd_74fj.htm"><b>MCI_SETVIDEO</b></a> command, the space reserved does not include any video. If audio is turned off with the MCI_OFF flag of the <a href="mmcmd_32un.htm"><b>MCI_SETAUDIO</b></a> command, the space reserved does not include any audio. If both audio and video are turned off or if the requested size is zero, no space is reserved and any existing reserved space is deallocated.</p>
<p>
The following additional flags apply to digital-video devices:
<dl>
<dt>
MCI_DGV_RESERVE_IN</dt>
<dd>
The <b>lpstrPath</b> member of the structure identified by <i>lpReserve </i>contains an address of a buffer containing the location of a temporary file. The buffer contains only the drive and directory path of the file used to hold recorded data; the filename is specified by the device driver. This temporary file is deleted when the device instance is closed unless it is explicitly saved. If this flag is omitted, the device driver specifies where disk space is allocated.</dd>
<dt>
MCI_DGV_RESERVE_SIZE</dt>
<dd>
The <b>dwSize</b> member of the structure identified by <i>lpReserve </i>specifies the approximate amount of disk space to reserve in the workspace for recording. The value is specified in the current time format. The amount of disk space is estimated from the requested time and from which file format and video and audio algorithm and quality values are in effect. If this flag is omitted, the device driver might use a default value it defines.
</dd>
</dl>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in mmsystem.h.</p>
<h4>See Also</h4>
<p>
<a href="../pdgrmm/mci_7vvt.htm">MCI Overview</a>, <a href="../pdgrmm/mci_4eib.htm">MCI Commands</a>, <a href="mmstr_3pma.htm"><b>MCI_DGV_RESERVE_PARMS</b></a>, <a href="mmcmd_2tpg.htm"><b>MCI_RECORD</b></a>, <a href="mmcmd_32un.htm"><b>MCI_SETAUDIO</b></a>, <a href="mmcmd_74fj.htm"><b>MCI_SETVIDEO</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
