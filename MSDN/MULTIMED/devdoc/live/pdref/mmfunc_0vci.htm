<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>acmStreamUnprepareHeader</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_acmstreamunprepareheader"></a>acmStreamUnprepareHeader</h1>
<p>
The <b>acmStreamUnprepareHeader</b> function cleans up the preparation performed by the <a href="mmfunc_5dwy.htm"><b>acmStreamPrepareHeader</b></a> function for an ACM stream. This function must be called after the ACM is finished with the given buffers. An application must call this function before freeing the source and destination buffers.</p>
<pre><code><b>MMRESULT acmStreamUnprepareHeader(
  HACMSTREAM</b><i> has</i><b>,          </b>
<b>  LPACMSTREAMHEADER</b><i> pash</i><b>,  </b>
<b>  DWORD</b><i> fdwUnprepare       </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>has</i></dt>
<dd>
Handle of the conversion steam.</dd>
<dt>
<i>pash</i></dt>
<dd>
Address of an <a href="mmstr_8v02.htm"><b>ACMSTREAMHEADER</b></a> structure that identifies the source and destination buffers to be unprepared.</dd>
<dt>
<i>fdwUnprepare</i></dt>
<dd>
Reserved; must be zero.
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if successful or an error otherwise. Possible error values include the following:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Value</th>
<th align=left width=52%>Description</th>
</tr>
<tr valign=top>
<td width=48%>ACMERR_BUSY</td>
<td width=52%>The stream header specified in <i>pash</i> is currently in use and cannot be unprepared.</td>
</tr>
<tr valign=top>
<td width=48%>ACMERR_UNPREPARED</td>
<td width=52%>The stream header specified in <i>pash</i> is currently not prepared by the <a href="mmfunc_5dwy.htm"><b>acmStreamPrepareHeader</b></a> function.</td>
</tr>
<tr valign=top>
<td width=48%>MMSYSERR_INVALFLAG</td>
<td width=52%>At least one flag is invalid.</td>
</tr>
<tr valign=top>
<td width=48%>MMSYSERR_INVALHANDLE</td>
<td width=52%>The specified handle is invalid.</td>
</tr>
<tr valign=top>
<td width=48%>MMSYSERR_INVALPARAM</td>
<td width=52%>At least one parameter is invalid.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
Unpreparing a stream header that has already been unprepared is an error. An application must specify the source and destination buffer lengths (<b>cbSrcLength</b> and <b>cbDstLength</b>, respectively) that were used during a call to the corresponding <b>acmStreamPrepareHeader</b>. Failing to reset these member values will cause <b>acmStreamUnprepareHeader</b> to fail with an MMSYSERR_INVALPARAM error.</p>
<p>
The ACM can recover from some errors. The ACM will return a nonzero error, yet the stream header will be properly unprepared. To determine whether the stream header was actually unprepared, an application can examine the ACMSTREAMHEADER_STATUSF_PREPARED flag. If <b>acmStreamUnprepareHeader</b> returns success, the header will always be unprepared.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.1 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in msacm.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use msacm32.lib.</p>
<h4>See Also</h4>
<p>
<a href="../pdgrmm/audcomp_3kc2.htm">Audio Compression Manager Overview</a>, <a href="../pdgrmm/audcomp_6x9v.htm">Audio Compression Functions</a>, <a href="mmfunc_5dwy.htm"><b>acmStreamPrepareHeader</b></a>, <a href="mmstr_8v02.htm"><b>ACMSTREAMHEADER</b></a></p>
<p>&nbsp;</p></body>
</HTML>
