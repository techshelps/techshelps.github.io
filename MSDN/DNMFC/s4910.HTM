<HTML>
<HEAD>
<meta name="PREMIUM" content="MSDN">
<meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
<meta name="MS.LOCALE" content="EN-US">
<meta name="DESCRIPTION" content="This page is from the MFC Migration Kit book in the MSDN Library">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Phase 1. Migrate Your WinMain and WndProc Code</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->


<H3>Phase 1. Migrate Your WinMain and WndProc Code</H3><P>In <A HREF="S4923.HTM">Phase 1</A>, you'll follow these steps:</P>
<P>    1.    <A HREF="S4924.HTM">Migrate the WinMain Function</A>.</P>
<P>MFC provides its own <B>WinMain</B>, so rescue any special code and delete your <B>WinMain</B> function.</P>
<P>    2.    <A HREF="S492C.HTM">Migrate WndProc</A> into a C++ class.</P>
<P>Most of your primary <B>WndProc</B> function maps to the MFC view class. For Phase 1, you'll move the <B>switch</B> statement from <B>WndProc</B> to a view-class member function.</P>
<P>    3.    <A HREF="S4932.HTM">Move your WM_PAINT code</A> into a member function.</P>
<P>MFC handles the <B>WM_PAINT</B> message in a special way, mapping it to the view class's OnDraw member function.</P>
<P>    4.    <A HREF="S4936.HTM">Move your WM_COMMAND code</A> into a member function.</P>
<P>MFC also handles <B>WM_COMMAND</B> messages in a special way. Normally, the command message for each command ID maps to its own handler function, but for Phase 1, you'll map all <B>WM_COMMAND</B> messages to a single view-class member function. </P>
<P>
<P>At this point, you'll have a working MFC application. The purpose of this guide is to help you migrate your code to C++ and MFC as quickly as possible, so your application is not fully integrated with MFC yet. Phases 2 and 3, if you choose to undertake them, will increase the level of integration.</P>
</FONT>
</BODY>
</HTML>
