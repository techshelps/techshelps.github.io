<HTML>
<HEAD>
<meta name="PREMIUM" content="MSDN">
<meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
<meta name="MS.LOCALE" content="EN-US">
<meta name="DESCRIPTION" content="This page is from the MFC Migration Kit book in the MSDN Library">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Issues Shown by the Migration Tool</TITLE><META NAME="MS-HKWD" CONTENT="Issues Shown by the Migration Tool"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->


<H4>    Issues Shown by the Migration Tool</H4><P>To use the migration tool, run the tool against each C file from the C-language version of SHOWDIB. In the Migrating Options dialog box, select Phase 1. Later, you can select each of the other migration phases listed. </P>
<P>For SHOWDIB, run the MFC Migration Tool on the .C files in the SHOWDIB sample directory. Note the issues that the tool points out. This guide will take up most of those issues. The main isssues (corresponding to information in this guide) include:</P>
<P>In Phase 1:</P>
<UL><LI>    <A HREF="S4924.HTM">WinMain</A> is not needed in an MFC application.</LI><LI>    <A HREF="S492C.HTM">WndProc</A> functions need to move into overrides of the <B>WindowProc</B> member function in your MFC derived view class.</LI><LI>    <A HREF="S4936.HTM">WM_COMMAND</A> code belongs in an override of the <B>OnCmdMsg</B> member function in your MFC derived view class (and will later be moved into individual message-mapped handler functions).</LI><LI>    <A HREF="S4932.HTM">WM_PAINT</A> code belongs in an override of the <B>OnDraw</B> member function in your MFC derived view class.</LI><LI>    <A HREF="S4930.HTM">Disambiguating calls to Windows API functions</A>. The tool flags the names of Windows API functions that MFC encapsulates; you should prefix these with the C++ scope resolution operator (<B>::</B>).</LI><LI>    <A HREF="S4939.HTM#sec1">Calls to DefWindowProc and Other Non-MFC Functions</A>. You don't use <B>DefWindowProc</B> in MFC applications.</LI><LI>    <A HREF="S4939.HTM#sec0">Window registration calls outside WinMain</A>. These need to be checked.</LI></UL><P>
<P>In Phase 2:</P>
<UL><LI>    Handler code for other Windows-based messages (such as <B>WM_KEYDOWN</B>) in your <B>switch</B> statement in your WindowProc function override should ultimately move into individual MFC <A HREF="S493E.HTM">message handler functions</A>. The tool flags <B>WM_ </B>messages. </LI><LI>    Handler code for <B>WM_COMMAND</B> messages in your <B>switch</B> statement in the OnCmdMsg function override should also move into individual MFC <A HREF="S493E.HTM">message handler functions</A>. </LI><LI>    <A HREF="S493F.HTM">Using MFC menu update handlers</A> to update the state of your menus and toolbar buttons.</LI><LI>    <A HREF="S4940.HTM">Replacing your use of cbWndExtra and cbClsExtra</A> in the <B>WNDCLASS</B> structure, along with calls to the <B>SetWindowWord</B>, <B>GetWindowWord</B>, <B>SetWindowLong</B>, <B>GetWindowLong</B>, <B>SetClassWord</B>, <B>GetClassWord</B>, <B>SetClassLong</B>, and <B>GetClassLong</B> functions.</LI></UL><P>
<P>In Phase 3:</P>
<UL><LI>    In the long run, you should adopt the MFC way of doing things. This includes transliterating calls to the Windows API functions, including global GDI function calls, to <A HREF="S4943.HTM">use C++ syntax and MFC, member functions</A>. The tool flags GDI function calls. (The functions flagged for <A HREF="S4930.HTM">disambiguation</A> in Phase 1 are also prime candidates for conversion to the corresponding MFC functions that encapsulate them.)</LI><LI>    <A HREF="S494B.HTM">Moving your printing code to MFC</A>. You should consider moving your old print loop code into the MFC view class. The tool flags calls to the <B>StartDoc</B>, <B>StartPage</B>, <B>EndPage</B>, <B>EndDoc</B>, and <B>SetAbortProc</B> functions.</LI><LI>    <A HREF="S494A.HTM">Using document serialization for input/output</A>. The tool flags calls to the <B>OpenFile</B>, <B>_lread</B>, <B>_lwrite</B>, <B>_lopen</B>, and <B>_lclose</B> functions.</LI></UL><P>
</FONT>
</BODY>
</HTML>
