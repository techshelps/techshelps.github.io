<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Managing the Data</title>
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2"><h1><a name="_gs_managing_the_data"></a><sup></sup>Managing the Data</h1>
<p>
In the following procedure you’ll implement the <code>NewStroke</code> function that you declared earlier. <code>NewStroke</code> manages the stroke data in Scribble’s drawings.</p>
<p class=label>
<b>To implement document members for managing Scribble’s data</b>
<ul type=disc>
<li>
Use WizardBar to jump to the starter definition of <code>NewStroke</code> (in class <code>CScribbleDoc</code>), and fill it in with the following code:<pre><code>CStroke* pStrokeItem = new CStroke(m_nPenWidth);
m_strokeList.AddTail( pStrokeItem );
SetModifiedFlag( );    // Mark document as modified 
// to confirm File Close.
return pStrokeItem;
</code></pre>
</li>
</ul>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;The <b>new</b> operator never returns <b>NULL</b>. Instead, an exception is thrown if memory could not be allocated. This would be a good place to implement an exception handler with the <b>TRY</b> and <b>CATCH</b> macros.</p>
<p>
In the above code, <code>NewStroke</code>: 
<ol>
<li>
Constructs a new <code>CStroke</code> object dynamically using the C++ <b>new</b> operator<br><br></li>
<li>
Initializes the <code>CStroke</code> object with the current pen width<br><br></li>
<li>
Adds the new stroke to the list using the <b>CTypedPtrList</b> member function <b>AddTail</b><br><br></li>
<li>
Flags the document as having been modified since the last save by calling the <b>CDocument</b> member function <b>SetModifiedFlag</b><br><br></li>
<li>
Returns a pointer to the stroke</li>
</ol>
</font></BODY>
</HTML>
