<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Optimizing File System Performance with Profiles</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h3>Optimizing File System Performance with Profiles</H3><P>In Windows 95, file system and disk performance can be controlled based on how the computer is used in most situations. The option for configuring file system performance is controlled only by the user. None of these settings are affected by other configuration changes that might be made in Windows&nbsp;95, such as installing File and Printer Sharing services, or choosing the Portable option as the Setup Type when installing Windows 95.</P>
<H4><A NAME="sec0"></A>To optimize file system performance</H4><OL><LI>In the System option in Control Panel, click the Performance tab, and then click the File System.</LI><LI>In the list named Typical Role Of This Machine, select the most common role for this computer, and then click OK. The following table describes each role in the list. </LI></OL><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="72pt" VALIGN="TOP"><COL WIDTH="261pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Role</B></P></TD><TD VALIGN="TOP"><P><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP"><P>Desktop Computer</P></TD><TD VALIGN="TOP"><P>A normal computer acting primarily as a network client, or an individual computer with no networking. This configuration assumes there is more than the minimum required RAM, and that the computer is running on power (rather than battery).</P></TD></TR><TR><TD VALIGN="TOP"><P>Mobile Or Docking System</P></TD><TD VALIGN="TOP"><P>Any computer with limited memory. This configuration assumes limited RAM and that the computer is running on battery, so the disk cache should be flushed frequently.</P></TD></TR><TR><TD VALIGN="TOP"><P>Network Server</P></TD><TD VALIGN="TOP"><P>A computer used primarily as a peer server for file or printer sharing. This configuration assumes that the computer has adequate RAM and frequent disk activity, so the system is optimized for a high amount of disk access.</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>Each disk performance profile adjusts the values of the following file-system settings in the Registry:</P>
<UL><LI><B>PathCache</B>, which specifies the size of the cache that VFAT can use to save the locations of the most recently accessed directory paths. This cache improves performance by reducing the number of times the file system must seek paths by searching the file allocation table. The number of paths is 32 for the Desktop computer profile, 16 for Mobile Or Docking System, and 64 for Network Server.</LI><LI><B>NameCache</B>, which stores the locations of the most recently accessed filenames. The combined use of PathCache and NameCache means that VFAT never searches the disk for the location of cached filenames. Both PathCache and NameCache use memory out of the general system heap. The number of filenames is about 677 names (8&nbsp;KB) for the Desktop computer profile, 337 names (4&nbsp;KB) for Mobile Or Docking System, and 2729 names (16 KB) for Network Server.</LI><LI><B>BufferIdleTimeout</B>, <B>BufferAgeTimeout</B>, and <B>VolumeIdleTimeout</B>, which control the time between when changes are placed in the buffer to when they are written to the hard disk.</LI></UL><P>The values to be assigned to each disk performance profile are stored in the following Registry key:</P>
<P><BR></P>
<pre><code>Hkey_Local_Machine\Software\Microsoft\Windows\CurrentVersion<BR>   \FS Templates</code></pre>
<P>The following subkey contains the actual settings for the profile currently used: </P>
<P><BR></P>
<pre><code>Hkey_Local_Machine\System\CurrentControlSet\Control\FileSystem</code></pre>
<P>An additional performance setting in the FileSystem subkey, <B>ContigFileAllocSize</B>, can be used to change the size of the contiguous space that VFAT searches for when allocating disk space. Under MS-DOS, the file system began allocating the first available space found on the disk, which ensured a great deal of disk fragmentation and related performance problems. By default under Windows&nbsp;95, VFAT first tries to allocate space in the first contiguous 0.5&nbsp;MB of free space, then returns to the MS-DOS method if it can't find at least this much contiguous free space. This optimizes performance for both the swap file and multimedia applications.</P>
<P>In some cases, you might choose to set a smaller value in the Registry, such as if you are not running demanding applications on the computer. A&nbsp;smaller value for <B>ContigFileAllocSize</B>, however, can lead to more fragmentation on the disk and, consequently, more disk access for the swap file or applications that require larger amounts of disk space.</P></FONT></BODY></HTML>
