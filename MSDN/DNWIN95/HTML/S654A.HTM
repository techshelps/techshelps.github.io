<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DriveSpace 3 Compression: An Overview</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h3>DriveSpace 3 Compression: An Overview</H3><P>The new compression manager provided with Microsoft Plus! contains several enhancements over Windows 95 DriveSpace. These enhancements include the following:</P>
<UL><LI>Enhanced compression with support for compressed drives up to 2&nbsp;GB (earlier versions support volumes of up to 512 MB), using a 32K cluster size (earlier versions use 8K clusters)</LI><LI>Support for storing compressed data for a cluster in multiple fragments when there are not enough continuous sectors on the disk to store the entire cluster</LI><LI>Compression is up to 20 percent faster than standard Windows&nbsp;95 compression on Pentium&trade;-based computers. Other x86-based computers should also run faster with DriveSpace 3 when the compression is configured for best performance. </LI></UL><P>As with earlier CVF versions, a DriveSpace 3 CVF has a name in the form DRVSPACE.<I>nnn</I>, where <I>nnn</I> is the CVF sequence number in the range 000 through 254.</P>
<H4><A NAME="sec0"></A>DriveSpace and Disk Properties Enhancements</H4><P>Microsoft Plus! adds the following features to Windows 95 DriveSpace:</P>
<UL><LI>New DriveSpace settings for specifying whether to use compression, what type of compression to use, and how to use it.</LI><LI>Support for compression enhancements on existing drives. You can upgrade existing DblSpace or DrvSpace drives to the Microsoft Plus! DriveSpace 3 format. </LI></UL><P>Microsoft Plus! also places drive-specific compression information (and the tools to manipulate it) where you would expect to find it: in the drive's properties. (System-wide compression settings and functions are still avaliable in the DriveSpace programs.) To present this information, a Compression tab is added to the property dialog boxes for all local hard and floppy disk drives, except compressed drives created by software from other vendors. Uncompressed drives that are hosts for one or more compressed volume files also have a Compression tab added to their properties. For hidden host drives, you must use the DriveSpace program to view information about the drive.</P>
<H4><A NAME="sec1"></A>How Compression Works with DriveSpace 3 </H4><P>Microsoft Plus! achieves a higher compression ratio by compressing data in 32K blocks (instead of 8K blocks used for DblSpace or DrvSpace), and by supporting two new levels of compression: HiPack and UltraPack. </P>
<P>HiPack compression uses the same encoding format as standard compression, but searches the entire history buffer for matches instead of being limited to a history window. </P>
<P>UltraPack compression uses a different encoding format. UltraPack format offers better compression than standard or HiPack compression, but files compressed in UltraPack format are also slower to decompress. UltraPack compression is available only by running Compression Agent. You cannot configure DriveSpace to save files in UltraPack format automatically. </P>
<P>Because the new UltraPack encoding format used DriveSpace 3 CVFs, the Microsoft Plus! DRVSPACE.BIN and DRVSPACX.VXD must be installed to read these CVFs.</P>
<P>Microsoft Plus! compression can also store more data on the disk than with standard DriveSpace compression because of improved fragmentation handling. With standard DrvSpace or DblSpace CVFs, the data for a cluster must be stored in contiguous sectors. When the volume is highly fragmented, it is possible to have many free sectors but not enough contiguous sectors to store a cluster (which can require up to 16 sectors on a DblSpace or DrvSpace CVF, and up to 64 sectors on a DriveSpace&nbsp;3 CVF). Microsoft Plus! compression avoids this problem by storing data for a fragmented cluster in a linked list of sectors when there are not enough continuous sectors to store the entire cluster. Microsoft Plus! compression also stores small directories in a single sector, whereas MS-DOS 6.x or Windows&nbsp;95 require 16 sectors.</P>
<H4><A NAME="sec2"></A>Using Compression Agent</H4><P>Compression Agent allows you make the following choices for compression methods:</P>
<UL><LI>Whether specified files should be in UltraPack format, and whether to downgrade a file from UltraPack format</LI><LI>Whether individual files, folders, or file types should be compressed and, if so, with what method</LI><LI>Whether to use compression for the rest of your files and, if so, which type </LI></UL><P>You can start Compression Agent manually or, more commonly, you can have System Agent start it automatically when the computer is idle or at any time you specify. Compression Agent uses the Windows&nbsp;95 Last Access Date to determine which files have not been used within a defined time (but Compression Agent does not modify the Last Access Date for any files).</P>
<P>The compression policies specified in the Compression Agent Settings dialog box control the standard policy used to compress files. However, you can also force or prevent a particular compression type on a particular file, or set of files, or folders, based on the following exceptions to the standard compression policy:</P>
<UL><LI>Never compress </LI><LI>Always compress with UltraPack format </LI><LI>Always compress with HiPack format </LI></UL><P>The following shows the Compression Agent command line syntax: </P>
<P><B>cmpagent</B> [<I>drive</I><B>:</B> |<B> /all</B>] [<B>/noprompt</B>]</P>
<P>The following table describes the parameters for this command.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="68pt" VALIGN="TOP"><COL WIDTH="279pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Parameter</B></P></TD><TD VALIGN="TOP"><P><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP"><P><I>drive:</I></P></TD><TD VALIGN="TOP"><P>Specifies drive to be recompressed.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>/all</B></P></TD><TD VALIGN="TOP"><P>Specifies all local, fixed drives that are compressed.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>/noprompt</B></P></TD><TD VALIGN="TOP"><P>Runs without waiting for the user to click Start, and without displaying a summary at the end. Errors are displayed. This switch can be shortened as <B>/nop</B>.</P></TD></TR></TBODY></TABLE>
<P><BR></P><H4><A NAME="sec3"></A>Guidelines for Fine-tuning Compression</H4><P>Typically, you will want to use the default values for Microsoft Plus! compression, which specify using standard or no compression when saving files. You can then set System Agent to run Compression Agent when the computer isn't busy to compress seldom-used files into UltraPack format and all other files into HiPack format.</P>
<P>When you are deciding when methods and formats to use for compression, you must consider whether you want to configure compression to ensure maximum disk space or maximum system performance.</P>
<P><B>Maximizing hard disk space.</B></P>
<P>If you require that compression provide maximum disk space on a computer, then you might want to specify that UltraPack format be used to compress most files. (UltraPack format is recommended for Pentium-based computers.) In addition, you can specify that files be compressed as they are saved. If your computer is very fast, specify that HiPack format be used.</P>
<P><B>Maximizing performance.</B></P>
<P>If you require maximum system performance, remember that files compressed in UltraPack format are much slower to decompress, so that if you try to access a document or run an application that is compressed in UltraPack format, you might have to wait before you can begin working again. For slower computers that require maximum performance, you can use System Agent and Compression Agent to specify that all compression is done while the computer is idle instead of compressing the files as they are saved. This provides the benefits of compression without any performance impact related to updating files.</P>
<P>To ensure maximium performance, you might want to define the following when configuring compression: </P>
<UL><LI>Use DriveSpace to specify that compression only occurs offline, not when each file is being saved, or specify that compression occurs only when disk space is low.</LI><LI>Specify a high threshold for UltraPack, so that, for example, Compression Agent recompresses in UltraPack format only those files that haven't been accessed within 30 or more days.</LI><LI>Set exceptions for files that should not be compressed in UltraPack format, such as executable files that you do not want to wait to have decompressed, even though you seldom use the files.</LI></UL><P>Notice that if you configure DriveSpace not to compress files as they are saved, or to compress files only when free space is low (using the Depends On Free Space option), the system reports free space as though files will not be compressed. As a result, the computer appears to have significantly less free space than it does when files are compressed as they are saved. However, if you use Compression Agent regularly, you will be able to store the same amount of data in this space.</P></FONT></BODY></HTML>
