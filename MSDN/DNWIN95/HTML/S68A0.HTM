<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting Up LMHOSTS Files</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h2>Setting Up LMHOSTS Files</H2><P>When you use Microsoft TCP/IP on a local network with any combination of computers running Windows&nbsp;95, Windows&nbsp;NT, LAN Manager, or Windows for Workgroups, server names are automatically matched to their corresponding IP addresses. However, to match server names across remote networks connected by routers (or gateways), you can use the LMHOSTS file if WINS servers are not available on the network. The LMHOSTS file is commonly used to locate remote computers for Microsoft networking file, printer, and remote access services, and for domain services such as logon, browsing, replication, and so on. </P>
<P></P>
<P>The LMHOSTS file used by Windows&nbsp;95 contains mappings of IP addresses to Microsoft networking computer names (which are NetBIOS names). Microsoft LAN Manager 2.x TCP/IP LMHOSTS files are compatible with Microsoft TCP/IP.</P>
<P>Microsoft TCP/IP loads the LMHOSTS file into memory when the computer is started. The LMHOSTS file is a text file in the Windows directory that lists the IP addresses and computer names of remote Windows networking servers that you want to communicate with. The LMHOSTS file should list all the names and IP addresses of the servers you regularly access. </P>
<P>For example, the LMHOSTS table file entry for a computer with an address of 192.45.36.5 and a NetBIOS computer name of Finance1 looks like this:</P>
<P><BR></P>
<pre><code>192.45.36.5      finance1</code></pre>
<P>The format for the LMHOSTS file is the same as the format for host tables in 4.2 MSD UNIX systems. The computer name is optionally enclosed in quotation marks (this is necessary for computer names that contain spaces). </P>
<H3><A NAME="sec0"></A>To create an LMHOSTS file</H3><OL><LI>Use a text editor to create a file named LMHOSTS, or edit the default file named LMHOSTS.SAM in the Windows directory and then save this file as LMHOSTS.</LI><LI>In the LMHOSTS file, type the IP address and the host name of each computer that you want to communicate with. Separate the items with at least one space.</LI></OL><P>Entries in the LMHOSTS file are not case-sensitive. </P>
<P>You will want to use LMHOSTS for smaller networks or to find hosts on remote networks that are not part of the WINS database (because name query requests are not broadcast beyond the local subnetwork). If WINS servers are in place on an internetwork, users do not have to rely on broadcast queries for name resolution, because WINS is the preferred method for name resolution. Therefore, with WINS servers in place, LMHOSTS may not be necessary. </P>
<P>However, the LMHOSTS file is read when WINS or broadcast name resolution fails, and resolved entries are stored in a system cache for later access. When the computer uses the replicator service and does not use WINS, LMHOSTS entries are required on import and export servers for any computers on different subnetworks participating in the replication. </P>
<P></P>
<P>You can use Notepad or any other text editor to edit the sample LMHOSTS.SAM file that is automatically installed in the Windows directory. The following rules apply for entries in LMHOSTS:</P>
<UL><LI>Each entry should be placed on a separate line. </LI><LI>The IP address should begin in the first column, followed by the corresponding computer name. </LI><LI>The address and the computer name should be separated by at least one space or tab. </LI><LI>The # character is usually used to mark the start of a comment. However, it can also designate special keywords, as described in this section. </LI></UL><P>The keywords listed in the following table can be used in LMHOSTS using Microsoft TCP/IP. Notice, however, that LAN Manager 2.x treats these keywords as comments.</P>
<P></P>
<P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="100pt" VALIGN="TOP"><COL WIDTH="248pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Keyword</B></P></TD><TD VALIGN="TOP"><P><B>Meaning</B></P></TD></TR><TR><TD VALIGN="TOP"><P>#PRE</P></TD><TD VALIGN="TOP"><P>Added after an entry to cause that entry to be preloaded into the name cache. By default, entries are not preloaded into the name cache but are parsed only after WINS and name query broadcasts fail to resolve a name. #PRE must be appended for entries that also appear in #INCLUDE statements; otherwise, the entry in #INCLUDE is ignored.</P></TD></TR><TR><TD VALIGN="TOP"><P>#DOM:<I>domain</I></P></TD><TD VALIGN="TOP"><P>Added after an entry to associate that entry with the domain specified by <I>domain</I>. This keyword affects how the Browser and Logon services behave in routed TCP/IP environments. To preload a #DOM entry, you must also add the #PRE keyword to the line.</P></TD></TR><TR><TD VALIGN="TOP"><P>#INCLUDE <I>filename</I></P></TD><TD VALIGN="TOP"><P>Forces the system to seek the specified <I>filename</I> and parse it as if it were local. Specifying a Universal Naming Convention (UNC) <I>filename</I> allows you to use a centralized LMHOSTS file on a server. You must add a mapping for the server before its entry in the #INCLUDE section and also append #PRE to ensure that it is preloaded (otherwise, the #INCLUDE will be ignored).</P></TD></TR><TR><TD VALIGN="TOP"><P>#BEGIN_ALTERNATE</P></TD><TD VALIGN="TOP"><P>Used to group multiple #INCLUDE statements. Any single successful #INCLUDE statement causes the group to succeed.</P></TD></TR><TR><TD VALIGN="TOP"><P>#END_ALTERNATE</P></TD><TD VALIGN="TOP"><P>Used to mark the end of an #INCLUDE grouping.</P></TD></TR><TR><TD VALIGN="TOP"><P>\0x<I>nn</I></P></TD><TD VALIGN="TOP"><P>Support for nonprinting characters in NetBIOS names. Enclose the NetBIOS name in double quotation marks and use \0x<I>nn</I> hexadecimal notation to specify a hexadecimal value for the character. This allows custom applications that use special names to function properly in routed topologies. However, LAN Manager TCP/IP does not recognize the hexadecimal format, so you surrender backward compatibility if you use this feature.</P>
<P>Notice that the hexadecimal notation applies only to one character in the name. The name should be padded with blanks so the special character is last in the string (character 16).</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>The following example shows how all of these keywords are used:</P>
<P><BR></P>
<pre><code>102.54.94.98      localsrv   #PRE
102.54.94.97      trey      #PRE   #DOM:networking   #net group's PDC
102.54.94.102   "appname        \0x14"      #special app server
102.54.94.123   popular      #PRE      #source server
#BEGIN_ALTERNATE
#INCLUDE \\localsrv\public\lmhosts      #adds LMHOSTS from this server
#INCLUDE \\trey\public\lmhosts      #adds LMHOSTS from this server
#END_ALTERNATE</code></pre>
<P>In the preceding example:</P>
<UL><LI>The servers named <B>localsrv</B> and <B>trey</B> are preloaded so they can be used later in an #INCLUDE statement in a centrally maintained LMHOSTS file.</LI><LI>The server named <B>"appname        \0x14" </B>contains a special character after the 15 characters in its name (including blanks), so its name is enclosed in double quotation marks.</LI><LI>The server named <B>popular</B> is preloaded, based on the #PRE keyword.</LI></UL><H3><A NAME="sec1"></A>Guidelines for LMHOSTS</H3><P>When you use a host table file, be sure to keep it up to date and organized. Follow these guidelines:</P>
<UL><LI>Update the LMHOSTS file whenever a computer is changed or removed from the network.</LI><LI>Use #PRE statements to preload popular entries into the local computer's name cache and to preload servers that are included with #INCLUDE statements.</LI><LI>Because LMHOSTS files are searched one line at a time from the beginning, you can increase the speed of searches for the entries used most often by placing frequently used servers near the top of the file. Follow these with less frequently used servers, and then remote #INCLUDE statements. The #PRE entries should be at the end of the file, because these are preloaded into the cache at system startup time and are not accessed later. Comment lines add to the parsing time, because each line is processed individually.</LI></UL><P></P>
<P></P>
<P></P></FONT></BODY></HTML>
