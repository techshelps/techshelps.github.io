<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Optimizing File System Performance</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h2>Optimizing File System Performance</H2><P>In Windows&nbsp;95, the disk cache is dynamic. You do not need to configure its size as part of system configuration. Because of this, the following types of settings used for Windows 3.x are not required in Windows&nbsp;95 and should be removed from the configuration files.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="90pt" VALIGN="TOP"><COL WIDTH="257pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Configuration file</B></P></TD><TD VALIGN="TOP"><P><B>Configuration setting to remove</B></P></TD></TR><TR><TD VALIGN="TOP"><P>autoexec.bat</P></TD><TD VALIGN="TOP"><P>SHARE<BR>SMARTDRV settings<BR>Any entries for other disk cache software1</P></TD></TR><TR><TD VALIGN="TOP"><P>config.sys</P></TD><TD VALIGN="TOP"><P>SMARTDRV settings (double-buffer driver)<BR>Any entries for other disk cache software</P></TD></TR></TBODY></TABLE>
<P><BR></P><P>1   For a list of the disk caching software that is removed by Windows&nbsp;95 Setup, see Chapter 6, "Setup Technical Discussion."</P>
<P>The overall performance, for example, of a computer with 8&nbsp;MB of memory is better under Windows&nbsp;95 than under Windows 3.1. However, the amount of paging might be more under Windows 95 for several reasons:</P>
<UL><LI>Windows 95 aggressively writes the contents of dirty memory pages (pages that contain changes) during system idle time, even if it doesn't need the memory at that time. This causes more idle-time disk activity but speeds up future memory allocations by doing some of the work when the system is idle.</LI><LI>Much more of Windows 95 can be paged out to disk than Windows 3.1. That's why it's even possible to still run applications on low-memory computers when Windows&nbsp;95 requires a working set of 4&nbsp;MB. However, the working set isn't the amount of memory you need to hold all code and data; it's just the amount of memory you need to avoid an unacceptable amount of paging.</LI></UL><P>Changing the cache size (even if you could) probably wouldn't have much effect on paging. Paging through the cache would quickly overwhelm it and make it useless for other file I/O. Although swap file I/O operations don't go through the cache, memory-mapped files and executable files do. The cache, however, is designed to make sure it can't be overwhelmed by such I/O operations.</P>
<P>The cache grows and shrinks as needed. If the system begins to page a lot, the cache shrinks automatically. However, people often think they are seeing a lot of paging, but they are really seeing other disk activity, such as Windows 95 building its icon cache or the cache lazy writing.</P>
<P>If the amount of paging is extreme, to the point where system performance is poor, then you probably have a hard disk that requires a real-mode device driver. If Windows 95 needs to use real-mode for its disk I/O operations, then a lot of code has to be locked down that would otherwise be pageable, and your working set increases significantly. Paging through a real-mode driver does increase paging, but on a computer with 8&nbsp;MB of memory, it shouldn't cause unacceptable performance. </P>
<H3><A NAME="sec0"></A>Tip for 32-bit Disk Access in Windows 95</H3><P>The 32-bit disk access feature is always turned on in Windows&nbsp;95 unless Windows&nbsp;95 detects a real-mode disk driver that doesn't have a protected-mode replacement. This could be, for example, an older Stacker&reg; driver or a hard-disk security or encryption driver for a disk drive. </P>
<P>To prevent the performance loss that occurs when Windows&nbsp;95 is forced to use a real-mode disk driver, upgrade to a protected-mode replacement for that driver. If you need to determine why a Windows&nbsp;95 real-mode disk driver was installed, check the IOS.LOG file. For more information, see Chapter 19, "Devices."</P>
<P></P></FONT></BODY></HTML>
