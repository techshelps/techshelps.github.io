<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Troubleshooting File and Disk Problems</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h2>Troubleshooting File and Disk Problems</H2><P>This section provides information for troubleshooting disk and file system problems, problems with disk utilities, and problems with long filenames.</P>
<P>For information about using the Troubleshooting dialog box for File System Properties in the System option in Control Panel, see Chapter 17, "Performance Tuning."</P>
<H3><A NAME="sec0"></A>There are performance problems with the floppy disk drive.</H3><P>You can try preventing the floppy disk device driver from attempting to use first-in, first-out (FIFO). To do this, add the value <B>ForceFIFO=0</B> to the following Registry key:</P>
<P><BR></P>
<pre><code>Hkey_Local_Machine\System\CurrentControlSet\Services\Class\FDC\0000</code></pre>
<H3><A NAME="sec1"></A>Windows 95 cannot access the drive or reports only 2&nbsp;GB total disk space on larger drive.</H3><P>In the first release of Windows&nbsp;95, the network client was designed to maintain compatibility with MS-DOS – based applications that assume a 2-GB drive-size limit. If a network drive, such as an NTFS volume on a Windows NT server, has more than 2&nbsp;GB of free disk space, Windows&nbsp;95 reports only that 2 GB are available and 0 bytes are used.</P>
<P>Microsoft does not recommend using Windows&nbsp;95 with a FAT volume larger than 2&nbsp;GB created in Windows&nbsp;NT. On a dual-boot computer with both Windows&nbsp;95 and Windows&nbsp;NT installed, you can read from and write to the drive, but you might experience strange results, such as programs reporting 0 bytes free space on the drive. However, you shouldn't experience data loss when accessing a 4-GB drive.</P>
<H3><A NAME="sec2"></A>Disk utilities fail on a Windows&nbsp;95 volume.</H3><P>Disk utilities that were not designed for the Windows&nbsp;95 VFAT file system can find unexpected values in fields that were once reserved for MS-DOS. Use disk utilities designed for Windows&nbsp;95 instead. You might be able to use some earlier utilities by first running LFNBK, as described in "Using the LFNBK Utility for Temporary Compatibility" earlier in this chapter.</P>
<H3><A NAME="sec3"></A>Problems occur with shortcuts after compressing the Windows&nbsp;95 volume with Stacker.</H3><P>Stacker does not recognize or accommodate long filenames. If you compress your Windows&nbsp;95 volume by using the Stacker DOS compression program, your desktop shortcuts will need to be repaired manually. You will also need to move USER.DAT and USER.DA0 from the host volume to your compressed volume. If you are using Stacker, do not run DriveSpace or DoubleSpace.</P>
<H3><A NAME="sec4"></A>A CVF will not mount.</H3><P>Check the D??SPACE.INI file in the root directory of the boot drive. If this file is damaged, use the DriveSpace program to rebuild it.</P>
<H3><A NAME="sec5"></A>The d??space /mount command in AUTOEXEC.BAT does not work.</H3><P>This occurs because Windows 95 Setup deletes or renames the MS-DOS – based versions of DRVSPACE.EXE and DBLSPACE.EXE. To solve this problem, use <B>scandisk /mount</B> as the replacement command live in AUTOEXEC.BAT. The version of ScanDisk provided with Windows 95 has been enhanced for this purpose. For more information, see Appendix A, "Command-Line Commands Summary."</P>
<H3><A NAME="sec6"></A>Long-Filename Troubleshooting Tips</H3><UL><LI>Long filenames can cause problems for some disk utilities. Be sure to use disk utilities that are long filename-aware. If you are not sure whether your utility is long filename-aware, consult your disk utility documentation. If long filenames are not mentioned, then your utility probably does not support long filenames.</LI><LI>Using a down-level file system command (such as <B>copy</B> or <B>rename)</B> rather than the Windows&nbsp;95 equivalent will destroy a long filename.</LI><LI>Because the root directory is limited to 512 entries, you can fill the root directory with fewer files by using long filenames because each long filename takes more than one entry in the directory.</LI><LI>Although you can disable the creation of long filenames, this should be used only if error conditions warrant it and if other troubleshooting efforts have failed. For information about turning off the extended file sysrem features, see "Technical Notes on Long Filenames: earlier in this chapter.</LI></UL><H4><A NAME="sec7"></A>The 8.3 filename alias was changed. </H4><P>This can happen when you use options such as Copy, Backup, or Restore. For example, if a file with the name LongFileName is associated with an alias LONGFI~2, and this file is copied to a different directory by using the following: </P>
<P><B>copy LongFileName \TMP\LongFileName</B></P>
<P>Then the alias associated with this file can become LONGFI~1, if such an alias is not already present in the target directory. </P>
<H4><A NAME="sec8"></A>The long filename was destroyed. </H4><P>This can happen when transferring files to or from file systems that do not support long filenames, when running file searches, or when using certain disk utilities. The long filename cannot be restored.</P>
<H4><A NAME="sec9"></A>A long filename was lost after the file was edited on another computer.</H4><P>This occurs because down-level file systems are not aware of the long filename extensions to the FAT file system. </P>
<H4><A NAME="sec10"></A>Hard disk device drivers cause the computer to stall.</H4><P>The I/O Supervisor, which loads hard disk (block) device drivers, requires the driver's files (having filename extensions .PDR, .MPD, .VXD, and .386) to be located in the SYSTEM\IOSUBSYS subdirectory of the Windows directory. </P>
<P>If the computer locks up during startup or hardware detection, try the following:</P>
<UL><LI>Check for Windows&nbsp;NT miniport drivers (.SYS files in the IOSUBSYS directory). These drivers detect the I/O ports and might cause the computer to stop. Replace the Windows&nbsp;NT driver with either a Windows&nbsp;95 miniport or a real-mode driver.</LI><LI>Check the IOS.INI file for real-mode drivers not replaced by protected-mode drivers.</LI><LI>When loading protected-mode drivers, the real-mode driver generally remains loaded in memory even though the protected-mode driver "takes over." If you suspect a conflict, type <B>rem</B> at the beginning of the line in CONFIG.SYS that calls the real-mode driver.</LI><LI>Users might have problems with devices (such as tape backups) that use ASPI drivers. Try using only real-mode drivers, then try using only protected-mode drivers. </LI></UL><H4><A NAME="sec11"></A>Virus-detection utilities don't remove a virus.</H4><P>In general, virus-detection utilities created from earlier versions of Windows can detect but not clean viruses from Windows&nbsp;95. This is because virus-detection utilities use low-level writes to repair the disk. MS-DOS – based utilities can still be run using the <B>lock</B> command. </P>
<P></P></FONT></BODY></HTML>
