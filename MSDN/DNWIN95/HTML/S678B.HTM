<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>File System Drivers</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h3>File System Drivers</H3><P>With Windows 3.1, file system drivers were supported by MS-DOS. With Windows&nbsp;95, file system drivers are Ring 0 components of the operating system. Windows&nbsp;95 includes support for all of the following file systems (others can be added by other vendors):</P>
<UL><LI>32-bit FAT (VFAT) driver</LI><LI>32-bit CD-ROM file system (CDFS) driver</LI><LI>32-bit network redirector for connectivity to Microsoft Network servers such as Windows&nbsp;NT Server, along with a 32-bit network redirector to connect to Novell NetWare servers</LI></UL><P>For information about network redirectors, see Chapter 32, "Windows 95 Network Architecture."</P>
<H4><A NAME="sec0"></A>VFAT File System</H4><P>The 32-bit VFAT driver provides a protected-mode code path for manipulating the file system stored on a disk. Because it is reentrant and multithreaded, it provides smoother multitasking performance. </P>
<P>The 32-bit VFAT driver interacts with the block I/O subsystem to provide disk access to more device types than are supported by Windows&nbsp;3.1. Windows&nbsp;95 also supports mapping to any real-mode disk drivers that might be installed. The combination of 32-bit file access and 32-bit disk access drivers results in significantly improved disk and file I/O performance.</P>
<P>Benefits of the 32-bit file access driver over MS-DOS – based driver solutions include the following:</P>
<UL><LI>Dramatically improved performance and real-mode disk caching software</LI><LI>No conventional memory used (real-mode SMARTDrive has been replaced)</LI><LI>Better multitasking when accessing information on disk</LI><LI>Dynamic cache support</LI></UL><P>Both MS-DOS and Windows 3.1 used 16-bit real-mode code to manipulate the file allocation table (FAT) and to read to and write from the disk. Being able to manipulate the disk file system from protected mode removes or reduces the need to switch to real mode to write information to the disk through MS-DOS, thus resulting in a performance gain for file I/O access.</P>
<P>The 32-bit VFAT works with a 32-bit, protected-mode cache driver (VCACHE). This driver replaces the 16-bit, real-mode SMARTDrive disk cache software provided with MS-DOS and Windows 3.1. The VCACHE driver features better caching algorithms than SMARTDrive, to cache information read from or written to a disk drive. The VCACHE driver also manages the cache pool for the CD-ROM File System (CDFS) and the 32-bit network redirectors provided with Windows&nbsp;95.</P>
<P>Another big improvement in VCACHE over SMARTDrive is that the memory pool used for the cache is dynamic and is based on the amount of available free system memory. Users no longer need to allocate a block of memory as a disk cache. The system automatically allocates or deallocates memory used for the cache based on system use.</P>
<P>For example, as you perform a large number of activities on the network, Windows&nbsp;95 increases the size of the cache. As network activity decreases and more applications are started, Windows&nbsp;95 decreases the cache size.</P>
<H4><A NAME="sec1"></A>CD-ROM File System</H4><P>The 32-bit, protected-mode CDFS implemented in Windows&nbsp;95 provides improved CD-ROM access and performance over the real-mode MSCDEX driver in Windows 3.1. (CDFS conforms to the ISO 9660 standard.) The CDFS driver cache is also dynamic, requiring no configuration or static allocation on the part of the user. For information about the CD-ROM cache, see Chapter 17, "Performance Tuning."</P>
<P></P>
<P>Benefits of the new 32-bit CDFS driver include the following:</P>
<UL><LI>No conventional memory used (real-mode MSCDEX has been replaced)</LI><LI>Improved performance over MS-DOS – based MSCDEX and real-mode cache</LI><LI>Better multitasking when accessing CD-ROM information </LI><LI>Dynamic cache support to provide a better balance between providing memory to run applications versus providing memory to serve as a disk cache</LI></UL><P>MSCDEX is no longer necessary under Windows&nbsp;95, and is automatically removed from memory and from AUTOEXEC.BAT by Setup, and the 32-bit CDFS driver is used instead. </P></FONT></BODY></HTML>
