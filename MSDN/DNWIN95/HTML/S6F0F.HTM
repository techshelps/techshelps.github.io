<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Technical Notes on MACHINES.INI and SETMDIR</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
<FONT FACE="verdana,arial,helvetica" size="2">
<h3>Technical Notes on MACHINES.INI and SETMDIR</H3><P>MACHINES.INI is a file that lists, for each client, the location of the machine directory and other drive letters to connect. This file is stored on the server containing the shared Windows 95 files. The following shows the format of each entry in MACHINES.INI:</P>
<P><BR></P>
<pre><code>[<I>Node_address</I>]
sysdatpath=<I>drive</I>:\<I>path</I>
<I>drive</I>=<I>\\server\share specified in sysdatpath</I></code></pre>
<P>The <I>Node_address</I> section name is the 12-character address of the network adapter for a particular computer. You can find this address on NetWare networks by using the <B>userlist/a</B> command. On computers running Windows for Workgroups or Microsoft Workgroup Add-On for MS-DOS, you can find this address using the <B>net diag&nbsp;/s</B> command. If the node address you find is less than 12 characters long, you must add 0 (zero) characters at the front of the address. For example, if the node address is AA00578902, then the section name must be [00AA00578902].</P>
<P>The path defined in <B>sysdatpath= </B>must be a drive that is mapped to a drive letter in the same MACHINE.INI section.</P>
<P>In the following example, the machine directory is set to E:\DIR1\DIR2, and drives C, D, and E are set to network locations:</P>
<P><BR></P>
<pre><code>[00AA0051E4FB]
SysDatPath=e:\dir1\dir2
c=\\server1\share1
d=\\server2\share2
e=\\server3\share3</code></pre>
<P><B>Note</B>   A section entry must be included in MACHINES.INI for each remote-boot workstation or floppy-disk computer in order for the computer to be started. </P>
<P>The <B>setmdir</B> command is used to set the machine directory for the computer and load the full Registry. </P>
<P>The floppy startup disk or disk image for shared installations contains only a mini Registry large enough to start the real-mode network. The startup disk for shared installations does not contain the information to find the machine directory, so that a single boot image on the network (or floppy startup disk) can be used to start several computers. The <B>setmdir</B> command solves this problem.</P>
<P>For computers running Client for Microsoft Networks and Microsoft Client for NetWare Networks, the <B>setmdir </B>command connects to the directory that contains the shared Windows&nbsp;95 files and looks for MACHINES.INI. When the <B>setmdir</B> command finds the computer entry in MACHINES.INI, it switches the Registry APIs to point to the full Registry.</P>
<P>For computers that use real-mode networking clients, the <B>setmdir</B> command-line includes the path to the machine directory, rather than using MACHINES.INI. This is because the system has no guaranteed way of finding node addresses on other networks.</P>
<P><B>Setmdir Parameters</B></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="82pt" VALIGN="TOP"><COL WIDTH="265pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P><B>Parameter</B></P></TD><TD VALIGN="TOP"><P><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP"><P><B>/V</B> </P></TD><TD VALIGN="TOP"><P>Sets verbose mode, so information is displayed while the program is running.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>/R:</B><I>path</I> </P></TD><TD VALIGN="TOP"><P>Sets the current Registry and environment variables to the specified path. For example, <B>setmdir /R:d:\users\anniep</B> does the following:</P>
<P> <FONT FACE="symbol">u</FONT>  Sets the Registry to D:\USERS\ANNIEP\SYSTEM.DATA<BR> <FONT FACE="symbol">u</FONT>  Adds D:\USERS\ANNIEP to the path<BR> <FONT FACE="symbol">u</FONT>  Sets the following environment variables:</P>
<P>   comspec=d:\users\anniep\command.com<BR>   temp=d:\users\anniep<BR>   tmp=d:\users\anniep</P></TD></TR></TBODY></TABLE>
<P><BR></P></FONT></BODY></HTML>
