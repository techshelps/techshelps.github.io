<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Participating in the Two-Phase Commit Protocol</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h1><a name="asparticipatinginthetwophasecommitprotocol"></a>Participating in the Two-Phase Commit Protocol</h1>
<p>
After a resource manager enlists in a transaction, it needs to participate in the <i>two-phase commit protocol</i>. The following figure shows the relationship between the objects that participate in the two-phase commit.</p>
<p>
<img src="images/virm33.gif" border=0></p>
<p>
A resource manager enlists in a transaction by calling the <b>IResouceManager::Enlist</b> method and passes an instance of the <b>ITransactionResourceAsync</b> interface. The transaction coordinator delivers the <b>Prepare</b>, <b>Commit</b>, and <b>Abort</b> notifications to the resource manager via this callback interface. The following state diagrams show the states of the enlistment object as it exists in the MS DTC proxy and the states of the resource manager from the perspective of the enlistment object in the MS DTC proxy.</p>
<p>&nbsp; </p></body>
</HTML>
