<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Life of a Transaction: Resource Manager Startup (Phases)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h1><a name="aslifeofatransactionresourcemanagerstartupphases"></a>Life of a Transaction: Resource Manager Startup (Phases)</h1>
<table cellspacing=5 cols=2>
<tr valign=top>
<td width=16%>c1</td>
<td width=84%>The resource manager calls the <b>DtcGetTransactionManager </b>procedure in the MS DTC proxy to establish a connection to the transaction manager. The resource manager may either specify the name and location of the transaction manager it chooses to use or it may specify NULL values for these parameters. Normally, the resource manager specifies NULL values for these parameters. This causes the MS DTC proxy to establish a connection with the default MS DTC transaction manager. The name of the default transaction manager is contained in the system registry.</td>
</tr>
<tr valign=top>
<td width=16%>c2</td>
<td width=84%>The<b> DtcGetTransactionManager</b> system call is implemented by the MS DTC proxy. The MS DTC proxy returns a pointer to the <b>IUnknown </b>interface of the MS DTC proxy core object.</td>
</tr>
<tr valign=top>
<td width=16%>c3.1</td>
<td width=84%>The resource manager invokes the <b>IUnknown::QueryInterface</b> method on the MS DTC proxy core object to obtain the <b>IResourceManagerFactory</b> interface<b>.</b></td>
</tr>
<tr valign=top>
<td width=16%>c3.2</td>
<td width=84%>The resource manager invokes the <b>IResourceManagerFactory::Create </b>method<i>. </i>The resource manager passes its own GUID (guidRM) and string name. The transaction manager will use the resource manager’s string name to label the resource manager. This simplifies system administration by associating a symbolic name with the resource manager.</td>
</tr>
<tr valign=top>
<td width=16%>c4</td>
<td width=84%>When the <b>IResourceManagerFactory::Create</b> method is called, the MS DTC proxy calls the Connection Manager to establish a connection  to the transaction manager.</td>
</tr>
<tr valign=top>
<td width=16%>c5</td>
<td width=84%>The transaction manager creates a internal object that represents the connection between the resource manager and the transaction manager. The transaction manager then returns to the MS DTC proxy.</td>
</tr>
<tr valign=top>
<td width=16%>c6</td>
<td width=84%>The MS DTC proxy creates a resource manager object and returns a pointer to the <b>IResourceManager</b> interface of that object to the resource manager. The <b>IResourceManager</b> interface is used by the resource manager to enlist in transactions and to perform transaction recovery.</td>
</tr>
</table><br>
<p>&nbsp; </p></body>
</HTML>
