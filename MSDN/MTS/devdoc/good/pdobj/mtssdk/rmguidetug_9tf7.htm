<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Life of a Transaction: Enlistment in a Transaction I (Phases)</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h1><a name="aslifeofatransactionenlistmentinatransactioniphases"></a>Life of a Transaction: Enlistment in a Transaction I (Phases)</h1>
<table cellspacing=5 cols=2>
<tr valign=top>
<td width=12%>i1</td>
<td width=88%>The client invokes the RM proxy, asking it to perform a resource manager operation. For a relational database this might involve inserting, deleting, or updating a record, or invoking a stored procedure that updates the database.</td>
</tr>
<tr valign=top>
<td width=12%>i2</td>
<td width=88%>The RM proxy sends a message to the resource manager asking it to perform the appropriate operation.</td>
</tr>
<tr valign=top>
<td width=12%>i3</td>
<td width=88%>The resource manager determines which transaction, if any, is associated with this RM proxy-to-resource manager session. If a transaction is associated with the session, the resource manager determines if it has already enlisted in this transaction. If not, it invokes the <b>IResourceManager::Enlist </b>method. The first <b>Enlist</b> parameter is a pointer to the transaction object. The second <b>Enlist</b> parameter is a pointer to the <b>ITransactionResourceAsync</b> interface. The resource manager is responsible for implementing the <b>ITransactionResourceAsync</b> interface. This interface includes the <b>PrepareRequest, CommitRequest, AbortRequest</b> and<b> TMDown</b> callback methods. The transaction manager will invoke these resource manager callback methods to deliver phase one and phase two notifications to the resource manager.</td>
</tr>
<tr valign=top>
<td width=12%>i4</td>
<td width=88%>The MS DTC proxy communicates with the transaction manager, informing it that the resource manager chooses to enlist in the transaction.</td>
</tr>
</table><br>
<p>&nbsp; </p></body>
</HTML>
