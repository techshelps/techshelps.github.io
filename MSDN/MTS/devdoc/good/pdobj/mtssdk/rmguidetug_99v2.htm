<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Delegated Commit Optimization</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h1><a name="asdelegatedcommitoptimization"></a>Delegated Commit Optimization</h1>
<p>
MS DTC permits commit coordinator responsibility to be delegated from the coordinating transaction manager to one of its subordinate transaction managers or resource managers. Commit coordinator delegation occurs when the coordinating transaction manager detects that only one subordinate resource manager or transaction manager is enlisted in the transaction.</p>
<p>
The coordinating transaction manager delegates commit coordinator responsibility to the resource manager when both of the following two conditions are <b>True</b>:
<ol>
<li>
No subordinate transaction manager is enlisted in the transaction.</li>
<li>
Only one resource manager is enlisted in the transaction.</li>
</ol>
<p>
In this case, the coordinating transaction manager sets <i>fSinglePhase</i> when invoking the <b>ITransactionResourceAsync::PrepareRequest</b> method at phase one. This instructs the resource manager that it should act as the transaction coordinator.</p>
<p>
MS DTC delegates commit coordinator responsibility to the subordinate transaction manager when both of the following two conditions are <b>True</b>:
<ol>
<li>
No resource manager is enlisted in the transaction with the current coordinating transaction manager.</li>
<li>
Only one subordinate transaction manager is enlisted in the transaction.</li>
</ol>
<p>
In this case, the coordinating transaction manager sends a “delegated commit” message in place of the phase one message. The “delegated commit” message transfers commit coordinator responsibility from the current coordinating transaction manager  to its subordinate transaction manager. This optimization is applied recursively. A transaction manager that receives commit coordinator responsibility may delegate commit coordinator responsibility to its subordinate transaction manager or resource manager.</p>
<p>&nbsp; </p></body>
</HTML>
