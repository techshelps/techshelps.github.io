<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MprAdminGetIpAddressForUser</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_mpr_mpradmingetipaddressforuser"></a>MprAdminGetIpAddressForUser</h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
RAS calls <b>MprAdminGetIpAddressForUser</b> once for each user that requires an IP address. RAS calls the function with the IP address that RAS selects for the user. The third-party DLL that implements this function may change this address to one of its own choosing.</p>
<pre><code><b>DWORD MprAdminGetIpAddressForUser(
</b>  <b>WCHAR </b>* <i>lpwszUserName</i><b>,</b>    // pointer to username 
  <b>WCHAR </b>* <i>lpwszPortName</i><b>,</b>    // pointer to port name 
  <b>DWORD</b> * <i>lpdwIpAddress</i><b>,</b>    // pointer to IP address 
  <b>BOOL</b> *  <i>bNotifyRelease</i>    // notify DLL when user disconnects 
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>lpwszUserName</i></dt>
<dd>
Pointer to a Unicode string containing the name of the user requiring an IP address. </dd>
<dt>
<i>lpwszPortName</i></dt>
<dd>
Pointer to a Unicode string containing the name of the port on which the user is attempting to connect. </dd>
<dt>
<i>lpdwIpAddress</i></dt>
<dd>
Pointer to a <b>DWORD</b> variable. When RAS calls the function this variable contains either the IP address RAS intends to allocate for the user or zero. If the variable contains an IP address, the DLL can either accept the address or substitute a different one. If the variable contains a zero, the DLL must allocate an IP address for the user. If this variable is zero, and the DLL does not allocate an IP address, the user will not be able to connect.</dd>
<dt>
<i>bNotifyRelease</i></dt>
<dd>
Pointer to a <b>BOOL</b> variable. If the DLL sets this variable to TRUE, RAS will call <a href="rasadmin_2roz.htm"><b>MprAdminReleaseIpAddress</b></a> when the user disconnects. Otherwise, RAS will not notifiy the DLL when this IP address is released. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
If function succeeds, the return value should be NO_ERROR.</p>
<p>
If the function returns anything other than NO_ERROR, RAS will terminate the connection.</p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 5.0 and later.<br>
&nbsp;&nbsp;<b>Windows:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in mprapi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> user-defined.</p>
<h4>See Also</h4>
<p>
<a href="rasadmin_2roz.htm"><b>MprAdminReleaseIpAddress</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
