<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Authentication Protocol Initialization</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_mpr_authentication_protocol_initialization"></a>Authentication Protocol Initialization</h2>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
When creating a phonebook entry for a particular connection, the user will select an authentication protocol to use for that connection. The authentication protocol may require configuration. If so, the Dial-Up Networking user interface (UI) will display a configuration user interface by calling the <a href="eapref_0d61.htm"><b>RasEapInvokeConfigUI</b></a> function. The Dial-Up Networking UI stores the connection-specific configuration information returned by <b>RasEapInvokeConfigUI</b> in the phonebook entry. Additionally, the Dial-Up Networking UI stores the user-specific configuration information in the registry under HKEY_CURRENT_USER. The setup program for the authentication protocol may also store default configuration information in the registry. For more information, see <a href="eapover_0i0e.htm">EAP Installation</a>.</p>
<p>
The Dial-Up Networking UI will request an identity for the user. If the authentication protocol has RAS_EAP_VALUENAME_INVOKE_STDUI set to one in the registry, the Dial-Up Networking UI will display the standard Windows&nbsp;NT credentials dialog. Otherwise, the identity may be of a type specific to the authentication protocol, for example a certificate or numeric ID. In either case, the identity information will also be stored in the registry under HKEY_CURRENT_USER. The setup program for the authentication protocol may also store default identity information in the registry. For more information, see <a href="eapover_0i0e.htm">EAP Installation</a>.</p>
<p>
When RAS attempts to establish the connection, it will call the <a href="eapref_186m.htm"><b>RasEapBegin</b></a> function for the specified authentication protocol. This allows the protocol to allocate and initialize a work buffer that RAS will pass on subsequent calls to <a href="eapref_2tgl.htm"><b>RasEapMakeMessage</b></a> and <a href="eapref_7t5w.htm"><b>RasEapEnd</b></a>. In <b>RasEapBegin</b>, RAS will also pass a <a href="eapref_9xo4.htm"><b>PPP_EAP_INPUT</b></a> structure that contains a pointer to the configuration information for the connection. </p>
<p>
Within the<b> <a href="eapref_9xo4.htm">PPP_EAP_INPUT</a></b> structure, the <b>fAuthenticator</b> member indicates whether the authentication protocol is being invoked as an authenticatee (client) or authenticator (server). On the client, RAS will always pass in values for the <b>pszIdentity</b> and <b>pszPassword</b> members. On the server, RAS will always pass in a value for <b>pszIdentity</b>. </p>
<p>
If the <a href="eapref_186m.htm"><b>RasEapBegin</b></a> call returns any value other than NO_ERROR, the session will be disconnected. The returned error will be logged (on the server), or displayed to the user (on the client).</p>
<p>&nbsp;</p></body>
</HTML>
