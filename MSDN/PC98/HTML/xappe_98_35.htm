<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Server Behavior</title>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<font face="verdana, arial, helvetica" size="2"><h1>
Server Behavior</h1>
<p>
The server behavior needed for the extended protocol comprises two pieces of functionality: a redirection service, and an installation service.
<ul>
<li>
The redirection service receives extended DHCPDISCOVER messages (generated by the client Initiation step) on the standard DHCP server port (67) and responds with DHCPOFFER messages containing the location (IP address) of the installation service.<br><br></li>
<li>
The installation service receives extended DHCPREQUEST messages (generated by the client Installation Service Request step) on UDP port 4011 and responds with DHCPACK messages containing the location (IP address) of the TFTP service and the file name of a new system setup executable appropriate to the client.<p>
A standard DHCP service may be extended to include the functionality of either the redirection service or the installation service. In this case, this extended DHCP service must implement all behaviors specified for the service included.
<p>
Redirection Service Behavior
<p>
This section summarizes the behavior of the redirection service to the DHCPDISCOVER message and other DHCP messages.
<p>
<b>Response to DHCPDISCOVER</b>
<p>
The redirection service will always be prepared to receive on UDP port 67, an extended DHCPDISCOVER message with contents as described earlier in the &ldquo;Initiation&rdquo; section. The redirection service will only respond to messages which include DHCP Option 60 with the value of &ldquo;PXEClient&rdquo;.
<p>
If the redirection service responds to a message, it will respond by sending to the initiating client a DHCPOFFER message containing options as described earlier in the &ldquo;Discovery Reply&rdquo; section:
<p>
The &ldquo;siaddr&rdquo; field in the reply, if filled in, will be the location of an installation service. If the &ldquo;siaddr&rdquo; field is not filled in then the installation service is at the same address as the redirection service.
<p>
The client IP address field of the message will be 0.0.0.0.
<p>
If the redirection service is also a standard DHCP configuration service, then the DHCPOFFER message sent to the client will be as specified in RFC 1541. 
<p>
Installation Service Behavior
<p>
This section summarizes the behavior of the installation service to the DHCPREQUEST message and TFTP service messages.
<p>
<b>response to DHCPREQUEST</b>
<p>
The installation service will always be prepared to receive a DHCPREQUEST message with contents as described earlier in the &ldquo;Installation Service Request&rdquo; section. The installation service will respond by sending to the initiating client a DHCPACKNOWLEDGE message as described earlier in the &ldquo;Installation Service Reply&rdquo; section. The file name in this message will be the complete path name of a new system setup executable appropriate to the client that is accessible using TFTP from the installation server&rsquo&rsquo;s IP address.
<p>
TFTP Service
<p>
The server running the installation service will provide TFTP service, as described in the previous section.

</li>
</ul>
</font></BODY>
</HTML>
