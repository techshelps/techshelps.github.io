<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The type_from_xmit Function</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_rpc_type_from_xmit"></a>The type_from_xmit Function</h2>
<p>
The stubs call the <i>type</i><b>_from_xmit</b> function to convert data from its transmitted type to the type that is presented to the application. The function is defined as:</p>
<pre><code>void __RPC_USER &lt;<i>type&gt;</i>_from_xmit ( 
    &lt;<i>xmit</i>_<i>type&gt;</i> __RPC_FAR *, 
    &lt;<i>type&gt;</i> __RPC_FAR *);
 </code></pre>
<p>
The first parameter is a pointer to the transmitted data. The function sets the second parameter to point to the presented data.</p>
<p>
The <i>type</i><b>_from_xmit</b> function must manage memory for the presented type. The function must allocate memory for the entire data structure that starts at the address indicated by the second parameter, except for the parameter itself (the stub allocates memory for the root node and passes it to the function). The value of the second parameter cannot change during the call. The function can change the contents at that address.</p>
<p>
In this example, the function <b>DOUBLE_LINK_TYPE_from_xmit</b> converts the sized array to a double-linked list. The function retains the valid pointer to the beginning of the list, frees memory associated with the rest of the list, then creates a new list that starts at the same pointer. The function uses a utility function, <b>InsertNewNode</b>, to append a list node to the end of the list and to assign the <i>pNext</i> and <i>pPrevious</i> pointers to appropriate values.</p>
<pre><code>void __RPC_USER DOUBLE_LINK_TYPE_from_xmit(
     DOUBLE_XMIT_TYPE __RPC_FAR * pArray,
     DOUBLE_LINK_TYPE __RPC_FAR * pList)
{
    DOUBLE_LINK_TYPE *pCurrent;
    int i;
 
    if (pArray-&gt;sSize &lt;= 0) {  // error checking
        return;
    }
 
    if (pList == NULL) // if invalid, create the list head
        pList = InsertNewNode(pArray-&gt;asNumber[0], NULL);             
    else {    
        DOUBLE_LINK_TYPE_free_inst(pList);  // free all other nodes
        pList-&gt;sNumber = pArray-&gt;asNumber[0];
        pList-&gt;pNext = NULL; 
    }
 
    pCurrent = pList; 
    for (i = 1; i &lt; pArray-&gt;sSize; i++)  
        pCurrent = InsertNewNode(pArray-&gt;asNumber[i], pCurrent);
    
    return;
}
 </code></pre>
<p>&nbsp;</p></body>
</HTML>
