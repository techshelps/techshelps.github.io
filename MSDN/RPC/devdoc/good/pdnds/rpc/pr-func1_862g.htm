<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RpcBindingSetAuthInfoEx</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_rpc_rpcbindingsetauthinfoex"></a>RpcBindingSetAuthInfoEx</h1>
<p>
The <b>RpcBindingSetAuthInfoEx</b> function sets authentication, authorization, and security quality-of-service information into a binding handle.</p>
<p>
<b>Windows NT:</b>  4.0 (limited functionality),  5.0 (full functionality).<br>
  <b>Windows:</b> Windows 95 (clients)<br>
  <b>Import Library:</b> RPCRT4.LIB</p>
<pre><code><b>#include &lt;rpc.h&gt;
RPC_STATUS RPC_ENTRY RpcBindingSetAuthInfoEx( 
  RPC_BINDING_HANDLE </b><i> Binding</i><b>,            </b>
<b>  unsigned char PAPI *</b><i> ServerPrincName</i><b>,</b>   
<b>  unsigned long </b><i> AuthnLevel</i><b>,</b>              
<b>  unsigned long </b><i> AuthnSvc</i><b>,</b>                
<b>  RPC_AUTH_IDENTITY_HANDLE </b><i> AuthIdentity</i><b>,</b>   
<b>  unsigned long </b><i> AuthzSvc</i><b>,                </b>
<b>  RPC_SECURITY_QOS *</b><i> SecurityQOS          </i>
<b>); </b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Binding</i></dt>
<dd>
Specifies the server binding handle into which authentication and authorization information is set.</dd>
<dt>
<i>ServerPrincName</i></dt>
<dd>
Pointer to the expected principal name of the server referenced by <i>Binding</i>. The content of the name and its syntax are defined by the authentication service in use.</dd>
<dt>
<i>AuthnLevel</i></dt>
<dd>
Specifies the level of authentication to be performed on remote procedure calls made using <i>Binding</i>. For a list of the RPC-supported authentication levels, see <a href="pr-dtype_25wz.htm">Authentication-Level Constants</a>.</dd>
<dt>
<i>AuthnSvc</i></dt>
<dd>
Specifies the authentication service to use. For a list of the RPC-supported authentication services, see <a href="pr-dtype_12er.htm">Authentication-Service Constants</a>.
<p>
Specify RPC_C_AUTHN_NONE to turn off authentication for remote procedure calls made using <i>Binding</i>.

<p>
If RPC_C_AUTHN_DEFAULT is specified, the RPC run-time library uses the RPC_C_AUTHN_WINNT authentication service for remote procedure calls made using <i>Binding</i>.
</dd>
<dt>
<i>AuthIdentity</i></dt>
<dd>
Specifies a handle for the data structure that contains the client's authentication and authorization credentials appropriate for the selected authentication and authorization service.
<p>
When using the RPC_C_AUTHN.WINNT authentication service <i>AuthIdentity</i> should be a pointer to a SEC_WINNT_AUTH_IDENTITY structure (defined in rpcdce.h).

<p>
Specify a null value to use the security login context for the current address space.
</dd>
<dt>
<i>AuthzSvc</i></dt>
<dd>
Specifies the authorization service implemented by the server for the interface of interest. The validity and trustworthiness of authorization data, like any application data, depends on the authentication service and authentication level selected. This parameter is ignored when using the RPC_C_AUTHN_WINNT authentication service.
<p>
For a list of the RPC-supported authentication services, see <a href="pr-dtype_12er.htm">Authentication-Service Constants</a>.
</dd>
<dt>
<i>SecurityQOS</i></dt>
<dd>
Pointer to the RPC_SECURITY_QOS structure, which defines the security quality of service.
</dd>
</dl>
<h4>Return Values</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=53%>Value</th>
<th align=left width=47%>Meaning</th>
</tr>
<tr valign=top>
<td width=53%>RPC_S_OK</td>
<td width=47%>Success.</td>
</tr>
<tr valign=top>
<td width=53%>RPC_S_INVALID_BINDING</td>
<td width=47%>Invalid binding handle.</td>
</tr>
<tr valign=top>
<td width=53%>RPC_S_WRONG_KIND_OF_BINDING</td>
<td width=47%>Wrong kind of binding for operation.</td>
</tr>
<tr valign=top>
<td width=53%>RPC_S_UNKNOWN_AUTHN_SERVICE</td>
<td width=47%>Unknown authentication service.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
A client application calls the <b>RpcBindingSetAuthInfoEx</b> function to set up a server binding handle for making authenticated remote procedure calls. This function provides the capability to set security quality-of-service information on the binding handle. It is otherwise identical to <a href="pr-func1_3chb.htm"><b>RpcBindingSetAuthInfo</b></a>.</p>
<p>
Unless a client calls <b>RpcBindingSetAuthInfoEx</b>, all remote procedure calls on <i>Binding</i> are unauthenticated. A client is not required to call this routine.</p>
<p>
<b>Note</b>&nbsp;&nbsp;As long as the binding handle exists, RPC maintains a pointer to <i>AuthIdentity</i>. Be sure it is not on the stack and is not freed until the binding handle is freed. If the binding handle is copied, or if a context handle is created from the binding handle, then the <i>AuthIdentity</i> pointer will also be copied.</p>
<h4>See Also</h4>
<p>
<a href="pr-dtype_8377.htm">RPC_SECURITY_QOS</a>, <a href="pr-func1_2nnc.htm"><b>RpcBindingInqAuthInfoEx</b></a>, <a href="pr-func2_0jn3.htm"><b>RpcServerRegisterAuthInfo</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
