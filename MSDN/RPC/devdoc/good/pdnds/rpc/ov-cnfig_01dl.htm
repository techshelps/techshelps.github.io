<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using RPC With WinSock Proxy</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_rpc_using_rpc_with_winsock_proxy"></a>Using RPC With WinSock Proxy</h1>
<p>
The release of Microsoft® Internet Access Server included WinSock Proxy, an enhanced version of Windows Sockets API, version 1.1.</p>
<p>
WinSock Proxy lets a Windows Sockets application, running on a private network client, behave as if it were directly connected to a remote Internet server application, when in fact, the Microsoft Proxy Server is the host for this connection. This means that all application-level communications are channeled through a single secured computer—the gateway computer running Microsoft Proxy Server.</p>
<p>
Ordinarily, for datagram packet transfers, the RPC transport DLL bypasses the sendto( ) and recvfrom( ) functions provided in WSOCK32.DLL, and communicates directly with the underlying device driver. This improves the speed of packet transfers but makes WinSock Proxy features unavailable to the application.</p>
<p>
Effective with NT 4.0, SP2, the RPC transport checks the registry to see whether to use the function calls provided in WSOCK32.DLL, or to speak directly with the device driver. To use RPC with WinSock Proxy, edit the system registry on each machine to add the following entry:</p>
<p class=indent1>
HKEY_LOCAL_MACHINE<br>
    Software<br>
        Microsoft<br>
            Rpc<br>
                UseWinsockForIP : REG_DWORD "1"</p>
<p>
Another feature of WinSock Proxy is the ability to emulate the TCP transport protocol over Novell's SPX transport when the SPX client machine does not have TCP installed. To use this feature with RPC applications, edit the system registry on each client machine to add this entry:</p>
<p class=indent1>
HKEY_LOCAL_MACHINE<br>
    Software<br>
        Microsoft<br>
            Rpc<br>
                ClientProtocols<br>
                    ncacn_ip_tcp: REG_SZ "rpcltccm.dll"<br>
                    ncadg_ip_udp: REG_SZ "rpcltccm.dll"</p>
<p>
Edit the registry on each server machine to add this entry:</p>
<p class=indent1>
HKEY_LOCAL_MACHINE<br>
    Software<br>
        Microsoft<br>
            Rpc<br>
                ServerProtocols<br>
                    ncacn_ip_tcp: REG_SZ "rpcltscm.dll"<br>
                    ncadg_ip_udp: REG_SZ "rpcltscm.dll"</p>
<p>
For more information about RPC transport protocols see <a href="ov-runtm_3jj9.htm">Specifying the Protocol Sequence</a>. For more information about WinSock Proxy see the product documentation for Microsoft Internet Access Server.</p>
<p>&nbsp;</p></body>
</HTML>
