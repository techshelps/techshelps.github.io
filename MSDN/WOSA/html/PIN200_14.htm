<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.4 WFS_CMD_PIN_GET_PIN</TITLE>
<BODY bgcolor=white>

<FONT FACE="verdana"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<h5>
4.4 WFS_CMD_PIN_GET_PIN</h5>
<p>
<b>Description</b> This function stores the PIN entry via the PIN pad. From the point this function is invoked, PIN digit entries are <b><i>not</i></b> passed to the application.  For each PIN digit, or any other active key entered, an execute notification event is sent in order to allow an application to perform the appropriate display action (i.e. when the PIN pad has no integrated display). The application is not informed of the value entered, the execute notification only informs that a key has been depressed.</p>
<p>
Some PIN pad devices do <u>not</u> inform the application as each PIN digit is entered, but locally process the PIN entry based upon minimum PIN length and maximum PIN length input parameters. These PIN pad devices which provide local PIN entry management and optional display tracking may or may not notify the application of a minimum PIN length violation.</p>
<p>
When the maximum number of  PIN digits is entered, or a completion  key is pressed after the minimum number of PIN digits is entered, a WFS_EXEC_COMPLETE event message is sent to the application. Once this notification is received, the output parameters are then returned to the application from this function call. The depression of the &lt;Cancel&gt; key is also passed to the application via the WFS_EXEC_COMPLETE event message. </p>
<p>
 If <i>usMaxLen</i> is zero, the service provider does not terminate the command unless the application sets <i>ulTerminateKeys</i> or <i>ulTerminateFDKs</i>. In the event that <i>ulTerminateKeys</i> or <i>ulTerminateFDKs</i> are not set and <i>usMaxLen</i> is zero, the command will not terminate and the application must issue a WFSCancel command.</p>
<p>
<b>Input Param </b><code>LPWFSPINGETPIN lpGetPin;</code></p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_pin_getpin<BR> {<BR> USHORT  usMinLen;
 USHORT  usMaxLen;<BR> BOOL  bAutoEnd;<BR> CHAR  cEcho;<BR> ULONG  ulActiveFDKs;<BR> ULONG  ulActiveKeys;<BR> ULONG  ulTerminateFDKs;<BR> ULONG  ulTerminateKeys;<BR> } WFSPINGETPIN, * LPWFSPINGETPIN;</FONT></pre>
<p>
 <i>usMinLen</i><BR>Specifies the minimum number of digits which must be entered for the PIN. A value of zero indicates no minimum PIN length verification.</p>
<p>
<i> usMaxLen</i><BR>Specifies the maximum number of digits which can be entered for the PIN.</p>
<p>
 <i>bAutoEnd</i><BR>If <i>bAutoEnd</i> is set to true, the service provider terminates the command when the maximum number of digits are entered. Otherwise, the input is terminated by the user using one of the termination keys. When <i>usMaxLen</i> is reached, the service provider will disable all numeric keys. <i>bAutoEnd</i> is ignored when <i>usMaxLen</i> is set to 0.</p>
<p>
 <i>cEcho</i><BR>Specifies the replace character to be echoed on a local  display for the PIN digit.</p>
<p>
 <i>ulActiveFDKs</i><BR>Specifies those FDKs which are active during the execution of the command.</p>
<p>
 <i>ulActiveKeys</i><BR>Specifies those (other) Function Keys which are active during the execution of the command.</p>
<p>
 <i>ulTerminateFDKs</i><BR>Specifies those FDKs which must terminate the execution of the command.</p>
<p>
 <i>ulTerminateKeys</i><BR>Specifies those (other) Function Keys which must terminate the execution of the command.</p>
<p>
<b>Output Param </b><code>LPWFSPINENTRY lpEntry;</code></p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_pin_entry<BR> {<BR> USHORT  usDigits;<BR> WORD  wCompletion;<BR> } WFSPINENTRY, * LPWFSPINENTRY;</FONT></pre>
<p>
 <i>usDigits</i><BR>Specifies the number of PIN digits entered.</p>
<p>
 <i>wCompletion</i><BR>Specifies the reason for completion of the entry. Possible values are:</p>
<p>
Value Meaning</p>
<p>
WFS_PIN_COMPAUTO The command terminated automatically, because maximum PIN length was reached.</p>
<p>
WFS_PIN_COMPENTER The ENTER Function Key was pressed.</p>
<p>
WFS_PIN_COMPCANCEL The CANCEL Function Key was pressed.</p>
<p>
WFS_PIN_COMPCONTINUE Input continues (this value is only used in the execute event WFS_EXEE_PIN_KEY).</p>
<p>
WFS_PIN_COMPCLEAR The CLEAR Function Key was pressed and the previous input is cleared (this value is only used in the execute event WFS_EXEE_PIN_KEY).</p>
<p>
WFS_PIN_COMPBACKSPACE The last input digit was cleared (this value is only used in the execute event WFS_EXEE_PIN_KEY).</p>
<p>
WFS_PIN_COMPFDK An FDK was pressed.</p>
<p>
WFS_PIN_COMPHELP The HELP Function Key was pressed..</p>
<p>
WFS_PIN_COMPFK A Function Key (FK) other than ENTER, CLEAR, CANCEL, BACKSPACE, HELP was pressed.</p>
<p>
<b>Error Codes</b> The following additional error codes can be generated by this command:</p>
<p>
Value Meaning</p>
<p>
WFS_ERR_PIN_KEYINVALID At least one of the specified function keys or FDKs is invalid.</p>
<p>
WFS_ERR_PIN_KEYNOTSUPPORTED At least one of the specified function keys or FDKs is not supported by the service provider.</p>
<p>
WFS_ERR_PIN_NOACTIVEKEYS There are no active function keys specified.</p>
<p>
WFS_ERR_PIN_NOTERMINATEKEYS There are no terminate keys specified and usMaxLen is set to 0.</p>
<p>
WFS_ERR_PIN_MINIMUMLENGTH The minimum PIN length field is invalid or greater than the maximum PIN length field.</p>
<p>
<b>Events </b>The following additional events can be generated by this command:</p>
<p>
Value Meaning</p>
<p>
WFS_EXEE_PIN_KEY A key has been pressed at the PIN pad.</p>
<p>
<b>Comments</b> None.</p>
</BODY>
</HTML>
