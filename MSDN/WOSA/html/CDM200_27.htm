<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.12 WFS_CMD_CDM_END_EXCHANGE</TITLE>
<BODY bgcolor=white>

<FONT FACE="verdana"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/html/msdn_ie3.css"></HEAD>
<BODY>
<h5>
4.12 WFS_CMD_CDM_END_EXCHANGE</h5>
<p>
<b>Description</b> This command is initiated after a cash unit has been exchanged, refilled, etc. It supplies the latest cash unit information and cash unit IDs. Cash units are set as ready (e.g., lifted upwards; there may also be a dispenser test), any cash unit inoperative conditions are cleared, and reject counters are reset; the current status of the safe door is ignored. After this command the cash dispenser service will accept a <b>WFS[Async]Unlock</b> request.</p>
<p>
 The service provider may be able to obtain cash unit information directly from the dispenser device, such as cash unit ID and replenishment state. In this case, the corresponding input parameters to this command may be ignored.</p>
<p>
 Errors can be generated by this command. When a cash unit error is returned, the application must issue a WFS_INF_CDM_CASH_UNIT_INFO command to get the cash unit status.</p>
<p>
<b>Input Param</b> <code>LPWFSCDMCUINFO lpCUInfo;</code><BR>For a description of the WFSCDMCUINFO structure, see the definition of the WFS_INF_CDM_CASH_UNIT_INFO command. If this pointer is NULL, the contents of the cash units are not changed.</p>
<p>
<b>Output Param</b> None.</p>
<p>
<b>Error Codes </b>The following additional error codes can be generated by this command:</p>
<p>
Value Meaning</p>
<p>
WFS_ERR_CDM_NOEXCHANGEACTIVE There is no exchange active</p>
<p>
WFS_ERR_CDM_INVALIDCASHUNIT Invalid cash unit ID</p>
<p>
WFS_ERR_CDM_INVALIDTELLERID Teller ID not present in service provider’s teller ID list</p>
<p>
<b>Events</b> The following additional events can be generated by this command:</p>
<p>
Value Meaning</p>
<p>
WFS_SRVE_CDM_CASHUNITINFOCHANGED A cash unit was changed.</p>
<p>
<b>Comments</b> This command generates a service event (WFS_SRVE_CDM_CASHUNITINFOCHANGED) that allows applications to be aware that they should update their cash unit status for the service, using the WFS_INF_CDM_CASH_UNIT_INFO command.</p>
</BODY>
</HTML>
