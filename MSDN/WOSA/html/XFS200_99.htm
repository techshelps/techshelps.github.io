<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>9.3 Device Status Changes</TITLE>
<BODY bgcolor=white>

<FONT FACE="verdana"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<h5>
9.3 Device Status Changes</h5>
<p>
Status changes of logical services (which typically reflect changes in physical devices) are reported as system events.  This is in addition to being reported by the WFS_INF_xxx_STATUS query of the <b>WFSGetInfo</b> or <b>WFSAsyncGetInfo</b> functions.  The WFSRESULT data structure (defined in Section 8.1) is utilized as follows:</p>
<p>
<b>Field Description<i> </i></b></p>
<p>
<i>RequestID</i> (not used)</p>
<p>
<i>hService</i> Service handle identifying the session that created the result</p>
<p>
<i>tsTimestamp </i>Time the status change occurred (local time, in a Win32 SYSTEMTIME structure)</p>
<p>
<i>hResult </i>(not used)</p>
<p>
<i>u.dwEventID</i> = WFS_SYSE_DEVICE_STATUS</p>
<p>
<i>lpBuffer </i>Pointer to a WFSDEVSTATUS structure:</p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct wfs_devstatus {
 LPSTR   lpszPhysicalName;
 LPSTR   lpszWorkstationName;
 DWORD   dwState;
} <b>WFSDEVSTATUS, * LPWFSDEVSTATUS;</b></FONT></pre>
<p>
The members of this structure are:</p>
<p>
<b>Field Description<i> </i></b></p>
<p>
<i>lpszPhysicalName</i> Pointer to the physical service name of the service that changed its state.</p>
<p>
<i>lpszWorkstationName</i> Pointer to the name of the workstation in which the logical service name is defined.</p>
<p>
<i>dwState </i>Specifies the new state of the physical device managed by the service as one of the following:</p>
<p>
<b>Value Meaning</b></p>
<p>
WFS_STAT_DEVONLINE The device is online (i.e., powered on and operable).</p>
<p>
WFS_STAT_DEVOFFLINE The device is offline (e.g., the operator has taken the device offline).</p>
<p>
WFS_STAT_DEVPOWEROFF The device is powered off.</p>
<p>
WFS_STAT_DEVNODEVICE There is no device connected.</p>
<p>
WFS_STAT_DEVHWERROR The device is inoperable due to a hardware error.</p>
<p>
WFS_STAT_DEVUSERERROR The device is inoperable because a person is preventing proper device operation.</p>
</BODY>
</HTML>
