<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.3 WFS_INF_CDM_CASH_UNIT_INFO</TITLE>
<BODY bgcolor=white>

<FONT FACE="verdana"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<h5>
3.3 WFS_INF_CDM_CASH_UNIT_INFO</h5>
<p>
<b>Description</b> This command is used to get information about the status and contents of the logical and physical cash units used in the dispenser module.</p>
<p>
Each logical bill or coin type cash unit can comprise one or more physical cash units. For all other types of cash unit there is a one to one relationship between physical and logical cash unit.</p>
<p>
Information on logical cash units is used by the application to process transactions while the information on physical cash units is used during replenishment and maintenance operations. </p>
<p>
All counters returned by this command are software counters and therefore might not represent the actual physical cash counts.</p>
<p>
<b>Input Param</b> None.</p>
<p>
<b>Output Param</b> <code>LPWFSCDMCUINFO lpCashUnitInfo;</code></p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_cdm_cu_info<BR> {<BR> USHORT     usTellerID;<BR> USHORT     usCount;<BR> LPWFSCDMCASHUNIT * lppList;<BR> } WFSCDMCUINFO, * LPWFSCDMCUINFO;</FONT></pre>
<p>
 <i>usTellerID</i><BR>This field is not used in this command and is always NULL. In other commands that use this structure, and that relate to individual tellers (i.e., WFS_CMD_CDM_SET_CASH_UNIT_INFO, WFS_CMD_CDM_START_EXCHANGE, WFS_CMD_CDM_END_EXCHANGE), this field contains the appropriate teller ID value.</p>
<p>
 <i>usCount</i><BR>Specifies the number of cash unit structures returned.</p>
<p>
 <i>lppList</i><BR>Pointer to an array of pointers to cash unit structures:</p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_cdm_cashunit<BR> {<BR> USHORT   usNumber;<BR> USHORT   usType;<BR> CHAR    cUnitID[5];<BR> CHAR    cCurrencyID[3];<BR> ULONG    ulValues;<BR> ULONG    ulInitialCount;<BR> ULONG    ulCount;<BR> ULONG    ulMinimum;<BR> ULONG    ulMaximum;<BR> BOOL    bAppLock;<BR> BOOL    bDevLock;<BR> USHORT   usStatus;<BR> LPSTR    lpPhysicalPositionName;<BR> USHORT   usNumPhysicalCUs;<BR> LPWFSCDMPHCU   * lppPhysical;<BR> } WFSCDMCASHUNIT, * LPWFSCDMCASHUNIT;</FONT></pre>
<p>
 <i>usNumber</i><BR>Logical number of cash unit. Each structure has a unique logical number starting with a value of one (1) for the first structure, and incrementing by one for each subsequent structure.</p>
<p>
 <i>usType</i><BR>Type of cash unit. Possible values are:</p>
<p>
Value Meaning</p>
<p>
WFS_CDM_TYPENA Not applicable; typically means cash unit is missing.</p>
<p>
WFS_CDM_TYPEREJECTCASSETTE Reject cassette of the cash dispenser.</p>
<p>
WFS_CDM_TYPEBILLCASSETTE Bill cassette of the cash dispenser.</p>
<p>
WFS_CDM_TYPECOINCYLINDER Cylinder of the coin dispenser.</p>
<p>
WFS_CDM_TYPECOINDISPENSER Coin dispenser as a whole unit.</p>
<p>
WFS_CDM_TYPERETRACTCASSETTE Retract cassette of the cash dispenser. </p>
<p>
WFS_CDM_TYPECOUPON Cassette for coupons or advertising material.</p>
<p>
WFS_CDM_TYPEDOCUMENT Cassette for documents.</p>
<p>
 <i>cUnitID</i><BR>Cash unit ID. This field  provides  information identifying a cash unit.</p>
<p>
 <i>cCurrencyID</i><BR>Currency ID (ISO format). Three blanks for a reject or a retract cassette which stores more than one currency type and for coupon cassettes which do not contain currencies.</p>
<p>
 <i>ulValues</i><BR>Values of coins/bills. This is the value of a single coin or bill in the cash unit, not the total value of the coins or bills present. (Amount expressed in minimum dispense units; see WFS_INF_CDM_CURRENCY_EXP.)  Zero for a reject or a retract cassette and for coupon cassettes which do not contain valuable documents.</p>
<p>
 <i>ulInitialCount</i><BR>Initial number of coins/bills. This value is persistent; i.e, maintained through power failures, opens, closes and system resets. It is set by the WFS_CMD_CDM_END_EXCHANGE and the WFS_CMD_CDM_SET_CASH_UNIT_INFO commands.</p>
<p>
 <i>ulCount</i><BR>Actual count of coins/bills. This value is persistent; i.e, maintained through power failures, opens, closes and system resets. It is set by the WFS_CMD_CDM_END_EXCHANGE and the WFS_CMD_CDM_SET_CASH_UNIT_INFO commands, and is adjusted each time coins/bills are moved from or to the cash unit by a <b>WFSExecute</b> command. Note that for a reject cassette, this value is unreliable, since the typical reason for dumping bills to the reject cassette is a suspected count failure. For a retract cassette this value specifies the number of retracts.</p>
<p>
 <i>ulMinimum</i><BR>Specifies the minimum number of bills in a cash unit. If the number falls short of this value a threshold event (WFS_USRE_CDM_CASHUNITTHRESHOLD) is created. For retract and reject cassettes this value equals zero.</p>
<p>
 <i>ulMaximum</i><BR>Specifies the maximum number of bills in a cash unit. This value is needed for cash units that are refilled during a cash in operation, reject and retract cassettes. For all other cash units it equals zero. If the number exceeds this value a threshold event (WFS_USRE_CDM_CASHUNITTHRESHOLD) is created.</p>
<p>
 <i>bAppLock</i><BR>Application lock status of the logical cash unit. If set to TRUE, the cash unit is locked by the application and cannot be used until unlocked. Application locks can only be applied to bill cassettes and coin cylinders.</p>
<p>
 <i>bDevLock</i><BR>Device lock status of the logical cash unit. If set to TRUE, the cash unit is locked by the device and cannot be used until unlocked. Device locks can only be applied to bill cassettes and coin cylinders. Support for device locks is vendor-dependent.</p>
<p>
 <i>usStatus</i><BR>Describes the status of the logical cash unit. Available values are:</p>
<p>
Value Meaning</p>
<p>
WFS_CDM_STATCUOK The cash unit is in a good state.</p>
<p>
WFS_CDM_STATCUFULL The reject or retract cassette is full.</p>
<p>
WFS_CDM_STATCUHIGH The reject or retract cassette is almost full (threshold).</p>
<p>
WFS_CDM_STATCULOW The cassette or coin cylinder is almost empty (threshold).</p>
<p>
WFS_CDM_STATCUEMPTY The cassette or coin cylinder is empty.</p>
<p>
WFS_CDM_STATCUINOP The cassette or coin cylinder is inoperative.</p>
<p>
WFS_CDM_STATCUMISSING The cassette, reject or retract cassette is missing.</p>
<p>
WFS_CDM_STATCUNOVAL  The values of the specified cash unit are not available. This can be the case when the cassette is changed without using the operator functions. </p>
<p>
WFS_CDM_STATCUNOREF There is no reference value available for the notes in this cassette. </p>
<p>
<i> lpPhysicalPositionName<BR></i>This field points to a name (e.g. “hopper 1”) indicating the physical location in the dispenser device in which this cash unit is installed. This field is only used when the logical cash unit refers to one physical cash unit.</p>
<p>
<i> usNumPhysicalCUs<BR></i>This value indicates the number of physical cash unit structures returned. If this field is zero then the logical cash unit structure above relates directly to a physical cash unit.</p>
<p>
<i> lppPhysical<BR></i>Pointer to an array of pointers to physical cash unit structures:</p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_cdm_physicalcu<BR>{<BR>LPSTR   lpPhysicalPositionName;<BR>CHAR  cUnitID[5];<BR>ULONG  ulCount;<BR>USHORT  usPStatus;<BR>} WFSCDMPHCU, * LPWFSCDMPHCU;</FONT></pre>
<p>
<i>lpPhysicalPositionName</i></p>
<p>
This field points to a name (e.g. “hopper 1”) indicating the physical location in the dispenser device in which this cash unit is installed.</p>
<p>
<i>cUnitID</i><BR>Cash unit ID. This field provides information identifying a physical cassette clearly.</p>
<p>
<i>ulCount</i><BR>Actual count of coins/bills in the physical cash unit.</p>
<p>
<i>usPStatus</i><BR>Describes the  status of the physical cash unit. Same values as <i>usStatus.</i></p>
<p>
<b>Error Codes</b> There are no additional error codes generated by this command.</p>
<p>
<b>Comments</b> None.</p>
</BODY>
</HTML>
