<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.11 WFS_CMD_CDM_START_EXCHANGE</TITLE>
<BODY bgcolor=white>

<FONT FACE="verdana"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<h5>
4.11 WFS_CMD_CDM_START_EXCHANGE</h5>
<p>
<b>Description</b> This command is used to start the exchange of cash units as well as their emptying, replenishment, removal or replacement. The command returns the current values in the device and the device itself initiates cash unit removal (for example by means of lowering the cash units). A <b>WFSLock</b> should be performed before this command is initiated, to ensure exclusive control by the replenishment application.</p>
<p>
 After WFS_CMD_CDM_START_EXCHANGE has been successfully initiated, the CDM enters the exchange state, and accepts only the following functions:</p>
<ul>
<li>
<b>WFS[Async]Execute</b>, with WFS_CMD_CDM_END_EXCHANGE command only<p>
</li>
<li>
<b>WFS[Async]GetInfo</b> commands<p>
</li>
<li>
<b>WFSClose</b></li>
</ul>
<p>
 Any other commands issued when the CDM service is in the exchange state are rejected with an error condition of WFS_ERR_CDM_EXCHANGEACTIVE. If an error occurs at the CDM during the execution of this command, the cash unit values are not returned.</p>
<p>
<b>Input Param</b> <code>LPWFSCDMSTARTEX lpStartEx;</code></p>
<pre><FONT FACE="COURIER NEW" SIZE=2>typedef struct _wfs_cdm_start_ex<BR> {<BR> USHORT   usTellerID;<BR> USHORT   usCount;<BR> LPUSHORT  lpusCUNumList;<BR> } WFSCDMSTARTEX, * LPWFSCDMSTARTEX;</FONT></pre>
<p>
 <i>usTellerID</i><BR>Identification of teller. </p>
<p>
<i> usCount</i><BR>Number of cash units to be exchanged. Size of the array <i>lpusCUNumList</i>. </p>
<p>
 <i>lpusCUNumList</i><BR>Pointer to a list of the logical numbers (unsigned shorts) of the cash units to be exchanged.</p>
<p>
<b>Output Param</b> <code>LPWFSCDMCUINFO lpCUInfo</code>;<BR>For a description of the WFSCDMCUINFO structure, see the definition of the WFS_INF_CDM_CASH_UNIT_INFO command.</p>
<p>
<b>Error Codes </b>The following additional error codes can be generated by this command:</p>
<p>
Value Meaning</p>
<p>
WFS_ERR_CDM_EXCHANGEACTIVE The CDM service is already in an exchange state.</p>
<p>
WFS_ERR_CDM_INVALIDTELLERID Teller ID not present in service provider’s teller ID list</p>
<p>
<b>Events </b>There are no additional events generated by this command<b>.</b></p>
<p>
<b>Comments </b>None<b>.</b></p>
</BODY>
</HTML>
