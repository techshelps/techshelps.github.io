<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MASWITCH.C</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>
<h2><a name="_code_context2553"></a>MASWITCH.C</h2>
<pre><code>//==========================================================================; <br>// <br>//  THIS CODE AND INFORMATION IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY <br>//  KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE <br>//  IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR <br>//  PURPOSE. <br>// <br>//  Copyright 1993 - 1998 Microsoft Corporation.  All Rights Reserved. <br>// <br>//--------------------------------------------------------------------------; <br>// <br>//  maswitch.c <br>// <br>//  Description: <br>// <br>// <br>//  History: <br>//       9/21/93 <br>// <br>//==========================================================================; <br> <br>#include &lt;windows.h&gt; <br>#include &lt;windowsx.h&gt; <br>#include &lt;mmsystem.h&gt; <br> <br>#include "mixapp.h" <br> <br>#include "debug.h" <br> <br> <br> <br> <br>// <br>// <br>// <br>typedef struct tMACONTROLINSTANCE_SWITCH <br>{ <br>    LPMACONTROLINSTANCE             pmaci; <br>    MIXERCONTROLDETAILS_BOOLEAN     pmxcd_f[]; <br> <br>} MACONTROLINSTANCE_SWITCH, *PMACONTROLINSTANCE_SWITCH; <br> <br> <br>//==========================================================================; <br>// <br>// <br>// <br>// <br>//==========================================================================; <br> <br>//--------------------------------------------------------------------------; <br>// <br>//  BOOL MixAppControlChangeSwitch <br>// <br>//  Description: <br>// <br>// <br>//  Arguments: <br>//      HWND hwnd: <br>// <br>//      HMIXER hmx: <br>// <br>//      DWORD dwControlID: <br>// <br>//  Return (BOOL): <br>// <br>//  History: <br>//      09/22/93 <br>// <br>//--------------------------------------------------------------------------; <br> <br>BOOL FNLOCAL MixAppControlChangeSwitch <br>( <br>    HWND                    hwnd, <br>    HMIXER                  hmx, <br>    DWORD                   dwControlID <br>) <br>{ <br>    MMRESULT                        mmr; <br>    HWND                            htxt; <br>    PMACONTROLINSTANCE_SWITCH       pmaci_switch; <br>    LPMACONTROLINSTANCE             pmaci; <br>    LPMIXERLINE                     pmxl; <br>    LPMIXERCONTROL                  pmxctrl; <br>    PMIXERCONTROLDETAILS_BOOLEAN    pmxcd_f; <br>    UINT                            cChannels; <br>    UINT                            cMultipleItems; <br>    UINT                            u; <br>    UINT                            uIndex; <br>    UINT                            v; <br>    BOOL                            fValue; <br>    MIXERCONTROLDETAILS             mxcd; <br>    HWND                            hcheckFocus; <br>    HWND                            hcheck; <br> <br> <br>    hcheckFocus = GetFocus(); <br>    if (NULL == hcheckFocus) <br>    { <br>        hcheckFocus = GetDlgItem(hwnd, IDD_MACONTROL_MULTICHANNEL_BASE); <br>    } <br>    else <br>    { <br>        uIndex = GetDlgCtrlID(hcheckFocus); <br>        if (uIndex &lt; IDD_MACONTROL_MULTICHANNEL_BASE) <br>        { <br>            hcheckFocus = GetDlgItem(hwnd, IDD_MACONTROL_MULTICHANNEL_BASE); <br>        } <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    pmaci_switch = (PMACONTROLINSTANCE_SWITCH)(UINT)GetWindowLong(hwnd, DWL_USER); <br>    pmaci        = pmaci_switch-&gt;pmaci; <br>    pmxl         = pmaci-&gt;pmxl; <br>    pmxctrl      = pmaci-&gt;pmxctrl; <br>    pmxcd_f      = &amp;pmaci_switch-&gt;pmxcd_f[0]; <br> <br>    cChannels = (UINT)pmxl-&gt;cChannels; <br>    if (MIXERCONTROL_CONTROLF_UNIFORM &amp; pmxctrl-&gt;fdwControl) <br>        cChannels = 1; <br> <br> <br>    // <br>    // <br>    // <br>    mxcd.cbStruct       = sizeof(mxcd); <br>    mxcd.dwControlID    = pmxctrl-&gt;dwControlID; <br>    mxcd.cChannels      = cChannels; <br>    mxcd.cMultipleItems = pmxctrl-&gt;cMultipleItems; <br>    mxcd.cbDetails      = sizeof(*pmxcd_f); <br>    mxcd.paDetails      = pmxcd_f; <br> <br>    mmr = mixerGetControlDetails((HMIXEROBJ)pmaci-&gt;hmx, &amp;mxcd, MIXER_GETCONTROLDETAILSF_VALUE); <br>    if (MMSYSERR_NOERROR != mmr) <br>    { <br>        AppMsgBox(hwnd, MB_OK | MB_ICONEXCLAMATION, <br>                  "mixerGetControlDetails(ctrlid=%.08lXh) failed on hmx=%.04Xh, mmr=%u!", <br>                  pmxctrl-&gt;dwControlID, pmaci-&gt;hmx, mmr); <br>        return (FALSE); <br>    } <br> <br> <br>    cMultipleItems = 1; <br>    if (MIXERCONTROL_CONTROLF_MULTIPLE &amp; pmxctrl-&gt;fdwControl) <br>        cMultipleItems = (UINT)pmxctrl-&gt;cMultipleItems; <br> <br> <br>    for (u = 0; u &lt; cChannels; u++) <br>    { <br>        for (v = 0; v &lt; cMultipleItems; v++) <br>        { <br>            uIndex = (u * cMultipleItems) + v; <br> <br>            fValue = (BOOL)pmxcd_f[uIndex].fValue; <br> <br>            hcheck = GetDlgItem(hwnd, IDD_MACONTROL_MULTICHANNEL_BASE + uIndex); <br>            if (hcheckFocus == hcheck) <br>            { <br>                htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_VALUE); <br>                AppSetWindowText(htxt, "mapped=%d, fValue=%ld", <br>                                fValue, <br>                                pmxcd_f[uIndex].fValue); <br>            } <br> <br>            if (fValue == (BOOL)IsDlgButtonChecked(hwnd, IDD_MACONTROL_MULTICHANNEL_BASE + uIndex)) <br>                continue; <br> <br>            CheckDlgButton(hwnd, IDD_MACONTROL_MULTICHANNEL_BASE + uIndex, fValue); <br>        } <br>    } <br> <br> <br> <br> <br>    // <br>    // <br>    // <br>    mxcd.cbStruct       = sizeof(mxcd); <br>    mxcd.dwControlID    = pmxctrl-&gt;dwControlID; <br>    mxcd.cChannels      = 1; <br>    mxcd.cMultipleItems = pmxctrl-&gt;cMultipleItems; <br>    mxcd.cbDetails      = sizeof(*pmxcd_f); <br>    mxcd.paDetails      = pmxcd_f; <br> <br>    mmr = mixerGetControlDetails((HMIXEROBJ)pmaci-&gt;hmx, &amp;mxcd, MIXER_GETCONTROLDETAILSF_VALUE); <br>    if (MMSYSERR_NOERROR != mmr) <br>    { <br>        AppMsgBox(hwnd, MB_OK | MB_ICONEXCLAMATION, <br>                  "mixerGetControlDetails(ctrlid=%.08lXh) failed on hmx=%.04Xh, mmr=%u!", <br>                  pmxctrl-&gt;dwControlID, pmaci-&gt;hmx, mmr); <br>        return (FALSE); <br>    } <br> <br> <br>    for (v = 0; v &lt; cMultipleItems; v++) <br>    { <br>        uIndex = v; <br> <br>        fValue = (BOOL)pmxcd_f[uIndex].fValue; <br> <br>        hcheck = GetDlgItem(hwnd, IDD_MACONTROL_UNIFORM_BASE + uIndex); <br>        if (hcheckFocus == hcheck) <br>        { <br>            htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_VALUE); <br>            AppSetWindowText(htxt, "mapped=%d, fValue=%ld", <br>                             fValue, <br>                             pmxcd_f[uIndex].fValue); <br>        } <br> <br>        if (fValue == (BOOL)IsDlgButtonChecked(hwnd, IDD_MACONTROL_UNIFORM_BASE + uIndex)) <br>            continue; <br> <br>        CheckDlgButton(hwnd, IDD_MACONTROL_UNIFORM_BASE + uIndex, fValue); <br>    } <br> <br> <br>    return (TRUE); <br>} // MixAppControlChangeSwitch() <br> <br> <br>//--------------------------------------------------------------------------; <br>// <br>//  BOOL MixAppControlSetSwitch <br>// <br>//  Description: <br>// <br>// <br>//  Arguments: <br>//      HWND hwnd: <br>// <br>//      HWND hcheck: <br>// <br>//  Return (BOOL): <br>// <br>//  History: <br>//      09/22/93 <br>// <br>//--------------------------------------------------------------------------; <br> <br>BOOL FNLOCAL MixAppControlSetSwitch <br>( <br>    HWND                    hwnd, <br>    HWND                    hcheck <br>) <br>{ <br>    PMACONTROLINSTANCE_SWITCH       pmaci_switch; <br>    LPMACONTROLINSTANCE             pmaci; <br>    LPMIXERLINE                     pmxl; <br>    LPMIXERCONTROL                  pmxctrl; <br>    PMIXERCONTROLDETAILS_BOOLEAN    pmxcd_f; <br>    MMRESULT                        mmr; <br>    BOOL                            fValue; <br>    UINT                            cChannels; <br>    UINT                            uIndex; <br>    MIXERCONTROLDETAILS             mxcd; <br> <br>    // <br>    // <br>    // <br>    pmaci_switch = (PMACONTROLINSTANCE_SWITCH)(UINT)GetWindowLong(hwnd, DWL_USER); <br>    pmaci        = pmaci_switch-&gt;pmaci; <br>    pmxl         = pmaci-&gt;pmxl; <br>    pmxctrl      = pmaci-&gt;pmxctrl; <br>    pmxcd_f      = &amp;pmaci_switch-&gt;pmxcd_f[0]; <br> <br>    uIndex = GetDlgCtrlID(hcheck); <br> <br>    // <br>    //  get value and toggle.. <br>    // <br>    fValue = (0 == IsDlgButtonChecked(hwnd, uIndex)); <br> <br>    if (uIndex &lt; IDD_MACONTROL_UNIFORM_BASE) <br>    { <br>        cChannels = (UINT)pmxl-&gt;cChannels; <br>        if (MIXERCONTROL_CONTROLF_UNIFORM &amp; pmxctrl-&gt;fdwControl) <br>            cChannels = 1; <br> <br>        uIndex -= IDD_MACONTROL_MULTICHANNEL_BASE; <br>    } <br>    else <br>    { <br>        cChannels = 1; <br> <br>        uIndex -= IDD_MACONTROL_UNIFORM_BASE; <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    // <br>    mxcd.cbStruct       = sizeof(mxcd); <br>    mxcd.dwControlID    = pmxctrl-&gt;dwControlID; <br>    mxcd.cChannels      = cChannels; <br>    mxcd.cMultipleItems = pmxctrl-&gt;cMultipleItems; <br>    mxcd.cbDetails      = sizeof(*pmxcd_f); <br>    mxcd.paDetails      = pmxcd_f; <br> <br>    mmr = mixerGetControlDetails((HMIXEROBJ)pmaci-&gt;hmx, &amp;mxcd, 0L); <br>    if (MMSYSERR_NOERROR != mmr) <br>    { <br>        AppMsgBox(hwnd, MB_OK | MB_ICONEXCLAMATION, <br>                  "mixerGetControlDetails(ctrlid=%.08lXh) failed on hmx=%.04Xh, mmr=%u!", <br>                  pmxctrl-&gt;dwControlID, pmaci-&gt;hmx, mmr); <br>        return (FALSE); <br>    } <br> <br>    pmxcd_f[uIndex].fValue = fValue; <br> <br>    mmr = mixerSetControlDetails((HMIXEROBJ)pmaci-&gt;hmx, &amp;mxcd, 0L); <br>    if (MMSYSERR_NOERROR != mmr) <br>    { <br>        AppMsgBox(hwnd, MB_OK | MB_ICONEXCLAMATION, <br>                  "mixerSetControlDetails(ctrlid=%.08lXh) failed on hmx=%.04Xh, mmr=%u!", <br>                  pmxctrl-&gt;dwControlID, pmaci-&gt;hmx, mmr); <br>        return (FALSE); <br>    } <br> <br>    CheckDlgButton(hwnd, GetDlgCtrlID(hcheck), (BOOL)pmxcd_f[uIndex].fValue); <br>#if 0 <br>    if (0 == uIndex) <br>    { <br>        htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_VALUE); <br>        AppSetWindowText(htxt, "mapped=%d, fValue=%ld", <br>                         nValue, <br>                         pmxcd_f[uIndex].fValue); <br>    } <br>#endif <br> <br>    return (TRUE); <br>} // MixAppControlSetSwitch() <br> <br> <br>//--------------------------------------------------------------------------; <br>// <br>//  BOOL MixAppLineChangeSwitch <br>// <br>//  Description: <br>// <br>// <br>//  Arguments: <br>//      HWND hwnd: <br>// <br>//      HMIXER hmx: <br>// <br>//      DWORD dwLineID: <br>// <br>//  Return (BOOL): <br>// <br>//  History: <br>//      09/24/93 <br>// <br>//--------------------------------------------------------------------------; <br> <br>BOOL FNLOCAL MixAppLineChangeSwitch <br>( <br>    HWND                    hwnd, <br>    HMIXER                  hmx, <br>    DWORD                   dwLineID <br>) <br>{ <br>    MMRESULT                    mmr; <br>    PMACONTROLINSTANCE_SWITCH   pmaci_switch; <br>    LPMACONTROLINSTANCE         pmaci; <br>    LPMIXERLINE                 pmxl; <br>    MIXERLINE                   mxl; <br>    BOOL                        fSource; <br>    BOOL                        fActive; <br>    BOOL                        fDisconnected; <br>    HWND                        htxt; <br> <br> <br>    // <br>    // <br>    // <br>    pmaci_switch = (PMACONTROLINSTANCE_SWITCH)(UINT)GetWindowLong(hwnd, DWL_USER); <br>    pmaci       = pmaci_switch-&gt;pmaci; <br>    pmxl        = pmaci-&gt;pmxl; <br> <br>    if (pmxl-&gt;dwLineID != dwLineID) <br>    { <br>        DPF(0, "!MixAppLineChangeSwitch: why am i getting notifications for some other line??"); <br> <br>        // <br>        //  this would be a bug in this app... keep from bombing though <br>        //  until i fix it. <br>        // <br>        dwLineID = pmxl-&gt;dwLineID; <br>    } <br> <br>    // <br>    //  get the current state of the line that changed.. this is actually <br>    //  silly that you have to do this just to determine if the line went <br>    //  [in]active. sigh.. <br>    // <br>    mxl.cbStruct      = sizeof(mxl); <br>    mxl.dwLineID      = dwLineID; <br> <br>    mmr = mixerGetLineInfo((HMIXEROBJ)ghmx, &amp;mxl, MIXER_GETLINEINFOF_LINEID); <br>    if (MMSYSERR_NOERROR != mmr) <br>    { <br>        AppMsgBox(hwnd, MB_OK | MB_ICONEXCLAMATION, <br>                  "mixerGetLineInfo(lineid=%.08lXh) failed on hmx=%.04Xh, mmr=%u!", <br>                  dwLineID, ghmx, mmr); <br> <br>        return (FALSE); <br>    } <br> <br>    fSource       = (0 != (MIXERLINE_LINEF_SOURCE &amp; mxl.fdwLine)); <br>    fActive       = (0 != (MIXERLINE_LINEF_ACTIVE &amp; mxl.fdwLine)); <br>    fDisconnected = (0 != (MIXERLINE_LINEF_DISCONNECTED &amp; mxl.fdwLine)); <br> <br> <br>    htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_LINEINFO); <br>    AppSetWindowText(htxt, "(%s), '%s', %s, %s", <br>                     fSource ? (LPSTR)"src" : (LPSTR)"DST", <br>                     (LPSTR)mxl.szShortName, <br>                     fActive ? (LPSTR)"ACTIVE" : (LPSTR)"inactive", <br>                     fDisconnected ? (LPSTR)"DISCONNECTED" : (LPSTR)"connected"); <br> <br>    return (fActive); <br>} // MixAppLineChangeSwitch() <br> <br> <br>//--------------------------------------------------------------------------; <br>// <br>//  BOOL MixAppInitDialogSwitch <br>// <br>//  Description: <br>// <br>// <br>//  Arguments: <br>//      HWND hwnd: <br>// <br>//      HWND hwndFocus: <br>// <br>//      LPARAM lParam: <br>// <br>//  Return (BOOL): <br>// <br>//  History: <br>//      09/22/93 <br>// <br>//--------------------------------------------------------------------------; <br> <br>BOOL FNLOCAL MixAppInitDialogSwitch <br>( <br>    HWND                    hwnd, <br>    HWND                    hwndFocus, <br>    LPARAM                  lParam <br>) <br>{ <br>    #define FCB_DEF_STYLE   (WS_VISIBLE | WS_CHILD | BS_CHECKBOX | WS_TABSTOP) <br> <br>    static TCHAR        szButton[]  = TEXT("button"); <br>    static TCHAR        szTitle[]   = TEXT("Switch Class: '%s'"); <br> <br>    TCHAR                       szControlType[64]; <br>    LPMACONTROLINSTANCE         pmaci; <br>    PMACONTROLINSTANCE_SWITCH   pmaci_switch; <br> <br>    LPMIXERLINE                 pmxl; <br>    LPMIXERCONTROL              pmxctrl; <br> <br>    HWND                        htxt; <br>    UINT                        u; <br>    UINT                        v; <br>    HWND                        hcheck; <br>    RECT                        rcM; <br>    RECT                        rcU; <br>    int                         cycap; <br>    UINT                        cb; <br>    UINT                        cChannels; <br>    UINT                        cMultipleItems; <br>    UINT                        uIndex; <br> <br> <br>    // <br>    // <br>    // <br>    pmaci = (LPMACONTROLINSTANCE)lParam; <br>    if (NULL == pmaci) <br>    { <br>        DPF(0, "!MixAppInitDialogSwitch: pmaci passed in lParam is NULL!?!"); <br>        return (FALSE); <br>    } <br> <br>    pmxl    = pmaci-&gt;pmxl; <br>    pmxctrl = pmaci-&gt;pmxctrl; <br> <br>    if (!MixAppGetControlTypeName(pmxctrl, szControlType)) <br>    { <br>        return (FALSE); <br>    } <br> <br>    // <br>    // <br>    // <br>    switch (pmxctrl-&gt;dwControlType) <br>    { <br>        case MIXERCONTROL_CONTROLTYPE_BOOLEAN: <br>        case MIXERCONTROL_CONTROLTYPE_ONOFF: <br>        case MIXERCONTROL_CONTROLTYPE_MUTE: <br>        case MIXERCONTROL_CONTROLTYPE_MONO: <br>        case MIXERCONTROL_CONTROLTYPE_LOUDNESS: <br>        case MIXERCONTROL_CONTROLTYPE_STEREOENH: <br>            break; <br> <br>        default: <br>            DPF(0, "!MixAppInitDialogSwitch: pmxctrl-&gt;dwControlType=%.08lXh not valid switch!", pmxctrl-&gt;dwControlType); <br>            return (FALSE); <br>    } <br> <br> <br> <br>    // <br>    // <br>    // <br>    AppSetWindowText(hwnd, szTitle, (LPTSTR)szControlType); <br>    SetDlgItemText(hwnd, IDD_MACONTROL_TXT_SHORT_NAME, pmxctrl-&gt;szShortName); <br>    SetDlgItemText(hwnd, IDD_MACONTROL_TXT_LONG_NAME,  pmxctrl-&gt;szName); <br> <br>    htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_BOUNDS); <br>    AppSetWindowText(htxt, "dwMinimum=%lu, dwMaximum=%lu", <br>                     pmxctrl-&gt;Bounds.dwMinimum, <br>                     pmxctrl-&gt;Bounds.dwMaximum); <br> <br>    htxt = GetDlgItem(hwnd, IDD_MACONTROL_TXT_METRICS); <br>    AppSetWindowText(htxt, "N/A"); <br> <br> <br> <br>    // <br>    // <br>    // <br>    cChannels = (UINT)pmxl-&gt;cChannels; <br>    if (MIXERCONTROL_CONTROLF_UNIFORM &amp; pmxctrl-&gt;fdwControl) <br>        cChannels = 1; <br> <br>    cMultipleItems = 1; <br>    if (MIXERCONTROL_CONTROLF_MULTIPLE &amp; pmxctrl-&gt;fdwControl) <br>        cMultipleItems = (UINT)pmxctrl-&gt;cMultipleItems; <br> <br>    cb  = sizeof(*pmaci_switch); <br>    cb += cChannels * cMultipleItems * sizeof(pmaci_switch-&gt;pmxcd_f[0]); <br>    pmaci_switch = (PMACONTROLINSTANCE_SWITCH)LocalAlloc(LPTR, cb); <br>    if (NULL == pmaci_switch) <br>    { <br>        DPF(0, "!MixAppInitDialogSwitch: failed trying to alloc %u bytes for control instance!", cb); <br>        return (FALSE); <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    SetWindowLong(hwnd, DWL_USER, (LPARAM)(UINT)pmaci_switch); <br> <br>    pmaci_switch-&gt;pmaci    = pmaci; <br> <br> <br>    // <br>    // <br>    // <br>    // <br>    cycap = GetSystemMetrics(SM_CYCAPTION); <br> <br>    hcheck = GetDlgItem(hwnd, IDD_MACONTROL_GRP_MULTICHANNEL); <br>    GetWindowRect(hcheck, &amp;rcM); <br> <br>    InflateRect(&amp;rcM, -10, -20); <br>    ScreenToClient(hwnd, (LPPOINT)&amp;rcM.left); <br>    ScreenToClient(hwnd, (LPPOINT)&amp;rcM.right); <br> <br>    rcM.bottom = rcM.top + cycap; <br> <br>    for (u = 0; u &lt; cChannels; u++) <br>    { <br>        for (v = 0; v &lt; cMultipleItems; v++) <br>        { <br>            uIndex = (u * cMultipleItems) + v; <br> <br>            hcheck = CreateWindow(szButton, pmxctrl-&gt;szShortName, FCB_DEF_STYLE, <br>                                  rcM.left, rcM.top, <br>                                  rcM.right - rcM.left, <br>                                  rcM.bottom - rcM.top, <br>                                  hwnd, (HMENU)(IDD_MACONTROL_MULTICHANNEL_BASE + uIndex), <br>                                  ghinst, NULL); <br> <br>            rcM.top    += cycap + 4; <br>            rcM.bottom += cycap + 4; <br>        } <br> <br>        // <br>        //  add more separation between channels <br>        // <br>        rcM.top    += cycap; <br>        rcM.bottom += cycap; <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    // <br>    hcheck = GetDlgItem(hwnd, IDD_MACONTROL_GRP_UNIFORM); <br>    GetWindowRect(hcheck, &amp;rcU); <br> <br>    InflateRect(&amp;rcU, -10, -20); <br>    ScreenToClient(hwnd, (LPPOINT)&amp;rcU.left); <br>    ScreenToClient(hwnd, (LPPOINT)&amp;rcU.right); <br> <br>    rcU.bottom = rcU.top + cycap; <br> <br>    for (v = 0; v &lt; cMultipleItems; v++) <br>    { <br>        hcheck = CreateWindow(szButton, pmxctrl-&gt;szShortName, FCB_DEF_STYLE, <br>                              rcU.left, rcU.top, <br>                              rcU.right - rcU.left, <br>                              rcU.bottom - rcU.top, <br>                              hwnd, (HMENU)(IDD_MACONTROL_UNIFORM_BASE + v), <br>                              ghinst, NULL); <br> <br>        rcU.top    += cycap + 4; <br>        rcU.bottom += cycap + 4; <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    SendMessage(hwnd, <br>                MM_MIXM_LINE_CHANGE, <br>                (WPARAM)pmaci-&gt;hmx, <br>                pmxl-&gt;dwLineID); <br> <br>    SendMessage(hwnd, <br>                MM_MIXM_CONTROL_CHANGE, <br>                (WPARAM)pmaci-&gt;hmx, <br>                pmxctrl-&gt;dwControlID); <br> <br>    return (TRUE); <br>} // MixAppInitDialogSwitch() <br> <br> <br>//==========================================================================; <br>// <br>// <br>// <br>// <br>//==========================================================================; <br> <br>//--------------------------------------------------------------------------; <br>// <br>//  BOOL MixAppDlgProcControlSwitch <br>// <br>//  Description: <br>// <br>// <br>//  Arguments: <br>//      HWND hwnd: <br>// <br>//      UINT uMsg: <br>// <br>//      WPARAM wParam: <br>// <br>//      LPARAM lParam: <br>// <br>//  Return (BOOL): <br>// <br>//  History: <br>//      07/22/93 <br>// <br>//--------------------------------------------------------------------------; <br> <br>BOOL CALLBACK MixAppDlgProcControlSwitch <br>( <br>    HWND                    hwnd, <br>    UINT                    uMsg, <br>    WPARAM                  wParam, <br>    LPARAM                  lParam <br>) <br>{ <br>    LRESULT             lr; <br>    HLOCAL              hl; <br>    UINT                uId; <br> <br> <br>    if (WM_COMMAND == uMsg) <br>    { <br>        uId = GET_WM_COMMAND_ID(wParam, lParam); <br>        if (IDD_MACONTROL_GRP_MULTICHANNEL &lt;= uId) <br>        { <br>            MixAppControlSetSwitch(hwnd, GET_WM_COMMAND_HWND(wParam, lParam)); <br>            return (TRUE); <br>        } <br>    } <br> <br> <br>    // <br>    // <br>    // <br>    switch (uMsg) <br>    { <br>        case WM_INITDIALOG: <br>            lr = HANDLE_WM_INITDIALOG(hwnd, wParam, lParam, MixAppInitDialogSwitch); <br>            if (FALSE == lr) <br>            { <br>                EndDialog(hwnd, FALSE); <br>            } <br>            else <br>            { <br>                ghdlgControl = hwnd; <br>            } <br>            return (TRUE); <br> <br> <br>        case MM_MIXM_LINE_CHANGE: <br>            MixAppLineChangeSwitch(hwnd, (HMIXER)wParam, lParam); <br>            return (TRUE); <br> <br>        case MM_MIXM_CONTROL_CHANGE: <br>            MixAppControlChangeSwitch(hwnd, (HMIXER)wParam, lParam); <br>            return (TRUE); <br> <br> <br>        case WM_COMMAND: <br>            uId = GET_WM_COMMAND_ID(wParam, lParam); <br>            switch (uId) <br>            { <br>                case IDCANCEL: <br>                case IDOK: <br>                    hl = (HLOCAL)(UINT)GetWindowLong(hwnd, DWL_USER); <br>                    LocalFree(hl); <br> <br>                    EndDialog(hwnd, TRUE); <br>                    ghdlgControl = NULL; <br>                    break; <br>            } <br>            break; <br>    } <br> <br>    return (FALSE); <br>} // MixAppDlgProcControlSwitch() </code></pre>
<p>&nbsp;</p></body>
</HTML>
