<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Audit</title>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css">
<br>
</HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h2><a name="com_tools_kudl"></a><sup></sup>Audit</h2>
<p>
The <b>Audit</b> component, which usually appears in the Audit stage of a Commerce Interchange Pipeline, writes the specified values from the <a href="com_cic_4.htm">Transport Dictionary</a> into a database table in the audit database.
<ul>
<li>
&upsilon;<b>Connection String</b>. Specifies the connection string used for connecting to the database into which the audit data is saved. The connection string must include either the full connection string (the DSN, database login ID, and database password) or the name of a named connection stored in the connection map.</li>
<li>
&upsilon;<b>Table</b>. Specifies the name of the database table into which the audit data is saved. This table must exist in the database identified by the connection string.</li>
<li>
&upsilon;<b>Add a field</b>. Specifies the name of a field that the <b>Audit</b> component reads from the Transport Dictionary. This name must exactly match the name of a column that exists in the database table identified in the <b>Table</b> field. If the field exists on a child object, the name to be added must be a fully qualified path (for example, <b>object1.<i>field</i></b>). Column names must be unique, otherwise the component takes only the first instance of the field name. Type the name, and then click <b>Add</b> to add the column to the <b>Fields to record</b> list. </li>
<li>
&upsilon;<b>Fields to record</b>. Lists the names of the optional fields on the Transport Dictionary that the Audit component will write to the database table identified in the <b>Table</b> field, in addition to those fields written be default (as described later in this topic). To add a name, type the name in the <b>Add a field</b> box, and then click <b>Add</b>. To remove a name, select it, and then click <b>Remove</b>.</li>
</ul>
<h4>Remarks</h4>
<p>
The <b>Audit</b> component always writes the values of the following name/value pairs in the Transport Dictionary into columns in the database with the same names: </p>
<table cellspacing=4 cols=2 width=464>
<tr valign=top>
<th align=left width=28%>Name</th>
<th align=left width=72%>Description</th>
</tr>
<tr valign=top>
<td colspan=2 width=100%></td>
</tr>
<tr valign=top>
<td width=28%><b>txid</b></td>
<td width=72%>Transaction ID. A name/value pair originally written to the Transport Dictionary by the transmitting application or by the <b>AddHeader</b> component in the Transmit pipeline. (Must be the primary key in the database table).</td>
</tr>
<tr valign=top>
<td width=28%><b>utc_datetime</b></td>
<td width=72%>Time (Universal Coordinated Time) when the <b>Audit </b>component runs.</td>
</tr>
</table><br>
<p>
In addition, the <b>Audit</b> component writes the values of the following name/value pairs in the Transport Dictionary, if they exist, into columns in the database with the same names:</p>
<table cellspacing=4 cols=2 width=464>
<tr valign=top>
<th align=left width=28%>Name</th>
<th align=left width=72%>Description</th>
</tr>
<tr valign=top>
<td colspan=2 width=100%></td>
</tr>
<tr valign=top>
<td width=28%><b>receipt_requested</b></td>
<td width=72%>Optional name/value pair originally written to the Transport Dictionary by the transmitting application, indicating a request for the receiving application to send a receipt.</td>
</tr>
<tr valign=top>
<td width=28%><b>AppID</b></td>
<td width=72%>Application ID. An optional name/value pair originally written to the Transport Dictionary by the transmitting application, usually indicating the programmatic ID (progID) of the transmitting application.</td>
</tr>
<tr valign=top>
<td width=28%><b>return_receipt_request</b></td>
<td width=72%>Optional name/value pair written to the Transport Dictionary by the <b>OpenHeader </b>component, containing the hashing algorithm (&lt;DIGESTALGORITHM&gt;) and the type of receipt document requested (&lt;DOCUMENTTYPE&gt;).</td>
</tr>
<tr valign=top>
<td width=28%><b>msg_digest</b></td>
<td width=72%>Digest (hash) of the business data object written to the Transport Dictionary by <b>OpenHeader</b>.</td>
</tr>
<tr valign=top>
<td width=28%><b>document_type</b></td>
<td width=72%>Optional. Description of the type of business object being transmitted.</td>
</tr>
<tr valign=top>
<td width=28%><b>document_source</b></td>
<td width=72%>Optional. Description of the source of the business object, usually the name or address of the company transmitting it</td>
</tr>
<tr valign=top>
<td width=28%><b>document_destination</b></td>
<td width=72%>Optional. Description of the destination of the business object, usually the name or address of the company receiving it.</td>
</tr>
<tr valign=top>
<td width=28%><b>send_datetime</b></td>
<td width=72%>The date and time of the <b>OpenHeader </b>operation.</td>
</tr>
</table><br>
<p>
When using the <b>Audit </b>component, observe the following notes:
<ul>
<li>
&upsilon;Each column in the table must be one of the default columns or have a corresponding entry in the <b>Fields to record</b> list. </li>
<li>
&upsilon;Each column in the table must allow nulls to be inserted.</li>
<li>
&upsilon;Values that contain text, where the text includes a single-quote (') character, cannot be logged by the <b>Audit </b>component.</li>
</ul>
<p>
For an example of this component, see the Commerce Interchange Transmit pipeline used by the Microsoft Market sample site (Inetpub\Wwwroot\Market\Config\InterchangeTransmit.pcf).</p>
<h4>Related Topics</h4>
<ul>
<li>
&upsilon;<a href="com_cic_13.htm">Auditing</a></li>
<li>
&upsilon;<a href="com_piperef_3.htm"><b>AuditReceipt</b></a></li>
<li>
&upsilon;<object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="com_design_mibj">
</object><a href=JavaScript:alink_1.Click()>Commerce Server Connection Strings</a></li>
<li>
&upsilon;<object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="com_sitecreate_ppbl">
</object><a href=JavaScript:alink_2.Click()>Changing the Default Connection String From MMC</a> </li>
<li>
&upsilon;<object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="notopic.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="com_sitecreate_cnbk">
</object><a href=JavaScript:alink_3.Click()>Changing the Default Connection String From WebAdmin</a></li>
</ul>
<!-----------------------------Copyright 1997-1998 Microsoft Corporation------------------------------>
<hr>
<center><font size=-1>
<A HREF="sdklegal.htm">&copy; 1997-1998 Microsoft Corporation. All rights reserved.</A>
</font></center>
<br>
<br>
<p>&nbsp;</p></body>
</HTML>
