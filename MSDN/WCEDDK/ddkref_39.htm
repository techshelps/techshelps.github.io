<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ACMDM_FORMATTAG_DETAILS</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h2><a name="_wceddk_acmdm_formattag_details"></a>ACMDM_FORMATTAG_DETAILS</h2>
<p>
The ACMDM_FORMATTAG_DETAILS message requests an ACM driver to return information about a format tag.</p>
<h4>Parameters</h4>
<dl>
<dt>
<i>dwDriverID</i></dt>
<dd>
Driver instance identifier. This is the value returned by the driver in response to the <b>ACM_Open</b> function.</dd>
<dt>
<i>hDriver</i></dt>
<dd>
Driver handle.</dd>
<dt>
<i>uMsg</i></dt>
<dd>
ACMDM_FORMATTAG_DETAILS</dd>
<dt>
<i>lParam1</i></dt>
<dd>
Pointer to an ACMFORMATTAGDETAILS structure. ( ACMFORMATTAGDETAILS is defined in Msacm.h and described in the Win32 SDK.)</dd>
<dt>
<i>lParam2</i></dt>
<dd>
Contains one of the following flags, specified by the fdwDetails parameter of the acmFormatTagDetails function, which is described in the Win32 SDK:
<dl>
<dt>
ACM_FORMATTAGDETAILSF_INDEX</dt>
<dd>
Indicates the dwFormatTagIndex member of the ACMFORMATTAGDETAILS structure contains a format tag index. The valid index range is from zero to one less than the cFormatTags member returned in the driver's ACMDRIVERDETAILS structure. (See ACMDM_DRIVER_DETAILS.)
<p>
The driver should return details for the format tag associated with the index.
</dd>
<dt>
ACM_FORMATTAGDETAILSF_FORMATTAG</dt>
<dd>
Indicates the dwFormatTag member of the ACMFORMATTAGDETAILS structure contains a format tag.
<p>
The driver should return details for the specified format tag.
</dd>
<dt>
ACM_FORMATTAGDETAILSF_LARGESTSIZE</dt>
<dd>
Indicates the driver should return details for the format tag having the largest format. The dwFormatTag member of ACMFORMATTAGDETAILS can contain a format tag or WAVE_FORMAT_UNKNOWN.</dd>
</dl>
</dd>
</dl>
<h4>Return Value</h4>
<p>
The driver should return MMSYSERR_NOERROR if the operation succeeds. Otherwise it should return one of the MMSYSERR error codes defined in Mmsystem.h, or one of the ACMERR error codes defined in Msacm.h. Possible error codes include:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=40%>Value</th>
<th align=left width=60%>Description</th>
</tr>
<tr valign=top>
<td width=40%>MMSYSERR_NOTSUPPORTED</td>
<td width=60%>The driver does not support the specified query operation.</td>
</tr>
<tr valign=top>
<td width=40%>ACMERR_NOTPOSSIBLE</td>
<td width=60%>The input parameter values do not represent a valid format or format tag.</td>
</tr>
</table><br>
<h4>Comments</h4>
<p>
The ACM (WAVEAPI.DLL) sends the ACMDM_FORMATTAG_DETAILS message by calling the ACM driver's <b>ACM_IOControl</b>() entry point via DeviceIoControl(). The ACM sends this message when an application calls the <b>acmFormatTagDetails</b> function, which is described the Win32 SDK.</p>
<p>
All ACM drivers must support this message.</p>
<p>
The client specifies the format tag in the ACMFORMATTAGDETAILS structure's dwFormatTag member. The driver returns information for a particular tag, as follows:
<ul>
<li>
If the ACM_FORMATDETAILSF_INDEX flag is set, the client has specified an index value in the ACMFORMATTAGDETAILS structure's dwFormatTagIndex member. The driver fills in the ACMFORMATTAGDETAILS structure for the format tag associated with the specified index value.</li>
<li>
If the ACM_FORMATTAGDETAILSF_FORMATTAG flag is set, the client has specified a format tag in the ACMFORMATTAGDETAILS structure's dwFormatTag member. The driver fills in the ACMFORMATTAGDETAILS structure for the specified format tag.</li>
<li>
If the ACM_FORMATTAGDETAILSF_LARGESTSIZE flag is set, the driver does one of two things:<ul>
<li>
If dwFormatTag contains WAVE_FORMAT_UNKNOWN, the driver fills in the ACMFORMATTAGDETAILS structure for the format tag that has a format with the largest format structure size.</li>
<li>
If dwFormatTag contains a format tag, the driver fills in the ACMFORMATTAGDETAILS structure for that format tag, describing the format with the largest structure size belonging to the specified tag.</li>
</ul>
</li>
</ul>
<p>
Before calling the driver's <b>ACM_IOControl</b> function, the ACM verifies that:
<ul>
<li>
The ACMFORMATTAGDETAILS structure is readable and writeable.</li>
<li>
The size of the ACMFORMATTAGDETAILS structure (contained in its cbStruct member) is at least the structure's defined size. (The structure's size can be larger than its defined size, to allow for a longer szFormatTag member or to allow newer, larger structure definitions to be used within drivers under development.)</li>
<li>
The ACMFORMATTAGDETAILS structure's fdwSupport member contains zero.</li>
<li>
The lParam2 parameter contains a valid flag value.</li>
</ul>
<p>
If the format tag is WAVE_FORMAT_PCM, then the driver should return a zero-length string in <i>szFormatTag</i>. The ACM provides a description string for this format.</p>
<p>
Before returning, the driver must set the ACMFORMATTAGDETAILS structure's <i>cbStruct</i> member to the actual number of bytes returned. The value returned in <i>cbStruct</i> must not be greater than the value received.</p>
<p>
For more information about format tags, see Format Tags and Filter Tags in the Windows NT DDK.</p>
<p>&nbsp;</p></body>
</HTML>
