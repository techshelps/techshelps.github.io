<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ACMDM_FORMAT_SUGGEST</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<h2><a name="_wceddk_acmdm_format_suggest"></a>ACMDM_FORMAT_SUGGEST</h2>
<p>
The ACMDM_FORMAT_SUGGEST message requests an ACM driver to suggest a destination format for a conversion, given a specified source format.</p>
<h4>Parameters</h4>
<dl>
<dt>
<i>dwDriverID</i></dt>
<dd>
Driver instance identifier. This is the value returned by the driver in response to the <b>ACM_Open</b> function.</dd>
<dt>
<i>hDriver</i></dt>
<dd>
Driver handle.</dd>
<dt>
<i>uMsg</i></dt>
<dd>
ACMDM_FORMAT_SUGGEST</dd>
<dt>
<i>lParam1</i></dt>
<dd>
Pointer to an <b>ACMDRVFORMATSUGGEST</b> structure. ( <b>ACMDRVFORMATSUGGEST</b> is defined in msacmdrv.h.)</dd>
<dt>
<i>lParam2</i></dt>
<dd>
Not used.</dd>
</dl>
<h4>Return Value</h4>
<p>
The driver should return MMSYSERR_NOERROR if the operation succeeds. Otherwise it should return one of the MMSYSERR error codes defined in Mmsystem.h, or one of the ACMERR error codes defined in Msacm.h. Possible error codes include:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Value</th>
<th align=left width=52%>Description</th>
</tr>
<tr valign=top>
<td width=48%>MMSYSERR_NOTSUPPORTED</td>
<td width=52%>The driver does not support format suggestion operations.</td>
</tr>
<tr valign=top>
<td width=48%>ACMERR_NOTPOSSIBLE</td>
<td width=52%>The driver cannot suggest a destination format, based on the specified source format and restriction flags.</td>
</tr>
</table><br>
<h4>Comments</h4>
<p>
The ACM (WAVEAPI.DLL) sends the ACMDM_FORMAT_SUGGEST message by calling the ACM driver's <b>ACM_IOControl</b>() entry point via DeviceIoControl(). The ACM sends this message when an application calls the <b>acmFormatSuggest</b> function, which is described in the Win32 SDK.</p>
<p>
All ACM drivers that provide stream conversions must support this message.</p>
<p>
The <b>ACMDRVFORMATSUGGEST</b> structure contains pointers to two WAVEFORMATEX structures. One of these structures describes the client-specified source format. The other structure is used by the driver to return a suggested destination format. The client might specify values for some of the destination structure members, in order to restrict the possible suggestions. For more information, see the description of <b>ACMDRVFORMATSUGGEST</b>.</p>
<p>
Given the specified source format and destination restrictions (if any), the driver determines if it can provide a conversion from the specified source format to some destination format. If it can, it returns a description of that format in the destination WAVEFORMATEX structure.</p>
<p>
Before calling the driver's <b>ACM_IOControl</b> function, the ACM verifies that:
<ul>
<li>
The flag values contained in the <b>ACMDRVFORMATSUGGEST</b> structure are valid.</li>
<li>
The WAVEFORMATEX structure containing the source format description is readable.</li>
<li>
The WAVEFORMATEX structure specified for receiving the suggested destination format description is writeable.</li>
<li>
The destination WAVEFORMATEX structure's size, contained in the <b>ACMDRVFORMATSUGGEST</b> structure's cbwfxDst member, is large enough to receive a format structure for an appropriate destination format.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
