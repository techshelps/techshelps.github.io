<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting Palette Entries in Windowed Mode</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h4><a name="_dx5_setting_palette_entries_in_windowed_mode_ddraw"></a>Setting Palette Entries in Windowed Mode</h4>
<p>
The rules that apply to the <b>PALETTEENTRY</b> structure used with the <a href="ddref_383b.htm"><b>IDirectDraw2::CreatePalette</b></a> method also apply to the <a href="ddref_66uv.htm"><b>IDirectDrawPalette::SetEntries</b></a> method. Typically, you maintain your own array of <b>PALETTEENTRY</b> structures, so you do not need to rebuild it. When necessary, you can modify the array, and then call <b>IDirectDrawPalette::SetEntries</b> when it is time to update the palette.</p>
<p>
In most circumstances, you should not attempt to set any of the Windows static entries when in nonexclusive (windowed) mode or you will get unpredictable results. The only exception is when you reset the 256 entries.</p>
<p>
For palette animation, you typically change only a small subset of entries in your <b>PALETTEENTRY</b> array. You submit only those entries to <b>IDirectDrawPalette::SetEntries</b>. If you are resetting such a small subset, you must reset only those entries marked with the PC_NOCOLLAPSE and PC_RESERVED flags. Attempting to animate other entries can have unpredictable results.</p>
<p>
The following example illustrates palette animation in nonexclusive mode:</p>
<pre><code>LPDIRECTDRAW        lpDD;        // Already initialized 
PALETTEENTRY pPaletteEntry[256]; // Already initialized 
LPDIRECTDRAWPALETTE lpDDPal;     // Already initialized 
int                 index; 
HRESULT             ddrval; 
PALETTEENTRY        temp; 
 
// Animate some entries. Cycle the first 16 available entries. 
// They were already animated. 
temp = pPaletteEntry[10]; 
for (index = 10; index &lt; 25; index ++) 
{ 
    pPaletteEntry[index] = pPaletteEntry[index+1]; 
} 
pPaletteEntry[25] = temp; 
 
// Set the values. Do not pass a pointer to the entire palette entry 
// structure, but only to the changed entries. 
ddrval = lpDDPal-&gt;SetEntries( 
    0,                      // Flags must be zero 
    10,                     // First entry 
    16,                     // Number of entries 
    &amp; (pPaletteEntry[10])); // Where to get the data 
 </code></pre>
<p>&nbsp;</p></body>
</HTML>
