<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Solving Problems Caused by Half-Lines</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h4><a name="_dx5_solving_problems_caused_by_half_lines_ddraw"></a>Solving Problems Caused by Half-Lines</h4>
<p>
Some video decoders output a half line of meaningless data at the beginning of the <a href="glossary_8yb7.htm#_dx5_even_field_glos">even field</a>. If this extra line is written to the frame buffer, the resulting image will appear garbled. In some cases, the video-port hardware is capable of sensing and discarding this data before writing it to the frame buffer. </p>
<p>
You can determine if a video port is capable of discarding this data when retrieving connection information with the <a href="ddref_53xz.htm"><b>IDDVideoPortContainer::GetVideoPortConnectInfo</b></a> method. If the video port cannot discard half-lines, the DDVPCONNECT_HALFLINE flag will be specified in the <b>dwFlags</b> member of the associated <a href="ddref_3ws7.htm"><b>DDVIDEOPORTCONNECT</b></a> structure for each supported connection.</p>
<p>
If the video port is unable to discard half-lines, you have two options: you can discard one of the fields, or you can work around the hardware's limitations by making some adjustments in how you create the video-port object, and display images with the target overlay surface</p>
<p>
Here's how to work around the problem. When creating the video-port object by calling the <a href="ddref_2wqf.htm"><b>IDDVideoPortContainer::CreateVideoPort</b></a> method, include the DDVPCONNECT_INVERTPOLARITY flag in the <b>dwFlags</b> member of the associated <b>DDVIDEOPORTCONNECT</b> structure. This causes the video port to invert the <a href="glossary_2ysz.htm#_dx5_field_polarity_glos">polarity</a> of the fields in the video stream, treating even fields like odd fields and vice versa. Once reversed, the half-line preceding even fields will be written to the frame buffer as the first scan line of each frame. To remove the unwanted data, adjust the source rectangle of the overlay surface used to display the image down one pixel by calling the <a href="ddref_6uyf.htm"><b>IDirectDrawVideoPort::StartVideo</b></a> method with the necessary coordinates. Note that this technique requires that you allocate one extra line in the surface containing the even field.</p>
<p>&nbsp;</p></body>
</HTML>
