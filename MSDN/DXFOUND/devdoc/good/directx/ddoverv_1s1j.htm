<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Step 2: Creating a Simple Animation</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_dx5_step_2_creating_a_simple_animation_ddraw"></a>Step 2: Creating a Simple Animation</h3>
<p>
The DDEX4 sample uses the updateFrame sample function to create a simple animation using the red donuts included in the All.bmp file. The animation consists of three red donuts positioned in a triangle and rotating at various speeds. This sample compares the Win32 <b>GetTickCount</b> function with the number of milliseconds since the last call to <b>GetTickCount</b> to determine whether to redraw any of the sprites. It subsequently uses the <a href="ddref_8nqv.htm"><b>IDirectDrawSurface3::BltFast</b></a> method first to blit the background from the <a href="glossary_938z.htm#_dx5_off_screen_surface_glos">off-screen surface</a> (<i>lpDDSOne</i>) to the <a href="glossary_6wtv.htm#_dx5_back_buffer_glos">back buffer</a>, and then to blit the sprites to the back buffer using the <a href="glossary_0xbn.htm#_dx5_color_key_glos">color key</a> that you set earlier to determine which pixels are transparent. After the sprites are blitted to the back buffer, DDEX4 calls the <a href="ddref_6v93.htm"><b>IDirectDrawSurface3::Flip</b></a> method to flip the back buffer and the <a href="glossary_33qr.htm#_dx5_primary_surface_glos">primary surface</a>.</p>
<p>
Note that when you use <b>IDirectDrawSurface3::BltFast</b> to blit the background from the off-screen surface, the <i>dwTrans</i> parameter that specifies the type of transfer is set to DDBLTFAST_NOCOLORKEY. This indicates that a normal blit will occur with no transparency bits. Later, when the red donuts are blitted to the back buffer, the <i>dwTrans</i> parameter is set to DDBLTFAST_SRCCOLORKEY. This indicates that a blit will occur with the color key for transparency as it is defined, in this case, in the <i>lpDDSOne</i> buffer.</p>
<p>
In this sample, the entire background is redrawn each time through the updateFrame function. One way of optimizing this sample would be to redraw only that portion of the background that changes while rotating the red donuts. Because the location and size of the rectangles that make up the donut sprites never change, you should be able to easily modify the DDEX4 sample with this optimization.</p>
<p>&nbsp;</p></body>
</HTML>
