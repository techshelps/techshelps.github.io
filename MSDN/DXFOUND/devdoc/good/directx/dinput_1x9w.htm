<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Conditions</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_dx5_conditions_dinput"></a>Conditions</h3>
<p>
Conditions are forces applied in response to current sensor values within the device. In other words, conditions require information about device motion such as position or velocity of a joystick handle. </p>
<p>
In general, conditions are not associated with individual events during a game or other application. They represent ambient phenomena such as the stiffness or looseness of a flight stick, or the tendency of a steering wheel to return to a straight-ahead position.</p>
<p>
A condition does not have a predefined magnitude; the magnitude is scaled in proportion to the movement or position of the input object.</p>
<p>
DirectInput defines the following types of condition effects:
<ul>
<li>
<i>Friction</i>. The force is applied when the axis is moved, and depends on the defined friction coefficient. </li>
<li>
<i>Damper</i>. The force increases in proportion to the velocity with which the user moves the axis.</li>
<li>
<i>Inertia</i>. The force increases in proportion to the acceleration of the axis.</li>
<li>
<i>Spring</i>. The force increases in proportion to the distance of the axis from a defined neutral point.</li>
</ul>
<p>
Most hardware devices do not support the application of <a href="glossary_8yb7.htm#_dx5_envelope_glos">envelopes</a> to conditions. To determine whether a particular effect supports an envelope, check for the DIEP_ENVELOPE flag in the <b>dwStaticParams</b> member of the <a href="dinput_5m7o.htm"><b>DIEFFECTINFO</b></a> structure.</p>
<p>
Conditions have the following type-specific parameters:
<dl>
<dt>
<i>Offset</i>. </dt>
<dd>
The offset from the zero reading of the appropriate sensor value where the condition begins to be applied. For a spring effect, the neutral point—that is, the point along the axis where the spring would be considered at rest—would be defined by the offset for the condition. For a damper, the offset would define the greatest velocity value for which damping force is zero. Offset is not normally used for inertia or friction effects.</dd>
<dt>
<i>Coefficient</i>. </dt>
<dd>
A multiplier that scales the effect. For some devices, you can set separate coefficients for the positive and negative direction along the axis associated with the condition. For example, a flight stick controlling a damaged aircraft might move more easily to the right than to the left.</dd>
<dt>
<i>Saturation</i>. </dt>
<dd>
The saturation point is the point on an axis at which a force is considered to be at its maximum or minimum. Increases or decreases in magnitude beyond this point are ignored. For example, suppose a flight stick has a spring condition on the x-axis. The formula for the condition causes the force to keep increasing with the distance of the axis from the neutral point, but on some devices you could set the positive and negative saturation points so that the full force of the effect is reached when the stick has been moved halfway to the right or left, and does not increase beyond that point.</dd>
<dt>
<i>Deadband</i>. </dt>
<dd>
The deadband is a zone in an axis where a condition does not apply. Taking the spring example again, the deadband would define a zone within which the axis was considered to be at the neutral point, and no force would be applied.</dd>
</dl>
<p>
Conditions can have duration, though in most cases you would probably want to set the duration to INFINITE and stop the effect only in response to some event in the application.</p>
<p>
To create a condition, pass one of the following values in the <i>rguid</i> parameter of the <a href="dinput_92d0.htm"><b>IDirectInputDevice2::CreateEffect</b></a> method:
<ul>
<li>
GUID_Spring</li>
<li>
GUID_Damper</li>
<li>
GUID_Inertia</li>
<li>
GUID_Friction</li>
</ul>
<p>
You can also pass any other GUID obtained by the <a href="dinput_3i5w.htm"><b>IDirectInputDevice2::EnumEffects</b></a> method, provided the low byte of the <b>dwEffType</b> member of the <a href="dinput_5m7o.htm"><b>DIEFFECTINFO</b></a> structure (<b>DIEFT_GETTYPE</b>(<b>dwEfftype</b>)) is equal to DIEFT_CONDITION. In this way you can use hardware-specific conditions designed by the manufacturer. </p>
<p>
The type-specific structure for conditions is <a href="dinput_88tw.htm"><b>DICONDITION</b></a>. For multiple-axis conditions you may provide an array of such structures, one for each axis, or a single structure that defines the condition in the specified direction. In either case you need to set the <b>cbTypeSpecificParams</b> member of the <a href="dinput_6l2s.htm"><b>DIEFFECT</b></a> structure to the actual number of bytes used; that is, to <b>sizeof(DICONDITION)</b> * <i>n</i>, where <i>n</i> is the number of structures provided. For more information on how to use either single or multiple structures, see the Remarks for the <a href="dinput_88tw.htm"><b>DICONDITION</b></a> structure.</p>
<p>
An application should call <a href="dinput_61mc.htm"><b>IDirectInputDevice2::GetEffectInfo</b></a> or <a href="dinput_3i5w.htm"><b>IDirectInputDevice2::EnumEffects</b></a> and examine the <b>dwEffectType</b> member of the <a href="dinput_5m7o.htm"><b>DIEFFECTINFO</b></a> structure in order to determine if the both a positive and negative coefficient and <a href="glossary_5583.htm#_dx5_saturation_glos">saturation</a> for the effect are supported on the device. If the effect does not return the DIEFT_POSNEGCOEFFICIENTS flag, it will ignore the value in the <b>lNegativeCoefficient</b> member and the value in <b>lPositiveCoefficient</b> will be applied to the entire axis. Likewise, if the effect does not return the DIEFT_POSNEGSATURATION flag, it will ignore the value in the <b>dwNegativeSaturation</b> and the value in <b>dwPositiveSaturation</b> will be used as the negative saturation level. Finally, if the effect does not return the DIEFT_SATURATION flag, it will ignore both the <b>lPositiveSaturation</b> and <b>lNegativeSaturation</b> values and no saturation will be applied.</p>
<p>
Note that you can set a coefficient to a negative value, and this has the effect of generating the force in the opposite direction. For example, for a spring effect it would cause the spring to push away from the offset point rather than pulling toward it.</p>
<p>
You should also check the <b>dwEffectType</b> member for the DIEFT_DEADBAND flag, to see if deadband is supported for the condition. If it is not supported, the value in the <b>lDeadBand</b> member of the <b>DICONDITION</b> structure will be ignored.</p>
<p>&nbsp;</p></body>
</HTML>
