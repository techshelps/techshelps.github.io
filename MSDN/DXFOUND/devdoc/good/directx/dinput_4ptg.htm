<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IDirectInputEffect::SetParameters</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_dx5_idirectinputeffect_setparameters_dinput"></a>IDirectInputEffect::SetParameters</h1>
<p>
The <b>IDirectInputEffect::SetParameters</b> method sets information about an effect.</p>
<pre><code><b>HRESULT SetParameters(
  LPCDIEFFECT</b><i> peff</i><b>,  </b>
<b>  DWORD</b><i> dwFlags      </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>peff</i></dt>
<dd>
A <a href="dinput_6l2s.htm"><b>DIEFFECT</b></a> structure that contains effect information. The <b>dwSize</b> member must be filled in by the application before calling this function, as well as any members specified by corresponding bits in the <i>dwFlags</i> parameter.</dd>
<dt>
<i>dwFlags</i></dt>
<dd>
Flags specifying which portions of the effect information are to be set and how the downloading of the parameters should be handled. The value may be zero, or one or more of the following constants:
<table cellspacing=4 cols=2>
<tr valign=top>
<td colspan=2 width=100%>DIEP_AXES</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>cAxes</b> and <b>rgdwAxes</b> members contain data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_DIRECTION</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>cAxes</b> and <b>rglDirection</b> members contain data. The <b>dwFlags</b> member specifies (with <b>DIEFF_CARTESIAN</b> or <b>DIEFF_POLAR</b>) the coordinate system in which the values should be interpreted.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_DURATION</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwDuration</b> member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_ENVELOPE</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>lpEnvelope</b> member points to a <a href="dinput_3bn8.htm"><b>DIENVELOPE</b></a> structure that contains data. To detach any existing envelope from the effect, pass this flag and set the <b>lpEnvelope</b> member to NULL.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_GAIN</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwGain</b> member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_NODOWNLOAD</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>Suppress the automatic <a href="dinput_5644.htm"><b>IDirectInputEffect::Download</b></a> that is normally performed after the parameters are updated. See Remarks.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_NORESTART</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>Suppress the stopping and restarting of the effect in order to change parameters. See Remarks.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_SAMPLEPERIOD</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwSamplePeriod</b> member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_START</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The effect is to be started (or restarted if it is currently playing) after the parameters are updated.  By default, the play state of the effect is not altered.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_TRIGGERBUTTON</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwTriggerButton</b> member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_TRIGGERDELAY</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwTriggerDelay</b> member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_TRIGGERREPEATINTERVAL</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>dwTriggerRepeatInterval </b>member contains data.</td>
</tr>
<tr valign=top>
<td colspan=2 width=100%>DIEP_TYPESPECIFICPARAMS</td>
</tr>
<tr valign=top>
<td width=10%></td>
<td width=90%>The <b>lpvTypeSpecificParams</b> and <b>cbTypeSpecificParams</b> members of the <b>DIEFFECT</b> structure contain the address and size of type-specific data for the effect.</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Return Values</h4>
<p>
If the method succeeds, the return value is one of the following:</p>
<table cellspacing=4 cols=1>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_di_ok_dinput">DI_OK</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_di_effectrestarted_dinput">DI_EFFECTRESTARTED</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_di_downloadskipped_dinput">DI_DOWNLOADSKIPPED</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_di_truncated_dinput">DI_TRUNCATED</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_di_truncatedandrestarted_dinput">DI_TRUNCATEDANDRESTARTED</a></td>
</tr>
</table><br>
<p>
If the method fails, the return value may be one of the following error values:</p>
<table cellspacing=4 cols=1>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_dierr_notinitialized_dinput">DIERR_NOTINITIALIZED</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_dierr_incompleteeffect_dinput">DIERR_INCOMPLETEEFFECT</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_dierr_inputlost_dinput">DIERR_INPUTLOST</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_dierr_invalidparam_dinput">DIERR_INVALIDPARAM</a></td>
</tr>
<tr valign=top>
<td width=100%><a href="dinput_7yk4.htm#_dx5_dierr_effectplaying_dinput">DIERR_EFFECTPLAYING</a></td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
The <b>dwDynamicParams</b> member of the <a href="dinput_5m7o.htm"><b>DIEFFECTINFO</b></a> structure for the effect specifies which parameters can be dynamically updated while the effect is playing.</p>
<p>
The <b>IDirectInputEffect::SetParameters</b> method automatically downloads the effect, but this behavior can be suppressed by setting the DIEP_NODOWNLOAD flag. If automatic download has been suppressed, then you can manually download the effect by invoking the <a href="dinput_5644.htm"><b>IDirectInputEffect::Download</b></a> method.</p>
<p>
If the effect is playing while the parameters are changed, then the new parameters take effect as if they were the parameters when the effect started.</p>
<p>
For example, suppose a periodic effect with a duration of three seconds is started. After two seconds, the direction of the effect is changed. The effect will then continue for one additional second in the new direction. The <a href="glossary_8yb7.htm#_dx5_envelope_glos">envelope</a>, phase, amplitude, and other parameters of the effect continue smoothly as if the direction had not changed.</p>
<p>
In the same scenario, if after two seconds the duration of the effect were changed to 1.5 seconds, then the effect would stop.</p>
<p>
Normally, if the driver cannot update the parameters of a playing effect, the driver is permitted to stop the effect, update the parameters, and then restart the effect. Passing the DIEP_NORESTART flag suppresses this behavior. If the driver cannot update the parameters of an effect while it is playing, the error code DIERR_EFFECTPLAYING is returned and the parameters are not updated.</p>
<p>
No more than one of the DIEP_NODOWNLOAD, DIEP_START, and DIEP_NORESTART flags should be set. (It is also valid to pass none of them.)</p>
<p>
These three flags control download and playback behavior as follows:</p>
<p>
If DIEP_NODOWNLOAD is set, the effect parameters are updated but not downloaded to the device.</p>
<p>
If the DIEP_START flag is set, the effect parameters are updated and downloaded to the device, and the effect is started just as if the <b>IDirectInputEffect::Start</b> method had been called with the <i>dwIterations</i> parameter set to 1 and with no flags. (Combining the update with DIEP_START is slightly faster than calling <b>Start</b> separately, because it requires less information to be transmitted to the device.)</p>
<p>
If neither DIEP_NODOWNLOAD nor DIEP_START is set and the effect is not playing, then the parameters are updated and downloaded to the device.</p>
<p>
If neither DIEP_NODOWNLOAD nor DIEP_START is set and the effect is playing, then the parameters are updated if the device supports on-the-fly updating. Otherwise the behavior depends on the state of the DIEP_NORESTART flag. If it is set, the error code DIERR_EFFECTPLAYING is returned. If it is clear, the effect is stopped, the parameters are updated, and the effect is restarted.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Use version 5.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Use Windows 95 or later. Available as a redistributable for Windows 95.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in dinput.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use dinput.lib.</p>
<p>&nbsp;</p></body>
</HTML>
