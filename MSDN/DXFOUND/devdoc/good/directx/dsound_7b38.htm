<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IDirectSoundBuffer::GetFormat</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_dx5_idirectsoundbuffer_getformat_dsound"></a>IDirectSoundBuffer::GetFormat</h1>
<p>
The <b>IDirectSoundBuffer::GetFormat</b> method retrieves a description of the format of the sound data in the buffer, or the buffer size needed to retrieve the format description.</p>
<pre><code><b>HRESULT GetFormat(
  LPWAVEFORMATEX</b><i> lpwfxFormat</i><b>,  </b>
<b>  DWORD</b><i> dwSizeAllocated</i><b>,   </b>
<b>  LPDWORD</b><i> lpdwSizeWritten  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>lpwfxFormat</i></dt>
<dd>
Address of the <b>WAVEFORMATEX</b> structure to contain a description of the sound data in the buffer. To retrieve the buffer size needed to contain the format description, specify NULL. In this case the <b>DWORD</b> pointed to by the <i>lpdwSizeWritten</i> parameter will receive the size of the structure needed to receive complete format information.</dd>
<dt>
<i>dwSizeAllocated</i></dt>
<dd>
Size, in bytes, of the <b>WAVEFORMATEX</b> structure. DirectSound writes, at most, <i>dwSizeAllocated</i> bytes to that pointer; if the <b>WAVEFORMATEX</b> structure requires more memory, it is truncated.</dd>
<dt>
<i>lpdwSizeWritten</i></dt>
<dd>
Address of a variable to contain the number of bytes written to the <b>WAVEFORMATEX</b> structure. This parameter can be NULL.
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the method succeeds, the return value is DS_OK.</p>
<p>
If the method fails, the return value may be <a href="dsound_9y3p.htm#_dx5_dserr_invalidparam_dsound">DSERR_INVALIDPARAM</a>.</p>
<h4>Remarks</h4>
<p>
The <b>WAVEFORMATEX</b> structure can have a variable length that depends on the details of the format. Before retrieving the format description, the application should query the DirectSoundBuffer object for the size of the format by calling this method and specifying NULL for the <i>lpwfxFormat</i> parameter. The size of the structure will be returned in the <i>lpdwSizeWritten</i> parameter. The application can then allocate sufficient memory and call <b>IDirectSoundBuffer::GetFormat</b> again to retrieve the format description.</p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Use version 4.0 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Use Windows 95 or later. Available as a redistributable for Windows 95.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in dsound.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use dsound.lib.</p>
<h4>See Also</h4>
<p>
<a href="dsound_317o.htm"><b>IDirectSoundBuffer</b></a>, <a href="dsound_96ck.htm"><b>IDirectSoundBuffer::SetFormat</b></a></p>
<p>&nbsp;</p></body>
</HTML>
