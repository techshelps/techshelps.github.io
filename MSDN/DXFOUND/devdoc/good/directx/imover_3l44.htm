<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Enumeration Function</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_dx5_enumeration_function_d3d"></a>Enumeration Function</h3>
<p>
The ChooseDevice function invokes the EnumDeviceCallback function , which is described in <a href="imover_0tyc.htm">Enumeration Callback Function</a>.</p>
<pre><code>static HRESULT 
ChooseDevice(void) 
{ 
    DDSURFACEDESC ddsd; 
    HRESULT       hRes; 
 
    ASSERT(NULL != lpd3d); 
    ASSERT(NULL != lpddPrimary); 
 
        // Since we are running in a window, we will not be changing the 
        // screen depth; therefore, the pixel format of the rendering 
        // target must match the pixel format of the current primary 
        // surface. This means that we need to determine the pixel 
        // format of the primary surface. 
 
    ZeroMemory(&amp;ddsd, sizeof(ddsd)); 
    ddsd.dwSize = sizeof(ddsd); 
    hRes = lpddPrimary-&gt;lpVtbl-&gt;GetSurfaceDesc(lpddPrimary, &amp;ddsd); 
    if (FAILED(hRes)) 
        return hRes; 
 
    dwDeviceBitDepth = 
        BitDepthToFlags(ddsd.ddpfPixelFormat.dwRGBBitCount); 
 
        // Enumerate the devices and pick one. 
 
    fDeviceFound = FALSE; 
    hRes = lpd3d-&gt;lpVtbl-&gt;EnumDevices(lpd3d, EnumDeviceCallback, 
                                      &amp;fDeviceFound); 
    if (FAILED(hRes)) 
        return hRes; 
 
    if (!fDeviceFound) 
    { 
                // No suitable device was found. We cannot allow 
                // device-creation to continue. 
 
        return DDERR_NOTFOUND; 
    } 
 
    return DD_OK; 
} 
 </code></pre>
<p>&nbsp;</p></body>
</HTML>
