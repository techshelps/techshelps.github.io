<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating an Execute Buffer</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_dx5_creating_an_execute_buffer_d3d"></a>Creating an Execute Buffer</h3>
<p>
The tricky thing about creating an <a href="glossary_8yb7.htm#_dx5_execute_buffer_glos">execute buffer</a> is figuring out how much memory to allocate for it. There are two basic strategies for determining the correct size:
<ul>
<li>
Add the sizes of the vertices, opcodes, and data you will be putting into the buffer.</li>
<li>
Allocate a buffer of an arbitrary size and fill it from both ends, putting the vertices at the beginning and the opcodes at the end. When the buffer is nearly full, execute it and allocate another.</li>
</ul>
<p>
The hardware determines the size of the <a href="glossary_8yb7.htm#_dx5_execute_buffer_glos">execute buffer</a>. You can retrieve this size by calling the <a href="d3dimref_2en8.htm"><b>IDirect3DDevice2::GetCaps</b></a> method and examining the <b>dwMaxBufferSize</b> member of the <a href="d3dimref_3d0k.htm"><b>D3DDEVICEDESC</b></a> structure. Typically, 64 KB is a good size for execute buffers when you are using a software driver, because this size makes the best use of the secondary cache. When your application can take advantage of hardware acceleration, however, it should use smaller execute buffers to take advantage of the primary cache.</p>
<p>
After filling in <a href="d3dimref_5xgk.htm"><b>D3DEXECUTEBUFFERDESC</b></a> structure describing your execute buffer, you can call the <a href="d3dimref_5wv8.htm"><b>IDirect3DDevice::CreateExecuteBuffer</b></a> to create it.</p>
<p>
For an example of calculating the size of the <a href="glossary_8yb7.htm#_dx5_execute_buffer_glos">execute buffer</a> and creating it, see <a href="imover_5q90.htm">Creating the Scene</a>, in the <a href="imover_2g84.htm">Direct3D Execute-Buffer Tutorial</a>.</p>
<p>&nbsp;</p></body>
</HTML>
