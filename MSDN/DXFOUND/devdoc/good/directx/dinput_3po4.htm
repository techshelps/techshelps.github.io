<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Step 1: Enumerating Force Feedback Devices</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_dx5_step_1_enumerating_force_feedback_devices_dinput"></a>Step 1: Enumerating Force Feedback Devices</h3>
<p>
The first step is to ensure that a force feedback device is available on the system. You do this by calling the <a href="dinput_41x0.htm"><b>IDirectInput::EnumDevices</b></a> method. In the following example, the global pointer to the game device interface is initialized only if the enumeration has succeeded in finding at least one suitable device: </p>
<pre><code>LPDIRECTINPUTDEVICE2  g_lpdid2Game = NULL;   

lpdi-&gt;EnumDevices(DIDEVTYPE_JOYSTICK, 
                  DIEnumDevicesProc,
                  NULL, 
                  DIEDFL_FORCEFEEDBACK | DIEDFL_ATTACHEDONLY);
if (g_lpdid2Game == NULL)
  {    
  // no force feedback joystick available; take appropriate action 
  }
 </code></pre>
<p>
In the example, <i>lpdi</i> is an initialized pointer to the <b>IDirectInput</b> interface. The first parameter to <b>EnumDevices</b> restricts the enumeration to joystick-type devices. The second parameter is the callback function that's going to be called each time DirectInput identifies a device that qualifies for enumeration. The third parameter is for user-defined data to be passed in or out of the callback function; in this case it's not used. Finally, the flags restrict the enumeration further to devices actually attached to the system that support force feedback.</p>
<p>
The callback function is a convenient place to initialize the device as soon as it has been found. (It's assumed that the first device found is the one you want to use.) You'll do this in <a href="dinput_3ohg.htm">Step 2: Creating the DirectInput Force Feedback Device</a>.</p>
<p>&nbsp;</p></body>
</HTML>
