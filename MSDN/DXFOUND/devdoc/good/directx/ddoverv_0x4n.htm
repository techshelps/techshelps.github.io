<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Testing For DMA Support</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h4><a name="_dx5_testing_for_dma_support_ddraw"></a>Testing For DMA Support</h4>
<p>
Before using DMA operations, you must test the device for DMA support and, if it does support DMA, how much support it provides. Begin by retrieving the driver capabilities by calling the <a href="ddref_748n.htm"><b>IDirectDraw2::GetCaps</b></a> method, then look for the DDCAPS_CANBLTSYSMEM flag in the <b>dwCaps</b> member of the associated <a href="ddref_1a9j.htm"><b>DDCAPS</b></a> structure. If the flag is set, the device supports DMA. </p>
<p>
If you know that DMA is generally supported, you also need to find out how well the driver supports it. You do so by looking at some other structure members that provide information about system-to-video, video-to-system, and system-to-system blit operations. These capabilities are provided in 12 <b>DDCAPS</b> structure members that are named according to blit and capability type. The following table shows these new members.</p>
<table cellspacing=4 cols=3>
<tr valign=top>
<td width=32%><b>System-to-video</b></td>
<td width=32%><b>Video-to-system</b></td>
<td width=36%><b>System-to-system</b></td>
</tr>
<tr valign=top>
<td width=32%><b>   dwSVBCaps</b></td>
<td width=32%><b>   dwVSBCaps</b></td>
<td width=36%><b>   dwSSBCaps </b></td>
</tr>
<tr valign=top>
<td width=32%><b>   dwSVBCKeyCaps</b></td>
<td width=32%><b>   dwVSBCKeyCaps</b></td>
<td width=36%><b>   dwSSBCKeyCaps </b></td>
</tr>
<tr valign=top>
<td width=32%><b>   dwSVBFXCaps</b></td>
<td width=32%><b>   dwVSBFXCaps</b></td>
<td width=36%><b>   dwSSBFXCaps </b></td>
</tr>
<tr valign=top>
<td width=32%><b>   dwSVBRops</b></td>
<td width=32%><b>   dwVSBRops</b></td>
<td width=36%><b>   dwSSBRops </b></td>
</tr>
</table><br>
<p>
For example, the system-to-video blit capability flags are provided in the <b>dwSVBCaps</b>, <b>dwSVBCKeyCaps</b>, <b>dwSVBFXCaps</b> and <b>dwSVBRops</b> members. Similarly, video-to-system blit capabilities are in the members whose names begin with "<b>dwVSB</b>," and system-to system capabilities are in the "<b>dwSSB</b>" members. Examine the flags present in these members to determine the level of hardware support for that blit category.</p>
<p>
The flags in these members are parallel with the blit-related flags included in the <b>dwCaps</b>, <b>dwCKeyCaps</b>, and <b>dwFXCaps</b> members, with respect to that member's blit type. For example, the <b>dwSVBCaps</b> member contains general blit capabilities as specified by the same flags you might find in the <b>dwCaps</b> member. Likewise, the raster operation values in the <b>dwSVBRops</b>, <b>dwVSBRops</b>, and <b>dwSSBRops</b> members provide information about the raster operations supported for a given type of blit operation.</p>
<p>
One of the key features to look for in these members is support for asynchronous DMA blit operations. If the driver supports asynchronous DMA blits between surfaces, the DDCAPS_BLTQUEUE flag will be set in the <b>dwSVBCaps</b>, <b>dwVSBCaps</b>, or <b>dwSSBCaps</b> member. (Generally, you'll see the best support for system-memory-to-video-memory surfaces.) If the flag isn't present, the driver isn't reporting support for asynchronous DMA blit operations.</p>
<p>&nbsp;</p></body>
</HTML>
