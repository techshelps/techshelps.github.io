<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ptr</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_rpc_ptr"></a>ptr</h1>
<p>
<b>pointer_default(ptr)<br>
<br>
typedef</b>&nbsp;<b>[&nbsp;ptr&nbsp;</b>[&nbsp;<b>,&nbsp;</b><i>type-attribute-list&nbsp;</i>]&nbsp;<b>]</b>&nbsp;<i>type-specifier&nbsp;declarator-list</i><b>;</b>&nbsp;<br>
<br>
<b>typedef</b>&nbsp;<i>struct-or-union-declarator&nbsp;</i><b>{</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;<b>[&nbsp;ptr&nbsp;</b>[&nbsp;<b>,&nbsp;</b><i>field-attribute-list&nbsp;</i>]&nbsp;<b>]</b>&nbsp;<i>type-specifier</i>&nbsp;<i>declarator-list</i><b>;</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;<b>...}</b></p>
<p>
[&nbsp;ptr&nbsp;[&nbsp;,&nbsp;<i>function-attribute-list</i>&nbsp;]&nbsp;]&nbsp;<i>type-specifier&nbsp;ptr-decl</i>&nbsp;<i>function-name</i><b>(</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;[&nbsp;<i>parameter-attribute-list</i>&nbsp;]&nbsp;]&nbsp;<i>type-specifier&nbsp;</i>[<i>declarator</i>]<br>
&nbsp;&nbsp;&nbsp;&nbsp;<b>,&nbsp;...</b><br>
<b>);</b><br>
[&nbsp;[&nbsp;<i>function-attribute-list</i>&nbsp;]&nbsp;]&nbsp;<i>type-specifier&nbsp;</i>[<i>ptr-decl</i>]&nbsp;<i>function-name</i><b>(</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;ptr&nbsp;[&nbsp;,<i>&nbsp;parameter-attribute-list</i>&nbsp;]&nbsp;]&nbsp;<i>type-specifier&nbsp;</i>[<i>declarator</i>]<br>
&nbsp;&nbsp;&nbsp;&nbsp;<b>,&nbsp;...</b><br>
<b>);</b>
<dl>
<dt>
<i>type-attribute-list</i></dt>
<dd>
Specifies one or more attributes that apply to the type. Valid type attributes include <b>handle</b>, <b>switch_type</b>, <b>transmit_as</b>; the pointer attribute <b>ref</b>, <b>unique</b>, or <b>ptr</b>; and the usage attributes <b>context_handle</b>, <b>string</b>, and <b>ignore</b>. Separate multiple attributes with commas.</dd>
<dt>
<i>type-specifier</i></dt>
<dd>
Specifies a <b>base_type</b>, <b>struct</b>, <b>union</b>, or <b>enum</b> type or type identifier. An optional storage specification can precede <i>type-specifier</i>.</dd>
<dt>
<i>declarator </i>and<i> declarator-list</i></dt>
<dd>
Specifies standard C declarators, such as identifiers, pointer declarators, and array declarators. For more information, see <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_rpc_pointers">
</object><a href=JavaScript:alink_1.Click()><b>pointers</b></a> and <a href="mi-laref_0vzl.htm"><b>arrays</b></a>. The <i>declarator-list</i> consists of one or more declarators separated by commas. The parameter-name identifier in the function declarator is optional.</dd>
<dt>
<i>struct-or-union-declarator</i></dt>
<dd>
Specifies a MIDL <a href="mi-laref_06k4.htm"><b>struct</b></a> or <a href="mi-laref_76i6.htm"><b>union</b></a> declarator.  </dd>
<dt>
<i>field-attribute-list</i></dt>
<dd>
Specifies zero or more field attributes that apply to the structure or union member or function parameter. Valid field attributes include <b>first_is</b>, <b>last_is</b>, <b>length_is</b>, <b>max_is</b>, <b>size_is</b>; the usage attributes <b>string</b>, <b>ignore</b>, and <b>context_handle</b>; the pointer attribute <b>ref</b>, <b>unique</b>, or <b>ptr</b>; and the union attribute <b>switch_type</b>. Separate multiple field attributes with commas.</dd>
<dt>
<i>function-attribute-list</i></dt>
<dd>
Specifies zero or more attributes that apply to the function. Valid function attributes are <b>callback</b>, <b>local</b>; the pointer attribute <b>ref</b>, <b>unique</b>, or <b>ptr</b>; and the usage attributes <b>string</b>, <b>ignore</b>, and <b>context_handle</b>.</dd>
<dt>
<i>ptr-decl</i></dt>
<dd>
Specifies at least one pointer declarator to which the <b>ptr</b> attribute applies. A pointer declarator is the same as the pointer declarator used in C; it is constructed from the <b>*</b> designator, modifiers such as <b>far</b>, and the qualifier <b>const</b>.</dd>
<dt>
<i>function-name</i></dt>
<dd>
Specifies the name of the remote procedure.</dd>
<dt>
<i>parameter-attribute-list</i></dt>
<dd>
Consists of zero or more attributes appropriate for the specified parameter type. Parameter attributes can take the directional attributes <b>in</b> and <b>out</b>; the field attributes <b>first_is</b>, <b>last_is</b>, <b>length_is</b>, <b>max_is</b>, <b>size_is</b>, and <b>switch_type</b>; the pointer attribute <b>ref</b>, <b>unique</b>, or <b>ptr</b>; and the usage attributes <b>context_handle</b> and <b>string</b>. The usage attribute <b>ignore</b> cannot be used as a parameter attribute. Separate multiple attributes with commas.
</dd>
</dl>
<h4>Examples</h4>
<pre><code>pointer_default(ptr) 
 
typedef [ptr, string] unsigned char * MY_STRING_TYPE; 
 
[ptr] char * MyFunction([in, out, unique] long * plNumber); 
 </code></pre>
<h4>Remarks</h4>
<p>
The <b>ptr</b> attribute designates a pointer as a full pointer. The full pointer approaches the full functionality of the C-language pointer. The full pointer can have the value NULL and can change during the call from null to non-null. Storage pointed to by full pointers can be reached by other names in the application supporting aliasing and cycles. This functionality requires more overhead during a remote procedure call to identify the data referred to by the pointer, determine whether the value is NULL, and to discover if two pointers point to the same data.</p>
<p>
Use full pointers for:
<ul>
<li>
Remote return values.</li>
<li>
Double pointers, when the size of an output parameter is not known. </li>
<li>
NULL pointers. </li>
</ul>
<p>
Full (and unique) pointers cannot be used to describe the size of an array or union because these pointers can have the value NULL. This restriction by MIDL prevents an error that can result when a NULL value is used as the size.</p>
<p>
Reference and unique pointers are assumed to cause no aliasing of data. A directed graph obtained by starting from a unique or reference pointer and following only unique or reference pointers contains neither reconvergence nor cycles.</p>
<p>
To avoid aliasing, all pointer values should be obtained from an input pointer of the same class of pointer. If more than one pointer points to the same memory location, all such pointers must be full pointers. </p>
<p>
In some cases, full and unique pointers can be mixed. A full pointer can be assigned the value of a unique pointer, as long as the assignment does not violate the restrictions on changing the value of a unique pointer. However, when you assign a unique pointer the value of a full pointer, you may cause aliasing. </p>
<p>
Mixing full and unique pointers can cause aliasing, as demonstrated in the following example:</p>
<pre><code>typedef struct { 
    [ptr] short * pdata;          // full pointer  
} GRAPH_NODE_TYPE; 
 
typedef struct { 
    [unique] graph_node * left;   // unique pointer  
    [unique] graph_node * right;  // unique pointer 
} TREE_NODE_TYPE; 
 
// application code: 
short a = 5; 
TREE_NODE_TYPE * t; 
GRAPH_NODE_TYPE g, h; 
 
g.pdata = h.pdata = &amp;a; 
t-&gt;left = &amp;g; 
t-&gt;right = &amp;h; 
// t-&gt;left-&gt;pdata == t-&gt;right-&gt;pdata == &amp;a 
 </code></pre>
<p>
Although "t-&gt;left" and "t-&gt;right" point to unique memory locations, "t-&gt;left-&gt;pdata" and "t-&gt;right-&gt;pdata" are aliased. For this reason, aliasing-support algorithms must follow all pointers (including unique and reference pointers) that may eventually reach a full pointer.</p>
<h4>See Also</h4>
<p>
<a href="mi-laref_49v0.htm"><b>IDL</b></a>, <a href="mi-laref_3cdw.htm"><b>pointer_default</b></a>, <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_rpc_pointers">
</object><a href=JavaScript:alink_2.Click()><b>pointers</b></a>, <a href="mi-laref_52cm.htm"><b>ref</b></a>, <a href="mi-laref_9r1h.htm"><b>unique</b></a></p>
<p>&nbsp;</p></body>
</HTML>
