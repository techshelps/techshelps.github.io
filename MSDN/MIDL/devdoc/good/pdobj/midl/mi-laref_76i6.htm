<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>union</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_rpc_union"></a>union</h1>
<p>
The <b>union</b> keyword appears in functions that relate to discriminated unions.</p>
<p>
MIDL supports two types of discriminated unions: encapsulated unions and nonencapsulated unions. The encapsulated union is compatible with previous implementations of RPC (NCA version 1). The nonencapsulated union eliminates some of the restrictions of the encapsulated union and provides a more visible discriminant than the encapsulated union.</p>
<p>
The encapsulated union is identified by the <b>switch</b> keyword and the absence of other union-related keywords. </p>
<p>
The nonencapsulated union, also known as a union, is identified by the presence of the <a href="mi-laref_4a43.htm"><b>switch_is</b></a> and <a href="mi-laref_765h.htm"><b>switch_type</b></a> keywords, which identify the discriminant and its type.  </p>
<p>
When you use <b>in</b>, <b>out</b> unions, be aware that changing the value of the union switch during the call can make the remote call behave differently from a local call. On return, the stubs copy the <b>in</b>, <b>out</b> parameter into memory that is already present on the client. When the remote procedure modifies the value of the union switch and consequently changes the data object's size, the stubs can overwrite valid memory with the <b>out</b> value. When the union switch changes the data object from a base type to a pointer type, the stubs can overwrite valid memory when they copy the pointer referent into the memory location indicated by the <b>in</b> value of a base type. </p>
<p>
The shape of unions must be identical across platforms to ensure interconnectivity.</p>
<h4>See Also</h4>
<p>
<a href="mi-laref_77e6.htm"><b>encapsulated_union</b></a>, <a href="mi-laref_49v0.htm"><b>IDL</b></a>, <a href="mi-laref_9jji.htm"><b>non-encapsulated_union</b></a>, <a href="mi-laref_4a43.htm"><b>switch_is</b></a>, <a href="mi-laref_765h.htm"><b>switch_type</b></a></p>
<p>&nbsp;</p></body>
</HTML>
