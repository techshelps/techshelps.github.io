<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MapNtStatusToWinError (VxD)</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_ntfunc_mapntstatustowinerror_vxd_"></a>MapNtStatusToWinError (VxD)</h1>
<p>
The <b>MapNtStatusToWinError</b> function maps a Microsoft® Windows NT® status code to a Win32® error code.</p>
<pre><code><b>ULONG 
MapNtStatusToWinError(
  NTSTATUS </b><i>Status</i>
<b>);</b>
<b> </b></code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>Status</i></dt>
<dd>
The Windows NT status value that is to be translated into a Win32 error code.
</dd>
</dl>
<h4>Return Values</h4>
<p>
<b>MapNtStatusToWinError</b> returns the translated Win32 error code.</p>
<h4>Remarks</h4>
<p>
Internally, your driver should work with Windows NT status values and not with Win32 error codes. The smart card resource manager, however, needs Win32 error codes. You can use this function in your device I/O control routine to map the Windows NT status value to a Win32 error code. Following is an example:</p>
<pre><code>DWORD
DriverName_DeviceIoControl(
  DWORD  dwService,
  DWORD  dwDDB,
  DWORD  hDevice,
  LPDIOC lpDiocParms)
)
{
    NTSTATUS status;

    // Let the library do parameter checking 
    // If the library requires the help of the driver it'll call
    // the driver using a call back mechanism
    status = SmartcardDeviceControl(
        &amp;SmartcardExtension,
        lpDiocParams
        );

    return MapNtStatusToWinError(status);
}
</code></pre>
<p>
This function is not available when developing WDM drivers. For a list of the  functions that can be used, see <a href="scfuncw_8tmb.htm">WDM Driver Functions</a>.</p>
<p>&nbsp;</p></body>
</HTML>
