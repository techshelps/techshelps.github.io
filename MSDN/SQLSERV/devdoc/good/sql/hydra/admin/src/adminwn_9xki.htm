<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Replication Log Reader</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_replication_log_reader"></a>Replication Log Reader</h3>
<p>
The log reader provides switches to help improve log reader performance during replication. </p>
<p>
The log reader moves replication data from the publisher to the distributor, so that data can later be replicated to subscribers. The data is inserted into the distribution database in transactions. The amount of data that is transferred within each transaction is controlled by log reader <b>-b</b>, <b>-c</b>, and <b>-t</b> parameters.</p>
<p>
Large batch sizes(<b>-b</b>, <b>-c</b>) move data out of the transaction log more quickly than small batch sizes. However, large batch inserts into the distributed database can cause subscriber tasks to block, waiting for access to the data. You must tailor the log reader parameters for optimal performance.</p>
<p>
The following switches control the behavior of the log reader task. Although the transaction batch size <b>-b</b> and commit batch size <b>-c</b> parameters are included in the following table, only the command threshold parameter <b>-t</b> is new for SQL Server 6.5.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=28%></th>
<th align=left width=72%></th>
</tr>
<tr valign=top>
<th align=left width=28%></th>
<th align=left width=72%></th>
</tr>
<tr valign=top>
<th align=left width=28%>Switch parameter</th>
<th align=left width=72%>Description</th>
</tr>
<tr valign=top>
<td width=28%><b>-b</b></td>
<td width=72%>Specifies the transaction batch size. This parameter determines the maximum number of transactions that are read out of the log before the log reader begins the COMMIT TRANSACTION process. The default is 100.</td>
</tr>
<tr valign=top>
<td width=28%><b>-c</b></td>
<td width=72%>Specifies the commit batch size. This parameter determines how many transactions are placed in the distribution database before a COMMIT TRANSACTION can be issued in the distribution database. The default is 100.</td>
</tr>
<tr valign=top>
<td width=28%><b>-t</b></td>
<td width=72%>Specifies the command threshold. This parameter determines the number of commands within a transaction to accept before a COMMIT TRANSACTION can be issued in the distribution database. <p>
When this threshold number is exceeded, the log reader moves to commit the transaction even though the number of transactions may not have exceeded the commit batch size. In this way, you can improve distribution database access for subscribers.</p>
<p>
When the parameter value is missing or 0, the command threshold logic is not applied to the log reader process.</p>
</td>
</tr>
</table><br>
<p>
In SQL Server 6.5, the log reader will commit the current batch of jobs to the distribution database if:
<ul>
<li>
The number of jobs exceeds the commit batch size <b>-c</b> parameter</li>
<li>
The number of commands in the last job exceeds the command threshold <b>-t</b> parameter</li>
</ul>
<p>
The command threshold parameter can lessen the impact of large transactions by allowing the log reader to commit the transactions as soon as they are completely processed instead of waiting for all pending transactions to be processed.</p>
<p>
<b>Important</b>  If you are not experiencing subscriber access delays, you should not set these parameters.</p>
<h5><img src="../../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To set the log reader parameters</h5>
<ol>
<li>
Stop SQL Executive if it is running.</li>
<li>
From the Server Manager window, select a server and then from the toolbar, choose the Manage Scheduled Tasks button. Or, from the Server menu, choose Scheduled Tasks. <p>
The Manage Scheduled Tasks window appears.
</li>
<li>
Choose the New Task button to display the New Task dialog box. Or from the task list, select the log reader task and then choose the Edit Task button. <p>
The Edit Task dialog box appears.
</li>
<li>
Modify text in the Command box as necessary.</li>
<li>
Choose Add or Modify.</li>
</ol>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
