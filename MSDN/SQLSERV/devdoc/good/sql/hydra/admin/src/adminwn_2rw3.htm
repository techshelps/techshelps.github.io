<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>General Design of Fallback Process</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_general_design_of_fallback_process"></a>General Design of Fallback Process</h2>
<p>
The SQL Server fallback feature is invoked by executing system stored procedures. In most cases, these procedures begin with the common prefix <b>sp_fallback_</b>. To shift the control of databases and devices from a broken primary server to a fallback server, one or two procedures are executed on the primary server, but most others are executed on the fallback server. The procedures that are executed on the fallback server can contain remote procedure calls (RPCs) to the primary server.</p>
<p>
The <b>sp_fallback_</b> procedures interact with the <i>sysdatabases</i>, <i>sysdevices</i>, and <i>sysusages </i>system tables of the primary and fallback servers. The system tables on the primary server are only read from; on the fallback server, SELECT, INSERT, UPDATE, and DELETE statements are executed against the system tables. The <b>sp_fallback_</b> procedures also interact with some corresponding user tables on the fallback server, which are all named with the prefix <i>spt_fallback_</i>.</p>
<p>
In general, the <b>sp_fallback_</b> procedures copy information from the system tables of the primary server into the <i>spt_fallback_</i> tables on the fallback server to enroll specific databases for future fallback support. If the primary server fails, a procedure is run to recalculate and copy information from those <i>spt_fallback_ </i>tables into the system tables of the fallback server to activate the databases that are enrolled for fallback support. Recalculated information includes the columns <i>sysdatabases.dbid</i>, <i>sysdevices.low</i>, and <i>sysusages.vstart</i>.</p>
<p>
After the primary server is repaired, you have the option of running procedures to deactivate the fallback support and return control of the switchable hard drive array to the primary server. </p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
