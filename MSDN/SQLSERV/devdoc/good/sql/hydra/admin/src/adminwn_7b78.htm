<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Accomplishing Fallback Support</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_accomplishing_fallback_support"></a>Accomplishing Fallback Support</h2>
<p>
To invoke fallback support for two databases in a one-primary to one-fallback configuration, follow the steps that are listed below. Only the system administrator (SA) can invoke the fallback feature. Each <b>sp_fallback_ </b>procedure takes only seconds to complete.</p>
<h5><img src="../../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To invoke the fallback feature</h5>
<ul>
<li>
On the primary server, execute the following steps: <ol>
<li>
Record the designated server svrfallback as the fallback server on the primary server svrprimary and execute the following:<pre>exec sp_addserver 'svrfallback' ,'fallback'
</pre>
</li>
<li>
Give the SA on the fallback server the ability to log on as SA on the primary server by executing the following:<pre>exec sp_addremotelogin 'svrfallback' ,'sa' ,'sa'
</pre>
</li>
</ol>
</li>
<li>
On the fallback server, execute the following steps:<ol>
<li>
Record the primary servers to provide fallback support to: <pre>exec sp_addserver 'svrprimary'
</pre>
</li>
<li>
Run a simple test to verify that RPC connections are working and execute the following:<pre>exec svrfallback...sp_helplogins
</pre>
</li>
<li>
Enroll databases owned by the fallback server for potential fallback support. RPCs are issued to the fallback server. The first parameter value must match a value in <i>sysservers.srvname </i>(not necessarily <i>srvnetname</i>).<pre>exec sp_fallback_enroll_svr_db 'svrprimary' ,'DabSales'
exec sp_fallback_enroll_svr_db 'svrprimary' ,'DabProduct'
</pre>
</li>
</ol>
<p>
<b>Note</b>  The databases <i>DabSales</i> and <i>DabProduct</i> that are being configured for fallback must be on a switchable disk for fallback to work. 
</li>
</ul>
<h5><img src="../../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To take over a switchable disk</h5>
<p>
The following steps should be performed each time the fallback server takes over a switchable disk from the primary server and assigns a new drive letter to the disk:
<ol>
<li>
Record that the switchable hard drive seen as "D:" by the primary server will be seen as "H:" by the fallback server:<pre>exec sp_fallback_upd_dev_drive 'svrprimary' ,'D:' ,'H:'
<b><i>  </i></b></pre>
</li>
<li>
Activate live fallback support for all databases enrolled from that server and execute the following:.<pre>exec sp_fallback_activate_svr_db 'svrprimary', '%'
<b><i>  </i></b></pre>
</li>
</ol>
<p>
If the underlying fallback architecture supports registering applications that are launched automatically when the fallback server takes over, then an application (using DB-Library or ODBC) could be written that connects to the fallback server and executes the stored procedures after each disk switchover. </p>
<p>
<b>Note</b>  If your model database is 1 MB, then a database device of only 1 MB can hold an entire database. To experiment and familiarize yourself with setting up fallback, use a standard 1.44 MB floppy diskette. To activate the fallback server, you can transfer the floppy diskette from the primary server to the fallback server after stopping the primary server.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
