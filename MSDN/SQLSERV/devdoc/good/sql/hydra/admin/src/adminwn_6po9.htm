<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SQL Performance Monitor With Integrated Security</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sql_performance_monitor_with_integrated_security"></a>SQL Performance Monitor With Integrated Security</h2>
<p>
When SQL Server is running in standard or mixed security mode, the counters used by SQL Performance Monitor make a connection using the special probe login ID (with no password). When the server is running in integrated security mode, the SQL Server counters will attempt to connect as either the logged on Windows NT user (if SQL Performance Monitor is running on the same machine as SQL Server), or as the LocalSystem account (if SQL Performance Monitor is running on a remote workstation).</p>
<p>
You can force SQL Performance Monitor to make a trusted connection to SQL Server regardless of the server security mode by adding a Registry value with the Registry Editor tool (REGEDT32.EXE). In the following key:</p>
<pre>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\MSSQLServer
<b><i>  </i></b></pre>
<p>
add a value named <i>PerfMonSecure</i>, with a type of REG_DWORD and a value of <i>0x1</i>. This will cause SQL Performance Monitor to request a trusted connection to SQL Server in the same security contexts, as described above, when SQL Server is running in integrated security mode. If the Registry value is not present or if the value is <i>0</i>, SQL Performance Monitor will use the probe login ID. </p>
<p>
Note that if you choose to configure SQL Server to listen on a named pipe other than the default pipe \\.\pipe\sql\query, SQL Performance Monitor will attempt to connect to SQL Server using the Windows NT<b>-</b>based machine name. To enable SQL Performance Monitor to access this SQL Server from a remote workstation using a trusted connection, you must add a DB-Library alias from that machine name to the alternate local pipe name. For example, if you configured SQL Server to listen on the named pipe \\.\pipe\sql\alternate, in the SQL Client Configuration Utility, use the Advanced tab to set the following:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=39%>Server:</td>
<td width=61%>machine_name</td>
</tr>
<tr valign=top>
<td width=39%>DLL name:</td>
<td width=61%>Named Pipes</td>
</tr>
<tr valign=top>
<td width=39%>Connection string:</td>
<td width=61%>\\.\pipe\sql\alternate</td>
</tr>
</table><br>
<p>
If SQL Server is not configured to listen on named pipes, you will not be able to run SQL Performance Monitor from a remote workstation via a trusted connection.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
