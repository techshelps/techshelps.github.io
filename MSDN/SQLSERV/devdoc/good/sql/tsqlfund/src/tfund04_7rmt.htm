<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Correlated Subqueries in a HAVING Clause</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_correlated_subqueries_in_a_having_clause"></a>Correlated Subqueries in a HAVING Clause</h3>
<p>
A correlated subquery can also be used in the HAVING clause of an outer query. This construction can be used to find the types of books for which the maximum advance is more than twice the average within a given group.</p>
<p>
In this case, the subquery is evaluated once for each group defined in the outer query (once for each type of book):</p>
<pre>SELECT t1.type
FROM titles t1
GROUP BY t1.type
HAVING MAX(t1.advance) &gt;=ALL
    (SELECT 2 * AVG(t2.advance)
    FROM titles t2
    WHERE t1.type = t2.type)

type
--------
mod_cook

(1 row(s) affected)
</pre>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
