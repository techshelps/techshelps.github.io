<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Self-Joins and Aliases</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_self.2d.joins_and_aliases"></a>Self-Joins and Aliases</h3>
<p>
You compare values within a column of a table with a <i>self-join</i>. For example, you can use a self-join to find out which authors in Oakland, California live in the same zip code area.</p>
<p>
Since this query involves a join of the <i>authors</i> table with itself, the <i>authors</i> table appears in two roles. To distinguish these roles, you can temporarily (and arbitrarily) give the <i>authors</i> table two different aliases ¾ <i>au1</i> and <i>au2</i> ¾ in the FROM clause. These aliases are used to qualify the column names in the rest of the query. The self-join statement looks like this:</p>
<pre>SELECT au1.au_fname, au1.au_lname, au2.au_fname, au2.au_lname
FROM authors au1, authors au2
WHERE au1.city = 'Oakland'
    AND au1.state = 'CA'
    AND au1.zip = au2.zip
</pre>
<table cellspacing=4 cols=4>
<tr valign=top>
<td width=22%><pre>au_fname</pre>
</td>
<td width=27%><pre>au_lname</pre>
</td>
<td width=26%><pre>au_fname</pre>
</td>
<td width=25%><pre>au_lname</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>--------</pre>
</td>
<td width=27%><pre>--------</pre>
</td>
<td width=26%><pre>--------</pre>
</td>
<td width=25%><pre>--------</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Marjorie</pre>
</td>
<td width=27%><pre>Green</pre>
</td>
<td width=26%><pre>Marjorie</pre>
</td>
<td width=25%><pre>Green</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dean</pre>
</td>
<td width=27%><pre>Straight</pre>
</td>
<td width=26%><pre>Dean</pre>
</td>
<td width=25%><pre>Straight</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dean</pre>
</td>
<td width=27%><pre>Straight</pre>
</td>
<td width=26%><pre>Dirk</pre>
</td>
<td width=25%><pre>Stringer</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dean</pre>
</td>
<td width=27%><pre>Straight</pre>
</td>
<td width=26%><pre>Livia</pre>
</td>
<td width=25%><pre>Karsen</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dirk</pre>
</td>
<td width=27%><pre>Stringer</pre>
</td>
<td width=26%><pre>Dean</pre>
</td>
<td width=25%><pre>Straight</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dirk</pre>
</td>
<td width=27%><pre>Stringer</pre>
</td>
<td width=26%><pre>Dirk</pre>
</td>
<td width=25%><pre>Stringer</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Dirk</pre>
</td>
<td width=27%><pre>Stringer</pre>
</td>
<td width=26%><pre>Livia</pre>
</td>
<td width=25%><pre>Karsen</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Stearns</pre>
</td>
<td width=27%><pre>MacFeather</pre>
</td>
<td width=26%><pre>Stearns</pre>
</td>
<td width=25%><pre>MacFeather</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Livia</pre>
</td>
<td width=27%><pre>Karsen</pre>
</td>
<td width=26%><pre>Dean</pre>
</td>
<td width=25%><pre>Straight</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Livia</pre>
</td>
<td width=27%><pre>Karsen</pre>
</td>
<td width=26%><pre>Dirk</pre>
</td>
<td width=25%><pre>Stringer</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre>Livia</pre>
</td>
<td width=27%><pre>Karsen</pre>
</td>
<td width=26%><pre>Livia</pre>
</td>
<td width=25%><pre>Karsen</pre>
</td>
</tr>
<tr valign=top>
<td width=22%><pre></pre>
</td>
<td width=27%><pre></pre>
</td>
<td width=26%><pre></pre>
</td>
<td width=25%><pre></pre>
</td>
</tr>
</table><br>
<pre>(11 row(s) affected)
</pre>
<p>
To eliminate the rows in the results where the authors match themselves and to eliminate rows that are identical except that the order of the authors is reversed, make this change to the self-join query:</p>
<pre>SELECT au1.au_fname, au1.au_lname, au2.au_fname, au2.au_lname
FROM authors au1, authors au2
WHERE au1.city = 'Oakland'
    AND au1.state = 'CA'
    AND au1.zip = au2.zip
    AND au1.au_id &lt; au2.au_id
</pre>
<table cellspacing=4 cols=4>
<tr valign=top>
<td width=21%><pre>au_fname</pre>
</td>
<td width=22%><pre>au_lname</pre>
</td>
<td width=23%><pre>au_fname</pre>
</td>
<td width=34%><pre>au_lname</pre>
</td>
</tr>
<tr valign=top>
<td width=21%><pre>---------</pre>
</td>
<td width=22%><pre>--------</pre>
</td>
<td width=23%><pre>--------</pre>
</td>
<td width=34%><pre>--------</pre>
</td>
</tr>
<tr valign=top>
<td width=21%><pre>Dean</pre>
</td>
<td width=22%><pre>Straight</pre>
</td>
<td width=23%><pre>Dirk</pre>
</td>
<td width=34%><pre>Stringer</pre>
</td>
</tr>
<tr valign=top>
<td width=21%><pre>Dean</pre>
</td>
<td width=22%><pre>Straight</pre>
</td>
<td width=23%><pre>Livia</pre>
</td>
<td width=34%><pre>Karsen</pre>
</td>
</tr>
<tr valign=top>
<td width=21%><pre>Dirk</pre>
</td>
<td width=22%><pre>Stringer</pre>
</td>
<td width=23%><pre>Livia</pre>
</td>
<td width=34%><pre>Karsen</pre>
</td>
</tr>
<tr valign=top>
<td width=21%><pre></pre>
</td>
<td width=22%><pre></pre>
</td>
<td width=23%><pre></pre>
</td>
<td width=34%><pre></pre>
</td>
</tr>
</table><br>
<pre>(3 row(s) affected)
</pre>
<p>
It is now clear that Dean Straight, Dirk Stringer, and Livia Karsen all have the same zip code.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
