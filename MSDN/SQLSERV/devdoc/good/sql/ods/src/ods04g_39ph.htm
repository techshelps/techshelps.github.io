<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>srv_senddone</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_srv_senddone"></a>srv_senddone</h1>
<p>
Sends a results completion message to the client.</p>
<h4>Syntax</h4>
<p>
<b>int srv_senddone (<br>
SRV_PROC * </b><i>srvproc</i><b>, <br>
DBUSMALLINT </b><i>status</i><b>, <br>
DBUSMALLINT </b><i>info</i><b>, <br>
DBINT </b><i>count </i><b>);</b></p>
<p>
where
<dl>
<dt>
<i>srvproc</i></dt>
<dd>
Is a pointer to the SRV_PROC structure that is the handle for a particular client connection (in this case, the handle that received the language request). The structure contains the information that the ODS Library uses to manage communication and data between the Open Data Services server application and the client.</dd>
<dt>
<i>status</i></dt>
<dd>
Is a 2-byte bit field for various <i>status</i> flags. Multiple flags can be set by using the AND and OR operators with <i>status</i> flag values. Here is a list of the possible <i>status</i> flags:
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=41%></th>
<th align=left width=59%></th>
</tr>
<tr valign=top>
<th align=left width=41%></th>
<th align=left width=59%></th>
</tr>
<tr valign=top>
<th align=left width=41%>Status</th>
<th align=left width=59%>Description</th>
</tr>
<tr valign=top>
<td width=41%>SRV_DONE_FINAL</td>
<td width=59%>The current set of results is the final set of results.</td>
</tr>
<tr valign=top>
<td width=41%>SRV_DONE_MORE</td>
<td width=59%>The current set of results isn't the final set of results.</td>
</tr>
<tr valign=top>
<td width=41%>SRV_DONE_COUNT</td>
<td width=59%>The <i>count</i> parameter contains a valid count.</td>
</tr>
<tr valign=top>
<td width=41%>SRV_DONE_ERROR</td>
<td width=59%>The current client command received an error.</td>
</tr>
<tr valign=top>
<td width=41%>SRV_DONE_RPC_IN_BATCH</td>
<td width=59%>The current set of results is the last set of the currently executing remote stored procedure. This value is used when multiple remote stored procedures are executed in a single batch.</td>
</tr>
</table><br>

</dd>
<dt>
<i>info</i></dt>
<dd>
Is a reserved, 2-byte field. Set this value to 0.</dd>
<dt>
<i>count</i></dt>
<dd>
Is a 4-byte field used to indicate a count for the current results set. If the SRV_DONE_COUNT flag is set in the <i>status</i> field, <i>count</i> holds a valid count.
</dd>
</dl>
<h4>Returns</h4>
<p>
SUCCEED or FAIL.</p>
<h4>Remarks</h4>
<p>
A client request can cause the server to execute a number of commands and to return a number of results sets. For each results set, <b>srv_senddone</b> must return a results completion message to the client.</p>
<p>
To indicate that there are more results for the current request, the Open Data Services server application must set the <i>status</i> field to SRV_DONE_MORE. To indicate that there are no more results for the current request, the Open Data Services server application must set the <i>status</i> field to SRV_DONE_FINAL. However, when an application function is installed as a SQL Server extended stored procedure instead of as a separate Open Data Services server application, use SRV_DONE_MORE. With extended stored procedures, SQL Server itself sends SRV_DONE_FINAL.</p>
<p>
The <i>count</i> field indicates the number of rows affected by a command. If the count field contains a count, the SRV_DONE_COUNT bit should be set in the <i>status</i> field. This setting allows the client to distinguish between a count of 0 and an unused <i>count</i> field.</p>
<p>
Do not call <b>srv_senddone</b> from the SRV_CONNECT handler.</p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=27%></th>
<th align=left width=73%></th>
</tr>
<tr valign=top>
<th align=left width=27%></th>
<th align=left width=73%></th>
</tr>
<tr valign=top>
<th align=left width=27%>This entry</th>
<th align=left width=73%>For information about</th>
</tr>
<tr valign=top>
<td width=27%></td>
<td width=73%></td>
</tr>
<tr valign=top>
<td width=27%><a href="ods04g_8ch3.htm"><b>srv_sendmsg</b></a></td>
<td width=73%>Sending a message to the client</td>
</tr>
<tr valign=top>
<td width=27%><a href="ods04h_8s3b.htm"><b>srv_sendrow</b></a></td>
<td width=73%>Sending a row to the client</td>
</tr>
<tr valign=top>
<td width=27%><a href="ods04h_948j.htm"><b>srv_sendstatus</b></a></td>
<td width=73%>Sending a status value to the client</td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
