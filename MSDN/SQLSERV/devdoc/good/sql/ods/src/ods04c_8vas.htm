<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>srv_convert</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_srv_convert"></a>srv_convert</h1>
<p>
Changes data from one datatype to another.</p>
<h4>Syntax</h4>
<p>
<b>int srv_convert (<br>
SRV_PROC *</b> <i>srvproc</i><b>, <br>
int </b><i>srctype</i><b>, <br>
void *</b> <i>src</i><b>, <br>
DBINT </b><i>srclen</i><b>, <br>
int </b><i>desttype</i><b>, <br>
void *</b> <i>dest</i><b>, <br>
DBINT </b><i>destlen</i><b> );</b></p>
<p>
where
<dl>
<dt>
<i>srvproc</i></dt>
<dd>
Is a pointer to the SRV_PROC structure that is the handle for a particular client connection. The structure contains all the control information that Open Data Services uses to manage communications and data between the Open Data Services server application and the client. If the <i>srvproc</i> handle is supplied, it is passed to the Open Data Services error handler function when an error occurs.</dd>
<dt>
<i>srctype</i></dt>
<dd>
Specifies the datatype of the data to be converted. This parameter can be any of the Open Data Services datatypes.</dd>
<dt>
<i>src</i></dt>
<dd>
Is a pointer to the data to be converted. This parameter can be any of the Open Data Services datatypes.</dd>
<dt>
<i>srclen</i></dt>
<dd>
Specifies the length, in bytes, of the data to be converted. If <i>srclen</i> is 0, <b>srv_convert</b> places a null value in the destination variable. Unless it is 0, this parameter is ignored for fixed-length datatypes, in which case the source data is assumed to be NULL. For data of the SRVCHAR datatype, a length of -1 indicates that the string is null-terminated.</dd>
<dt>
<i>desttype</i></dt>
<dd>
Specifies the datatype to convert the source to. This parameter can be any of the Open Data Services datatypes.</dd>
<dt>
<i>dest</i></dt>
<dd>
Is a pointer to the destination variable that receives converted data. If this pointer is NULL, <b>srv_convert</b> calls the user-supplied error handler (if any) and returns FAIL.
<p>
If <i>desttype</i> is SRVDECIMAL or SRVNUMERIC, the <i>dest</i> parameter must be a pointer to a DBNUMERIC or DBDECIMAL structure with the precision and scale fields of the structure already set to the desired values. You can use DEFAULTPRECISION to specify a default precision and DEFAULTSCALE to specify a default scale.
</dd>
<dt>
<i>destlen</i></dt>
<dd>
Specifies the length, in bytes, of the destination variable. This parameter is ignored for fixed-length datatypes. For a destination variable of type <i>srvchar</i>, the value of <i>destlen</i> must be the total length of the destination buffer space. A length of -1 for a destination variable of type <i>srvchar</i> or <i>srvbinary</i> indicates that there is sufficient space available. For a destination variable of type <i>srvchar</i>, a length of -1 causes the character string to be null-terminated.
</dd>
</dl>
<h4>Returns</h4>
<p>
The length of the converted data, in bytes, if the datatype conversion succeeds. When <b>srv_convert</b> encounters a request for a conversion that it doesn't support, it calls the developer-supplied error handler (if any), sets a global error number, and returns FAIL.</p>
<h4>Remarks</h4>
<p>
Conversion to and from all Open Data Services datatypes is supported, <i>except</i> for conversion from SRVDATETIME or SRVDATETIME4 to these datatypes, and from these datatypes to SRVDATETIME or SRVDATETIME4:
<ul>
<li>
SRVINT1, SRVINT2, SRVINT4</li>
<li>
SRVFLT4, SRVFLT8</li>
<li>
SRVBIT</li>
<li>
SRVMONEY, SRVMONEY4</li>
<li>
SRVDECIMAL, SRVNUMERIC</li>
</ul>
<p>
The <b>srv_willconvert</b> function determines whether a particular conversion is allowed.</p>
<p>
Converting to the approximate numeric datatypes SRVFLT4 or SRVFLT8 can result in some loss of precision. Converting from the approximate numeric datatypes SRVFLT4 or SRVFLT8 to SRVCHAR or SRVTEXT can also result in some loss of precision.</p>
<p>
Converting to SRVFLT<i>x</i>, SRVINT<i>x</i>, SRVMONEY, SRVMONEY4, SRVDECIMAL, or SRVNUMERIC can result in overflow if the number is larger than the destination's maximum value, or in underflow if the number is smaller than the destination's minimum value. If overflow occurs when converting to SRVCHAR or SRVTEXT, the first character of the resulting value contains an asterisk (*) to indicate the error.</p>
<p>
When converting SRVCHAR to SRVBINARY, <b>srv_convert</b> interprets SRVCHAR as hexadecimal, whether or not the string contains a leading 0. When converting SRVBINARY to SRVCHAR, <b>srv_convert</b> creates a hexadecimal string without a leading 0. In all other cases, a conversion to or from the SRVBINARY datatype is a straight bit-copy.</p>
<p>
In certain cases, it can be useful to convert a datatype to itself. For example, converting SRVCHAR to SRVCHAR with a <i>destlen</i> of -1 adds a null terminator to a string.</p>
<p>
The <b>srv_convert</b> function can fail for several reasons: 
<ul>
<li>
the requested conversion is not available</li>
<li>
the conversion resulted in truncation, overflow, or loss of precision in the destination variable</li>
<li>
a syntax error occurred while converting a character string to a numeric datatype.</li>
</ul>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=37%></th>
<th align=left width=63%></th>
</tr>
<tr valign=top>
<th align=left width=37%></th>
<th align=left width=63%></th>
</tr>
<tr valign=top>
<th align=left width=37%></th>
<th align=left width=63%></th>
</tr>
<tr valign=top>
<th align=left width=37%>This entry</th>
<th align=left width=63%>For information about</th>
</tr>
<tr valign=top>
<td width=37%></td>
<td width=63%></td>
</tr>
<tr valign=top>
<td width=37%><a href="ods04c_92at.htm"><b>srv_describe</b></a></td>
<td width=63%>Describing a result row column</td>
</tr>
<tr valign=top>
<td width=37%><a href="ods04c_2tt1.htm"><b>srv_errhandle</b></a></td>
<td width=63%>Listing Open Data Services errors</td>
</tr>
<tr valign=top>
<td width=37%><a href="ods04h_1885.htm"><b>srv_setutype</b></a></td>
<td width=63%>Setting datatypes columns in rows</td>
</tr>
<tr valign=top>
<td width=37%><a href="ods04h_1910.htm"><b>srv_willconvert</b></a></td>
<td width=63%>Determining available datatype conversions</td>
</tr>
<tr valign=top>
<td width=37%><a href="odsc_984x.htm">Datatypes</a> </td>
<td width=63%>Open Data Services datatypes</td>
</tr>
</table><br>
<p>
</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
