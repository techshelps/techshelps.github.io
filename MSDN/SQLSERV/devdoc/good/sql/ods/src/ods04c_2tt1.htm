<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>srv_errhandle</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_srv_errhandle"></a>srv_errhandle</h1>
<p>
Installs a developer-supplied error handler for Open Data Services errors.</p>
<h4>Syntax</h4>
<p>
<b>SRV_ERRHANDLE_PROC srv_errhandle ( SRV_ERRHANDLE_PROC </b><i>handler </i><b>);</b></p>
<p>
where
<dl>
<dt>
<i>handler</i></dt>
<dd>
Is a pointer to the function that is called whenever an Open Data Services error occurs (for example, when memory is insufficient during processing). The ODS Library can use a default error handler or a developer-supplied error handler. If the Open Data Services server application uses a developer-supplied error handler, a set of predefined parameters must be used. For a list of these parameters, see the "Remarks" section later in this entry.
</dd>
</dl>
<h4>Returns</h4>
<p>
A pointer to the previously installed error-handling function.</p>
<h4>Remarks</h4>
<p>
When an error occurs, Open Data Services automatically calls the error handler installed by <b>srv_errhandle</b>. The error handler determines the Open Data Services server application's response to errors. For example, it can tell the Open Data Services server application whether to continue, to return an error, or to terminate the connection.</p>
<p>
If no error handler is installed, then a default error handler is used. The default error handler writes messages to the standard error output and to the Open Data Services log file.</p>
<p>
If the severity of the error is 1 through 9, then an informational message is assumed and the default error handler returns SRV_CONTINUE (continue processing). If the severity of the error is 10 through 18, then an error condition is assumed and the default error handler returns SRV_CANCEL (and returns FAIL to the invoking function). If the severity of the error is 19 or higher, then some form of fatal error is assumed, and the default error handler returns SRV_EXIT, which terminates the thread associated with this client connection. (Error numbers and severities are defined in the Open Data Services header file SRVCONST.H.)</p>
<p>
A developer-supplied error handler is invoked with the following parameters defined. These parameters are provided by the ODS Library whenever it detects an internal error:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%>Parameter</th>
<th align=left width=78%>Meaning</th>
</tr>
<tr valign=top>
<td width=22%></td>
<td width=78%></td>
</tr>
<tr valign=top>
<td width=22%><i>server</i></td>
<td width=78%>The affected Open Data Services server application process.</td>
</tr>
<tr valign=top>
<td width=22%><i>srvproc</i></td>
<td width=78%>The affected client process.</td>
</tr>
<tr valign=top>
<td width=22%><i>srverror</i></td>
<td width=78%>The Open Data Services error number.</td>
</tr>
<tr valign=top>
<td width=22%><i>severity</i></td>
<td width=78%>The severity of the error: informational (SRV_INFO), fatal for the client process (SRV_FATAL_PROCESS), or fatal for the Open Data Services server application (SRV_FATAL_SERVER).</td>
</tr>
<tr valign=top>
<td width=22%><i>state</i></td>
<td width=78%>The state of the error.</td>
</tr>
<tr valign=top>
<td width=22%><i>oserr</i></td>
<td width=78%>The operating-system error number.</td>
</tr>
<tr valign=top>
<td width=22%><i>errtext</i></td>
<td width=78%>A printable description of the Open Data Services error. </td>
</tr>
<tr valign=top>
<td width=22%><i>errtextlen</i></td>
<td width=78%>The length of the Open Data Services error string <i>errtext</i>.</td>
</tr>
<tr valign=top>
<td width=22%><i>oserrtext</i></td>
<td width=78%>A printable description of the operating-system error string <i>oserr</i>. </td>
</tr>
<tr valign=top>
<td width=22%><i>oserrtextlen</i></td>
<td width=78%>The length of the operating-system error string <i>oserr</i>.</td>
</tr>
</table><br>
<p>
One of the following values should be returned by a developer-supplied error handler:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%></th>
<th align=left width=78%></th>
</tr>
<tr valign=top>
<th align=left width=22%>Return value</th>
<th align=left width=78%>Meaning</th>
</tr>
<tr valign=top>
<td width=22%></td>
<td width=78%></td>
</tr>
<tr valign=top>
<td width=22%>SRV_CONTINUE</td>
<td width=78%>Pass a non-fatal error or an information message from the Open Data Services server application to the client and continue processing. </td>
</tr>
<tr valign=top>
<td width=22%>SRV_CANCEL</td>
<td width=78%>Return SRV_FAIL from the Open Data Services function that caused the error.</td>
</tr>
<tr valign=top>
<td width=22%>SRV_EXIT</td>
<td width=78%>Print an error message and terminate the client connection thread.</td>
</tr>
</table><br>
<p>
A developer-defined error handler can be installed at any time. The new handler automatically replaces an existing handler. To remove an existing error handler and install the default error handler, use <b>srv_errhandle</b> with a null parameter. </p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=27%></th>
<th align=left width=73%></th>
</tr>
<tr valign=top>
<th align=left width=27%></th>
<th align=left width=73%></th>
</tr>
<tr valign=top>
<th align=left width=27%></th>
<th align=left width=73%></th>
</tr>
<tr valign=top>
<th align=left width=27%>This entry</th>
<th align=left width=73%>For information about</th>
</tr>
<tr valign=top>
<td width=27%></td>
<td width=73%></td>
</tr>
<tr valign=top>
<td width=27%><a href="ods04c_8vas.htm"><b>srv_convert</b></a></td>
<td width=73%>Converting datatypes</td>
</tr>
<tr valign=top>
<td width=27%><a href="ods04g_8ch3.htm"><b>srv_sendmsg</b></a></td>
<td width=73%>Sending Open Data Services errors to the client</td>
</tr>
</table><br>
<p>
</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
