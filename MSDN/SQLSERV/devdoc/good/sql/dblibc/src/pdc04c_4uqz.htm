<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>dbdatecrack</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_dbdatecrack"></a>dbdatecrack</h1>
<p>
Converts a machine-readable DBDATETIME value into user-accessible format.</p>
<h4>Syntax</h4>
<p>
<b>RETCODE dbdatecrack ( <br>
PDBPROCESS </b><i>dbproc</i><b>, <br>
LPDBDATEREC </b><i>dateinfo</i><b>, <br>
LPCDBDATETIME </b><i>datetime</i><b> );</b></p>
<p>
where
<dl>
<dt>
<i>dbproc</i></dt>
<dd>
Is the DBPROCESS structure that is the handle for a particular workstation/ SQL Server process. It contains all the information that DB-Library uses to manage communications and data between the workstation and SQL Server.</dd>
<dt>
<i>dateinfo</i></dt>
<dd>
Is a pointer to the DBDATEREC structure to contain the parts of <i>datetime</i>. DBDATEREC is defined as follows:
<pre>typedef struct dbdaterec
{
    int year;            // 1753 - 9999 
    int quarter;         // 1 - 4 
    int month;           // 1 - 12 
    int dayofyear;       // 1 - 366 
    int day;             // 1 - 31 
    int week;            // 1 - 54 (for leap years) 
    int weekday;         // 1 - 7 (Mon. - Sun.) 
    int hour;            // 0 - 23 
    int minute;          // 0 - 59 
    int second;          // 0 - 59 
    int millisecond;     // 0 - 999 
} DBDATEREC;</pre>
</dd>
<dt>
<i>datetime</i></dt>
<dd>
Is a pointer to the DBDATETIME value of interest.
</dd>
</dl>
<h4>Returns</h4>
<p>
SUCCEED or FAIL.</p>
<h4>Remarks</h4>
<p>
<b>dbdatecrack</b> converts a DBDATETIME value into its integer components and puts them into a DBDATEREC structure.</p>
<p>
DBDATETIME structures store date and time values in an internal format. For example, a time value is stored as the number of 300ths of a second since midnight, and a date value is stored as the number of days since January 1, 1900. The <b>dbdatecrack</b> function converts the internal value to something easily usable by an application.</p>
<h4>Example</h4>
<p>
The following code fragment shows how to use <b>dbdatecrack</b>:</p>
<pre>dbcmd(dbproc, "select name, crdate from master..sysdatabases");
dbsqlexec(dbproc);
dbresults(dbproc);

while (dbnextrow(dbproc) != NO_MORE_ROWS)
{
    // Print the database name and its date info 
    dbconvert(dbproc,
        dbcoltype(dbproc, 2), dbdata(dbproc, 2),
        dbdatlen(dbproc, 2), SQLCHAR, datestring, -1);
    printf("%s: %s\n", (char *) (dbdata(dbproc, 1)), datestring);

    // Break up the creation date into its constituent parts 
    dbdatecrack(dbproc, &amp;dateinfo, (DBDATETIME *) (dbdata(dbproc, 2)));

    // Print the parts of the creation date 
    printf("\tYear = &amp;d.\n", dateinfo.year);
    printf("\tMonth = &amp;d.\n", dateinfo.month);
    printf("\tDay of month = &amp;d.\n", dateinfo.day);
    printf("\tDay of year = &amp;d.\n", dateinfo.dayofyear);
    printf("\tDay of week = &amp;d.\n", dateinfo.weekday);
    printf("\tHour = &amp;d.\n", dateinfo.hour);
    printf("\tMinute = &amp;d.\n", dateinfo.minute);
    printf("\tSecond = &amp;d.\n", dateinfo.second);
    printf("\tMillisecond = &amp;d.\n", dateinfo.millisecond);
}</pre>
<h4>See Also</h4>
<p>
<a href="pdc04b_92t0.htm"><b>dbconvert</b></a>, <a href="pdc04c_5iw1.htm"><b>dbdata</b></a></p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
