<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>dbchange</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_dbchange"></a>dbchange</h1>
<p>
Determines whether a command batch has changed the current database to another database.</p>
<h4>Syntax</h4>
<p>
<b>LPCSTR dbchange ( PDBPROCESS </b><i>dbproc</i><b> );</b></p>
<p>
where
<dl>
<dt>
<i>dbproc</i></dt>
<dd>
Is the DBPROCESS structure that is the handle for a particular workstation/ SQL Server process. It contains all the information that DB-Library uses to manage communications and data between the workstation and SQL Server.
</dd>
</dl>
<h4>Returns</h4>
<p>
A pointer to the null-terminated name of the new database, if any. If the database has not changed, null is returned.</p>
<h4>Remarks</h4>
<p>
The <b>dbchange</b> function informs the program of a switch from one database to another by catching any instance of the Transact-SQL USE statement.</p>
<p>
When connected to SQL Server 4.2, a USE statement does not take effect until the end of the batch. The <b>dbchange</b> function is therefore useful only in determining whether the current command batch has changed to another database for subsequent command batches. The simplest way to keep track of database switches is to call <b>dbchange</b> when <b>dbresults</b> returns NO_MORE_RESULTS at the end of each command batch.</p>
<p>
When connected to SQL Server 6.0, a USE statement takes effect immediately.</p>
<p>
Alternatively, you can always get the name of the current database by calling <b>dbname</b>.</p>
<h4>See Also</h4>
<p>
<a href="pdc04d_1p9h.htm"><b>dbname</b></a>, <a href="pdc04e_52sz.htm"><b>dbresults</b></a>, <a href="pdc04f_43hf.htm"><b>dbsqlexec</b></a>, <a href="pdc04f_13ok.htm"><b>dbsqlsend</b></a>, <a href="pdc04f_1rc5.htm"><b>dbuse</b></a></p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
