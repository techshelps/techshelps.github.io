<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Transaction Logs and the Checkpoint Process</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_transaction_logs_and_the_checkpoint_process"></a>Transaction Logs and the Checkpoint Process</h2>
<p>
If the <b>trunc. log on chkpt.</b> option is set for a database, when SQL Server issues a checkpoint in that database, the transaction log is truncated up to the page containing the oldest outstanding transaction. A transaction is considered outstanding if it has not been committed or rolled back. If replication is being used, a transaction is also considered outstanding if it has not yet been replicated.</p>
<p>
<b>Important</b>  Only implicit checkpoints performed automatically by SQL Server result in this truncation. A CHECKPOINT statement issued by a user does not cause truncation of the transaction log, even when the <b>trunc. log on chkpt.</b> option is set.</p>
<p>
An automatic checkpoint process wakes up approximately every 60 seconds and cycles through every database to determine if a checkpoint is needed. This determination is based on the <b>recovery interval</b> configuration option and the number of rows added to the log since the last checkpoint. Only those rows associated with committed transactions are considered in the calculation.</p>
<p>
If the <b>trunc. log on chkpt.</b> option is set, the checkpoint process attempts to truncate the log every 60 seconds, regardless of the recovery interval or the number of log records. If there are no committed transactions in the log, the log is not truncated. </p>
<p>
The <b>trunc. log on chkpt.</b> option, which is set using the <b>sp_dboption</b> system procedure, is not recommended in production environments where transaction logs are needed for recovery from media failure because it does not save the information contained in the log.</p>
<p>
The transaction log of the <i>tempdb </i>database is automatically truncated during every cycle of the checkpoint process, about every 60 seconds. This occurs whether<i> </i>or not the <b>trunc. log on chkpt.</b> option is set on <i>tempdb</i>.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
