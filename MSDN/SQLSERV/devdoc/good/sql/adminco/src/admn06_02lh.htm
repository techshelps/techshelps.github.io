<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating a Removable Media Database</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_creating_a_removable_media_database"></a>Creating a Removable Media Database</h2>
<p>
A database that will later be distributed on removable media must conform to these guidelines:
<ul>
<li>
The database must be created on new devices.</li>
<li>
The database must be created on devices that are not and will not be used by any other databases. This ensures that the first fragment begins at the start of the device and that any additional fragments that may be created by altering the database will be contiguous and in the proper sequence.</li>
<li>
The database should use three or more devices. Place the system catalog tables on one device, the transaction log on one device, and the data tables on one or more devices.</li>
</ul>
<p>
To make certain that the database you create conforms to these requirements, create the database using the <b>sp_create_removable</b> stored procedure. This stored procedure creates three or more devices and places the database on those devices. One device holds the system catalog tables, a second holds the transaction log, and the third and subsequent devices hold data tables. You must be the SA to use <b>sp_create_removable</b>.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To create a database that can later be distributed on removable media</h5>
<ul>
<li>
Type<p>
<b>sp_create_removable</b> <i>dbname</i>, <i>syslogical</i>, <b>'</b><i>sysphysical</i><b>'</b>, <i>syssize</i>, <br>
<i>loglogical</i>, <b>'</b><i>logphysical</i><b>'</b>, <i>logsize</i>, <i>datalogical1</i>, <b>'</b><i>dataphysical1</i><b>'</b>, <i>datasize1 <br>
</i>[... , <i>datalogical16</i>, <b>'</b><i>dataphysical16</i><b>'</b>, <i>datasize16</i>]
<p>
where
<dl>
<dt>
<i>dbname</i></dt>
<dd>
Is the name of the database that will be created for use on removable media.</dd>
<dt>
<i>syslogical</i></dt>
<dd>
Is the logical name of the device that will contain the system catalog tables.</dd>
<dt>
<i>sysphysical</i></dt>
<dd>
Is the physical name, including a fully qualified path, of the device that will hold the system catalog tables. </dd>
<dt>
<i>syssize</i></dt>
<dd>
Is the size, in megabytes, of the device that will hold the system catalog tables. The minimum <i>syssize</i> is 1.</dd>
<dt>
<i>loglogical</i></dt>
<dd>
Is the logical name of the device that will contain the transaction log. </dd>
<dt>
<i>logphysical</i></dt>
<dd>
Is the physical name, including a fully qualified path, of the device that will contain the transaction log. </dd>
<dt>
<i>logsize</i></dt>
<dd>
Is the size, in megabytes, of the device that will contain the transaction log. The minimum <i>logsize</i> is 1.</dd>
<dt>
<i>datalogical</i></dt>
<dd>
Is the logical name of a device that will contain the data tables. 
<p>
There must be at least one data device. The maximum is 16 data devices. In general, you will create more than one data device when the database is expected to be large and will need to be distributed on multiple disks.
</dd>
<dt>
<i>dataphysical</i></dt>
<dd>
Is the physical name, including a fully qualified path, of a device that will contain data tables. </dd>
<dt>
<i>datasize</i></dt>
<dd>
Is the size, in megabytes, of a device that will contain data tables. The minimum <i>datasize</i> is 1.
</dd>
</dl>
</li>
</ul>
<p>
For example:</p>
<pre>sp_create_removable inventory,invsys,'c:\sql60\data\invsys.dat',2, 
   invlog,'c:\sql60\data\invlog.dat',4,
   invdata,'c:\sql60\data\invdata.dat',10</pre>
<p>
For more information about using <b>sp_create_removable</b>, see the <a href="../../tsqlref/src/tsql20_0u05.htm">sp_create_removable System Stored Procedure</a> topic in the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
After the database has been created, perform database development in the normal manner but following these rules:
<ul>
<li>
Keep the devices exclusive. Do not add any other databases or logs to the devices used by the database.</li>
<li>
Keep the SA as DBO of the database.</li>
<li>
Do not add users to the database, and do not change user permissions. (However, groups can be added and permissions granted to groups.)</li>
<li>
Do not reference objects outside the database (for example, do not create views, stored procedures, or triggers referencing objects outside the database), since those objects will not be available when the database is distributed.</li>
</ul>
<p>
The device created for the transaction log is used only during database development. (When database development is complete you will run <b>sp_certify_removable</b>, which will truncate the transaction log, move it to the system device, and drop the log device, among other actions.)</p>
<p>
As an alternate development method, you can create and develop a database normally, run <b>sp_create_removable</b> to create the new database that will be distributed on removable media, and then use SQL Transfer Manager to copy the data tables from the original database to the new database. After that, you can certify the database by using <b>sp_certify_removable</b>.</p>
<p>
Optionally, you can also create one or more that can be used to add login IDs and database users and to grant permissions after the database is distributed and installed.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
