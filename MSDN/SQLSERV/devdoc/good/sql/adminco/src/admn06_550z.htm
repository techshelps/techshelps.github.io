<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Displaying Information About Databases</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_displaying_information_about_databases"></a>Displaying Information About Databases</h1>
<p>
You have several ways to view information about databases and their transaction logs.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To view a list of the databases on a server</h5>
<ul>
<li>
In the Server Manager window, select a server and open the Databases folder.<p>
The databases for this server are listed.
<p>
<img src="images/ad06_606.gif" border=0>
</li>
</ul>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To view a graphical representation of all the databases on a server</h5>
<ul>
<li>
From the Server Manager window, select a server, and then from the toolbar, choose the Manage Databases button.<p>
<img src="images/db01.gif" border=0>
<p>
The Manage Databases window appears. A graph shows the total size of each database, and for a selected database displays the space used and the space available.
<p>
Choose the Legend button (under the toolbar) to view a legend explaining the graph.
<p>
<img src="images/ad06_600.gif" border=0>
</li>
</ul>
<p>
You can also view information about an individual database.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To view information about an individual database</h5>
<ol>
<li>
From the Server Manager window, select a server, open its Databases folder, and then double-click on a database.<p>
The Edit Databases dialog box appears, displaying information about the database.
<p>
<img src="images/ad06_602.gif" border=0>
</li>
<li>
To view the option settings for this database, select the Options tab.<p>
The Options window appears, displaying the setting of the database options.
<p>
<img src="images/ad06_603.gif" border=0>
<p>
For information about database options, see  <a href="admn06_6ohf.htm">Setting Database Options</a>, earlier in this chapter.
</li>
<li>
To view the permissions set for this database, select the Permissions tab.<p>
The Permissions windows appears, displaying the statement permissions set for this database. 
<p>
<img src="images/adch9_09.gif" border=0>
<p>
For information about database permissions, see Chapter 8, <a href="admn08_25tf.htm">Security Concepts</a>. 
</li>
</ol>
<p>
Although the Current Activity window of SQL Enterprise Manager primarily displays information about server-wide activity, the SA can open it to review database-related activity information. </p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To view current activity</h5>
<ul>
<li>
From the Server Manager window, select a server, and then from the toolbar, choose the current Activity button.<p>
<img src="images/ad06_86.gif" border=0>
<p>
The Current Activity window appears.
<p>
<img src="images/ad06_87.gif" border=0>
<p>
For an explanation of the Current Activity window and the information it provides, see Chapter 19, <a href="admn19_3vs5.htm">Monitoring Server Activity and Performance</a>. 
</li>
</ul>
<p>
These system procedures can also be used to display database-related information.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=25%></th>
<th align=left width=75%></th>
</tr>
<tr valign=top>
<th align=left width=25%></th>
<th align=left width=75%></th>
</tr>
<tr valign=top>
<th align=left width=25%>System procedure</th>
<th align=left width=75%><br>
Description</th>
</tr>
<tr valign=top>
<td width=25%><b>sp_helpdb</b></td>
<td width=75%>Reports information for all the databases on SQL Server, or if you supply a database name, about that database only. <p>
Provides database name, database size, owner, database ID, creation date, and options set. For an individual database, also lists device fragments, fragment size, fragment usage (data or log), device used, and device segments.</p>
</td>
</tr>
<tr valign=top>
<td width=25%><b>sp_helplog</b></td>
<td width=75%>Reports the name of the device that contains the first page of the transaction log.</td>
</tr>
<tr valign=top>
<td width=25%><b>sp_spaceused</b></td>
<td width=75%>Provides a summary of the storage space that a database, transaction log, or database object is using. Allows you to monitor the amount of space available.</td>
</tr>
</table><br>
<p>
You can monitor a database's transaction log by running <b>sp_spaceused</b> against <i>syslogs</i>. It is a good idea to do this regularly. The transaction log can grow rapidly if there are frequent database modifications. If the transaction log is not on a separate database device, then space can become a problem because the log competes with the rest of the database for space.</p>
<p>
For information on using the <b>sp_helpdb</b>, <b>sp_helplog</b>, and <b>sp_spaceused</b> system procedures, see the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
Another way to see how much space is used by the transaction log is to use the DBCC CHECKTABLE (SYSLOGS) or DBCC SQLPERF (LOGSPACE) commands. You can also continuously monitor log space using SQL Performance Monitor. For information, see Chapter 19, <a href="admn19_3vs5.htm">Monitoring Server Activity and Performance</a>, and the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
You can write your own queries to get information about the amount of physical storage space available on a SQL Server. To do this, use the <i>master</i> database and query the <i>sysdevices</i> table. For example, to determine the total number of 2K blocks of storage space that exist on a SQL Server, you could issue this query against <i>sysdevices</i>:</p>
<pre>select sum(high - low) 
from sysdevices 
where status in (2, 3) 

---------------------- 
7168 

(1 row affected) </pre>
<p>
You can also query the <i>sysdatabases </i>system table to view information about databases, and the <i>sysusages</i> system table to view information about the space allocated to databases. </p>
<p>
For information about <i>syslogs</i>, <i>sysdevices</i>, <i>sysdatabases</i>, and <i>sysusages</i>, see the <i>Microsoft SQL Server Transact-SQL Reference</i>. </p>
<p>
<b>Note</b>  You should not update the system tables directly.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
