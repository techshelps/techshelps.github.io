<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting Up Remote Users</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_setting_up_remote_users"></a>Setting Up Remote Users</h3>
<p>
When you add a remote user, you must add both the login ID and the remote login ID on the server being set up as the user's remote server. The login ID is the ID on the server that is set up as the user's remote server. The remote login ID maps the login ID on the remote server to the login ID on the user's local server.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To add a login ID</h5>
<ol>
<li>
Using SQL Enterprise Manager, select the server set up as the user's remote server. </li>
<li>
From the Manage menu, choose Logins.</li>
<li>
From the Manage Logins dialog box, add a new login ID and password. </li>
</ol>
<p>
This login ID will be used as the remote user's login ID on this remote server.</p>
<p>
To add a remote login ID, you use <b>sp_addremotelogin </b>to map the user's login ID on the user's local server to the new login ID on this remote server.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To add a remote login ID</h5>
<ul>
<li>
Type:<p>
<b>sp_addremotelogin</b> <i>remoteserver</i> [<b>,</b> <i>login_ID</i> [<b>,</b> <i>remotename</i>]]
<p>
where
<dl>
<dt>
<i>remoteserver</i></dt>
<dd>
Specifies the server to which the remote login applies. This is the user's local server. For example, if you're logged in to AIRLINES and want to add a remote login, RESERVATION is the <i>remoteserver</i>.</dd>
<dt>
<i>login_ID</i></dt>
<dd>
Is the login ID that identifies the remote login. This is the login ID added using SQL Enterprise Manager¾for <i>example</i>, <i>manage</i>, <i>account</i>, <i>agents</i>. If you don't specify <i>login_ID </i>or <i>remotename</i>, all users will have the same remote and local login IDs (this inserts a -1 in the <i>sysremotelogins</i> table).</dd>
<dt>
<i>remotename</i></dt>
<dd>
Is the login ID that maps to the <i>login_ID</i>. This is the user's login ID for his or her local server,¾for example, <i>margie</i>, <i>dan</i>, and <i>robin</i>. If you don't specify <i>remotename</i>, all users are mapped to the <i>login_ID</i> you specified (this inserts a NULL in the <i>sysremotelogins</i> table).
</dd>
</dl>
</li>
</ul>
<p>
When a remote login is received, the local server tries to map the remote user to a local user in three different ways. 
<ul>
<li>
First, the local server looks for an entry in <i>sysremotelogins</i> that matches the remote server name and the remote login ID. If one is found, then the local server login ID for that row is used to log in the remote user. </li>
<li>
If no entry is found, the local server searches for an entry that has a remote login ID of NULL and a local login ID that is not -1. In this case, the remote user is mapped to the local server login ID. </li>
<li>
If the previous attempts fail, the <i>sysremotelogins</i> table is checked for an entry that has a remote login ID of NULL and a local login ID of -1. In this case, whatever remote login ID was supplied by the remote server is used to look for a local login ID in the <i>syslogins</i> table.</li>
</ul>
<p>
The following examples show the different ways to add remote users. If you want to change from one method to the other, you must use <b>sp_dropremotelogin</b> to remove the old mapping, as described later in this chapter in <a href="admn10_91wz.htm">Dropping Remote Users</a>. </p>
<p>
For example, suppose all the users in your business use the local server ACCOUNTS. You set up the EXPENSES server as a remote server for ACCOUNTS. Before users can access remote procedures on EXPENSES from ACCOUNTS, you must give them remote login IDs.</p>
<p>
You must use the remote server EXPENSES to do the following procedures. The first example maps a user to a particular login ID.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To map the user who has the login ID of <i>chris</i> on the ACCOUNTS server to the login ID of <i>salesmgr</i> on the EXPENSES server</h5>
<ol>
<li>
Use SQL Enterprise Manager add the <i>salesmgr</i> login ID to the EXPENSES server.<p>
From the Server Manager window, select EXPENSES. From the Manage menu, choose Logins. From the Manage Logins dialog box, add the <i>salesmgr</i> login ID.
</li>
<li>
Use <b>sp_addremotelogin</b> to map <i>salesmgr</i> to <i>chris</i>.<pre>sp_addremotelogin accounts, salesmgr, chris</pre>
</li>
</ol>
<p>
The next example maps all users to one remote login ID.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To map all of the users on the ACCOUNTS server to the <i>salesgroup</i> login ID on the EXPENSES server</h5>
<ol>
<li>
Use SQL Enterprise Manager to add the <i>salesgroup</i> login ID to the EXPENSES server.<p>
From the Server Manager window, select EXPENSES. From the Manage menu, choose Logins. From the Manage Logins dialog box, add the <i>salesgroup</i> login ID.
</li>
<li>
Use <b>sp_addremotelogin</b> to map <i>salesgroup</i> to all of the users on the ACCOUNTS server.<pre>sp_addremotelogin accounts, salesgroup</pre>
<p>
This inserts a NULL in the <i>sysremotelogins</i> table. Note that you can only map users on a server once with a NULL.
</li>
</ol>
<p>
The last example maps all users to the same local and remote login IDs.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To map all the users on the ACCOUNTS server to identical login IDs on the EXPENSES server </h5>
<ol>
<li>
Use SQL Enterprise Manager to add the login IDs of the users to the remote server.<p>
From the Server Manager window, select EXPENSES. From the Manage menu, choose Logins. From the Manage Logins dialog box, add the following login IDs: <i>john</i>, <i>steve</i>, <i>mary</i>, and <i>john</i>.
</li>
<li>
Use <b>sp_addremotelogin</b> to map them to their respective login IDs on the ACCOUNTS server.<pre>sp_addremotelogin accounts</pre>
<p>
This inserts NULL in the <i>remoteusername</i> column in the <i>sysremotelogins</i> table and - 1 in the <i>suid</i> column. 
<p>
You can map users only once with a null value. You can have only one NULL value per server in the <i>sysremotelogins</i> table.
</li>
</ol>
<p>
When you add a login ID, the login ID is entered in the <i>syslogins</i> table. When you add a remote login ID, SQL Server checks the <i>syslogins</i> table and then adds the remote login ID to the<i> sysremotelogins </i>table. When you view the <i>sysservers</i> table, the local server (the server you are logged in to) has a <i>srvid</i> (server identification) of 0.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
