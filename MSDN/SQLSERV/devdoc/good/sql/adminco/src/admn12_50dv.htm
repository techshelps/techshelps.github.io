<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Re-creating Lost Devices</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_re.2d.creating_lost_devices"></a>Re-creating Lost Devices</h3>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To re-create lost devices</h5>
<ol>
<li>
Start SQL Server in single-user mode. Type:<p>
where
<dl>
<dt>
<b>/c</b></dt>
<dd>
Starts SQL Server independent of the Windows NT Service Control Manager.</dd>
<dt>
<b>/d</b><i>master_device_ path</i></dt>
<dd>
Specifies a physical name for the MASTER database device. For example: 
<pre>/dc:\sql60\data\master.dat
</pre>
</dd>
<dt>
<b>/m</b></dt>
<dd>
Specifies single-user mode.</dd>
</dl>
<p>
<b>sqlservr /c /d</b><i>master_device</i> <b>/m</b>
<p>
where
<dl>
<dt>
<b>/c</b></dt>
<dd>
Starts SQL Server independent of the Windows NT Service Control Manager.</dd>
<dt>
<b>/d</b><i>master_device_ path</i></dt>
<dd>
Specifies a physical name for the MASTER database device. For example: 
<pre>/dc:\sql60\data\master.dat
</pre>
</dd>
<dt>
<b>/m</b></dt>
<dd>
Specifies single-user mode.</dd>
</dl>
</li>
<li>
Query and save information from the <i>sysusages</i> and <i>sysdevices</i> tables, so that you can later re-create the devices and databases with the proper sizes. Follow the instructions in, "Finding Information About Lost Devices and Databases." <a href="admn12_39gz.htm">Finding Information About Lost Devices and Databases</a>. </li>
<li>
Drop each database that has space allocated on a lost device by using the DBCC DBREPAIR statement. Type:<p>
<b>DBCC DBREPAIR(</b><i>database_name</i><b>, DROPDB)</b>
<p>
where <i>database_name</i> specifies which database to drop.
<p>
You can also drop databases using the <b>sp_dbremove</b> system procedure.
</li>
<li>
Drop lost devices using the <b>sp_dropdevice</b> system procedure.</li>
<li>
Execute CHECKPOINT, shut down SQL Server, and then start it in normal mode.</li>
<li>
Re-create lost devices by executing the DISK INIT statement using the size of the original devices (as determined following the instructions in  <a href="admn12_39gz.htm">Finding Information About Lost Devices and Databases</a>.</li>
</ol>
<p>
For information about using DISK INIT, DBCC DBREPAIR, <b>sp_dbremove</b>, and <b>sp_dropdevice</b>, see the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
