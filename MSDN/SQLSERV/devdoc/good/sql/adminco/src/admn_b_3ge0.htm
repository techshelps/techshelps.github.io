<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Calculating the Size of a 9,000,000 Row Table with a Clustered Index</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_calculating_the_size_of_a_9.2c.000.2c.000_row_table_with_a_clustered.a0.index"></a>Calculating the Size of a 9,000,000-Row Table with a Clustered Index </h2>
<p>
The following example calculates the size (in 2K pages) of the data and clustered index for a table containing:
<ul>
<li>
9,000,000 rows</li>
<li>
Sum of bytes in fixed-length columns = 100</li>
<li>
Sum of bytes in two variable-length columns = 50</li>
<li>
Clustered key, fixed-length = 4 bytes</li>
</ul>
<p>
Follow these steps:
<ol>
<li>
Calculate the data row size:</li>
</ol>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=9%></td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%></td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>4</td>
<td width=91%>(Overhead)</td>
</tr>
<tr valign=top>
<td width=9%>+   100</td>
<td width=91%>Sum of bytes in all fixed-length columns</td>
</tr>
<tr valign=top>
<td width=9%>+   50</td>
<td width=91%>Sum of bytes in all variable-length columns</td>
</tr>
<tr valign=top>
<td width=9%>___</td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>154</td>
<td width=91%>Subtotal</td>
</tr>
<tr valign=top>
<td width=9%></td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>154</td>
<td width=91%>Subtotal</td>
</tr>
<tr valign=top>
<td width=9%>  +  1 </td>
<td width=91%>(Subtotal / 256)  1 (Overhead)</td>
</tr>
<tr valign=top>
<td width=9%>  +  3 </td>
<td width=91%>Number of variable-length columns  1</td>
</tr>
<tr valign=top>
<td width=9%>  +  2 </td>
<td width=91%>(Overhead)</td>
</tr>
<tr valign=top>
<td width=9%>___</td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>160</td>
<td width=91%>Data row size</td>
</tr>
</table><br>
<ol start=2>
<li>
Calculate the number of data pages:<p>
2016/160 = 12 Data rows per page
<p>
9,000,000/12 = 750,000 Data pages
</li>
<li>
Calculate the size of clustered index rows:</li>
</ol>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=9%></td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%></td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>5</td>
<td width=91%>Overhead</td>
</tr>
<tr valign=top>
<td width=9%>+ 4</td>
<td width=91%>Sum of bytes in the fixed-length index keys</td>
</tr>
<tr valign=top>
<td width=9%>___</td>
<td width=91%></td>
</tr>
<tr valign=top>
<td width=9%>9</td>
<td width=91%>Clustered index row size</td>
</tr>
</table><br>
<ol start=4>
<li>
Calculate the number of clustered index pages:<p>
(2016 / 9) - 2 = 222 Clustered index rows per page
<p>
750,000 / 222 = 3378 Index pages (Level 0)
<p>
3378 / 222 = 15 Index pages (Level 1)
<p>
15 / 222 = 1 Index page (Level 2)
</li>
<li>
Calculate the total number of pages:</li>
</ol>
<table cellspacing=4 cols=3>
<tr valign=top>
<td width=46%></td>
<td width=24%></td>
<td width=30%></td>
</tr>
<tr valign=top>
<td width=46%></td>
<td width=24%></td>
<td width=30%></td>
</tr>
<tr valign=top>
<td width=46%>Totals:</td>
<td width=24%>Pages</td>
<td width=30%>Rows</td>
</tr>
<tr valign=top>
<td width=46%>Level 2 (root)</td>
<td width=24%>1</td>
<td width=30%>15</td>
</tr>
<tr valign=top>
<td width=46%>Level 1</td>
<td width=24%>15</td>
<td width=30%>3,378</td>
</tr>
<tr valign=top>
<td width=46%>Level 0</td>
<td width=24%>3,378</td>
<td width=30%>750,000</td>
</tr>
<tr valign=top>
<td width=46%>Data</td>
<td width=24%>750,000</td>
<td width=30%>9,000,000</td>
</tr>
<tr valign=top>
<td width=46%></td>
<td width=24%>¾----</td>
<td width=30%></td>
</tr>
<tr valign=top>
<td width=46%>Total number of 2K pages</td>
<td width=24%>753,394</td>
<td width=30%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
