<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting the Memory Option</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_setting_the_memory_option"></a>Setting the Memory Option</h2>
<p>
When you install SQL Server, the <b>setup</b> program assigns 8 MB of memory to SQL Server if the computer has less than 32 MB of RAM, and 16 MB of memory if the computer has 32 MB or more of RAM. After installation, you can and often should manually configure memory to a greater amount. </p>
<p>
In particular, you must set the SQL Server <b>memory</b> option appropriately for servers that will be participating in replication. If a server will act as either a remote distribution server or a combined publication/distribution server, it must have at least 32 MB of memory installed, with at least 16 MB assigned to SQL Server. If a remote distribution server will be set up to perform distribution for more than one publication server, the remote distribution server will require additional memory (and additional available disk space). There are no special memory or other hardware requirements for subscription servers or for publication servers that are configured to use a remote distribution server. For more information on replication, see Part 6, <a href="adpt_06_8l2m.htm">Replication</a>. </p>
<p>
<b>Note</b>  As you increase the SQL Server memory configuration, you need to ensure that there is sufficient disk space to grow the virtual memory support file (PAGEFILE.SYS) to accommodate the additional memory. For information on the virtual memory support file, see your documentation for Windows NT.</p>
<p>
The <b>memory</b> option is set in the same manner as any other configuration option, by using SQL Enterprise Manager.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To set the memory option</h5>
<ol>
<li>
From the Microsoft SQL Server 6.0 program group, start SQL Enterprise Manager. </li>
<li>
From the Server Manager window, open a server group and select a server. </li>
<li>
From the Server menu, choose Configurations. </li>
<li>
From the Server Configuration dialog box, choose the Configuration tab. <p>
The Configuration window displays a list of the configuration options. 
</li>
<li>
Select the memory option, and then type the new setting in the Current box.<p>
The current setting of the option appears in the Running column. The displayed number represents the size of available memory in 2K units. (For example, 8 MB is entered as 4096.) For more information, see the discussion following this procedure.
<p>
<img src="images/ad03_304.gif" border=0>
</li>
<li>
Review and change other options as appropriate.</li>
<li>
Choose the OK button.<p>
The setting is changed, but it does not take effect until the server is restarted.
</li>
<li>
From the toolbar, select the Stop/Pause/Start Server button.</li>
<li>
If there are users connected to this server, double-click the yellow lamp to pause the server, and then send a message to connected users that the server will soon be shutting down. After an appropriate interval, proceed to the next step.<p>
If there are no connected users, skip this step.
</li>
<li>
Double-click the red lamp to stop the server, and then after the status text indicates the server has stopped, double-click the green lamp to restart the server.</li>
</ol>
<p>
To determine the optimal memory for your system, subtract the memory required for Windows NT (and other system uses, if the machine is not wholly dedicated to SQL Server) from the total physical memory. Ideally, you want to allocate as much memory as possible to SQL Server without causing the system to page. You can use SQL Performance Monitor to help determine what the threshold is for your system: the Page Faults/sec counter of the Memory Object indicates whether you are generating any page faults. If so, SQL Server is running with too much memory. The threshold varies depending on your system. For example, on a 32-MB system, 16 MB might be appropriate for SQL Server; on a 64-MB system, 40 MB might be appropriate. </p>
<p>
The amount of memory specified must be sufficient for the SQL Server static memory needs (kernel overhead, user stack space, and so on), as well as for the procedure cache and the data cache (also called buffer cache). The memory left over after the SQL Server memory needs are met is divided between the procedure cache and the data cache. The percentage allocated to the procedure cache is set with the <b>procedure cache</b> configuration option. You can use DBCC MEMUSAGE and statistics from SQL Performance Monitor to help you adjust this value. Change this value only when you add or remove memory or when you change how you use your system.</p>
<p>
When the <b>memory </b>option is reconfigured, this will automatically cause a possible change to the configured <b>free buffers </b>configuration option. The <b>free buffers </b>configuration value will be set to 5% of the new memory size.</p>
<p>
The maximum value for the <b>memory</b> option is 2 GB. Note, however, that the <b>memory</b> option does not include memory needs for <i>tempdb</i> if you have placed <i>tempdb</i> in RAM using the <b>tempdb in ram (MB)</b> option.</p>
<p>
For information about using SQL Performance Monitor, see Chapter 19, <a href="admn19_3vs5.htm">Monitoring Server Activity and Performance</a>. For more information about allocating memory to SQL Server, see <a href="admn03_8u0p.htm">More About Memory</a>, next in this chapter. </p>
<p>
You can also display and change the <b>memory</b> option by using <b>sp_configure</b>. For information about using <b>sp_configure </b>to set the configuration options, see <a href="../../tsqlref/src/tsql19_3yzp.htm"><b>sp_configure</b> System Stored Procedure</a> in the <i>Microsoft SQL Server Transact-SQL Reference</i>. </p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
