<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Installing a Removable Media Database</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_installing_a_removable_media_database"></a>Installing a Removable Media Database</h2>
<p>
Use <b>sp_dbinstall</b> to install a removable media database. <b>sp_dbinstall</b> must be run once for each device of the database. It copies the system device to the hard disk (which places the system catalog tables and the transaction log on read-write media). It can leave the data device on the distribution media (usually, a CD), or copy it to the hard disk, but it always remains read-only.</p>
<p>
The information required by the <b>sp_dbinstall</b> parameters was provided when the database was verified using <b>sp_certify_removable</b>. This information should have accompanied the distribution disk. </p>
<p>
Databases are installed as offline (unavailable). Place the newly installed database online (ready to be used) using <b>sp_dboption</b>.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To install a database and place it online</h5>
<ol>
<li>
Place the removable media into the drive.</li>
<li>
Run <b>sp_dbinstall</b> to install the system device. Type:<p>
<b>sp_dbinstall</b> <i>database</i><b>,</b><i>logical_dev_name</i><b>,'</b><i>physical_dev_name</i><b>',</b><i>size<b>,</b><br>
</i><b>'</b><i>devtype</i><b>'</b>[<b><i>,</i>'</b><i>location'</i>]
<p>
where
<dl>
<dt>
<i>database</i></dt>
<dd>
Is the name of the removable media database being installed. 
<p>
Any valid database name conforming to the SQL Server rules for identifiers can be used. You are not required to enter the database name originally used for this database during development.
</dd>
<dt>
<i>logical_dev_name</i></dt>
<dd>
Is the logical name of the device being installed.</dd>
<dt>
<i>physical_dev_name</i></dt>
<dd>
Is the physical name, including the fully qualified path, of the device being installed. The path entered here is the path to the device on the distribution media.</dd>
<dt>
<i>size</i></dt>
<dd>
Is the size, in 1 MB blocks, of the device being installed.</dd>
<dt>
<i>devtype</i></dt>
<dd>
Indicates the type of device that is being installed. 
<p>
<b>SYSTEM </b>indicates that the device being installed contains the system catalog tables and the transaction log. The system device must be installed before the data device. 

<p>
<b>DATA</b> indicates that the device being installed contains data tables. Data devices must be installed after the system device. Note that even if a data device will be left on the distribution media, it must be installed by using this stored procedure.

<p>
If the database contains more than one data device, this stored procedure must be run once for each device. 
</dd>
<dt>
<i>location</i></dt>
<dd>
Indicates the destination location to which the device will be copied from the distribution media. This is usually a destination on the computer's local hard disk. The location is a fully qualified filename, including the drive, directory, and filename of the device. The referenced directories must already exist (<b>sp_dbinstall</b> will not create them).
<p>
A <i>location</i> is required for the system device. It is optional for the data device (since the data device can be left on the distribution media).

<p>
Before the database can be used (that is, can be set online using <b>sp_dboption</b>), all its devices must be available. This means that if a database¾because of size¾has been distributed on several CDs with a different data device on each CD, and if the computer is equipped with only one CD drive, then as each device is installed, <b>sp_dbinstall</b> must be provided a <i>location</i> parameter for all but one of the devices, so that all but one of the data devices are copied off the distribution CDs onto the computer's local hard disk. If this is done, only one CD will need to be in the CD drive when the database is used. To eliminate all need for a CD disk when using the database, all the data devices can be copied. 
</dd>
</dl>
<p>
For example:
<pre>sp_dbinstall inventory,invsys,'e:\invsys.dat',2,'SYSTEM',
   'c:\sql60\data\invsys.dat'</pre>
</li>
<li>
Run <b>sp_dbinstall</b> again to install the data device.<p>
For example:
<pre>sp_dbinstall inventory,invdata,'e:\invdata.dat',10,'DATA'</pre>
</li>
<li>
Run <b>sp_dboption</b> to place the database online. Type:<p>
<b>sp_dboption</b> <i>dbname</i><b>,offline,FALSE</b>
<p>
where
<dl>
<dt>
<i>database</i></dt>
<dd>
Is the name of the database being placed online.</dd>
<dt>
<b>offline</b></dt>
<dd>
Is the <b>sp_dboption</b> option being set.</dd>
<dt>
<b>FALSE</b></dt>
<dd>
Is the setting for <b>offline</b>. 
<p>
When <b>offline </b>is <b>TRUE</b>, the database is offline. When <b>FALSE</b>, the database is online and can be used.
</dd>
</dl>
<p>
For example:
<pre>sp_dboption inventory, OFFLINE, FALSE</pre>
<p>
When a database is placed online, any needed removable disk must be in the disk drive. A disk is needed if it contains a data device that was not moved to the local hard disk during installation.
</li>
<li>
Now that the database is online, administer the database in the normal manner to add database users, set permissions, and add views and stored procedures.</li>
</ol>
<p>
<b>Note</b>  After you install a database, you should back up the <i>master</i> database.</p>
<p>
For more information about using <b>sp_dbinstall</b> and <b>sp_dboption</b>, see the <a href="../../tsqlref/src/tsql20_5lbn.htm">sp_dbinstall System Stored Procedure</a> and <a href="../../tsqlref/src/tsql20_1tnp.htm">sp_dboption System Stored Procedure</a> topics in the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
