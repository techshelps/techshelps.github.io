<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Transaction Log Sequencing</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_transaction_log_sequencing"></a>Transaction Log Sequencing</h2>
<p>
SQL Server keeps track of the order of transaction log dumps via a method that can be thought of as similar to a sequence number. The sequence number is incremented every time a DUMP TRANSACTION statement is issued, regardless of whether the log is being dumped to a physical dump device or whether it is being truncated by using either the WITH TRUNCATE_ONLY or the WITH NO_LOG clause. When restoring transaction logs, they must be loaded in the same order in which they were dumped, and their sequence numbers must be in monotonically increasing numbers. </p>
<p>
In the following example, assume again that a database is dumped at midnight each night and that the transaction log is dumped to a separate disk device every hour from 8<small> a.m. </small>to 5 <small>p.m.</small> The 8<small> a.m. </small>dump would have a sequence number of 1, the 9<small> a.m. </small>dump would have a sequence number of 2, and so on. Suppose that the transaction log completely fills up at 9:30<small> a.m.</small>, such that it must be dumped (truncated) using the WITH NO_LOG option. When the 10<small> a.m.</small> transaction log dump is attempted, it will fail with an error message indicating that the log has previously been truncated. You must do a database dump before doing any additional log dumps.</p>
<p>
If you load transaction logs, but you skip one (for example, if you load logs 1, 2, and then 4), the load will be rejected and error 4305 will be raised, stating:</p>
<pre><code>Specified file 'dumpfile' is out of sequence. Current time stamp is '&lt;some date and time&gt;' while dump was from '&lt;some other date and time&gt;'.
</code></pre>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
