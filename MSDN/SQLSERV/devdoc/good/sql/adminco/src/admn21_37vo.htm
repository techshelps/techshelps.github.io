<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Estimating SQL Server Overhead</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_estimating_sql.a0.server_overhead"></a>Estimating SQL Server Overhead</h2>
<p>
The following example shows how memory is allocated on a SQL Server with a <b>memory</b> configuration of 4096 pages (8 MB).</p>
<p>
<b>Note</b>  All calculations in the following example are approximations.</p>
<p>
To estimate SQL Server overhead:
<ol>
<li>
Subtract an amount for static server overhead (including the size of the SQL Server executable code) from the total memory available to the SQL Server process. <p>
Static server overhead, which is typically around 2 MB, is unaffected by configurable options.
<p>
Assuming a static server overhead of 2 MB, the remaining total memory in this example is 6 MB (8 MB - 2 MB).
</li>
<li>
Subtract an amount for configurable options. The configurable options that use significant amounts of memory are:<ul>
<li>
User connections</li>
<li>
Open databases</li>
<li>
Open objects</li>
<li>
Locks</li>
<li>
Devices</li>
</ul>
<p>
To calculate approximately how much memory is required by these configurable options, multiply the current <b>sp_configure</b> value for each option by the bytes per resource value for the option (as indicated by DBCC MEMUSAGE). Convert each calculated value from bytes to MB, and then add all the values to determine the total.
<p>
For purposes of this example, assume the configurable overhead is 0.68 MB.
</li>
<li>
Estimate the total cache space by subtracting the static overhead (step 1) and the configurable overhead (step 2) from the total memory. In this example, subtract 2.68 MB (2 MB  .68 MB) from 8 MB for a total cache space of about 5.32 MB.</li>
<li>
Estimate the size of the procedure cache and the data cache. The proportion of the total cache that goes to the procedure cache depends on the <i>run_value</i> of the <b>procedure cache </b>option (as shown by <b>sp_configure)</b>. The default value is 20, which indicates to use 20 percent of the total cache space as procedure cache and the remaining 80 percent as data cache.<p>
If the <i>run_value</i> of the <b>procedure cache</b> option is 20, the total cache space is divided as follows:
<p>
<i>Data Cache</i> = 5.32 * 0.8 = 4.26 MB = 2182 Pages 
<p>
<i>Procedure Cache</i> = 5.32 * 0.2 = 1.06 MB = 545 Pages 
<p>
(Usually, the amount of procedure cache is slightly higher than the amount indicated in this calculation because the unused portion of the 5 percent miscellaneous overhead is added to the procedure cache.)
</li>
</ol>
<p>
<b>Important</b>  The amount of overhead is not dependent on the amount of memory available to SQL Server. If you add additional memory to SQL Server using the <b>sp_configure</b> <b>memory</b> option, the total cache space is increased by the amount of memory added. In the example above, if you increase the <b>memory</b> option from 4096 pages to 8192 pages, the total cache space increases by 4096 pages (8 MB) to 13.32 MB (8 MB&nbsp; 5.32 MB).</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
