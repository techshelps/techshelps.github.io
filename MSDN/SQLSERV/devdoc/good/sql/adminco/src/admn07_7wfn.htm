<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Displaying Information About Segments</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_displaying_information_about_segments"></a>Displaying Information About Segments</h2>
<p>
You can view detailed information about segments by using <b>sp_helpsegment</b> and <b>sp_helpdb</b>. </p>
<p>
The <b>sp_helpsegment</b> system stored procedure reports information about a particular segment or about all of the segments in the current database. </p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To display information about segments</h5>
<p>
<b>sp_helpsegment</b> [<i>segname</i>]</p>
<p>
where
<dl>
<dt>
<i>segname</i></dt>
<dd>
Specifies the segment about which you want information. If you omit this parameter, information about all segments in the current database is displayed. If the <i>segname</i> is DEFAULT, you must enclose it in quotation marks (because DEFAULT is a reserved word).
</dd>
</dl>
<p>
If you run the <b>sp_helpsegment</b> system stored procedure without a <i>segname</i>, it displays the number, name, and status for all segments in the database. The status is 1 for the default segment (the segment that is used if ON <i>segment_name</i> is not used in a CREATE statement). For example:</p>
<pre>sp_helpsegment


segment name                      status
------- ------------------------- --------- 
     0  system                    0      
     1  default                   1      
     2  logsegment                0      
     3  seg1                      0      
     4  seg2                      0
</pre>
<p>
If you run the <b>sp_helpsegment</b> system stored procedure with a <i>segname</i>, it displays the number, name, and status of that segment and also displays the names of the database devices and their sizes, plus information about the tables and indexes on the segment. For example, to display information about the <i>seg1</i> segment, type:</p>
<pre>sp_helpsegment seg1


segment name                      status 
------- ------------------------- --------- 
3       seg1                      0


device                        size
----------------------------- -----------------   
seg_mydisk1                   2MB


table_name             index_name   indid   
---------------------- --------     --------   
authors                au_ind       1
</pre>
<p>
The <b>sp_helpdb</b> system procedure displays information about the relationship between database devices and segments within a particular database.</p>
<h5><img src="../../../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To display information about the segments in a database</h5>
<p>
<b>sp_helpdb</b> [<i>dbname</i>]</p>
<p>
where
<dl>
<dt>
<i>dbname</i></dt>
<dd>
Specifies the database you want information about. Omitting this optional parameter results in a report on all databases.
</dd>
</dl>
<p>
For example, to display information about the segments in <i>mydata</i>, type:</p>
<pre>sp_helpdb mydata 
</pre>
<table cellspacing=4 cols=6>
<tr valign=top>
<td width=12%><pre>name</pre>
</td>
<td width=16%><pre>db_size</pre>
</td>
<td width=10%><pre>owner</pre>
</td>
<td width=14%><pre>dbid</pre>
</td>
<td width=18%><pre>created</pre>
</td>
<td width=30%><pre>status</pre>
</td>
</tr>
<tr valign=top>
<td width=12%><pre>-----</pre>
</td>
<td width=16%><pre>---------</pre>
</td>
<td width=10%><pre>-----</pre>
</td>
<td width=14%><pre>-------</pre>
</td>
<td width=18%><pre>---------</pre>
</td>
<td width=30%><pre>-------</pre>
</td>
</tr>
<tr valign=top>
<td width=12%><pre>mydata</pre>
</td>
<td width=16%><pre>6 MB</pre>
</td>
<td width=10%><pre>sa</pre>
</td>
<td width=14%><pre>4</pre>
</td>
<td width=18%><pre>May 5 1995</pre>
</td>
<td width=30%><pre>no options set</pre>
</td>
</tr>
</table><br>
<pre></pre>
<table cellspacing=4 cols=3>
<tr valign=top>
<td width=40%><pre>device_fragments</pre>
</td>
<td width=31%><pre>size</pre>
</td>
<td width=29%><pre>usage</pre>
</td>
</tr>
<tr valign=top>
<td width=40%><pre>------------------</pre>
</td>
<td width=31%><pre>-------------</pre>
</td>
<td width=29%><pre>----------</pre>
</td>
</tr>
<tr valign=top>
<td width=40%><pre>bigdevice</pre>
</td>
<td width=31%><pre>4 MB</pre>
</td>
<td width=29%><pre>data only</pre>
</td>
</tr>
<tr valign=top>
<td width=40%><pre>logdev</pre>
</td>
<td width=31%><pre>2 MB</pre>
</td>
<td width=29%><pre>logonly</pre>
</td>
</tr>
</table><br>
<pre>
device         segment
-------------  --------
bigdevice      default   
bigdevice      system   
logdev         logsegment
</pre>
<p>
When the <i>dbname</i> parameter is omitted, information about all databases on the server is returned, but the displayed information does not include the <i>device_fragments</i>, <i>size</i>, and <i>usage</i> columns.</p>
<p>
To display information about all databases on the server, type:</p>
<pre>sp_helpdb
</pre>
<p>
For more information about <b>sp_helpsegment</b> and <b>sp_helpdb</b>, see the <i>Microsoft SQL Server Transact-SQL Reference</i>.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
