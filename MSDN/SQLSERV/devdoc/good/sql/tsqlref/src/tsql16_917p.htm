<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_repldone Replication Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_repldone_replication_stored_procedure"></a>sp_repldone Replication Stored Procedure </h2>
<p>
Updates the record that identifies the server's last distributed transaction.</p>
<h4>Syntax</h4>
<p>
<b>sp_repldone</b> <i>page</i><b>,</b><i> row </i>[<b>, </b><i>timestamp</i>] [<b>,</b> <i>numtrans</i>]<i> </i>[<b>,</b><i> time</i>] [<b>,</b> <i>reset</i>]</p>
<p>
where
<dl>
<dt>
<i>page</i></dt>
<dd>
Specifies the page for the server's last distributed transaction.</dd>
<dt>
<i>row</i></dt>
<dd>
Specifies the row for the server's last distributed transaction.</dd>
<dt>
<i>timestamp</i></dt>
<dd>
Is the timestamp of the server's last distributed transaction.</dd>
<dt>
<i>numtrans</i></dt>
<dd>
Is the number of transactions distributed.</dd>
<dt>
<i>time</i></dt>
<dd>
Specifies the number of milliseconds, if provided, needed to distribute the last batch of transactions. </dd>
<dt>
<i>reset</i></dt>
<dd>
Specifies the reset status. When set to 1, all replicated transactions in the log are marked as distributed. When set to 0, the transaction log is reset to the first replicated transaction and no replicated transactions are marked as distributed. 
<p>
Valid only when <i>page</i> is 0 and <i>row</i> is 0. 

</dd>
</dl>
<h4>Remarks</h4>
<p>
This replication stored procedure is used by the logreader process to keep track of which transactions have been distributed.</p>
<p>
<b>Caution</b>  If you execute this stored procedure manually, you can invalidate the order and consistency of delivered transactions.</p>
<p>
With this stored procedure, you can manually tell the server that a transaction has been replicated (sent to the distribution server). It also allows you to change the transaction marked as the next one awaiting replication¾you can move forward or backward in the list of replicated transactions. (All transactions less than or equal to that transaction will be marked as distributed.)</p>
<p>
The required parameters <i>page</i> and <i>row</i> can be obtained using the <b>sp_repltrans</b> or <b>sp_replcmds</b> replication stored procedures.</p>
<p>
When <i>page</i> is 0, <i>row</i> is 0, and <i>reset</i> is 1, all replicated transactions in the log are marked as distributed. This is useful when there are replicated transactions in the transaction log that are no longer valid (for example, a published table has been dropped) and you want to truncate the log. For example:</p>
<pre>sp_repldone 0, 0, NULL, 0, 0, 1
</pre>
<p>
When <i>page</i> is 0, <i>row</i> is 0, and <i>reset</i> is 0, the transaction log is reset to the first replicated transaction and no replicated transactions are marked as distributed. This is useful if you want to scan the transaction log's replicated transactions. For example:</p>
<pre>sp_repldone 0, 0, 0, NULL, 0, 0, 0
</pre>
<p>
Or, because these are all default settings:</p>
<pre>sp_repldone
</pre>
<h4>Permission</h4>
<p>
Execute permission defaults to the system administrator.</p>
<h4>Table Used</h4>
<p>
None.</p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%></td>
<td width=52%></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql16_87hh.htm"><b>sp_replcmds</b></a></td>
<td width=52%><a href="tsql16_36n9.htm"><b>sp_replstatus</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql16_6go5.htm"><b>sp_replflush</b></a></td>
<td width=52%><a href="tsql16_9tut.htm"><b>sp_repltrans</b></a></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
