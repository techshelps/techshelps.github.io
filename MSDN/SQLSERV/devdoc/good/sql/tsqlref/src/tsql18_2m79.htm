<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_addremotelogin System Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_addremotelogin_system_stored_procedure"></a>sp_addremotelogin System Stored Procedure </h2>
<p>
Adds a new remote login ID to <i>master.dbo.</i>sysremotelogins. </p>
<h4>Syntax</h4>
<p>
<b>sp_addremotelogin</b><i> remoteserver</i> [<b>,</b> <i>login_ID </i>[<b>,</b><i> remotename</i>]]</p>
<p>
where
<dl>
<dt>
<i>remoteserver</i></dt>
<dd>
Is the name of the remote server to which the remote login applies. The server must be known to the local server by an entry in the <i>master.dbo.</i>sysservers table.</dd>
<dt>
<i>login_ID</i></dt>
<dd>
Is the login ID of the user on the local SQL Server. The user named by <i>login_ID </i>must already exist in the <i>master.dbo.</i>syslogins table. Use the sp_addserver system stored procedure to add a remote server.</dd>
<dt>
<i>remotename</i></dt>
<dd>
Is the ID used by the remote server when logging in to the local server. All remote logins not explicitly matched to a local ID are automatically mapped to a local ID. 
</dd>
</dl>
<h4>Remarks</h4>
<p>
When a server receives a remote login, the local server tries three ways to map the remote user to a local user. First, the local server looks for an entry in the <i>sysremotelogins</i> table that matches the remote server name and the remote login ID. If one is found, then the local server's user ID (<i>suid</i>) for that row logs in the remote user. If no entry is found, the local server searches for an entry with a value of NULL in the <i>remoteusername</i> column and a local server's user ID that is not -1. In this case, the remote user is mapped to the local server's user ID. Finally, if the previous attempts failed, the local server checks the <i>sysremotelogins</i> table for an entry with a remote name of NULL and a local server's user ID of -1. In this case, the remote login ID supplied by the remote server looks for a local server's user ID in the <i>syslogins</i> table.</p>
<p>
The login ID of the local user may be different on the remote server.</p>
<p>
Every remote login entry has a status. The default status is <b>not trusted</b>. This means that when a remote login with <b>not trusted</b> status is received, SQL Server checks the password. If you don't want the password to be checked, change the status to <b>trusted </b>by using the <b>sp_remoteoption</b> system stored procedure.</p>
<h4>Examples</h4>
<h5>A.&nbsp;&nbsp;&nbsp;&nbsp;Map One to One</h5>
<p>
This example shows a simple way to map remote names to local names when the local and remote servers have the same users. It creates an entry in the sysremotelogins table so that the remote server ACCOUNTS can validate logins. When no login parameters are given, a null value is entered in the <i>remoteusername</i> column of <i>sysremotelogins</i>. </p>
<pre>sp_addremotelogin ACCOUNTS
</pre>
<h5>B.&nbsp;&nbsp;&nbsp;&nbsp;Map Many to One</h5>
<p>
This example creates an entry that maps all users from the remote server ACCOUNTS to a local login ID Albert.</p>
<pre>sp_addremotelogin ACCOUNTS, Albert
</pre>
<h5>C.&nbsp;&nbsp;&nbsp;&nbsp;Explicit One-to-One Mapping</h5>
<p>
This example causes a remote login from the remote user Chris on the remote server ACCOUNTS to be mapped to the local user salesmgr.</p>
<pre>sp_addremotelogin ACCOUNTS, salesmgr, Chris
</pre>
<h4>Permission</h4>
<p>
Only the system administrator can execute this procedure.</p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><a href="tsql18_62g5.htm"><b>sp_addlogin</b></a></td>
<td width=52%><a href="tsql22_7tut.htm"><b>sp_helpremotelogin</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql18_3so5.htm"><b>sp_addserver</b></a></td>
<td width=52%><a href="tsql23_0d7p.htm"><b>sp_helpserver</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql21_0wo5.htm"><b>sp_dropremotelogin</b></a></td>
<td width=52%><a href="tsql24_0uat.htm"><b>sp_remoteoption</b></a></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
