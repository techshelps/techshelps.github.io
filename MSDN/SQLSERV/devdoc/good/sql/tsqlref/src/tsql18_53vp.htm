<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_addumpdevice System Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_addumpdevice_system_stored_procedure"></a>sp_addumpdevice System Stored Procedure </h2>
<p>
Adds a dump device to SQL Server.</p>
<h4>Syntax</h4>
<p>
<b>sp_addumpdevice</b> {<b>'disk'</b> | <b>'diskette'</b> | <b>'tape'</b>}<b>,</b> <b>'</b><i>logical_name</i><b>',</b> <br>
<b>'</b><i>physical_name</i><b>'</b> [<b>,</b> {{<i>cntrltype</i> [<b>,</b> <b>noskip</b> | <b>skip </b>[<b>,</b> <i>media_capacity</i>]]} | <br>
{@devstatus <b>=</b> {<b>noskip</b> | <b>skip</b>}}}]</p>
<p>
where
<dl>
<dt>
<b>disk</b> |<b> diskette</b> |<b> tape</b></dt>
<dd>
Specifies the type of dump device. Use <b>disk</b> to add a hard disk file as a dump device. Use <b>diskette</b> to add a 5.25-inch or 3.5-inch diskette drive file as a dump device. Use <b>tape</b> for any tape devices supported by Windows NT. Enclose these options in single quotation marks.</dd>
<dt>
<i>logical_name</i></dt>
<dd>
Is the logical name of the dump device used in the LOAD and DUMP statements. This name must follow the rules for identifiers. </dd>
<dt>
<i>physical_name</i></dt>
<dd>
Is the physical name of the dump device. Physical names must follow the rules for operating-system filenames or universal naming conventions for network devices and must include a full path. 
<p>
When creating a dump device on a remote network location, be sure that the name under which the SQL Server was started has appropriate write capabilities on the remote computer.

<p>
If you are adding a tape device, this parameter must be the physical name assigned to the local tape device by Windows NT, for example \\.\TAPE0 for the first tape device on the computer. The tape device must be attached to the server computer; it cannot be used remotely. Enclose names containing non-alphanumeric characters in quotation marks. 
</dd>
<dt>
<i>cntrltype</i></dt>
<dd>
Is not required when creating dump devices. However, if used in scripts, it is still acceptable to supply this parameter, but SQL Server ignores it. 

<p>
<b>Note</b>  As of SQL Server version 4.2, <b>sp_addumpdevice</b> no longer uses the <i>cntrltype</i> or <i>media_capacity</i> parameters because SQL Server automatically detects the control type and media capacity information. In this release of SQL Server, the syntax is still supported; however, both parameters will be removed in a future release.

</dd>
<dt>
<b>skip </b>|<b> noskip</b></dt>
<dd>
Indicates whether ANSI tape labels are read (<b>noskip</b>) or ignored (<b>skip</b>). For example, when <b>skip</b> is specified and the ANSI label of a tape warns that it has expired or that you don't have permission to write to it, SQL Server ignores the warning. Or, if the tape you are writing to is new (and therefore has no ANSI label), SQL Server writes a new label on the first try. The <b>skip</b> option prevents unnecessary retries as SQL Server tries to find a label.
<p>
Specifying <b>noskip</b> tells SQL Server to read existing ANSI tape labels on the tape to which you are writing. Use <b>noskip</b> for diskette dump devices.

<p>
The <b>sp_addumpdevice</b> system stored procedure lets you choose between the security of paying attention to ANSI labels or the convenience of ignoring them. In either case, SQL Server still reads/writes the labels.
</dd>
<dt>
<i>media_capacity</i></dt>
<dd>
Is not required when creating dump devices. However, if used in scripts, it is still acceptable to supply this parameter, but SQL Server ignores it. For more information, see <i>contrltype</i>, above.</dd>
<dt>
@devstatus <b>=</b> <b>skip </b>| <b>noskip</b></dt>
<dd>
Explicitly defines whether ANSI tape labels are read (<b>noskip</b>) or ignored (<b>skip</b>). Use this local variable when you do not explicitly use the <i>ctrltype</i> or <i>media_capacity</i> parameters.</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>sp_addumpdevice</b> system stored procedure adds a dump device to the <i>master.dbo.sysdevices</i> table. It can then be referred to logically in the DUMP, DUMP TRANSACTION, and LOAD statements. </p>
<p>
Ownership and permission problems can interfere with the use of disk or file dump devices. Make sure that appropriate file permissions are given to the account under which SQL Server was started.</p>
<p>
SQL Server supports tape backups to tape devices that are supported by Windows NT. For information about Windows NT - supported tape devices, see the hardware compatibility list for Windows NT. To view the tape devices available on the computer, use SQL Enterprise Manager.</p>
<p>
Use only the recommended tapes for the specific tape drive (as suggested by the drive manufacturer). If you are using DAT drives, use computer-grade DAT tapes (Digital Data Storage-DDS). If you are using a non-computer-grade tape, SQL Server backups are restricted to a single tape (a database dump that spans multiple tapes is not allowed).</p>
<h4>Examples</h4>
<h5>A.&nbsp;&nbsp;&nbsp;&nbsp;Disk Dump Device</h5>
<p>
This example adds a disk device named MYDISKDUMP, with the physical name C:\DUMP\DUMP1.DAT.</p>
<pre>sp_addumpdevice 'disk', 'mydiskdump', 'c:\dump\dump1.dat'
</pre>
<h5>B.&nbsp;&nbsp;&nbsp;&nbsp;Network Disk Dump Device</h5>
<p>
This example shows a remote disk device dump. The name under which SQL Server was started must have permissions to that remote file.</p>
<pre>sp_addumpdevice 'disk', 'networkdevice',
    '\\servername\sharename\path\filename.ext'
</pre>
<h5>C.&nbsp;&nbsp;&nbsp;&nbsp;Tape Dump Device</h5>
<p>
This example adds the TAPEDUMP1 device with the physical name \\.\TAPE0.</p>
<pre>sp_addumpdevice 'tape', 'tapedump1',
    '\\.\tape0'
</pre>
<h4>Permission</h4>
<p>
Execute permission defaults to the system administrator.</p>
<h4>Table Used</h4>
<p>
<i>master.dbo.</i>sysdevices </p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><a href="tsql07_3t9w.htm">DISK INIT</a></td>
<td width=52%><a href="tsql21_8pnp.htm"><b>sp_dropdevice</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql08_2zxw.htm">DUMP</a></td>
<td width=52%><a href="tsql22_79id.htm"><b>sp_helpdevice</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql11_756c.htm">LOAD</a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
