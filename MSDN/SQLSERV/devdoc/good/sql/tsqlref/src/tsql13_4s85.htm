<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_fkeys Catalog Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_fkeys_catalog_stored_procedure"></a>sp_fkeys Catalog Stored Procedure </h2>
<p>
For SQL Server 6.5 information, see <a href="../../hydra/tsql/src/addsproc_65yr.htm"><b>sp_fkeys</b></a>in <i>What's New for SQL Server 6.5</i>.</p>
<p>
Returns logical foreign key information for the current environment.</p>
<h4>Syntax</h4>
<p>
<b>sp_fkeys</b> [<i>pktable_name</i>] [<b>,</b> <i>pktable_owner</i>] [<b>,</b> <i>pktable_qualifier</i>] <br>
[<b>,</b> <i>fktable_name</i>] [<b>,</b> <i>fktable_owner</i>] [<b>,</b> <i>fktable_qualifier</i>]</p>
<p>
where
<dl>
<dt>
<i>pktable_name</i></dt>
<dd>
Specifies the table (with the primary key) used to return catalog information. The <i>pktable_name </i>can be a variable character name with a maximum 32 characters. Wildcard pattern matching is not supported. This parameter or the <i>fktable_name </i>parameter, or both, must be supplied.</dd>
<dt>
<i>pktable_owner</i></dt>
<dd>
Is the name of the owner of the table (with the primary key) used to return catalog information. The <i>pktable_owner</i> parameter can be a variable character name with a maximum 32 characters. Wildcard pattern matching is not supported. If <i>pktable_owner</i> is not specified, the default table visibility rules of the underlying DBMS apply.
<p>
In Microsoft SQL Server, if the current user owns a table with the specified name, that table's columns are returned. If the <i>pktable_owner </i>is not specified and the current user does not own a table with the specified <i>pktable_name</i>, the procedure looks for a table with the specified <i>pktable_name </i>owned by the database owner. If one exists, that table's columns are returned.
</dd>
<dt>
<i>pktable_qualifier</i></dt>
<dd>
Is the name of the table (with the primary key) qualifier. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the database name. In some products, it represents the server name of the table's database environment.</dd>
<dt>
<i>fktable_name</i></dt>
<dd>
Specifies the name of the table (with a foreign key) used to return catalog information. The <i>fktable_name </i>can be a variable character name with a maximum of 32 characters. Wildcard pattern matching is not supported. This parameter or the <i>pktable_name </i>parameter, or both, must be supplied.</dd>
<dt>
<i>fktable_owner</i></dt>
<dd>
Is the name of the owner of the table (with a foreign key) used to return catalog information. The <i>fktable_owner </i>can be a variable character name with a maximum of 32 characters. Wildcard pattern matching is not supported. If <i>fktable_owner</i> is not specified, the default table visibility rules of the underlying DBMS apply.
<p>
In Microsoft SQL Server, if the current user owns a table with the specified name, that table's columns are returned. If <i>fktable_owner </i>is not specified and the current user does not own a table with the specified <i>fktable_name</i>, the procedure looks for a table with the specified <i>fktable_name </i>owned by the database owner. If one exists, that table's columns are returned.
</dd>
<dt>
<i>fktable_qualifier</i></dt>
<dd>
Specifies the name of the table (with a foreign key) qualifier. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the database name. In some products, it represents the server name of the table's database environment.
</dd>
</dl>
<h4>Remarks</h4>
<p>
If the primary key table name is supplied and the foreign key table name is NULL, this procedure returns all tables that include a foreign key to the given table. If the foreign key table name is supplied and the primary key table name is NULL, the procedure returns all tables related by a primary key/foreign key relationship to foreign keys in the foreign key table. Note that this procedure does not support the common key type as specified in the SQL Server <i>syskeys</i> system table.</p>
<p>
The <b>sp_fkeys</b> stored procedure is equivalent to <b>SQLForeignKeys</b> in ODBC. The results returned are ordered by FKTABLE_QUALIFIER, FKTABLE_OWNER, FKTABLE_NAME, and KEY_SEQ.</p>
<p>
This is the results set:</p>
<table cellspacing=4 cols=3>
<tr valign=top>
<th align=left width=31%></th>
<th align=left width=19%></th>
<th align=left width=50%></th>
</tr>
<tr valign=top>
<th align=left width=31%></th>
<th align=left width=19%></th>
<th align=left width=50%></th>
</tr>
<tr valign=top>
<th align=left width=31%>Column</th>
<th align=left width=19%>Datatype</th>
<th align=left width=50%>Description</th>
</tr>
<tr valign=top>
<td width=31%></td>
<td width=19%></td>
<td width=50%></td>
</tr>
<tr valign=top>
<td width=31%>PKTABLE_QUALIFIER</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with the primary key) qualifier. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the database name for the table with a PRIMARY KEY constraint. In some products, it represents the server name of the table's database environment. This field can be NULL.</td>
</tr>
<tr valign=top>
<td width=31%>PKTABLE_OWNER</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with the primary key) owner. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the name of the database user that created the table (with a PRIMARY KEY constraint). This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>PKTABLE_NAME</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with the primary key). Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the table name (with a PRIMARY KEY constraint) as listed in the <i>sysobjects</i> table. This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>PKCOLUMN_NAME</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the primary key column(s), for each column of the TABLE_NAME returned. In Microsoft SQL Server, this column represents the column name as listed in the <i>syscolumns</i> table. This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>FKTABLE_QUALIFIER</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with a foreign key) qualifier. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the database name for the table (with a FOREIGN KEY constraint). In some products, it represents the server name of the table's database environment. This field can be NULL.</td>
</tr>
<tr valign=top>
<td width=31%>FKTABLE_OWNER</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with a foreign key) owner. Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the name of the database user that created the table (with a FOREIGN KEY constraint). This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>FKTABLE_NAME</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the table (with a foreign key). Various DBMS products support three-part naming for tables (<i>qualifier</i><b>.</b><i>owner</i><b>.</b><i>name</i>). In Microsoft SQL Server, this column represents the table name as listed in the <i>sysobjects</i> table (with a FOREIGN KEY constraint). This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>FKCOLUMN_NAME</td>
<td width=19%><i>varchar</i>(32)</td>
<td width=50%>Is the name of the foreign key column(s), for each column of the TABLE_NAME returned. In Microsoft SQL Server, this column represents the column name as listed in the <i>syscolumns</i> table. This field will always return a value.</td>
</tr>
<tr valign=top>
<td width=31%>KEY_SEQ</td>
<td width=19%><i>smallint</i></td>
<td width=50%>Is the sequence number of the column in a multicolumn primary key. This field will always return a value. </td>
</tr>
<tr valign=top>
<td width=31%>UPDATE_RULE</td>
<td width=19%><i>smallint</i></td>
<td width=50%>Is the action applied to the foreign key when the SQL operation is UPDATE. SQL Server returns 1 for these columns. Open Data Services gateways can return non-null values of 0, 1, or 2:<p>
0&nbsp;&nbsp;&nbsp;&nbsp;CASCADE changes to foreign key.</p>
<p>
1&nbsp;&nbsp;&nbsp;&nbsp;RESTRICT changes if foreign key<br>
&nbsp;&nbsp;&nbsp;&nbsp;is present.</p>
<p>
2&nbsp;&nbsp;&nbsp;&nbsp;SET_NULL; set foreign key to <br>
&nbsp;&nbsp;&nbsp;&nbsp;NULL.</p>
</td>
</tr>
<tr valign=top>
<td width=31%>DELETE_RULE</td>
<td width=19%><i>smallint</i></td>
<td width=50%>Is that action applied to the foreign key when the SQL operation is DELETE. SQL Server returns 1 for these columns. Open Data Services gateways can return non-null values of 0, 1, or 2:<p>
0&nbsp;&nbsp;&nbsp;&nbsp;CASCADE changes to foreign key.</p>
<p>
1&nbsp;&nbsp;&nbsp;&nbsp;RESTRICT changes if foreign key<br>
&nbsp;&nbsp;&nbsp;&nbsp;is present.</p>
<p>
2&nbsp;&nbsp;&nbsp;&nbsp;SET_NULL; set foreign key to <br>
&nbsp;&nbsp;&nbsp;&nbsp;NULL.</p>
</td>
</tr>
<tr valign=top>
<td width=31%>FK_NAME</td>
<td width=19%><i>varchar</i>(128)</td>
<td width=50%>Is a foreign key identifier. It is NULL if not applicable to the data source. SQL Server 6.0 returns the FOREIGN KEY constraint name.</td>
</tr>
<tr valign=top>
<td width=31%>PK_NAME</td>
<td width=19%><i>varchar</i>(128)</td>
<td width=50%>It is a primary key identifier. It is NULL if not applicable to the data source. SQL Server 6.0 returns the PRIMARY KEY constraint name.</td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
