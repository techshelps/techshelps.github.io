<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_updatealert SQL Executive Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_updatealert_sql_executive_stored_procedure"></a>sp_updatealert SQL Executive Stored Procedure </h2>
<p>
Updates information for an existing alert.</p>
<h4>Syntax</h4>
<p>
<b>sp_updatealert</b> <i>name</i> [<b>, </b><i>new_name</i>] [<b>, </b><i>enabled</i>] [<b>, </b><i>message_id</i>] [<b>, </b><i>severity</i>] [<b>, </b><i>delay_between_responses</i>] [<b>, </b><i>notification_message</i>] [<b>, </b><i>include_event_description_in</i>] [<b>, </b><i>database_name</i>] [<b>, </b><i>event_description_keyword</i>] [<b>, </b><i>task_name</i>] [<b>, </b><i>occurrence_count</i>] [<b>, </b><i>count_reset_date</i>] [<b>, </b><i>count_reset_time</i>] [<b>, </b><i>last_occurrence_date</i>] [<b>, </b><i>last_occurrence_time</i>] [<b>, </b><i>last_response_date</i>] [<b>, </b><i>last_response _time</i>]</p>
<p>
where
<dl>
<dt>
<i>name</i> </dt>
<dd>
Is the original name of the alert.</dd>
<dt>
<i>new_name</i></dt>
<dd>
Is the new name for the alert. It must be unique and be no more than 60 characters. </dd>
<dt>
<i>enabled</i></dt>
<dd>
Indicates whether the alert is currently enabled (1 if enabled, 0 if not). An alert must be enabled to run. The default is 1 (enabled).</dd>
<dt>
<i>message_id</i> </dt>
<dd>
Is the message/error number that defines the alert. Normally corresponds to an error number in the <i>sysmessages</i> table. If <i>severity</i> is used to define the alert, must be zero or NULL. 

<p>
<b>Note</b>  Only <i>sysmessages</i> written to the Windows NT application event log can activate an alert. 

</dd>
<dt>
<i>severity</i></dt>
<dd>
Specifies the severity level (9 through 25, 120, 130, or 140) that defines the alert. Any SQL Server message sent to the Windows NT event log with the indicated severity will activate the alert. If <i>message_id</i> is used to define the alert, must be zero or NULL. </dd>
<dt>
<i>delay_between_responses</i></dt>
<dd>
Specifies the wait period, in seconds, between responses to the alert. The response consists of :
<ul>
<li>
One or more notifications sent via e-mail and/or pager<p>
and/or
</li>
<li>
A task to execute </li>
</ul>

<p>
By setting this value it is possible to prevent, for example, an unwanted flood of e-mail messages from being sent when an alert repeatedly occurs in a short period of time. If not supplied, the default is 0, which means there is no waiting between responses (each occurrence of the alert generates a response).
</dd>
<dt>
<i>notification_message</i></dt>
<dd>
Is an optional additional message that will be sent to the operator as part of the e-mail and/or pager notification. Specifying <i>notification_message </i>is useful for adding special notes such as remedial procedures. It can contain as many as 255 characters.</dd>
<dt>
<i>include_event_description_in</i></dt>
<dd>
Specifies whether the description of the SQL Server error from the Windows NT event log should be included as part of the notification message. Must be NONE, EMAIL, PAGER, or BOTH.</dd>
<dt>
<i>database_name</i></dt>
<dd>
More restrictively defines the alert by specifying the database in which the error must occur in order for the alert to fire. If <i>database_name</i> is not supplied, the alert will fire regardless of the database in which the error occurs.</dd>
<dt>
<i>event_description_keyword</i></dt>
<dd>
More restrictively defines the alert by specifying that the description of the SQL Server error in the Windows NT event log must be like the supplied sequence of characters. Transact-SQL LIKE expression pattern-matching characters may be used. This parameter is useful for filtering object names (for example, %customer_table%). It can contain as many as 100 characters.</dd>
<dt>
<i>task_name</i></dt>
<dd>
Specifies the On-Demand task that will execute in response to an alert. The task must be of type <b>'</b>CmdExec<b>'</b> or <b>'</b>TSQL<b>'</b>. For details, see the <b>sp_addtask</b> SQL executive stored procedure.</dd>
<dt>
<i>occurrence_count</i></dt>
<dd>
Indicates the number of times the alert has occurred. This parameter is used for reset purposes only.</dd>
<dt>
<i>count_reset_date</i></dt>
<dd>
Indicates the date the occurrence count was last reset. This parameter is used for reset purposes only.</dd>
<dt>
<i>count_reset_time</i></dt>
<dd>
Indicates the time the occurrence count was last reset. This parameter is used for reset purposes only.</dd>
<dt>
<i>last_occurrence_date</i></dt>
<dd>
Indicates the date the alert last occurred. This parameter is used for reset purposes only.</dd>
<dt>
<i>last_occurrence_time</i></dt>
<dd>
Indicates the time the alert last occurred. This parameter is used for reset purposes only.</dd>
<dt>
<i>last_response_date</i></dt>
<dd>
Indicates the date the alert was last responded to by the SQL Executive service. This parameter is used for reset purposes only.</dd>
<dt>
<i>last_response_time</i></dt>
<dd>
The time the alert was last responded to by the SQL Executive service. This parameter is used for reset purposes only.
</dd>
</dl>
<h4>Remarks</h4>
<p>
This stored procedure must be run from the <i>msdb</i> database.</p>
<p>
SQL Enterprise Manager provides an easy, graphical way to manage the entire alerting system. Using SQL Enterprise Manager is the recommended way to configure your alert infrastructure.</p>
<h4>Example</h4>
<p>
This example updates the alert 'Test Alert' to an enabled status of 0. </p>
<pre>sp_updatealert @name = 'Test Alert', @enabled = 0
</pre>
<h4>Permission</h4>
<p>
Only the system administrator can use this procedure.</p>
<h4>Tables Used</h4>
<p>
<i>sysalerts</i>, <i>systasks</i></p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%></td>
<td width=52%></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql17_5a3p.htm"><b>sp_addalert</b></a></td>
<td width=52%><a href="tsql17_8vz9.htm"><b>sp_helpalert</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql17_5w4l.htm"><b>sp_dropalert</b></a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
