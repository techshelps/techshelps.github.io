<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>xp_logininfo Extended Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_xp_logininfo_extended_stored_procedure"></a>xp_logininfo Extended Stored Procedure </h2>
<p>
Reports the account, the type of account, the privilege level of the account, the map name of the account, and the permission path by which the account has access to SQL Server.</p>
<h4>Syntax</h4>
<p>
<b>xp_logininfo</b> [<b>'</b><i>account_name</i><b>' </b>[<b>, 'all'</b> | <b>'members'</b>] <br>
&nbsp;&nbsp;&nbsp;&nbsp;[<b>,</b> [@privilege] <b>=</b> <i>variable_name</i> OUTPUT]]</p>
<p>
where
<dl>
<dt>
<i>account_name</i></dt>
<dd>
Is the name of a Windows NT - based group or user granted SQL Server access. If no <i>account_name</i> is given, all groups and users that have been explicitly granted login permission are reported.</dd>
<dt>
<b>all </b>| <b>members</b></dt>
<dd>
Specifies whether to report information on all permission paths for the account, or to report information on the members of the group.</dd>
<dt>
@privilege <b>=</b><i> variable_name</i> </dt>
<dd>
Is an optional output parameter that returns the privilege level of the specified Windows NT account. The privilege level returned is <b>'user'</b>, <b>'admin'</b>, or <b>'repl'</b>. 
</dd>
</dl>
<h4>Remarks</h4>
<p>
If an <i>account_name</i> is specified as the first parameter, <b>xp_logininfo</b> reports the highest privilege level access for that account. If a user has access as a system administrator and as a user, only the system administrator level (highest privilege) entry is reported. If the user is a member of multiple groups that have the same privilege level, only the first group that matches is reported (the order of the groups is the order in which the groups were granted access to SQL Server). A maximum of one result row is returned. If <i>account_name</i> is a valid Windows NT account but that account does not have permission to access SQL Server, an empty result set is returned. If <i>account_name</i> cannot be identified as a valid Windows NT account, an error message is returned.</p>
<p>
If <i>account_name</i> is specified as the first parameter and <b>all</b> is specified as the second parameter, all permission paths for that account are listed. If a given username is a member of multiple groups, all of which have been granted access to SQL Server, multiple rows are returned. The system administrator privilege rows are reported before the user privilege rows, and within a privilege level the row order is the order in which the accounts were granted access to SQL Server. This parameter applies to both individual users and groups.</p>
<p>
If <i>account_name</i> is specified as the first parameter and <b>members</b> is specified as the second parameter, then a list of the next-level members of the group is returned. If <i>account_name</i> is a local group, the listing can include local users, domain users, and global groups. If <i>account_name</i> is a global account, the list consists of domain users. If <i>account_name</i> is a user account, an error message is returned.</p>
<h4>Examples</h4>
<h5>A.&nbsp;&nbsp;&nbsp;&nbsp;Login Information for a Single Group</h5>
<p>
This example returns information about only a single group (<i>admin</i>).</p>
<pre>EXEC xp_logininfo 'admin'
go

account name    type    privilege    mapped login name    permission path
-------------    ------    ---------    -----------------    ----------------
SQLSRV\admin    user    (null)    (null)    Everyone

(1 row(s) affected)
</pre>
<p>
These are the results columns for <b>xp_logininfo</b>:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=28%></th>
<th align=left width=72%></th>
</tr>
<tr valign=top>
<th align=left width=28%></th>
<th align=left width=72%></th>
</tr>
<tr valign=top>
<th align=left width=28%>Column heading</th>
<th align=left width=72%>Description</th>
</tr>
<tr valign=top>
<td width=28%></td>
<td width=72%></td>
</tr>
<tr valign=top>
<td width=28%><i>account name</i></td>
<td width=72%>The fully qualified account name as known to Windows NT.</td>
</tr>
<tr valign=top>
<td width=28%><i>type</i></td>
<td width=72%>The type of Windows NT account. Valid values are <br>
<i>user</i>, <i>local</i> <i>group</i>, <i>global group</i>, and <i>well-known group</i>.</td>
</tr>
<tr valign=top>
<td width=28%><i>privilege</i></td>
<td width=72%>The access privilege for SQL Server. Valid values are <i>admin</i>, <i>repl</i>, or <i>user</i>.</td>
</tr>
<tr valign=top>
<td width=28%><i>mapped login name</i></td>
<td width=72%>For user accounts with user privilege, <i>mapped login name</i> shows the mapped login name that SQL Server will try to use when logging in with this account, using the mapped rules with the domain name added before it.</td>
</tr>
<tr valign=top>
<td width=28%><i>permission path</i></td>
<td width=72%>The group membership that allowed the account access.</td>
</tr>
</table><br>
<h5>&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;&nbsp;&nbsp;&nbsp;Windows NT Account Information</h5>
<p>
This example shows how the optional output parameter that returns the privilege level of the specified Windows NT account might be used:</p>
<pre>DECLARE @value varchar (30)
SELECT @value = NULL
EXEC xp_logininfo '\nwind1\plato', 'all', @value OUTPUT
SELECT 'The NT account nwind1\plato has '''  @value  ''' privilege.'
</pre>
<h4>Permission</h4>
<p>
Execute permission defaults to the system administrator and can be granted to other users.</p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%></td>
<td width=52%></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql14_9r6t.htm"><b>xp_grantlogin</b></a></td>
<td width=52%><a href="tsql14_9yhx.htm"><b>xp_revokelogin</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql14_8mat.htm"><b>xp_loginconfig</b></a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
