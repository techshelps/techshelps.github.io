<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_addalias System Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_addalias_system_stored_procedure"></a>sp_addalias System Stored Procedure </h2>
<p>
Maps one user to another in a database.</p>
<h4>Syntax</h4>
<p>
<b>sp_addalias</b><i> login_id</i><b>,</b> <i>username</i></p>
<p>
where
<dl>
<dt>
<i>login_id</i></dt>
<dd>
Is the <i>master.dbo.syslogins</i> login ID of the user who wants an alternate identity in the current database. An alias allows a SQL Server user to be known in a database as another user. If the user with this <i>login_id</i> exists in the database's sysusers table, SQL Server won't find the user's alias identity, since it checks <i>sysusers</i> before checking sysalternates. </dd>
<dt>
<i>username</i></dt>
<dd>
Specifies the database user with whom the first user will be linked. This name must exist in both <i>master.dbo.</i>syslogins and in the sysusers table of the current database.
</dd>
</dl>
<h4>Remarks</h4>
<p>
Executing <b>sp_addalias</b> maps one user (<i>login_id</i>) to another (<i>login_id</i>) in the current database. The mapping is shown in sysalternates, where the two users' <i>suid</i>s are connected.</p>
<p>
A report on any users mapped to a specified user can be generated with the sp_helpuser system stored procedure if you give the specified login ID as a parameter.</p>
<p>
When a user tries to use a database, SQL Server checks sysusers to see if the login ID is listed there. If the login ID is not there, it then checks sysalternates. If an entry (the user's <i>suid</i>) is found there. and it is mapped to a database user's <i>suid</i> (<i>altsuid</i> in sysalternates table), the first user is treated as the second user while using the database.</p>
<p>
There are three ways that a user can be authorized to use a database (assuming the user is listed in <i>master.dbo.</i>syslogins). 
<ul>
<li>
The user can be listed in the sysusers table of that database. (New database users are added by the database owner with the sp_adduser system stored procedure.) </li>
<li>
The user can have an alias in the database, which has been added by the database owner with the <b>sp_addalias</b> system stored procedure. </li>
<li>
The user can use the database as <i>guest</i> if there is a guest entry in the database's <i>sysusers</i> table.</li>
</ul>
<h4>Example</h4>
<p>
In this example, there is a user named Albert in the current database's sysusers table and a login ID for a user ID Victoria in <i>master.dbo.</i>syslogins. The <b>sp_addalias</b> system stored procedure allows Victoria to use the current database and to be known as Albert in that database.</p>
<pre>sp_addalias Victoria, Albert</pre>
<h4>Permission</h4>
<p>
Execute permission defaults to the database owner.</p>
<h4>Tables Used</h4>
<p>
<i>master.dbo.syslogins</i>, <i>sysalternates</i>, <i>sysusers</i> </p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><a href="tsql18_62g5.htm"><b>sp_addlogin</b></a></td>
<td width=52%><a href="tsql23_12zp.htm"><b>sp_helpuser</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql18_5qw5.htm"><b>sp_adduser</b></a></td>
<td width=52%><a href="tsql29_9uus.htm">USE</a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql21_3k6d.htm"><b>sp_dropalias</b></a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
