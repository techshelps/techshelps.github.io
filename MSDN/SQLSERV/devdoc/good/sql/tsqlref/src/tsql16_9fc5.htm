<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sp_replcleanup Replication Stored Procedure</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sp_replcleanup_replication_stored_procedure"></a>sp_replcleanup Replication Stored Procedure </h2>
<p>
Removes transactions from the distribution database tables after they have been successfully distributed to the subscriber's database.</p>
<h4>Syntax</h4>
<p>
<b>sp_replcleanup</b> <i>publisher</i><b>,</b> <i>subscriber</i><b>,</b> <i>retention</i></p>
<p>
where 
<dl>
<dt>
<i>publisher</i></dt>
<dd>
Is the name of a publication server.</dd>
<dt>
<i>subscriber</i></dt>
<dd>
Is the name of a subscription server.</dd>
<dt>
<i>retention</i></dt>
<dd>
Is the number of hours to retain transactions after they have been successfully distributed to the subscription server.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <b>sp_replcleanup</b> stored procedure cleans up jobs for the specified publisher/subscriber pair. It is run on the distribution database and removes entries from these destination database tables: <i>MSjob_commands, MSjobs, MSsubscriber_status,</i> and <i>MSsubscriber_jobs</i>. </p>
<p>
<b>Important</b>  Each distribution database is automatically cleaned up once a day. There is a default subscriber cleanup task (which has a large overhead) that is scheduled by default to run daily at 1:05 A.M.</p>
<h4>Example</h4>
<p>
This example "cleans up" (removes transactions from) the distribution database tables on the AIREDALE server after they have been successfully distributed to the server WOLFHOUND and retains transactions for at least 8 hours. </p>
<pre>sp_replcleanup AIREDALE, WOLFHOUND, 8
</pre>
<h4>Permission</h4>
<p>
Execute permission defaults to the system administrator.</p>
<h4>Tables Used</h4>
<p>
<i>MSjob_commands, MSjobs, MSsubscriber_status, MSsubscriber_jobs</i></p>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%></td>
<td width=52%></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql16_5o4l.htm"><b>sp_replsync</b></a></td>
<td width=52%><a href="tsql16_2r8l.htm"><b>sp_replica</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql15_6kx1.htm"><b>sp_distcounters</b></a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
