<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ALTER DATABASE Statement</title>
<link disabled rel=stylesheet href=../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_alter_database_statement"></a>ALTER DATABASE Statement </h1>
<p>
Increases the amount of disk space allocated to a database.</p>
<h4>Syntax</h4>
<p>
ALTER DATABASE <i>database_name</i><br>
[ON {DEFAULT | <i>database_device</i>} [<b>= </b><i>size</i>] <br>
[<b>,</b> <i>database_device</i> [<b>=</b> <i>size</i>]]...]<br>
[FOR LOAD]</p>
<p>
where
<dl>
<dt>
<i>database_name</i></dt>
<dd>
Is the database whose storage size is to be changed.</dd>
<dt>
ON</dt>
<dd>
Indicates a size and/or location for the database extension. The default extension size is 1 megabyte (MB).
<p>
If extending the amount of space allocated to the transaction log, give the name of the log's database device. This will automatically allocate new space only for the transaction log if the database was originally created using the LOG ON clause. 

<p>
If the database was not created with the LOG ON clause and you want to move the log to a newly added device, then, after altering the database, use the <a href="tsql23_6kf9.htm"><b>sp_logdevice</b> system stored procedure</a> to make the newly allocated space available only for the log. 


<p>
<b>Note</b>  You must use the <b>sp_logdevice</b> system stored procedure or the LOG ON extension of CREATE DATABASE to put your transaction log on a separate device before you can use the DUMP TRANSACTION statement. Placing the log on the same device as the database minimizes the number of recoverability features available for your database.

</dd>
<dt>
DEFAULT</dt>
<dd>
Indicates that ALTER DATABASE can put the database extension on any default database device(s). To see a listing of all available database devices, use the <b>sp_helpdevice</b> system stored procedure. To specify a size for the database extension without specifying the location, use ON DEFAULT <b>=</b> <i>size</i>. To change the status of a database device to default, use the <b>sp_diskdefault</b> system stored procedure.</dd>
<dt>
<i>database_device</i></dt>
<dd>
Is the logical name of the database device on which you want to place the database extension. A database can reside on more than one database device with different amounts of space on each. To create a device, use the DISK INIT statement.</dd>
<dt>
<i>size</i></dt>
<dd>
Specifies the amount of space, in megabytes, allocated to the database extension. The minimum, and default, extension is 1 MB (512 2K pages). Legal values range from 1 through 2^24 MB. If SQL Server can't allocate the requested size, it allocates as much space as possible, in 0.5-MB units (allocation units). 
<p>
When an explicit value is not supplied, SQL Server will use the larger value between the size of the <i>model </i>database or the configured <b>database size </b>(configured with <b>sp_configure</b>). For example, if <b>database size</b> is configured to 2 (the default) and the <i>model</i> database has been altered to 3MB, the database will be 3MB.
</dd>
<dt>
FOR LOAD</dt>
<dd>
Prevents use of the database until after a successful database load. This can be used only if the database was created with the FOR LOAD option. For details, see the <a href="tsql02_69ro.htm">CREATE DATABASE statement</a>. 
</dd>
</dl>
<h4>Remarks</h4>
<p>
ALTER DATABASE increases the size of a database. To rename a database, use the <a href="tsql24_10x1.htm"><b>sp_renamedb </b>system stored procedure</a>. To decrease the size of a database, see the DBCC statement's SHRINKDB option.</p>
<p>
It is important to back up the <i>master</i> database using the <a href="tsql08_2zxw.htm">DUMP DATABASE statement</a> after each use of ALTER DATABASE. This makes recovery easier and safer if the <i>master</i> database becomes damaged. (If you use ALTER DATABASE and fail to back up the <i>master</i> database, you might still be able to recover the changes with the <a href="tsql07_59f8.htm">DISK REFIT statement</a>. For details, see the DISK REFIT statement.) </p>
<p>
The SYSTEM and DEFAULT segments are mapped to each new database device included in an ALTER DATABASE statement. When ALTER DATABASE extends a database on a device already in use by that database, the segments mapped to that device are also extended. The maximum number of segments for any database is 32. </p>
<h4>Permission</h4>
<p>
ALTER DATABASE permission defaults to the database owner if he or she has CREATE DATABASE permission. Permission cannot be transferred. The system administrator can also alter databases.</p>
<h4>Examples</h4>
<h5>A.&nbsp;&nbsp;&nbsp;&nbsp;Alter a Single Database on a Single Device</h5>
<p>
This example alters the <i>testing</i> database on the DEVICE1 device by adding an 8-MB fragment. </p>
<pre>ALTER DATABASE testing
    ON DEVICE1 = 8</pre>
<h5>B.&nbsp;&nbsp;&nbsp;&nbsp;Alter a Database's Log Space</h5>
<p>
This example increases the size of the <i>sales_info </i>database by 5 MB. After the database has been altered, that fragment is made log-only by executing the <b>sp_logdevice </b>system stored procedure. </p>
<pre>ALTER DATABASE sales_info
    ON DEVICE9 = 5
go
sp_logdevice sales_info, DEVICE9
</pre>
<h4>See Also</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=48%><a href="tsql02_69ro.htm">CREATE DATABASE</a></td>
<td width=52%><a href="tsql22_0nl1.htm"><b>sp_helpdb</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql07_0rg4.htm">DROP DATABASE</a></td>
<td width=52%><a href="tsql23_0xr9.htm"><b>sp_helpsegment</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql06_0yus.htm">DBCC</a></td>
<td width=52%><a href="tsql23_6kf9.htm"><b>sp_logdevice</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql18_0ezp.htm"><b>sp_addsegment</b></a></td>
<td width=52%><a href="tsql24_03mt.htm"><b>sp_spaceused</b></a></td>
</tr>
<tr valign=top>
<td width=48%><a href="tsql20_009x.htm"><b>sp_diskdefault</b></a></td>
<td width=52%></td>
</tr>
</table><br>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
