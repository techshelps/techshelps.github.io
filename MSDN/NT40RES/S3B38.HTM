<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Addendum:  Architectural Changes and Processor Use</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Addendum:  Architectural Changes and Processor Use</H2><P CLASS="t">The Windows&nbsp;NT&nbsp;4.0 Workstation and Server architecture has changed substantially from previous versions. To those monitoring performance, the most obvious change is in the behavior of Csrss.exe. This section describes how the architectural changes are likely to influence the performance of your Windows&nbsp;NT workstation.</P>
<P CLASS="t">For a complete discussion of the architectural changes, and the old and new components of Csrss.exe, see Chapter 5, "Windows&nbsp;NT Workstation Architecture."</P>
<P CLASS="t">In prior versions of Windows&nbsp;NT, Csrss.exe (the process for the Client Server Runtime Subsystem) included all of the graphic display and messaging functions of the Win32 environment subsystem, including the Console, Window Manager (User), the Graphics Device Interface (GDI), the user-mode graphics device drivers, and miscellaneous environment functions to support 32-bit Windows applications. With Windows&nbsp;NT&nbsp;4.0, the User, GDI, and graphics device drivers have been moved into the Windows&nbsp;NT Executive. Csrss.exe now represents just the Console and miscellaneous functions that remain in the Win32 environment subsystem.</P>
<P CLASS="t">The Win32 environment subsystem runs in a special protected process in user-mode, the processor mode used by application. In Windows&nbsp;NT 3.51 and earlier, calls to User and GDI required the use of special fast LPCs, 64-bit shared memory windows, and multiple user and kernel mode thread transitions to communicate with the process.</P>
<P CLASS="t">Moving User, GDI, and the graphics device drivers into the Windows&nbsp;NT Executive, and having them run in privileged mode, eliminates these complex transitions and improves performance and memory use. Windows&nbsp;NT applications must still call the User32 and GDI32 functions, but now these are calls to the Windows&nbsp;NT Executive which requires just one kernel-mode thread transition.</P></BODY></HTML>
