<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Disk Testing Tips</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Disk Testing Tips</H2><P CLASS="t">The following tips will help you test your disk configuration:</P>
<UL><LI>Get to know your applications and test tools. To perform a complete analysis, you must log data over time while running a variety  test tools and programs.</LI></UL><P>For example, the following reports show two test tools running the same test on the same disk on the same computer. The Performance Monitor reports of their results are superimposed to make it easier to compare the values.</P>
<P><img src="xwr_n01.gif"></P>
<P></P>
<P>It appears that the disk was much more efficient on the second trial. The throughput rate, as measured by Disk Read Bytes/sec, increased from 763,397 in the first test to 1,005,587 in the second test, an improvement of almost one third!  However, the disk performance didn't change: The applications simply issued their reads at different rates during the interval.</P>
<UL><LI>When testing disk performance, log Performance Monitor data to another physical disk or computer so that it doesn't interfere with the disk you are testing. If you can't do this, log to another logical partition on the drive, or measure Performance Monitor overhead during an idle period and subtract it from your data.</LI></UL><UL><LI>If you are writing your own tools to test disk performance, include the the FILE_FLAG_NO_BUFFERING parameter in the open call for your test files. This instructs the Virtual Memory Manager to bypass the cache and go directly to disk.</LI></UL><UL><LI>When using Response Probe to test disk performance, set the FILEACCESSMODE parameter in the Thread Description file (*.sct) to UNBUFFER. This tells the system to bypass the cache and go directly to disk. When using UNBUFFER, remember that the number of bytes in RECORDSIZE parameter must be a multiple of the disk sector size. </LI></UL><P>For more information, see "Response Probe" in Chapter 11,  "Performance Monitoring Tools." To find your disk sector size, use Windows NT Diagnostics in the Administrative Tools group. Click the Drives tab, then double-click the drive number to see drive properties.</P>
<UL><LI>Reading from and writing to compressed subdirectories on NTFS partitions always involves the cache and is optimized by the cache manager. Such tests are more a test of cache performance than disk performance. When testing disks with NTFS partitions, always read from or write to an uncompressed subdirectory.</LI></UL><UL><LI>Read the following section on understanding the Performance Monitor disk counters. The time you invest in learning the tools will be repaid when it comes to analyzing the data.</LI></UL><P></P></BODY></HTML>
