<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How .ini Files Are Mapped to the Registry</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>How .ini Files Are Mapped to the Registry</H2><P CLASS="t">If you install Windows&nbsp;NT as an upgrade to Windows&nbsp;3.<I>x</I>, all of the settings in the initialization files are copied into the Registry, including settings in Control.ini, Progman.ini, System.ini, Win.ini, and Winfile.ini. You can see where the Windows initialization files are mapped in&nbsp;the&nbsp;Registry by viewing the subkeys and value entries under this path:</P>
<P CLASS="t">HKEY_LOCAL_MACHINE\Software<BR>    \Microsoft<BR>        \Windows&nbsp;NT<BR>            \CurrentVersion<BR>                \IniFileMapping</P>
<P CLASS="t">When you install an application created for 16-bit Windows, the application's setup program creates its own .ini file or creates entries for the Win.ini or System.ini file in the same way that it does for any version of Windows&nbsp;3.<I>x</I>. These entries are not updated in the Registry because these applications do not have a way to access the Windows&nbsp;NT Registry. For this reason, basic System.ini, Win.ini, and Winfile.ini files appear in the <I>Systemroot</I> directory in Windows&nbsp;NT.</P>
<P CLASS="t">If a Windows-based application tries to write to Win.ini, System.ini, or any other section listed in the IniFileMapping key, and if the application uses the Windows&nbsp;NT Registry APIs, the information is stored in the Registry. If the application writes to other sections of the .ini file or tries to open the .ini file directly without using the Windows&nbsp;NT Registry APIs, the information is saved in an .ini file.</P>
<P CLASS="t">To find mapping information in the HKEY_LOCAL_MACHINE\Software key, the system searches for the filename extension of the initialization file. If it finds the filename extension, it looks under the mapped key for the name of the application associated with that file type and a variable name. If necessary, it continues to look for keys whose value entries are the variable names. If no mapping for either the application name or filename is found, the system looks for an .ini file to read and write its contents. </P>
<P></P>
<P CLASS="t">Tables 26.1 through 26.3 show where system settings are saved in the Registry in comparison to initialization files used with Windows&nbsp;3.1 for MS-DOS. </P>
<P CLASS="t">In the entries in the IniFileMapping key and in Tables 26.1 through 26.3, the following symbols are used:</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="45pt" VALIGN="TOP"><COL WIDTH="302pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Symbol</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P><B>!</B> </P></TD><TD VALIGN="TOP"><P>Forces all writes to go to both the Registry and to the .ini file on disk.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>#</B> </P></TD><TD VALIGN="TOP"><P>Causes the Registry value to be set to the value in the Windows&nbsp;3.1 .ini file whenever a new user logs on for the first time after Setup, if Windows&nbsp;NT was installed on a computer that had Windows&nbsp;3.1 already installed.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>@</B> </P></TD><TD VALIGN="TOP"><P>Prevents any reads from going to the .ini file on disk if the requested data is not found in the Registry.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>USR</B> </P></TD><TD VALIGN="TOP"><P>Stands for HKEY_CURRENT_USER, and the text after the prefix is relative to that subtree.</P></TD></TR><TR><TD VALIGN="TOP"><P><B>SYS</B> </P></TD><TD VALIGN="TOP"><P>Stands for HKEY_LOCAL_MACHINE\Software, and the text after the prefix is relative to that key.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P></BODY></HTML>
