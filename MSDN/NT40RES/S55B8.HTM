<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Testing Maximum Disk Throughput</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Testing Maximum Disk Throughput</H2><P CLASS="t">Disk configurations vary widely between design technologies and manufacturers. If disk performance is important to your system, it's wise to assemble and test different disk components. A maximum throughput test will tell you one of the limits of your system.</P>
<P CLASS="t">The Windows NT Resource Kit 4.0 CD includes all the files you need to use Response Probe to test maximum throughput on your disks. Use Setup to install the Performance Tools group from the CD. The test files are in the Probe subdirectory. Instructions for running the test are in Diskmax.txt.</P>
<P CLASS="t"><B>Warning   </B>Response Probe, like other Windows NT Resource Kit 4.0 CD tools, is not an officially supported tool. Be aware of this when using Response Probe and other tools on the CD.</P>
<P CLASS="t">To test how fast the disk can go, give it the best possible circumstances: Have it read large (but not excessively large) records sequentially from a large file. In this test, Response Probe reads 64K records sequentially from a 20 MB file of zeros. The reads are not buffered by the cache, there is no datapage access, and the same codepage function is read repeatedly to minimize the effect of codepage access.</P>
<P CLASS="t">While Response Probe is running, use Performance Monitor to log the System and Logical Disk objects once per second. Then chart the following counters:</P>
<UL><LI>System: % Total Processor Time</LI></UL><UL><LI>System:  % Total Interrupts or Total Interrupts/sec</LI></UL><UL><LI>Logical Disk:  Avg. Disk Read Queue Length</LI></UL><UL><LI>Logical Disk:  Avg. Disk Bytes/Read</LI></UL><UL><LI>Logical Disk:  Avg. Disk sec/Read</LI></UL><UL><LI>Logical Disk:  Disk Read Bytes/sec</LI></UL><UL><LI>Logical Disk:  Disk Reads/sec</LI></UL><P></P>
<P CLASS="t">Disk Read Bytes/sec is the essential throughput measurement; the other counters are included to help to in interpreting its value.</P>
<P CLASS="t">The following report of Response Probe activity was generated by using the Diskmax test files on the CD.</P>
<P><img src="xwr_n25.gif"></P>
<P CLASS="t">In this example, the maximum throughput, as measured by Disk Read Bytes/sec is  1.54 MB, which is quite good for this disk configuration, although higher throughput is expected from more advanced disk technologies. The disk was reading 23.5 of the 64K records per second and each read took 0.04 seconds on average.</P>
<P CLASS="t">Total interrupts for this activity, 3676 per second, seem excessive, but the processor was busy only 79% of the time, and the interrupts generated only 7.65% of that activity.</P>
<P CLASS="t">Run the Diskmax test on your disk configuration. When you have run it a few times, test the response of your disk configuration to changes in the test. For example, increase the size of the workload file to 60 or even 100 MB. Increase the record size, too. After you determine the maximum throughput for your disk, you can adjust the load on your disk so it doesn't become a bottleneck.</P></BODY></HTML>
