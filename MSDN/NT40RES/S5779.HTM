<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Measuring the Change</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Measuring the Change</H3><P CLASS="t">These architectural changes are manifest in several different ways but are most evident when you monitor the behavior of graphics-intensive applications.</P>
<P CLASS="t">The following figure is a graph of a Windows&nbsp;NT 3.0 running GDIDemo, a graphics demonstration tool in the Win32 Software Development Kit. All features of the tool were used simultaneously to generate the most graphics activity.</P>
<P><img src="xwr_l29.gif"></P>
<P></P>
<P CLASS="t">In this example, the processor is 100% busy and is spending most of its time running Csrss.exe. The following figure shows the same program running on Windows&nbsp;NT&nbsp;4.0.</P>
<P><img src="xwr_l30.gif"></P>
<P></P>
<P CLASS="t">There are significant differences between the performance evidenced in the graphs. </P>
<P CLASS="t"><I>Processor Time:</I> </P>
<UL><LI>The Windows&nbsp;NT 3.51 graph shows that the GDIDemo test used 100% of processor time. (System: % Total Processor Time is the thick, black line is running along the top of the graph). </LI></UL><UL><LI>The Windows&nbsp;NT 4.0 graph shows that the GDIDemo test used an average of 50% of processor time. . (System: % Total Processor Time is the gray line) </LI></UL><P>Some of this might be attributable to the new architecture, but it probably results from improvement in processor technology. The Windows&nbsp;NT 3.51 graph was captured on a computer with a 386 processor; the Windows&nbsp;NT&nbsp;4.0 was captured on a computer with a 486 processor.</P>
<P></P>
<P CLASS="t"><I>Process Time:</I></P>
<UL><LI>In the Windows&nbsp;NT 3.51 graph, Process: % Processor Time for GDIDemo (the thin, black line) runs between 10 and 20% while Process: % Processor Time for CSRSS (the white line) averages between 75% and 85%. This indicates that in order to run GDIDemo, the processor was spending 10–20% of its time running in GDIDemo code and the remainder running in CSRSS code on behalf of GDIDemo.</LI></UL><UL><LI>In the Windows&nbsp;NT&nbsp;4.0 graph, Process: % Processor Time for GDIDemo (the thin, black line) runs between 25 and 35% while Process: % Processor Time for CSRSS (the white line) runs at nearly 0%. The processor may have been running some system code on behalf of GDIDemo, but it was not in CSRSS.</LI></UL><P>The following graph of the Windows&nbsp;NT&nbsp;4.0 test is the same as the previous one, but includes counters for privileged and user time and interrupts.</P>
<P></P>
<P><img src="xwr_l31.gif"></P>
<P></P>
<P CLASS="t">From top to bottom, the lines represent:</P>
<UL><LI>System: % Total Processor Time</LI></UL><UL><LI>System: % Total Privileged Time</LI></UL><UL><LI>Process: % Processor Time: GDIDemo</LI></UL><UL><LI>System: % Total DPC Time</LI></UL><UL><LI>System: % Total User Time</LI></UL><UL><LI>System: % Total Interrupt Time</LI></UL><UL><LI>Process: % Processor Time: CSRSS</LI></UL><P></P>
<P CLASS="t">This data demonstrates that in Windows&nbsp;NT&nbsp;4.0, GDIDemo graphics processing time is spent running in privileged mode code in the Windows&nbsp;NT Executive. In previous versions of Windows&nbsp;NT, graphics processing was part of CSRSS and ran mainly in user mode.</P></BODY></HTML>
