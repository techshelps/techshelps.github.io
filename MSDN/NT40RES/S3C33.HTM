<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FTEdit — Recovering Volume Sets and Stripe Sets</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>FTEdit — Recovering Volume Sets and Stripe Sets</H3><P CLASS="t">The FTEdit utility on the <I>Windows&nbsp;NT Workstation Resource Kit</I> CD aids in the recovery of stripe sets, volume sets, stripe sets with parity, and mirror sets. Stripe sets with parity and mirror sets are available for Windows&nbsp;NT Server only, but are discussed here for completeness. For more information about using FTEdit, see Ftedit.hlp on the <I>Windows&nbsp;NT Workstation Resource Kit</I> CD.</P>
<P CLASS="t">Because stripe sets and volume sets are not fault tolerant, if one of the disks in a stripe set or volume set fails, the entire volume is no longer usable. And all the primary partitions or logical drives that are members of the volume are marked as orphans. In Disk Administrator, the members of the volume are displayed as Unknown.</P>
<P CLASS="t">All data about the configuration of volume sets and stripe sets are contained in the Registry subkey HKEY_LOCAL_MACHINE\SYSTEM\DISK. This disk configuration information is stored in binary format, so it is not practical to edit it manually. When the Registry information is corrupt or missing, and no backups are available, you can use FTEdit to build the Registry information and allow the operating system to read the volumes.</P>
<P CLASS="t">For example, if the disk containing the boot partition becomes unusable, or the computer fails, you might want to move the disks containing stripe sets and volume sets to another computer. Alternatively, you might decide to reinstall the operating system on a new disk. In either case, the operating system does not have any information about the volumes. </P>
<P CLASS="t">The operating system has information about which disks are members of volumes, but it cannot distinguish between a stripe set, a stripe set with parity, a volume set, or a mirror set without the Registry information. In this situation, when the volumes are displayed in Disk Administrator, the file system might be displayed as Unknown, and there will be no drive letter assigned to the volumes. This is to prevent writing to the volume, which could corrupt it. </P>
<P CLASS="t">When using FTEdit to rebuild the DISK Registry subkey, you need to know the order in which the unused areas on the disks were combined to create the volume. The following scenario shows why order is important. </P>
<P CLASS="t">A previous user created a volume set by combining unpartitioned areas on three disks in this order:</P>
<UL><LI>2 MB on disk 2</LI></UL><UL><LI>3 MB on disk 0</LI></UL><UL><LI>4 MB on disk 1</LI></UL><P></P>
<P CLASS="t">When someone creates a volume set, the Partition Boot Sector is the first sector on the first area selected. Data are written to the areas in the order in which they are combined. Thus, if someone created a 6&nbsp;MB file on this volume set, the file would occupy the following areas:</P>
<UL><LI>2 MB on disk 2</LI></UL><UL><LI>3 MB on disk 0</LI></UL><UL><LI>1 MB on disk 1</LI></UL><P></P>
<P CLASS="t">Now you need to use FTEdit to rebuild the volume set. You select the disks in the order disk 0, disk 1, and then disk 2. Windows&nbsp;NT will not be able to find the Partition Boot Sector for the volume set, because the first sector of the volume set that you rebuilt is on disk 0, which contains only data. The Partition Boot Sector is actually on disk 2, but that disk area is at the end of the volume set you created. Your attempt to rebuild the volume set has failed, because you did not know the order in which to combine the disk areas. </P>
<P CLASS="t">The remainder of this section describes using FTEdit to build Registry information for a stripe set that has been moved from another computer. (Disks 1, 2, and 3 are the disks that have been moved.) Each disk is 519 MB and has one primary partition. Both computers are running Windows&nbsp;NT Workstation version 4.0.</P>
<H4><A NAME="sec0"></A>To rebuild a stripe set</H4><P>Open Disk Administrator, so that you can update the disk configuration information. Disk Administrator needs to store the disk signature and other basic disk information before the disks can be recognized.</P>
<P>    2.    Open FTEdit. The following dialog box is displayed.</P>
<P><img src="xwr_u12.gif"></P>
<P><B>    Figure 22.4    Using FtEdit to recover a stripe set</B></P>
<P>The <B>Disks</B> group box identifies all of the disks connected to the computer. The <B>Partitions</B> group box contains information about the disk currently selected, or the first disk if none is selected. Disk 0 is two gigabytes, and contains two partitions.</P>
<P>    3.    On the <B>Edit</B> menu, click <B>Create FT Set</B>. In the <B>FT Set Type</B> dialog box, click the option button for the type of volume you are building. In this example, click <B>Stripe Set</B>. </P>
<P><img src="xwr_u13.gif"></P>
<P>    4.    In the <B>Disks</B> list box, select the first disk that will be a member of the stripe set. Available partitions are displayed in the <B>Partitions</B> list box on the right.</P>
<P>Double-click the partition from each disk that will make up the stripe set with parity. The disk and partition information will be displayed in the list box on the lower right. The title of this list box reflects the type of volume being built. For this example, the title is <B>Stripe Set Information</B>. The next screen shot shows the dialog box after double-clicking partition 1 on each of Disk 1, Disk 2, and Disk 3.</P>
<P><img src="xwr_u14.gif"></P>
<P>    5.    Click the <B>Save FT Set</B> button. The information is transferred to the <B>FT Set Member Information</B> list box. Check to make sure the information is correct. FTEdit should look like the following illustration:</P>
<P><img src="xwr_u15.gif"></P>
<P>The <B>Partitions</B> list box shows the information for Disk 0. The disks that are used in creating the new volume are those listed in the <B>FT Set Member Information</B> list box.</P>
<P>    6.    On the <B>Edit</B> menu, click <B>Save </B>Changes<B> to System</B>. The following message box is displayed:</P>
<P><img src="xwr_u16.gif"></P>
<P>    7.    Exit FTEdit, close any open programs, and restart the system. You need to do this to get the new information loaded into the Registry.</P>
<P>    8.    Open Disk Administrator. </P>
<P>Click one of the partitions in the stripe set. If the status bar has a message like <B>Stripe set #N [INITIALIZING],</B> the computer on which you were previously using the stripe set did not finish shutdown. Wait for Disk Administrator to finish the initialization. If the volume was functional before the disks were moved, and the correct information was entered in FTEdit, the data on the volume should be intact. </P>
<P>    9.    From the Disk Administrator <B>Tools</B> menu, click <B>Drive Letter</B>.<B> </B>In the <B>Assign Drive Letter</B> dialog box, click <B>Assign drive letter</B>, and then choose a drive letter for the new volume.<B> </B></P>
<P>The volume is now accessible from Windows&nbsp;NT Explorer, My Computer, and by the rest of the operating system.</P>
<P>    10.    After confirming that the volume is correctly configured and is accessible, be sure to add this new configuration information to the records that you keep for this computer.</P>
<P>You might want to back up the volume at this time.</P>
<P></P>
<P CLASS="t">These same steps can be used to recover volume sets. To successfully use FTEdit to build Registry information, you must know the following information:</P>
<UL><LI>Which disks contain stripe sets and volume sets.</LI></UL><UL><LI>Which partitions belong to the stripe sets and volume sets.</LI></UL><UL><LI>The order in which the partitions were combined into the stripe sets or volume sets.</LI></UL><P></P>
<P CLASS="t">If your configuration involves multiple stripe sets and volume sets on several different disks, you might face a very difficult job remembering which primary partitions and logical drives belong to which volumes. For this reason, it is a good idea to keep the disk configuration simple, and to keep recovery information as up-to-date as possible.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>FTEdit edits the binary information in the Registry. It cannot recover damaged or corrupt data on the disk.</P>
<P></P></BODY></HTML>
