<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Backing up the Registry</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Backing up the Registry</H3><P CLASS="t">All of the Windows&nbsp;NT internal configuration information is stored in the Registry. It is critical to have up-to-date, reliable backups of this information. There are several ways to back up the all or part of the Registry, and you should have redundancy in this area.</P>
<P CLASS="t">If you have a backup device installed on your computer, you can include the Registry in normal backups. You have to specifically select this option in the Windows&nbsp;NT tape backup program Ntbackup.exe. Third-party Windows&nbsp;NT-compatible backup software might also require that you take specific action to back up the Registry. Be sure to test your Registry backup and restore procedures.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>Windows&nbsp;NT Backup can only back up the Registry on the local system. You cannot use Windows&nbsp;NT Backup to back up a computer's Registry over the network.</P>
<P></P>
<P CLASS="t">After any change in the configuration of the operating system, including adding new software, you should use the Repair Disk program, Rdisk.exe, to update files in the <I>%systemroot%</I>\Repair folder, and create a new Emergency Repair Disk. For information about using the Repair Disk program, see "Creating an Emergency Repair Disk," presented later in this chapter. It is a good idea to make a copy of the Emergency Repair Disk and store it in a separate location, perhaps off site.</P>
<P CLASS="t">You can use the Windows&nbsp;NT Registry Editor, Regedt32.exe, to save and restore Registry keys. </P>
<P CLASS="t">The <I>Windows&nbsp;NT Workstation Resource Kit </I>CD contains utilities that enable you to back up and restore all or part of the Registry. For information about the Registry Backup (Regback.exe) and Registry Restore (Regrest.exe) utilities, see Rktools.hlp.</P>
<H4><A NAME="sec0"></A>Saving the SYSTEM Key</H4><P CLASS="t">The HKEY_LOCAL_MACHINE\SYSTEM key contains configuration information that Windows&nbsp;NT uses during startup. Even though this key is copied to the Emergency Repair Disk when you use the Repair Disk program, there are times that you might want to restore this key from another disk. For more information, see "Restoring the SYSTEM Key," presented later in this chapter.</P>
<P CLASS="t">You can save the SYSTEM key by using either Disk Administrator or the Windows&nbsp;NT Registry Editor (Regedt32.exe). The primary difference between these two methods is that the Disk Administrator always saves the key to a floppy disk, whereas you can specify any disk by using the Registry Editor.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>The <I>%systemroot%</I>\System32\Config\System file is usually larger than the SYSTEM key saved by using Disk Administrator or Registry Editor. The smaller size results because the two programs compact the file before copying it to eliminate internal fragmentation and holes.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec1"></A>To use Disk Administrator to save the SYSTEM key</H5><P>    1.    On the <B>Partition</B> menu, click <B>Configuration</B>.</P>
<P>    2.    On the <B>Configuration</B> menu, click <B>Save</B>. A message is displayed describing what will be saved and where you should save it. </P>
<P>    3.    Insert any floppy disk with enough unused space to hold the configuration information (about 512K). Using the Windows&nbsp;NT startup floppy disk is highly recommended.</P>
<P>    4.    Click <B>OK</B> to write the data to the floppy disk.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec2"></A>To use Registry Editor to save the SYSTEM key</H5><P>    1.    Run Registry Editor (Regedt32.exe).</P>
<P>    2.    Click the HKEY_LOCAL_MACHINE\SYSTEM key. On the <B>Registry</B> menu, click <B>Save key</B>.</P>
<P>    3.    Enter the path to the file where you want to save the key. </P>
<P></P>
<H4><A NAME="sec3"></A>Saving the DISK Subkey</H4><P CLASS="t">The HKEY_LOCAL_MACHINE\SYSTEM\DISK subkey in the Registry contains configuration information about currently defined drive letters, volume sets, stripe sets, stripe sets with parity, and mirror sets, as well as CD-ROM mappings and drive mappings. Any time that you make changes to your disk configuration, Windows&nbsp;NT updates the DISK subkey. You should save this subkey whenever you make changes that affect it, such as:</P>
<UL><LI>Creating or deleting a disk partition.</LI></UL><UL><LI>Changing a drive letter. </LI></UL><UL><LI>Creating or deleting a volume set or stripe set. </LI></UL><P></P>
<P CLASS="t">Having a backup is useful in situations when you do not want to restore the entire Registry or the entire SYSTEM key, such as the following:</P>
<UL><LI>You want to move a volume set or stripe set to another computer because of a hardware failure.</LI></UL><UL><LI>Configuration information about a set has been corrupted. </LI></UL><UL><LI>You need to replace hardware.</LI></UL><P> </P>
<P CLASS="t">For example, if you have changed a SCSI controller, restoring the entire SYSTEM key might make it difficult to start the computer. Restoring the DISK subkey enables you to have current disk configuration information without changing anything else in the Registry.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>The DISK subkey does not exist the first time that you start Windows&nbsp;NT Workstation. Disk Administrator creates the subkey the first time that you run it.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec4"></A>To use the Registry Editor to save the DISK subkey</H5><P>    1.    Run Registry Editor (Regedt32.exe).</P>
<P>    2.    Click the HKEY_LOCAL_MACHINE\SYSTEM\DISK subkey. On the <B>Registry</B> menu, click <B>Save key</B>.</P>
<P>    3.    Enter the path to the file where you want to save the subkey. </P>
<P></P></BODY></HTML>
