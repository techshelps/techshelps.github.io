<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Understanding the Processor Counters</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Understanding the Processor Counters</H2><P CLASS="t">It is important to understand the components of the primary processor activity counters, and to distinguish them from each other.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="115pt" VALIGN="TOP"><COL WIDTH="233pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Counter</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>System: % Total Processor Time</P></TD><TD VALIGN="TOP"><P>For what proportion of the sample interval were all processors busy?</P>
<P>A measure of activity on all processors. In a multiprocessor computer, this is equal to the sum of Processor: % Processor Time on all processors divided by the number of processors. On single-processor computers, it is equal to Processor: % Processor time, although the values may vary due to different sampling time.</P></TD></TR><TR><TD VALIGN="TOP"><P>System: Processor Queue Length</P></TD><TD VALIGN="TOP"><P>How many threads are ready, but have to wait for a processor?</P>
<P>This is an instantaneous count, not an average, so it's best viewed in charts, rather than reports. Unlike disk queue counters, it counts only waiting threads, not those being serviced.</P>
<P>The queue length counter is on the System object because there is a single queue even when there are multiple processors on the computer.</P></TD></TR><TR><TD VALIGN="TOP"><P>Processor: % Processor Time</P></TD><TD VALIGN="TOP"><P>For what proportion of the sample interval was each processor busy?</P>
<P>This counter measures the percentage of time the thread of the Idle process is running, subtracts it from 100%, and displays the difference.</P>
<P>This counter is equivalent to Task Manager's CPU Usage counter. </P></TD></TR><TR><TD VALIGN="TOP"><P>Processor: % User Time<BR>Processor: % Privileged Time</P></TD><TD VALIGN="TOP"><P>How often were all processors executing threads running in user mode and in privileged mode?</P>
<P>Threads running in user mode are probably running in their own application code. Threads running in privileged mode are using operating system services.</P>
<P>The user time and privileged time counters on the System and Processor objects do not always sum to 100%. They are measures of non-Idle time, so they sum to the total of non-idle time. </P>
<P>For example, if the processor was running the Idle thread for 85% of the time, the sum of Processor: %&nbsp;User Time and Processor: %&nbsp;Privileged Time would be 15%.</P></TD></TR><TR><TD VALIGN="TOP"><P>Process: % Processor Time</P>
<P></P></TD><TD VALIGN="TOP"><P>For what proportion of the sample interval was the processor running the threads of this process?</P>
<P>This counter sums the processor time of each thread of the process over the sample interval.</P></TD></TR><TR><TD VALIGN="TOP"><P>Process: % Processor Time: _Total</P></TD><TD VALIGN="TOP"><P>For what proportion of the sample interval was the processor processing?</P>
<P>This counter sums the time all threads are running on the processor, including the thread of the Idle process on each processor, which runs to occupy the processor when no other threads are scheduled.</P>
<P>The value of Process: % Processor Time: _Total is 100% except when the processor is interrupted. (100% processor time = Process: % Processor Time: Total  + Processor: %&nbsp;Interrupt Time + Processor: %&nbsp;DPC Time) This counter differs significantly from Processor: % Processor Time, which excludes Idle. </P></TD></TR><TR><TD VALIGN="TOP"><P>Process: % User Time<BR>Process: %&nbsp;Privileged Time<BR></P></TD><TD VALIGN="TOP"><P>How often are the threads of the process running in its own application code (or the code of another user-mode process)? How often are the threads of the process running in operating system code?</P>
<P>Process: % User Time and Process: % Privileged Time sum to Process: % Processor Time.</P></TD></TR><TR><TD VALIGN="TOP"><P>Process: Priority Base</P></TD><TD VALIGN="TOP"><P>What is the base priority of the process? How likely is it that this process will be able to execute if the processor gets busy?</P>
<P>The base priority of the process establishes a range within which the dynamic priorities of its threads vary. . The system schedules ready threads for the processor in order of their dynamic priority.</P></TD></TR><TR><TD VALIGN="TOP"><P>Thread: Thread State</P></TD><TD VALIGN="TOP"><P>What is the processor status of this thread?</P>
<P>An instantaneous indicator of the dispatcher thread state, which represents the current status of the thread with regard to the processor. Threads in the Ready state (1) are in the processor queue.</P>
<P>In Performance Monitor, the threads of the Performance Monitor process, Perfmon.exe always appear to be running. . Other threads that are getting processor time, are those recorded as switching from Ready (1) to Waiting (5).</P>
<P>A table of Windows&nbsp;NT thread states appears in "Thread State" later in this chapter.</P></TD></TR><TR><TD VALIGN="TOP"><P>Thread: Priority Base</P></TD><TD VALIGN="TOP"><P>What is the base priority of the thread? </P>
<P>The base priority of a thread is determined by the base priority of the process in which it runs. Except for Idle and Real-time threads, the base priority of a thread varies only +/-2 from the base priority of its process.</P></TD></TR><TR><TD VALIGN="TOP"><P>Thread: Priority Current</P></TD><TD VALIGN="TOP"><P>What is the current dynamic priority of this thread? How likely is it that the thread will get processor time?</P>
<P>The Windows&nbsp;NT Microkernel schedules threads for the processor in order of their priority. . The system adjusts the dynamic priority of threads within the range of the base priority of the process to optimize the response of processes interacting with the user.</P></TD></TR><TR><TD VALIGN="TOP"><P></P>
<P>Thread: % Privileged Time</P></TD><TD VALIGN="TOP"><P>How often are the threads in the process running in their own application code (or the code of another user-mode process)? How often are the threads of the process running in operating system code?</P>
<P>Process: % User Time and Process: % Privileged Time sum to Process: % Processor Time.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P></BODY></HTML>
