<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HKEY_LOCAL_MACHINE\System Key</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>HKEY_LOCAL_MACHINE\System Key</H3><P CLASS="t">All startup-related data that must be stored (rather than computed during startup) is saved in the System hive. A complete copy of the data is also stored in the System.alt file. The data in HKEY_LOCAL_MACHINE\System—which is the System hive—is organized into control sets that contain a complete set of parameters for devices and services as described in this section. You might occasionally need to change entries in the CurrentControlSet subkey, as described in Chapter 25, "Configuration Management and the Registry."</P>
<P></P>
<P CLASS="t">Figure 23.17 shows the structure of this subtree.</P>
<P><img src="xwr_v21.gif"></P>
<P>Figure 23.17   The HKEY_LOCAL_MACHINE\System key</P>
<P CLASS="t">The following sections describe the HKEY_LOCAL_MACHINE\System subkeys. </P>
<H4><A NAME="sec0"></A>ControlSet<I>nnn</I>, Select, and CurrentControlSet Subkeys</H4><P CLASS="t">The Registry, particularly data in the System hive, is essential to starting the system. To help ensure that the system can always be started, a kind of backup version is kept, which allows you to undo any configuration changes that did not have the intended effect. This section describes how it works.</P>
<P CLASS="t">Figure 23.18 shows the structure of subkeys under the HKEY_LOCAL_MACHINE\System key.</P>
<P><img src="xwr_v22.gif"></P>
<P>Figure 23.18   Subkeys under HKEY_LOCAL_MACHINE\System</P>
<P CLASS="t">All of the data required to control startup is gathered into subkeys called control sets in the Registry. Each control set has four subkeys:</P>
<UL><LI>The <I>Control</I> subkey contains configuration data used to control the system, such as the computer's network name and the subsystems to start. </LI><LI>The <I>Enum</I> subkey contains hardware configuration data for devices and drivers loaded by Windows&nbsp;NT.</LI><LI>The <I>Hardware Profiles</I> subkey contains configuration data for drivers and devices specific to a hardware profile. Users can create multiple hardware profiles for each control set. Data appears under the Hardware Profiles subkey only when it differs from the standard settings for drivers and devices. The current hardware profile in the CurrentControlSet subkey also appears in HKEY_CURRENT_CONFIG.</LI><LI>The <I>Services</I> subkey contains a list of drivers, file systems, user-mode service programs, and virtual hardware keys. Its data controls which services are loaded and their load order. The data in the Services subkey also controls how the services call each other.</LI></UL><P CLASS="t">Multiple control sets are saved as subkeys of HKEY_LOCAL_MACHINE\System under names such as ControlSet001 and ControlSet003. Although as many as four control sets (numbered 000–003) can appear, there are usually two sets. This is similar to having multiple sets of Config.sys files under MS-DOS—a current file and a backup copy known to start the system correctly. However, all of the work of creating and maintaining backups is done automatically by the system.</P>
<P CLASS="t">The Select subkey consists of four value entries that describe how the control sets are used:</P>
<UL><LI><B>Default</B> specifies the number of the control set (for example, 001 = ControlSet001) that the system will use at next startup, barring an error or manual invocation of the LastKnownGood control set by the user.</LI></UL><UL><LI><B>Current</B> specifies the number of the control set actually used to start the system this time.</LI></UL><UL><LI><B>LastKnownGood</B> specifies the number of the control set that is a clean copy of the last control set that actually worked.</LI></UL><UL><LI><B>Failed</B> specifies the control set that was replaced if the LastKnownGood control set was used to start the system this time. You can examine this control set to learn why the replacement was required.</LI></UL><P></P>
<P CLASS="t">The Clone subkey contains the last control set used to start the system. If the start was successful ("good"), the contents of the Clone become the LastKnownGood control set.</P>
<P></P>
<P CLASS="t">The CurrentControlSet subkey is not the root of an actual control set; rather, it is a symbolic link to the control set indicated by the value of <B>Current</B>. It is there so that constant paths can be used to refer to subkeys in the currently used control set, even though the name of that control set may change.</P>
<P CLASS="t">These multiple control sets are used to allow an escape from various problems. Each time the system starts, the control set used to start is saved (under HKEY_LOCAL_MACHINE\System\Clone). If the startup is declared to be "good," the LastKnownGood control set is discarded, and the Clone subkey is copied to replace it. An administrator can change the requirements for a startup to be classified as "good," but a startup is typically declared to be "good" if no severe or critical errors occurred while starting the services and if at least one user logged on successfully.</P>
<P CLASS="t">The LastKnownGood configuration is used when the user chooses LastKnownGood from the <B>Hardware Profile/Configuration Recovery</B> menu during startup or if startup fails (is not "good"). When this happens, a new control set is created by copying the LastKnownGood control set and the values of the entries in HKEY_LOCAL_MACHINE\System\Select are changed to point to different control sets:</P>
<UL><LI>The control set identified as <B>Default </B>is identified as <B>Failed.</B></LI><LI>The control set identified as <B>LastKnownGood</B> is identified as <B>Default</B>.</LI></UL><P> </P>
<P CLASS="t"> User profile data is stored elsewhere and is therefore unaffected.</P>
<P></P>
<P CLASS="t"><B>Tip</B></P>
<P>When you start Windows&nbsp;NT, you can choose which control set the system uses. At the Boot Loader command prompt, select Windows&nbsp;NT, then press the SPACEBAR. The <B>Hardware Profile/Configuration Recovery</B> menu appears. Follow the instructions on the screen to select the control set or LastKnownGood configuration from the menu.</P>
<P>To find out whether Default or LastKnownGood was used, see the values in the Select subkey.</P>
<P></P>
<P CLASS="t">To modify the information stored in these subkeys, use the Devices, Network, Server, and Services options in Control Panel, or use Server Manager.</P>
<P CLASS="t">To modify the configuration by using Registry Editor, make changes under the CurrentControlSet subkey. </P>
<P CLASS="t">The Control and Services subkeys found in each control set are described in the following sections. </P>
<H4><A NAME="sec1"></A>Control Subkey for All Control Sets</H4><P CLASS="t">The Control subkey contains startup parameters for the system, including information about the subsystems to load, computer-dependent environment variables, the size and location of the paging files, and so on. Figure 23.19 shows the typical Control subkeys, and Table 23.6 describes the contents of some typical subkeys.</P>
<P><img src="xwr_v23.gif"></P>
<P>Figure 23.19   A typical configuration of the Control subkey for a control set</P>
<P>Table 23.6    Typical Subkeys of \CurrentControlSet\Control for All Control Sets</P>
<P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="108pt" VALIGN="TOP"><COL WIDTH="240pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Subkey</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Contents</B></P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>BootVerificationProgram</P></TD><TD VALIGN="TOP"><P>A value that can be set to define a nonstandard mechanism to declare system startup as "good," as described in Chapter 25, "Configuration Management and the Registry."</P></TD></TR><TR><TD VALIGN="TOP"><P>ComputerName</P></TD><TD VALIGN="TOP"><P>The names of the default and active computers, stored in two subkeys, ComputerName and ActiveComputerName. To set the computer name, use the Network option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>GroupOrderList</P></TD><TD VALIGN="TOP"><P>Specifies the order in which to load services for all groups that have one, used in combination with Tags. ServiceGroupOrder specifies the order for loading groups.</P></TD></TR><TR><TD VALIGN="TOP"><P>ServiceGroupOrder</P></TD><TD VALIGN="TOP"><P>Specifies the order in which to load various groups of services. Order within groups is specified by using Tags and GroupOrderList.</P></TD></TR><TR><TD VALIGN="TOP"><P>HiveList</P></TD><TD VALIGN="TOP"><P>The location of the files that contain Registry information. This value should be maintained only by the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>Keyboard Layout</P></TD><TD VALIGN="TOP"><P>The DLLs for the keyboard language used as the default layout, plus a subkey named DosKeybCodes that lists the other available keyboard layouts. To set keyboard layout, use the <B>Input Locales</B> tab under the Keyboard option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>Lsa</P></TD><TD VALIGN="TOP"><P>The authentication package for the local security authority. This value should be maintained only by the system—errors can prevent anyone from being able to log on to the computer.</P></TD></TR><TR><TD VALIGN="TOP"><P>NetworkProvider</P></TD><TD VALIGN="TOP"><P>Can contain two subkeys, Active and Order, that specify the network provider and the order in which to load providers. Control settings for network providers by using the Network option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>Nls</P></TD><TD VALIGN="TOP"><P>Information on national language support in three subkeys: CodePage, Language, and OEMLocale. Set preferences about language and locale in Windows&nbsp;NT by using the Regional Settings option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>Print</P></TD><TD VALIGN="TOP"><P>Information about the current printers and printing environment, contained in several subkeys:</P>
<P>Environments, which contains subkeys defining drivers and print processors for system environments such as Windows&nbsp;NT on Digital Alpha, Windows&nbsp;NT on MIPS R<I>x</I>4000, and Windows&nbsp;NT on Intel-based computers. </P>
<P>Monitors, which can contain subkeys with data for specific network printing monitors.</P>
<P>Printers, which can contain subkeys describing printer parameters for each installed printer. </P>
<P>Providers, which can contain subkeys describing DLLs for network print services.</P>
<P>To change printing parameters, click the <B>Start</B> button, point to <B>Settings</B>, then point to the <B>Printers</B> folder.</P></TD></TR><TR><TD VALIGN="TOP"><P>PriorityControl</P></TD><TD VALIGN="TOP"><P>The Win32 priority separation. Set this value <I>only </I>by using the System option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>ProductOptions</P></TD><TD VALIGN="TOP"><P>The product type, such as Windows&nbsp;NT. These values should be maintained only by the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>Session Manager</P></TD><TD VALIGN="TOP"><P>Global variables used by Session Manager and these subkeys:</P>
<P>DOSDevices, which defines the MS-DOS devices AUX, MAILSLOT, NUL, PIPE, PRN, and UNC. </P>
<P>Environment, which defines the <B>ComSpec, Path, Os2LibPath, </B>and <B>WinDir </B>variables. To set user environment variables, in Control Panel double-click <B>System. </B>To change or add to the computer's default path, or add default system environment variables, change the values in this subkey. For more details, see Regentry.hlp, a Registry Help file on the <I>Windows&nbsp;NT Workstation Resource Kit </I>CD. </P>
<P>FileRenameOperations, which is used during startup to rename certain files so that they can be replaced. These values should be maintained only by the system.</P>
<P>KnownDLLs, which defines the directories and filenames for the Session Manager DLLs. These values should be maintained only by the system.</P>
<P>MemoryManagement, which defines paging options. Define the paging file by using the System option in Control Panel.</P>
<P>SubSystems, which defines information for the Windows&nbsp;NT subsystems. These values should be maintained only by the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>Setup</P></TD><TD VALIGN="TOP"><P>Hardware setup options. These values should be maintained only by the system. Users can make choices by running Windows&nbsp;NT Setup.</P></TD></TR><TR><TD VALIGN="TOP"><P>TimeZoneInformation</P></TD><TD VALIGN="TOP"><P>Values for time zone information. Set these values by using the Date/Time option in Control Panel.</P></TD></TR><TR><TD VALIGN="TOP"><P>VirtualDeviceDrivers</P></TD><TD VALIGN="TOP"><P>Virtual device drivers. These values should be maintained only by the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>Windows</P></TD><TD VALIGN="TOP"><P>Paths for the Windows&nbsp;NT directory and system directory. These values should be maintained only by the system.</P></TD></TR><TR><TD VALIGN="TOP"><P>WOW</P></TD><TD VALIGN="TOP"><P>Options for 16-bit Windows-based applications running under Windows&nbsp;NT. These settings should be maintained only by the system.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P></P>
<H4><A NAME="sec2"></A>Enum Subkey for All Control Sets</H4><P CLASS="t">The Enum subkey contains configuration data for hardware devices, independent of the drivers they use. </P>
<P CLASS="t">This subkey, new with Windows&nbsp;NT&nbsp;4.0, was one of several keys added to HKEY_LOCAL_MACHINE to enable Windows&nbsp;NT to access and control drivers and devices in ways similar to those used in Windows&nbsp;95. (The methods are similar—but not the same, because the architecture of Windows&nbsp;NT differs from that of Windows&nbsp;95.) </P>
<P CLASS="t">The changes reflected in these new keys prepare Windows&nbsp;NT to run the new generation of Plug and Play drivers and devices implemented in Windows&nbsp;95. Plug and Play drivers are not included in Windows&nbsp;NT&nbsp;4.0, but when the drivers become available, these changes will enable them to be implemented with fewer changes to the operating system.</P>
<P CLASS="t"><B>Warning:   </B>Do not use a Registry editor to change the data in this key. Errors in this key can prevent Windows&nbsp;NT from detecting or operating hardware devices necessary to the operation of the computer. Windows&nbsp;NT protects this key from changes by all users, including administrators. Administrators can change the permissions on the key, but this is strongly discouraged. In your applications, use the standard Device Installer or Config Manager API to change data in the Enum subkeys.</P>
<P CLASS="t">By using the Device Installer or Config Manager API, you can enable applications to modify the data in Enum subkeys without including the path name of the Registry key in the application code. The Windows&nbsp;NT Registry has a different structure than the Registry in Windows&nbsp;95. Because of this, if your application refers to this Registry key by path name, the application will not run on both Windows&nbsp;NT and Windows&nbsp;95.</P>
<P CLASS="t">In general, the Enum subkey contains configuration data for devices. The subkeys under Enum represent a device hierarchy (or tree) that starts at a tree root (the top) and ends at the lowest branch with configuration data for a specific instance of a device, such as the keyboard on the local computer. </P>
<P CLASS="t">The Enum subkey itself is merely a container. It is not associated with any value entries. There are at least two subkeys immediately under Enum: Htree represents the hardware tree; the remaining keys represent <I>enumerators</I>, the means by which Windows NT learned about a device.</P>
<P CLASS="t">The Htree\Root\0 subkey is a reserved space in the Registry that represents the root (the top) of the hardware tree.. It contains the <B>AttachedComponents</B> value entry, which lists devices rooted at the top of the hardware tree. </P>
<P CLASS="t">Figure 23.20 shows the Htree\Root\0 subkey and its <B>AttachedComponents</B> value listing.</P>
<P><img src="xwr_v24.gif"></P>
<P>Figure 23.20   AttachedComponents value listing under Htree\Root\0</P>
<P CLASS="t">The remaining subkeys immediately under Enum represent enumerators and contain the subkeys of devices that have the same enumerator. For Plug and Play devices, the enumerator is the device bus on which the device runs, such as PCI or ISAPNP. A default enumerator, Root, is used for non–Plug and Play devices (known as <I>legacy</I> devices), which are enumerated by other parts of the system.  </P>
<P CLASS="t">Figure 23.21 shows the Root enumerator of a typical computer running Windows&nbsp;NT.</P>
<P><img src="xwr_v25.gif"></P>
<P>Figure 23.21   Typical contents of a Root enumerator subkey </P>
<P CLASS="t">Each enumerator subkey, such as Root, contains subkeys that represent device types or models. The device type subkeys, in turn, contain the subkeys that represent devices of that type. The device type subkeys for each enumerator vary depending on the devices installed on the computer.</P>
<P CLASS="t">The name of each device type subkey indicates whether it is a Plug and Play device or a legacy (non–Plug and Play) device. </P>
<UL><LI>For Plug and Play devices and for all modems, the name of the device type subkey varies with the device. A modem is a special case because its driver, Modem.sys, includes some Plug and Play functionality. For example, on a computer with more than one modem, Windows&nbsp;NT can detect an individual instance of each modem even when all modems share the same driver. </LI><LI>For most legacy devices, Windows&nbsp;NT builds a device-type ID of the form LEGACY_<I>DriverName</I>. This subkey contains data for all devices controlled by that driver.</LI><LI>For legacy keyboards and mouse devices, the device type ID typically begins with *PNP followed by an alphanumeric string. The Windows&nbsp;NT drivers for keyboards and mouse devices have some limited Plug and Play functionality. For example, Windows&nbsp;NT accesses keyboards and mouse devices in some of the same ways as it accesses Plug and Play devices.</LI></UL><P></P>
<P CLASS="t">The subkeys under the device type are the device instance subkeys. These subkeys contain value entries that specify the configuration of a device. However, the device(s) to which the value entries apply depend on whether the device is a Plug and Play device or a legacy device.</P>
<UL><LI>For Plug and Play devices (including modems), each device type subkey can contain multiple device instance subkeys. The name of each device instance subkey uniquely identifies a particular device to Windows&nbsp;NT, and the value entries in the subkey apply only to that device. Because of this, users and applications can configure each instance of a device individually.</LI><LI>For legacy devices, there is only one key—0000—to represent all instances of devices on the computer that are controlled by the driver for which the subkey is named. The configuration data in this subkey applies to all of the devices; they cannot be configured separately by using Windows&nbsp;NT.</LI><LI></LI></UL><P CLASS="t">The value entries and subkeys under the device instance subkeys vary with the device and its driver. For more information, see Regentry.hlp, the Registry Help file on the <I>Windows&nbsp;NT Workstation Resource Kit</I> CD.</P>
<H4><A NAME="sec3"></A>Services Subkey for All Control Sets</H4><P CLASS="t">The Services subkey in each control set lists all device drivers, file system drivers, and Win32 service drivers that can be loaded by the Boot Loader, the I/O Manager, and the Service Control Manager. The Services subkey also contains subkeys that are static descriptions of hardware to which drivers can be attached. Table 23.7 describes some typical Services subkeys for a computer running Windows&nbsp;NT.</P>
<P CLASS="t">Entries that appear under the DeviceMap subkeys include values that refer to entries in the Services subkey in the control set. For example, for a serial mouse, the following entry might appear under the DeviceMap\PointerPort subkey in HKEY_LOCAL_MACHINE\Hardware:</P>
<P CLASS="spacing"><BR></P>
<PRE>\Device\PointerPort0 : \REGISTRY\Machine\System\ControlSet001\Services\Sermouse</PRE>
<P CLASS="t">A related Services subkey named Sermouse defines values for the serial mouse driver. Figure 23.22 shows a typical configuration of the Sermouse subkey.</P>
<P><img src="xwr_v26.gif"></P>
<P>Figure 23.22   The Sermouse subkey </P>
<P CLASS="t">To view this information in a more readable format, use Windows&nbsp;NT Diagnostics or the Control Panel.</P>
<UL><LI>To find detailed information about a driver, in Windows&nbsp;NT Diagnostics, click the <B>Services</B> tab, click the <B>Devices</B> button (in the lower right corner), then double-click the name of the device.</LI><LI>To change startup settings and other parameters for a driver, in Control Panel double-click <B>Devices</B>. </LI><LI></LI></UL><P CLASS="t">For suggestions on using the information in Windows&nbsp;NT Diagnostics and the Control Panel for troubleshooting, see Chapter&nbsp;25, "Configuration Management and the Registry." </P>
<P></P>
<P CLASS="t">Each subkey includes several standard (but optional) entries, as shown in Figure 23.23, where Alerter is the name of a Windows&nbsp;NT service.</P>
<P><img src="xwr_v27.gif"></P>
<P>Figure 23.23   Subkey for the Alerter service under Services</P>
<P CLASS="t">The value entries that govern the behavior of a service include <B>ErrorControl</B>, <B>Group</B>, <B>DependOnGroup</B>, <B>DependOnService</B>, <B>ImagePath</B>, <B>ObjectName</B>, <B>Start</B>, <B>Tag</B>, and <B>Type</B>.<B> </B>For definitions of these value entries, see Regentry.hlp, the Registry Help file on the <I>Windows&nbsp;NT Workstation Resource Kit</I> CD. </P>
<P CLASS="t">The optional Linkage subkey specifies the binding options for the driver by using the <B>Bind</B> and <B>Export</B> values.</P>
<P></P>
<P CLASS="t">The <B>OtherDependencies</B> value that appears in the Linkage subkey for some services enables nodes to be loaded in an order related to other specific nodes with which they are closely associated. For example, the NBF transport depends on an NDIS driver. Therefore, to load the NBF protocol stack successfully, an NDIS network card driver must be loaded first. For details about loading order dependencies for network components, see "Dependency Handling for Network Components," later in this chapter.</P>
<P></P>
<P CLASS="t">The Parameters subkey (optional for some Services subkeys such as an adapter entry) contains a set of values to be passed to the driver. These values vary for each device driver. Figure 23.24 shows parameters for the serial mouse driver.</P>
<P><img src="xwr_v28.gif"></P>
<P>Figure 23.24    Parameters subkey for the serial mouse driver</P>
<P CLASS="t">Because the entries in the Services list are Registry keys, no assumptions can be made about their order in an enumeration, so services can explicitly specify load ordering by grouping services and drivers in order by type. For example, the SCSI port driver can be loaded before any of the miniport drivers. The ordering is specified under the \Control\ServiceGroupOrder subkey in a control set.</P>
<P CLASS="t">Settings for the drivers that appear under the Services subkeys can be changed by using the Devices, Network, or Services options in Control Panel or, for network services, User Manager for Domains in Windows&nbsp;NT. Specific parameters for drivers and services are described in online Help for the Registry. </P>
<P CLASS="t">Table 23.7 describes typical Services subkeys for a Windows NT–based computer.</P>
<P>Table 23.7    Descriptions of Typical Services Subkeys for a Windows&nbsp;NT–Based Computer</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="90pt" VALIGN="TOP"><COL WIDTH="264pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>Service name</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Abiosdsk</P></TD><TD VALIGN="TOP"><P>Primary disk1</P></TD></TR><TR><TD VALIGN="TOP"><P>Aha<I>xxx</I></P></TD><TD VALIGN="TOP"><P>Adaptec SCSI adapters1</P></TD></TR><TR><TD VALIGN="TOP"><P>Alerter</P></TD><TD VALIGN="TOP"><P>Alerter service for the workstation3</P></TD></TR><TR><TD VALIGN="TOP"><P>AtDisk</P></TD><TD VALIGN="TOP"><P>Primary disk driver for non-SCSI hard disks1</P></TD></TR><TR><TD VALIGN="TOP"><P>Ati</P></TD><TD VALIGN="TOP"><P>ATI video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Beep</P></TD><TD VALIGN="TOP"><P>Base sound driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Browser</P></TD><TD VALIGN="TOP"><P>Computer browser used by Workstation and Server services3</P></TD></TR><TR><TD VALIGN="TOP"><P>BusLogic</P></TD><TD VALIGN="TOP"><P>BusLogic SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Busmouse</P></TD><TD VALIGN="TOP"><P>Bus mouse pointer1</P></TD></TR><TR><TD VALIGN="TOP"><P>Cdaudio</P></TD><TD VALIGN="TOP"><P>Filter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Cdfs</P></TD><TD VALIGN="TOP"><P>SCSI CD-ROM file system driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Cirrus</P></TD><TD VALIGN="TOP"><P>Cirrus Logic video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>ClipSrv</P></TD><TD VALIGN="TOP"><P>ClipBook (Network DDE service)3</P></TD></TR><TR><TD VALIGN="TOP"><P>Cpqarray</P></TD><TD VALIGN="TOP"><P>Compaq array driver (no additional Registry values)</P></TD></TR><TR><TD VALIGN="TOP"><P>Dell_DGX</P></TD><TD VALIGN="TOP"><P>Dell DGX video display1 </P></TD></TR><TR><TD VALIGN="TOP"><P>Diskperf</P></TD><TD VALIGN="TOP"><P>Disk Performance Monitoring Statistics Driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>DptScsi</P></TD><TD VALIGN="TOP"><P>DPT SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Et4000</P></TD><TD VALIGN="TOP"><P>Tseng ET4000 video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>EventLog</P></TD><TD VALIGN="TOP"><P>Event log service3</P></TD></TR><TR><TD VALIGN="TOP"><P>Fastfat</P></TD><TD VALIGN="TOP"><P>FAT file system driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Fd16_700</P></TD><TD VALIGN="TOP"><P>Future Domain MCS 600/700, TMC-7000ex, 800-series SCSI adapters1</P></TD></TR><TR><TD VALIGN="TOP"><P>Floppy</P></TD><TD VALIGN="TOP"><P>Primary disk1</P></TD></TR><TR><TD VALIGN="TOP"><P>Ftdisk</P></TD><TD VALIGN="TOP"><P>Filter1</P></TD></TR><TR><TD VALIGN="TOP"><P>i8042pt</P></TD><TD VALIGN="TOP"><P>Keyboard driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Inport</P></TD><TD VALIGN="TOP"><P>Microsoft InPort Mouse pointer1</P></TD></TR><TR><TD VALIGN="TOP"><P>Jazzg<I>xxx</I></P></TD><TD VALIGN="TOP"><P>Video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Jzvxl484</P></TD><TD VALIGN="TOP"><P>Video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Kbdclss</P></TD><TD VALIGN="TOP"><P>Keyboard class driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>LanmanServer</P></TD><TD VALIGN="TOP"><P>Server service3</P></TD></TR><TR><TD VALIGN="TOP"><P>Lanman Workstation</P></TD><TD VALIGN="TOP"><P>Workstation service3</P></TD></TR><TR><TD VALIGN="TOP"><P>Messenger</P></TD><TD VALIGN="TOP"><P>Messenger service for workstation3</P></TD></TR><TR><TD VALIGN="TOP"><P>Mouclass</P></TD><TD VALIGN="TOP"><P>Mouse class driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Mup</P></TD><TD VALIGN="TOP"><P>Network1</P></TD></TR><TR><TD VALIGN="TOP"><P>Nbf</P></TD><TD VALIGN="TOP"><P>NetBEUI transport protocol1, 2</P></TD></TR><TR><TD VALIGN="TOP"><P>Ncr<I>xxx</I></P></TD><TD VALIGN="TOP"><P>NCR SCSI controllers and adapters1</P></TD></TR><TR><TD VALIGN="TOP"><P>NetBIOS</P></TD><TD VALIGN="TOP"><P>NetBIOS transport interface1, 2</P></TD></TR><TR><TD VALIGN="TOP"><P>NetDDE et al.</P></TD><TD VALIGN="TOP"><P>Network DDE and Network DDE DSDM3</P></TD></TR><TR><TD VALIGN="TOP"><P>NetDetect</P></TD><TD VALIGN="TOP"><P>Network detection1</P></TD></TR><TR><TD VALIGN="TOP"><P>NetLogon</P></TD><TD VALIGN="TOP"><P>Network logon for workstation3</P></TD></TR><TR><TD VALIGN="TOP"><P>Ntfs</P></TD><TD VALIGN="TOP"><P>NTFS file system driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Null</P></TD><TD VALIGN="TOP"><P>Base driver for null port1</P></TD></TR><TR><TD VALIGN="TOP"><P>Oliscsi</P></TD><TD VALIGN="TOP"><P>Olivetti SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Parallel</P></TD><TD VALIGN="TOP"><P>Parallel port1</P></TD></TR><TR><TD VALIGN="TOP"><P>Qv</P></TD><TD VALIGN="TOP"><P>Qvision video display driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>RAS</P></TD><TD VALIGN="TOP"><P>Remote Access Service3</P></TD></TR><TR><TD VALIGN="TOP"><P>Rdr</P></TD><TD VALIGN="TOP"><P>Network redirector1</P></TD></TR><TR><TD VALIGN="TOP"><P>Replicator</P></TD><TD VALIGN="TOP"><P>Directory replicator for workstation and server3</P></TD></TR><TR><TD VALIGN="TOP"><P>RPCLocator</P></TD><TD VALIGN="TOP"><P>Remote Procedure Call (RPC) locator (name service provider)3</P></TD></TR><TR><TD VALIGN="TOP"><P>RPCSS</P></TD><TD VALIGN="TOP"><P>Remote Procedure Call (RPC) service3</P></TD></TR><TR><TD VALIGN="TOP"><P>S3</P></TD><TD VALIGN="TOP"><P>S3 video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Schedule</P></TD><TD VALIGN="TOP"><P>Network schedule service3</P></TD></TR><TR><TD VALIGN="TOP"><P>Scsi<I>xxxx</I></P></TD><TD VALIGN="TOP"><P>SCSI class devices, which do not add parameters to the Registry, including Scsicdrm, Scsidisk, Scsiflip, Scsiprnt, and Scsiscan</P></TD></TR><TR><TD VALIGN="TOP"><P>Serial</P></TD><TD VALIGN="TOP"><P>Serial port1</P></TD></TR><TR><TD VALIGN="TOP"><P>Sermouse</P></TD><TD VALIGN="TOP"><P>Serial mouse1</P></TD></TR><TR><TD VALIGN="TOP"><P>Sgikbmou</P></TD><TD VALIGN="TOP"><P>Silicon Graphics keyboard and mouse driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Sgirex</P></TD><TD VALIGN="TOP"><P>Silicon Graphics video display driver1</P></TD></TR><TR><TD VALIGN="TOP"><P>Simbad</P></TD><TD VALIGN="TOP"><P>Filter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Sparrow</P></TD><TD VALIGN="TOP"><P>SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Spock</P></TD><TD VALIGN="TOP"><P>SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Srv</P></TD><TD VALIGN="TOP"><P>Network server3</P></TD></TR><TR><TD VALIGN="TOP"><P>T128, T13B</P></TD><TD VALIGN="TOP"><P>Trantor SCSI adapters1</P></TD></TR><TR><TD VALIGN="TOP"><P>Trident</P></TD><TD VALIGN="TOP"><P>Trident video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>UB<I>xxx</I></P></TD><TD VALIGN="TOP"><P>Ungermann-Bass NDIS drivers1, 3</P></TD></TR><TR><TD VALIGN="TOP"><P>Ultra<I>xxx</I></P></TD><TD VALIGN="TOP"><P>UltraStore SCSI adapters1</P></TD></TR><TR><TD VALIGN="TOP"><P>UPS</P></TD><TD VALIGN="TOP"><P>Uninterruptible power supply (UPS)3, 4 </P></TD></TR><TR><TD VALIGN="TOP"><P>V7vram</P></TD><TD VALIGN="TOP"><P>Video Seven VRAM video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Vga</P></TD><TD VALIGN="TOP"><P>VGA video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Videoprt</P></TD><TD VALIGN="TOP"><P>Video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Wd33c93</P></TD><TD VALIGN="TOP"><P>Maynard SCSI adapter1</P></TD></TR><TR><TD VALIGN="TOP"><P>Wdvga</P></TD><TD VALIGN="TOP"><P>Western Digital/Paradise video display1</P></TD></TR><TR><TD VALIGN="TOP"><P>Xga</P></TD><TD VALIGN="TOP"><P>IBM XGA video display1</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P>1   Change settings for this driver by using the Devices option in Control Panel.</P>
<P>2   Change settings for this driver by using the Network option in Control Panel. </P>
<P>3   Change settings for this driver by using the Services option in Control Panel or by using Server Manager in Windows&nbsp;NT Services.</P>
<P>4   Change settings for this driver by using the UPS option in Control Panel.</P>
<P></P>
<P></P>
<H4><A NAME="sec4"></A>Hardware Profiles Subkey for All Control Sets</H4><P CLASS="t">The Hardware Profiles subkey in each control set contains the configuration data for all hardware profiles in a Windows&nbsp;NT–based system. This subkey is new to Windows&nbsp;NT&nbsp;4.0. </P>
<P CLASS="t">A <I>hardware profile</I> is a set of changes to the standard configuration of devices and services (including drivers and Win32 services) loaded by Windows&nbsp;NT when the system starts. For example, a hardware profile can include an instruction to disable (that is, not load) a driver, or an instruction to Windows&nbsp;NT to not connect an undocked laptop computer to the network. Because of the instructions in this subkey, users can modify the service configuration for a particular use while preserving the standard configuration unchanged for more general uses. </P>
<P CLASS="t">Windows&nbsp;NT creates a default hardware profile (called Original Configuration). But users can create multiple hardware profiles and, when Windows&nbsp;NT starts, select from  them the settings they want . </P>
<P CLASS="t">To create hardware profiles, use the System, Services, and Devices options in Control Panel. For more information on creating hardware profiles, double-click <B>System</B> in Control Panel, click the <B>Hardward Profiles</B> tab and open Help.</P>
<P CLASS="t">Figure 23.25 shows the Hardware Profiles subkey under CurrentControlSet.</P>
<P><img src="xwr_v29.gif"></P>
<P>Figure 23.25   The Hardware Profiles subkey for CurrentControlSet</P>
<P CLASS="t">Each numbered subkey under Hardware Profiles contains the configuration data for one hardware profile on the system. If there is more than one hardware profile, the system identifies a subkey as current when the user chooses it during startup. The Current subkey is a symbolic link to one of the numbered subkeys. </P>
<P CLASS="t">The HKEY_CURRENT_CONFIG subtree is an alias pointing to the Hardware Profiles\Current subkey of CurrentControlSet; the contents of the Current subkey appear in the HKEY_CURRENT_CONFIG subtree.</P>
<P></P>
<P CLASS="t"><B>Tip</B></P>
<P>To determine which numbered subkey under Hardware Profiles represents the current hardware profile, see HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\IDConfigDB subkey. The value of <B>CurrentConfig</B> in the IDConfigDB subkey corresponds to the number of the subkey that contains the current hardware profile.</P>
<P></P>
<P CLASS="t">The data in each hardware profile subkey consists of profile-specific modifications to the standard service configuration. Only data that has been changed from the standard configuration is stored there, but organized in the same structure as the standard configuration. The standard configuration is defined by data stored throughout the Software and System subkeys of HKEY_LOCAL_MACHINE. Hence, the structure of a hardware profile is modeled on the structure of HKEY_LOCAL_MACHINE and can be thought of as a limited or condensed version of HKEY_LOCAL_MACHINE . </P>
<P CLASS="t">Figure 23.26 demonstrates the similar structures of HKEY_LOCAL_MACHINE and the subkeys under Hardware Profiles\0001.</P>
<P><img src="xwr_v30.gif"></P>
<P>Figure 23.26   HKEY_LOCAL_MACHINE and Hardware Profiles\0001 subkeys</P>
<P CLASS="t">When a hardware profile specifies a change to a value entry in the Software or System subkeys of HKEY_LOCAL_MACHINE, the original value in the Software or System subkey is not changed; instead that change is stored in the analogous subkey of Hardware Profiles\<I>Number</I>.</P>
<P CLASS="t">For example, if a user creates a hardware profile in which the Diskperf driver (which collects performance statistics for disks) is not loaded, the HKEY_LOCAL_MACHINE\System\CurrentControlSet\Enum\Root\LEGACY_DISPERF subkey is not changed. Instead, the change is stored in HKEY_LOCAL_MACHINE \System\CurrentControlSet\Hardware Profiles\<I>Number</I>\System\CurrentControlSet\Enum\Root\LEGACY_DISPERF.</P>
<P CLASS="t">The subkeys of a hardware profile store the same kind of information as their counterparts in the Software and System subkeys of HKEY_LOCAL_MACHINE, but the hardware profile subkeys store <I>changes only</I>. This means that the driver, service, and device settings loaded when a hardware profile is chosen consist of those specified in the Software and System subkeys of HKEY_LOCAL_MACHINE, as modified by the data in the Software and System subkeys of the hardware profile.</P>
<P CLASS="t">For information about the subkeys of a hardware profile, see the descriptions of their analogs in the Software and System subkeys of HKEY_LOCAL_MACHINE. For information about the value entries in these subkeys, see Regentry.hlp, the Registry Help file on the <I>Windows&nbsp;NT Workstation Resource Kit</I> CD.</P>
<H4><A NAME="sec5"></A>Setup Subkey</H4><P CLASS="t">The Setup subkey under HKEY_LOCAL_MACHINE\System is used internally by Windows&nbsp;NT for the Setup program. Do not change these value entries. These settings should be maintained only by the system.</P></BODY></HTML>
