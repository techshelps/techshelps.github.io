<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Problem Occurs Before the Boot Loader Starts</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Problem Occurs Before the Boot Loader Starts</H3><P CLASS="t">This section describes the problems that might occur between the time you turn the computer on until you see the boot loader screen.</P>
<P CLASS="t">Symptoms of problems in this group are:</P>
<UL><LI>The computer hangs immediately after the Power On Self Test (POST). </LI></UL><UL><LI>You do not see the boot loader screen.</LI></UL><UL><LI>You receive messages such as:</LI></UL><UL><LI>Missing operating system.</LI></UL><UL><LI>A disk read error occurred.</LI></UL><UL><LI>Insert a system diskette and restart the system.</LI></UL><UL><LI>Invalid Partition Table. </LI></UL><UL><LI>Hard Disk Error.</LI></UL><UL><LI>Hard Disk Absent/Failed.</LI></UL><P></P>
<P CLASS="t">It is possible that you will not be able to start your computer to troubleshoot the problem. If all of your volumes are NTFS, using MS-DOS-based utilities will not do much good. If you have created a Windows&nbsp;NT startup floppy disk, as described in Chapter 20, "Preparing for and Performing Recovery," you can trying using that disk. If you cannot start the computer by using your Windows&nbsp;NT startup floppy disk, and repairing your system by using the Emergency Repair Disk does not fix the problem, you can try removing it from the computer and installing it as a second disk on another Windows&nbsp;NT computer. You can then use Windows&nbsp;NT-based utilities for troubleshooting.</P>
<P CLASS="t"><B>Caution   </B>Moving disks between computers is not supported because of problems that can arise when the disk controllers on the two systems are incompatible or are configured differently. However, if your two computers are configured the same, you might be able to identify and correct the problem.</P>
<P CLASS="t">The problem could be one of the following: </P>
<UL><LI>There is no system partition on the first hard disk.</LI></UL><UL><LI>The Master Boot Record is corrupt. </LI></UL><UL><LI>The Partition Boot Sector is corrupt.</LI></UL><UL><LI>The Boot.ini file is missing.</LI></UL><UL><LI>The Windows&nbsp;NT boot loader, NTLDR, is missing or corrupt.</LI></UL><UL><LI>The Complementary Metal Oxide Semiconductor (CMOS) is corrupt, or the CMOS battery is run down.</LI></UL><UL><LI>Hardware has malfunctioned.</LI></UL><P></P>
<H4><A NAME="sec0"></A>Troubleshooting System Partition Problems</H4><P CLASS="t">When you startup from the hard disk on x86-based computers, the system BIOS code identifies the startup disk (usually disk 0), and reads the Master Boot Record. The code in the Master Boot Record searches for a system partition on the hard disk. If it cannot find such a system partition, or cannot start Windows&nbsp;NT from it, the startup process stops. If you get an error message such as "Error loading operating system," then the Master Boot Record code found a system partition, but could not start the operating system.</P>
<P CLASS="t">It is possible that there is no system partition on the hard disk from which you want to startup the computer. You might also have the wrong partition identified as the system partition. You can use the MS-DOS-based utility Fdisk to look at the partition information. For information about other utilities that have similar functionality, see Chapter 22, "Disk, File System, and Backup Utilities."</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>The system partition is the primary partition on the startup disk (usually disk 0) that has the Boot Indicator field set to 0x80. It contains the files that are needed to load Windows&nbsp;NT, such as Boot.ini and NTLDR. </P>
<P>Fdisk refers to the system partition as the active partition.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec1"></A>To use Fdisk to check for and set the system partition</H5><P>    1.    Start MS-DOS, or start from an MS-DOS startup floppy disk that contains the Fdisk utility. Type <B>fdisk</B>. </P>
<P>Fdisk displays the following message if there is no system partition on your first hard disk:</P>
<P CLASS="spacing"><BR></P>
<PRE><B>WARNING!</B>  No partitions are set active - disk 1 is not startable unless a partition is set active.
</PRE>
<P>    2.    The FDISK Options screen has several choices. The cursor will be on "Enter choice." Type 2 (<B>Set Active partition</B>). Fdisk displays information about the partitions on the hard disk. One partition should have an <B>A</B> in the <B>Status</B> column, which indicates it is the (active) system partition.</P>
<P>    3.    If there is no system partition, or the wrong partition is set as the system partition, enter the number of the partition that contains the files to use when loading the operating system. Fdisk displays the message "Partition X made active," where X is the partition number you entered.</P>
<P>    4.    Press Esc to return to the <B>FDISK Options</B> screen, and press Esc again to exit Fdisk. You can now restart the computer. Be sure to remove the floppy disk.</P>
<P></P>
<P CLASS="t">Not all computers should be set to start from the first partition. For instance, you can configure multiple partitions and install different operating systems on each partition. Some computers have EISA configuration partitions, and normally start from the second physical partition. For example, many Compaq computers are configured this way. However, the system partition should always be on your first physical hard disk.</P>
<H4><A NAME="sec2"></A>Troubleshooting Master Boot Record Problems</H4><P CLASS="t">This section describes troubleshooting Master Boot Record problems. The section titled "Master Boot Record," in Chapter 17, "Disk and File System Basics," contains details about the Master Boot Record.</P>
<P CLASS="t">The functions of the Master Boot Record code are to:</P>
<UL><LI>Read the Partition Table entries in the same sector.</LI></UL><UL><LI>Determine the location of the Partition Boot Sector.</LI></UL><UL><LI>Load and execute the code in the Partition Boot Sector.</LI></UL><P></P>
<P CLASS="t">If the executable code in the Master Boot Record does not do these functions, it displays one of these error messages:</P>
<UL><LI><B>Missing operating system.</B></LI></UL><UL><LI><B>Invalid Partition Table.</B></LI></UL><P></P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>There is a Master Boot Record on each hard disk. However, only the Master Boot Record on the first hard disk is used in starting Windows&nbsp;NT. </P>
<P></P>
<P CLASS="t">Use DiskProbe or an MS-DOS-based utility to display the Master Boot Record. The example here shows what you should see at Cylinder 0, Side 0, Sector 1, which is the location for the Master Boot Record. This example shows the executable code in a Master Boot Record. This example might not match the code in the Master Boot Record on your computer, because some third-party boot and disk partitioning utilities modify the code in the Master Boot Record.</P>
<P CLASS="spacing"><BR></P>
<PRE>Physical Sector: Cyl 0, Side 0, Sector 1     
00000000: 00 33 C0 8E D0 BC 00 7C  - 8B F4 50 07 50 1F FB FC   .3.....|..P.P..
00000010: BF 00 06 B9 00 01 F2 A5  - EA 1D 06 00 00 BE BE 07   ................
00000020: B3 04 80 3C 80 74 0E 80  - 3C 00 75 1C 83 C6 10 FE   ...&lt;.t..&lt;.u.....
00000030: CB 75 EF CD 18 8B 14 8B  - 4C 02 8B EE 83 C6 10 FE   .u......L.......
00000040: CB 74 1A 80 3C 00 74 F4  - BE 8B 06 AC 3C 00 74 0B   .t..&lt;.t.....&lt;.t.
00000050: 56 BB 07 00 B4 0E CD 10  - 5E EB F0 EB FE BF 05 00   V.......^.......
00000060: BB 00 7C B8 01 02 57 CD  - 13 5F 73 0C 33 C0 CD 13   ..|...W.._s.3...
00000070: 4F 75 ED BE A3 06 EB D3  - BE C2 06 BF FE 7D 81 3D   Ou...........}.=
00000080: 55 AA 75 C7 8B F5 EA 00  - 7C 00 00 49 6E 76 61 6C   U.u.....|..Inval
00000090: 69 64 20 70 61 72 74 69  - 74 69 6F 6E 20 74 61 62   id partition tab
000000A0: 6C 65 00 45 72 72 6F 72  - 20 6C 6F 61 64 69 6E 67   le.Error loading
000000B0: 20 6F 70 65 72 61 74 69  - 6E 67 20 73 79 73 74 65    operating syste
000000C0: 6D 00 4D 69 73 73 69 6E  - 67 20 6F 70 65 72 61 74   m.Missing operat
000000D0: 69 6E 67 20 73 79 73 74  - 65 6D 00 00 80 45 14 15   ing system...E..
000000E0: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
000000F0: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000100: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000110: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000120: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000130: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000140: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000150: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000160: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000170: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000180: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
00000190: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
000001A0: 00 00 00 00 00 00 00 00  - 00 00 00 00 00 00 00 00   ................
000001B0: 00 00 00 00 00 00 00 00  - FD 4E F2 14 00 00 80 01   .........N......
000001C0: 01 00 06 0F 7F 96 3F 00  - 00 00 51 42 06 00 00 00   .....?...QB....
000001D0: 41 97 07 0F FF 2C 90 42  - 06 00 A0 3E 06 00 00 00   A....,.B...&gt;....
000001E0: C1 2D 05 0F FF 92 30 81  - 0C 00 A0 91 01 00 00 00   .-....0.........
000001F0: C1 93 01 0F FF A6 D0 12  - 0E 00 C0 4E 00 00 55 AA   ...........N..U.
</PRE>
<P CLASS="t">There are two things that you can check in the Master Boot Record:</P>
<UL><LI>The error message text should be as shown in the example.</LI></UL><UL><LI>There should be only zeroes between the text "Missing operating system" and location hex 1B8. </LI></UL><P></P>
<P CLASS="t">A disk signature might or might not be present starting at location 1B8. Having no disk signature does not necessarily indicate a problem.</P>
<H5 CLASS="h4"><A NAME="sec3"></A>To use DiskProbe to display the Master Boot Record </H5><P>    1.    Click the DiskProbe icon in the Resource Kit folder.</P>
<P>    2.    On the <B>Drives</B> menu, click <B>Physical Drive</B>. The <B>Available Physical Drives</B> are listed as PhysicalDrive<I>x</I>, where x=0 for the first hard disk. Double click the disk that contains the Master Boot Record used to start the computer. In the case of an x86-based computer, this disk is usually PhysicalDrive0.</P>
<P>    3.    In the <B>Handle 0</B> group box, click <B>Set Active</B>. Click <B>OK</B>.</P>
<P>    4.    On the <B>Sectors</B> menu, click <B>Read</B>. Set <B>Starting Sector</B> to 0 and <B>Number of Sectors</B> to 1. Click <B>Read</B>.</P>
<P></P>
<H4><A NAME="sec4"></A>Troubleshooting Partition Boot Sector Problems</H4><P CLASS="t">Several known viruses can cause problems with the Partition Boot Sector, even if the volume is formatted with the NTFS file system. Infection can occur by running an MS-DOS-based program from either a floppy disk or by starting up MS-DOS on a dual-boot computer. Most viruses use BIOS INT 13 calls to transfer themselves to an absolute sector on the disk. Windows&nbsp;NT cannot protect itself from this type of infection when it is not running. </P>
<P CLASS="t">In some cases, the damage to the Partition Boot Sector can cause the computer to stop after displaying a blue screen with the message STOP 0x0000007B INACCESSIBLE_BOOT_DEVICE. Another symptom of a Partition Boot Sector problem is that the computer stops before displaying any messages, and the screen remains black. </P>
<H5 CLASS="h4"><A NAME="sec5"></A>To use DiskProbe to display the Partition Boot Sector </H5><P>    1.    Use the DiskProbe procedure in "Troubleshooting Master Boot Record Problems," presented earlier in this chapter, to read the Master Boot Record, which contains the Partition Table.</P>
<P>    2.    On the <B>View</B> menu, click <B>Partition table</B>. In the <B>Partition table index</B> list box, double click the partition number whose Partition Boot Sector you want to read.</P>
<P>    3.    Click the <B>Go</B> button next to <B>Relative Sector</B>. </P>
<P>    4.    On the <B>View</B> menu, click <B>Bytes</B> to see a display of the Partition Boot Sector in hex. Otherwise, click <B>NTFS BootSector</B> or <B>FAT BootSector</B> to see a formatted display of the information. </P>
<P></P>
<P CLASS="t">Because the Partition Boot Sector contains several fields that are computer-specific, every byte in your Partition Boot Sector will not be identical to the information shown in the examples here. The following information should be the same:</P>
<UL><LI>The first three bytes should be the jump instruction.</LI></UL><UL><LI>The next 11 bytes should be the OEM header string.</LI></UL><UL><LI>There should be error message text toward the end of the sector. </LI></UL><P></P>
<P CLASS="t">These examples show portions of the Partition Boot Sector that should be the same or contain similar text on all computers. The first example is for a FAT volume, the second one is for an NTFS volume formatted when running Windows&nbsp;NT 3.5, and the third one is for an NTFS volume formatted when running Windows&nbsp;NT 4.0.</P>
<P CLASS="spacing"><BR></P>
<PRE>00000000: EB 3C 90 4D 53 44 4F 53 - 35 2E 30 00 02 08 01 00   .&lt;.MSDOS5.0.....
00000180: 90 A2 07 02 F8 CB 42 4F - 4F 54 3A 20 43 6F 75 6C   ......BOOT: Coul
00000190: 64 6E 27 74 20 66 69 6E - 64 20 4E 54 4C 44 52 0D   dn't find NTLDR.
000001A0: 0A 00 42 4F 4F 54 3A 20 - 49 2F 4F 20 65 72 72 6F   ..BOOT: I/O erro
000001B0: 72 20 72 65 61 64 69 6E - 67 20 64 69 73 6B 0D 0A   r reading disk..
000001C0: 00 50 6C 65 61 73 65 20 - 69 6E 73 65 72 74 20 61   .Please insert a
000001D0: 6E 6F 74 68 65 72 20 64 - 69 73 6B 00 4E 54 4C 44   nother disk.NTLD
000001E0: 52 20 20 20 20 20 20 00 - 00 00 00 00 00 00 00 00   R      .........
000001F0: 00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 55 AA   ..............U.

00000000: EB 5B 00 4E 54 46 53 20 - 20 20 20 00 02 01 00 00   .[.NTFS    .....
00000130: F2 C3 1D 00 41 20 64 69 - 73 6B 20 72 65 61 64 20   ....A disk read 
00000140: 65 72 72 6F 72 20 6F 63 - 63 75 72 72 65 64 2E 0D   error occurred..
00000150: 0A 00 29 00 41 20 6B 65 - 72 6E 65 6C 20 66 69 6C   ..).A kernel fil
00000160: 65 20 69 73 20 6D 69 73 - 73 69 6E 67 20 66 72 6F   e is missing fro
00000170: 6D 20 74 68 65 20 64 69 - 73 6B 2E 0D 0A 00 25 00   m the disk....%.
00000180: 41 20 6B 65 72 6E 65 6C - 20 66 69 6C 65 20 69 73   A kernel file is
00000190: 20 74 6F 6F 20 64 69 73 - 63 6F 6E 74 69 67 75 6F    too discontiguo
000001A0: 75 73 2E 0D 0A 00 33 00 - 49 6E 73 65 72 74 20 61   us....3.Insert a
000001B0: 20 73 79 73 74 65 6D 20 - 64 69 73 6B 65 74 74 65    system diskette
000001C0: 20 61 6E 64 20 72 65 73 - 74 61 72 74 0D 0A 74 68    and restart..th
000001D0: 65 20 73 79 73 74 65 6D - 2E 0D 0A 00 00 00 00 00   e system........
000001E0: 00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00   ................
000001F0: 00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 55 AA   ..............U.

00000000: EB 5B 90 4E 54 46 53 20  - 20 20 20 00 02 01 00 00   .[.NTFS    .....
00000130: 07 00 CD 10 EB F2 C3 1D  - 00 41 20 64 69 73 6B 20   .........A disk 
00000140: 72 65 61 64 20 65 72 72  - 6F 72 20 6F 63 63 75 72   read error occur
00000150: 72 65 64 2E 0D 0A 00 29  - 00 41 20 6B 65 72 6E 65   red....).A kerne
00000160: 6C 20 66 69 6C 65 20 69  - 73 20 6D 69 73 73 69 6E   l file is missin
00000170: 67 20 66 72 6F 6D 20 74  - 68 65 20 64 69 73 6B 2E   g from the disk.
00000180: 0D 0A 00 25 00 41 20 6B  - 65 72 6E 65 6C 20 66 69   ...%.A kernel fi
00000190: 6C 65 20 69 73 20 74 6F  - 6F 20 64 69 73 63 6F 6E   le is too discon
000001A0: 74 69 67 75 6F 75 73 2E  - 0D 0A 00 33 00 49 6E 73   tiguous....3.Ins
000001B0: 65 72 74 20 61 20 73 79  - 73 74 65 6D 20 64 69 73   ert a system dis
000001C0: 6B 65 74 74 65 20 61 6E  - 64 20 72 65 73 74 61 72   kette and restar
000001D0: 74 0D 0A 74 68 65 20 73  - 79 73 74 65 6D 2E 0D 0A   t..the system...
000001E0: 00 17 00 5C 4E 54 4C 44  - 52 20 69 73 20 63 6F 6D   ...\NTLDR is com
000001F0: 70 72 65 73 73 65 64 2E  - 0D 0A 00 00 00 00 55 AA   pressed.......U.</PRE>
<P CLASS="t">Although other corruption problems are possible, if any of the strings are incorrect or missing, you should assume the sector is corrupt.</P>
<P CLASS="t">Even if there is no obvious damage, the Partition Boot Sector might not be working correctly. One way to check for this problem is to change the name of NTLDR to anything else and restart Windows&nbsp;NT from the hard disk.</P>
<P CLASS="t">You should see this error message on a FAT primary partition:</P>
<P CLASS="spacing"><BR></P>
<PRE>Couldn't find NTLDR.
</PRE>
<P CLASS="t">You should see this error message on an NTFS primary partition:</P>
<P CLASS="spacing"><BR></P>
<PRE>A kernel file is missing from the disk.
</PRE>
<P CLASS="t">These errors indicate that the Partition Boot Sector is okay and that the problem is with a corrupt NTLDR file. In this case, see "Replacing Windows&nbsp;NT Files on the System Partition" in Chapter 20, "Preparing For and Performing Recovery," for information about replacing NTLDR. </P>
<P CLASS="t">If you don't get this error message, then the problem is probably a corrupt Partition Boot Sector. To replace the sector, see "Replacing the Partition Boot Sector," in Chapter 20, "Preparing for and Performing Recovery." Be sure to change the name back to NTLDR so that the Partition Boot Sector can find it again.</P>
<P CLASS="t">NTLDR usually has the Hidden, System, and Read Only attributes set. Because you cannot start Windows&nbsp;NT when the Partition Boot Sector on the boot partition is corrupt, you can start the MS-DOS operating system from the MS-DOS startup floppy disk to change the attributes. To change the attributes by using the MS-DOS attribute command, enter:</P>
<P CLASS="spacing"><BR></P>
<PRE>attrib -s -h -r ntldr
</PRE>
<H4><A NAME="sec6"></A>CMOS Problems</H4><P CLASS="t">The CMOS typically stores information about the following:</P>
<UL><LI>Time and date</LI></UL><UL><LI>Floppy disks</LI></UL><UL><LI>Video type</LI></UL><UL><LI>Hard disks</LI></UL><UL><LI>Memory installed</LI></UL><P></P>
<P CLASS="t">Each manufacturer and BIOS vendor can decide what a user should be able to configure, and what the standard configuration is. You can access the CMOS through either a utility or a keyboard sequence, depending on the manufacturer. You should write down or use a utility to print all of the CMOS information.</P>
<P CLASS="t">The computer uses the CMOS checksum to determine if any CMOS values have been changed other than by using the CMOS Setup program. If the checksum is not correct, the computer will not start. </P>
<P CLASS="t">Once the CMOS is correctly configured, CMOS problems are usually caused by one of the following:</P>
<UL><LI>A weak battery, which can happen if the computer has not been powered on for a long time.</LI></UL><UL><LI>The connection between the CMOS and the battery is loose or faulty.</LI></UL><UL><LI>The CMOS has been damaged from static electric discharge.</LI></UL><P></P>
<P CLASS="t">All of these problems can result in information in the CMOS being set to zero or otherwise corrupt, thus halting the startup.</P>
<H4><A NAME="sec7"></A>Hardware Problems</H4><P CLASS="t">If a device fails to initialize during POST, there can be a problem with accessing it. If you have changed or added a device since the last startup, the problem might be with the new configuration. </P>
<P CLASS="t">If you have changed your disk configuration, you should check that:</P>
<UL><LI>SCSI devices are terminated properly.</LI></UL><UL><LI>The BIOS is enabled on only the first SCSI controller (if at all). See "Understanding ARC Pathnames" in Chapter 20, "Preparing For and Performing Recovery," for information about whether the controller BIOS should be enabled.</LI></UL><UL><LI>There are no IRQ conflicts.</LI></UL><P> </P>
<P CLASS="t">If you have not made any changes, check that:</P>
<UL><LI>Controller cards are seated properly.</LI></UL><UL><LI>Cables are properly connected.</LI></UL><UL><LI>Disks are all powered up.</LI></UL><P></P>
<P CLASS="t">Chapter 36, "General Troubleshooting," discusses hardware problems. The Knowledge Base also contains information about troubleshooting these kinds of problems. </P></BODY></HTML>
