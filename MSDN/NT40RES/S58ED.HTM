<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Scheduling and Priorities</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Scheduling and Priorities</H3><P CLASS="t">The Microkernel schedules ready threads for processor time based upon their <I>dynamic priority</I>, a number from 1 to 31 which represents the importance of the task. The highest priority thread always runs on the processor, even if this requires that a lower-priority thread be interrupted. In Windows NT, priorities are organized in a hierarchy. Each level of the priority hierarchy establishes a range within which the lower level priorities can vary:</P>
<UL><LI>The base priority class of a process establishes a range for the base priority of the process and of its threads. In Windows NT 4.0, the base priority classes are Idle, Normal, High, and Real-Time, each representing a numeric range of base priorities that sometimes overlap at the extremes. The base priority class is set in the application code. The operating system does not change the base priority class, but it does vary the base priority within the class to improve the response of processes to the user.</LI></UL><UL><LI>The base priority of a process varies within the range established by its base priority class. When a user interacts with a process (the process window is at the top of the window stack), Windows NT boosts the base priority of the process to maximize its response.</LI><LI>The base priority of a thread is a function of the base priority of the process in which it runs. Except for Idle and Real-Time threads, the base priority of a thread varies only within +/–2 from the base priority of its process.</LI><LI>The dynamic priority of a thread is a function of its base priority. Windows NT continually adjusts the dynamic priority of threads within the range established by its base priority. This helps to optimize the system's response to users and to balance the needs of system services and other lower priority processes to run, however briefly.</LI></UL><P></P>
<P CLASS="t"><B>Tip</B></P>
<P>You can change the base priority class of a process while it is running by using Task Manager and other tools. These changes are effective only as long as the process runs. When it is restarted, it reverts to its original base priority class. You can also adjust the amount by which the base priority foreground processes (those the user is interacting with) is boosted by using the Control Panel systems applet Performance tab. (Right-click My Computer, select Properties, then select the Performance tab.) For more information, see "Measuring and Tuning Priority" in Chapter 13, "Detecting Processor Bottlenecks."</P>
<P></P>
<P CLASS="t">Most applications started by users run at Normal priority. Table 5.1 lists the Windows&nbsp;NT thread priority classes and priorities. The higher the base number, the higher the priority.</P>
<P>Table 5.1    Thread Priorities in Windows&nbsp;NT</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="55pt" VALIGN="TOP"><COL WIDTH="156pt" VALIGN="TOP"><COL WIDTH="138pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="th"><B>Base</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Priority class</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Thread priority</B></P></TD></TR><TR><TD VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>31</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Time critical</P></TD></TR><TR><TD VALIGN="TOP"><P>26</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Highest</P></TD></TR><TR><TD VALIGN="TOP"><P>25</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Above normal</P></TD></TR><TR><TD VALIGN="TOP"><P>24</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Normal</P></TD></TR><TR><TD VALIGN="TOP"><P>23</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Below normal</P></TD></TR><TR><TD VALIGN="TOP"><P>22</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Lowest</P></TD></TR><TR><TD VALIGN="TOP"><P>16</P></TD><TD VALIGN="TOP"><P>Real-time </P></TD><TD VALIGN="TOP"><P>Idle</P></TD></TR><TR><TD VALIGN="TOP"><P>15</P></TD><TD VALIGN="TOP"><P>Idle, Normal, or High </P></TD><TD VALIGN="TOP"><P>Time critical</P></TD></TR><TR><TD VALIGN="TOP"><P>15</P></TD><TD VALIGN="TOP"><P>High </P></TD><TD VALIGN="TOP"><P>Highest</P></TD></TR><TR><TD VALIGN="TOP"><P>14</P></TD><TD VALIGN="TOP"><P>High </P></TD><TD VALIGN="TOP"><P>Above normal</P></TD></TR><TR><TD VALIGN="TOP"><P>13</P></TD><TD VALIGN="TOP"><P>High </P></TD><TD VALIGN="TOP"><P>Normal</P></TD></TR><TR><TD VALIGN="TOP"><P>12</P></TD><TD VALIGN="TOP"><P>High </P></TD><TD VALIGN="TOP"><P>Below normal</P></TD></TR><TR><TD VALIGN="TOP"><P>11</P></TD><TD VALIGN="TOP"><P>High </P></TD><TD VALIGN="TOP"><P>Lowest</P></TD></TR><TR><TD VALIGN="TOP"><P>10</P></TD><TD VALIGN="TOP"><P>Normal </P></TD><TD VALIGN="TOP"><P>Highest</P></TD></TR><TR><TD VALIGN="TOP"><P>9</P></TD><TD VALIGN="TOP"><P>Normal </P></TD><TD VALIGN="TOP"><P>Above normal</P></TD></TR><TR><TD VALIGN="TOP"><P>8</P></TD><TD VALIGN="TOP"><P>Normal </P></TD><TD VALIGN="TOP"><P>Normal</P></TD></TR><TR><TD VALIGN="TOP"><P>7</P></TD><TD VALIGN="TOP"><P>Normal </P></TD><TD VALIGN="TOP"><P>Below normal</P></TD></TR><TR><TD VALIGN="TOP"><P>6</P></TD><TD VALIGN="TOP"><P>Normal</P></TD><TD VALIGN="TOP"><P>Lowest</P></TD></TR><TR><TD VALIGN="TOP"><P>6</P></TD><TD VALIGN="TOP"><P>Idle </P></TD><TD VALIGN="TOP"><P>Highest</P></TD></TR><TR><TD VALIGN="TOP"><P>5</P></TD><TD VALIGN="TOP"><P>Idle </P></TD><TD VALIGN="TOP"><P>Above Normal</P></TD></TR><TR><TD VALIGN="TOP"><P>4</P></TD><TD VALIGN="TOP"><P>Idle </P></TD><TD VALIGN="TOP"><P>Normal</P></TD></TR><TR><TD VALIGN="TOP"><P>3</P></TD><TD VALIGN="TOP"><P>Idle </P></TD><TD VALIGN="TOP"><P>Below normal</P></TD></TR><TR><TD VALIGN="TOP"><P>2</P></TD><TD VALIGN="TOP"><P>Idle </P></TD><TD VALIGN="TOP"><P>Lowest</P></TD></TR><TR><TD VALIGN="TOP"><P>1</P></TD><TD VALIGN="TOP"><P>Idle, Normal, or High </P></TD><TD VALIGN="TOP"><P>Idle</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">Several tools can help you monitor process and thread priority: two are  Performance Monitor and Task Manager, which are built into Windows&nbsp;NT&nbsp;4.0. See Part 3, "Optimizing Windows NT Workstation," for more information.</P></BODY></HTML>
