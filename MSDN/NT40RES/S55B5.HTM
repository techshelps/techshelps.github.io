<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Random vs. Sequential Writing</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>Random vs. Sequential Writing</H2><P CLASS="t">Seek operations affect writing to disk as well as reading from it. Use the following  counters to measure and compare the effects of writing sequential records to writing randomly throughout the disk:</P>
<UL><LI>Logical Disk: Avg. Disk Bytes/Write</LI></UL><UL><LI>Logical Disk: Avg. Disk sec/Write</LI></UL><UL><LI>Logical Disk: Disk Write Bytes/sec </LI></UL><UL><LI>Logical Disk: Disk Writes/sec</LI></UL><P></P>
<P CLASS="t">Remember to defragment your disk before testing. If your disk is nearly full, the remaining free space is likely to be fragmented, and the disk must seek to find each sector of free space. The efficiencies won by writing sequential records will be lost in the added seek time.</P>
<P CLASS="t">The following figure compares random to sequential writing on the same disk. In the top graph, the disk is writing 64K records randomly throughout a 60 MB file. In the bottom graph, the same disk is writing the same size records to the same size file, but is writing sequentially. In both cases, Performance Monitor is logging to a different partition on the same physical disk.</P>
<P><img src="xwr_n16.gif"></P>
<P CLASS="t">In both graphs, the white line is Disk Writes/sec, the thick, black line is Avg. Disk Bytes/Write, the gray line is Disk Write Bytes/sec, and the thin, black line near the bottom is Avg. Disk sec/Write. </P>
<P CLASS="t">The pattern of seek and read that was evident on the graph of random reading does not appear in this graph of random writing. In fact, the shapes of the random and sequential writing counter curves are quite similar, but their values are very different. Disk Writes/sec and Disk Write Bytes/sec are both 50% higher on the sequential writing test, an even greater effect than on the reading test.</P>
<P CLASS="t">The following comparison of reports makes this more evident. The top report is of the random writing test; the bottom report is of the sequential writing test.</P>
<P><img src="xwr_n17.gif"></P>
<P CLASS="t">When writing throughout the disk, the transfer rate, as measured by Disk Writes/sec, drops from 96.335/sec to 62.703/sec on average. Disk Write Bytes/sec drops also by one-third, from  6.3 MB/sec to 4.0 MB on average.</P></BODY></HTML>
