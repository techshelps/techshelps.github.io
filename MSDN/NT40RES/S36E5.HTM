<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Monitoring MS-DOS Applications</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Monitoring MS-DOS Applications</H3><P CLASS="t">In Windows&nbsp;NT&nbsp;4.0, each MS-DOS application runs in its own NTVDM process, eliminating some of the problems encountered in Win16 applications. Unfortunately, all of the NTVDM processes are called Ndvdm.exe by default, but you can change that.</P>
<H4><A NAME="sec0"></A>To create a new process name for an NTVDM</H4><OL><LI>Copy Ntvdm.exe to a file with a different name.</LI></OL><OL start=2><LI>Edit the Registry by using a Registry editor. Regedt32.exe and Regedit.exe are installed when you install Windows&nbsp;NT.</LI></OL><P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="80pt" VALIGN="TOP"><COL WIDTH="253pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Subtree</P></TD><TD VALIGN="TOP"><P>HKEY_LOCAL_MACHINE</P></TD></TR><TR><TD VALIGN="TOP"><P>Key</P></TD><TD VALIGN="TOP"><P>\System\CurrentControlSet\Control\WOW</P></TD></TR><TR><TD VALIGN="TOP"><P>Name</P></TD><TD VALIGN="TOP"><P>cmdline</P></TD></TR><TR><TD VALIGN="TOP"><P>Type</P></TD><TD VALIGN="TOP"><P>REG_DWORD</P></TD></TR><TR><TD VALIGN="TOP"><P>Values</P></TD><TD VALIGN="TOP"><P>%SystemRoot%\system32\ntvdm.exe</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<OL start=3><LI>Double-click the <B>cmdline</B> value entry to change <B>ntvdm.exe</B> to the name of your copy of Ntvdm.exe. When you start an MS-DOS application, it will run in a process with that name.</LI></OL><P><img src="xwr_h11.gif"></P>
<P></P>
<P CLASS="t"><B>Tip</B></P>
<P>You don't have to restart the computer for the registry change to take effect. Thus, you can change the registry between starting different DOS applications and have each start in a uniquely named process. It is also prudent to set it back to Ntvdm.exe when you are finished.</P>
<P></P>
<P CLASS="t">Unfortunately, this doesn't work with 16-bit Windows applications, so you need to distinguish those by thread or by process ID.</P></BODY></HTML>
