<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Initial Startup Process</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Initial Startup Process</H3><P CLASS="t">The first sector on the hard disk is critical to the startup process. This sector contains the Master Boot Record and the Partition Table. </P>
<P CLASS="t">If the startup disk is a floppy disk, the first sector on the disk is the Partition Boot Sector. </P>
<P CLASS="t">For more information about the Master Boot Record, the system partition, and the Partition Boot Sector, see Chapter 17, "Disk and File System Basics."</P>
<H4><A NAME="sec0"></A>Starting an x86-based Computer</H4><P CLASS="t">After the POST on x86-based computers, the system BIOS attempts to locate the startup disk. If there is a floppy disk in drive A, the system BIOS uses drive A as the startup disk. If there is no disk in drive A, the system BIOS then checks the first hard disk that is powered up.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>Some system BIOS versions enable the user to reconfigure the order in which it checks the floppy disks and hard disks for the startup disk. </P>
<P></P>
<P CLASS="t">When the hard disk is the startup disk, the system BIOS reads the Master Boot Record, and loads it into memory. The system BIOS then transfers execution to the Master Boot Record. The code in the Master Boot Record scans the Partition Table for the system partition. When the Master Boot Record finds the system partition, it loads sector 0 of the partition into memory, and executes it. Sector 0 on the system partition can be a utility or diagnostic program, or a Partition Boot Sector that contains startup code for an operating system. The Partition Boot Sector code starts the operating system in a manner defined by the operating system.</P>
<P CLASS="t">If there is no system partition on the first hard disk, the Master Boot Record displays errors such as the following:</P>
<UL><LI>Invalid partition table</LI></UL><UL><LI>Error loading operating system</LI></UL><UL><LI>Missing operating system</LI></UL><P></P>
<P CLASS="t">The section "Setting the System Partition (x86-based Computers)," presented later in this chapter, describes identifying and changing the system partition.</P>
<P CLASS="t">The Master Boot Record is generally operating system independent. For example, on x86-based computers, you use the same Master Boot Record to start Windows&nbsp;NT, Windows&nbsp;95, MS-DOS, and Windows 3.1x.</P>
<P CLASS="t">However, the Partition Boot Sector is dependent on both the operating system and the file system. On x86-based computers, the Windows&nbsp;NT Partition Boot Sector is responsible for:</P>
<UL><LI>Understanding enough of the file system in use to find NTLDR in the root folder. On a FAT volume, the Partition Boot Sector is typically one sector long. On an NTFS volume, it can be up to 16 sectors long, with the extra sectors containing enough file system code to find NTLDR.</LI></UL><UL><LI>Loading the boot loader, NTLDR, into memory.</LI></UL><UL><LI>Starting execution of the boot loader.</LI></UL><P></P>
<P CLASS="t">On x86-based computers, the system partition must be on the first physical hard disk. The boot partition (the partition containing Windows&nbsp;NT operating system files) can be the same as the system partition, can be on a different partition on the same hard disk, or can even be on a different hard disk.</P>
<P CLASS="t">If the first hard disk does not contain the system partition that you want to use to start your computer, you need to power down the disk so that the system BIOS can access the correct disk.</P>
<P CLASS="t">For information about why you might want to use another hard disk as your startup disk, see Chapter 20, "Preparing for and Performing Recovery."</P>
<P CLASS="t">If there is a floppy disk in drive A, the system BIOS loads the first sector on the disk into memory. If the floppy is bootable, the first sector on the disk is the Partition Boot Sector. If the floppy disk is not bootable, you see errors such as:</P>
<P CLASS="spacing"><BR></P>
<PRE>Non-System disk or disk error
Replace and press any key when ready
</PRE>
<H4><A NAME="sec1"></A>Starting a RISC-based Computer</H4><P CLASS="t">After a RISC-based computer completes the POST routine, the resident ROM firmware selects the startup disk by reading a boot precedence table from nonvolatile RAM (NVRAM). What the firmware does depends upon the platform (Alpha, PowerPC, or MIPS computer) and the information in the NVRAM. For example, to startup from the floppy disk, the NVRAM must define it as an alternate boot selection.</P>
<P CLASS="t">The NVRAM also defines the:</P>
<UL><LI>Location for OSLOADER.</LI></UL><UL><LI>Path to the boot partition.</LI></UL><UL><LI>Folder that contains the operating system to start.</LI></UL><P></P>
<P CLASS="t">The system partition can be on any hard disk on RISC-based computers. You can use the <B>Boot selection</B> menu to set up or change the system partition. See "Manage Boot Selection Menu," presented later in this chapter, for more information about changing the firmware and NVRAM on RISC-based computers.</P>
<P CLASS="t">The system partition on a RISC-based computer must be formatted with the FAT file system. This is because the ARC standard requires that firmware have the following stub drivers built into it:</P>
<UL><LI>SCSI miniport</LI></UL><UL><LI>FAT file system</LI></UL><P></P>
<P CLASS="t">RISC-based computers go straight from the firmware into OSLOADER, which is the RISC-based computer's equivalent of NTLDR. Therefore, the firmware has to take over the functionality of the Partition Boot Sector, which means that the partition that has OSLOADER on it has to be FAT. Once OSLOADER loads, it has enough of the NTFS drivers built into it (just like NTLDR does) that it can access a %systemroot% folder on an NTFS partition.</P>
<H4><A NAME="sec2"></A>Setting the System Partition (x86-based Computers)</H4><P CLASS="t">On an x86-based computer, the system partition must contain the boot loader and other files that load the operating system. Windows&nbsp;NT Setup sets the partition into which it installs these files as the system partition, but there are situations in which you might want to use another.</P>
<P CLASS="t">When Windows&nbsp;NT is running, you can use Disk Administrator to set the system partition. You can also use the MS-DOS-based utility Fdisk to set the system partition. Only a primary partition can be used as a system partition. You cannot use a logical drive in the extended partition as a system partition. When you set a new system partition, both Disk Administrator and Fdisk clear the Boot Indicator field, if it was set for any other partition.</P>
<P></P>
<P CLASS="t"><B>Note</B></P>
<P>The Boot Indicator field in the Partition Table indicates whether a partition is the system partition.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec3"></A>To Use Disk Administrator to set the system partition</H5><P>    1.    Click a primary partition or logical drive on the hard disk.</P>
<P>    2.    Click the <B>Partition</B> menu. If the partition is the system partition, or is a logical drive in an extended partition, the <B>Mark Active</B> command is not available.</P>
<P>    3.    If the partition is not the system partition, and you want to set it as the system partition, click the <B>Mark Active</B> command. Disk Administrator displays the following message box:</P>
<P><img src="xwr_r01.gif"></P>
<P>You cannot use Disk Administrator to set the system partition if you cannot start Windows&nbsp;NT. You can use the MS-DOS-based Fdisk utility to set the system partition, even if your entire disk is formatted with the NTFS file system.</P>
<P></P>
<H5 CLASS="h4"><A NAME="sec4"></A>To Use the Fdisk utility</H5><P>    1.    Start the computer under MS-DOS. If you do not have a system partition on your first hard disk, you must start MS-DOS from a floppy disk.</P>
<P>    2.    At the command prompt, type <B>fdisk</B>.</P>
<P>    3.    The <B>FDISK Options</B> menu has several choices. Type 2 to see the <B>Set Active Partition</B> screen. The system partition is identified by an <B>A</B> in the <B>Status</B> column.</P>
<P>    4.    Type the number of the partition that you want to set as the system partition. Press ESC to return to the <B>FDISK Options</B> menu, and press ESC again to exit Fdisk.</P>
<P></P></BODY></HTML>
