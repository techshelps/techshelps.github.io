<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating an Emergency Repair Disk</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H3>Creating an Emergency Repair Disk</H3><P CLASS="t">When you install Windows&nbsp;NT, Setup creates the Registry information in <I>%systemroot%</I>\System32\Config. For recovery purposes, Setup also creates a <I>%systemroot%</I>\Repair folder that contains the following files:</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="67pt" VALIGN="TOP"><COL WIDTH="280pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>File Name</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Contents</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Autoexec.nt</P></TD><TD VALIGN="TOP"><P>Copy of<I> %systemroot%</I>\System32\Autoexec.nt, which is used to initialize the MS-DOS environment.</P></TD></TR><TR><TD VALIGN="TOP"><P>Config.NT</P></TD><TD VALIGN="TOP"><P>Copy of<I> %systemroot%</I>\System32\Config.nt, which is used to initialize the MS-DOS environment.</P></TD></TR><TR><TD VALIGN="TOP"><P>Default._</P></TD><TD VALIGN="TOP"><P>Registry key HKEY_USERS\DEFAULT, compressed.</P></TD></TR><TR><TD VALIGN="TOP"><P>Ntuser.da_</P></TD><TD VALIGN="TOP"><P>Compressed version of %systemroot%\Profiles\Default user\Ntuser.dat. The repair process uses Ntuser.da_ if this one needs to be repaired.</P></TD></TR><TR><TD VALIGN="TOP"><P>Sam._</P></TD><TD VALIGN="TOP"><P>Registry key HKEY_LOCAL_MACHINE\SAM, compressed.</P></TD></TR><TR><TD VALIGN="TOP"><P>Security._</P></TD><TD VALIGN="TOP"><P>Registry key HKEY_LOCAL_MACHINE\SECURITY, compressed.</P></TD></TR><TR><TD VALIGN="TOP"><P>Setup.log</P></TD><TD VALIGN="TOP"><P>Log of which files were installed, and cyclic redundancy check (CRC) information for use during the repair process. This file is Read Only, System, and Hidden, so it will not be visible unless you have configured My Computer or Windows&nbsp;NT Explorer to show all files.</P></TD></TR><TR><TD VALIGN="TOP"><P>Software._</P></TD><TD VALIGN="TOP"><P>Registry key HKEY_LOCAL_MACHINE\SOFTWARE, compressed.</P></TD></TR><TR><TD VALIGN="TOP"><P>System._</P></TD><TD VALIGN="TOP"><P>Registry key HKEY_LOCAL_MACHINE\SYSTEM, compressed.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">During installation, Windows&nbsp;NT Setup asks whether you want to create an Emergency Repair Disk. You should choose <B>Yes</B>. When you create an Emergency Repair Disk during installation, or later by using the Repair Disk program (Rdisk.exe), the files are copied from <I>%systemroot%</I>\Repair to the floppy disk. You can also use the Emergency Repair Disk to repair a corrupt Partition Boot Sector for the system partition.</P>
<P CLASS="t">When you run the Repair Disk program, you can update the <I>%systemroot%</I>\Repair\Software and <I>%systemroot%</I>\Repair\System files with the current information in <I>%systemroot%</I>\System32\Config by using the Update Repair Info button. </P>
<P><img src="xwr_s01.gif"></P>
<P CLASS="t">The Repair Disk program does not update the Default, Sam and Security files if you run the program from Windows&nbsp;NT Explorer or My Computer. To update all the files, you can run <B>rdisk</B> from the command prompt by entering:</P>
<P CLASS="spacing"><BR></P>
<PRE>rdisk /s
</PRE>
<P CLASS="t">You can also update all of the files by clicking the Start button, clicking Run, and entering: </P>
<P CLASS="spacing"><BR></P>
<PRE>rdisk /s
</PRE>
<P CLASS="t">Using the /s switch forces the Repair Disk program to update all of the Registry keys in the <I>%systemroot%</I>\Repair folder.</P>
<P CLASS="t">There are several points to consider about maintaining and using your Emergency Repair Disk:</P>
<UL><LI>If you did not use the <B>/s</B> switch before you create the Emergency Repair Disk, and you use the Repair process to replace the SYSTEM Registry keys, all passwords in the system return to the passwords in effect at the time you last updated the Sam and Security files in <I>%systemroot%</I>\Repair. If you have more recently backed up these keys by using Windows&nbsp;NT Backup, Regback.exe, or Regedt32.exe, you can restore more current information.</LI></UL><UL><LI>If you did not update the Emergency Repair Disk after using Disk Administrator to configure volume sets or stripe sets, it might be difficult or impossible to recover data on these volumes. When you create a volume set or a stripe set, Disk Administrator updates the DISK subkey in the Registry and sets the fault-tolerant bit on the System ID field of the Partition Table for each partition or logical drive in the set. </LI></UL><UL><LI>You should make a copy of your current Emergency Repair Disk. </LI></UL><UL><LI>If you convert your boot partition from the FAT file system to the NTFS file system on an x86-based computer, be sure to update your Emergency Repair Disk. The NTFS Partition Boot Sector must be on the Emergency Repair Disk, not the FAT Partition Boot Sector. </LI></UL><UL><LI>The Emergency Repair Disk is not a replacement for backups.</LI></UL><P></P>
<P CLASS="t">For more information about creating an Emergency Repair Disk, see Help for the Repair Disk program. For more information about the <I>%systemroot%</I>\Repair and <I>%systemroot%</I>\System32\Config folders, and the Emergency Repair Disk, search the Knowledge Base. For information about the Knowledge Base, see Chapter 36, "General Troubleshooting."</P>
<P CLASS="t">Chapter 23, "Overview of the Windows&nbsp;NT Registry," contains more information about these keys and the <I>%systemroot%</I>\System32\Config folder.</P></BODY></HTML>
