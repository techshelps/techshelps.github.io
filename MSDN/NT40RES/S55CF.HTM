<HTML><HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How Windows NT Components Use the Registry</TITLE><META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset= iso-8859-1"><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR="#FFFFFF"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><FORM NAME="x"><OBJECT CLASSID="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016" NAME="iv"></OBJECT></FORM>
<H2>How Windows&nbsp;NT Components Use the Registry</H2><P CLASS="t">Under versions of Windows for MS-DOS, starting the system, connecting to the network, and running applications involves multiple configuration files with some form of synchronization between them. Under Windows&nbsp;NT, the operating system stores and checks the configuration information at only one location—the Registry. Figure 23.3 shows how data is handled by the Windows NT Registry.</P>
<P><img src="xwr_v03.gif"></P>
<P>Figure 23.3    Data in the Windows&nbsp;NT Registry </P>
<P CLASS="t">Figure 23.4 shows how Windows&nbsp;NT components and applications use the Registry. The explanations in the list that follows provide details.</P>
<P><img src="xwr_v04.gif"></P>
<P>Figure 23.4    How Registry information is used by Windows&nbsp;NT</P>
<UL><LI><I>Setup</I>. Whenever you run the Windows&nbsp;NT Setup program or other setup programs for applications or hardware, the Setup program adds new configuration data to the Registry. For example, new information is added when you install a new SCSI adapter or change the settings for your video display. Setup also reads information from the Registry to determine whether prerequisite components have been installed.</LI></UL><UL><LI><I>Recognizer</I>. Each time you start a computer running Windows&nbsp;NT, the Hardware Recognizer places in the Registry a list of the installed hardware it detects. The Hardware Recognizer is a program that runs as part of the Windows&nbsp;NT startup sequence<I>.</I> On computers with Intel processors, hardware detection is done by <B>Ntdetect.com</B> and the Windows&nbsp;NT Kernel (<B>Ntoskrnl.exe</B>). On Reduced Instruction Set Computers (RISC), the hardware information is extracted from the ARC (Advanced RISC Computing) firmware. </LI></UL><UL><LI><I>Windows&nbsp;NT Kernel</I>. During system startup, the Windows&nbsp;NT Kernel extracts information from the Registry, such as which device drivers to load and their load order. The <B>Ntoskrnl.exe</B> program also passes information about itself (such as its version number) to the Registry.</LI></UL><P></P>
<UL><LI><I>Device drivers</I>. Device drivers send and receive load parameters and configuration data from the Registry. This data is similar to what you might find on the DEVICE= lines in the Config.sys file under MS-DOS. A device driver must report system resources that it uses, such as hardware interrupts and direct memory access (DMA) channels, so the system can add this information to the Registry. Applications and device drivers can read this Registry information to provide users with smart installation and configuration programs. </LI></UL><UL><LI><I>Administrative tools</I>. The administrative tools in Windows&nbsp;NT, such as those provided in Control Panel and in the Administrative Tools (common) folder, can be used to modify configuration data. The Registry editors are helpful for viewing and occasionally making detailed changes to the system configuration. You can also use Windows&nbsp;NT Diagnostics and the System Policy Editor to view configuration information stored in the Registry and to modify certain Registry keys.</LI></UL><P></P>
<P CLASS="t">For details, see Chapter 24, "Registry Editors and Registry Administration." </P>
<P CLASS="t">The Registry is analogous to the .ini files used under Windows for MS-DOS, with each key in the Registry similar to a bracketed heading in an .ini file, and entries under the heading similar to values in the Registry. However, Registry keys can contain subkeys; .ini files do not support nested headings. Registry values can also consist of executable code, rather than the simple strings representing values in .ini files. And individual preferences for multiple users of the same computer can be stored in the Registry, which is not possible with .ini files.</P>
<P CLASS="t">Although these chapters focus on using Registry entries instead of using .ini files, some applications (particularly 16-bit Windows-based applications) continue to use .ini files. Windows&nbsp;NT supports .ini files solely for compatibility with those applications and with related tools, such as setup programs. The files Autoexec.bat and Config.sys also still exist in some form to provide compatibility with applications created for MS-DOS and Windows 3.<I>x</I>. </P>
<P CLASS="t">For details about how Windows&nbsp;NT uses such files in conjunction with the Registry, see Chapter 26, "Initialization Files and the Registry."</P></BODY></HTML>
