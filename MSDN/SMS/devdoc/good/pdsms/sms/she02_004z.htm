<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Standard Inventory Collection Process</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="sms_standard_inventory_collection_process"></a>Standard Inventory Collection Process</h3>
<p>
When a client computer logs on to a domain that is part of a site, the Inventory Agent program runs at the client and scans the client for software and hardware. There are four variations of the Inventory Agent program for clients: INVDOS, INVWIN32, INVOS2, and INVMac.</p>
<p>
The Inventory Agent program reports the inventory for the client by creating a RAW Inventory Agent file (*.RAW) in Management Information Format (MIF) and placing this file in the INVENTRY.BOX directory of the SMS_SHR share on the client's logon server. For NetWare servers, the file is placed in the LOGON.SRV\INVENTRY.BOX directory under the SMS root directory. Note that OS/2 and Macintosh clients write *.MIF files instead of *.RAW files. The *.MIF files are written to the LOGON.SRV\ISVMIF.BOX directory.</p>
<p>
At the site server, the Maintenance Manager service monitors the LOGON.SRV\INVENTRY.BOX directories of the SMS_SHR share on all logon servers at the site. The Maintenance Manager collects the client inventory files (*.RAW files) from these directories on the logon servers, and places them in the SITE.SRV\INVENTRY.BOX directory on the site server. Inventory history files are maintained in the SITE.SRV\INVENTRY.BOX\HISTORY directory. If NetWare servers are present, the Maintenance Manager polls the INVENTRY.BOX directory on these servers for inventory information.</p>
<p>
The Inventory Processor processes the client inventory files (*.RAW and *.MIF) and places the processed files (*.MIF) in the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory on the site server. These processed files are called inventory Delta-MIFs.</p>
<p>
The Inventory Data Loader processes the Delta-MIFs and updates the site database with inventory reported by the clients. Note that the Inventory Data Loader copies all Delta-MIFs that cannot be processed by the database into a \BADFILES subdirectory.</p>
<p>
After the site database update, you can view the updates to the computer inventory by using the SMS Administrator.</p>
<p>
The standard inventory collection process is illustrated below:</p>
<p>
<img src="images/she02a.gif" border=0></p>
<p>
<b>Notes</b>  On servers running Windows NT Server and LAN Manager, the Inventory Agent is installed as a service. The Inventory Agent service wakes up every 24 hours to check its inventory scan interval (the inventory scan interval for hardware and software is set in the <b>Inventory</b> dialog box from the <b>Site Properties</b> dialog box). If the interval has expired, the Inventory Agent scans for inventory. </p>
<p>
The Inventory Agent for Windows NT Server reports inventory in the same manner as clients running Windows NT Workstation and LAN Manager. The Inventory Agent for OS/2 service reports inventory in the same manner as OS/2 clients. On servers running NetWare, the Maintenance Manager on the site server scans the NetWare server and reports inventory as a text MIF to the site server's SITE.SRV\INVENTRY.BOX directory, where the MIF is processed by the Inventory Processor.</p>
<p>
For LAN Manager clients, the Inventory Agent (INVDOS) is run by means of the SMSLS batch file logon script. NetWare clients execute the same Inventory Agent program, but instead of an SMSLS batch file logon script, commands execute from a system login script. NetWare clients can also connect to a NetWare server and run INVDOS manually from the LOGON.SRV\X86.BIN directory.</p>
<h4>Collecting Inventory from Macintosh Clients</h4>
<p>
To initiate inventory collection for the first time, a user at a Macintosh client must connect manually to a Windows NT Server Services for Macintosh logon server and run the Installer program. After that, inventory collection is automatic.</p>
<p>
The user runs the Installer by using the Chooser to connect to the logon server, and locating the MAC.BIN folder. When the user opens the Installer within the Macintosh folder, SMS files, including the INVMac program, are copied to the client. INVMac is copied to the System Folder:Startup Items. When the Installer is finished it will require the Macintosh to be restarted. At restart, INVMac runs automatically because it is a startup item.</p>
<p>
When INVMac runs, it creates a local SMS.INI file as well as two files that store the hardware and software inventory history: InvHWScanResult and InvSWScanResult. INVMac also launches the Package Command Manager (PCMMac).</p>
<p>
INVMac puts inventory results in the LOGON.SRV\ISVMIF.BOX directory on the logon server as a *.MIF file. The Maintenance Manager moves the MIFs from the Services for Macintosh logon server to the SITE.SRV\ISVMIF.BOX directory on the site server. The Inventory Processor processes these files, and places them in the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory.</p>
<p>
At a primary site, the Inventory Processor processes these files into Delta-MIFs, and places them in the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory. The Inventory Data Loader uses the Delta-MIFs to update the computer inventory in the site database and places the MIFs in the SITE.SRV\SITEREP.BOX directory for the Site Reporter to forward the MIFs to the site's parent site.</p>
<p>
At a secondary site, the Inventory Processor processes these files into Delta-MIFs and places them in the SITE.SRV\SITEREP.BOX directory for the Site Reporter to forward the MIFs to the site's parent site.</p>
<p>
Collected files are placed in the *.CFD directory on the Services for Macintosh logon server. (If there are no collected files, this directory does not exist.) Inside the directory are files of the form *.FIL collected from the Macintosh client and one cataloging file, COLLFILE.LST. COLLFILE.LST is an ASCII file relating the files' 0000000x.FIL to the path on the Macintosh client.</p>
<h4>Collecting Inventory from OS/2 Computers</h4>
<p>
When the Inventory Agent for OS/2 service runs on LAN Manager version 2.<i>x </i>servers and the Inventory Agent program runs on OS/2 client computers, the Inventory Agent scans for hardware and software inventory. However, the Inventory Agent for OS/2 does not report inventory as a RAW file in the LOGON.SRV\INVENTRY.BOX directory. Instead, it creates text MIFs and places them in the LOGON.SRV\ISVMIF.BOX directory on the logon server. The Maintenance Manager moves the MIFs from the logon server to the SITE.SRV\ISVMIF.BOX directory on the site server.</p>
<p>
At a primary site, the Inventory Processor processes these files into Delta-MIFs, and places them in the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory. The Inventory Data Loader uses the Delta-MIFs to update the computer inventory in the site database and places the MIFs in the SITE.SRV\SITEREP.BOX directory for the Site Reporter to forward the MIFs to the site's parent site.</p>
<p>
At a secondary site, the Inventory Processor processes these files into Delta-MIFs and places them in the SITE.SRV\SITEREP.BOX directory for the Site Reporter to forward the MIFs to the site's parent site.</p>
<p>&nbsp;</p></body>
</HTML>
