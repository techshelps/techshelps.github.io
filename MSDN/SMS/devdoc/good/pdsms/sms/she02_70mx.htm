<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How Inventory History is Used to Maintain the SMS Inventory</title>
<link disabled rel=stylesheet href=../../../backsdk3.css>
<style type="text/css">
@import url(../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="sms_how_inventory_history_is_used_to_maintain_the_sms_inventory"></a>How Inventory History is Used to Maintain the SMS Inventory</h2>
<p>
For each computer running SMS, the Inventory Processor maintains a history file that contains the current inventory of that computer. These history files are placed in the SITE.SRV\INVENTRY.BOX\HISTORY directory of the site server.</p>
<p>
<b>Note</b>  For Microsoft® Windows NT®, Microsoft® Windows®, and Microsoft® MS-DOS® computers, the Inventory Processor gives each history file a unique name—usually, a file name with the computer's SMS identifier and the extension .HMS. For Novell NetWare servers, Macintosh workstations, and OS/2 computers, the HISTORY.MAP file maps each computer to its history file—these history files usually have unique file names and the extension .SMH. The HISTORY.MAP file is divided into sections according to architecture; each computer is listed by NetcardID, SMSID, and SMSLocation.</p>
<p>
When the Inventory Processor processes a subsequent RAW file (or MIF file) from a computer, it compares the inventory reported in the RAW file (groups are identified by their class and keyed attributes) to the inventory reported in the computer's history file. If there are changes, the Inventory Processor creates a Delta-MIF file containing the groups whose inventories have changed (groups that have been added, updated, or deleted), and passes the file to the Inventory Data Loader. When the Inventory Data Loader detects a Delta-MIF file, it then adds, updates, or deletes the groups specified in the Delta-MIF file in the SMS database.</p>
<p>
For example, the Operating System group has the class "MICROSOFT|OPERATING_SYSTEM|1.0" and uses the Operating System Name attribute as a key. When the Inventory Processor reads a group of this class in the RAW file, it looks for a group with the same class and an identical value for the Operating System Name attribute. If it found a RAW file that contained a group with this class and an Operating System Name of MS-DOS, the Inventory Processor would search the history file for a group with the same class and an Operating System Name of MS-DOS. The Inventory Processor would then use the data for the group in the RAW file to update the computer's history file and add the update information to a Delta-MIF file. </p>
<p>
The Inventory Processor can add a <b>PRAGMA</b> statement to any group that it adds to the Delta-MIF file. A <b>PRAGMA</b> statement tells the Inventory Data Loader what to do with a group:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>PRAGMA</th>
<th align=left width=52%>Meaning</th>
</tr>
<tr valign=top>
<td width=48%>SMS:Add</td>
<td width=52%>Adds the group to the computer's inventory in the database.</td>
</tr>
<tr valign=top>
<td width=48%>SMS:Update</td>
<td width=52%>Updates the group in the database with the information in the Delta-MIF file.</td>
</tr>
<tr valign=top>
<td width=48%>SMS:Delete</td>
<td width=52%>Removes the group from the computer's inventory in the database.</td>
</tr>
</table><br>
<p>
For example, when the Inventory Processor detects that a group has been deleted, it reports the deletion by adding the group to the Delta-MIF file, using a <b>PRAGMA</b>="SMS:Delete" statement. If no <b>PRAGMA</b> is specified, the Inventory Data Loader will determine the <b>PRAGMA</b>. If the group exists in the database, the Inventory Processor performs an SMS:Update; if the group doesn't exist in the database, it performs an SMS:Add.</p>
<p>
If there is no change to the computer's inventory (that is, the inventory in the history file matches the RAW file), the Inventory Processor does not report a Delta-MIF file. If a RAW file is processed later than four days after the last inventory report, and there is no change to the computer's inventory, the Inventory Processor will report a Delta-MIF file to update the computer's Workstation Status group.</p>
<p>&nbsp;</p></body>
</HTML>
