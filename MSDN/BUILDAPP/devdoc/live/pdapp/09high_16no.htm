<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Managing the Device Context</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_tools_managing_the_device_context"></a>Managing the Device Context</h2>
<p>
In 16-bit Windows, it was important to conserve the use of drawing objects. In Windows NT, there are richer data structures to hold a new wealth of data. That can mean it takes longer to look things up.</p>
<p>
The old limitations gave rise to a coding style in which you created, selected, used, and destroyed objects (like pens and brushes) constantly. This limited the number of objects in the system and kept the application from running into the limits of the address space. Because of the transition to a client-server architecture in Windows NT, object creation and destruction are more expensive. Because of the new capacity for large numbers of objects, selecting objects is also a bit slower. For example, the old coding style</p>
<pre><code>select(grey); 
patblt(...); 
select(black); 
patblt(...); 
select(grey); 
patblt(...); 
select(black); 
patblt(...); 
 </code></pre>
<p>
is slower on Windows NT than </p>
<pre><code>select(grey); 
patblt(...); 
patblt(...); 
patblt(...); 
select(black); 
patblt(...); 
patblt(...); 
patblt(...); 
 </code></pre>
<p>
In Windows NT, create all your objects when you first need them. Do not destroy the objects until you are done with them. </p>
<p>
If you were programming for 16-bit Windows, you were told to avoid the use of your own DC’s because the system could only support a few. This is not true on Windows NT. Use the creation style CS_OWNDC as much as you can when you call the <b>RegisterClass</b> function. This avoids repeated calling of the relatively expensive <b>GetDC</b> and <b>ReleaseDC</b> functions every time you have to draw. It also preserves the selected objects in your own DC in between calls, eliminating the need to select them again after each call to <b>GetDC</b>. </p>
<p>&nbsp;</p></body>
</HTML>
