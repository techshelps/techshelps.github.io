<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Window Procedure</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_the_window_procedure_pt"></a>The Window Procedure</h2>
<p>
Every window must have a window procedure. The name of the window procedure is user-defined. The GENERIC application uses the following window procedure for the main window:</p>
<pre><code>LRESULT WINAPI MainWndProc( HWND, UINT, WPARAM, LPARAM );
</code></pre>
<p>
The WINAPI modifier is used because the window procedure must be declared with the standard call calling convention.</p>
<p>
The window procedure receives messages from Windows. These may be input messages or window-management messages from Windows. You can optionally handle a message in your window procedure or pass the message to Windows for default processing by calling the <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_defwindowproc">
</object><a href=JavaScript:alink_1.Click()><b>DefWindowProc</b></a> function. The GENERIC application processes the WM_PAINT, WM_COMMAND, and WM_DESTROY messages, using a switch statement that is structured as follows:</p>
<pre><code>switch( msg ) {
      case WM_PAINT:
      ...
      case WM_COMMAND:
      ...
      case WM_DESTORY:
      ...
      default:
         return( DefWindowProc( hWnd, msg, wParam, lParam ));
</code></pre>
<p>
The WM_PAINT message indicates that you should redraw what's in all or part of your application's window. Use the <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_beginpaint">
</object><a href=JavaScript:alink_2.Click()><b>BeginPaint</b></a> function to get a handle to a device context, then use the device context for drawing within the application's window, with functions like <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_textout">
</object><a href=JavaScript:alink_3.Click()><b>TextOut</b></a>. Use <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_endpaint">
</object><a href=JavaScript:alink_4.Click()><b>EndPaint</b></a> to release the device context. The GENERIC application displays a text string, "Hello, World!", in the window using the following code:</p>
<pre><code>case WM_PAINT:
      hDC = BeginPaint( hWnd, &amp;ps );

      TextOut( hDC, 10, 10, "Hello, World!", 13 );

      EndPaint( hWnd, &amp;ps );
      break;
</code></pre>
<p>
The WM_COMMAND message indicates that a user has selected a command item from a menu. The GENERIC application uses the following code to check if its About menu item has been selected:</p>
<pre><code>case WM_COMMAND:
         switch( wParam ) {
            case IDM_ABOUT:
            ...
            break;
         }
</code></pre>
<p>
Most window procedures process the <object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink,MENU">
<PARAM name="DefaultTopic" value="../../notopic_0pk4.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_wm_destroy">
</object><a href=JavaScript:alink_5.Click()>WM_DESTROY</a> message. Windows sends this message to the window procedure immediately after destroying the window. The message gives you the opportunity to finish processing and post a WM_QUIT message in the application queue. The GENERIC application handles the WM_DESTROY message as follows:</p>
<pre><code>case WM_DESTROY:
   PostQuitMessage( 0 );
   break;
</code></pre>
<p>&nbsp;</p></body>
</HTML>
