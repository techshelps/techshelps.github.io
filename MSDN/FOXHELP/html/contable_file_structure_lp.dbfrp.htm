<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Table File Structure</title>
<style>
<link disabled rel=stylesheet href=/stylesheets/msdn_ie3.css>
<style type="text/css">
@import url(/stylesheets/msdn_ie4.css);
</style></HEAD>
<BODY>

<h1><a name="contable_file_structure_lp.dbfrp"></a><sup></sup>Table File Structure (.dbc, .dbf, .frx, .lbx, .mnx, .pjx, .scx, .vcx)</h1>
<p>
<a href="contable_file_structure_lp.dbfrpsa.htm">See Also</a></p>
<p>
Visual FoxPro uses tables to store data that defines different file types. The file types that are saved as table files are:
<ul type=disc>
<li>
Table (.dbf)<br><br></li>
<li>
Database (.dbc)<br><br></li>
<li>
Form (.scx)<br><br></li>
<li>
Label (.lbx)<br><br></li>
<li>
Menu (.mnx)<br><br></li>
<li>
Project (.pjx)<br><br></li>
<li>
Report (.frx)<br><br></li>
<li>
Visual Class Library (.vcx)</li>
</ul>
<p>
Because these files are actually tables, you can use and browse them in the same way that you browse any .dbf file.</p>
<p>
A table file is made up of a header record and data records. The header record defines the structure of the table and contains any other information related to the table. It starts at file position zero. The data records<sup>1</sup> follow the header (in consecutive bytes) and contain the actual text of the fields.</p>
<p>
For information about the table structures of the different file types, see <a href="contable_structures_of_table_files.htm">Table Structures of Table Files.</a></p>
<p>
The length of a record (in bytes) is determined by summing the defined lengths of all fields. Integers in table files are stored with the least significant byte first.</p>
<h3>Table Header Record Structure</h3>
<table border=1 cellpadding=5 cols=2 frame=below rules=rows>
<tr valign=top>
<td class=label width=21%><b>Byte offset</b></td>
<td class=label width=79%><b>Description</b></td>
</tr>
<tr valign=top>
<td width=21%>0</td>
<td width=79%>Type of file<br>
0x02FoxBASE<br>
0x03FoxBASE+/dBASE III PLUS, no memo<br>
0x30Visual FoxPro<br>
0x43dBASE IV SQL table files, no memo<br>
0x63dBASE IV SQL system files, no memo<br>
0x83FoxBASE+/dBASE III PLUS, with memo<br>
0x8BdBASE IV with memo<br>
0xCBdBASE IV SQL table files, with memo<br>
0xF5FoxPro 2.x (or earlier) with memo<br>
0xFBFoxBASE</td>
</tr>
<tr valign=top>
<td width=21%>1&nbsp;–&nbsp;3</td>
<td width=79%>Last update (YYMMDD)</td>
</tr>
<tr valign=top>
<td width=21%>4&nbsp;–&nbsp;7</td>
<td width=79%>Number of records in file</td>
</tr>
<tr valign=top>
<td width=21%>8&nbsp;–&nbsp;9</td>
<td width=79%>Position of first data record</td>
</tr>
<tr valign=top>
<td width=21%>10&nbsp;–&nbsp;11</td>
<td width=79%>Length of one data record (including delete flag)</td>
</tr>
<tr valign=top>
<td width=21%>12&nbsp;–&nbsp;27</td>
<td width=79%>Reserved</td>
</tr>
<tr valign=top>
<td width=21%>28</td>
<td width=79%>Table Flags<br>
0x01file has a structural .cdx<br>
0x02file has a Memo field<br>
0x04file is a database (.dbc)<br>
Note that this byte can contain the sum of<br>
any of the above values. For example, 0x03<br>
indicates the table has a structural .cdx <br>
and a Memo field.</td>
</tr>
<tr valign=top>
<td width=21%>29</td>
<td width=79%>Code page mark</td>
</tr>
<tr valign=top>
<td width=21%>30&nbsp;–&nbsp;31</td>
<td width=79%>Reserved, contains 0x00</td>
</tr>
<tr valign=top>
<td width=21%>32&nbsp;–&nbsp;n</td>
<td width=79%>Field subrecords<br>
The number of fields determines the number of field subrecords. There is one field subrecord for each field in the table.</td>
</tr>
<tr valign=top>
<td width=21%>n+1</td>
<td width=79%>Header record terminator (0x0D)</td>
</tr>
<tr valign=top>
<td width=21%>n+2 to n+264</td>
<td width=79%>A 263-byte range that contains the backlink information (the relative path of an associated database (.dbc)). If the first byte is 0x00 then the file is not associated with a database. Hence, database files themselves always contain 0x00.</td>
</tr>
</table><br>
<p>
<sup>1</sup> The data in the data file starts at the position indicated in bytes 8 to 9 of the header record. Data records begin with a delete flag byte. If this byte is an ASCII space (0x20) the record is not deleted; if the first byte is an asterisk (0x2A) the record is deleted. The data from the fields named in the field subrecords follows the delete flag.</p>
<h3>Field Subrecords Structure</h3>
<table border=1 cellpadding=5 cols=2 frame=below rules=rows>
<tr valign=top>
<td class=label width=21%><b>Byte offset</b></td>
<td class=label width=79%><b>Description</b></td>
</tr>
<tr valign=top>
<td width=21%>0&nbsp;–&nbsp;10 </td>
<td width=79%>Field name (maximum of 10 characters; if less than 10, it is padded with null character (0x00))</td>
</tr>
<tr valign=top>
<td width=21%>11</td>
<td width=79%>Field Type: <br>
C–Character<br>
Y–Currency<br>
N–Numeric<br>
F–Float<br>
D–Date<br>
T–DateTime<br>
B–Double<br>
I–Integer<br>
L–Logical<br>
M–Memo<br>
G–General<br>
C–Character (binary)<br>
M–Memo (binary)<br>
P–Picture</td>
</tr>
<tr valign=top>
<td width=21%>12&nbsp;–&nbsp;15</td>
<td width=79%>Displacement of field in record</td>
</tr>
<tr valign=top>
<td width=21%>16</td>
<td width=79%>Length of field (in bytes)</td>
</tr>
<tr valign=top>
<td width=21%>17</td>
<td width=79%>Number of decimal places</td>
</tr>
<tr valign=top>
<td width=21%>18</td>
<td width=79%>Field Flags<br>
0x01 System Column (not visible to user)<br>
0x02Column can store null values<br>
0x04Binary column (for CHAR and MEMO only)</td>
</tr>
<tr valign=top>
<td width=21%>19&nbsp;–&nbsp;32</td>
<td width=79%>Reserved</td>
</tr>
</table><br>
<p>
For information about limitations on characters per record, maximum fields, and so on, see <a href="consystem_capacities.htm">Visual FoxPro System Capacities.</a></p>
<h3>Remarks</h3>
<p>
Visual FoxPro does not modify the header of a file that has been saved to a FoxPro 2.<i>x</i> file format unless one of the following features has been added to the file:
<ul type=disc>
<li>
Null value support<br><br></li>
<li>
DateTime, Currency, and Double data types<br><br></li>
<li>
CHAR or MEMO field is marked as Binary<br><br></li>
<li>
A table is added to a database (.dbc) file</li>
</ul>
<p class=indent>
<B><b>Tip</b></B> You can use the following formula to return the number of fields in a table file: <code>(x – 296/32)</code>. In the formula, <code>x</code> is the position of the first record (bytes 8 to 9 in the table header record), 296 is 263 (backlink info) + 1 (header record terminator) + 32 (first field subrecord), and 32 is the length of a field subrecord.</p>
</BODY>
</HTML>
