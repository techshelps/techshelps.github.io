<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CListBox</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_clistbox"></a><sup></sup>CListBox</h1>
<p>
<img src="clistbox.gif" border=0></p>
<p>
The <b>CListBox</b> class provides the functionality of a Windows list box. A list box displays a list of items, such as filenames, that the user can view and select. </p>
<p>
In a single-selection list box, the user can select only one item. In a multiple-selection list box, a range of items can be selected. When the user selects an item, it is highlighted and the list box sends a notification message to the parent window. </p>
<p>
You can create a list box either from a dialog template or directly in your code. To create it directly, construct the <b>CListBox</b> object, then call the <a href="_mfc_clistbox.3a3a.create.htm">Create</a> member function to create the Windows list-box control and attach it to the <b>CListBox</b> object. To use a list box in a dialog template, declare a list-box variable in your dialog box class, then use <b>DDX_Control</b> in your dialog box class's <b>DoDataExchange</b> function to connect the member variable to the control. (ClassWizard does this for you automatically when you add a control variable to your dialog box class.)</p>
<p>
Construction can be a one-step process in a class derived from <b>CListBox</b>. Write a constructor for the derived class and call <b>Create</b> from within the constructor. </p>
<p>
If you want to handle Windows notification messages sent by a list box to its parent (usually a class derived from <a href="_mfc_cdialog.htm">CDialog</a>), add a message-map entry and message-handler member function to the parent class for each message.</p>
<p>
Each message-map entry takes the following form:</p>
<p>
<b>ON_</b>Notification<b>(</b> <i>id</i><b>,</b> <i>memberFxn</i> <b>)</b></p>
<p>
where <i>id</i> specifies the child window ID of the list-box control sending the notification and <i>memberFxn</i> is the name of the parent member function you have written to handle the notification.</p>
<p>
The parent’s function prototype is as follows:</p>
<p>
<b>afx_msg</b> <b>void</b> <i>memberFxn</i><b>(</b> <b>);</b></p>
<p>
Following is a list of potential message-map entries and a description of the cases in which they would be sent to the parent:
<ul type=disc>
<li>
<b>ON_LBN_DBLCLK</b>&nbsp;&nbsp;&nbsp;The user double-clicks a string in a list box. Only a list box that has the <a href="_mfc_list.2d.box_styles.htm">LBS_NOTIFY</a> style will send this notification message.&nbsp; <br><br></li>
<li>
<b>ON_LBN_ERRSPACE</b>&nbsp;&nbsp;&nbsp;The list box cannot allocate enough memory to meet the request.<br><br></li>
<li>
<b>ON_LBN_KILLFOCUS</b>&nbsp;&nbsp;&nbsp;The list box is losing the input focus.<br><br></li>
<li>
<b>ON_LBN_SELCANCEL</b>&nbsp;&nbsp;&nbsp;The current list-box selection is canceled. This message is only sent when a list box has the <b>LBS_NOTIFY</b> style.<br><br></li>
<li>
<b>ON_LBN_SELCHANGE</b>&nbsp;&nbsp;&nbsp;The selection in the list box is about to change. This notification is not sent if the selection is changed by the <a href="_mfc_clistbox.3a3a.setcursel.htm">CListBox::SetCurSel</a> member function. This notification applies only to a list box that has the <b>LBS_NOTIFY</b> style. The <b>LBN_SELCHANGE</b> notification message is sent for a multiple-selection list box whenever the user presses an arrow key, even if the selection does not change.<br><br></li>
<li>
<b>ON_LBN_SETFOCUS</b>&nbsp;&nbsp;&nbsp;The list box is receiving the input focus.<br><br></li>
<li>
<b>ON_WM_CHARTOITEM</b>&nbsp;&nbsp;&nbsp;An owner-draw list box that has no strings receives a <b>WM_CHAR</b> message.<br><br></li>
<li>
<b>ON_WM_VKEYTOITEM</b>&nbsp;&nbsp;&nbsp;A list box with the <b>LBS_WANTKEYBOARDINPUT</b> style receives a <b>WM_KEYDOWN</b> message.</li>
</ul>
<p>
If you create a <b>CListBox</b> object within a dialog box (through a dialog resource), the <b>CListBox</b> object is automatically destroyed when the user closes the dialog box. </p>
<p>
If you create a <b>CListBox</b> object within a window, you may need to destroy the <b>CListBox</b> object. If you create the <b>CListBox</b> object on the stack, it is destroyed automatically. If you create the <b>CListBox</b> object on the heap by using the <b>new</b> function, you must call <b>delete</b> on the object to destroy it when the user closes the parent window. </p>
<p>
If you allocate any memory in the <b>CListBox</b> object, override the <b>CListBox</b> destructor to dispose of the allocation.</p>
<p>
<b>#include &lt;afxwin.h&gt;</b></p>
<p>
<a href="_mfc_clistbox_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_cwnd.htm">Base Class</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>Sample</b>&nbsp;&nbsp;&nbsp;<object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_sample_mfc_CTRLTEST">
</object><a href=JavaScript:alink_1.Click()>MFC Sample CTRLTEST</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cwnd.htm">CWnd</a>, <a href="_mfc_cbutton.htm">CButton</a>, <a href="_mfc_ccombobox.htm">CComboBox</a>, <a href="_mfc_cedit.htm">CEdit</a>, <a href="_mfc_cscrollbar.htm">CScrollBar</a>, <a href="_mfc_cstatic.htm">CStatic</a></p>
</font></BODY>
</HTML>
