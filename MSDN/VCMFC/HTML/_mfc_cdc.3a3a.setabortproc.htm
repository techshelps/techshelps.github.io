<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CDC::SetAbortProc</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_cdc.3a3a.setabortproc"></a><sup></sup>CDC::SetAbortProc&nbsp; </h1>
<p>
<b>int</b> <b>SetAbortProc(</b> <b>BOOL</b> <b>(</b> <b>CALLBACK</b> <b>EXPORT*</b> <i>lpfn</i> <b>)(</b> <b>HDC,</b> <b>int</b> <b>)</b> <b>);</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Specifies the outcome of the <b>SetAbortProc</b> function. Some of the following values are more probable than others, but all are possible.
<ul type=disc>
<li>
<b>SP_ERROR</b>&nbsp;&nbsp;&nbsp;General error.<br><br></li>
<li>
<b>SP_OUTOFDISK</b>&nbsp;&nbsp;&nbsp;Not enough disk space is currently available for spooling, and no more space will become available.<br><br></li>
<li>
<b>SP_OUTOFMEMORY</b>&nbsp;&nbsp;&nbsp;Not enough memory is available for spooling.<br><br></li>
<li>
<b>SP_USERABORT</b>&nbsp;&nbsp;&nbsp;User ended the job through the Print Manager.</li>
</ul>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>lpfn</i></p>
<p class=indent>
A pointer to the abort function to install as the abort procedure. For more about the callback function, see <a href="_mfc_callback_function_for_cdc.3a3a.setabortproc.htm">Callback Function for CDC::SetAbortProc</a>. </p>
<p class=label>
<b>Remarks</b></p>
<p>
Installs the abort procedure for the print job. </p>
<p>
If an application is to allow the print job to be canceled during spooling, it must set the abort function before the print job is started with the <a href="_mfc_cdc.3a3a.startdoc.htm">StartDoc</a> member function. The Print Manager calls the abort function during spooling to allow the application to cancel the print job or to process out-of-disk-space conditions. If no abort function is set, the print job will fail if there is not enough disk space for spooling.</p>
<p>
Note that the features of Microsoft Visual C++ simplify the creation of the callback function passed to <b>SetAbortProc</b>. The address passed to the <b>EnumObjects</b> member function is a pointer to a function exported with <b>__declspec(dllexport)</b> and with the <b>__stdcall</b> calling convention.</p>
<p>
You also do not have to export the function name in an <b>EXPORTS</b> statement in your application’s module-definition file. You can instead use the <b>EXPORT</b> function modifier, as in</p>
<p>
<b>BOOL</b> <b>CALLBACK</b> <b>EXPORT</b> AFunction( <b>HDC</b>, <b>int</b> <b>);</b></p>
<p>
to cause the compiler to emit the proper export record for export by name without aliasing. This works for most needs. For some special cases, such as exporting a function by ordinal or aliasing the export, you still need to use an <b>EXPORTS</b> statement in a module-definition file.</p>
<p>
Callback registration interfaces are now type-safe (you must pass in a function pointer that points to the right kind of function for the specific callback).</p>
<p>
Also note that all callback functions must trap Microsoft Foundation exceptions before returning to Windows, since exceptions cannot be thrown across callback boundaries. For more information about exceptions, see the article <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Exceptions">
</object><a href=JavaScript:alink_1.Click()>Exceptions</a> in <i>Visual C++ Programmer's Guide</i>. </p>
<p>
<a href="_mfc_cdc.htm">CDC Overview</a>  |&nbsp; <a href="_mfc_cdc_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
</font></BODY>
</HTML>
