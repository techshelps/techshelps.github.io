<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CSocket</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_csocket"></a>CSocket</h1>
<p>
<img src="csocket.gif" border=0></p>
<p>
Class <b>CSocket</b> derives from <b>CAsyncSocket</b> and inherits its encapsulation of the Windows Sockets API. A <b>CSocket</b> object represents a higher level of abstraction of the Windows Sockets API than that of a <b>CAsyncSocket</b> object. <b>CSocket</b> works with classes <b>CSocketFile</b> and <b>CArchive</b> to manage the sending and receiving of data.</p>
<p>
A <b>CSocket</b> object also provides blocking, which is essential to the synchronous operation of <b>CArchive</b>. Blocking functions, such as <b>Receive</b>, <b>Send</b>, <b>ReceiveFrom</b>, <b>SendTo</b>, and <b>Accept</b> (all inherited from <b>CAsyncSocket</b>), do not return a <b>WSAEWOULDBLOCK</b> error in <b>CSocket</b>. Instead, these functions wait until the operation completes. Additionally, the original call will terminate with the error <b>WSAEINTR</b> if <b>CancelBlockingCall</b> is called while one of these functions is blocking.</p>
<p>
To use a <b>CSocket</b> object, call the constructor, then call <b>Create</b> to create the underlying <b>SOCKET</b> handle (type <b>SOCKET</b>). The default parameters of <b>Create</b> create a stream socket, but if you are not using the socket with a <b>CArchive</b> object, you can specify a parameter to create a datagram socket instead, or bind to a specific port to create a server socket. Connect to a client socket using <b>Connect</b> on the client side and <b>Accept</b> on the server side. Then create a <b>CSocketFile</b> object and associate it to the <b>CSocket</b> object in the <b>CSocketFile</b> constructor. Next, create a <b>CArchive</b> object for sending and one for receiving data (as needed), then associate them with the <b>CSocketFile</b> object in the <b>CArchive</b> constructor. When communications are complete, destroy the <b>CArchive</b>, <b>CSocketFile</b>, and <b>CSocket</b> objects. The <b>SOCKET</b> data type is described in the article <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Background">
</object><a href=JavaScript:alink_1.Click()>Windows Sockets: Background</a> in <i>Visual C++ Programmer’s Guide</i>.</p>
<p>
For more information, see <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets_in_MFC">
</object><a href=JavaScript:alink_2.Click()>Windows Sockets in MFC</a>, <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Using_Sockets_with_Archives">
</object><a href=JavaScript:alink_3.Click()>Windows Sockets: Using Sockets with Archives</a>, <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.How_Sockets_with_Archives_Work">
</object><a href=JavaScript:alink_4.Click()>Windows Sockets: How Sockets with Archives Work</a>, <object id=alink_5 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Sequence_of_Operations">
</object><a href=JavaScript:alink_5.Click()>Windows Sockets: Sequence of Operations</a>, <object id=alink_6 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Example_of_Sockets_Using_Archives">
</object><a href=JavaScript:alink_6.Click()>Windows Sockets: Example of Sockets Using Archives</a>, and related articles in <i>Visual C++ Programmer’s Guide</i>. Also see <object id=alink_7 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_Overview_of_Windows_Sockets_2_2">
</object><a href=JavaScript:alink_7.Click()>Overview of Windows Sockets 2</a> and <object id=alink_8 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_Windows_Sockets_Programming_Considerations_2">
</object><a href=JavaScript:alink_8.Click()>Windows Sockets Programming Considerations</a> in the Win32 SDK documentation.</p>
<p>
<b>#include &lt;afxsock.h&gt;</b></p>
<p>
<a href="_mfc_csocket_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_casyncsocket.htm">Base Class</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>Sample</b>&nbsp;&nbsp;&nbsp;<object id=alink_9 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_sample_mfc_CHATSRVR">
</object><a href=JavaScript:alink_9.Click()>MFC Sample CHATSRVR</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_casyncsocket.htm">CAsyncSocket</a>, <a href="_mfc_csocketfile.htm">CSocketFile</a></p>
</font></BODY>
</HTML>
