<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WSADATA Structure</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_wsadata_structure"></a><sup></sup>WSADATA Structure </h1>
<p>
The <b>WSADATA</b> structure has the following form:</p>
<pre><code>struct WSAData {
 &nbsp;&nbsp; WORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wVersion;
 &nbsp;&nbsp; WORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wHighVersion;
 &nbsp;&nbsp; char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; szDescription[WSADESCRIPTION_LEN+1];
 &nbsp;&nbsp; char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; szSystemStatus[WSASYSSTATUS_LEN+1];
 &nbsp;&nbsp; unsigned short&nbsp;&nbsp; iMaxSockets;
 &nbsp;&nbsp; unsigned short&nbsp;&nbsp; iMaxUdpDg;
 &nbsp;&nbsp; char FAR *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lpVendorInfo;
};
</code></pre>
<p>
The <b>WSADATA</b> structure is used to store Windows Sockets initialization information returned by a call to the <b>AfxSocketInit</b> global function.</p>
<p class=label>
<b>Members</b></p>
<p class=dt>
<b>wVersion</b></p>
<p class=indent>
The version of the Windows Sockets specification that the Windows Sockets DLL expects the caller to use.</p>
<p class=dt>
<b>wHighVersion</b></p>
<p class=indent>
The highest version of the Windows Sockets specification that this DLL can support (also encoded as above). Normally this is the same as <b>wVersion</b>.</p>
<p class=dt>
<b>szDescription</b></p>
<p class=indent>
A null-terminated ASCII string into which the Windows Sockets DLL copies a description of the Windows Sockets implementation, including vendor identification. The text (up to 256 characters in length) can contain any characters, but vendors are cautioned against including control and formatting characters: the most likely use that an application will put this to is to display it (possibly truncated) in a status message.</p>
<p class=dt>
<b>szSystemStatus</b></p>
<p class=indent>
A null-terminated ASCII string into which the Windows Sockets DLL copies relevant status or configuration information. The Windows Sockets DLL should use this field only if the information might be useful to the user or support staff; it should not be considered as an extension of the <b>szDescription</b> field.</p>
<p class=dt>
<b>iMaxSockets</b></p>
<p class=indent>
The maximum number of sockets which a single process can potentially open. A Windows Sockets implementation can provide a global pool of sockets for allocation to any process; alternatively it can allocate per-process resources for sockets. The number can well reflect the way in which the Windows Sockets DLL or the networking software was configured. Application writers can use this number as a crude indication of whether the Windows Sockets implementation is usable by the application. For example, an X Windows server might check <b>iMaxSockets</b> when first started: if it is less than 8, the application would display an error message instructing the user to reconfigure the networking software. (This is a situation in which the <b>szSystemStatus</b> text might be used.) Obviously there is no guarantee that a particular application can actually allocate <b>iMaxSockets</b> sockets, since there can be other Windows Sockets applications in use.</p>
<p class=dt>
<b>iMaxUdpDg</b></p>
<p class=indent>
The size in bytes of the largest User Datagram Protocol (UDP) datagram that can be sent or received by a Windows Sockets application. If the implementation imposes no limit, <b>iMaxUdpDg</b> is zero. In many implementations of Berkeley sockets, there is an implicit limit of 8192 bytes on UDP datagrams (which are fragmented if necessary). A Windows Sockets implementation can impose a limit based, for instance, on the allocation of fragment reassembly buffers. The minimum value of <b>iMaxUdpDg</b> for a compliant Windows Sockets implementation is 512. Note that regardless of the value of <b>iMaxUdpDg</b>, it is inadvisable to attempt to send a broadcast datagram which is larger than the Maximum Transmission Unit (MTU) for the network. (The Windows Sockets API does not provide a mechanism to discover the MTU, but it must be no less than 512 bytes.)</p>
<p class=dt>
<b>lpVendorInfo</b></p>
<p class=indent>
A far pointer to a vendor-specific data structure. The definition of this structure (if supplied) is beyond the scope of the Windows Sockets specification. For more information, see <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_Windows_Sockets_Programming_Considerations_2">
</object><a href=JavaScript:alink_1.Click()>Windows Sockets Programming Considerations</a> in the Win32 SDK documentation.</p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;In MFC, the <b>WSADATA</b> structure is returned by the <b>AfxSocketInit</b> function, which you call in your <code>InitInstance</code> function. You can retrieve the structure and store it in your program if you need to use information from it later.</p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_afxsocketinit.htm">AfxSocketInit</a></p>
</font></BODY>
</HTML>
