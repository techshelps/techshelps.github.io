<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CSocketFile::CSocketFile</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_csocketfile.3a3a.csocketfile"></a><sup></sup>CSocketFile::CSocketFile</h1>
<p>
<b>CSocketFile(</b> <b>CSocket*</b> <i>pSocket</i><b>,</b> <b>BOOL</b> <i>bArchiveCompatible</i> <b>=</b> <b>TRUE</b> <b>);</b></p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>pSocket</i></p>
<p class=indent>
The socket to attach to the <b>CSocketFile</b> object. </p>
<p class=dt>
<i>bArchiveCompatible</i></p>
<p class=indent>
Specifies whether the file object is for use with a <b>CArchive</b> object. Pass <b>FALSE</b> only if you want to use the <b>CSocketFile</b> object in a stand-alone manner as you would a stand-alone <b>CFile</b> object, with certain limitations. This flag changes how the <b>CArchive</b> object attached to the <b>CSocketFile</b> object manages its buffer for reading.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Constructs a <b>CSocketFile</b> object. The object’s destructor disassociates itself from the socket object when the object goes out of scope or is deleted.</p>
<p class=indent>
<B><b>Note</b></B>  A <b>CSocketFile</b> can also be used as a (limited) file without a <b>CArchive</b> object. By default, the <b>CSocketFile</b> constructor’s <i>bArchiveCompatible</i> parameter is <b>TRUE</b>. This specifies that the file object is for use with an archive. To use the file object without an archive, pass <b>FALSE</b> in the <i>bArchiveCompatible</i> parameter.</p>
<p>
In its “archive compatible” mode, a <b>CSocketFile</b> object provides better performance and reduces the danger of a “deadlock.” A deadlock occurs when both the sending and receiving sockets are waiting on each other, or for a common resource. This situation might occur if the <b>CArchive</b> object worked with the <b>CSocketFile</b> the way it does with a <b>CFile</b> object. With <b>CFile</b>, the archive can assume that if it receives fewer bytes than it requested, the end of file has been reached. </p>
<p>
With <b>CSocketFile</b>, however, data is message based; the buffer can contain multiple messages, so receiving fewer than the number of bytes requested does not imply end of file. The application does not block in this case as it might with <b>CFile</b>, and it can continue reading messages from the buffer until the buffer is empty. The <a href="_mfc_carchive.3a3a.isbufferempty.htm">CArchive::IsBufferEmpty</a> function is useful for monitoring the state of the archive’s buffer in such a case. </p>
<p>
For more information on the use of <b>CSocketFile</b>, see the articles <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Using_Sockets_with_Archives">
</object><a href=JavaScript:alink_1.Click()>Windows Sockets: Using Sockets with Archives</a> and <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Windows_Sockets.3a_.Example_of_Sockets_Using_Archives">
</object><a href=JavaScript:alink_2.Click()>Windows Sockets: Example of Sockets Using Archives</a> in <i>Visual C++ Programmer’s Guide</i>.</p>
<p>
<a href="_mfc_csocketfile.htm">CSocketFile Overview</a>  |&nbsp; <a href="_mfc_csocketfile_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cfile.3a3a.cfile.htm">CFile::CFile</a>, <a href="_mfc_cfile.3a3a.read.htm">CFile::Read</a></p>
</font></BODY>
</HTML>
