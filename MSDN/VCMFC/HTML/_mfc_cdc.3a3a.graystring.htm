<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CDC::GrayString</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_cdc.3a3a.graystring"></a><sup></sup>CDC::GrayString&nbsp; </h1>
<p>
<b>virtual</b> <b>BOOL</b> <b>GrayString(</b> <b>CBrush*</b> <i>pBrush</i><b>,</b> <b>BOOL</b> <b>(</b> <b>CALLBACK</b> <b>EXPORT*</b> <i>lpfnOutput</i> <b>)(</b> <b>HDC,</b> <b>LPARAM,</b> <b>int</b> <b>),</b> <b>LPARAM</b> <i>lpData</i><b>,</b> <b>int</b> <i>nCount</i><b>,</b> <b>int</b> <i>x</i><b>,</b> <b>int</b> <i>y</i><b>,</b> <b>int</b> <i>nWidth</i><b>,</b> <b>int</b> <i>nHeight</i> <b>);</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if the string is drawn, or 0 if either the <b>TextOut</b> function or the application-supplied output function returned 0, or if there was insufficient memory to create a memory bitmap for dimming.</p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>pBrush</i></p>
<p class=indent>
Identifies the brush to be used for dimming (graying).</p>
<p class=dt>
<i>lpfnOutput</i></p>
<p class=indent>
Specifies the procedure-instance address of the application-supplied callback function that will draw the string. For more information, see the description of the Windows <b>OutputFunc</b> <a href="_mfc_callback_function_for_cdc.3a3a.graystring.htm">callback function</a>. If this parameter is <b>NULL</b>, the system uses the Windows <b>TextOut</b> function to draw the string, and <i>lpData</i> is assumed to be a long pointer to the character string to be output.</p>
<p class=dt>
<i>lpData</i></p>
<p class=indent>
Specifies a far pointer to data to be passed to the output function. If <i>lpfnOutput</i> is <b>NULL</b>, <i>lpData</i> must be a long pointer to the string to be output.</p>
<p class=dt>
<i>nCount</i></p>
<p class=indent>
Specifies the number of characters to be output. If this parameter is 0, <b>GrayString</b> calculates the length of the string (assuming that <i>lpData</i> is a pointer to the string). If <i>nCount</i> is –1 and the function pointed to by <i>lpfnOutput</i> returns 0, the image is shown but not dimmed.</p>
<p class=dt>
<i>x</i></p>
<p class=indent>
Specifies the logical x-coordinate of the starting position of the rectangle that encloses the string.</p>
<p class=dt>
<i>y</i></p>
<p class=indent>
Specifies the logical y-coordinate of the starting position of the rectangle that encloses the string.</p>
<p class=dt>
<i>nWidth</i></p>
<p class=indent>
Specifies the width (in logical units) of the rectangle that encloses the string. If <i>nWidth</i> is 0, <b>GrayString</b> calculates the width of the area, assuming <i>lpData</i> is a pointer to the string.</p>
<p class=dt>
<i>nHeight</i></p>
<p class=indent>
Specifies the height (in logical units) of the rectangle that encloses the string. If <i>nHeight</i> is 0, <b>GrayString</b> calculates the height of the area, assuming <i>lpData</i> is a pointer to the string.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Draws dimmed (gray) text at the given location by writing the text in a memory bitmap, dimming the bitmap, and then copying the bitmap to the display. The function dims the text regardless of the selected brush and background. The <b>GrayString</b> member function uses the currently selected font. The <b>MM_TEXT</b> mapping mode must be selected before using this function.</p>
<p>
An application can draw dimmed (grayed) strings on devices that support a solid gray color without calling the <b>GrayString</b> member function. The system color <b>COLOR_GRAYTEXT</b> is the solid-gray system color used to draw disabled text. The application can call the <b>GetSysColor</b> Windows function to retrieve the color value of <b>COLOR_GRAYTEXT</b>. If the color is other than 0 (black), the application can call the <b>SetTextColor</b> member function to set the text color to the color value and then draw the string directly. If the retrieved color is black, the application must call <b>GrayString</b> to dim (gray) the text.</p>
<p>
If <i>lpfnOutput</i> is <b>NULL</b>, GDI uses the Windows <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_TextOut">
</object><a href=JavaScript:alink_1.Click()>TextOut</a> function, and <i>lpData</i> is assumed to be a far pointer to the character to be output. If the characters to be output cannot be handled by the <b>TextOut</b> member function (for example, the string is stored as a bitmap), the application must supply its own output function. </p>
<p>
Also note that all callback functions must trap Microsoft Foundation exceptions before returning to Windows, since exceptions cannot be thrown across callback boundaries. For more information about exceptions, see the article <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Exceptions">
</object><a href=JavaScript:alink_2.Click()>Exceptions</a> in <i>Visual C++ Programmer's Guide</i>. </p>
<p>
The callback function passed to <b>GrayString</b> must use the <b>__stdcall</b> calling convention and must be exported with <b>__declspec</b>.</p>
<p>
When the framework is in preview mode, a call to the <b>GrayString</b> member function is translated to a <b>TextOut</b> call, and the callback function is not called.</p>
<p>
<a href="_mfc_cdc.htm">CDC Overview</a>  |&nbsp; <a href="_mfc_cdc_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_GetSysColor">
</object><a href=JavaScript:alink_3.Click()>::GetSysColor</a>, <a href="_mfc_cdc.3a3a.settextcolor.htm">CDC::SetTextColor</a>, <a href="_mfc_cdc.3a3a.textout.htm">CDC::TextOut</a>, <object id=alink_4 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_GrayString">
</object><a href=JavaScript:alink_4.Click()>::GrayString</a></p>
</font></BODY>
</HTML>
