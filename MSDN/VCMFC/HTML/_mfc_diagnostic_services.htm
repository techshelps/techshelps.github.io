<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Diagnostic Services</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_diagnostic_services"></a>Diagnostic Services</h1>
<p>
The Microsoft Foundation Class Library supplies many diagnostic services that make debugging your programs easier. These diagnostic services include macros and global functions that allow you to track your program's memory allocations, dump the contents of objects during run time, and print debugging messages during run time. The macros and global functions for diagnostic services are grouped into the following categories:
<ul type=disc>
<li>
<a href="#_mfc_general_diagnostic_macros">General diagnostic macros</a><br><br></li>
<li>
<a href="#_mfc_general_diagnostic_variables_and_functions">General diagnostic functions and variables</a><br><br></li>
<li>
<a href="#_mfc_object_diagnostic_functions">Object diagnostic functions</a></li>
</ul>
<p>
These macros and functions are available for all classes derived from <b>CObject</b> in the Debug and Release versions of MFC. However, all except <b>DEBUG_NEW</b> and <b>VERIFY</b> do nothing in the Release version.</p>
<p>
In the Debug library, all allocated memory blocks are bracketed with a series of "guard bytes." If these bytes are disturbed by an errant memory write, then the diagnostic routines can report a problem. If you include the line</p>
<pre><code>#define new DEBUG_NEW
</code></pre>
<p>
in your implementation file, all calls to <b>new</b> will store the filename and line number where the memory allocation took place. The function <a href="_mfc_cmemorystate.3a3a.dumpallobjectssince.htm">CMemoryState::DumpAllObjectsSince</a> will display this extra information, allowing you to identify memory leaks. Refer also to the class <a href="_mfc_cdumpcontext.htm">CDumpContext</a> for additional information on diagnostic output.</p>
<p>
In addition, the C run-time library also supports a set of diagnostic functions you can use to debug your applications. For more information, see <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_CRT_Debug_Functions">
</object><a href=JavaScript:alink_1.Click()>Debug Routines</a> in the <i>Run-Time Library Reference</i>.</p>
<p class=label>
<b><a name="_mfc_general_diagnostic_macros"></a>MFC General Diagnostic Macros</b></p>
<table border=1 cellpadding=5 cols=2 frame=below rules=rows>
<tr valign=top>
<td width=27%><a href="_mfc_assert.htm">ASSERT</a></td>
<td width=73%>Prints a message and then aborts the program if the specified expression evaluates to <b>FALSE</b> in the Debug version of the library.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_assert_kindof.htm">ASSERT_KINDOF</a></td>
<td width=73%>Tests that an object is an object of the specified class or of a class derived from the specified class.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_assert_valid.htm">ASSERT_VALID</a></td>
<td width=73%>Tests the internal validity of an object by calling its <b>AssertValid</b> member function; typically overridden from <b>CObject</b>.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_debug_new.htm">DEBUG_NEW</a></td>
<td width=73%>Supplies a filename and line number for all object allocations in Debug mode to help find memory leaks. </td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_trace.htm">TRACE</a></td>
<td width=73%>Provides <b>printf</b>-like capability in the Debug version of the library.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_trace0.htm">TRACE0</a></td>
<td width=73%>Similar to <b>TRACE</b> but takes a format string with no arguments.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_trace1.htm">TRACE1</a></td>
<td width=73%>Similar to <b>TRACE</b> but takes a format string with a single argument.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_trace2.htm">TRACE2</a></td>
<td width=73%>Similar to <b>TRACE</b> but takes a format string with two arguments.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_trace3.htm">TRACE3</a></td>
<td width=73%>Similar to <b>TRACE</b> but takes a format string with three arguments.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_verify.htm">VERIFY</a></td>
<td width=73%>Similar to <b>ASSERT</b> but evaluates the expression in the Release version of the library as well as in the Debug version.</td>
</tr>
</table><br>
<p class=label>
<b><a name="_mfc_general_diagnostic_variables_and_functions"></a>MFC General Diagnostic Variables and Functions</b></p>
<table border=1 cellpadding=5 cols=2 frame=below rules=rows>
<tr valign=top>
<td width=27%><a href="_mfc_afxdump_variable.htm">afxDump</a></td>
<td width=73%>Global variable that sends <a href="_mfc_cdumpcontext.htm">CDumpContext</a> information to the debugger output window or to the debug terminal.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxmemdf.htm">afxMemDF</a></td>
<td width=73%>Global variable that controls the behavior of the debugging memory allocator.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxtraceenabled.htm">afxTraceEnabled</a></td>
<td width=73%>Global variable used to enable or disable output from the <b>TRACE</b> macro.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxtraceflags.htm">afxTraceFlags</a></td>
<td width=73%>Global variable used to turn on the built-in reporting features of MFC.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxcheckerror.htm">AfxCheckError</a></td>
<td width=73%>Global variable used to test the passed <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_mapi1book_C_TYPE_SCODE">
</object><a href=JavaScript:alink_2.Click()>SCODE</a> to see if it is an error and, if so, throws the appropriate error. </td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxcheckmemory.htm">AfxCheckMemory</a></td>
<td width=73%>Checks the integrity of all currently allocated memory.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxdump_function.htm">AfxDump</a></td>
<td width=73%>If called while in the debugger, dumps the state of an object while debugging.</td>
</tr>
<tr valign=top>
<td width=27%><a href="vcrefafxdumpstack.htm">AfxDumpStack</a></td>
<td width=73%>Generate an image of the current stack. This function is always linked statically. </td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxenablememorytracking.htm">AfxEnableMemoryTracking</a></td>
<td width=73%>Turns memory tracking on and off.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxismemoryblock.htm">AfxIsMemoryBlock</a></td>
<td width=73%>Verifies that a memory block has been properly allocated.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxisvalidaddress.htm">AfxIsValidAddress</a></td>
<td width=73%>Verifies that a memory address range is within the program's bounds.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxisvalidstring.htm">AfxIsValidString</a></td>
<td width=73%>Determines whether a pointer to a string is valid.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxsetallochook.htm">AfxSetAllocHook</a></td>
<td width=73%>Enables the calling of a function on each memory allocation.</td>
</tr>
</table><br>
<p class=label>
<b><a name="_mfc_object_diagnostic_functions"></a>MFC Object Diagnostic Functions</b></p>
<table border=1 cellpadding=5 cols=2 frame=below rules=rows>
<tr valign=top>
<td width=27%><a href="_mfc_afxdoforallclasses.htm">AfxDoForAllClasses</a></td>
<td width=73%>Performs a specified function on all <b>CObject</b>-derived classes that support run-time type checking.</td>
</tr>
<tr valign=top>
<td width=27%><a href="_mfc_afxdoforallobjects.htm">AfxDoForAllObjects</a></td>
<td width=73%>Performs a specified function on all <b>CObject</b>-derived objects that were allocated with <b>new</b>.</td>
</tr>
</table><br>
</font></BODY>
</HTML>
