<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CHttpFile::AddRequestHeaders</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_chttpfile.3a3a.addrequestheaders"></a>CHttpFile::AddRequestHeaders</h1>
<p>
<b>BOOL AddRequestHeaders( LPCTSTR </b><i>pstrHeaders</i><b>, DWORD </b><i>dwFlags</i><b> = HTTP_ADDREQ_FLAG_ADD_IF_NEW, int </b><i>dwHeadersLen</i><b> = -1 );</b></p>
<p>
<b>BOOL AddRequestHeaders( CString&amp; </b><i>str</i><b>, DWORD </b><i>dwFlags</i><b> = HTTP_ADDREQ_FLAG_ADD_IF_NEW );</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if successful; otherwise 0. If the call fails, the Win32 function <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_Win32_GetLastError">
</object><a href=JavaScript:alink_1.Click()>GetLastError</a> may be called to determine the cause of the error.</p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>pstrHeaders</i></p>
<p class=indent>
A pointer to a string containing the header or headers to append to the request. Each header must be terminated by a CR/LF pair.</p>
<p class=dt>
<i>dwFlags</i></p>
<p class=indent>
Modifies the semantics of the new headers. Can be one of the following:
<ul type=disc>
<li>
<b>HTTP_ADDREQ_FLAG_COALESCE</b>&nbsp;&nbsp;&nbsp;Merges headers of the same name, using the flag to add the first header found to the subsequent header. For example, "Accept: text/*" followed by "Accept: audio/*" results in the formation of the single header "Accept: text/*, audio/*". It is up to the calling application to ensure a cohesive scheme with respect to data received by requests sent with coalesced or separate headers. <br><br></li>
<li>
<b>HTTP_ADDREQ_FLAG_REPLACE</b>&nbsp;&nbsp;&nbsp;Performs a remove and add to replace the current header. The header name will be used to remove the current header, and the full value will be used to add the new header. If the header-value is empty and the header is found, it is removed. If not empty, the header-value is replaced.<br><br></li>
<li>
<b>HTTP_ADDREQ_FLAG_ADD_IF_NEW</b>&nbsp;&nbsp;&nbsp;Only adds the header if it does not already exist. If one exists, an error is returned.<br><br></li>
<li>
<b>HTTP_ADDREQ_FLAG_ADD</b>&nbsp;&nbsp;&nbsp;Used with REPLACE. Adds the header if it doesn’t exist.</li>
</ul>
<p class=dt>
<i>dwHeadersLen</i></p>
<p class=indent>
The length, in characters, of <i>pstrHeaders</i>. If this is -1L, then <i>pstrHeaders</i> is assumed to be zero-terminated and the length is computed.</p>
<p class=dt>
<i>str</i></p>
<p class=indent>
A reference to a <a href="_mfc_cstring.htm">CString</a> object containing the request header or headers to be added.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to add one or more HTTP request headers to the HTTP request handle. </p>
<p>
<b>AddRequestHeaders</b> appends additional, free-format headers to the HTTP request handle. It is intended for use by sophisticated clients who need detailed control over the exact request sent to the HTTP server. </p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;The application can pass multiple headers in <i>pstrHeaders</i> or <i>str</i> for an <b>AddRequestHeaders</b> call using <b>HTTP_ADDREQ_FLAG_ADD</b> or <b>HTTP_ADDREQ_FLAG_ADD_IF_NEW</b>. If the application tries to remove or replace a header using <b>HTTP_ADDREQ_FLAG_REMOVE</b> or <b>HTTP_ADDREQ_FLAG_REPLACE</b>, only one header can be supplied in <i>lpszHeaders</i>. </p>
<p>
<a href="_mfc_chttpfile.htm">CHttpFile Overview</a>  |&nbsp; <a href="_mfc_chttpfile_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cinternetfile.htm">CInternetFile</a></p>
</font></BODY>
</HTML>
