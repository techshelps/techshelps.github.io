<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CFtpConnection::GetFile</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_cftpconnection.3a3a.getfile"></a>CFtpConnection::GetFile</h1>
<p>
<b>BOOL GetFile( LPCTSTR </b><i>pstrRemoteFile</i><b>, LPCTSTR </b><i>pstrLocalFile</i><b>, BOOL </b><i>bFailIfExists</i><b> = TRUE, DWORD </b><i>dwAttributes</i><b> = FILE_ATTRIBUTE_NORMAL, DWORD </b><i>dwFlags</i><b> = FTP_TRANSFER_TYPE_BINARY, DWORD </b><i>dwContext</i><b> = 1 );</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if successful; otherwise 0. If the call fails, the Win32 function <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_Win32_GetLastError">
</object><a href=JavaScript:alink_1.Click()>GetLastError</a> may be called to determine the cause of the error.</p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>pstrRemoteFile</i></p>
<p class=indent>
A pointer to a null-terminated string containing the name of a file to retrieve from the FTP server.</p>
<p class=dt>
<i>pstrLocalFile</i></p>
<p class=indent>
A pointer to a null-terminated string containing the name of the file to create on the local system.</p>
<p class=dt>
<i>bFailIfExists</i></p>
<p class=indent>
Indicates whether the file name may already be used by an existing file. If the local file name already exists, and this parameter is <b>TRUE</b>, <b>GetFile</b> fails. Otherwise, <b>GetFile</b> will erase the existing copy of the file.</p>
<p class=dt>
<i>dwAttributes</i></p>
<p class=indent>
Indicates the attributes of the file. This can be any combination of the following FILE_ATTRIBUTE_* flags. 
<ul type=disc>
<li>
FILE_ATTRIBUTE_ARCHIVE&nbsp;&nbsp;&nbsp;The file is an archive file. Applications use this attribute to mark files for backup or removal.<br><br></li>
<li>
FILE_ATTRIBUTE_COMPRESSED&nbsp;&nbsp;&nbsp;The file or directory is compressed. For a file, compression means that all of the data in the file is compressed. For a directory, compression is the default for newly created files and subdirectories.<br><br></li>
<li>
FILE_ATTRIBUTE_DIRECTORY&nbsp;&nbsp;&nbsp;The file is a directory.<br><br></li>
<li>
FILE_ATTRIBUTE_NORMAL&nbsp;&nbsp;&nbsp;The file has no other attributes set. This attribute is valid only if used alone. All other file attributes override FILE_ATTRIBUTE_NORMAL:<br><br></li>
<li>
FILE_ATTRIBUTE_HIDDEN&nbsp;&nbsp;&nbsp;The file is hidden. It is not to be included in an ordinary directory listing.<br><br></li>
<li>
FILE_ATTRIBUTE_READONLY&nbsp;&nbsp;&nbsp;The file is read only. Applications can read the file but cannot write to it or delete it.<br><br></li>
<li>
FILE_ATTRIBUTE_SYSTEM&nbsp;&nbsp;&nbsp;The file is part of or is used exclusively by the operating system.<br><br></li>
<li>
FILE_ATTRIBUTE_TEMPORARY&nbsp;&nbsp;&nbsp;The file is being used for temporary storage. Applications should write to the file only if absolutely necessary. Most of the file’s data remains in memory without being flushed to the media because the file will soon be deleted.</li>
</ul>
<p class=dt>
<i>dwFlags</i></p>
<p class=indent>
Specifies the conditions under which the transfer occurs. This parameter can be any of the <i>dwFlags</i> values described in <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_Win32_FtpGetFile">
</object><a href=JavaScript:alink_2.Click()>FtpGetFile</a>  in the <i>Platform SDK</i>.</p>
<p class=dt>
<i>dwContext</i></p>
<p class=indent>
The context identifier for the file retrieval. See <b>Remarks</b> for more information about <i>dwContext</i>.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to get a file from an FTP server and store it on the local machine.</p>
<p>
<b>GetFile</b> is a high-level routine that handles all of the overhead associated with reading a file from an FTP server and storing it locally. Applications that only retrieve file data, or that require close control over the file transfer, should use <b>OpenFile</b> and <a href="_mfc_cinternetfile.3a3a.read.htm">CInternetFile::Read</a> instead. </p>
<p>
If <i>dwFlags</i> is FILE_TRANSFER_TYPE_ASCII, translation of file data also converts control and formatting characters to Windows equivalents. The default transfer is binary mode, where the file is downloaded in the same format as it is stored on the server. </p>
<p>
Both <i>pstrRemoteFile</i> and <i>pstrLocalFile</i> can be either partially qualified filenames relative to the current directory or fully qualified. A backslash (\) or forward slash (/) can be used as the directory separator for either name. <b>GetFile</b> translates the directory name separators to the appropriate characters before they are used. </p>
<p>
Override the <i>dwContext</i> default to set the context identifier to a value of your choosing. The context identifier is associated with this specific operation of the <b>CFtpConnection</b> object created by its <a href="_mfc_cinternetsession.htm">CInternetSession</a> object. The value is returned to <a href="_mfc_cinternetsession.3a3a.onstatuscallback.htm">CInternetSession::OnStatusCallback</a> to provide status on the operation with which it is identified. See the article <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Internet_First_Steps.3a_.WinInet">
</object><a href=JavaScript:alink_3.Click()>Internet First Steps: WinInet</a> for more information about the context identifier.</p>
<p>
<a href="_mfc_cftpconnection.htm">CFtpConnection Overview</a>  |&nbsp; <a href="_mfc_cftpconnection_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cinternetconnection.htm">CInternetConnection</a></p>
</font></BODY>
</HTML>
