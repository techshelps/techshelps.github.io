<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CHttpServerContext::ServerSupportFunction</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_chttpservercontext.3a3a.serversupportfunction"></a>CHttpServerContext::ServerSupportFunction</h1>
<p>
<b>BOOL ServerSupportFunction( DWORD </b><i>dwHSERRequest</i><b>, LPVOID </b><i>lpvBuffer</i><b>, LPDWORD </b><i>lpdwSize</i><b>, LPDWORD </b><i>lpdwDataType</i><b> );</b> </p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if successful, otherwise 0.</p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>dwHSERRequest</i></p>
<p class=indent>
An HTTP Server Extension value. See the Remarks section for a list of the supported values.</p>
<p class=dt>
<i>lpvBuffer</i></p>
<p class=indent>
When used with <b>HSE_REQ_SEND_RESPONSE_HEADER</b>, it points to a null terminated optional status string (for example, “401 Access Denied"). If this buffer is null, a default response of "200 OK" will be sent by this function. When used with <b>HSE_REQ_DONE_WITH_SESSION</b>, it points to a <b>DWORD</b> indicating the status code of the request.</p>
<p class=dt>
<i>lpdwSize</i></p>
<p class=indent>
When used with <b>HSE_REQ_SEND_RESPONSE_HEADER</b>, it points to the size of the buffer <i>lpdwDataType</i>.</p>
<p class=dt>
<i>lpdwDataType</i></p>
<p class=indent>
When used with <b>HSE_REQ_SEND_RESPONSE_HEADER</b>, this is a null-terminated string pointing to optional headers or data to be appended and sent with the header. If this is <b>NULL</b>, the header will be terminated by a “\r\n” pair.</p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;General purpose functions should have a <i>dwHSERequest</i> value larger than <b>HSE_REQ_END_RESERVED</b>. Values up to <b>HSE_REQ_END_RESERVED</b> are reserved for mandatory ServerSupportFunctions and should not be used.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to provide the ISA with some general purpose functions as well as functions that are specific to HTTP server implementation. </p>
<p>
The HTTP Server Extension value represented by <i>dwHSERRequest</i>  can be one of the following:</p>
<p class=dt>
<b>HSE_REQ_SEND_URL_REDIRECT_RESP</b></p>
<p class=indent>
Sends a <code>302</code>(<code>URL Redirec</code>t) message to the client. No further processing is needed after the call. This operation is similar to specifying "URI: &lt;URL&gt;" in a CGI script header. The variable <i>lpvBuffer</i> should point to a null terminated URL string. Variable <i>lpdwSize</i> should have the size of <i>lpvBuffer</i>. Variable <i>lpdwDataType</i> is ignored.</p>
<p class=dt>
<b>HSE_REQ_SEND_URL</b></p>
<p class=indent>
Sends the data specified by the URL to the client as if the client had requested that URL. The Null terminated URL pointed to by <i>lpvBuffer</i> MUST be on the server and must not specify protocol information (i.e. it must begin with a '/' ). No further processing is required after this call. Variable <i>lpdwSize</i> points to a <b>DWORD</b> holding the size of <i>lpvBuffer</i>. Variable <i>lpdwDataType</i> is ignored.</p>
<p class=dt>
<b>HSE_REQ_SEND_RESPONSE_HEADER</b></p>
<p class=indent>
Sends a complete HTTP server response header including the status, server version, message time and MIME version. The <b>ISA</b> or server extension should append other HTTP headers at the end such as the Content-Type, Content-Length, and so forth, followed by an extra “\r\n”.</p>
<p class=dt>
<b>HSE_REQ_DONE_WITH_SESSION</b></p>
<p class=indent>
If the ISA or server extension wants to hold onto the session because it has extended processing requirements, it needs to tell the server when the session is finished so the server can close it and free the related structures. Variables <i>lpvBuffer</i>, <i>lpdwSize</i>, and <i>lpdwDataType</i> are all ignored.</p>
<p class=dt>
<b>HSE_REQ_END_RESERVED</b></p>
<p class=indent>
Functions higher than this value are server specific and may not be available on all web servers that support ISAPI.</p>
<p class=dt>
<b>HSE_REQ_MAP_URL_TO_PATH</b></p>
<p class=indent>
The <i>lpvBuffer</i> parameter is a pointer to the buffer that contains the logical path on entry and the physical path on exit. The <i>lpdwSize</i> parameter is a pointer to the <b>DWORD</b> containing the size of the buffer passed in <i>lpvBuffer</i> on entry, and the number of bytes placed in the buffer on exit. The <i>lpdwDataType</i> parameter is ignored). A Microsoft-specific extension.</p>
<p class=dt>
<b>HSE_REQ_GET_SSPI_INFO</b></p>
<p class=indent>
The <i>lpvBuffer</i> is filled in with the context handle and <i>*lpdwDataType</i> is filled in with the credential handle. A context handle specifies a pointer type or a type identifier. A credential handle specifies authentication and authorization.</p>
<p class=dt>
<b>HSE_REQ_TRANSMIT_FILE</b></p>
<p class=indent>
See <a href="vcrefchttpservercontexttransmitfile.htm">TransmitFile</a> for an easier method of transmitting a file to a requester.</p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;The server does not ensure that the buffers are large enough before filling in the handles, and <i>lpdwSize</i> is not updated to reflect the amount of data copied into the <i>lpvBuffer</i> buffer. Since these are fixed size structures, it is assumed the pointers passed in are pointers to the structure and must be at least as large as the request structures. </p>
<p>
<a href="_mfc_chttpservercontext.htm">CHttpServerContext Overview</a>  |&nbsp; <a href="_mfc_chttpservercontext_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p class=label>
<b>See Also</b></p>
<p>
<a href="_mfc_chttpfiltercontext.3a3a.serversupportfunction.htm">CHttpFilterContext::ServerSupportFunction</a>, <a href="vcrefchttpservercontexttransmitfile.htm">CHttpServerContext::TransmitFile</a></p>
</font></BODY>
</HTML>
