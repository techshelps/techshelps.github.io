<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CAsyncSocket::ShutDown</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_casyncsocket.3a3a.shutdown"></a><sup></sup>CAsyncSocket::ShutDown</h1>
<p>
<b>BOOL</b> <b>ShutDown(</b> <b>int</b> <i>nHow</i> <b>=</b> <b>sends</b> <b>);</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if the function is successful; otherwise 0, and a specific error code can be retrieved by calling <a href="_mfc_casyncsocket.3a3a.getlasterror.htm">GetLastError</a>. The following errors apply to this member function:
<ul type=disc>
<li>
<b>WSANOTINITIALISED</b>&nbsp;&nbsp;&nbsp;A successful <a href="_mfc_afxsocketinit.htm">AfxSocketInit</a> must occur before using this API.<br><br></li>
<li>
<b>WSAENETDOWN</b>&nbsp;&nbsp;&nbsp;The Windows Sockets implementation detected that the network subsystem failed.<br><br></li>
<li>
<b>WSAEINVAL</b>&nbsp;&nbsp;&nbsp;<i>nHow</i> is not valid.<br><br></li>
<li>
<b>WSAEINPROGRESS</b>&nbsp;&nbsp;&nbsp;A blocking Windows Sockets operation is in progress.<br><br></li>
<li>
<b>WSAENOTCONN</b>&nbsp;&nbsp;&nbsp;The socket is not connected (<b>SOCK_STREAM</b> only).<br><br></li>
<li>
<b>WSAENOTSOCK</b>&nbsp;&nbsp;&nbsp;The descriptor is not a socket.</li>
</ul>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>nHow</i></p>
<p class=indent>
A flag that describes what types of operation will no longer be allowed, using the following enumerated values:
<ul type=disc>
<li>
<b>receives = 0</b><br><br></li>
<li>
<b>sends = 1</b><br><br></li>
<li>
<b>both = 2</b></li>
</ul>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to disable sends and/or receives on the socket. <b>ShutDown</b> is used on all types of sockets to disable reception, transmission, or both. If <i>nHow</i> is 0, subsequent receives on the socket will be disallowed. This has no effect on the lower protocol layers. </p>
<p>
For Transmission Control Protocol (TCP), the TCP window is not changed and incoming data will be accepted (but not acknowledged) until the window is exhausted. For User Datagram Protocol (UDP), incoming datagrams are accepted and queued. In no case will an ICMP error packet be generated. If <i>nHow</i> is 1, subsequent sends are disallowed. For TCP sockets, a FIN will be sent. Setting <i>nHow</i> to 2 disables both sends and receives as described above. </p>
<p>
Note that <b>ShutDown</b> does not close the socket, and resources attached to the socket will not be freed until <b>Close</b> is called. An application should not rely on being able to reuse a socket after it has been shut down. In particular, a Windows Sockets implementation is not required to support the use of <b>Connect</b> on such a socket.</p>
<p>
<a href="_mfc_casyncsocket.htm">CAsyncSocket Overview</a>  |&nbsp; <a href="_mfc_casyncsocket_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_casyncsocket.3a3a.connect.htm">CAsyncSocket::Connect</a>, <a href="_mfc_casyncsocket.3a3a.create.htm">CAsyncSocket::Create</a></p>
</font></BODY>
</HTML>
