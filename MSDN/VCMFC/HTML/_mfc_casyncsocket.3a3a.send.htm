<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CAsyncSocket::Send</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_casyncsocket.3a3a.send"></a><sup></sup>CAsyncSocket::Send</h1>
<p>
<b>virtual</b> <b>int</b> <b>Send(</b> <b>const</b> <b>void*</b> <i>lpBuf</i><b>,</b> <b>int</b> <i>nBufLen</i><b>,</b> <b>int</b> <i>nFlags</i> <b>=</b> <b>0</b> <b>);</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
If no error occurs, <b>Send</b> returns the total number of characters sent. (Note that this can be less than the number indicated by <i>nBufLen</i>.) Otherwise, a value of <b>SOCKET_ERROR</b> is returned, and a specific error code can be retrieved by calling <a href="_mfc_casyncsocket.3a3a.getlasterror.htm">GetLastError</a>. The following errors apply to this member function:
<ul type=disc>
<li>
<b>WSANOTINITIALISED</b>&nbsp;&nbsp;&nbsp;A successful <a href="_mfc_afxsocketinit.htm">AfxSocketInit</a> must occur before using this API.<br><br></li>
<li>
<b>WSAENETDOWN</b>&nbsp;&nbsp;&nbsp;The Windows Sockets implementation detected that the network subsystem failed.<br><br></li>
<li>
<b>WSAEACCES</b>&nbsp;&nbsp;&nbsp;The requested address is a broadcast address, but the appropriate flag was not set.<br><br></li>
<li>
<b>WSAEINPROGRESS</b>&nbsp;&nbsp;&nbsp;A blocking Windows Sockets operation is in progress.<br><br></li>
<li>
<b>WSAEFAULT</b>&nbsp;&nbsp;&nbsp;The <i>lpBuf</i> argument is not in a valid part of the user address space.<br><br></li>
<li>
<b>WSAENETRESET</b>&nbsp;&nbsp;&nbsp;The connection must be reset because the Windows Sockets implementation dropped it.<br><br></li>
<li>
<b>WSAENOBUFS</b>&nbsp;&nbsp;&nbsp;The Windows Sockets implementation reports a buffer deadlock.<br><br></li>
<li>
<b>WSAENOTCONN</b>&nbsp;&nbsp;&nbsp;The socket is not connected.<br><br></li>
<li>
<b>WSAENOTSOCK</b>&nbsp;&nbsp;&nbsp;The descriptor is not a socket.<br><br></li>
<li>
<b>WSAEOPNOTSUPP</b>&nbsp;&nbsp;&nbsp;<b>MSG_OOB</b> was specified, but the socket is not of type <b>SOCK_STREAM</b>.<br><br></li>
<li>
<b>WSAESHUTDOWN</b>&nbsp;&nbsp;&nbsp;The socket has been shut down; it is not possible to call <b>Send</b> on a socket after <b>ShutDown</b> has been invoked with <i>nHow</i> set to 1 or 2.<br><br></li>
<li>
<b>WSAEWOULDBLOCK</b>&nbsp;&nbsp;&nbsp;The socket is marked as nonblocking and the requested operation would block.<br><br></li>
<li>
<b>WSAEMSGSIZE</b>&nbsp;&nbsp;&nbsp;The socket is of type <b>SOCK_DGRAM</b>, and the datagram is larger than the maximum supported by the Windows Sockets implementation.<br><br></li>
<li>
<b>WSAEINVAL</b>&nbsp;&nbsp;&nbsp;The socket has not been bound with <b>Bind</b>.<br><br></li>
<li>
<b>WSAECONNABORTED</b>&nbsp;&nbsp;&nbsp;The virtual circuit was aborted due to timeout or other failure.<br><br></li>
<li>
<b>WSAECONNRESET</b>&nbsp;&nbsp;&nbsp;The virtual circuit was reset by the remote side.</li>
</ul>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>lpBuf</i></p>
<p class=indent>
A buffer containing the data to be transmitted.</p>
<p class=dt>
<i>nBufLen</i></p>
<p class=indent>
The length of the data in <i>lpBuf</i> in bytes.</p>
<p class=dt>
<i>nFlags</i></p>
<p class=indent>
Specifies the way in which the call is made. The semantics of this function are determined by the socket options and the <i>nFlags</i> parameter. The latter is constructed by combining any of the following values with the C++ <b>OR</b> operator:
<ul type=disc>
<li>
<b>MSG_DONTROUTE</b>&nbsp;&nbsp;&nbsp;Specifies that the data should not be subject to routing. A Windows Sockets supplier can choose to ignore this flag; see also the discussion of the <b>SO_DONTROUTE</b> option in <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_Windows_Sockets_Programming_Considerations_2">
</object><a href=JavaScript:alink_1.Click()>Windows Sockets Programming Considerations</a> in the Win32 SDK documentation.<br><br></li>
<li>
<b>MSG_OOB</b>&nbsp;&nbsp;&nbsp;Send out-of-band data (<b>SOCK_STREAM</b> only).</li>
</ul>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to send data on a connected socket. <b>Send</b> is used to write outgoing data on connected stream or datagram sockets. For datagram sockets, care must be taken not to exceed the maximum IP packet size of the underlying subnets, which is given by the <b>iMaxUdpDg</b> element in the <a href="_mfc_wsadata_structure.htm">WSADATA</a> structure returned by <b>AfxSocketInit</b>. If the data is too long to pass atomically through the underlying protocol, the error <b>WSAEMSGSIZE</b> is returned via <b>GetLastError</b>, and no data is transmitted.</p>
<p>
Note that for a datagram socket the successful completion of a <b>Send</b> does not indicate that the data was successfully delivered.</p>
<p>
On <b>CAsyncSocket</b> objects of type <b>SOCK_STREAM</b>, the number of bytes written can be between 1 and the requested length, depending on buffer availability on both the local and foreign hosts. </p>
<p>
<a href="_mfc_casyncsocket.htm">CAsyncSocket Overview</a>  |&nbsp; <a href="_mfc_casyncsocket_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_casyncsocket.3a3a.create.htm">CAsyncSocket::Create</a>, <a href="_mfc_casyncsocket.3a3a.receive.htm">CAsyncSocket::Receive</a>, <a href="_mfc_casyncsocket.3a3a.receivefrom.htm">CAsyncSocket::ReceiveFrom</a>, <a href="_mfc_casyncsocket.3a3a.sendto.htm">CAsyncSocket::SendTo</a></p>
</font></BODY>
</HTML>
