<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>BITMAPINFO Structure</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="_mfc_bitmapinfo_structure"></a><sup></sup>BITMAPINFO Structure</h1>
<p>
The <b>BITMAPINFO</b> structure has the following form:</p>
<pre><code>typedef struct tagBITMAPINFO {
 &nbsp;&nbsp; BITMAPINFOHEADER&nbsp;&nbsp;&nbsp; bmiHeader;
 &nbsp;&nbsp; RGBQUAD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bmiColors[1];
} BITMAPINFO;
</code></pre>
<p>
The <b>BITMAPINFO</b> structure defines the dimensions and color information for a Windows device-independent bitmap (DIB). </p>
<p class=label>
<b>Members</b></p>
<p class=dt>
<b>bmiHeader</b></p>
<p class=indent>
Specifies a <b>BITMAPINFOHEADER</b> structure that contains information about the dimensions and color format of a device-independent bitmap. </p>
<p class=dt>
<b>bmiColors</b></p>
<p class=indent>
Specifies an array of <b>RGBQUAD</b> or <b>DWORD</b> data types that define the colors in the bitmap. </p>
<p class=label>
<b>Comments</b></p>
<p>
A device-independent bitmap consists of two distinct parts: a <b>BITMAPINFO</b> structure describing the dimensions and colors of the bitmap, and an array of bytes defining the pixels of the bitmap. The bits in the array are packed together, but each scan line must be padded with zeroes to end on a <b>LONG</b> boundary. If the height is positive, the origin of the bitmap is the lower-left corner. If the height is negative, the origin is the upper-left corner. </p>
<p>
The <b>biBitCount</b> member of the <b>BITMAPINFOHEADER</b> structure determines the number of bits that define each pixel and the maximum number of colors in the bitmap. This member can be one of the following values: 
<ul type=disc>
<li>
The bitmap is monochrome, and the <b>bmiColors</b> member contains two entries. Each bit in the bitmap array represents a pixel. If the bit is clear, the pixel is displayed with the color of the first entry in the <b>bmiColors</b> table; if the bit is set, the pixel has the color of the second entry in the table.<br><br></li>
<li>
The bitmap has a maximum of 16 colors, and the <b>bmiColors</b> member contains up to 16 entries. Each pixel in the bitmap is represented by a 4-bit index into the color table. For example, if the first byte in the bitmap is 0x1F, the byte represents two pixels. The first pixel contains the color in the second table entry, and the second pixel contains the color in the sixteenth table entry.<br><br></li>
<li>
The bitmap has a maximum of 256 colors, and the <b>bmiColors</b> member contains up to 256 entries. In this case, each byte in the array represents a single pixel.<br><br></li>
<li>
The bitmap has a maximum of 216 colors. The <b>biCompression</b> member of the <b>BITMAPINFOHEADER</b> must be <b>BI_BITFIELDS</b>. The <b>bmiColors</b> member contains 3 <b>DWORD</b> color masks which specify the red, green, and blue components, respectively, of each pixel. Bits set in the <b>DWORD</b> mask must be contiguous and should not overlap the bits of another mask. All the bits in the pixel do not have to be used. Each <b>WORD</b> in the array represents a single pixel.<br><br></li>
<li>
The bitmap has a maximum of 224 colors, and the <b>bmiColors</b> member is <b>NULL</b>. Each 3-byte triplet in the bitmap array represents the relative intensities of blue, green, and red, respectively, of a pixel.<br><br></li>
<li>
The bitmap has a maximum of 232 colors. The <b>biCompression</b> member of the <b>BITMAPINFOHEADER</b> must be <b>BI_BITFIELDS</b>. The <b>bmiColors</b> member contains three <b>DWORD</b> color masks which specify the red, green, and blue components, respectively, of each pixel. Bits set in the <b>DWORD</b> mask must be contiguous and should not overlap the bits of another mask. All the bits in the pixel do not have to be used. Each <b>DWORD</b> in the array represents a single pixel.</li>
</ul>
<p>
The <b>biClrUsed</b> member of the <b>BITMAPINFOHEADER</b> structure specifies the number of color indices in the color table that are actually used by the bitmap. If the <b>biClrUsed</b> member is set to zero, the bitmap uses the maximum number of colors corresponding to the value of the <b>biBitCount</b> member.</p>
<p>
The colors in the <b>bmiColors</b> table should appear in order of importance. Alternatively, for functions that use DIBs, the <b>bmiColors</b> member can be an array of 16-bit unsigned integers that specify indices into the currently realized logical palette, instead of explicit RGB values. In this case, an application using the bitmap must call the Windows DIB functions (<object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_CreateDIBitmap">
</object><a href=JavaScript:alink_1.Click()>CreateDIBitmap</a>, <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_CreateDIBPatternBrush">
</object><a href=JavaScript:alink_2.Click()>CreateDIBPatternBrush</a>, and <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_WIN32_CreateDIBSection">
</object><a href=JavaScript:alink_3.Click()>CreateDIBSection</a>) with the <b>iUsage</b> parameter set to <b>DIB_PAL_COLORS</b>.</p>
<p>
If the bitmap is a packed bitmap (that is, a bitmap in which the bitmap array immediately follows the <b>BITMAPINFO</b> header and which is referenced by a single pointer), the <b>biClrUsed</b> member must be set to an even number when using the <b>DIB_PAL_COLORS</b> mode so the DIB bitmap array starts on a <b>DWORD</b> boundary. </p>
<p class=indent>
<B><b>Note</b></B>&nbsp;&nbsp;&nbsp;The <b>bmiColors</b> member should not contain palette indices if the bitmap is to be stored in a file or transferred to another application. Unless the application has exclusive use and control of the bitmap, the bitmap color table should contain explicit RGB values.</p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cbrush.3a3a.createdibpatternbrush.htm">CBrush::CreateDIBPatternBrush</a></p>
</font></BODY>
</HTML>
