<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CHttpFile::SendRequestEx</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY>
<font face="verdana,arial,helvetica" size="2">
<h1><a name="vcrefchttpfilesendrequestex"></a>CHttpFile::SendRequestEx</h1>
<p>
<b>BOOL SendRequestEx( DWORD </b><i>dwTotalLen</i><b>, DWORD </b><i>dwFlags</i><b> = HSR_INITIATE, DWORD </b><i>dwContext</i><b> = 1);<br>
throw( CInternetException )</b></p>
<p>
<b>BOOL SendRequestEx( LPINTERNET_BUFFERS </b><i>lpBuffIn</i><b>, LPINTERNET_BUFFERS </b><i>lpBuffOut</i><b>, DWORD </b><i>dwFlags</i><b> = HSR_INITIATE, DWORD </b><i>dwContext</i><b> = 1 );<br>
throw( CInternetException )</b></p>
<p class=label>
<b>Return Value</b></p>
<p>
Nonzero if successful; otherwise 0. If the call fails, determine the cause of the failure by examining the thrown <a href="_mfc_cinternetexception.htm">CInternetException</a> object.</p>
<p class=label>
<b>Parameters</b></p>
<p class=dt>
<i>dwTotalLen</i></p>
<p class=indent>
Number of bytes to be sent in the request.</p>
<p class=dt>
<i>dwFlags</i></p>
<p class=indent>
Flags describing the operation. For a list of appropriate flags, see <object id=alink_1 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_httpsendrequestex">
</object><a href=JavaScript:alink_1.Click()>HttpSendRequestEx</a> in the <i>Platform SDK.</i></p>
<p class=dt>
<i>dwContext</i></p>
<p class=indent>
The context identifier for the <b>CHttpFile</b> operation. See Remarks for more information about this parameter.</p>
<p class=dt>
<i>lpBuffIn</i></p>
<p class=indent>
Pointer to an initialized <object id=alink_2 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_win32_internet_buffers">
</object><a href=JavaScript:alink_2.Click()>INTERNET_BUFFERS</a> that describes the input buffer used for the operation.</p>
<p class=dt>
<i>lpBuffOut</i></p>
<p class=indent>
Pointer to an initialized <b>INTERNET_BUFFERS</b> that describes the output buffer used for the operation.</p>
<p class=label>
<b>Remarks</b></p>
<p>
Call this member function to send a request to an HTTP server. This function allows your application to send data using the <a href="_mfc_cinternetfile.3a3a.write.htm">Write</a> and <a href="_mfc_cinternetfile.3a3a.writestring.htm">WriteString</a> methods of <b>CInternetFile</b>. You must know the length of the data to send before calling either override of this function. The first override allows you to specify the length of data you’d like to send. The second override accepts pointers to <b>INTERNET_BUFFERS</b> structures, which can be used to describe the buffer in great detail.</p>
<p>
After content is written to the file, call <a href="vcrefchttpfileendrequest.htm">EndRequest</a> to end the operation.</p>
<p>
The default value for <i>dwContext</i> is sent by MFC to the <b>CHttpFile</b> object from the <a href="_mfc_cinternetsession.htm">CInternetSession</a> object that created the <b>CHttpFile</b> object. When you call <a href="_mfc_cinternetsession.3a3a.openurl.htm">CInternetSession::OpenURL</a> or <a href="_mfc_chttpconnection.htm">CHttpConnection</a> to construct a <b>CHttpFile</b> object, you can override the default to set the context identifier to a value of your choosing. The context identifier is returned to <a href="_mfc_cinternetsession.3a3a.onstatuscallback.htm">CInternetSession::OnStatusCallback</a> to provide status on the object with which it is identified. See the article <object id=alink_3 type="application/x-oleobject"
	classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
<PARAM name="Command" value="ALink">
<PARAM name="DefaultTopic" value="_topic_not_found.htm">
<PARAM name="Item1" value="">
<PARAM name="Item2" value="_core_Internet_First_Steps.3a_.WinInet">
</object><a href=JavaScript:alink_3.Click()>Internet First Steps: WinInet</a> for more information about the context identifier.</p>
<p class=label>
<b>Example</b></p>
<p>
This code fragment sends the content of a string to a DLL named ISAPI.DLL on a server named MOOSEBOY. While this example uses only one call to <b>WriteString</b>, using multiple calls to send data in blocks is acceptable.</p>
<pre><code>CString strData = “Some very long data to be POSTed here!”;
pServer = sess.GetHttpConnection("mooseboy");
pFile = pServer-&gt;OpenRequest(CHttpConnection::HTTP_VERB_POST, "/isapi.dll?");
pFile-&gt;SendRequestEx(strData.GetLength());

pFile-&gt;WriteString(strData);   
pFile-&gt;EndRequest();
</code></pre>
<p>
<a href="_mfc_chttpfile.htm">CHttpFile Overview</a>  |&nbsp; <a href="_mfc_chttpfile_class_members.htm">Class Members</a>  |&nbsp; <a href="_mfc_hierarchy_chart.htm">Hierarchy Chart</a></p>
<p>
<b>See Also</b>&nbsp;&nbsp;&nbsp;<a href="_mfc_cinternetfile.htm">CInternetFile</a>, <a href="_mfc_chttpfile.3a3a.sendrequest.htm">CHttpFile::SendRequest</a></p>
</font></BODY>
</HTML>
