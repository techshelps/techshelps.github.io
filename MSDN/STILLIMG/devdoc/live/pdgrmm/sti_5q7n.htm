<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Still Image Run-Time Components</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_still_image_run_time_components"></a>Still Image Run-Time Components</h3>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
The STI system is composed of three run-time components:
<ul>
<li>
<a href="#_win32_still_image_event_monitor">Event Monitor</a></li>
<li>
<a href="#_win32_still_image_control_center">Control Center</a></li>
<li>
<a href="#_win32_still_image_control_panel">Control Panel</a> </li>
</ul>
<p>
The STI architecture components provide the following services for use by the Still Image Control Panel, the Still Image Control Center, and Still Image-aware applications:
<ul>
<li>
Maintain the event types that are associated with devices. These events are identified by the IHV as push events for their device.</li>
<li>
Dispatch push events to the Control Center.</li>
<li>
Maintain a list of all push model-aware applications.</li>
<li>
Launch or notify an application on behalf of the Control Center and provide information to the application as to which device and event initiated the notification.</li>
</ul>

<h4><a name="_win32_still_image_event_monitor"></a>Still Image Event Monitor</h4>
<p>
The Event Monitor maintains a list of active push model devices. Devices have a capability that indicates they support push model events. When devices are installed or removed, they can be added or deleted to the Event Monitor's device list using Plug And Play messages. They can also be added or deleted by the STI Control Panel.</p>
<p>
The Event Monitor opens all devices that support the push model. The device is opened in control mode. All devices that are opened in control mode are opened for push model events. Since the Event Monitor should be the only component receiving push model events, the Event Monitor is the only component able to open the devices in control mode. Other software, such as application programs, can open the devices in data mode. When a device is opened in data mode, it is functioning under the pull model of data acquisition. The Event Monitor does not place a restriction on the number of programs that open a device in data mode.</p>
<p>
The Event Monitor waits for events on all open image acquisition devices. Currently, few devices are capable of actually generating an event directly from the device when data transfer has been initiated. In most cases, a separate thread within the Still Image Event Monitor simulates this behavior by polling the device and causing an event when the device becomes active.</p>
<p>
The Event Monitor directs device events to the Control Center.</p>

<h4><a name="_win32_still_image_control_center"></a>Still Image Control Center</h4>
<p>
The Control Center implements a specific policy for how device push events are interpreted. The Control Center uses the list of applications registered as being push model-aware, and the list of those applications that are running. </p>
<p>
It also maintains a list of device events that are associated with applications. You create the list that associates device events and applications with the <a href="#_win32_still_image_control_panel">Still Image Control Panel</a>. Registering an application as push model-aware using the <a href="sti_948e.htm"><b>IStillImage::RegisterLaunchApplication</b></a> function does not connect it with particular device events. You must create the association between a device event and an application with the Control Panel. If this is not done, the application will not receive push events from a device.</p>
<p>
When the device event occurs, the Control Center launches the application associated with that device event. The application is launched with arguments of <i>Event:event_name</i> and <i>Device:STI_device_friendly_name</i> on the command line. However, the application doesn't parse these arguments off the command line. Instead, there is a method called <a href="sti_5odq.htm"><b>IStillImage::GetSTILaunchInformation</b></a> that returns the device event and the device-friendly name.</p>
<p>
The control center uses the following simple policy to dispatch device events:
<ul>
<li>
Upon receiving a device event from the Event Monitor, the Control Center obtains the subset of all registered applications you have selected to respond to this device event. This list is referred to as PREFERREDAPPS. The Control Center maintains this information.</li>
<li>
If there are PREFERREDAPPS selected for this device event and PREFERREDAPPS has only one item, it is launched. Otherwise, a dialog box containing PREFERREDAPPS is displayed and you select the application to be launched.</li>
<li>
Otherwise, you are informed that no application is associated with the event. If this is the case, the device has essentially been disabled for push model behavior.</li>
</ul>
<p>
In the current release, the Control Panel only allows one of the registered application to be selected. You will never see a dialog box asking you to choose one of several applications. This restriction will be removed in future releases.</p>

<h4><a name="_win32_still_image_control_panel"></a>Still Image Control Panel</h4>
<p>
The STI Control Panel provides you with a common interface for directing some of the Control Center behavior. These behaviors include:
<ul>
<li>
<i>Enumerate devices.</i> Lists the installed still-image devices.</li>
<li>
<i>Add or remove devices.</i> Still-image devices may be added or removed.</li>
<li>
<i>Test devices.</i> Allows verification of still-image device installation and operation.</li>
<li>
<i>Configure or control devices. </i>For each device, the Control Center adds a Microsoft or vendor property sheet to the Control Panel. The property sheet allows you to alter the behavior of the Control Center.</li>
<li>
<i>Associate device events with applications. </i>Using the Control Panel, you select a device and one of the push model events for this device. Given this device and event pair, you then select the subset of push model aware-applications to which the event will be directed. In this way, the control panel is used to associate device events with applications</li>
</ul>
<p>
Application programs should not have to access the STI Control Panel. When an image acquisition device is installed, a property page for the device is added to the control panel. The property page is supplied by the vendor. You use it to manually associate device events with applications.</p>
<p>&nbsp;</p></body>
</HTML>
