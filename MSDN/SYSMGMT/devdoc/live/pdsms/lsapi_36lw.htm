<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LSRequest</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_lsrequest"></a>LSRequest</h1>
<p>
<b>Notice:</b>This is preliminary documentation for technology that will be supported in future releases of Microsoft Windows.</p>
<p>
The <b>LSRequest</b> function asks that the license system grant the licensing resources so the calling application can execute. </p>
<pre><code><b>LS_STATUS_CODE LS_API_ENTRY LSRequest(
  LS_STR</b><i> *LicenseSystem</i><b>,  </b>// pointer to string identifying the 
                          // license system
<b>  LS_STR</b><i> *PublisherName</i><b>,  </b>// pointer to publisher of product 
                          // requesting licensing resources
<b>  LS_STR</b><i> *ProductName</i><b>,    </b>// pointer to name of product requesting 
                          // licensing resources
<b>  LS_STR</b><i> *Version</i><b>,        </b>// pointer to version number of product 
                          // requesting licensing resources
  <b>LS_ULONG</b> <i>TotUnitsReserved</i><b>,</b>  // units required to run the 
                              // application
<b>  LS_STR</b><i> *LogComment</i><b>,     </b>// pointer to optional comment associated 
                          // with the request
<b>  LS_CHALLENGE</b><i> *Challenge</i><b>,  </b>// pointer to a challenge structure
  <b>LS_ULONG</b> <i>*TotUnitsGranted</i><b>,</b>  // pointer to total number of units 
                              // granted
<b>  LS_HANDLE</b><i> *LicenseHandle  </i>// pointer to handle to the license 
                            // context
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>LicenseSystem</i></dt>
<dd>
[in] Points to a string that uniquely identifies the particular license system. You can obtain this string by using the <a href="lsapi_7r77.htm"><b>LSEnumProviders</b></a> function. If the constant LS_ANY is specified, all license system providers will be searched for a license match. </dd>
<dt>
<i>PublisherName</i></dt>
<dd>
[in] Points to a string containing the name of the publisher of the software product requesting licensing resources. The first 32 characters of the string must be unique. It is recommended that a company name and trademark be used. This string cannot be null, nor can it be LS_ANY. </dd>
<dt>
<i>ProductName</i></dt>
<dd>
[in] Points to a string containing the name of the software product requesting licensing resources. The first 32 characters of the string must be unique within the <i>PublisherName</i> domain. This string cannot be null, nor can it be LS_ANY. </dd>
<dt>
<i>Version</i></dt>
<dd>
[in] Points to a string containing the version number of the product. The first 12 characters of the string must be unique within the <i>PublisherName</i> domain. This string cannot be null, nor can it be LS_ANY. </dd>
<dt>
<i>TotUnitsReserved</i></dt>
<dd>
[in] Specifies the number of units required to run the application. The software publisher may choose to specify this policy attribute within the application. The recommended value of LS_DEFAULT_UNITS allows the license system to determine the proper value using information provided by the license system or the license itself. The license system verifies that the requested number of units exist and it may reserve those units, but no units are actually consumed at this time. The number of units available is returned in the <i>TotUnitsGranted </i>parameter. </dd>
<dt>
<i>LogComment</i></dt>
<dd>
[in] Points to an optional string indicating a comment that will be associated with the request. The license system can log the comment if logging is supported and enabled. If an error is returned, the license system can log both the error and the comment, but this is not guaranteed. If you do not specify a string, the value must be LS_NULL. </dd>
<dt>
<i>Challenge</i></dt>
<dd>
[in/out] Points to a challenge structure. The challenge response will also be returned in this structure. </dd>
<dt>
<i>TotUnitsGranted</i></dt>
<dd>
[out] Points to an LS_ULONG value in which the total number of units granted is returned. The following table describes the <i>TotUnitsGranted</i> return value, given the <i>TotUnitsReserved</i> parameter input value, and the status code returned:
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=35%></td>
<td width=65%><b><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TotUnitsReserved</i></b></td>
</tr>
<tr valign=top>
<td width=35%><b>Status code returned</b></td>
<td width=65%><b>LS_DEFAULT_UNITS&nbsp;&nbsp;&nbsp;Other&nbsp;(specific&nbsp;count)</b></td>
</tr>
<tr valign=top>
<td width=35%>LS_SUCCESS</td>
<td width=65%>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(A)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(C)</td>
</tr>
<tr valign=top>
<td width=35%>LS_INSUFFICIENT_UNITS</td>
<td width=65%>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(B)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(D)</td>
</tr>
<tr valign=top>
<td width=35%>Other errors</td>
<td width=65%>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(E)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(E)</td>
</tr>
</table><br>


<p>
<i>TotUnitsGranted</i> return values: 

<p class=indent1>
(A) The default number of units commensurate with the license granted. </p>

<p class=indent1>
(B) The maximum number of units available to the requesting software. This can be less than the normal default. </p>

<p class=indent1>
(C) The number of units used to grant the request. This value can be greater than or equal to the actual units requested. For example, the license policy may allow only allow increments of five units; therefore, a request of seven units would result in a grant of 10 units. </p>

<p class=indent1>
(D) The maximum number of units available to the requesting software. This can be more or less than the units requested. </p>

<p class=indent1>
(E) Zero is returned. </p>
</dd>
<dt>
<i>LicenseHandle</i></dt>
<dd>
[out] Points to an LS_HANDLE in which a handle to the license context is returned. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
If the function succeeds, the return value is LS_SUCCESS. </p>
<p>
If the function fails, the return value is a status code. For extended error information, call <a href="lsapi_38h1.htm"><b>LSGetMessage</b></a><b> </b>to return the status <i>text</i> corresponding to the status <i>code</i>. The <b>LSGetMessage </b>function<b> </b>may return one of the following status codes: </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=57%>Value</th>
<th align=left width=43%>Meaning</th>
</tr>
<tr valign=top>
<td width=57%>LS_INSUFFICIENT_UNITS</td>
<td width=43%>The licensing system cannot locate enough available licensing resources to complete the request.</td>
</tr>
<tr valign=top>
<td width=57%>LS_SYSTEM_UNAVAILABLE</td>
<td width=43%>A licensing system cannot be found to perform the function invoked.</td>
</tr>
<tr valign=top>
<td width=57%>LS_AUTHORIZATION_UNAVAILABLE</td>
<td width=43%>The licensing system has no licensing resources to complete the request.</td>
</tr>
<tr valign=top>
<td width=57%>LS_LICENSE_UNAVAILABLE</td>
<td width=43%>The licensing system has licensing resources that could satisfy the request, but they are not available at the time of the request.</td>
</tr>
<tr valign=top>
<td width=57%>LS_RESOURCES_UNAVAILABLE</td>
<td width=43%>The request cannot be completed because of insufficient resources, such as memory.</td>
</tr>
<tr valign=top>
<td width=57%>LS_NETWORK_UNAVAILABLE</td>
<td width=43%>The network is unavailable.</td>
</tr>
<tr valign=top>
<td width=57%>LS_BAD_ARG</td>
<td width=43%>One or more of the arguments is incorrect.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
Use the <b>LSRequest</b> function to request licensing resources to authorize the identified product to execute. If a valid license is found, the challenge response is computed and LS_SUCCESS is returned. At minimum, the <i>PublisherName</i>, <i>ProductName</i>, and <i>Version</i> strings are used to identify a matching license or licenses. Note that an underlying license system service provider may ascertain additional information for the license request — for example, the current user name, computer name, and so forth.</p>
<p>
If all service providers cannot satisfy a call to the <b>LSRequest </b>function, then <b>LSRequest </b>returns the handle associated with the last service provider response. Therefore, regardless of whether valid licensing resources are granted, <b>LSRequest</b> always returns a valid license handle. This handle must always be released with the <a href="lsapi_80o5.htm"><b>LSFreeHandle</b></a> function when the application has finished running. If licensing resources are granted, the application must also call <a href="lsapi_4yp1.htm"><b>LSRelease</b></a> to free the licensing resources, before calling <b>LSFreeHandle</b>. </p>
<p>
A challenge response is <i>not</i> returned unless the license request completes successfully — that is, unless it returns a status code of LS_SUCCESS. </p>
<p>
If the number of units requested is greater than the number of units available, the license request is not granted. Upon successful completion, the value returned in the <i>TotUnitsReserved</i> parameter indicates the number of units granted. This is greater than or equal to the number of units requested unless LS_DEFAULT_UNITS was specified. In the case of failure, the value returned in the <i>TotUnitsGranted </i>parameter is zero. </p>
<h4>QuickInfo</h4>
<p>
<b>&nbsp;&nbsp;Windows NT: </b>Requires version 3.51 or later.<br>
<b>&nbsp;&nbsp;Windows: </b>Requires Windows 95 or later.<br>
<b>&nbsp;&nbsp;Windows CE: </b>Unsupported.<br>
<b>&nbsp;&nbsp;Header: </b>Declared in lsapi.h.<br>
<b>&nbsp;&nbsp;Import Library: </b>Use lsapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="lsapi_8co5.htm">License Service Application Programming Interface Overview</a>, <a href="lsapi_55kj.htm">LSAPI Functions</a>, <a href="lsapi_416a.htm"><b>LS_CHALLENGE</b></a>,<b> <a href="lsapi_7r77.htm">LSEnumProviders</a></b>,<b> <a href="lsapi_80o5.htm">LSFreeHandle</a></b>,<b> <a href="lsapi_38h1.htm">LSGetMessage</a></b>,<b> <a href="lsapi_4yp1.htm">LSRelease</a></b> </p>
<p>&nbsp;</p></body>
</HTML>
