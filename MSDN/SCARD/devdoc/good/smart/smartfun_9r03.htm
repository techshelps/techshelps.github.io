<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SCardListCards</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_smart_scardlistcards"></a>SCardListCards</h1>
<p>
The <b>SCardListCards</b> function searches the <a href="scgloss_7mwj.htm#_smart_smart_card_database_gly">smart card database</a> and provides a list of named cards previously introduced to the system by the user.</p>
<p>
The caller specifies an <a href="scgloss_7mw1.htm#_smart_atr_string_gly">ATR string</a>, a set of interface identifiers (GUIDs), or both. If both an ATR string and an identifier array are supplied, the cards returned will match the ATR string supplied and support the interfaces specified.</p>
<pre><code><b>LONG SCardListCards(
  IN SCARDCONTEXT</b><i> hContext</i><b>,</b>
<b>  IN LPCBYTE</b><i> pbAtr</i><b>,</b>
<b>  IN LPCGUID</b><i> rgguidInterfaces</i><b>,</b>
<b>  IN DWORD</b><i> cguidInterfaceCount</i><b>,</b>
<b>  OUT LPTSTR</b><i> mszCards</i><b>,</b>
<b>  IN OUT LPDWORD</b><i> pcchCards</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hContext</i></dt>
<dd>
Supplies the handle that identifies the <a href="scgloss_7mwi.htm#_smart_resource_manager_context_gly">resource manager context</a> for the query. The resource manager context can be set by a previous call to <b>SCardEstablishContext</b>, or set to NULL if the query is not directed towards a specific context.</dd>
<dt>
<i>pbAtr</i></dt>
<dd>
Supplies the address of an ATR string to compare to known cards, or NULL if no ATR matching is to be performed.</dd>
<dt>
<i>rgguidInterfaces</i></dt>
<dd>
Supplies an array of identifiers (GUIDs), or NULL if no interface matching is to be performed. When an array is supplied, a card name will be returned only if all the specified identifiers are supported by the card.</dd>
<dt>
<i>cguidInterfaceCount</i></dt>
<dd>
Supplies the number of entries in the <i>rgguidInterfaces</i> array. If <i>rgguidInterfaces</i> is NULL, then this value is ignored.</dd>
<dt>
<i>mszCards</i></dt>
<dd>
Receives a multi-string that lists the smart cards found. If this value is NULL, <b>SCardListCards</b> ignores the buffer length supplied in <i>pcchCards</i>, returning the length of the buffer that would have been returned if this parameter had not been NULL to <i>pcchCards</i> and a success code.</dd>
<dt>
<i>pcchCards</i></dt>
<dd>
Supplies the length of the <i>mszCards</i> buffer in characters, and receives the actual length of the multi-string structure, including all trailing Null characters. If the buffer length is specified as SCARD_AUTOALLOCATE, then <i>mszCards</i> is converted to a pointer to a string pointer, and receives the address of a block of memory containing the multi-string structure. This block of memory must be deallocated with <b>SCardFreeMemory</b>.
</dd>
</dl>
<h4>Return Values</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>If the function…</th>
<th align=left width=52%>The return value is…</th>
</tr>
<tr valign=top>
<td width=48%>Succeeds</td>
<td width=52%>SCARD_S_SUCCESS.</td>
</tr>
<tr valign=top>
<td width=48%>Fails</td>
<td width=52%>An error code (see <a href="scerrors_39v7.htm">Error Codes</a> for a list of all error codes).</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
To return all smart cards introduced to the subsystem, set <i>pbAtr</i> and <i>rgguidInterfaces</i> to NULL.</p>
<p>
<b>SCardListCards</b> is a database query function. For a description of other database query functions, see <a href="scovr_3skz.htm">Smart Card Database Query Functions</a>.</p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 4.0 SP3 and later.<br>
&nbsp;&nbsp;<b>Windows:</b>  Use Windows 95 OSR2.1.<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in winscard.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with winscard.lib.</p>
<h4>See Also</h4>
<p>
<a href="smartfun_5t2s.htm"><b>SCardEstablishContext</b></a>, <a href="smartfun_28s9.htm"><b>SCardFreeMemory</b></a>, <a href="smartfun_5l0k.htm"><b>SCardGetProviderId</b></a>, <a href="smartfun_1qr7.htm"><b>SCardListInterfaces</b></a>, <a href="smartfun_40s3.htm"><b>SCardListReaderGroups</b></a>, <a href="smartfun_1bhv.htm"><b>SCardListReaders</b></a></p>
<p>&nbsp;</p></body>
</HTML>
