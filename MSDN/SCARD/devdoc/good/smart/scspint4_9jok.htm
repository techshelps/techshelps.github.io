<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ISCardISO7816::ReadRecord</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_smart_iscardiso7816_readrecord"></a>ISCardISO7816::ReadRecord</h1>
<p>
The <b>ReadRecord</b> method constructs an <a href="scgloss_7mw1.htm#_smart_apdu_gly">APDU</a> command that reads either the contents of the specified record(s) or the beginning part of one record of an elementary file.</p>
<pre><code><b>HRESULT ReadRecord(
  BYTE</b><i> byRecordId</i><b>,</b>
<b>  BYTE</b><i> byRefCtrl</i><b>,</b>
<b>  LONG</b><i> lBytesToRead</i><b>,</b>
<b>  LPSCARDCMD</b><i> *ppCmd</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>byRecordId </i>[in, defaultvalue(NULL_BYTE)] </dt>
<dd>
Record number or ID of the first record to be read (00 indicates the current record).</dd>
<dt>
<i>byRefCtrl </i>[in] </dt>
<dd>
Coding of the reference control:

<table cellspacing=4 cols=9>
<tr valign=top>
<th align=left width=21%>Meaning</th>
<th align=left width=10%>8</th>
<th align=left width=10%>7</th>
<th align=left width=10%>6</th>
<th align=left width=10%>5</th>
<th align=left width=9%>4</th>
<th align=left width=10%>3</th>
<th align=left width=10%>2</th>
<th align=left width=10%>1</th>
</tr>
<tr valign=top>
<td width=21%>Current EF</td>
<td width=10%>0</td>
<td width=10%>0</td>
<td width=10%>0</td>
<td width=10%>0</td>
<td width=9%>0</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
</tr>
<tr valign=top>
<td width=21%>Short EF ID</td>
<td width=10%>x</td>
<td width=10%>x</td>
<td width=10%>x</td>
<td width=10%>x</td>
<td width=9%>x</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
</tr>
<tr valign=top>
<td width=21%>RFU</td>
<td width=10%>1</td>
<td width=10%>1</td>
<td width=10%>1</td>
<td width=10%>1</td>
<td width=9%>1</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
</tr>
<tr valign=top>
<td width=21%>Record</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>1</td>
<td width=10%>x</td>
<td width=10%>x</td>
</tr>
<tr valign=top>
<td width=21%>  Read Record</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>1</td>
<td width=10%>0</td>
<td width=10%>0</td>
</tr>
<tr valign=top>
<td width=21%>  Up to Last</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>1</td>
<td width=10%>0</td>
<td width=10%>1</td>
</tr>
<tr valign=top>
<td width=21%>  Up to P1</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>1</td>
<td width=10%>1</td>
<td width=10%>0</td>
</tr>
<tr valign=top>
<td width=21%>  RFU</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>1</td>
<td width=10%>1</td>
<td width=10%>1</td>
</tr>
<tr valign=top>
<td width=21%>Record ID</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>0</td>
<td width=10%>x</td>
<td width=10%>x</td>
</tr>
<tr valign=top>
<td width=21%>  First Occur</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>0</td>
<td width=10%>0</td>
<td width=10%>0</td>
</tr>
<tr valign=top>
<td width=21%>  Last Occur</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>0</td>
<td width=10%>0</td>
<td width=10%>1</td>
</tr>
<tr valign=top>
<td width=21%>  Next Occur</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>0</td>
<td width=10%>1</td>
<td width=10%>0</td>
</tr>
<tr valign=top>
<td width=21%>  Previous</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=9%>-</td>
<td width=10%>0</td>
<td width=10%>1</td>
<td width=10%>1</td>
</tr>
<tr valign=top>
<td width=21%>Secret</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>-</td>
<td width=10%>x</td>
<td width=9%>x</td>
<td width=10%>x</td>
<td width=10%>x</td>
<td width=10%>x</td>
</tr>
</table><br>


<p>
<b>Current EF </b>= Currently selected EF.

<p>
<b>Short EF ID</b> = Short EF identifier.

<p>
<b>Record #</b> = Usage of record number in P1.

<p>
<b>Read Record</b> = Read record P1.

<p class=indent1>
<b>Up to Last </b>= Read all records from P1 up to the last.</p>

<p class=indent1>
<b>Up to P1 </b>= Read all records from the last up to P1.</p>

<p>
<b>Record ID</b> = Usage of record ID in P1.

<p>
<b>First Occur</b> = Read first occurrence.

<p class=indent1>
<b>Last Occur</b> = Read last occurrence.</p>

<p class=indent1>
<b>Next Occur</b> = Read next occurrence.</p>

<p class=indent1>
<b>Previous </b>= Read previous occurrence.</p>
</dd>
<dt>
<i>lBytesToRead </i>[in, defaultvalue(0)] </dt>
<dd>
Number of bytes to read from the transparent EF.
<p>
If the Le field contains only zeroes, then depending on b3b2b1 of P2 and within the limit of 256 for short length or 65536 for extended length, the command should read completely either the single requested record or the requested sequence of records.
</dd>
<dt>
<i>ppCmd </i>[in, out] </dt>
<dd>
On input, a pointer to an <b>ISCardCmd</b> interface object or NULL.
<p>
On return, it is filled with the APDU command constructed by this operation. If <i>ppCmd</i> was set to NULL, a smart card <b>ISCardCmd</b> object is internally created and returned via the <i>ppCmd</i> pointer.

</dd>
</dl>
<h4>Return Values</h4>
<p>
The possible return values are the following:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=56%>Value</th>
<th align=left width=44%>Meaning</th>
</tr>
<tr valign=top>
<td width=56%>S_OK</td>
<td width=44%>Operation completed successfully.</td>
</tr>
<tr valign=top>
<td width=56%>E_INVALIDARG</td>
<td width=44%>Invalid parameter.</td>
</tr>
<tr valign=top>
<td width=56%>E_POINTER</td>
<td width=44%>A bad pointer was passed in.</td>
</tr>
<tr valign=top>
<td width=56%>E_OUTOFMEMORY</td>
<td width=44%>Out of memory.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
The encapsulated command can only be performed if the security status of the smart card satisfies the security attributes of the elementary file being read.</p>
<p>
If another elementary file is currently selected at the time of issuing this command, it may be processed without identification of the currently selected file.</p>
<p>
When the command contains a valid short elementary identifier, it sets the file as current elementary file.</p>
<p>
Elementary files without a record structure cannot be read. The encapsulated command aborts if applied to an elementary file without a record structure.</p>
<p>
For a list of all the methods provided by the <b>ISCardISO7816</b> interface, see<b> ISCardISO7816</b>.</p>
<p>
In addition to the COM error codes listed above, this interface may return a smart card error code if a smart card function was called to complete the request. For information on smart card error codes, see <a href="scerrors_39v7.htm">Error Codes</a>.</p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 4.0 SP3 and later.<br>
&nbsp;&nbsp;<b>Windows:</b>  Use Windows 95 OSR2.1.<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in scardsrv.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> scardsrv.tlb.</p>
<h4>See Also</h4>
<p>
<a href="scspint4_3q3o.htm"><b>AppendRecord</b></a>, <a href="scspint4_1trq.htm"><b>ISCardISO7816</b></a>, <a href="scspint4_1mn8.htm"><b>UpdateRecord</b></a>, <a href="scspint4_1gis.htm"><b>WriteRecord</b></a></p>
<p>&nbsp;</p></body>
</HTML>
