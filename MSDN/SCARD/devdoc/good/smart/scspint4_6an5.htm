<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ISCardISO7816::GetData</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_smart_iscardiso7816_getdata"></a>ISCardISO7816::GetData</h1>
<p>
The <b>GetData</b> method constructs an <a href="scgloss_7mw1.htm#_smart_apdu_gly">APDU</a> command that retrieves either a single primitive data object or a set of data objects (contained in a constructed data object), depending on the type of file selected.</p>
<pre><code><b>HRESULT GetData(
  BYTE</b><i> byP1</i><b>,</b>
<b>  BYTE</b><i> byP2</i><b>,</b>
<b>  LONG</b><i> lBytesToGet</i><b>,</b>
<b>  LPSCARDCMD</b><i> *ppCmd</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>byP1, byP2 </i>[in] </dt>
<dd>
Parameters:

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Value</th>
<th align=left width=52%>Meaning</th>
</tr>
<tr valign=top>
<td width=48%>0000 - 003F</td>
<td width=52%>RFU</td>
</tr>
<tr valign=top>
<td width=48%>0040 - 00FF</td>
<td width=52%>BER-TLV tag (1 byte) in P2</td>
</tr>
<tr valign=top>
<td width=48%>0100 - 01FF</td>
<td width=52%>Application data (proprietary coding)</td>
</tr>
<tr valign=top>
<td width=48%>0200 - 02FF</td>
<td width=52%>SIMPLE-TLV tag in P2</td>
</tr>
<tr valign=top>
<td width=48%>0300 - 03FF</td>
<td width=52%>RFU</td>
</tr>
<tr valign=top>
<td width=48%>0400 - 04FF</td>
<td width=52%>BER-TLV tag (2 bytes) in P1-P2</td>
</tr>
</table><br>

</dd>
<dt>
<i>lBytesToGet </i>[in, defaultvalue(0)] </dt>
<dd>
Number of bytes expected in the response.</dd>
<dt>
<i>ppCmd </i>[in, out] </dt>
<dd>
On input, a pointer to an <b>ISCardCmd</b> interface object or NULL.
<p>
On return, it is filled with the APDU command constructed by this operation. If <i>ppCmd</i> was set to NULL, a smart card <b>ISCardCmd</b> object is internally created and returned via the <i>ppCmd</i> pointer.

</dd>
</dl>
<h4>Return Values</h4>
<p>
The possible return values are the following:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=56%>Value</th>
<th align=left width=44%>Meaning</th>
</tr>
<tr valign=top>
<td width=56%>S_OK</td>
<td width=44%>Operation completed successfully.</td>
</tr>
<tr valign=top>
<td width=56%>E_INVALIDARG</td>
<td width=44%>Invalid parameter.</td>
</tr>
<tr valign=top>
<td width=56%>E_POINTER</td>
<td width=44%>A bad pointer was passed in.</td>
</tr>
<tr valign=top>
<td width=56%>E_OUTOFMEMORY</td>
<td width=44%>Out of memory.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
The encapsulated command can only be performed if the security status of the smart card satisfies the security attributes of the elementary file being read. Security conditions are dependent on the policy of the card, and may be manipulated through <b>ExternalAuthenticate</b>, <b>InternalAuthenticate</b>, <b>ISCardAuth</b>, etc.</p>
<p>
To select a file, call <b>SelectFile</b>.</p>
<p>
For a list of all the methods provided by the <b>ISCardISO7816</b> interface, see<b> ISCardISO7816</b>.</p>
<p>
In addition to the COM error codes listed above, this interface may return a smart card error code if a smart card function was called to complete the request. For information on smart card error codes, see <a href="scerrors_39v7.htm">Error Codes</a>.</p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 4.0 SP3 and later.<br>
&nbsp;&nbsp;<b>Windows:</b>  Use Windows 95 OSR2.1.<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in scardsrv.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> scardsrv.tlb.</p>
<h4>See Also</h4>
<p>
<a href="scspint4_7xph.htm"><b>ExternalAuthenticate</b></a>, <a href="scspint4_10it.htm"><b>InternalAuthenticate</b></a>, <a href="scspint5_1giw.htm"><b>ISCardAuth</b></a>, <a href="scspint4_1trq.htm"><b>ISCardISO7816</b></a>, <a href="scspint4_2ezl.htm"><b>PutData</b></a>, <a href="scspint4_2mzp.htm"><b>SelectFile</b></a></p>
<p>&nbsp;</p></body>
</HTML>
