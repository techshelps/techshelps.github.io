<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ISCardISO7816::PutData</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_smart_iscardiso7816_putdata"></a>ISCardISO7816::PutData</h1>
<p>
The <b>PutData</b> method constructs an <a href="scgloss_7mw1.htm#_smart_apdu_gly">APDU</a> command that stores a single primitive data object or the set of data objects contained in a constructed data object, depending on the file selected.</p>
<p>
How the objects are stored (writing once and/or updating and/or appending) depends on the definition or the nature of the data objects.</p>
<pre><code><b>HRESULT PutData(
  BYTE</b><i> byP1</i><b>,</b>
<b>  BYTE</b><i> byP2</i><b>,</b>
<b>  LPBYTEBUFFER</b><i> pData</i><b>,</b>
<b>  LPSCARDCMD</b><i> *ppCmd</i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>byP1, byP2 </i>[in] </dt>
<dd>
Coding of P1-P2:
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=48%>Value</th>
<th align=left width=52%>Meaning</th>
</tr>
<tr valign=top>
<td width=48%>0000 - 003F</td>
<td width=52%>RFU</td>
</tr>
<tr valign=top>
<td width=48%>0040 - 00FF</td>
<td width=52%>BER-TLV tag (1 byte) in P2</td>
</tr>
<tr valign=top>
<td width=48%>0100 - 01FF</td>
<td width=52%>Application data (proprietary coding)</td>
</tr>
<tr valign=top>
<td width=48%>0200 - 02FF</td>
<td width=52%>SIMPLE-TLV tag in P2</td>
</tr>
<tr valign=top>
<td width=48%>0300 - 03FF</td>
<td width=52%>RFU</td>
</tr>
<tr valign=top>
<td width=48%>0400 - 04FF</td>
<td width=52%>BER-TLV tag (2 bytes) in P1-P2</td>
</tr>
</table><br>

</dd>
<dt>
<i>pData </i>[in] </dt>
<dd>
Pointer to a byte buffer that contains the parameters and data to be written.</dd>
<dt>
<i>ppCmd </i>[in, out] </dt>
<dd>
On input, a pointer to an <b>ISCardCmd</b> interface object or NULL.
<p>
On return, it is filled with the APDU command constructed by this operation. If <i>ppCmd</i> was set to NULL, a smart card <b>ISCardCmd</b> object is internally created and returned via the <i>ppCmd</i> pointer.

</dd>
</dl>
<h4>Return Values</h4>
<p>
The possible return values are the following:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=56%>Value</th>
<th align=left width=44%>Meaning</th>
</tr>
<tr valign=top>
<td width=56%>S_OK</td>
<td width=44%>Operation completed successfully.</td>
</tr>
<tr valign=top>
<td width=56%>E_INVALIDARG</td>
<td width=44%>Invalid parameter.</td>
</tr>
<tr valign=top>
<td width=56%>E_POINTER</td>
<td width=44%>A bad pointer was passed in.</td>
</tr>
<tr valign=top>
<td width=56%>E_OUTOFMEMORY</td>
<td width=44%>Out of memory.</td>
</tr>
</table><br>
<h4>Remarks</h4>
<p>
The command can be performed only if the security status satisfies the security conditions defined by the application within the context for the function.
<dl>
<dt>
<i>Store Application Data</i> </dt>
<dd>
When the value of P1-P2 lies in the range from 0100 to 01FF, the value of P1-P2 shall be an identifier reserved for card internal tests and for proprietary services meaningful within a given application context.</dd>
<dt>
<i>Store Data Objects</i> </dt>
<dd>
When the value P1-P2 lies in the range from 0040 to 00FF, the value of P2 shall be a BER-TLV tag on a single byte. The value of 00FF is reserved for indicating that the data field carries BER-TLV data objects.
<p>
When the value of P1-P2 lies in the range 0200 to 02FF, the value of P2 shall be a SIMPLE-TLV tag. The value 0200 is RFU. The value 02FF is reserved for indicating that the data field carries SIMPLE-TLV data objects.

<p>
When the value of P1-P2 lies in the range from 4000 to FFFF, the value of P1-P2 shall be a BER-TLV tag on two bytes. The values 4000 to FFFF are RFU.

<p>
When a primitive data object is provided, the data field of the command message shall contain the value of the corresponding primitive data object.

<p>
When a constructed data object is provided, the data field of the command message shall contain the value of the constructed data object (that is, data objects including their tag, length, and value).

</dd>
</dl>
<p>
For a list of all the methods provided by the <b>ISCardISO7816</b> interface, see<b> ISCardISO7816</b>.</p>
<p>
In addition to the COM error codes listed above, this interface may return a smart card error code if a smart card function was called to complete the request. For information on smart card error codes, see <a href="scerrors_39v7.htm">Error Codes</a>.</p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 4.0 SP3 and later.<br>
&nbsp;&nbsp;<b>Windows:</b>  Use Windows 95 OSR2.1.<br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in scardsrv.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> scardsrv.tlb.</p>
<h4>See Also</h4>
<p>
<a href="scspint4_6an5.htm"><b>GetData</b></a>, <a href="scspint4_1trq.htm"><b>ISCardISO7816</b></a></p>
<p>&nbsp;</p></body>
</HTML>
