<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Smart Card User Interface</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_smart_smart_card_user_interface"></a>Smart Card User Interface</h1>
<p>
The smart card user interface (UI) is a single common dialog that lets the user specify or search for a smart card to open (that is, connect to and use in an application).</p>
<p>
Following are two ways you can use the common dialog. Both assume that the dialog UI will be displayed. (See <a href="smartstr_80md.htm"><b>OPENCARDNAME</b></a> for more information.)</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To let the user select a smart card to open (that is, connect to and use in the calling application)</h5>
<ol>
<li>
Declare a variable of type OPENCARDNAME.</li>
<li>
Fill in the appropriate information for the common dialog to narrow the search for a card that the calling application is looking for. This would include specifying <b>lpstrGroupNames</b>, <b>lpstrCardNames</b>, and, in future releases, <b>rgguidInterfaces</b>. This would also include specifying a preferred sharemode and protocol to use when the common dialog connects to the card using the <b>dwShareMode</b> and <b>dwProtocols</b> <b>OPENCARDNAME</b> structure members.</li>
<li>
Call the <a href="smartfun_4un9.htm"><b>GetOpenCardName</b></a> function to display the common dialog to the user. A simple help information line will be displayed, and if one of the cards being requested is found, the card will be highlighted in the display. For multiple card name searches, the first reader containing one of the preferred cards will be highlighted.<p>
<img src="images/smartcd3.gif" border=0>
</li>
<li>
The user then selects a card, clicks OK, and connects to the smart card.</li>
</ol>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To search for a specific card by using the lpfnConnect, lpfnCheck, and lpfnDisconnect callback functions.</h5>
<ol>
<li>
Declare a variable of type <b>OPENCARDNAME</b>.</li>
<li>
Fill in the appropriate information for the common dialog to use to narrow the search for a card that the calling application seeks. This would include giving <b>lpstrGroupNames</b>, <b>lpstrCardNames</b>, and, in future releases, <b>rgguidInterfaces</b>).<ol>
<li>
In addition, create the <b>Connect</b>, <b>Check</b>, and <b>Disconnect</b> callback functions and set the <b>lpfnConnect</b>, <b>lpfnCheck</b>, and <b>lpfnDisconnect</b> <b>OPENCARDNAME</b> data members appropriately.</li>
</ol>
<p>
<b>Note:</b>  All three functions and members must be available when using the common dialog in this way.
</li>
<li value=4>
Call the <b>GetOpenCardName</b> common dialog function.</li>
<li>
The common dialog will then look for the requested cards. If a matching card name or ATR string is found, the <b>Connect</b>, <b>Check</b>, and <b>Disconnect</b> callback functions will be called in sequence. If a card passes the <b>Check</b> routine (that is, the <b>Check</b> callback returns TRUE), this card is highlighted in the display to the user. <p>
<b>Note:</b>  If multiple card names are given, the first reader that contains one of the requested cards and passes the <b>Check</b> routine will be the selected card.
</li>
<li>
If no matches are found, the common dialog seen above will appear.</li>
</ol>
<p>&nbsp;</p></body>
</HTML>
