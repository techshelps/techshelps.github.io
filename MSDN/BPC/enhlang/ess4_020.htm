<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<HTML>
<HEAD>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Data</TITLE>
<meta name=MS-HAID content="_CDK_Data">
<link disabled rel=stylesheet href=backsdk3.css>
<style>
@import url(backsdk4.css);
</style>
</HEAD>
<BODY  bgcolor="#ffffff">

<a name="_CDK_Data"></a>
<H5>Data</H5>

<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to
change.]</span>&nbsp;</p>

<p>
To transmit data to a viewer's receiver using File Transfer Services (FTS), or to unpack a compressed cabinet (CAB) file, use the trigger <b>Data</b>.
</p>

<p>
The Data trigger serves one of the two following purposes:
</p>


<ul>
<li>When a compressed cabinet (CAB) file is specified, the Enhancement control unpacks the specified CAB file. This trigger is sent following the transmission of a CAB file using a Data Download event. For more information, see <a href="ess4_010.htm">Data Downloads</a>.
<li>When FTS is specified, the Data trigger causes the client to tune to a specified IP (Internet Protocol) address and port to receive FTS data. The enhancement files and their dependencies are transmitted using FTS. A component of Microsoft<font size="-2">&#174;</font> NetShow&#153; server, FTS can send files using a multicast transfer mechanism that includes forward error correction. NetShow is a component of Microsoft<font size="-2">&#174;</font> Site Server. All files transmitted on the specified IP address and port are placed into the show's temporary folder, which resides within the Spool folder.
</ul>






<p>
<b>Syntax</b>
</p>

<p>
<b>trigger (</b><i>1</i> <b>"[&lt;</b><i>protocol</i><b>&gt;] </b><i>ConnectionInformation</i><b>") ;</b>
</p>

<p>
Where


<dl>

<dt>
<i>1</i>
</dt>
<dd>
is the key denoting that the trigger is <b>Data</b>.
</dd>

<dt>
<i>protocol</i>
</dt>

<dd>
is an optional parameter that specifies the data transfer protocol. The default is FTS. The following lists the currently-defined protocols:

<p>
<b>FTS</b>.&nbsp;&nbsp;&nbsp;Downloads a file using Microsoft File Transfer Service.
<br>
<b>CAB</b>.&nbsp;&nbsp;&nbsp;Unpacks the specified cabinet file.
</p>
</dd>

<dt>
<i>ConnectionInformation</i>
</dt>

<dd>
Specifies the nature of the connection, depending on the protocol used. 
<p>
If the protocol is CAB, <i>ConnectionInformation</i> is a Broadcast Architecture URL (Uniform Resource Locator) that specifies the cabinet file to unpack. For example: <i>bpc://msnbc/myshow/cabfile.cab</i>&nbsp;.
</p>

<p>
If the protocol is FTS, <i>ConnectionInformation</i> is a string that contains the IP address and port that the FTS data will be transmitted on. This address and port must be in the following format:
</p>

<p>
<i>xxx<b>.</b>xxx<b>.</b>xxx<b>.</b>xxx<b>:</b>yyyy dirname</i> <b>[</b> timeout<b>]</b>
</p>

<p>
where
</p>

<dl>
<dt>
<i>xxx.xxx.xxx.xxx</i>
</dt>

<dd>
is the IP address.
</dd>

<dt>
<i>yyyy</i>
</dt>

<dd>
specifies the port.
</dd>
</dl>

<dt>
<i>dirname</i>
</dt>

<dd>
specifies the directory name in which the transmitted files should be saved. Note that this value cannot contain subdirectories. For example, "msnbc" is a valid value for dirname, but "msnbc\MyShow" is not. 
<br>
To store a transmitted file in a subdirectory of dirname, specify the subdirectory when the file is transmitted. 
</dd>

<dt>
<i>timeout</i>
</dt>

<dd>
is an optional parameter that specifies a timeout interval, in minutes. After Timeout minutes have elapsed, the subdirectory is deleted. The default value is 120 minutes.
</dd>

</dl>


</p>


<p>
<b>Remarks</b>
</p>

<p>
If the protocol of the Data trigger is FTS, the base page of the interactive show must contain the enhancement control <b>EnhCtrl</b>. The control is defined as an HTML (Hypertext Markup Language) object and looks like this:</p>

<p>
<font face="Lucida Sans Typewriter, Courier New">
&lt;!-- Here is the EnhCtrl control --&gt;
<BR>
&lt;OBJECT CLASSID="clsid:3A263EF8-D768-11D0-911C-00A0C91F37E3"
<BR>
WIDTH=0 HEIGHT=0 ID=EnhCtrl&gt;
<BR>
&lt;/OBJECT&gt;
</font>
</p>

<p>
The control's presence in the enhancement creates a running instance of <b>EnhCtrl</b> so that it can direct the FTS data that the broadcast is sending, based upon the IP address and port defined in the trigger. If you already have created an instance of <b>EnhCtrl</b> in one of your enhancements, you should not create a second one.
</p>

<p>
<b>Examples</b>
</p>

<p>
The following trigger causes the enhancement control to unpack the cabinet file located at: "C:\Program Files\TV Viewer\Interactive Content\&lt;random&gt;\Msnbc\MyShow\MyFile.cab"
</p>

<p>
<font face="Lucida Sans Typewriter, Courier New">
00:10:26:00 trigger (1 "&lt;CAB&gt; bpc://msnbc/myshow/myfile.cab") ;
</font>
</p>

<p>
In this example using the FTS protocol, the event dictates that prior to the 1 minute and 27 second mark in the interactive show, the enhancement control will receive a file at IP address 233.43.170.18, port 1718:
</p>

<p>
<font face="Lucida Sans Typewriter, Courier New">
before 00:01:27.00 trigger (1 "&lt;FTS&gt; 233.43.170.18:1718 MyShow") ;
</font>
</p>

</BODY>
</HTML>


