<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dialog Services</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>Dialog Services</H3>  </P>
Winlogon implements two timeout functions. During any secure dialog, such as logon or unlocking a workstation, Winlogon may timeout the dialog boxes and return to dialog process for the dialog. Winlogon is also responsible for screen saver activation and termination. To enable Winlogon to perform these timeout functions, Winlogon provides a set of dialog services for GINAs to use. GINAs must use these services rather than the typical Win32 counterparts of these services.</P>
The Winlogon services provided for this purpose are:</P>
<SPAN CLASS="list"><UL><LI><B>WlxMessageBox()</B> - Similar to the Win32 <I>MessageBox()</I> service.</LI><LI><B>WlxDialogBox()</B> - Similar to the Win32 <I>DialogBox()</I> service.</LI><LI><B>WlxDialogBoxIndirect()</B> - Similar to the Win32 <I>DialogBoxIndirect()</I> service.</LI><LI><B>WlxDialogBoxParam()</B> - Similar to the Win32 <I>DialogBoxParam()</I> service.</LI><LI><B>WlxDialogBoxParamIndirect()</B> - Similar to the Win32 <I>DialogBoxParamIndirect() </I>service.</LI></UL></SPAN>A GINA that uses these services must be aware of a new message value: WLX_WM_TIMEOUT may be sent to a window either in preparation for screen-saver activation or for normal dialog timeout. This message is sent by Winlogon to the dialog box when a timeout has occurred. The <I>wParam</I> parameter is 0 for an input timeout, and 1 for a screen-saver timeout. The dialog process should either ignore this message, in which case Winlogon will end the dialog, or process this message and end the dialog appropriately.</P>
If Winlogon ends a dialog due to a timeout, it is ended with one of the following codes, as appropriate: WLX_DLG_INPUT_TIMEOUT, WLX_DLG_SCREEN_SAVER_TIMEOUT. </P>
GINAs may also receive WLX_WM_SAS messages from Winlogon. These are sent to active dialog boxes if a SAS is received, either from the GINA or CTRL+ALT+DEL, if Winlogon is so configured. This is useful if a GINA is in the middle of prompting for the matching PIN for a smart card, and someone removes the card out of the smart-card reader. Winlogon provides an end code for use in these occasions, WLX_DLG_SAS.</P>
GINAs may have dialog boxes terminated by Winlogon with the code WLX_DLG_USER_LOGOFF. That indicates that the user has logged off during the running of the dialog box, e.g. by calling ExitWindowsEx() from another thread.</P>
 </P></BODY></HTML>
