<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.3 Option ROM Initialization</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>3.3 Option ROM Initialization</H3>  </P>
The System BIOS will determine if the Option ROM it is about to initialize supports the Plug and Play interface by verifying the Structure Revision number in the device's Plug and Play Header Structure.  For all Option ROMs compliant with the 1.0 Plug and Play BIOS Specification, the System BIOS will call the device's initialization vector with the following parameters:</P>
  </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="106pt" VALIGN="TOP"><COL WIDTH="337pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>Reg On Entry</B></P></TD><TD VALIGN="TOP"><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP">ES:DI</P></TD><TD VALIGN="TOP">Pointer to System BIOS PnP Installation Check Structure (See section 4.4)</P></TD></TR><TR><TD VALIGN="TOP">BX</P></TD><TD VALIGN="TOP">CSN for this card, ISA PnP devices only.  If not an ISA PnP device then this parameter will be set to FFFFh.</P></TD></TR><TR><TD VALIGN="TOP">DX</P></TD><TD VALIGN="TOP">Read Data Port, (ISA PnP devices only.  If no ISA PnP devices then this parameter will be set to FFFFh.</P></TD></TR></TBODY></TABLE>
<BR></P>For other bus architectures refer to the appropriate specification for register parameters on entry.</P>
During initialization, a Plug and Play Option ROM may hook any vectors and update any data structures required for it to access any attached devices and perform the necessary identifications and initializations.  However, upon exit from the initialization call, the Option ROM must restore the state of any vectors or data structures related to boot devices (INT 9h, INT 10h, INT 13h, and associated BIOS Data Area [BDA] and Extended BIOS Data Area [EBDA] variables).</P>
Upon exit from the initialization call, Plug and Play Option ROMs should return some boot device status information in the following format:</P>
Return Status from Initialization Call:</P>
  </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="64pt" VALIGN="TOP"><COL WIDTH="380pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>AX Bit</B></P></TD><TD VALIGN="TOP"><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP">8</P></TD><TD VALIGN="TOP">1 = IPL Device supports INT 13h Block Device format</P></TD></TR><TR><TD VALIGN="TOP">7</P></TD><TD VALIGN="TOP">1 = Output Device supports INT 10h Character Output</P></TD></TR><TR><TD VALIGN="TOP">6</P></TD><TD VALIGN="TOP">1 = Input Device supports INT 9h Character Input</P></TD></TR><TR><TD VALIGN="TOP">5:4</P></TD><TD VALIGN="TOP">00 = No IPL device attached<BR>01 = Unknown whether or not an IPL device is attached<BR>10 = IPL device attached<BR>        (RPL devices have a connection).<BR>11 = Reserved</P></TD></TR><TR><TD VALIGN="TOP">3:2</P></TD><TD VALIGN="TOP">00 = No Display device attached<BR>01 = Unknown whether or not a Display device is attached<BR>10 = Display device attached<BR>11 = Reserved</P></TD></TR><TR><TD VALIGN="TOP">1:0</P></TD><TD VALIGN="TOP">00 = No Input device attached<BR>01 = Unknown whether or not an Input device is attached<BR>10 = Input device attached<BR>11 = Reserved</P></TD></TR></TBODY></TABLE>
<BR></P> </P></BODY></HTML>
