<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.3.13.4  Life Cycle of Operations on Open Phones</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>2.3.13.4  Life Cycle of Operations on Open Phones</H3>The life cycle for line devices is similar to the life cycle for phones, except that lines have their own negotiation, initialization, open, and close procedures.  Operations on open lines are bracketed by their own Open/Close pair.  This pair is in turn bracketed between the same Driver Init ... Driver Unload pair as the phone Open/Close.</P>
The life cycles of calls are bracketed strictly between the Open/Close of the line that contains them.  Lifetimes of calls can begin in several ways:</P>
<SPAN CLASS="list"><UL><LI>Requested from the TAPI DLL through functions such as <B>lineMakeCall</B>, <B>lineSetupTransfer</B>, <B>lineSetupConference</B>, etc.</LI><LI>Spontaneously originated in the Service Provider in response to incoming telephone calls.</LI></UL></SPAN>The lifetimes of distinct calls within the same line can overlap each other in any way.  All calls end their lifetime at the time the TSPI function <B>TSPI_lineCloseCall</B> is invoked.  An example of several call life cycles is as follows:</P>
<img src="LQ12B.gif"></P>
<B>The life cycle of several calls is illustrated.  A call can originate in the TAPI DLL as shown with the MakeCall ... CloseCall pair.  A call can also originate in the Service Provider due to an incoming call.  The Service Provider announces this with a LINE_NEWCALL message to a TAPI DLL supplied callback procedure.  In such a case, the TAPI DLL returns its identifier for the call, which is included in subsequent callbacks reporting events occurring on the call.  In the case of calls whose lifetime originates in the TAPI DLL, this identifier is included in the TSPI operation that creates the call.</B></P></BODY></HTML>
