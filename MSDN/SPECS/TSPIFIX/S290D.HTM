<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.1.0.5  LINE_CALLSTATE</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>4.1.0.5  LINE_CALLSTATE</H3>This message is sent whenever the status of the specified call has changed. Several such messages will typically be sent during the lifetime of a call.  The first such message for an incoming call will indicate the <I>offering</I> state.  The TAPI DLL can use <B>lineGetCallStatus</B> to find out more detailed information about the current status of the call.</P>
  </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="96pt" VALIGN="TOP"><COL WIDTH="325pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>Sent to</B></P></TD><TD VALIGN="TOP">LINEEVENT</P></TD></TR></TBODY></TABLE>
<BR></P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="96pt" VALIGN="TOP"><COL WIDTH="325pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>Parameters</B></P></TD><TD VALIGN="TOP">HTAPILINE    <I>htLine<BR></I>Specifies the TAPI DLL's opaque object handle to the line device.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">HTAPICALL    <I>htCall<BR></I>Specifies the TAPI DLL's opaque object handle to the call device.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwMsg<BR></I>The value LINE_CALLSTATE</P></TD></TR><TR><TD VALIGN="TOP"><B> </B></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam1<BR></I>Specifies the new call state, of type <B>LINECALLSTATE</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_IDLE<BR>The call is idle - no call actually exists.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_OFFERING<BR>The call is being offered to the station, signaling the arrival of a  new call. In some environments, a call in the offering state does not automatically alert the user; alerting is done by the switch instructing the line to ring, it does not affect any call states.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_ACCEPTED<BR>The call was offering and has been accepted.  Note that in ISDN, the transition to the accepted state implicitly initiates altering to both parties.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_DIALTONE<BR>The call is receiving a dial tone from the switch, which means that the switch is ready to receive a dialed number.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_DIALING<BR>Destination address information (a phone number) is being sent to the switch via the call.  Note that the operation <B>lineGenerateDigits</B> does not place the line into the <I>dialing</I> state.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_RINGBACK<BR>The call is receiving ringback from the called address. Ringback indicates that the other station has been reached and is being alerted.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_BUSY<BR>The call is receiving a busy tone. Busy tone indicates that the call cannot be completed - either a circuit (trunk) or the remote party's station are in use.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_SPECIALINFO<BR>Special information is sent by the network. Special information is typically sent when the destination cannot be reached. </P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_CONNECTED<BR>The call has been established, the connection is made. Information is able to flow over the call between the originating address and the destination address.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_PROCEEDING<BR>Dialing has completed and the call is proceeding through the switch or telephone network.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_ONHOLD<BR>The call is on hold by the switch.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_CONFERENCED<BR>The call is currently a member of a multi-party conference call.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_ONHOLDPENDCONF<BR>The call is currently on hold while it is being added to a conference.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_ONHOLDPENDTRANSF<BR>The call is currently on hold awaiting transfer to another number.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_DISCONNECTED<BR>The remote party has disconnected from the call.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINECALLSTATE_UNKNOWN<BR>The state of the call is not known. This may be due to limitations of the call progress detection implementation.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam2<BR></I>Specifies call state dependent information. </P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">If <I>dwParam1</I> is LINECALLSTATE_BUSY, the <I>dwParam2</I> contains the details about the busy mode, of type <B>LINEBUSYMODE</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEBUSYMODE_STATION<BR>The busy signal indicates that the called party's station is busy. This is usually signaled via a "normal" busy tone.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEBUSYMODE_TRUNK<BR>The busy signal indicates that a trunk or circuit is busy. This is usually signaled via a "long" busy tone.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEBUSYMODE_UNKNOWN<BR>The busy signal's specific mode is currently unkown, but may become known later.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEBUSYMODE_UNAVAIL<BR>The busy signal's specific mode is unavailable and will not become known.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">If <I>dwParam1</I> is LINECALLSTATE_DIALTONE, the <I>dwParam2</I> contains the details about the dialtone mode, of type <B>LINEDIALTONEMODE</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_NORMAL<BR>This is a "normal" dialtone which typically is a continuous tone.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_SPECIAL<BR>This is a special dialtone indicating a certain condition is currently in effect.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_INTERNAL<BR>This an internal (e.g., PBX) dialtone.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_EXTERNAL<BR>This is an external (e.g., public network) dialtone.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_UNKNOWN<BR>The dialtone mode is currently known, but may become known later.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDIALTONEMODE_UNAVAIL<BR>The dialtone mode is unavailable and will not become known.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">If <I>dwParam1</I> is LINECALLSTATE_SPECIALINFO, the <I>dwParam2</I> contains the details about the special info mode, of type <B>LINESPECIALINFO</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINESPECIALINFO_NOCIRCUIT<BR>This special information tone preceeds a no circuit or emergency announcement (trunk blockage category).</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINESPECIALINFO_CUSTIRREG<BR>This special information tone preceeds a vacant number, AIS, Centrex number change and non-working station, access code not dialed or dialed in error, manual intercept operator message (customer irregularity category).</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINESPECIALINFO_REORDER<BR>This special information tone preceeds a reorder announcement (equipment irregularity category).</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINESPECIALINFO_UNKNOWN<BR>Specific about the special information tone are currently unknown but may become known later.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINESPECIALINFO_UNAVAIL<BR>Specifics about the special information tone are unavailable, and will not become known.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">If <I>dwParam1</I> is LINECALLSTATE_DISCONNECTED, the <I>dwParam2</I> contains the details about the disconnect mode, of type <B>LINEDISCONNECTMODE</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_NORMAL<BR>This is a "normal" disconnect request by the remote party, the call was terminated normally.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_UNKNOWN<BR>The reason for the disconnect request is unknown.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_REJECT <BR>The remote user has rejected the call.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_PICKUP <BR>The call was picked up from elsewhere.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_FORWARDED <BR>The call was forwarded by the switch.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_BUSY<BR>The remote user's station is busy.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_NOANSWER<BR>The remote user's station does not answer.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_BADADDRESS<BR>The destination address in invalid.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_UNREACHABLE<BR>The remote user could not be reached.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_CONGESTION<BR>The network is congested.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_IMCOMPATIBLE<BR>The remote user's station equipment is incompatible for the type of call requested.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDISCONNECTMODE_UNAVAIL<BR>The remote user's station equipment is incompatible for the type of call requested.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam3<BR></I>Unused</P></TD></TR><TR><TD VALIGN="TOP"><B>Comments</B></P></TD><TD VALIGN="TOP">This message (with LINECALLSTATE_OFFERING) should be sent as the next message for an incoming call after LINE_NEWCALL.  Other call state changes are reported whenever they occur; the message cannot be disabled.</P></TD></TR><TR><TD VALIGN="TOP"><B>Comparison</B></P></TD><TD VALIGN="TOP">The corresponding message at the TAPI level is used to inform applications of new incoming calls.  This is not the case at the TSPI level; the LINE_NEWCALL message informs the TAPI DLL of new incoming calls.  The LINE_NEWCALL message must precede this message.<BR>The <I>dwParam3</I> parameter is used at the TAPI level to inform the recipient of the privilege level it has over the call.  This parameter is unused at the TSPI level.</P></TD></TR><TR><TD VALIGN="TOP"><B>See Also</B></P></TD><TD VALIGN="TOP">Functions:  <B>TSPI_lineGetCallStatus<BR></B>Data Types:  <B>LINECALLSTATE, LINECALLSTATUS<BR></B>Messages:  <B>LINE_NEWCALL</B></P></TD></TR></TBODY></TABLE>
<BR></P></BODY></HTML>
