<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.4.2.11  Call Conference</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>2.4.2.11  Call Conference</H3>Conference calls are calls that include more than two parties simultaneously. Conference calls can be set up using either a switch-based conference bridge or an external server-based bridge. Typically, only switch-based conferencing will allow the level of conference control provided by the SPI. In server-based conference calls all participating parties dial into the server which mixes all the media streams together and sends each participant the mix; there may be no notion of individual parties in the conference call, only that of a single call between the application and the bridge server.</P>
A conference call can be established in a number of ways, depending on device capabilities. </P>
<SPAN CLASS="list"><UL><LI>A conference call may be able to start out as a regular two-party call, e.g., a call established via <B>TSPI_lineMakeCall</B>. Once the two-party call exists, additional parties can be added, one at a time. Preparing to add the third party establishes the conference call via <B>TSPI_lineSetupConference</B>, this takes the original two-party call as input, allocates a conference call, connects the original call to the conference, and allocates a consultation call whose handle is returned to the TAPI DLL. 
The TAPI DLL can then use <B>TSPI_lineDial</B> on the consultation call to establish a connection to the next party to be added. <B>TSPI_lineDrop</B> can be used to abandon this call attempt. The third party is added via <B>TSPI_lineAddToConference</B>, which specifies both the conference call and the consultation call.</P>

To add additional parties once a conference call (handle) exists the TAPI DLL uses <B>TSPI_linePrepareAddToConference</B>, which specifies the conference call handle and returns a consultation call handle. Once the consultation call exists, it can be added via <B>TSPI_lineAddToConference </B>(as above).</P></LI><LI>A conference call may have to be established via <B>TSPI_lineSetupConference</B>, without an existing two-party call. This returns a handle for the conference call, and allocates a consultation call. After a period of consultation, the consultation call can be added via <B>TSPI_lineAddToConference</B>. Additional parties are added via <B>TSPI_linePrepareAddToConference</B> followed by <B>TSPI_lineAddToConference</B>.</LI><LI>A final mechanism for establishing a three-way conference call is by resolving a transfer request for three-way conference. In this scenario, a two-party call is established as either an inbound or outbound call. Next the call is placed on transfer hold via <B>TSPI_lineSetupTransfer</B> which returns a consultation call handle. After a period of consultation, the TAPI DLL may have the option to resolve the transfer setup by selecting the three-way conference option which conferences all three parties together in a conference call via <B>TSPI_lineCompleteTransfer</B> with the <I>conference</I> option (instead of the <I>transfer</I> option). Under this option, a conference call handle representing the conference call is allocated and returned to the application. </LI></UL></SPAN>Once a call becomes a member of a conference call, the member's call state reverts to <I>conferenced</I>. The state of the conference call typically becomes <I>connected</I>. The call handle to the conference call and all the added parties remain valid as individual calls. <B>LINE_CALLSTATE</B> events can be received about all calls, for example, if one of the members disconnects by hanging up, an appropriate call state message may inform the application of this fact; such a call is no longer a member of the conference.</P>
As is the case with call transfer, the application may toggle between the consultation call and the conference call using <B>TSPI_lineSwapHold</B>. </P>
Use the call handle for the member calls to later remove the call from the conference. Do this by invoking <B>TSPI_lineRemoveFromConference</B> on the call handle. Note that this operation is not commonly available in its fully general form. Some switches may not allow it at all, or only allow the most recently added party to be removed. The line's device capabilities describe which flavor of <B>TSPI_lineRemoveFromConference</B> is possible.</P>
TSPI_lineSetupConference</P>
Prepares a given call for the addition of another party. The capabilities of the addressed line device may limit the number of parties conferenced in a single call and whether or not a conference starts out with a normal two-party call.</P>
TSPI_linePrepareAddToConference</P>
Prepares for adding a party to an existing conference call by allocating a consultation call that can later be added to the conference call which is placed on conference hold.</P>
TSPI_lineAddToConference</P>
Adds a consultation call to an existing conference call.</P>
TSPI_lineRemoveFromConference</P>
Removes a party from a conference call.</P></BODY></HTML>
