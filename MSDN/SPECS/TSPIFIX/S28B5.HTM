<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.3.11.3  Phones</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>2.3.11.3  Phones</H3>The “[Phones]” section of TELEPHON.INI specifies the phones that are defined in the system, the driver (provider) with which they are associated, and a user-assigned friendly name for each.</P>
This section has the following format:</P>
<BR></P>
<pre><code>[Phones]=&lt;<I>count</I>&gt;,&lt;<I>lastID</I>&gt;<I>x</I>=&lt;<I>id</I>&gt;,&lt;<I>DriverId</I>&gt;,"&lt;<I>friendlyname</I>&gt;"</code></pre>
The Phones entry indicates how many phones are defined (and how many Phone<I>x</I> entries appear in the section) with the <I>&lt;count&gt;</I> parameter.  The <I>&lt;lastID&gt;</I> parameter is an "advisory" parameter indicating the most recently assigned permanent phone ID.  This can be used to optimize the assignment of new unique permanent phone IDs.  Both &lt;<I>count</I>&gt; and &lt;<I>lastID</I>&gt; are set to 0 when Telephony is installed.  The values must be updated consistently by any agent that modifies the [Phones] section.</P>
Each Phone<I>x</I> entry defines a phone and giving its permanent ID &lt;<I>id</I>&gt; (used to link parameters in other files, such as address translation, to the phone), the identity &lt;<I>DriverID</I>&gt; of the provider with which it is associated, and a user-assigned friendly name.  Phone permanent IDs are in the range from 0 to 4,294,967,295 and must be unique throughout the [Phones] section. "<I>x</I>" takes values from 0 to one less than <I>&lt;count&gt;</I>. Phone<I>x</I> entries must have their name-sequence numbers renumbered to form a contiguous range whenver needed, although there is no requirement that they appear in sequential order.</P>
Parts of the Telephony service require that the name-sequence numbers of the phones for a given service provider form a contiguous range, although they need not appear sequentially in the TELEPHON.INI file.  For example, if one were to select all Phone<I>x</I> entries with <I>DriverID</I> of "26" and sort them sequentially by their name-sequence number "<I>x</I>", one would find that the sequence has no "holes":</P>
Phone4=1234, 26, "first"=1567, 26, "second"=1103, 26, "third"</P>
is legal but</P>
Phone4=1234, 26, "first"=1567, 26, "second"=1103, 26, "third"</P>
is not since the name "Phone5" is skipped.  Any agent that adds or removes phones in the middle of the overall sequence must renumber other name-sequence numbers accordingly.</P>
As mentioned earlier, the TSPI provides operations to retrieve the permanent ID of a given line.  A Service Provider can determine the set of permanent IDs it is assigned by searching the [Drivers] section for the Driver<I>x</I> entry that matches its filename.  The associated permanent ID &lt;<I>id</I>&gt; is its Driver ID.  It then searches the [Lines] section for all Line<I>x</I> entries with a matching &lt;<I>DriverID</I>&gt;.  The associated permanent IDs &lt;<I>id</I>&gt; are the permanent line IDs.  It may assign these to the lines it manages as it chooses.  These assignments are typically not random; a Service Provider usually uses these to identify associations with additional characteristics defined by that Service Provider such as physical connector identification, etc.</P>
Similar observations hold true for retrieving and associating permanent IDs for phones.</P></BODY></HTML>
