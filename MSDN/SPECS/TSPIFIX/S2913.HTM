<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.1.0.11  LINE_LINEDEVSTATE</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>4.1.0.11  LINE_LINEDEVSTATE</H3>This message is sent when the state of a line device has changed. The TAPI DLL can invoke <B>lineGetLineDevStatus</B> to determine the new status of the line.</P>
  </P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="96pt" VALIGN="TOP"><COL WIDTH="325pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>Sent to</B></P></TD><TD VALIGN="TOP">LINEEVENT</P></TD></TR></TBODY></TABLE>
<BR></P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="96pt" VALIGN="TOP"><COL WIDTH="325pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><B>Parameters</B></P></TD><TD VALIGN="TOP">HTAPILINE    <I>htLine<BR></I>Specifies the TAPI DLL's opaque object handle to the line device.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">HTAPICALL    <I>htCall<BR></I>Unused</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwMsg<BR></I>The value LINE_LINEDEVSTATE Specifies the callback instance supplied when opening the line.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam1<BR></I>Specifies the line device status item that has changed, of type <B>LINEDEVSTATE</B>. Values are:</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_OTHER<BR>An other status item than those listed below has changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_CONNECTED<BR>The line was previously disconnected and is now connected to the API.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_DISCONNECTED<BR>This line was previously connected and is now disconnected from the API.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_MSGWAITON<BR>The message waiting indicator is turned on.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_MSGWAITOFF<BR>The message waiting indicator is turned off.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_INSERVICE<BR>The line is connected to the API. This happens when the API is first activated, or when the line wire is physically plugged in and in service at the switch while the API is active.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_OUTOFSERVICE<BR>The line is out of service at the switch or physically disconnected. The API cannot be used to operate on the line device.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_MAINTENANCE<BR>Maintenance is being performed on the line at the switch. The API cannot be used to operate on the line device.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_NUMCALLS<BR>The number of calls on the line device has changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_TERMINALS<BR>The terminal settings have changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_ROAMING<BR>The roaming state of the line device has changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_BATTERY<BR>The battery level has changed significantly (cellular).</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_SIGNAL<BR>The signal level has changed significantly (cellular).</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_DEVSPECIFIC<BR>The line's device specific information has changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_REINIT<BR>Items have changed in the configuration of line devices.  Except in extreme cases, the Service Provider should use the normal configuration change notification mechanism as described in the "Overview" chapter instead of this message.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">LINEDEVSTATE_LOCK<BR>The locked status of the line device has changed.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam2<BR></I>The interpretation of this parameter depends on the value of <I>dwParam1</I>. If <I>dwParam1</I> is LINEDEVSTATE_RINGING then <I>dwParam2</I> contains the ring mode with which the switch instructs the line to ring. Valid ring modes are numbers in the range one to <B>dwNumRingModes</B>, where <B>dwNumRingModes</B> is a line device capability.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">DWORD    <I>dwParam3<BR></I>The interpretation of this parameter depends on the value of <I>dwParam1</I>. If <I>dwParam1</I> is LINEDEVSTATE_RINGING then <I>dwParam3</I> contains the ring count for this ring event. Ring count starts at zero.</P></TD></TR><TR><TD VALIGN="TOP"><B>Comments</B></P></TD><TD VALIGN="TOP">The sending of this message can be controlled via <B>TSPI_lineSetStatusMessages</B>. The Service Provider must send LINE_LINEDEVSTATE messages for at least the set of status changes selected through that procedure.  The Service Provider may send more than this set, however, it should try to limit its messages to this set for performance reasons.  By default all status reporting will be disabled.</P></TD></TR><TR><TD VALIGN="TOP"><B>Comparison</B></P></TD><TD VALIGN="TOP">This message at the TSPI level does not permit the value LINEDEVSTATE_REINIT for <I>dwParam1</I> as in the corresponding message at the TAPI level.  The determination to do dynamic reconfiguration affecting all devices is done at the level of the TAPI DLL.  It cannot be initiated through this message by a Service Provider.  Generally, such a reconfiguration would result in an orderly shutdown and initialization of the Service Provider using the usual sequence for doing so.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">Similarly, at the TSPI level, <I>dwParam1</I> may not be LINEDEVSTATE_MAKECALLREQUEST, since handing dial requests from a requester to the proxy dialer is handled strictly within the TAPI DLL.</P></TD></TR><TR><TD VALIGN="TOP"></P></TD><TD VALIGN="TOP">At the TSPI level, the Service Provider does not report state changes when the line is opened and closed, since there is only ever one Open outstanding for the device.</P></TD></TR><TR><TD VALIGN="TOP"><B>See Also</B></P></TD><TD VALIGN="TOP">Functions:  <B>TSPI_lineGetLineDevStatus</B>, <B>TSPI_lineSetStatusMessages</B>, <B>TSPI_lineGetStatusMessages<BR></B>Data Types:  <B>LINEDEVSTATUS</B></P></TD></TR></TBODY></TABLE>
<BR></P></BODY></HTML>
