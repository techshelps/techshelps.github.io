<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.4.2.6  Digit Gathering</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">

</OBJECT></FORM>
<H3>2.4.2.6  Digit Gathering</H3>Besides enabling digit monitoring and being notified of digits one at a time, the TAPI DLL can also request that multiple digits be collected in a buffer. Only when the buffer is full or when some other termination condition is met is the TAPI DLL notified. Digit gathering is useful for functions such as credit card number collection. The TAPI DLL invokes <B>TSPI_lineGatherDigits</B> specifying a buffer to fill with digits. Digit gathering terminates when one of a number of conditions is true. </P>
<SPAN CLASS="list"><UL><LI>The requested number of digits has been collected.</LI><LI>One of multiple termination digits is detected. The termination digits are specified to <B>TSPI_lineGatherDigits</B>, and the termination digit is placed in the buffer as well.</LI><LI>One of two timeouts expires. The timeouts are a first digit timeout, specifying the maximum duration before the first digit must be collected, and an inter-digit timeout, specifying the maximum duration between successive digits.</LI><LI>Digit gathering is canceled explicitly by invoking <B>TSPI_lineGatherDigits</B> again with either another set of parameters (e.g., a new buffer) to start a new gathering request or by using a NULL digit buffer parameter to simply cancel.
When terminated for whatever reason, a <B>LINE_GATHERDIGITS</B> message is sent to the application that requested the digit gathering. Note that only a single digit gathering request can be outstanding on a call at any given time.</P></LI></UL></SPAN>TSPI_lineGatherDigits</P>
Performs the buffered gathering of digits on a call.  </P>
Note that digit gathering and digit monitoring may be enabled on the same call at the same time. In that case, the TAPI DLL will receive a LINE_MONITORDIGITS message for each detected digit and a separate LINE_GATHERDIGITS message when the buffer is sent back.</P></BODY></HTML>
