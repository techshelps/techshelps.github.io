<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Fields Not To Include In Digests</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<FONT FACE="verdana, Arial, Helvetica" SIZE="2">

<h1><a name="fieldsnottoincludeindigests"></a>Fields Not To Include In Digests</h1>
<p>
There are some parts of an image that you may not want to include in any message digest.  This section identifies those parts, and describes why you might not want to include them in a message digest.</p>
<p>
Information related to Attribute Certificates - It is not possible to include a certificate in the calculation of a message digest that resides within the certificate.   Since certificates can be added to or removed from an image without effecting the overall integrity of the image this is not a problem.  Therefore, it is best to leave all attribute certificates out of the image even if there are certificates already in the image at the time you are calculating your message digest.  There is no guarantee those certificates will still be there later, or that other certificates won&#39;t have been added.  To exclude attribute certificate information from the message digest calculation, you must exclude the following information from that calculation:
<ul>
<li>
The Certificate Table field of the Optional Header Data Directories.<br><br></li>
<li>
The Certificate Table and corresponding certificates pointed to by the Certificate Table field listed immediately above.<p>
<u>Debug information - Debug information ma</u>y generally be considered advisory (to debuggers) and does not effect the actual integrity of the executable program.  It is quite literally possible to remove debug information from an image after a product has been delivered and not effect the functionality of the program.  This is, in fact, a disk saving measure that is sometimes utilized.  If you do not want to include debug information in your message digest, then you should not include the following information in your message digest calculation:
</li>
<li>
The Debug entry of the Data Directory in with optional header.<br><br></li>
<li>
The .debug section<br>
<p>
File Checksum field of the Windows NT-Specific Fields of the Optional Header - This checksum includes the entire file (including any attribute certificates included in the file) and will, in all likelihood, be different after inserting your certificate than when you were originally calculating a message digest to include in your certificate.
<p>
Unused, or obsolete fields - There are several fields that are either unused or obsolete.  The value of these fields is undefined an may change after you calculate your message digest.  These fields include:
</li>
<li>
Reserved field of the Optional Header Windows NT-Specific Fields (offset 52).<br><br></li>
<li>
The DLL Flags field of the Optional Header Windows NT-Specific Fields.  This field is obsolete.<br><br></li>
<li>
Loader Flags field of the Optional Header Windows NT-Specific Fields.  This field is obsolete.<br><br></li>
<li>
Reserved entries of the Data Directory in the object header.<p>
Resources (makes localization easier) - depending upon the specific your Attribute Certificate, it may be desirable or undesirable to include resources in the message digest.  If you want to allow localization without the generation of new certificates, then you do not want to include resources in your message digest.  If the values of the resources are critical to your application, then you probably do want them included in your message digest, and you will accept the overhead of generating a certificate for each localized copy of the image.  If you do not want to include resources in your message digest, then you should not include the following information in the message digest calculation:
</li>
<li>
Resource Table entry of the Optional Header Data Directory.<br><br></li>
<li>
The .rsrc section.</li>
</ul>
</BODY>
</HTML>
