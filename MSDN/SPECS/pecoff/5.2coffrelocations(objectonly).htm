<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>5.2 COFF Relocations (Object Only)</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>


<FONT FACE="verdana, Arial, Helvetica" SIZE="2">

<h1><a name="5.2coffrelocations(objectonly)"></a>5.2 COFF Relocations (Object Only)</h1>
<p>
Object files contain COFF relocations, which specify how the section data should be modified when placed in the image file and subsequently loaded into memory.</p>
<p>
Image files do not contain COFF relocations, because all symbols referenced have already been assigned addresses in a flat address space. An image contains relocation information in the form of base relocations in the <b>.reloc</b> section (unless the image has the IMAGE_FILE_RELOCS_STRIPPED attribute). See Section 6.5 for more information.</p>
<p>
For each section in an obejct file, there is an array of fixed-length records that are the section&#39;s COFF relocations. The position and length of the array are specified in the section header. Each element of the array has the following format:</p>
<table border=1 cols=4 frame=box rules=all>
<tr valign=top>
<TD width=51pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Offset</b></td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Size</b></td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Field</b></td>
<TD width=238pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Description</b></td>
</tr>
<tr valign=top>
<TD width=51pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">0</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">VirtualAddress</td>
<TD width=238pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Address of the item to which relocation is applied: this is the offset from the beginning of the section, plus the value of the section&#39;s RVA/Offset field (see Section 4, &quot;Section Table.&quot;). For example, if the first byte of the section has an address of 0x10, the third byte has an address of 0x12.</td>
</tr>
<tr valign=top>
<TD width=51pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">SymbolTableIndex</td>
<TD width=238pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">A zero-based index into the symbol table. This symbol gives the address to be used for the relocation. If the specified symbol has section storage class, then the symbol&#39;s address is the address with the first section of the same name.</td>
</tr>
<tr valign=top>
<TD width=51pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">8</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">2</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Type</td>
<TD width=238pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">A value indicating what kind of relocation should be performed. Valid relocation types depend on machine type. See Section 5.2.1, &quot;Type Indicators.&quot;</td>
</tr>
</table><br>

<p>
If the symbol referred to (by the SymbolTableIndex field) has storage class IMAGE_SYM_CLASS_SECTION, the symbol&#39;s address is the beginning of the section. The section is usually in the same file, except when the object file is part of an archive (library). In that case, the section may be found in any other object file in the archive that has the same archive-member name as the current object file. (The relationship with the archive-member name is used in the linking of import tables, i.e. the <b>.idata</b> section.)</p>

</BODY>
</HTML>
