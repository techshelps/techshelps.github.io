<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>5.5.6 COMDAT Sections (Object Only)</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>


<FONT FACE="verdana, Arial, Helvetica" SIZE="2">

<h1><a name="5.5.6comdatsections(objectonly)"></a>5.5.6 COMDAT Sections (Object Only)</h1>
<p>
The Selection field of the Section Definition auxiliary format is applicable if the section is a COMDAT section: a section that can be defined by more than one object file. (The flag IMAGE_SCN_LNK_COMDAT is set in the Section Flags field of the section header.) The Selection field determines the way that the linker resolves the multiple definitions of COMDAT sections.</p>
<p>
The first symbol having the section value of the COMDAT section must be the section symbol.  This symbol has the name of the section, Value field equal to 0, the section number of the COMDAT section in question, Type field equal to IMAGE_SYM_TYPE_NULL, Class field equal to IMAGE_SYM_CLASS_STATIC, and one auxiliary record. The second symbol is called &quot;the COMDAT symbol&quot; and is used by the linker in conjunction with the Selection field.</p>
<p>
Values for the Selection field are shown below.</p>
<table border=1 cols=3 frame=box rules=all>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Constant</b></td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Value</b></td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Description</b></td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_NODUPLICATES</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">1</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The linker issues a multiply defined symbol error if this symbol is already defined.</td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_ANY</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">2</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Any section defining the same COMDAT symbol may be linked; the rest are removed.</td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_SAME_SIZE</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">3</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The linker chooses an arbitrary section among the definitions for this symbol.  A multiply defined symbol error is issued if all definitions don&#39;t have the same size.</td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_EXACT_MATCH</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The linker chooses an arbitrary section among the definitions for this symbol.  A multiply defined symbol error is issued if all definitions don&#39;t match exactly.</td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_ASSOCIATIVE</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">5</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The section is linked if a certain other COMDAT section is linked. This other section is indicated by the Number field of the auxiliary symbol record for the section definition. Use of this setting is useful for definitions that have components in multiple sections (for example, code in one and data in another), but where all must be linked or discarded as a set.</td>
</tr>
<tr valign=top>
<TD width=226pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">IMAGE_COMDAT_SELECT_LARGEST</td>
<TD width=45pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">6</td>
<TD width=179pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The linker chooses the largest from the definitions for this symbol.  If multiple definitions have this size the choice between them is arbitrary.</td>
</tr>
</table><br>

</BODY>
</HTML>
