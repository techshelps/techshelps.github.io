<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>6.6.1 The TLS Directory</title>
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<FONT FACE="verdana, Arial, Helvetica" SIZE="2">

<h1><a name="6.6.1thetlsdirectory"></a>6.6.1 The TLS Directory</h1>
<p>
The TLS Directory has the following format:</p>
<table border=1 cols=4 frame=box rules=all>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Offset</b></td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Size</b></td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Field</b></td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2"><b>Description</b></td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">0</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Raw Data Start VA (Virtual Address)</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Starting address of the TLS template. The template is a block of data used to initialize TLS data. The system copies all this data each time a thread is created, so it must not be corrupted. Note that this address is not an RVA; it is an address for which there should be a base relocation in the .reloc section.</td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Raw Data End VA</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Address of the last byte of the TLS, except for the zero fill. As with the Raw Data Start VA, this is a virtual address, not an RVA.</td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">8</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Address of Index</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Location to receive the TLS index, which the loader assigns. This location is in an ordinary data section, so it can be given a symbolic name accessible to the program.</td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">12</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Address of Callbacks</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Pointer to an array of TLS callback functions. The array is null-terminated, so if there is no callback function supported, this field points to four bytes set to zero. The prototype for these functions is given below, in &quot;TLS Callback Functions.&quot;</td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">16</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Size of Zero Fill</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">The size in bytes of the template, beyond the initialized data delimited by Raw Data Start VA and Raw Data End VA. The total template size should be the same as the total size of TLS data in the image file. The zero fill is the amount of data that comes after the initialized nonzero data.</td>
</tr>
<tr valign=top>
<TD width=69pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">20</td>
<TD width=40pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">4</td>
<TD width=117pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Characteristics</td>
<TD width=212pt><FONT FACE="verdana, Arial, Helvetica" SIZE="2">Reserved for possible future use by TLS flags.</td>
</tr>
</table><br>

</BODY>
</HTML>
