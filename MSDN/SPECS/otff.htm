<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The OpenType Font File</TITLE>

<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">


<H2>The OpenType Font File</H2>
<P>
An OpenType font file contains data, in table format, that comprises
either a TrueType or a PostScript outline font. The rasterizer uses combinations of data from different tables to render the glyph data in the font.
<P>
<H3>Filenames</H3>
<P>
OpenType fonts may have the extension .OTF or .TTF, depending on the kind of outlines in the font and the creator's desire for downlevel compatibility.
<UL>
<LI>In all cases, fonts with only CFF data (no TrueType outlines) always have an .OTF extension.
<LI>Fonts containing TrueType outlines should use the .TTF extension. This enables the fonts to be used under older versions of Windows in which a CFF rasterizer may not be installed. In such cases, the fonts will be identified in the shell with a TrueType icon.
</UL>
<H3>Data Types</H3>
<P>
The following data types are used in the OpenType
font file. All OpenType fonts use Motorola-style byte ordering
(Big Endian):

<TABLE WIDTH=460 BGCOLOR="#F0F0F0">
<THEAD>
<TR>
<TH ALIGN=LEFT BGCOLOR="#C0C0C0">Data Type</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY><TR>
<TD VALIGN=TOP>BYTE</TD><TD VALIGN=TOP>8-bit unsigned integer.</TD></TR>
<TR>
<TD VALIGN=TOP>CHAR</TD><TD VALIGN=TOP>8-bit signed integer.</TD></TR>
<TR>
<TD VALIGN=TOP>USHORT</TD><TD VALIGN=TOP>16-bit unsigned integer.</TD></TR>
<TR>
<TD VALIGN=TOP>SHORT</TD><TD VALIGN=TOP>16-bit signed integer.</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>32-bit unsigned integer.</TD></TR>
<TR>
<TD VALIGN=TOP>LONG</TD><TD VALIGN=TOP>32-bit signed integer.</TD></TR>
<TR>
<TD VALIGN=TOP>FIXED</TD><TD VALIGN=TOP>32-bit signed fixed-point number (16.16)</TD></TR>
<TR>
<TD VALIGN=TOP>FUNIT</TD><TD VALIGN=TOP>Smallest measurable distance in the em space.</TD></TR>
<TR>
<TD VALIGN=TOP>FWORD</TD><TD VALIGN=TOP>16-bit signed integer (SHORT) that describes a quantity in FUnits.</TD></TR>
<TR>
<TD VALIGN=TOP>UFWORD</TD><TD VALIGN=TOP>Unsigned 16-bit integer (USHORT) that describes a quantity in FUnits. </TD></TR>
<TR>
<TD VALIGN=TOP>F2DOT14</TD><TD VALIGN=TOP>16-bit signed fixed number with the low 14 bits of fraction (2.14).</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
Most tables have version numbers, and the
version number for the entire font is contained in the Table Directory. Note that there are two different version number
types, each with its own numbering scheme. USHORT version numbers
always start at zero (0).  Fixed version numbers always start
at one (1.0 or 0x00010000).
<P>
The Fixed point format consists of a signed,
2's complement mantissa and an unsigned fraction. To compute the
actual value, take the mantissa and add the fraction.  Examples
of 2.14 values are:
<P>
<TABLE WIDTH=460 BGCOLOR="#F0F0F0">
<THEAD>
<TR>
<TH ALIGN=LEFT BGCOLOR="#C0C0C0">Decimal Value</TH>
<TH ALIGN=LEFT BGCOLOR="#C0C0C0">Hex Value</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Mantissa</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Fraction</TH></TR>
</THEAD><TBODY><TR>
<TR>
<TD VALIGN=TOP>1.999939</TD><TD VALIGN=TOP>0x7fff</TD>
<TD VALIGN=TOP>1</TD><TD VALIGN=TOP>16383/16384</TD></TR>
<TR>
<TD VALIGN=TOP>1.75</TD><TD VALIGN=TOP>0x7000</TD>
<TD VALIGN=TOP>1</TD><TD VALIGN=TOP>0/16384</TD></TR>
<TR>
<TD VALIGN=TOP>0.000061</TD><TD VALIGN=TOP>0x0001</TD>
<TD VALIGN=TOP>0</TD><TD VALIGN=TOP>1/16384</TD></TR>
<TR>
<TD VALIGN=TOP>0.0</TD><TD VALIGN=TOP>0x0000</TD>
<TD VALIGN=TOP>0</TD><TD VALIGN=TOP>0/16384</TD></TR>
<TR>
<TD VALIGN=TOP>-0.000061</TD><TD VALIGN=TOP>0xffff</TD>
<TD VALIGN=TOP>-1</TD><TD VALIGN=TOP>16383/16384</TD></TR>
<TR>
<TD VALIGN=TOP>-2.0</TD><TD VALIGN=TOP>0x8000</TD>
<TD VALIGN=TOP>-2</TD><TD VALIGN=TOP>0/16384</TD></TR>
</TABLE>

<H2>Organization of an OpenType Font</H2>

<p>A key characteristic of the OpenType format is the TrueType sfnt "wrapper", which provides organization for a collection of tables in a general and extensible manner.

<P>
The OpenType font file begins at byte 0 with
the Offset Table.

<TABLE WIDTH=460 BGCOLOR="#F0F0F0">
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Type</TH>
<TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP>Fixed</TD><TD VALIGN=TOP>sfnt version</TD>
<TD VALIGN=TOP>0x00010000 for version 1.0.</TD></TR>
<TR>
<TD VALIGN=TOP>USHORT </TD><TD VALIGN=TOP>numTables</TD>
<TD VALIGN=TOP>Number of tables. </TD></TR>
<TR>
<TD VALIGN=TOP>USHORT </TD><TD VALIGN=TOP>searchRange</TD>
<TD VALIGN=TOP>(Maximum power of 2 &lt;= numTables) x 16.</TD></TR>
<TR>
<TD VALIGN=TOP>USHORT </TD><TD VALIGN=TOP>entrySelector</TD>
<TD VALIGN=TOP>Log2(maximum power of 2 &lt;= numTables).</TD></TR>
<TR>
<TD VALIGN=TOP>USHORT </TD><TD VALIGN=TOP>rangeShift</TD>
<TD VALIGN=TOP>NumTables x 16-searchRange.</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
<P>
OpenType fonts that contain TrueType outlines should use the value of 1.0 for the sfnt version. OpenType fonts containing CFF data should use the tag 'OTTO' as the sfnt version number.
<P>
The Offset Table is followed at byte 12 by the Table Directory
entries. Entries in the Table Directory must be sorted in ascending
order by tag. Offset values in the Table Directory
are measured from the start of the font file.


<TABLE WIDTH=460 BGCOLOR="#F0F0F0">
<THEAD>
<TR>
<TH ALIGN=LEFT BGCOLOR="#C0C0C0">Type</TH>
<TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY><TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>tag</TD>
<TD VALIGN=TOP>4 -byte identifier.</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>checkSum</TD>
<TD VALIGN=TOP>CheckSum for this table.</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>offset</TD>
<TD VALIGN=TOP>Offset from beginning of TrueType font file.</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>length</TD>
<TD VALIGN=TOP>Length of this table.</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
<P>
The Table Directory makes it possible for
a given font to contain only those tables it actually needs. As
a result there is no standard value for numTables.
<P>
Tags are the names given to tables in the OpenType font file.
All tag names consist of four characters. Names with less than four letters are allowed
if followed by the necessary trailing spaces. 

Table checksums are the unsigned sum of the
longs of a given table. In C, the following function can be used
to determine a checksum:
<pre><code>ULONG
CalcTableChecksum(ULONG *Table, ULONG Length)
{
ULONG Sum = 0L;
ULONG *Endptr = Table+((Length+3) &amp; ~3) / sizeof(ULONG);

while (Table &lt; EndPtr)
	Sum += *Table++;
return Sum;
}</code></pre>

<P>
<CITE>Note: This function implies that the length
of a table must be a multiple of four bytes. While this is not
a requirement for the TrueType scaler itself, it is suggested
that all tables begin on four byte boundries, and pad any remaining
space between tables with zeros. The length of all tables should
be recorded in the table directory with their actual length.</CITE>
<P>
<H3>TrueType Collections</H3>
<P>
A TrueType Collection (TTC) is a means of delivering multiple OpenType fonts in a single file structure. TrueType Collections are most useful when the fonts to be delivered together share many glyphs in common. By allowing multiple fonts to share glyph sets, TTCs can result in a significant saving of file space.
<P>
For example, a group of Japanese fonts may each have their own designs for the kana glyphs, but share identical designs for the kanji. With ordinary OpenType font files, the only way to include the common kanji glyphs is to copy their glyph data into each font. Since the kanji represent much more data than the kana, this results in a great deal of wasteful duplication of glyph data. TTCs were defined to solve this problem.
<P>
The CFF rasterizer does not currently support TTC files.
<P>
<H4>The TTC File Structure</H4>
A TrueType Collection file consists of a single TTC Header table, two or more Table Directories, and a number of OpenType tables. The TTC Header must be located at the beginning of the TTC file.
<P>
The TTC file must contain a complete Table Directory for each different font design. A TTC file Table Directory has exactly the same format as a TTF file Table Directory. The table offsets in all Table Directories within a TTC file are measured from the beginning of the TTC file.
<P>
Each OpenType table in a TTC file is referenced through the Table Directories of all fonts which use that table. Some of the OpenType tables must appear multiple times, once for each font included in the TTC; while other tables should be shared by all fonts in the TTC.
<P>
As an example, consider a TTC file which combines two Japanese fonts (Font1 and Font2). The fonts have different kana designs (Kana1 and Kana2) but use the same design for kanji. The TTC file contains a single 'glyf' table which includes both designs of kana together with the kanji; both fonts' Table Directories point to this 'glyf' table. But each font's Table Directory points to a different 'cmap' table, which identifies the glyph set to use. Font1's 'cmap' table points to the Kana1 region of the 'loca' and 'glyf' tables for kana glyphs, and to the kanji region for the kanji. Font2's 'cmap' table points to the Kana2 region of the 'loca' and 'glyf' tables for kana glyphs, and to the same kanji region for the kanji.
<P>
The tables that should have a unique copy per font are those that are used by the system in identifying the font and its character mapping, including 'cmap', 'name', and 'OS/2'. The tables that should be shared by all fonts in the TTC are those that define glyph and instruction data or use glyph indices to access data: 'glyf', 'loca', 'hmtx', 'hdmx', 'LTSH', 'cvt ', 'fpgm', 'prep', 'EBLC', 'EBDT', 'EBSC', 'maxp', and so on. In practice, any tables which have identical data for two or more fonts may be shared.
<P>
Creating a TrueType Collection by combining existing OpenType font files is a non-trivial process, but a tool is available to help. The process involves paying close attention the issue of glyph renumbering in a font and the side effects that can result, in the 'cmap' table and elsewhere. The fonts to be merged must also have compatible TrueType instructions—that is, their preprograms, function definitions, and control values must not conflict.
<P>
TrueType Collection files use the filename suffix .TTC.
<P>
<H4>TTC Header</H4>
The purpose of the TTC Header table is to locate the different Table Directories within a TTC file. The TTC Header is located at the beginning of the TTC file (offset = 0). It consists of an identification tag, a version number, a count of the number of OpenType fonts (Table Directories) in the file, and an array of offsets to each Table Directory.
<TABLE WIDTH=460 BGCOLOR="#F0F0F0">
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH>
<TH BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP>TAG</TD><TD VALIGN=TOP>TTCTag</TD>
<TD VALIGN=TOP>TrueType Collection ID string: 'ttcf'</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>Version</TD>
<TD VALIGN=TOP>Version of the TTC Header (initially 0x0001000)</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>DirectoryCount</TD>
<TD VALIGN=TOP>Number of Table Directories in TTC</TD></TR>
<TR>
<TD VALIGN=TOP>ULONG</TD><TD VALIGN=TOP>TableDirectory[DirectoryCount]</TD>
<TD VALIGN=TOP>Array of offsets to Table Directories from the beginning of the file</TD></TR>
</TABLE>
<P>
<H3>Font Tables</H3>
<P>
The rasterizer has a much easier time traversing tables if they
are padded so that each table begins on a 4-byte boundary. It
is highly recommended that all tables be long aligned and padded
with zeroes.
<p>
For OpenType fonts based on TrueType outlines, the following tables are used: 

<BR>&nbsp;<BR><FONT SIZE=5>Tables Related to TrueType Outlines</FONT>
<TABLE width=460 BGCOLOR="#F0F0F0" CELLPADDING=2>
<THEAD>
<TR><TH ALIGN=LEFT BGCOLOR="#c0c0c0">Tag</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD>
<TBODY>                                                                                         
<TR>
<TD VALIGN=TOP><A HREF="cvt.htm">cvt</A></TD><TD VALIGN=TOP>Control Value Table</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="fpgm.htm">fpgm</A></TD><TD VALIGN=TOP>Font program</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="glyf.htm">glyf</A></TD><TD VALIGN=TOP>Glyph data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="loca.htm">loca</A></TD><TD VALIGN=TOP>Index to location</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="maxp.htm">maxp</A></TD><TD VALIGN=TOP>Maximum profile</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="prep.htm">prep</A></TD><TD VALIGN=TOP>CVT Program</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
<P>
The PostScript font extensions define a new set of tables containing data
specific to PostScript fonts that are used instead of the tables listed above.<BR>

<BR>&nbsp;<BR><FONT SIZE=5>Tables Related to PostScript Outlines</FONT>
<TABLE WIDTH=460 BGCOLOR="#F0F0F0" CELLPADDING=2><THEAD>
<TR>

<TH BGCOLOR="#c0c0c0">Tag</TH><TH BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD>
<TBODY>
<TR>
<TD VALIGN=TOP><A HREF="cff.htm">CFF</A></TD><TD VALIGN=TOP>PostScript font program (compact font format)</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="fvar.htm">fvar</A></TD><TD VALIGN=TOP>Apple's font variations table</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="mmsd.htm">MMSD</A></TD><TD VALIGN=TOP>Multiple master supplementary data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="mmfx.htm">MMFX</A></TD><TD VALIGN=TOP>Multiple master font metrics</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
Whether TrueType or PostScript outlines are used in an OpenType font, the following tables are required for the font to function correctly:

<BR>&nbsp;<BR><FONT SIZE=5>Required Tables</FONT>
<TABLE width=460 BGCOLOR="#F0F0F0" CELLPADDING=2>
<THEAD>
<TR>

<TH ALIGN=LEFT BGCOLOR="#c0c0c0">Tag</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP><A HREF="cmap.htm">cmap</A></TD><TD VALIGN=TOP>Character to glyph mapping</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="head.htm">head</A></TD><TD VALIGN=TOP>Font header</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="hhea.htm">hhea</A></TD><TD VALIGN=TOP>Horizontal header</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="hmtx.htm">hmtx</A></TD><TD VALIGN=TOP>Horizontal metrics</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="name.htm">name</A></TD><TD VALIGN=TOP>Naming table</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="os2.htm">OS/2</A></TD><TD VALIGN=TOP>OS/2 and Windows specific metrics</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="post.htm">post</A></TD><TD VALIGN=TOP>PostScript information</TD></TR>
</TABLE>&nbsp;&nbsp;
<P>
There are also several optional tables that support vertical layout as well as other advanced typographic functions:<BR>


<BR>&nbsp;<BR><FONT SIZE=5>Advanced Typographic Tables</FONT>
<TABLE width=460 BGCOLOR="#F0F0F0" CELLPADDING=2><THEAD>
<TR>

<TH ALIGN=LEFT BGCOLOR="#c0c0c0">Tag</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP><A HREF="base.htm">BASE</A></TD><TD VALIGN=TOP>Baseline data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="gdef.htm">GDEF</A></TD><TD VALIGN=TOP>Glyph definition data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="gpos.htm">GPOS</A></TD><TD VALIGN=TOP>Glyph positioning data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="gsub.htm">GSUB</A></TD><TD VALIGN=TOP>Glyph substitution data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="jstf.htm">JSTF</A></TD><TD VALIGN=TOP>Justification data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="vhea.htm">vhea</A></TD><TD VALIGN=TOP>Vertical Metrics header</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="vmtx.htm">vmtx</A></TD><TD VALIGN=TOP>Vertical Metrics</TD></TR>
</TABLE>&nbsp;&nbsp;<P>
<P>
OpenType fonts may also contain bitmaps of glyphs, in addition to outlines. Hand-tuned bitmaps are especially useful in OpenType fonts for representing complex glyphs at very small sizes. If a bitmap for a particular size is provided in a font, it will be used by the system instead of the outline when rendering the glyph. ATM will support hand-tuned bitmaps in OpenType fonts.


<BR>&nbsp;<BR><FONT SIZE=5>Tables Related to Bitmap Glyphs</FONT>
<TABLE width=460 BGCOLOR="#F0F0F0" CELLPADDING=2><THEAD>
<TR>

<TH ALIGN=LEFT BGCOLOR="#c0c0c0">Tag</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP><A HREF="ebdt.htm">EBDT</A></TD><TD VALIGN=TOP>Embedded bitmap data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="eblc.htm">EBLC</A></TD><TD VALIGN=TOP>Embedded bitmap location data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="ebsc.htm">EBSC</A></TD><TD VALIGN=TOP>Embedded bitmap scaling data</TD></TR>
</TABLE>&nbsp;&nbsp;<P>

<BR>&nbsp;<BR><FONT SIZE=5>Other OpenType Tables</FONT>
<TABLE width=460 BGCOLOR="#F0F0F0" CELLPADDING=2><THEAD>
<TR>

<TH ALIGN=LEFT BGCOLOR="#c0c0c0">Tag</TH><TH ALIGN=LEFT BGCOLOR="#C0C0C0">Name</TH></TR>
</THEAD><TBODY>
<TR>
<TD VALIGN=TOP><A HREF="dsig.htm">DSIG</A></TD><TD VALIGN=TOP>Digital signature</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="hdmx.htm">hdmx</A></TD><TD VALIGN=TOP>Linear threshhold data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="pclt.htm">PCLT</A></TD><TD VALIGN=TOP>PCL 5 data</TD></TR>
<TR>
<TD VALIGN=TOP><A HREF="vdmx.htm">VDMX</A></TD><TD VALIGN=TOP>Vertical device metrics</TD></TR>


</TABLE>&nbsp;&nbsp;<P></BODY></HTML>
