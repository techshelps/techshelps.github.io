<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Justification Table</TITLE>

<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>


<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">


<H2>The Justification Table(JSFT)</H2>

<P>The Justification table (JSTF) provides font developers with additional control over glyph substitution and positioning in justified text. Text-processing clients now have more options to expand or shrink word and glyph spacing so text fills the specified line length.

<H3>Overview</H3>

<P>When justifying text, the text-processing client distributes the characters in each line to completely fill the specified line length. Whether removing space to fit more characters in the line or adding more space to spread the characters, justification can produce large gaps between words, cramped or extended glyph spacing, uneven line break patterns, and other jarring visual effects. For example:<BR>

<BR>&nbsp;<BR>
<CENTER>
<TABLE CELLPADDING=10 BGCOLOR=#F0F0F0><TR><TD>
<IMG  WIDTH=410 HEIGHT=120 ALT="DIAGRAM" SRC="fig6a.gif"><BR>
</TABLE>
</CENTER>
<BR>
<STRONG>Figure 6a. Poorly justified text</STRONG>

<P>To offset these effects, text-processing clients have used justification algorithms that redistribute the space with a series of glyph spacing adjustments that progress from least to most obvious. Typically, the client will begin by expanding or compressing the space between words. If these changes aren't enough or look distracting, the client might hyphenate the word at the end of the line or adjust the space between glyphs in one or more lines.

<P>To disguise spacing inconsistencies so they won't disrupt the flow of text for a reader, the font developer can use the JSTF table to enable or disable individual glyph substitution and positioning actions that apply to specific scripts, language systems, and glyphs in the font. 

<P>For instance, a ligature glyph can replace multiple glyphs, shortening the line of text with an unobtrusive, localized adjustment (see Figure 6b). Font-specific positioning changes can be applied to particular glyphs in a text line that combines two or more fonts. Other options include repositioning the individual glyphs in the line, expanding the space between specific pairs of glyphs, and decreasing the spacing within particular glyph sequences.<BR>

<BR>&nbsp;<BR>
<CENTER>
<TABLE CELLPADDING=10 BGCOLOR=#F0F0F0><TR><TD>
<IMG  WIDTH=432 HEIGHT=97 ALT="DIAGRAM" SRC="fig6b.gif"><BR>
</TABLE>
</CENTER>
<BR>
<STRONG>Figure 6b. JSTF shortens the top line of this example by using the &quot;ffi&quot; ligature</STRONG>

<P>The font designer or developer defines JSTF data as prioritized suggestions. Each suggestion lists the particular actions that the client can use to adjust the line of text. Justification actions may apply to both vertical and horizonal text.

<H3>Table Organization</H3>

<P>The JSTF table organizes data by script and language system, as do the GSUB and GPOS tables. The JSTF table begins with a header that lists scripts in an array of JstfScriptRecords (see Figure 6c). Each record contains a ScriptTag and an offset to a JstfScript table that contains script and language-specific data:

<UL>
<LI>A default justification language system table (DefJstfLangSys) defines script-specific data that applies to the entire script in the absence of any language-specific information.
<LI>A justification language system table (JstfLangSys) stores the justification data for each language system.
</UL>

<BR>&nbsp;<BR>
<CENTER>
<TABLE CELLPADDING=10 BGCOLOR=#F0F0F0><TR><TD>
<IMG  WIDTH=374 HEIGHT=258 ALT="DIAGRAM" SRC="fig6c.gif"><BR>
</TABLE>
</CENTER>
<BR>
<STRONG>Figure 6c. High-level organization of JSTF table</STRONG>

<P>A JstfLangSys table contains a list of justification suggestions. Each suggestion consists of a list of GSUB or GPOS LookupList indices to lookups that may be enabled or disabled to add or remove space in the line of text. In addition, each suggestion can include a set of dedicated justification lookups with maximum adjustment values to extend or shrink the amount of space.

<P>The font developer prioritizes suggestions based on how they affect the appearance and function of the text line, and the client applies the suggestions in that order. Low-numbered (high-priority) suggestions correspond to &quot;least bad&quot; options. 

<P>Each script also may supply a list of extender glyphs, such as kashidas in Arabic. A client may use the extender glyphs in addition to the justification suggestions.

<P>A client begins justifying a line of text only after implementing all selected GSUB and GPOS features for the string. Starting with the lowest-numbered suggestion, the client enables or disables the lookups specified in the JSTF table, reassembles the lookups in the LookupList order, and applies them to each glyph in the string one after another. If the line still is not the correct length, the client processes the next suggestion in ascending order of priority. This continues until the line length meets the justification requirements. 

<BLOCKQUOTE>
<STRONG>Note:</STRONG> If any JSTF suggestion at any priority level modifies a GSUB or GPOS lookup that was previously applied to the glyph string, then the text processing client must apply the JSTF suggestion to an unmodified version of the glyph string.
</BLOCKQUOTE>

<P>The rest of this chapter describes the tables and records used by the JSTF table for scripts and language systems:

<UL>
<LI>Script information includes the JstfScript table (plus its associated JstfLangSysRecords) and the ExtenderGlyph table. 
<LI>Language system information includes the JstfLangSys table, JstfPriority table (and its associated JstfDataRecord), the JstfModList table, and the JstfMax table.
</UL>

<H3>JSTF Header</H3>

<P>The JSTF table begins with a header that contains a version number for the table (Version), a count of the number of scripts used in the font (JstfScriptCount), and an array of records (JstfScriptRecord). Each record contains a script tag (JstfScriptTag) and an offset to a JstfScript table (JstfScript). 
<BLOCKQUOTE>
<STRONG>Note:</STRONG> The JstfScriptTags must correspond with the ScriptTags listed in the GSUB and GPOS tables.</BLOCKQUOTE>

<P>Example 1 at the end of this chapter shows a JSTF Header table and JstfScriptRecord.


<BR>&nbsp;<BR><FONT SIZE=5>JSTF header</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY>
<TR><TD VALIGN=TOP>fixed32</TD><TD VALIGN=TOP>Version</TD><TD>Version of the JSTF table-initially set to 0x00010000</TD></TR>	
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>JstfScriptCount</TD><TD>Number of JstfScriptRecords in this table</TD></TR>	
<TR><TD VALIGN=TOP>struct</TD><TD VALIGN=TOP>JstfScriptRecord[JstfScriptCount]</TD><TD>Array of JstfScriptRecords-in alphabetical order, by JstfScriptTag</TD></TR>
</TABLE>&nbsp;&nbsp;	

<BR>&nbsp;<BR><FONT SIZE=5>JstfScriptRecord</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>Tag</TD><TD VALIGN=TOP>JstfScriptTag</TD><TD>4-byte JstfScript identification</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>JstfScript</TD><TD>Offset to JstfScript table-from beginning of JSTF Header</TD></TR>
</TABLE>&nbsp;&nbsp;
	
<H3>Justification Script Table</H3>

<P>A Justification Script (JstfScript) table describes the justification information for a single script. It consists of an offset to a table that defines extender glyphs (ExtenderGlyph), an offset to a default justification table for the script (DefJstfLangSys), and a count of the language systems that define justification data (JstfLangSysCount).

<P>If a script uses the same justification information for all language systems, the font developer defines only the DefJstfLangSys table and sets the JstfLangSysCount to zero (0). However, if any language system has unique justification suggestions, JstfLangSysCount will be a positive value, and the JstfScript table must include an array of records (JstfLangSysRecord), one for each language system. Each JstfLangSysRecord contains a language system tag (JstfLangSysTag) and an offset to a justification language system table (JstfLangSys). In the JstfLangSysRecord array, records are ordered alphabetically by JstfLangSysTag.
<BLOCKQUOTE>
<STRONG>Note:</STRONG> No JstfLangSysRecord is defined for the default script data; the data is stored in the DefJstfLangSys table instead.
</BLOCKQUOTE>

Example 2 at the end of the chapter shows a JstfScript table for the Arabic script and a JstfLangSysRecord for the Farsi language system.

<BR>&nbsp;<BR><FONT SIZE=5>JstfScript table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtenderGlyph</TD><TD>Offset to ExtenderGlyph table-from beginning of JstfScript table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>DefJstfLangSys</TD><TD>Offset to Default JstfLangSys table-from beginning of JstfScript table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>JstfLangSysCount</TD><TD>Number of JstfLangSysRecords in this table- may be zero (0)</TD></TR>
<TR><TD VALIGN=TOP>struct</TD><TD VALIGN=TOP>JstfLangSysRecord<BR>[JstfLangSysCount]</TD><TD>Array of JstfLangSysRecords-in alphabetical order, by JstfLangSysTag</TD></TR>
</TABLE>&nbsp;&nbsp;	


<BR>&nbsp;<BR><FONT SIZE=5>JstfLangSysRecord</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>Tag</TD><TD VALIGN=TOP>JstfLangSysTag</TD><TD>4-byte JstfLangSys identifier</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>JstfLangSys</TD><TD>Offset to JstfLangSys table-from beginning of JstfScript table</TD></TR>
</TABLE>&nbsp;&nbsp;
	
<H3>Extender Glyph Table</H3>

<P>The Extender Glyph table (ExtenderGlyph) lists indices of glyphs, such as Arabic kashidas, that a client may insert to extend the length of the line for justification. The table consists of a count of the extender glyphs for the script (GlyphCount) and an array of extender glyph indices (ExtenderGlyph), arranged in increasing numerical order.

<P>Example 2 at the end of this chapter shows an ExtenderGlyph table for Arabic kashida glyphs.


<BR>&nbsp;<BR><FONT SIZE=5>ExtenderGlyph table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>GlyphCount</TD><TD>Number of Extender Glyphs in this script</TD></TR>
<TR><TD VALIGN=TOP>GlyphID</TD><TD VALIGN=TOP>ExtenderGlyph[GlyphCount]</TD><TD>GlyphIDs-in increasing numerical order</TD></TR>
</TABLE>&nbsp;&nbsp;
	
<H3>Justification Language System Table</H3>

<P>The Justification Language System (JstfLangSys) table contains an array of justification suggestions, ordered by priority. A text-processing client doing justification should begin with the suggestion that has a zero (0) priority, and then-as necessary-apply suggestions of increasing priority until the text is justified.

<P>The font developer defines the number and the meaning of the priority levels. Each priority level stands alone; its suggestions are not added to the previous levels.
The JstfLangSys table consists of a count of the number of priority levels (JstfPriorityCnt) and an array of offsets to Justification Priority tables (JstfPriority), stored in priority order.
Example 2 at the end of the chapter shows how to define a JstfLangSys table.


<BR>&nbsp;<BR><FONT SIZE=5>JstfLangSys table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>JstfPriorityCnt</TD><TD>Number of JstfPriority tables</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>JstfPriority[JstfPriorityCnt]</TD><TD>Array of offsets to JstfPriority tables-from beginning of JstfLangSys table-in priority order</TD></TR>
</TABLE>&nbsp;&nbsp;
	
<H3>Justification Priority Table</H3>
<P>A Justification Priority (JstfPriority) table defines justification suggestions for a single priority level. Each priority level specifies whether to enable or disable GSUB and GPOS lookups or apply text justification lookups to shrink and extend lines of text.

<P>JstfPriority has offsets to four tables with line shrinkage data: two are JstfGSUBModList tables for enabling and disabling glyph substitution lookups, and two are JstfGPOSModList tables for enabling and disabling glyph positioning lookups. Offsets to JstfGSUBModList and JstfGPOSModList tables also are defined for line extension. 

<P>Example 3 at the end of this chapter demonstrates two JstfPriority tables for two justification suggestions.


<BR>&nbsp;<BR><FONT SIZE=5>JstfPriority table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Type</TH><TH BGCOLOR="#C0C0C0">Name</TH><TH BGCOLOR="#C0C0C0">Description</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ShrinkageEnableGSUB</TD><TD>Offset to Shrinkage Enable JstfGSUBModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ShrinkageDisableGSUB</TD><TD>Offset to Shrinkage Disable JstfGSUBModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ShrinkageEnableGPOS</TD><TD>Offset to Shrinkage Enable JstfGPOSModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ShrinkageDisableGPOS</TD><TD>Offset to Shrinkage Disable JstfGPOSModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ShrinkageJstfMax</TD><TD>Offset to Shrinkage JstfMax table-from beginning of JstfPriority table	
-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtensionEnableGSUB</TD><TD>Offset to Extension Enable JstfGSUBModList table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtensionDisableGSUB</TD><TD>Offset to Extension Disable JstfGSUBModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtensionEnableGPOS</TD><TD>Offset to Extension Enable JstfGSUBModList table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtensionDisableGPOS</TD><TD>Offset to Extension Disable JstfGSUBModList table-from beginning of JstfPriority table-may be NULL</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>ExtensionJstfMax</TD><TD>Offset to Extension JstfMax table-from beginning of JstfPriority table	
-may be NULL</TD></TR>
</TABLE>&nbsp;&nbsp;	

<H3>Justification Modification List Tables</H3>

<P>The Justification Modification List tables (JstfGSUBModList and JstfGPOSModList) contain lists of indices into the lookup lists of either the GSUB or GPOS tables. The client can enable or disable the lookups to justify text. For example, to increase line length, the client might disable a GSUB ligature substitution.
<P>Each JstfModList table consists of a count of Lookups (LookupCount) and an array of lookup indices (LookupIndex).
<P>To justify a line of text, a text-processing client enables or disables the specified lookups in a JstfModList table, reassembles the lookups in the LookupList order, and applies them to each glyph in the string one after another.

<BLOCKQUOTE>
<STRONG>Note:</STRONG> If any JSTF suggestion at any priority level modifies a GSUB or GPOS lookup previously applied to the glyph string, then the text-processing client must apply the JSTF suggestion to an unmodified version of the glyph string.
</BLOCKQUOTE>

<P>Example 3 at the end of this chapter shows JstfGSUBModList and JstfGPOSModList tables with data for shrinking and extending text line lengths.


<BR>&nbsp;<BR><FONT SIZE=5>JstfGSUBModList table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Type</TH>
<TH BGCOLOR="#C0C0C0">Name</TH>
<TH BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>LookupCount</TD><TD>Number of lookups for this modification</TD></TR>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>GSUBLookupIndex[LookupCount]</TD><TD>Array of LookupIndex identifiers in GSUB-in increasing numerical order</TD></TR>
</TABLE>&nbsp;&nbsp;	


<BR>&nbsp;<BR><FONT SIZE=5>JstfGPOSModList table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Type</TH>
<TH BGCOLOR="#C0C0C0">Name</TH>
<TH BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>LookupCount</TD><TD>Number of lookups for this modification</TD></TR>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>GPOSLookupIndex[LookupCount]</TD><TD>Array of LookupIndex identifiers in GPOS-in increasing numerical order</TD></TR>
</TABLE>&nbsp;&nbsp;	

<H3>Justification Maximum Table</H3>

<P>A Justification Maximum table (JstfMax) consists of an array of offsets to justification lookups (Lookup) and a count of the defined lookups (Lookup). JstfMax lookups typically are located after the JstfMax table in the font definition.

<P>JstfMax tables have the same format as lookup tables and subtables in the GPOS table, but the JstfMax lookups reside in the JSTF table and contain justification data only. The lookup data might specify a single adjustment value for positioning all glyphs in the script, or it might specify more elaborate adjustments, such as different values for different glyphs or special values for specific pairs of glyphs. 

<BLOCKQUOTE>
<STRONG>Note:</STRONG> All GPOS lookup types except contextual positioning lookups may be defined in a JstfMax table.
</BLOCKQUOTE>

<P>JstfMax lookup values are defined in GPOS ValueRecords and may be specified for any advance or placement position, whether horizontal or vertical. These values define the maximum shrinkage or extension allowed per glyph. To justify text, a text-processing client may choose to adjust a glyph's positioning by any amount from zero (0) to the specified maximum.

<P>Example 4 at the end of this chapter shows a JstfMax table. It defines a justification lookup to change the size of the word space glyph to extend line lengths.


<BR>&nbsp;<BR><FONT SIZE=5>JstfMax table</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Type</TH>
<TH BGCOLOR="#C0C0C0">Name</TH>
<TH BGCOLOR="#C0C0C0">Description</TH></TR>
</THEAD><TBODY>
<TR><TD VALIGN=TOP>uint16</TD><TD VALIGN=TOP>LookupCount</TD><TD>Number of lookup Indices for this modification</TD></TR>
<TR><TD VALIGN=TOP>Offset</TD><TD VALIGN=TOP>Lookup[LookupCount]</TD><TD>Array of offsets to GPOS-type lookup tables-from beginning of JstfMax table-in design order</TD></TR>
</TABLE>&nbsp;&nbsp;
	
<H3>JSTF Table Examples</H3>

<P>The rest of this chapter describes examples of all the JSTF table formats. All the examples reflect unique parameters described below, but the samples provide a useful reference for building tables specific to other situations. 

<P>The examples have three columns showing hex data, source, and comments.

<H4>Example 1: JSTF Header Table and JstfScriptRecord</H4>
<P>Example 1 demonstrates how a script is defined in the JSTF Header with a JstfScriptRecord that identifies the script and references its JstfScript table.  


<BR>&nbsp;<BR><FONT SIZE=5>Example 1</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Hex Data</TH>
<TH BGCOLOR="#C0C0C0">Source</TH>
<TH BGCOLOR="#C0C0C0">Comments</TH></TR>
</THEAD><TBODY>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JSTFHeader</STRONG><BR>TheJSTFHeader</TD><TD VALIGN=BOTTOM>JSTFHeader table definition</TD></TR>
<TR><TD VALIGN=TOP>00010000</TD><TD VALIGN=TOP>0x00010000</TD><TD>version</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>JstfScriptCount<BR>JstfScriptRecord[0]</TD></TR>
<TR><TD VALIGN=TOP>74686169</TD><TD VALIGN=TOP>&quot;thai&quot;</TD><TD>JstfScriptTag</TD></TR>
<TR><TD VALIGN=TOP>000C</TD><TD VALIGN=TOP>ThaiScript</TD><TD>offset to JstfScript table</TD></TR></TABLE>&nbsp;&nbsp;

<H4>Example 2: JstfScript Table, ExtenderGlyph Table, JstfLangSysRecord, and JstfLangSys Table</H4>
<P>Example 2 shows a JstfScript table for the Arabic script and the tables it references. The DefJstfLangSys table defines justification data to apply to the script in the absence of language-specific information. In the example, the table lists two justification suggestions in priority order. 

<P>JstfScript also supplies language-specific justification data for the Farsi language. The JstfLangSysRecord identifies the language and references its JstfLangSys table. The FarsiJstfLangSys lists one suggestion for justifying Farsi text.

<P>The ExtenderGlyph table in JstfScript lists the indices of all the extender glyphs used in the script.


<BR>&nbsp;<BR><FONT SIZE=5>Example 2</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD>
<TR>
<TH BGCOLOR="#C0C0C0">Hex Data</TH>
<TH BGCOLOR="#C0C0C0">Source</TH>
<TH BGCOLOR="#C0C0C0">Comments</TH></TR>
</THEAD><TBODY>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfScript</STRONG><BR>ArabicScript</TD><TD VALIGN=BOTTOM>JstfScript table definition</TD></TR>
<TR><TD VALIGN=TOP>000C</TD><TD VALIGN=TOP>ArabicExtenders</TD><TD>ExtenderGlyph</TD></TR>
<TR><TD VALIGN=TOP>0012</TD><TD VALIGN=TOP>ArabicDefJstfLangSys</TD><TD>offset to DefJstfLangSys table</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>JstfLangSysCount<BR>JstfLangSysRecord[0]</TD></TR>
<TR><TD VALIGN=TOP>50455220</TD><TD VALIGN=TOP>&quot;FAR &quot;</TD><TD>JstfLangSysTag</TD></TR>
<TR><TD VALIGN=TOP>0018</TD><TD VALIGN=TOP>FarsiJstfLangSys</TD><TD>JstfLangSys<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>ExtenderGlyph</STRONG><BR>ArabicExtenders</TD><TD VALIGN=BOTTOM>ExtenderGlyph table definition</TD></TR>
<TR><TD VALIGN=TOP>0002</TD><TD VALIGN=TOP>2</TD><TD>GlyphCount</TD></TR>
<TR><TD VALIGN=TOP>01D3</TD><TD VALIGN=TOP>TatweelGlyphID</TD><TD>ExtenderGlyph[0]</TD></TR>
<TR><TD VALIGN=TOP>01D4</TD><TD VALIGN=TOP>LongTatweelGlyphID</TD><TD>ExtenderGlyph[1]<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfLangSys</STRONG><BR>ArabicDefJstfLangSys</TD><TD VALIGN=BOTTOM>JstfLangSys table definition</TD></TR>
<TR><TD VALIGN=TOP>0002</TD><TD VALIGN=TOP>2</TD><TD>JstfPriorityCnt</TD></TR>
<TR><TD VALIGN=TOP>000A</TD><TD VALIGN=TOP>ArabicScriptJstfPriority1</TD><TD>offset to JstfPriority[0] table</TD></TR>
<TR><TD VALIGN=TOP>001E</TD><TD VALIGN=TOP>ArabicScriptJstfPriority2</TD><TD>offset to JstfPriority[1] table<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfLangSys</STRONG><BR>FarsiJstfLangSys</TD><TD VALIGN=BOTTOM>JstfLangSys table definition</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>JstfPriorityCnt</TD></TR>
<TR><TD VALIGN=TOP>002C</TD><TD VALIGN=TOP>FarsiLangJstfPriority1</TD><TD>offset to JstfPriority[0] table</TD></TR></TABLE>&nbsp;&nbsp;

<H4>Example 3: JstfPriority Table, JstfGSUBModList Table, and JstfGPOSModList Table</H4>
<P>Example 3 shows the JstfPriority and JstfModList table definitions for two justification suggestions defined in priority order. The first suggestion uses ligature substitution to shrink the lengths of text lines, and it extends line lengths by replacing ligatures with their individual glyph components. Other lookup actions are not recommended at this priority level and are set to NULL. The associated JstfModList tables enable and disable three substitution lookups.

<P>The second suggestion enables glyph kerning to reduce line lenths and disables glyph kerning to extend line lengths. Each action uses three lookups. This suggestion also includes a JstfMax table to extend line lengths, called WordSpaceExpandMax, which is described in Example 4.


<BR>&nbsp;<BR><FONT SIZE=5>Example 3</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3><THEAD><TR>
<TH BGCOLOR="#C0C0C0">Hex Data</TH><TH BGCOLOR="#C0C0C0">Source</TH><TH BGCOLOR="#C0C0C0">Comments</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfPriority</STRONG><BR>USEnglishFirstJstfPriority</TD><TD VALIGN=BOTTOM>JstfPriority table definition</TD></TR>
<TR><TD VALIGN=TOP>0028</TD><TD VALIGN=TOP>EnableGSUBLookupsToShrink</TD><TD>offset to ShrinkageEnableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageDisableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageEnableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageDisableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to Shrinkage JstfMax table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionEnableGSUB, JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0038</TD><TD VALIGN=TOP>DisableGSUBLookupsToExtend</TD><TD>offset to ExtensionDisableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionEnableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionDisableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to Extension JstfMax table<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfPriority</STRONG><BR>USEnglishSecondJstfPriority</TD><TD VALIGN=BOTTOM>JstfPriority table definition</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageEnableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageDisableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ShrinkageEnableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>001C</TD><TD VALIGN=TOP>DisableGPOSLookupsToShrink</TD><TD>offset to ShrinkageDisableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to Shrinkage JstfMax table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionEnableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionDisableGSUB JstfGSUBModList table</TD></TR>
<TR><TD VALIGN=TOP>002C</TD><TD VALIGN=TOP>EnableGPOSLookupsToExtend</TD><TD>offset to ExtensionEnableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to ExtensionDisableGPOS JstfGPOSModList table</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>NULL</TD><TD>offset to Extension JstfMax table<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfGSUBModList</STRONG><BR>EnableGSUBLookupsToShrink</TD><TD VALIGN=BOTTOM>JstfGSUBModList table definition, enable three ligature    substitution lookups</TD></TR>
<TR><TD VALIGN=TOP>0003</TD><TD VALIGN=TOP>3</TD><TD>LookupCount</TD></TR>
<TR><TD VALIGN=TOP>002E</TD><TD VALIGN=TOP>46</TD><TD>LookupIndex[0]</TD></TR>
<TR><TD VALIGN=TOP>0035</TD><TD VALIGN=TOP>53</TD><TD>LookupIndex[1]</TD></TR>
<TR><TD VALIGN=TOP>0063</TD><TD VALIGN=TOP>99</TD><TD>LookupIndex[2]<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfGPOSModList</STRONG><BR>DisableGPOSLookupsToShrink</TD><TD VALIGN=BOTTOM>JstfGPOSModList table definition, disable three tight kerning     lookups</TD></TR>
<TR><TD VALIGN=TOP>0003</TD><TD VALIGN=TOP>3</TD><TD>LookupCount</TD></TR>
<TR><TD VALIGN=TOP>006C</TD><TD VALIGN=TOP>108</TD><TD>LookupIndex[0]</TD></TR>
<TR><TD VALIGN=TOP>006E</TD><TD VALIGN=TOP>110</TD><TD>LookupIndex[1]</TD></TR>
<TR><TD VALIGN=TOP>0070</TD><TD VALIGN=TOP>112</TD><TD>LookupIndex[2]<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfGSUBModList</STRONG><BR>DisableGSUBLookupsToExtend</TD><TD>JstfGSUBModList table definition, disable three ligature 
substitution lookups</TD></TR>
<TR><TD VALIGN=TOP>0003</TD><TD VALIGN=TOP>3</TD><TD>LookupCount</TD></TR>
<TR><TD VALIGN=TOP>002E</TD><TD VALIGN=TOP>46</TD><TD>LookupIndex[0]</TD></TR>
<TR><TD VALIGN=TOP>0035</TD><TD VALIGN=TOP>53</TD><TD>LookupIndex[1]</TD></TR>
<TR><TD VALIGN=TOP>0063</TD><TD VALIGN=TOP>99</TD><TD>LookupIndex[2]<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfGPOSModList</STRONG><BR>EnableGPOSLookupsToExtend</TD><TD>JstfGPOSModList table definition enable three tight kerning     lookups</TD></TR>
<TR><TD VALIGN=TOP>0003</TD><TD VALIGN=TOP>3</TD><TD>LookupCount</TD></TR>
<TR><TD VALIGN=TOP>006C</TD><TD VALIGN=TOP>108</TD><TD>LookupIndex[0]</TD></TR>
<TR><TD VALIGN=TOP>006E</TD><TD VALIGN=TOP>110</TD><TD>LookupIndex[1]</TD></TR>
<TR><TD VALIGN=TOP>0070</TD><TD VALIGN=TOP>112</TD><TD>LookupIndex[2]</TD></TR></TABLE>&nbsp;&nbsp;

<H4>Example 4: JstfMax Table</H4>
<P>The JstfMax table in Example 4 defines a lookup to expand the advance width of the word space glyph and extend line lengths. The lookup definition is identical to the SinglePos lookup type in the GPOS table although it is enabled only when justifying text. The ValueRecord in the WordSpaceExpand lookup subtable specifies an XAdvance adjustment of 360 units, which is the maximum value the font developer recommends for acceptable text rendering. The text-processing client may implement the lookup using any value between zero and the maximum. 


<BR>&nbsp;<BR><FONT SIZE=5>Example 4</FONT>
<TABLE BGCOLOR="#F0F0F0" WIDTH=460 BORDER=0 CELLPADDING=3>
<THEAD><TR><TH BGCOLOR="#C0C0C0">Hex Data</TH><TH BGCOLOR="#C0C0C0">Source</TH><TH BGCOLOR="#C0C0C0">Comments</TH></TR></THEAD>
<TBODY><TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>JstfMax</STRONG><BR>WordSpaceExpandMax</TD><TD VALIGN=BOTTOM>JstfMax table definition</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>LookupCount</TD></TR>
<TR><TD VALIGN=TOP>0004</TD><TD VALIGN=TOP>WordSpaceExpandLookup</TD><TD>offset to Jstf Lookup[0] table<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>Lookup</STRONG><BR>WordSpaceExpandLookup</TD><TD VALIGN=BOTTOM>Jstf Lookup table definition</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>LookupType, SinglePos Lookup</TD></TR>
<TR><TD VALIGN=TOP>0000</TD><TD VALIGN=TOP>0x0000</TD><TD>LookupFlag</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>SubTableCount</TD></TR>
<TR><TD VALIGN=TOP>0008</TD><TD VALIGN=TOP>WordSpaceExpandSubtable</TD><TD>offset to Subtable[0], SinglePos subtable<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>SinglePosFormat1</STRONG><BR>WordSpaceExpandSubtable</TD><TD VALIGN=BOTTOM>SinglePos subtable definition</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>PosFormat</TD></TR>
<TR><TD VALIGN=TOP>0008</TD><TD VALIGN=TOP>WordSpaceCoverage</TD><TD>offset to Coverage table</TD></TR>
<TR><TD VALIGN=TOP>0004</TD><TD VALIGN=TOP>0x0004</TD><TD>ValueFormat, XAdvance only</TD></TR>
<TR><TD VALIGN=TOP>0168</TD><TD VALIGN=TOP>360</TD><TD>Value XAdvance value in Jstf, this is a max value, expand word space from zero to this amount<HR></TD></TR>
<TR><TD VALIGN=TOP>&nbsp;</TD><TD VALIGN=TOP><STRONG>CoverageFormat1</STRONG><BR>WordSpaceCoverage</TD><TD VALIGN=BOTTOM>Coverage table definition</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>CoverageFormat</TD></TR>
<TR><TD VALIGN=TOP>0001</TD><TD VALIGN=TOP>1</TD><TD>GlyphCount</TD></TR>
<TR><TD VALIGN=TOP>0022</TD><TD VALIGN=TOP>WordSpaceGlyphID</TD><TD>GlyphArray[0]</TD></TR>
</TABLE>

</BODY></HTML>
