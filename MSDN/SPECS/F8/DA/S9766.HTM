<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Video Overlay Devices</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
</OBJECT></FORM>
<H2>Video Overlay Devices</H2>  </P>
Much of the digital-video command set also applies to video overlay devices. The command set enhances the video overlay command set included in the Windows 3.1 Software Development Kit. The enhancements include the ability to control audio and video effects. Video overlay devices are distinguished from digital video devices in that they have no workspace, they cannot play files, and they cannot record audio or video.</P>
A separate syntax summary for overlay devices is provided in an appendex. Only the commands listed in this summary are recognized by overlay devices. Other comments in this document indicate slight differences between overlay and digital-video devices for individual commands.</P>
Although not required, a single driver can provide both overlay and digital video functionality. A combination overlay and digital video driver must be installed with two separate entries in the [mci] section of the system.ini file. One entry uses the identifier "overlay" with an optional digit suffix. This lets the device detect that it is being opened as an overlay-only device. The other entry lets the device be opened as a digital-video device. As a digital-video device, it should use a documented identifier that allows applications to select the device by name.</P>
For example, if a device supports a file format called "mympeg," it might document the digital-video identifier as "mympeg_video" and install the following entries in the [mci] section of the system.ini file:</P>
  </P>
<P>[mci]</P>
<P>overlay=mympeg.drv</P>
<P>mympeg_video=mympeg.drv</P>
  </P>
An application uses the device for overlay functions by opening it as an overlay device: <B>open overlay</B></P>
An application uses the device for digital-video functions by opening it as a digital-video device. For example, it could use the command <B>open name.dat type mympeg_video</B></P>
The driver detects whether the device is opened for overlay-only functions or for digital-video functions by checking the <B>wType</B> field of the data structure sent with the MCI_OPEN_DRIVER message. If <B>wType</B> is set to MCI_DEVTYPE_OVERLAY, the device should only respond to overlay commands and reject an attempt to open the device as a compound device.</P>
If <B>wType</B> is set to MCI_DEVTYPE_DIGITAL_VIDEO or MCI_DEVTYPE_OTHER, the device should function as a digital-video device. If opened as a simple device, the device should respond only to <B>capability</B> and <B>info</B> commands. If opened as a compound device, the device responds to the entire command set.</P>
 </P></BODY></HTML>
