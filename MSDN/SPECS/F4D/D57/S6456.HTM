<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Table Directory</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
</OBJECT></FORM>
<H3>The Table Directory</H3>The TrueType font file begins at byte 0 with the Offset Table.</P>

<TABLE COLS="3" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="100pt" VALIGN="TOP"><COL WIDTH="125pt" VALIGN="TOP"><COL WIDTH="175pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Type</P></TD><TD VALIGN="TOP"><P>Name</P></TD><TD VALIGN="TOP"><P>Description</P></TD></TR><TR><TD VALIGN="TOP"><P>Fixed</P></TD><TD VALIGN="TOP"><P>sfnt version</P></TD><TD VALIGN="TOP"><P>0x00010000 for version 1.0.</P></TD></TR><TR><TD VALIGN="TOP"><P>USHORT </P></TD><TD VALIGN="TOP"><P>numTables</P></TD><TD VALIGN="TOP"><P>Number of tables. </P></TD></TR><TR><TD VALIGN="TOP"><P>USHORT </P></TD><TD VALIGN="TOP"><P>searchRange</P></TD><TD VALIGN="TOP"><P>(Maximum power of 2 <SPAN CLASS="Symbol">£</SPAN> numTables) x 16.</P></TD></TR><TR><TD VALIGN="TOP"><P>USHORT </P></TD><TD VALIGN="TOP"><P>entrySelector</P></TD><TD VALIGN="TOP"><P>Log2(maximum power of 2 <SPAN CLASS="Symbol">£</SPAN> numTables).</P></TD></TR><TR><TD VALIGN="TOP"><P>USHORT </P></TD><TD VALIGN="TOP"><P>rangeShift</P></TD><TD VALIGN="TOP"><P>NumTables x 16-searchRange.</P></TD></TR></TBODY></TABLE>
<BR></P>This is followed at byte 12 by the Table Directory entries. Entries in the Table Directory must be sorted in ascending order by tag.</P>

<TABLE COLS="3" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="100pt" VALIGN="TOP"><COL WIDTH="125pt" VALIGN="TOP"><COL WIDTH="175pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Type</P></TD><TD VALIGN="TOP"><P>Name</P></TD><TD VALIGN="TOP"><P>Description</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P>tag</P></TD><TD VALIGN="TOP"><P>4 -byte identifier.</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P>checkSum</P></TD><TD VALIGN="TOP"><P>CheckSum for this table.</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P>offset</P></TD><TD VALIGN="TOP"><P>Offset from beginning of TrueType font file.</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P>length</P></TD><TD VALIGN="TOP"><P>Length of this table.</P></TD></TR></TBODY></TABLE>
<BR></P>The Table Directory makes it possible for a given font to contain only those tables it actually needs. As a result there is no standard value for numTables.</P>
Tags are the names given to tables in the TrueType font file. At present, all tag names consist of four characters, though this need not be the case. Names with less than four letters are allowed if followed by the necessary trailing spaces. A list of the currently defined tags follows.</P>
<H4><A NAME="sec0"></A>Required Tables</H4>
<TABLE COLS="2" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="100pt" VALIGN="TOP"><COL WIDTH="335pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Tag</P></TD><TD VALIGN="TOP"><P>Name</P></TD></TR><TR><TD VALIGN="TOP"><P>cmap</P></TD><TD VALIGN="TOP"><P>character to glyph mapping</P></TD></TR><TR><TD VALIGN="TOP"><P>glyf</P></TD><TD VALIGN="TOP"><P>glyph data</P></TD></TR><TR><TD VALIGN="TOP"><P>head</P></TD><TD VALIGN="TOP"><P>font header</P></TD></TR><TR><TD VALIGN="TOP"><P>hhea</P></TD><TD VALIGN="TOP"><P>horizontal header</P></TD></TR><TR><TD VALIGN="TOP"><P>hmtx</P></TD><TD VALIGN="TOP"><P>horizontal metrics</P></TD></TR><TR><TD VALIGN="TOP"><P>loca</P></TD><TD VALIGN="TOP"><P>index to location</P></TD></TR><TR><TD VALIGN="TOP"><P>maxp</P></TD><TD VALIGN="TOP"><P>maximum profile</P></TD></TR><TR><TD VALIGN="TOP"><P>name</P></TD><TD VALIGN="TOP"><P>naming table</P></TD></TR><TR><TD VALIGN="TOP"><P>post</P></TD><TD VALIGN="TOP"><P>PostScript information</P></TD></TR><TR><TD VALIGN="TOP"><P>OS/2</P></TD><TD VALIGN="TOP"><P>OS/2 and Windows specific metrics</P></TD></TR></TBODY></TABLE>
<BR></P><H4><A NAME="sec1"></A>Optional Tables</H4>
<TABLE COLS="2" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="100pt" VALIGN="TOP"><COL WIDTH="335pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Tag</P></TD><TD VALIGN="TOP"><P>Name</P></TD></TR><TR><TD VALIGN="TOP"><P>cvt </P></TD><TD VALIGN="TOP"><P>Control Value Table</P></TD></TR><TR><TD VALIGN="TOP"><P>EBDT</P></TD><TD VALIGN="TOP"><P>Embedded bitmap data</P></TD></TR><TR><TD VALIGN="TOP"><P>EBLC</P></TD><TD VALIGN="TOP"><P>Embedded bitmap location data</P></TD></TR><TR><TD VALIGN="TOP"><P>EBSC</P></TD><TD VALIGN="TOP"><P>Embedded bitmap scaling data</P></TD></TR><TR><TD VALIGN="TOP"><P>fpgm</P></TD><TD VALIGN="TOP"><P>font program</P></TD></TR><TR><TD VALIGN="TOP"><P>gasp</P></TD><TD VALIGN="TOP"><P>grid-fitting and scan conversion procedure (grayscale)</P></TD></TR><TR><TD VALIGN="TOP"><P>hdmx</P></TD><TD VALIGN="TOP"><P>horizontal device metrics</P></TD></TR><TR><TD VALIGN="TOP"><P>kern</P></TD><TD VALIGN="TOP"><P>kerning</P></TD></TR><TR><TD VALIGN="TOP"><P>LTSH</P></TD><TD VALIGN="TOP"><P>Linear threshold table</P></TD></TR><TR><TD VALIGN="TOP"><P>prep</P></TD><TD VALIGN="TOP"><P>CVT Program</P></TD></TR><TR><TD VALIGN="TOP"><P>PCLT </P></TD><TD VALIGN="TOP"><P>PCL5</P></TD></TR><TR><TD VALIGN="TOP"><P>VDMX</P></TD><TD VALIGN="TOP"><P>Vertical Device Metrics table</P></TD></TR><TR><TD VALIGN="TOP"><P>vhea</P></TD><TD VALIGN="TOP"><P>Vertical Metrics header</P></TD></TR><TR><TD VALIGN="TOP"><P>vmtx</P></TD><TD VALIGN="TOP"><P>Vertical Metrics</P></TD></TR></TBODY></TABLE>
<BR></P>Other tables may be defined for other platforms and for future expansion. Note that these tables will not have any effect on the scan converter. Tags for these tables must be registered with Apple Developer Technical Support. Tag names consisting of all lower case letters are reserved for Apple's use. The number 0 is never a valid tag name.</P>
Table checksums are the unsigned sum of the longs of a given table. In C, the following function can be used to determine a checksum:</P>
ULONG</P>
CalcTableChecksum(ULONG *Table, ULONG Length)</P>
{</P>
ULONG Sum = 0L;</P>
ULONG *Endptr = Table+((Length+3) &amp; ~3) / sizeof(ULONG);</P>
</P>
while (Table &lt; EndPtr)</P>
     Sum += *Table++;</P>
return Sum;</P>
}</P>
<B>Note:</B> This function implies that the length of a table must be a multiple of four bytes. While this is not a requirement for the TrueType scaler itself, it is suggested that all tables begin on four byte boundries, and pad any remaining space between tables with zeros. The length of all tables should be recorded in the table directory with their actual length.</P>
Note that the offset in the Table Directory is measured from the start of the TrueType font file.</P>
</P></BODY></HTML>
