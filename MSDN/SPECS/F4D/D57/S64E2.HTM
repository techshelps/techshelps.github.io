<HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TrueType Collection (TTC) Files</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><BODY BGCOLOR="#FFFFFF">
</OBJECT></FORM>
<H2>TrueType Collection (TTC) Files</H2>A TrueType Collection (TTC) is a means of delivering multiple TrueType fonts in a single file structure. TrueType Collections are most useful when the fonts to be delivered together share many glyphs in common. By allowing multiple fonts to share glyph sets, TTCs can result in a significant saving of file space.</P>
For example, a group of Japanese fonts may each have their own designs for the kana glyphs, but share identical designs for the kanji. With ordinary TrueType font files, the only way to include the common kanji glyphs is to copy their glyph data into each font. Since the kanji represent much more data than the kana, this results in a great deal of wasteful duplication of glyph data. TTCs were defined to solve this problem.</P>
<H3><A NAME="sec0"></A>TTC File Structure</H3>A TrueType Collection file consists of a single TTC Header table, two or more Table Directories, and a number of TrueType tables.</P>
The TTC Header must be located at the beginning of the TTC file.</P>
The TTC file must contain a complete Table Directory for each different font design. A TTC file Table Directory has exactly the same format as a TTF file Table Directory. The table offsets in all Table Directories within a TTC file are measured from the beginning of the TTC file.</P>
Each TrueType table in a TTC file is referenced through the Table Directories of all fonts which use that table. Some of the TrueType tables must appear multiple times, once for each font included in the TTC; while other tables should be shared by all fonts in the TTC.</P>
As an example, consider a TTC file which combines two Japanese fonts (Font1 and Font2). The fonts have different kana designs (Kana1 and Kana2) but use the same design for kanji. The TTC file contains a single 'glyf' table which includes both designs of kana together with the kanji; both fonts' Table Directories point to this 'glyf' table. But each font's Table Directory points to a different 'cmap' table, which identifies the glyph set to use. Font1's 'cmap' table points to the Kana1 region of the 'loca' and 'glyf' tables for kana glyphs, and to the kanji region for the kanji. Font2's 'cmap' table points to the Kana2 region of the 'loca' and 'glyf' tables for kana glyphs, and to the same kanji region for the kanji.</P>
The tables that should have a unique copy per font are those that are used by the system in identifying the font and its character mapping, including 'cmap', 'name', and 'OS/2'. The tables that should be shared by all fonts in the TTC are those that define glyph and instruction data or use glyph indices to access data: 'glyf', 'loca', 'hmtx', 'hdmx', 'LTSH', 'cvt ', 'fpgm', 'prep', 'EBLC', 'EBDT', 'EBSC', 'maxp', and so on. In practice, any tables which have identical data for two or more fonts may be shared.</P>
Creating a TrueType Collection by combining existing TrueType font files is a non-trivial process. It involves paying close attention the issue of glyph renumbering in a font and the side effects that can result, in the 'cmap' table and elsewhere. The fonts to be merged must also have compatible TrueType instructions—that is, their preprograms, function definitions, and control values must not conflict.</P>
TrueType Collection files use the filename suffix .TTC.</P>
<H3><A NAME="sec1"></A>TTC Header Table</H3>The purpose of the TTC Header table is to locate the different Table Directories within a TTC file.</P>
The TTC Header is located at the beginning of the TTC file (offset = 0). It consists of an identification tag, a version number, a count of the number of TrueType fonts (Table Directories) in the file, and an array of offsets to each Table Directory.</P>
<H4><A NAME="sec2"></A>TTC Header Table</H4>
<TABLE COLS="3" BORDER="1" CELLPADDING="7"><COLGROUP><COL WIDTH="63pt" VALIGN="TOP"><COL WIDTH="116pt" VALIGN="TOP"><COL WIDTH="239pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P>Type</P></TD><TD VALIGN="TOP"><P>Name</P></TD><TD VALIGN="TOP"><P>Description</P></TD></TR><TR><TD VALIGN="TOP"><P>TAG</P></TD><TD VALIGN="TOP"><P>TTCTag</P></TD><TD VALIGN="TOP"><P>TrueType Collection ID string: 'ttcf'</P></TD></TR><TR><TD VALIGN="TOP"><P>FIXED32</P></TD><TD VALIGN="TOP"><P>Version</P></TD><TD VALIGN="TOP"><P>Version of the TTC Header table (initially 0x00010000)</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P>DirectoryCount</P></TD><TD VALIGN="TOP"><P>Number of Table Directories in TTC</P></TD></TR><TR><TD VALIGN="TOP"><P>ULONG</P></TD><TD VALIGN="TOP"><P><SPAN CLASS="Symbol">Þ</SPAN>TableDirectory</P>
<P>[DirectoryCount]</P></TD><TD VALIGN="TOP"><P>Array of offsets to Table Directories from file begin</P></TD></TR></TBODY></TABLE>
<BR></P>Note that the TTC Header is <I>not</I> a table within a TrueType font file.</P></BODY></HTML>
