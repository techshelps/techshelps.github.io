<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating and Using Palettes</TITLE>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">



<H2>

<A NAME="_creating_and_using_palettes"></A>Creating and Using Palettes</H2>

<P>To create a logical palette, you should assign values to the members of a <B>LOGPALETTE</B> structure and pass a pointer to the structure to the <B>CreatePalette</B> function. The function returns a handle to a logical palette with the values specified in the <B>LOGPALETE</B> structure. </P>

<P>To gain access to the colors in the logical palette, use the <B>SelectPalette</B> function to select the palette into the current device context, and then use the <B>RealizePalette</B> function to make the system palette the same as the palette in the current device context. You can use the colors in the palette as soon as the logical palette has been realized. </P>

<P><B>Caution</B>  The <B>GetSystemPaletteEntries</B> and <B>RealizePalette</B> functions will fail if the device associated with the selected device index does not have a settable palette. You can use <B>GetDeviceCaps</B> to find out if the device has a settable palette.</P>

<P>Your logical palette should have just enough entries to represent the colors you need. You can use the <B>GetDeviceCaps</B> function to retrieve the maximum palette size associated with a device, or the <B>SIZEPALETTE</B> member. </P>

<P>You can use the <B>SetPaletteEntries</B> function to change the colors in an existing logical palette. After you have updated the colors, use <B>RealizePalette</B> to update the display. If you select a logical palette into more than one device context, any changes you make to the logical palette will affect all the device contexts to which it is attached. </P>

<P>You can use the <B>GetPaletteEntries</B> function to retrieve the color values for a logical palette. Use the <B>GetNearestPaletteIndex</B> function to retrieve the value in a specified logical palette that most closely matches a specified color value. </P>

<P>Use the <B>DeleteObject</B> function to delete a logical palette. Be sure that the logical palette is not selected into a device context when you delete it. </P>

<P>Windows CE does not arbitrate between the palettes of the background and foreground applications. The application running in the foreground has complete control over the system palette. Because of this, you should generally use only the first ten and last ten colors included in the stock palette of a display device, which are generally the standard Windows/VGA colors. Applications that use other colors may not display properly when they run in the background. Because Windows CE does not perform any color matching operations between the foreground and background applications, background applications cannot call <B>RealizePalette</B>.</P>

</BODY>
</HTML>
