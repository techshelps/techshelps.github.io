<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Accessing Persistent Storage</TITLE>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<TABLE ALIGN=right WIDTH=0 BORDER=0><TR><TD>
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_RegCreateKeyEx">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_Lists_of_Functions_and_Interfaces">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_Lists_of_Functions_and_Interfaces">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_CreateFile">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_CreateFile">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_SetFilePointer">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_CreateFile">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_SetEndOfFile">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_ReadFile">
</OBJECT>
<OBJECT ID="hhobj_10" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_WriteFile">
</OBJECT>
<OBJECT ID="hhobj_11" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_SetEndOfFile">
</OBJECT>
<OBJECT ID="hhobj_12" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_GetFileAttributes">
</OBJECT>
<OBJECT ID="hhobj_13" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_CreateFile">
</OBJECT>
<OBJECT ID="hhobj_14" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_LoadLibrary">
</OBJECT>
<OBJECT ID="hhobj_15" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_win32_CreateProcess">
</OBJECT>
<OBJECT ID="hhobj_16" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="_Lists_of_Functions_and_Interfaces">
</OBJECT>
</TD></TR></TABLE>



<H1>

<A NAME="_accessing_persistent_storage"></A>Accessing Persistent Storage</H1>

<P>The persistent storage that Windows CE makes available to applications is called the <I>object store</I>. This is the part of memory that is not used for the operating system.</P>

<P>The object store is used for the following purposes:

<UL>
	<LI>Registry entries
<P>The registry is a hierarchical database in which Windows CE stores information necessary to configure the operating system. It contains information on user profiles, applications, hardware, ports in use, and so on. The registry replaces most of the text-based initialization (.ini) files used in MS-DOS and Windows 3.x configuration files, such as AUTOEXEC.BAT and CONFIG.SYS. 

<P>Specific registry locations are described in various chapters of the <I>Windows CE Programmer's Guide</I>. An example of a registry location used for synchronization is HKEY_LOCAL_MACHINE\Software\Microsoft\Windows CE Services\ Services\Synchronization\Objects. 

<P>Windows CE supports a subset of the Win32 registry functions. The differences between the Windows CE functions and their Win32 counterparts are minimal. The main difference is that Windows CE assigns a default security descriptor to keys, so the parameter for security attributes in <A HREF="JavaScript:hhobj_1.Click()"><B>RegCreateKeyEx</B></A> should be set to NULL.  For a list of the supported functions, see <A HREF="JavaScript:hhobj_2.Click()">Lists of Functions and Interfaces</A>. 
</LI>

	<LI>Files
<P>The file system functions available to Windows CE-based applications are those supported by the Windows CE kernel. Note that the C Runtime library does not include any file access functions, such as <B>fopen</B>,<B> fread</B>,<B> </B>and <B>fprintf</B>. The following discussion highlights specific points concerning the Windows CE file system functions.  For a list of the file system functions, see <A HREF="JavaScript:hhobj_3.Click()">Lists of Functions and Interfaces</A>. 

<P><A HREF="JavaScript:hhobj_4.Click()"><B>CreateFile</B></A> opens existing files as well as creates new files. Windows CE does not support simultaneous read/write operations; thus, files cannot be created with the overlapped attribute set. To write to a file in the equivalent of append mode, call <A HREF="JavaScript:hhobj_5.Click()"><B>CreateFile</B></A> and <A HREF="JavaScript:hhobj_6.Click()"><B>SetFilePointer</B></A>. To overwrite the contents of a file, call <A HREF="JavaScript:hhobj_7.Click()"><B>CreateFile</B></A> and <A HREF="JavaScript:hhobj_8.Click()"><B>SetEndOfFile</B></A>. <A HREF="JavaScript:hhobj_9.Click()"><B>ReadFile</B></A> does not support asynchronous reads nor does it support reads through a socket. <A HREF="JavaScript:hhobj_10.Click()"><B>WriteFile</B></A> does not support asynchronous writes, and, unlike MS-DOS, Windows CE interprets zero bytes as a null write. To truncate or extend files, use <A HREF="JavaScript:hhobj_11.Click()"><B>SetEndOfFile</B></A>. 

<P>A ROM file is a file stored on a device as read-only memory, for example, flash memory or PC Cards. A ROM file is an option for dealing with the memory limitations of a Windows CE-based platform. The <A HREF="JavaScript:hhobj_12.Click()"><B>GetFileAttributes</B></A> function has additional return values for files stored in ROM. The FILE_ATTRIBUTE_INROM value identifies the file as read-only. The FILE_ATTRIBUTE_ROMMODULE value indicates that the file is designed to be executed in place, without first being copied to RAM. The <A HREF="JavaScript:hhobj_13.Click()"><B>CreateFile</B></A><B> </B>function cannot be used to access this type of file; the <A HREF="JavaScript:hhobj_14.Click()"><B>LoadLibrary</B></A> and <A HREF="JavaScript:hhobj_15.Click()"><B>CreateProcess</B></A> functions must be used instead.
</LI>

	<LI>Windows CE databases
<P>The rest of this chapter discusses Windows CE databases and the functions which relate to them.  For a list of the Windows CE database functions, see <A HREF="JavaScript:hhobj_16.Click()">Lists of Functions and Interfaces</A>. 
</LI>
</UL>

</BODY>
</HTML>
