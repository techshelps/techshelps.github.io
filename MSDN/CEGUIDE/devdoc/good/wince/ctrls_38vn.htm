<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Paint Cycles, Drawing Stages, and Notification Messages</TITLE>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">



<H2>

<A NAME="_paint_cycles_drawing_stages_and_notification_messages"></A>Paint Cycles, Drawing Stages, and Notification Messages</H2>

<P>Like all Windows-based applications, common controls paint and erase themselves based on messages received from the system or other applications. The process of a control painting or erasing itself is called a paint cycle. Controls that support custom draw send NM_CUSTOMDRAW notification messages periodically throughout each paint cycle. This notification message is accompanied by an <B>NMCUSTOMDRAW</B> structure or another structure that contains an <B>NMCUSTOMDRAW</B> structure as its first member. </P>

<P>In addition to other information, the <B>NMCUSTOMDRAW</B> structure informs the parent window about what stage of the paint cycle the control is in. This is referred to as the draw stage, and is represented by the value in the structure's <B>dwDrawStage</B> member. A control informs its parent about four basic, or global, draw stages. The flag values, defined in Commctrl.h, that represent these stages in the structure are described in the following table. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TH align=left width=48%>Global draw stage value</TH>
<TH align=left width=52%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_PREPAINT</TD>
<TD width=52%>Before the paint cycle begins.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_POSTPAINT</TD>
<TD width=52%>After the paint cycle is complete.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_PREERASE</TD>
<TD width=52%>Before the erase cycle begins.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_POSTERASE</TD>
<TD width=52%>After the erase cycle is complete.</TD>
</TR>
</TABLE><BR>

<P>Each of the preceding values can be combined with the CDDS_ITEM flag to specify draw stages for items. Item-specific values contained in Commctrl.h are described in the following table. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TH align=left width=48%>Item-specific draw stage value</TH>
<TH align=left width=52%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_ITEMPREPAINT</TD>
<TD width=52%>Before an item is drawn.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_ITEMPOSTPAINT</TD>
<TD width=52%>After an item has been drawn.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_ITEMPREERASE</TD>
<TD width=52%>Before an item is erased.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>CDDS_ITEMPOSTERASE</TD>
<TD width=52%>After an item has been erased.</TD>
</TR>
</TABLE><BR>

<P>You must process the <B>NM_CUSTOMDRAW</B> notification message and then return a specific value that informs the control what it must do. </P>

</BODY>
</HTML>
