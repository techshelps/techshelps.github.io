<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CONVERT</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_convert_appc"></a>CONVERT</h1>
<p>
The <b>CONVERT</b> verb translates an ASCII character string to EBCDIC or an EBCDIC character string to ASCII. The string to be converted is called the source string. The converted string is called the target string.</p>
<p>
The following structure describes the verb control block used by the <b>CONVERT</b> verb.</p>
<pre><code>struct convert {
    unsigned short       opcode;
    unsigned char        opext;
    unsigned char        reserv2;
    unsigned short       primary_rc;
    unsigned long        secondary_rc;
    unsigned char        direction;
    unsigned char        char_set;
    unsigned short       len;
    unsigned char FAR * source;
    unsigned char FAR * target;
};
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>opcode</b></dt>
<dd>
Supplied parameter. The verb identifying the operation code, sv_convert.</dd>
<dt>
<b>opext</b></dt>
<dd>
A reserved field.</dd>
<dt>
<b>reserv2</b></dt>
<dd>
A reserved field.</dd>
<dt>
<b>primary_rc</b></dt>
<dd>
Returned parameter. Specifies the primary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>secondary_rc</b></dt>
<dd>
Returned parameter. Specifies the secondary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>direction</b></dt>
<dd>
Supplied parameter. Specifies the direction of the conversion. To convert from ASCII to EBCDIC, use SV_ASCII_TO_EBCDIC. To convert from EBCDIC to ASCII, use SV_EBCDIC_TO_ASCII.</dd>
<dt>
<b>char_set</b></dt>
<dd>
Supplied parameter. Specifies the character set to use in converting the source string. Allowed values include SV_A (type A character set), SV_AE (type AE character set),  and SV_G (user-defined type G character set).</dd>
<dt>
<b>len</b></dt>
<dd>
Supplied parameter. Specifies the number of characters to be converted.
<p>
This length plus the offset from the beginning of the source or target buffer must not exceed the segment boundary.
</dd>
<dt>
<b>source</b></dt>
<dd>
Supplied parameter. Specifies the address of the buffer containing the character string to be converted.</dd>
<dt>
<b>target</b></dt>
<dd>
Supplied parameter. Specifies the address of the buffer to contain the converted character string.
<p>
This buffer can overlap or coincide with the buffer pointed to by the <b>source</b> parameter. In this case, the converted data string overwrites the source data string.

</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
sv_ok</dt>
<dd>
Primary return code; the verb executed successfully.</dd>
<dt>
sv_parameter_check</dt>
<dd>
Primary return code; the verb did not execute because of a parameter error.
<dl>
<dt>
sv_conversion_error</dt>
<dd>
Secondary return code; one or more characters in the source string were not found in the conversion table. These characters were converted to nulls (0x00). The verb still executed.</dd>
<dt>
sv_invalid_character_set</dt>
<dd>
Secondary return code; the <b>char_set</b> parameter contained an invalid value.</dd>
<dt>
sv_invalid_data_segment</dt>
<dd>
Secondary return code; the data buffer containing the source or target string did not fit in one segment, or the target segment was not a read/write segment. This applies only to the Microsoft® Windows NT®, Microsoft® Windows® 95, Windows version 3.<i>x</i>, and OS/2 operating systems.</dd>
<dt>
sv_invalid_direction</dt>
<dd>
Secondary return code; the direction contained an invalid value.</dd>
<dt>
sv_invalid_first_character</dt>
<dd>
Secondary return code; the first character of a type A source string was invalid.</dd>
<dt>
sv_table_error</dt>
<dd>
Secondary return code; one of the following occurred:
<table cellspacing=4 cols=1>
<tr valign=top>
<td width=100%><font face="Symbol">·</font>&nbsp;&nbsp;&nbsp;&nbsp;The file containing the user-written type G conversion table was not specified by the environment variable <b>CSVTBLG</b>.</td>
</tr>
<tr valign=top>
<td width=100%><font face="Symbol">·</font>&nbsp;&nbsp;&nbsp;&nbsp;The table was not in the correct format.</td>
</tr>
<tr valign=top>
<td width=100%><font face="Symbol">·</font>&nbsp;&nbsp;&nbsp;&nbsp;The file specified by the <b>CSVTBLG</b> variable was not found.</td>
</tr>
</table><br>

</dd>
</dl>
</dd>
<dt>
sv_comm_subsystem_not_loaded</dt>
<dd>
Primary return code; a required component could not be loaded or terminated while processing the verb. Thus, communication could not take place. Contact the system administrator for corrective action.</dd>
<dt>
sv_invalid_verb</dt>
<dd>
Primary return code; the <b>opcode</b> parameter did not match the operation code of any verb. No verb executed.</dd>
<dt>
sv_invalid_verb_segment</dt>
<dd>
Primary return code; the VCB extended beyond the end of the data segment.</dd>
<dt>
sv_unexpected_dos_error</dt>
<dd>
Primary return code; one of the following conditions occurred:
<ul>
<li>
The Windows NT, Windows 95, Windows version 3.<i>x</i>, Microsoft® MS-DOS®, or OS/2 system encountered an error while processing the verb. The operating system return code was returned through the secondary return code. If the problem persists, contact the system administrator for corrective action.</li>
<li>
A CSV was issued from a message loop that was invoked by another application issuing a Windows <b>SendMessage</b> function call, rather than the more common Windows <b>PostMessage</b> function call. Verb processing cannot take place.</li>
<li>
A CSV was issued when <b>SendMessage</b> invoked your application. You can determine whether your application has been invoked with <b>SendMessage</b> by using the <b>InSendMessage</b> Windows API function call.</li>
</ul>
</dd>
</dl>
<h4>Remarks</h4>
<p>
The type A character set consists of:
<ul>
<li>
Uppercase letters.</li>
<li>
Numerals 0 through 9.</li>
<li>
Special characters $, #, @, and space.</li>
</ul>
<p>
This character set is supported by a system-supplied type A conversion table.</p>
<p>
The first character of the source string must be an uppercase letter or the special character $, #, or @. Spaces are allowed only in trailing positions. Lowercase ASCII letters are translated to uppercase EBCDIC letters when the direction is ASCII to EBCDIC.</p>
<p>
The type AE character set consists of:
<ul>
<li>
Uppercase letters.</li>
<li>
Lowercase letters.</li>
<li>
Numerals 0 through 9.</li>
<li>
Special characters $, #, @, period, and space.</li>
</ul>
<p>
This character set is supported by a system-supplied type AE conversion table.</p>
<p>
The first character of the source string can be any character in the character set, except the space. Spaces are allowed only in trailing positions.</p>
<p>
During conversion, embedded blanks (including blanks in the first position) are converted to 0x00. Although such a conversion will complete, conversion_error is returned as the secondary return code, indicating that the CSV library has completed an irreversible conversion on the supplied data.</p>
<p>
For the Windows NT system, a description of <b>COMTBLG</b> should point to the Windows NT registry under <b>\SnaBase\Parameters\Client</b>. For the Windows version 3.<i>x</i> system, the fully qualified file name for a type G conversion table must be the <b>COMTBLG</b>=<i>filename</i> entry of the [WNAP] section in the WIN.INI file. Entries in this section of the WIN.INI file are used in all places where MS-DOS and OS/2 use environment variables. (If the file is not found, the system returns the parameter check sv_table_error.)</p>
<p>
The data for a type G conversion table must be an ASCII file 32 lines long. Each line must consist of 32 hexadecimal digits, representing 16 characters, and be terminated by a carriage return and line feed. The first 16 lines (256 characters) specify the EBCDIC characters to which ASCII characters are converted; the remaining 16 lines specify the ASCII characters to which EBCDIC characters are converted.</p>
<p>
The hexadecimal digits A through F can be either uppercase or lowercase. However, you may want to make these digits uppercase to ensure compatibility with IBM ES for OS/2 version 1.0.</p>
<p>
<b>Note</b>&nbsp;&nbsp;You can use <a href="appc08c_3z6r.htm"><b>GET_CP_CONVERT_TABLE</b></a> to build a type G user-written conversion table in memory, and then store the table in a file.</p>
<p>&nbsp;</p></body>
</HTML>
