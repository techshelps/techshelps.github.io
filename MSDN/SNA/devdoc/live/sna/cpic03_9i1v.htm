<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Set_Prepare_To_Receive_Type</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_set_prepare_to_receive_type_cpic"></a>Set_Prepare_To_Receive_Type</h1>
<p>
The <b>Set_Prepare_To_Receive_Type</b> call (function name <b>cmsptr</b>) specifies how the subsequent <a href="cpic03_0ihv.htm"><b>Prepare_To_Receive</b></a> calls will be executed. It overrides the default prepare-to-receive processing established by <a href="cpic03_0jhf.htm"><b>Initialize_Conversation</b></a> or <a href="cpic03_70df.htm"><b>Accept_Conversation</b></a>. By default, the prepare-to-receive processing is based on the synchronization level of the conversation.</p>
<p>
The prepare-to-receive type affects all subsequent <b>Prepare_To_Receive</b> calls. It can be changed by reissuing <b>Set_Prepare_To_Receive_Type</b>.</p>
<pre><code><b>CM_ENTRY Set_Prepare_To_Receive_Type(
  unsigned char FAR</b><i> *conversation_ID</i><b>,  </b>
<b>  CM_INT32 FAR</b><i> *prepare_to_receive_type</i><b>,  </b>
<b>  CM_INT32 FAR</b><i> *return_code            </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>conversation_ID</i></dt>
<dd>
Supplied parameter. Specifies the identifier for the conversation. The value of this parameter was returned by <a href="cpic03_0jhf.htm"><b>Initialize_Conversation</b></a> or <a href="cpic03_70df.htm"><b>Accept_Conversation</b></a>.</dd>
<dt>
<i>prepare_to_receive_type</i></dt>
<dd>
Supplied parameter. Specifies how subsequent <a href="cpic03_0ihv.htm"><b>Prepare_To_Receive</b></a> calls will be executed. Possible values are:
<dl>
<dt>
CM_PREP_TO_RECEIVE_CONFIRM</dt>
<dd>
Is used to send the partner program the contents of the LU's send buffer and a confirmation request. Upon receipt of confirmation, the conversation changes to RECEIVE state.</dd>
<dt>
CM_PREP_TO_RECEIVE_FLUSH</dt>
<dd>
Is used to send the partner program the contents of the local LU's send buffer and changes the conversation to RECEIVE state.</dd>
<dt>
CM_PREP_TO_RECEIVE_SYNC_LEVEL</dt>
<dd>
Is used by the conversation's synchronization level to determine prepare-to-receive processing. A default synchronization level is established by <a href="cpic03_0jhf.htm"><b>Initialize_Conversation</b></a> and can be overridden by <a href="cpic03_3fvn.htm"><b>Set_Sync_Level</b></a>.
<p>
If the synchronization level of the conversation is CM_NONE, the default, the contents of the local LU's send buffer are sent to the partner program and the conversation changes to RECEIVE state. If the synchronization level of the conversation is CM_CONFIRM, the contents of the local LU's send buffer and a request for confirmation are sent to the partner program. The conversation changes to RECEIVE state when the partner program issues <a href="cpic03_6c6b.htm"><b>Confirmed</b></a>, responding to the confirmation request.

</dd>
</dl>
</dd>
<dt>
<i>return_code</i></dt>
<dd>
The code returned from this call. The valid return codes are listed below.
</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
cm_ok</dt>
<dd>
Primary return code; the call executed successfully.</dd>
<dt>
cm_program_parameter_check</dt>
<dd>
Primary return code; one of the following occurred:
<ul>
<li>
The value specified by <i>prepare_to_receive_type</i> or <i>conversation_ID</i> is invalid.</li>
<li>
The <i>prepare_to_receive_type</i> parameter is set to CM_PREP_TO_RECEIVE_CONFIRM, but the conversation's synchronization level is set to CM_NONE.</li>
</ul>
</dd>
<dt>
cm_product_specific_error</dt>
<dd>
Primary return code; a product-specific error occurred and has been logged in the product's error log.
</dd>
</dl>
<h4>State Changes</h4>
<p>
The conversation can be in any state except RESET.</p>
<p>
There is no state change.</p>
<p>&nbsp;</p></body>
</HTML>
