<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LUA_COMMON</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_lua_common_lua"></a>LUA_COMMON</h2>
<p>
The following structure lists the common data structure parameters used by all the LUA verbs.</p>
<pre><code>struct LUA_COMMON {
    unsigned short lua_verb;
    unsigned short lua_verb_length;
    unsigned short lua_prim_rc;
    unsigned long  lua_sec_rc;
    unsigned short lua_opcode;
    unsigned long  lua_correlator;
    unsigned char  lua_luname[8];
    unsigned short lua_extension_list_offset;
    unsigned short lua_cobol_offset;
    unsigned long  lua_sid;
    unsigned short lua_max_length;
    unsigned short lua_data_length;
    char FAR *     lua_data_ptr;
    unsigned long  lua_post_handle;
    struct LUA_TH  lua_th;
    struct LUA_RH  lua_rh;
    struct LUA_FLAG1 lua_flag1;
    unsigned char  lua_message_type;
    struct LUA_FLAG2 lua_flag2;
    unsigned char  lua_resv56[7];
    unsigned char  lua_encr_decr_option;
} LUA_COMMON;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>lua_verb</b></dt>
<dd>
Supplied parameter. Contains the verb code, LUA_VERB_RUI for RUI verbs or LUA_VERB_SLI for SLI verbs. For both of these macros the value is 0x5200.</dd>
<dt>
<b>lua_verb_length</b></dt>
<dd>
Supplied parameter. Specifies the length in bytes of the LUA VCB. It must contain the length of the verb record being issued.</dd>
<dt>
<b>lua_prim_rc</b></dt>
<dd>
Primary return code set by LUA at the completion of the verb. The valid return codes vary depending on the LUA verb issued.</dd>
<dt>
<b>lua_sec_rc</b></dt>
<dd>
Secondary return code set by LUA at the completion of the verb. The valid return codes vary depending on the LUA verb issued.</dd>
<dt>
<b>lua_opcode</b></dt>
<dd>
Supplied parameter. Contains the LUA command code (verb operation code) for the verb to be issued, for example, LUA_OPCODE_RUI_BID for the <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> verb.</dd>
<dt>
<b>lua_correlator</b></dt>
<dd>
Supplied parameter. Contains a user-supplied value that links the verb with other user-supplied information. LUA does not use or change this information. This parameter is optional.</dd>
<dt>
<b>lua_luname</b></dt>
<dd>
Supplied parameter. Specifies the ASCII name of the local LU used by the Windows LUA session.
<p>
<a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a> and <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> require this parameter. Other Windows LUA verbs only require this parameter if <b>lua_sid</b> is zero.

<p>
This parameter is eight bytes long, padded on the right with spaces (0x20) if the name is shorter than eight characters.
</dd>
<dt>
<b>lua_extension_list_offset</b></dt>
<dd>
Specifies the offset from the start of the VCB to the extension list of user-supplied dynamic-link libraries (DLLs). Not used by RUI in Microsoft® SNA Server and should be set to zero.</dd>
<dt>
<b>lua_cobol_offset</b></dt>
<dd>
Offset of the Cobol extension. Not used by LUA in SNA Server and should be zero.</dd>
<dt>
<b>lua_sid</b></dt>
<dd>
Supplied and returned parameter. Specifies the session identifier and is returned by <a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a> and <a href="luac03_37z5.htm"><b>RUI_INIT</b></a>. Other verbs use this parameter to identify the session used for the command. If other verbs use the <b>lua_luname</b> parameter to identify sessions, set the <b>lua_sid</b> parameter to zero.</dd>
<dt>
<b>lua_max_length</b></dt>
<dd>
Specifies the length of received buffer for <a href="luac03_7dwh.htm"><b>RUI_READ</b></a><b> </b>and <a href="luac04_2nfl.htm"><b>SLI_RECEIVE</b></a>. For other RUI and SLI verbs, it is not used and should be set to zero. </dd>
<dt>
<b>lua_data_length</b></dt>
<dd>
Returned parameter. Specifies the length of data returned in <b>lua_peek_data</b> for the <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> verb.</dd>
<dt>
<b>lua_data_ptr</b></dt>
<dd>
Pointer to the application-supplied buffer that contains the data to be sent for <a href="luac04_2lr5.htm"><b>SLI_SEND</b></a> and <a href="luac03_7uap.htm"><b>RUI_WRITE</b></a> or that will receive data for <b>SLI_RECEIVE</b> and <b>RUI_READ</b>. For other RUI and SLI verbs, this parameter is not used and should be set to zero. </dd>
<dt>
<b>lua_post_handle</b></dt>
<dd>
Supplied parameter. Used under Microsoft® Windows NT® and Microsoft® Windows® 95 if asynchronous notification is to be accomplished by events. This variable contains the handle of the event to be signaled or a window handle.
<p>
For all other environments, this parameter is reserved and should be set to zero.
</dd>
<dt>
<b>lua_th</b></dt>
<dd>
Returned parameter. Contains the SNA transmission header (TH) of the message sent or received. Various subparameters are set for write functions and returned for read and bid functions.
<dl>
<dt>
<b>lua_th.flags_fid</b></dt>
<dd>
Format identification type 2, four bits.</dd>
<dt>
<b>lua_th.flags_mpf</b></dt>
<dd>
Segmenting mapping field, two bits.</dd>
<dt>
<b>lua_th.flags_odai</b></dt>
<dd>
Originating address field–destination address field (OAF–DAF) assignor indicator, one bit.</dd>
<dt>
<b>lua_th.flags_efi</b></dt>
<dd>
Expedited flow indicator, one bit.</dd>
<dt>
<b>lua_th.daf</b></dt>
<dd>
Destination address field (DAF), an unsigned char.</dd>
<dt>
<b>lua_th.oaf</b></dt>
<dd>
Originating address field (OAF), an unsigned char.</dd>
<dt>
<b>lua_th.snf</b></dt>
<dd>
Sequence number field, an unsigned char[2].
</dd>
</dl>
</dd>
<dt>
<b>lua_rh</b></dt>
<dd>
Returned parameter. Contains the SNA request/response header (RH) of the message sent or received. It is set for the write function and returned by the read and bid functions.
<dl>
<dt>
<b>lua_rh.rri</b></dt>
<dd>
Request-response indicator, one bit.</dd>
<dt>
<b>lua_rh.ruc</b></dt>
<dd>
RU category, two bits.</dd>
<dt>
<b>lua_rh.fi</b></dt>
<dd>
Format indicator, one bit.</dd>
<dt>
<b>lua_rh.sdi</b></dt>
<dd>
Sense data included indicator, one bit.</dd>
<dt>
<b>lua_rh.bci</b></dt>
<dd>
Begin chain indicator, one bit.</dd>
<dt>
<b>lua_rh.eci</b></dt>
<dd>
End chain indicator, one bit.</dd>
<dt>
<b>lua_rh.dr1i</b></dt>
<dd>
Definite response 1 indicator, one bit.</dd>
<dt>
<b>lua_rh.dr2i</b></dt>
<dd>
Definite response 2 indicator, one bit.</dd>
<dt>
<b>lua_rh.ri</b></dt>
<dd>
Exception response indicator (for a request), or response type indicator (for a response), one bit.</dd>
<dt>
<b>lua_rh.qri</b></dt>
<dd>
Queued response indicator, one bit.</dd>
<dt>
<b>lua_rh.pi</b></dt>
<dd>
Pacing indicator, one bit.</dd>
<dt>
<b>lua_rh.bbi</b></dt>
<dd>
Begin bracket indicator, one bit.</dd>
<dt>
<b>lua_rh.ebi</b></dt>
<dd>
End bracket indicator, one bit.</dd>
<dt>
<b>lua_rh.cdi</b></dt>
<dd>
Change direction indicator, one bit.</dd>
<dt>
<b>lua_rh.csi</b></dt>
<dd>
Code selection indicator, one bit.</dd>
<dt>
<b>lua_rh.edi</b></dt>
<dd>
Enciphered data indicator, one bit.</dd>
<dt>
<b>lua_rh.pdi</b></dt>
<dd>
Padded data indicator, one bit.
</dd>
</dl>
</dd>
<dt>
<b>lua_flag1</b></dt>
<dd>
Supplied parameter. Contains a data structure containing flags for messages supplied by the application. This parameter is used by <a href="luac03_8fmp.htm"><b>RUI_BID</b></a>, <a href="luac03_7dwh.htm"><b>RUI_READ</b></a>, <a href="luac03_7uap.htm"><b>RUI_WRITE</b></a>, <a href="luac04_5z8h.htm"><b>SLI_BID</b></a>, <a href="luac04_2nfl.htm"><b>SLI_RECEIVE</b></a>, and <a href="luac04_2lr5.htm"><b>SLI_SEND</b></a>. For other LUA verbs this parameter is not used and should be set to zero.
<dl>
<dt>
<b>lua_flag1.bid_enable</b></dt>
<dd>
Bid enable indicator, one bit. </dd>
<dt>
<b>lua_flag1.close_abend</b></dt>
<dd>
Close immediate indicator, one bit. </dd>
<dt>
<b>lua_flag1.nowait</b></dt>
<dd>
No wait for data flag, one bit. </dd>
<dt>
<b>lua_flag1.sscp_exp</b></dt>
<dd>
SSCP expedited flow, one bit.</dd>
<dt>
<b>lua_flag1.sscp_norm</b></dt>
<dd>
SSCP normal flow, one bit.</dd>
<dt>
<b>lua_flag1.lu_exp</b></dt>
<dd>
LU expedited flow, one bit.</dd>
<dt>
<b>lua_flag1.lu_norm</b></dt>
<dd>
LU normal flow, one bit.
</dd>
</dl>
</dd>
<dt>
<b>lua_message_type</b></dt>
<dd>
Specifies the type of the inbound or outbound SNA commands and data. This is a returned parameter for <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> and <a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a> and a supplied parameter for <a href="luac04_2lr5.htm"><b>SLI_SEND</b></a>. For other LUA verbs this variable is not used and should be set to zero. 
<p>
Possible values are:

<p>
LUA_MESSAGE_TYPE_LU_DATA

<p>
LUA_MESSAGE_TYPE_SSCP_DATA

<p>
LUA_MESSAGE_TYPE_BID

<p>
LUA_MESSAGE_TYPE_BIND

<p>
LUA_MESSAGE_TYPE_BIS

<p>
LUA_MESSAGE_TYPE_CANCEL

<p>
LUA_MESSAGE_TYPE_CHASE

<p>
LUA_MESSAGE_TYPE_CLEAR

<p>
LUA_MESSAGE_TYPE_CRV

<p>
LUA_MESSAGE_TYPE_LUSTAT_LU

<p>
LUA_MESSAGE_TYPE_LUSTAT_SSCP

<p>
LUA_MESSAGE_TYPE_QC

<p>
LUA_MESSAGE_TYPE_QEC

<p>
LUA_MESSAGE_TYPE_RELQ

<p>
LUA_MESSAGE_TYPE_RQR

<p>
LUA_MESSAGE_TYPE_RTR

<p>
LUA_MESSAGE_TYPE_SBI

<p>
LUA_MESSAGE_TYPE_SHUTD

<p>
LUA_MESSAGE_TYPE_SIGNAL

<p>
LUA_MESSAGE_TYPE_SDT

<p>
LUA_MESSAGE_TYPE_STSN

<p>
LUA_MESSAGE_TYPE_UNBIND


<p>
The SLI receives and responds to the bind, crv, and stsn requests through the LUA interface extension routines.

<p>
lu_data, lustat_lu, lustat_sscp, and sscp_data are not SNA commands.
</dd>
<dt>
<b>lua_flag2</b></dt>
<dd>
Returned parameter. Contains flags for messages returned by LUA. This parameter is returned by <a href="luac03_8fmp.htm"><b>RUI_BID</b></a>, <a href="luac03_7dwh.htm"><b>RUI_READ</b></a>, <a href="luac03_7uap.htm"><b>RUI_WRITE</b></a>, <a href="luac04_5z8h.htm"><b>SLI_BID</b></a>, <a href="luac04_2nfl.htm"><b>SLI_RECEIVE</b></a>, and <a href="luac04_2lr5.htm"><b>SLI_SEND</b></a>. For other LUA verbs this parameter is not used and should be set to zero.
<dl>
<dt>
<b>lua_flag2.bid_enable</b></dt>
<dd>
Indicates that <b>RUI_BID</b> was successfully re-enabled if set to 1.</dd>
<dt>
<b>lua_flag2.async</b></dt>
<dd>
Indicates that the LUA interface verb completed asynchronously if set to 1.</dd>
<dt>
<b>lua_flag2.sscp_exp </b></dt>
<dd>
Indicates SSCP expedited flow if set to 1.</dd>
<dt>
<b>lua_flag2.sscp_norm</b></dt>
<dd>
Indicates SSCP normal flow if set to 1.</dd>
<dt>
<b>lua_flag2.lu_exp</b></dt>
<dd>
Indicates LU expedited flow if set to 1.</dd>
<dt>
<b>lua_flag2.lu_norm</b></dt>
<dd>
Indicates LU normal flow if set to 1.
</dd>
</dl>
</dd>
<dt>
<b>lua_resv56</b></dt>
<dd>
Supplied parameter. Reserved field used by <a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a> and <a href="luac03_37z5.htm"><b>RUI_INIT</b></a>. For all other LUA verbs, this parameter is reserved and should be set to zero.</dd>
<dt>
<b>lua_encr_decr_option</b></dt>
<dd>
Field for cryptography options. On <b>RUI_INIT</b>, only the following are supported:
<ul>
<li>
<b>lua_encr_decr_option</b> = 0</li>
<li>
<b>lua_encr_decr_option</b> = 128</li>
</ul>

<p>
For all other LUA verbs, this parameter is reserved and should be set to zero.

</dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
