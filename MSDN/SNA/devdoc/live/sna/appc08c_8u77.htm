<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LOG_MESSAGE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_log_message_appc"></a>LOG_MESSAGE</h1>
<p>
For OS/2 only, the <b>LOG_MESSAGE</b> verb records a message in the error log file and optionally displays the message on the user's screen. This verb is included for compatibility with existing applications.</p>
<p>
The following structure describes the verb control block used by the <b>LOG_MESSAGE </b>verb.</p>
<pre><code>struct log_message {
    unsigned short       opcode;
    unsigned char        opext;
    unsigned char        reserv2;
    unsigned short       primary_rc;
    unsigned long        secondary_rc;
    unsigned short       msg_num;
    unsigned char        origntr_id[8];
    unsigned char        msg_file_name[3];
    unsigned char        msg_act;
    unsigned short       msg_ins_len;
    unsigned char FAR * msg_ins_ptr;
};
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>opcode</b></dt>
<dd>
Supplied parameter. The verb identifying the operation code, SV_LOG_MESSAGE.</dd>
<dt>
<b>opext</b></dt>
<dd>
A reserved field.</dd>
<dt>
<b>reserv2</b></dt>
<dd>
A reserved field.</dd>
<dt>
<b>primary_rc</b></dt>
<dd>
Returned parameter. Specifies the primary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>secondary_rc</b></dt>
<dd>
Returned parameter. Specifies the secondary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>msg_num</b></dt>
<dd>
Supplied parameter. Specifies the number of the message in the message file specified by <b>msg_file_name</b>.</dd>
<dt>
<b>origntr_id</b></dt>
<dd>
Supplied parameter. Specifies the name of the component issuing <b>LOG_MESSAGE</b> or an 8-byte, user-supplied string.</dd>
<dt>
<b>msg_file_name</b></dt>
<dd>
Supplied parameter. Specifies the name of the file containing the message to be logged.</dd>
<dt>
<b>msg_act </b></dt>
<dd>
Supplied parameter. Specifies the action to be taken when processing the message:
<ul>
<li>
Use SV_INTRV to log the intervention with a severity level of 12 and display the message on the user's screen. The user must press a key to remove the message from the screen.</li>
<li>
Use SV_NO_INTRV to log the intervention with a severity level of 12 but not display the message.</li>
</ul>
</dd>
<dt>
<b>msg_ins_len</b></dt>
<dd>
Supplied parameter. Specifies the length of data to be inserted into the message. Set this parameter to zero if no data is to be inserted.</dd>
<dt>
<b>msg_ins_ptr</b></dt>
<dd>
Supplied parameter. Specifies the address of the data to be inserted into the message.
<p>
Use this parameter only if <b>msg_ins_len</b> is greater than zero.

</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
sv_ok</dt>
<dd>
Primary return code; the verb executed successfully.</dd>
<dt>
sv_parameter_check</dt>
<dd>
Primary return code; the verb did not execute because of a parameter error.
<dl>
<dt>
sv_invalid_data_segment</dt>
<dd>
Secondary return code; the data that was to be inserted into the message extended beyond the segment boundary.</dd>
<dt>
sv_invalid_message_action</dt>
<dd>
Secondary return code; the <b>msg_act</b> parameter contained an invalid value.
</dd>
</dl>
</dd>
<dt>
sv_comm_subsystem_not_loaded</dt>
<dd>
Primary return code; a required component could not be loaded or terminated while processing the verb. Thus, communication could not take place. Contact the system administrator for corrective action.</dd>
<dt>
sv_invalid_verb</dt>
<dd>
Primary return code; the <b>opcode</b> parameter did not match the operation code of any verb. No verb executed.</dd>
<dt>
sv_invalid_verb_segment</dt>
<dd>
Primary return code; the VCB extended beyond the end of the data segment.</dd>
<dt>
sv_unexpected_dos_error</dt>
<dd>
Primary return code; one of the following conditions occurred:
<ul>
<li>
The Microsoft® Windows NT®, Microsoft® Windows® 95, Windows version 3.<i>x</i>, Microsoft® MS-DOS®, or OS/2 system encountered an error while processing the verb. The operating system return code was returned through the secondary return code. If the problem persists, contact the system administrator for corrective action.</li>
<li>
A CSV was issued from a message loop that was invoked by another application issuing a Windows <b>SendMessage</b> function call, rather than the more common Windows <b>PostMessage</b> function call. Verb processing cannot take place.</li>
<li>
A CSV was issued when <b>SendMessage</b> invoked your application. You can determine whether your application has been invoked with <b>SendMessage</b> by using the <b>InSendMessage</b> Windows API function call.</li>
</ul>
</dd>
</dl>
<h4>Remarks</h4>
<p>
The value for <b>msg_file_name</b> must be three characters long. Pad with spaces if necessary. The .MSG extension is added automatically.</p>
<p>
The total length of <b>msg_ins_len</b>, including header information (40 bytes), message text, and inserted data, should not exceed 256 bytes. If the length is greater than 256 bytes, the communication system will attempt to log only the header information and inserted text; the message text will be left out.</p>
<p>
When you create the log message file, you can specify where in the message the additional data is to be inserted. Further information is provided below.</p>
<p>
The data for <b>msg_ins_ptr</b> consists of a series of up to nine null-terminated strings. (Because IBM OS/2 ES version 1.0 supports only three data strings, you may want to limit the inserted text to three strings to ensure compatibility.)</p>
<h4>Creating a Message File</h4>
<p>
If you want to create your own message file, you must use the utility MKMSGF. This utility can also run with MS-DOS.</p>
<p>
The first three characters of the message number must match the three-character name of the log message file. These three characters are declared at the top of the file as well.</p>
<p>
The system finds the message file as follows:
<ul>
<li>
If you use your own message file, the system assumes the file is in the same directory as your program's executable file.</li>
<li>
If you use the default message file, COM.MSG, the system finds the file automatically, provided the SnaBase for Microsoft® SNA Server is loaded.</li>
<li>
If you use the default message file without loading the previously-mentioned software, the system expects DPATH to indicate the path to the message file. This applies only to the Windows version 3.<i>x</i> and OS/2 operating systems.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
