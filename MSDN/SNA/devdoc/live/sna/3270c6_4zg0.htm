<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3270 User Record Format</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_user_record_format_3270"></a>3270 User Record Format</h1>
<p>
The format of the 3270 user record is shown below. The first structure definition is an LU/session information record, which includes details of a 3270 LU; the second is the 3270 user record, which includes a number of LU/session information records.</p>
<p>
Note that the user record is not a fixed length, because the number of LU/session information records in the remap list is variable. The structures used below are provided simply as a template to allow you to map to the correct offset in the record.</p>
<pre><code>typedef struct tecwrksd {
    UCHAR   cwshost[9];
    USHORT  cwsestyp;
    USHORT  cwsmodov; 
    USHORT  cwspad;
} TECWRKSD;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>cwshost[9]</b></dt>
<dd>
LU/pool name accessed.</dd>
<dt>
<b>cwsestyp</b></dt>
<dd>
Session type (M2, M3, M4, M5, printer).</dd>
<dt>
<b>cwsmodov</b></dt>
<dd>
Whether or not the user has override permission.</dd>
<dt>
<b>cwspad</b></dt>
<dd>
Two bytes of padding.
</dd>
</dl>
<pre><code>typedef struct tecwrkus {
    USHORT   cwlen;
    USHORT   cwtype;
    UCHAR    cwname[21];
    UCHAR    cwremark[26];
    UCHAR    cwstylef[9];
    USHORT   cwvewrtm;
    USHORT   cwalert;
    USHORT   cwchghan;
    USHORT   cwmaxses;
    USHORT   cwnumrec;
    TECWRKSD cwsesdat[10];
    USHORT   cwmodisf;
    UCHAR    cwstatus;
    UCHAR    cwpad;
    USHORT   cwnumrmp;
    TECWRKSD cwremap[1];
} TECWRKUS;
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>cwlen</b></dt>
<dd>
Length of record.</dd>
<dt>
<b>cwtype</b></dt>
<dd>
Type of record.</dd>
<dt>
<b>cwname[21]</b></dt>
<dd>
User name.</dd>
<dt>
<b>cwremark[26]</b></dt>
<dd>
Comment field.</dd>
<dt>
<b>cwstylef[9]</b></dt>
<dd>
Initial style file name.</dd>
<dt>
<b>cwvewrtm</b></dt>
<dd>
Whether or not user can view RTM information.</dd>
<dt>
<b>cwalert</b></dt>
<dd>
Whether or not user has ALERT permission.</dd>
<dt>
<b>cwchghan</b></dt>
<dd>
Whether or not user can change LU/pool name accessed.</dd>
<dt>
<b>cwmaxses</b></dt>
<dd>
Maximum number of active sessions (1–10).</dd>
<dt>
<b>cwnumrec</b></dt>
<dd>
Number of sessions for user.</dd>
<dt>
<b>cwsesdat[10]</b></dt>
<dd>
Session information records.</dd>
<dt>
<b>cwmodisf</b></dt>
<dd>
Permission to modify initial style.</dd>
<dt>
<b>cwstatus</b></dt>
<dd>
Status byte: user or group.</dd>
<dt>
<b>cwpad</b></dt>
<dd>
One byte of padding.</dd>
<dt>
<b>cwnumrmp</b></dt>
<dd>
Number of LUs/pools in remap list.</dd>
<dt>
<b>cwremap[1]</b></dt>
<dd>
LU/Pool remap list.
</dd>
</dl>
<h4>For Win32</h4>
<p>
Microsoft® SNA Server for Microsoft® Windows NT® and Microsoft® Windows® 95 permits configuration of more than 10 sessions per user. If this is done, the first 10 sessions are placed in the <b>cwsesdat</b> array with <b>cwnumrec</b> set to 10 and the remainder are placed in the location of the remap list. The <b>cwnumrmp </b>member indicates the number of <b>TECWRKSD</b> structures in the remap list. Note that this permits <b>cwmaxses </b>to be greater than <b>cwnumrec</b>.</p>
<p>
The following paragraphs explain the meaning of each field in the structures, and indicate how the application should use it. The sections on configuring 3270 users and LUs in the <i>Microsoft SNA Server Administration Guide </i>should also be used as a cross-reference.</p>
<h4>Members</h4>
<dl>
<dt>
<b>cwshost</b></dt>
<dd>
The name (up to eight characters) of the LU or LU pool that this session is configured to use. The application specifies this name on the <a href="3270c4_4jcg.htm"><b>Open(SSCP) Request</b></a>.</dd>
<dt>
<b>cwsestyp</b></dt>
<dd>
The LU type (display or printer) of the LU used by this session and (if it is a display LU or a pool of display LUs) the screen model. The possible values are:
<p class=indent1>
CERTMOD2 (0)        Model 2 display (24 by 80)<br>
CERTMOD3 (1)        Model 3 display (32 by 80)<br>
CERTMOD4 (2)        Model 4 display (43 by 80)<br>
CERTMOD5 (3)        Model 5 display (27 by 132)<br>
CERTPRNT (4)         Host printer</p>

<p>
The application should use this value to distinguish between display and printer sessions and to set the appropriate screen model for display sessions.
</dd>
<dt>
<b>cwsmodov</b></dt>
<dd>
TRUE if the user has permission to override the screen model for display sessions — that is, to change the session to use a different screen model from the one configured. If this value is FALSE, the user should not be permitted to change the screen model. This field is not used for printer sessions and should not be checked.</dd>
<dt>
<b>cwlen</b></dt>
<dd>
The length of the 3270 user record (this is variable because it contains a variable number of LU/session records in the remap list). The application should use this value to locate the start of the next 3270 user record when searching for the correct record.</dd>
<dt>
<b>cwtype</b></dt>
<dd>
Identifies this as a 3270 user record.</dd>
<dt>
<b>cwname</b></dt>
<dd>
The LAN Manager user name, or other identifying name, of the 3270 user (up to 20 characters). The application uses this to search for the correct 3270 user record.</dd>
<dt>
<b>cwremark</b></dt>
<dd>
An optional comment field (up to 25 characters), used in the configuration program to give more information about the user (for example, the user's full name).</dd>
<dt>
<b>cwstylef</b></dt>
<dd>
The name (up to eight characters) of the default style file used by this user (a file containing the user's 3270 customization settings, used by the SNA Server 3270 emulation programs). This field can be used to identify the equivalent file for your 3270 emulator, if appropriate.
<p>
If this field is blank, no style file is used and the 3270 emulator should revert to its default settings (unless overridden by a style file specified by the user).
</dd>
<dt>
<b>cwvewrtm</b></dt>
<dd>
TRUE if this user is permitted to view a display of Response Time Monitor (RTM) statistics for his or her 3270 sessions. If this field is FALSE, the application should not display RTM statistics and should not display a last transaction time indicator (LTTI) on the status line of display sessions. See <a href="3270c6_6rg0.htm">Diagnostics Record Format</a> for more information on the use of RTM.</dd>
<dt>
<b>cwalert</b></dt>
<dd>
TRUE if the user is permitted to send NetView user alerts. If this field is FALSE, the user should not be permitted to send alerts. See <a href="3270c6_6rg0.htm">Diagnostics Record Format</a> for more information on the use of alerts.</dd>
<dt>
<b>cwchghan</b></dt>
<dd>
TRUE if the user is permitted to remap a 3270 session to use a different LU (in which case it can be changed to use any LU in the remap list—see <b>cwremap</b>). If this field is FALSE, the application should not allow the user to remap sessions.</dd>
<dt>
<b>cwmaxses</b></dt>
<dd>
The maximum number of active sessions permitted to this user. If the number of sessions configured (see <b>cwnumrec</b>) is greater than this, the user must not be allowed to activate more sessions at a time than this field specifies.</dd>
<dt>
<b>cwnumrec</b></dt>
<dd>
The total number of sessions configured for this user. The user record always contains 10 LU/session records (see <b>cwsesdat</b>), but only this number of the records will be used—the remainder will be filled with zeros.</dd>
<dt>
<b>cwsesdat</b></dt>
<dd>
Ten LU/session records. Some of these records can be filled with zeros, indicating that they are unused (<b>cwnumrec</b> gives the number of sessions that are used). The application should list, and allow the user to use, only the sessions that have valid session records here.</dd>
<dt>
<b>cwmodisf</b></dt>
<dd>
TRUE if the user is permitted to modify the initial 3270 customization. If this field is FALSE, the application should use the customization defined by <b>cwstylef</b> (if specified); the user should not be allowed to make changes to this style, or to override it by loading a different style file.</dd>
<dt>
<b>cwstatus</b></dt>
<dd>
Indicates whether the user name in this record is to a LAN Manager user name or group name. The least significant bit of this byte is CERTGRUP (1) for a group, and zero for a user. Other bits are not used.</dd>
<dt>
<b>cwpad</b></dt>
<dd>
Pad byte—not used by the application.</dd>
<dt>
<b>cwnumrmp</b></dt>
<dd>
The number of LU/session records in the remap list (see <b>cwremap</b>).</dd>
<dt>
<b>cwremap</b></dt>
<dd>
The list of LU/session records, which indicates the LUs to which the user can remap sessions (if any). If the user is not permitted to remap sessions (see <b>cwchghan</b>), this list is not used and should not be checked by the application.
</dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
