<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Sync Point Attach Manager</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_sync_point_attach_manager_appc"></a>Sync Point Attach Manager</h3>
<p>
Instead of issuing separate <a href="appc05b_0m77.htm"><b>RECEIVE_ALLOCATE</b></a> verbs for each possible transaction name, a Sync Point implementation may instead register as the Sync Point Attach Manager for an SNA server. It does so by issuing a <b>RECEIVE_ALLOCATE</b> verb specifying a TP name consisting of all 0x00s. </p>
<p>
When a Sync Point Attach Manager is registered, the following changes are effected in SNA Server's incoming Attach support:
<ul>
<li>
When an Attach message arrives for any TP name on a conversation with the <b>syncpoint_rqd</b> field of the VCB set to AP_YES, SNA Server matches it with the application that issued the special <b>RECEIVE_ALLOCATE</b> verb registering itself as the Sync Point Attach Manager.</li>
<li>
Any Attach message arriving for the Resynchronization TP (0x06F2) will automatically be routed to the Sync Point Attach Manager.</li>
<li>
If no <b>RECEIVE_ALLOCATE</b> has been issued for the Sync Point Attach Manager, or for the specific TP name, SNA Server will queue the Attach for a configured period of time. If no <b>RECEIVE_ALLOCATE</b> is issued in that time, the Attach will be rejected with a return code of TP_NOT_AVAILABLE_RETRY.</li>
<li>
If a <b>RECEIVE_ALLOCATE</b> is matched with the Attach message, the verb is returned to the TP with the <b>tp_name</b> field of the VCB set to the TP name contained in the Attach message.</li>
</ul>
<p>
Applications using this feature must adhere to two restrictions:
<ul>
<li>
All verbs issued on conversations started in this manner must be issued by the same process, as SNA Server cannot pass <b>tp_id</b>s between processes.</li>
<li>
Only a single process may register as the Sync Point Attach Manager on any SNA server. If a second process attempts to register, its <b>RECEIVE_ALLOCATE</b> verb will return immediately with the primary return code set to AP_SYNCPOINT_MANAGER_ACTIVE.</li>
</ul>
<p>
Sync Point Attach Manager applications must reside on an SNA server. They may not be distributed across SNA Server clients. This restriction is imposed to ensure that only a single instance of Sync Point Services (SPS) and Conversation-Protected Resource Manager (C-PRM) exists for each LU on the SNA server (which might not be the case if Sync Point Attach Managers were visible from multiple servers in the SNA Server Domain).</p>
<p>
The structure of the <a href="appc05b_0m77.htm"><b>RECEIVE_ALLOCATE</b></a> verb control block does not require modification to support this function.</p>
<p>&nbsp;</p></body>
</HTML>
