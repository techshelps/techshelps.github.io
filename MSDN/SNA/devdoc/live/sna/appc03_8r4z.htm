<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting a Session Limit to Zero</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_setting_a_session_limit_to_zero_appc"></a>Setting a Session Limit to Zero</h2>
<p>
After <b>CNOS</b> raises the session limit above zero, it can reset the limit to zero only. It cannot set the session limit to a value that is not zero, and it cannot redistribute the number of sessions allocated as the contention winners and losers. Therefore, your program cannot change the mode session limits if the two LUs have already set the limits to a nonzero value, regardless of which LU initiated the <b>CNOS</b> transaction.</p>
<p>
A program can change the session limits from a nonzero value, as long as the program first changes the session limit to zero. For example, if the session limit is 8, a program can change it to 6 by first issuing <b>CNOS</b> and changing the session limit to zero, and then issuing <b>CNOS</b> again and setting the session limit to 6.</p>
<p>
APPC can activate one or more LU-LU sessions with the specified mode name as a result of initializing the session limit. You cannot use <b>CNOS</b> to activate sessions between two LUs on the same server. APPC deactivates all LU-LU sessions for the specified mode name (or for all mode names for a partner LU) as a result of resetting the session limit to zero. APPC deactivates each session as it becomes free and does not interrupt active conversations.</p>
<p>
A separate value, the maximum negotiable session limit, is used in <b>CNOS</b> negotiations. If the <b>set_negotiable</b> value is AP_YES, the mode session limit value given in this <b>CNOS</b> verb also sets the maximum negotiable session limit.</p>
<p>
The<b> lu_alias</b> and<b> plu_alias</b> parameters are 8-byte ASCII character strings. If the name is fewer than eight bytes, it must be padded on the right with ASCII spaces.</p>
<p>
You can specify the SNA-defined mode name SNASVCMG for <b>mode_name</b>. Use this mode only in a <b>CNOS</b> transaction when the source LU and the target LU use parallel user sessions. However, when resetting the session limits to zero for the SNASVCMG PU 2.1 node, the session limits of all other modes between the two LUs must be reset first. The PU 2.1 mode name is a type A EBCDIC character string. A mode name consisting of all spaces is supported. The SNA-defined mode name CPSVCMG is not allowed.</p>
<p>
When specifying <b>plu_mode_sess_lim</b>, if the mode session limit is currently greater than zero, the value of this parameter must be zero. <b>CNOS</b> can raise the limit above zero, but the next <b>CNOS</b> must set the value to zero. A single <b>CNOS</b> cannot change the mode session limit from one nonzero number to another.</p>
<p>
When raising the mode session limit above zero for a parallel-session connection, the target LU can negotiate its parameter to a value greater than zero and less than the specified session limit. The specified or negotiated limit then becomes the new mode session limit and is returned in this field.</p>
<p>
The value specified for this parameter must be greater than or equal to the sum of the values specified in the <b>CNOS</b> <b>min_conwinners_source</b> and <b>min_conwinners_target</b> parameters.</p>
<p>
Do not reset the SNASVCMG session limit to zero until all other mode session limits between the two LUs are reset to zero and the count of active sessions for all modes (except SNASVCMG) for the partner LU is zero.</p>
<p>
The mode session limit should be large enough to accommodate all active conversations in the mode for all TPs.</p>
<p>
For <b>min_conwinners_source</b> and <b>min_conwinners_target</b>, the sum of both parameters cannot exceed the mode session limit. For single-session connections, these parameters specify the desired contention-winner sessions for the target and source LUs. For the SNASVCMG mode name (with a mode session limit of 2 or 1), the specified minimum number of contention-winner sessions for the target LU must be 1. For the source LU, with a mode session limit of 2, the number must be 1; with a mode session limit of 1, the number must be 0. APPC uses these parameters only when the mode session limit is set to a nonzero value.</p>
<p>
APPC uses <b>auto_act</b> only when the mode session limit is set to a nonzero value. If the value is greater than the <b>min_conwinners_source</b> value, APPC uses the new minimum number of contention winners for the source LU as the autoactivation limit.</p>
<p>
<b>Caution</b>&nbsp;&nbsp;The <b>auto_act</b> parameter can conflict with the on-demand definition of a connection. Autoactivations by either peer partner can re-establish sessions and connections, possibly resulting in a thrashing situation. Therefore, avoid specifying autoactivation between peer PU 2.1 nodes using on-demand connections.</p>
<p>
Whether an LU deactivates a session immediately after the current conversation or after all queued conversations are complete depends on the <b>drain_source</b> and <b>drain_target</b> parameters.</p>
<p>
If an LU is to drain its waiting (outbound) allocation requests, it continues to allocate conversations to active sessions. The responsible LU deactivates a session only when the conversation allocated to the session is deallocated and no request is waiting for allocation to any session with the specified mode name between the two LUs. The allocation of a waiting request takes precedence over the deactivation of a session.</p>
<p>
If an LU is not to drain its waiting (outbound) allocation requests, the responsible LU deactivates a session as soon as the conversation allocated to the session is deallocated. If no conversation is allocated to the session, the responsible LU deactivates the session immediately. However, this verb does not force deallocation of active conversations.</p>
<p>
The <b>responsible</b> and <b>mode_name_select</b> parameters are interrelated as follows:
<ul>
<li>
APPC ignores the <b>responsible</b> parameter for mode names for which the session limit is currently zero if this <b>CNOS</b> verb specifies <b>mode_name_select</b> (AP_ALL).</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ONE) with a mode session limit of zero, and the current session limit for that mode name is already zero, the <b>responsible</b> parameter must specify the same LU (SOURCE or TARGET) that is currently responsible for deactivating sessions. APPC uses this parameter only when <b>CNOS</b> specifies a mode session limit of zero.</li>
</ul>
<p>
For parallel-session connections, the <b>drain_source</b> and <b>mode_name_select</b> parameters are interrelated as follows:
<ul>
<li>
If <b>CNOS</b> specifies <b>mode_name_select</b> (AP_ALL) and <b>drain_source</b> (AP_YES), APPC ignores <b>drain_source</b> for those mode names for which the session limit is currently zero.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select</b> (AP_ALL) and <b>drain_source</b> (AP_NO), APPC accepts <b>drain_source</b> for all mode names. APPC ends draining for any mode currently draining its requests.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ONE), and <b>drain_source</b> (AP_YES) is currently in effect, <b>drain_source</b> (AP_NO) directs APPC to end the draining at the source LU for requests for the specified mode name.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ONE) and <b>drain_source</b> (AP_NO) is currently in effect, your program must specify <b>drain_source </b>(AP_NO) again.</li>
</ul>
<p>
For parallel-session connections, the <b>drain_target</b> parameter and the <b>mode_name_select</b> parameter are interrelated as follows:
<ul>
<li>
If <b>CNOS</b> specifies <b>mode_name_select</b> (AP_ALL) and <b>drain_target</b> (AP_YES), APPC ignores <b>drain_target</b> for the mode names for which the session limit is currently zero.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ALL) and <b>drain_target</b> (AP_NO), APPC accepts <b>drain_target</b> for all mode names, regardless of the current session limit. Any draining of waiting (outbound) allocation requests at the target LU is ended.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ONE) and <b>drain_target</b> (AP_YES) is currently in effect, <b>drain_target</b> (AP_NO) ends the target LU's draining.</li>
<li>
If <b>CNOS</b> specifies <b>mode_name_select </b>(AP_ONE) and <b>drain_target</b> (AP_YES), and <b>drain_target</b> (AP_NO) is currently in effect, the target LU can either accept <b>drain_target</b> (AP_YES) or negotiate the parameter to AP_NO. After the target LU accepts the <b>drain_target</b> (AP_YES) parameter, it can drain any remaining waiting (outbound) allocation requests.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
