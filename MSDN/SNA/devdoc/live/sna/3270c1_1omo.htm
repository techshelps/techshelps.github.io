<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Buffer Element Format</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_buffer_element_format_3270"></a>Buffer Element Format</h2>
<p>
This topic lists the common fields that always occur at the start of a buffer element. The <b>dataru</b> field contains information specific to the particular message; see <a href="3270c4_0icw.htm">FMI Message Formats</a> for details of individual message formats.</p>
<pre><code>PTRBFELT   hdreptr-&gt;elteptr;
INTEGER    hdreptr-&gt;startd;
INTEGER    hdreptr-&gt;endd;
CHAR       hdreptr-&gt;trpad;
CHAR[268]  hdreptr-&gt;dataru;
};
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>hdreptr–&gt;elteptr</b></dt>
<dd>
Pointer to next buffer element in the chain; NULL if this element is the last or only element in the chain.</dd>
<dt>
<b>hdreptr–&gt;startd</b></dt>
<dd>
Start of valid data in this element. The index into <b>dataru</b> of the first byte of valid data.</dd>
<dt>
<b>hdreptr–&gt;endd</b></dt>
<dd>
End of valid data in this element. The index into <b>dataru</b> of the last byte of valid data.</dd>
<dt>
<b>hdreptr–&gt;trpad</b></dt>
<dd>
Pad byte (reserved).</dd>
<dt>
<b>hdreptr–&gt;dataru</b></dt>
<dd>
An array of characters that contains the data for this element. Note that the valid data might not occupy the whole of the element; <b>startd</b> and <b>endd</b> give the indexes into this array of the start and end of the valid data. 
</dd>
</dl>
<p>
The following information will help you to interpret the message formats:
<ul>
<li>
Certain messages are shown as having two elements in the message formats; for example, the <a href="3270c4_0gvk.htm"><b>Open(PLU) Request</b></a> has the CICB field in the first element and the BIND RU in the second element. This indicates that the message consists of two distinct linked element chains; the <b>elteptr</b> field in the first element points to the second element.</li>
<li>
Fields that occupy two bytes are represented with the arithmetically most significant byte in the lowest byte address, irrespective of the normal orientation used by the processor on which the software executes. That is, the 2-byte value 0x1234 has the byte 0x12 in the lowest byte address. The exceptions to this are the <b>startd</b> and <b>endd</b> fields in elements, which are always stored in low-byte, high-byte orientation (the normal orientation of an Intel processor).</li>
<li>
The offsets indicated by the <b>startd</b> and <b>endd</b> fields are expressed in terms of the first byte of <b>dataru</b> being offset 1; the first byte of valid data is at <b>dataru[startd–</b><b>1]</b>. For example, if <b>startd</b> is 11 and <b>endd</b> is 18, then <b>dataru</b> begins with 10 bytes that are not valid data, followed by 8 bytes of valid data.</li>
<li>
It is possible for an element to arrive with <b>startd</b> greater than <b>endd</b>. This indicates there is no valid data in <b>dataru</b>.</li>
</ul>
<p>
In the sample message format illustrated in <a href="3270c1_667k.htm">Overview of Message Formats</a>, each element has a <b>startd</b> of 13, indicating 12 bytes of padding before the start of the valid data. This leaves room for 256 bytes of data, and hence the element data (300 bytes long in this example) requires two elements.</p>
<p>&nbsp;</p></body>
</HTML>
