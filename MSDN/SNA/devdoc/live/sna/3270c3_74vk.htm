<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Application Flags</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_application_flags_3270"></a>Application Flags</h2>
<p>
Application flags are included on the following messages:
<ul>
<li>
All <a href="3270c4_4eeo.htm"><b>Data</b></a> messages (both inbound and outbound)</li>
<li>
<a href="3270c4_5z00.htm"><b>Status-Acknowledge(Ack)</b></a> (outbound only)</li>
<li>
<a href="3270c4_11bk.htm"><b>Status-Acknowledge(Nack-1)</b></a> (outbound only)</li>
<li>
All <a href="3270c4_6prk.htm"><b>Status-Control</b></a><b> </b>messages (both inbound and outbound)</li>
</ul>
<p>
These flags represent key indicators of the state of the session to which the message relates and are closely related (but not always equivalent) to the request header or response header (RH) indicators in the SNA request or response. Note that for inbound messages, applications need to set the flags on <b>Data</b> messages and <b>Status-Control</b> messages only.</p>
<p>
For outbound messages, the local node sets the application flags to reflect the contents of the RH in the corresponding SNA message. The local node performs checks on the SNA message before sending it to the application; therefore, the application can assume that the RH indicators obey the SNA protocols and need not perform its own checks. The application's task in interpreting the application flags is much simpler than if the local node presented the message with the uninterpreted RH. For example:
<ul>
<li>
If the application specified the segment delivery option when the PLU connection was opened (see <a href="3270c3_41gw.htm">Opening the PLU Connection</a>), the end chain indicator (ECI) on an SNA request will occur on the first segment of the last request unit (RU) in a chain, but the chain is not complete until the last segment of that RU is received. In this case, the local node manipulates the application flags so that the ECI flag is set in the last segment rather than the first.</li>
<li>
Applications using TS profile 4 (transmission service profile 4) on the PLU session can receive the DR2 (definite response 2) RH indicator in combination with DR1 (definite response 1) or ER (exception response) to give RQD2, RQD3, RQE2, and RQE3 requests. The local node interprets the RH indicators and sets the COMMIT application flag accordingly.</li>
</ul>
<p>
For inbound <a href="3270c4_4eeo.htm"><b>Data</b></a> and <a href="3270c4_6prk.htm"><b>Status-Control</b></a> messages, the application should set the flags to control session characteristics such as chaining, direction control, and brackets. For <b>Status-Acknowledge</b> messages, the local node generates an SNA response and sets the RH indicators using information saved from the corresponding request; the application does not need to set the flags on this message.</p>
<p>
For information on application flag usage when FMI chunking is being used, see <a href="3270c3_7cds.htm">Chunking</a>.</p>
<p>
In most cases, the application will not need to consider the application flags on <a href="3270c4_5z00.htm"><b>Status-Acknowledge(Ack)</b></a> messages, which derive from the RH indicators on the corresponding response. However, certain applications do require access to the RH flags on responses — for example, transaction-processing applications using TS profile 4 can receive the DR2 flag on responses, which will appear as the COMMIT flag in the application flags.</p>
<p>
The application flag usage on <a href="3270c4_6prk.htm"><b>Status-Control</b></a> messages is derived from the RH indicators in the corresponding DFC or session control (SC) RU. Applications may need to be aware of the RH flags for <b>Status-Control</b> messages. For example, LUSTAT request type 6 is a "no-op" used solely to allow RH flags to be sent when no other request is allowed. The local node delivers the request to the application as a <b>Status-Control(LUSTAT) Request</b> with the relevant application flags set. See <i>SNA Format and Protocol Reference Manual: Architectural Logic</i> (IBM publication SC30-3112) for summaries of valid RH usage for DFC RUs and of valid RH indicators for SC requests.</p>
<p>
In the summary of the application flags below, bits are numbered with bit 0 as the most significant bit in a byte and bit 7 as the least significant. An application flag is set if the relevant bit for the flag is 1 and not set if the bit is 0.</p>
<p>
Flag 1 occurs in all messages. The meanings of the individual bits and values that can be <b>OR</b>ed together to set them are listed below.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=40%>Bits in flag 1</th>
<th align=left width=60%>Meaning</th>
</tr>
<tr valign=top>
<td width=40%>FMHI [bit 0, flag 1]<br>
Value: AF_FMH (0x80)</td>
<td width=60%>Function management header indicator — set if a function management header is present in the message, or if the message is a function management data network services (FMD NS) request. Only valid on <a href="3270c4_4eeo.htm"><b>Data</b></a> messages. This flag is always set for 3270 user alerts, which are sent on the SSCP connection (see <a href="3270c3_752o.htm">3270 User Alerts</a>). <p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>BCI [bit 1, flag 1]<br>
Value: AF_BC (0x40)</td>
<td width=60%>Begin chain indicator — set if this message starts a chain (see <a href="3270c3_81o0.htm">Outbound Chaining</a> and <a href="3270c3_86eo.htm">Inbound Chaining</a>). <p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>ECI [bit 2, flag 1]<br>
Value: AF_EC (0x20)</td>
<td width=60%>End chain indicator — set if this message ends a chain (see Outbound Chaining and Inbound Chaining).<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>COMMIT [bit 3, flag 1]<br>
Value: AF_COMM (0x10)</td>
<td width=60%>Commit indicator — set if chain carries DR2 (definite response 2).<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>BBI [bit 4, flag 1]<br>
Value: AF_BB (0x08)</td>
<td width=60%>Begin bracket indicator — set if chain carries BB (begin bracket). Note that this does not necessarily indicate that the bracket has been initiated (see <a href="3270c3_873k.htm">Brackets</a>).<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>EBI [bit 5, flag 1]<br>
Value: AF_EB (0x04)</td>
<td width=60%>End bracket indicator — set if chain carries EB (end bracket). Note that this does not indicate that the bracket has terminated (see Brackets).<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>CDI [bit 6, flag 1]<br>
Value: AF_CD (0x02)</td>
<td width=60%>Change direction indicator — set if chain carries CD (change direction); see <a href="3270c3_0168.htm">Direction</a>.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=40%>SDI [bit 7, flag 1]<br>
Value: AF_SD (0x01)</td>
<td width=60%>System detected error indicator — set if the local node detects an error in outbound data; see <a href="3270c3_8ik0.htm">Outbound Data</a>.</td>
</tr>
</table><br>
<p>
Flag 2 occurs in all messages except <b>Status-Control(STSN)</b>, where the indicators included in this byte are not applicable. The meanings of the individual bits and values that can be <b>OR</b>ed together to set them are listed below.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=36%>Bits in flag 2</th>
<th align=left width=64%>Meaning</th>
</tr>
<tr valign=top>
<td width=36%>CODE [bit 0, flag 2]<br>
Value: AF_CODE (0x80)</td>
<td width=64%>Alternate code indicator — set if the alternate code set (usually ASCII) is used for this <a href="3270c4_4eeo.htm"><b>Data</b></a> message. Note that function management headers are unaffected by the code selection indicator.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>ENCRYP [bit 1, flag 2]<br>
Value: AF_ENCR (0x40)</td>
<td width=64%>Enciphered data indicator — set to indicate that the information in the <b>Data</b> message is enciphered under session level cryptography protocols. Users should note that they must provide the necessary support for data encryption; the SNA Server local node does not support cryptography.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>ENPAD [bit 2, flag 2]<br>
Value: AF_ENPD (0x20)</td>
<td width=64%>Padded data indicator — set in conjunction with the ENCRYP flag to indicate that the data was padded at the end to the next integral multiple of eight bytes before encipherment.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>QRI [bit 3, flag 2]<br>
Value: AF_QRI (0x10)</td>
<td width=64%>Queued response indicator — set if the response to this request is to be queued in the transmission control and data flow control layers. This flag is only significant for inbound messages.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>CEI [bit 4, flag 2]<br>
Value: AF_CEI (0x08)</td>
<td width=64%>Chain ending indicator — set on a message corresponding to an outbound SNA request with EC (end chain) and BBIU (begin basic information unit). This flag is provided solely for the use of SNA Server components; your application should not attempt to use it. <p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>BBIUI [bit 5, flag 2]<br>
Value: AF_BBIU (0x04)</td>
<td width=64%>Begin basic information unit indicator — set on a message corresponding to an outbound SNA request with BBIU (begin basic information unit). This flag is provided for the use of SNA Server components and for applications using segment delivery and outbound pacing together (see <a href="3270c3_30q8.htm">Pacing and Chunking</a>); your application should not attempt to use it.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>EBIUI [bit 6, flag 2]<br>
Value: AF_EBIU (0x02)</td>
<td width=64%>End basic information unit indicator — set on a message corresponding to an outbound SNA request with EBIU (end basic information unit). This flag is provided solely for the use of SNA Server components; your application should not attempt to use it.<p>
</p>
</td>
</tr>
<tr valign=top>
<td width=36%>RBI [bit 7, flag 2]<br>
Value: AF_RBI (0x01)</td>
<td width=64%>Real BID indicator — set on <b>Status-Control(BID) Request</b> messages from the local node only. 0x01 indicates that the message is due to an SNA BID RU, 0x00 indicates that the message is due to an outbound FMD (function management data) RU with BB (begin bracket) set.</td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
