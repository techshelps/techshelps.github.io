<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Direction After Sending a Negative Response</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_direction_after_sending_a_negative_response_3270"></a>Direction After Sending a Negative Response</h3>
<p>
When an application using half-duplex flip-flop protocol sends a negative response to an outbound chain (or sends a <a href="3270c4_5z00.htm"><b>Status-Acknowledge (ack)</b></a> to a DATAFMI message with SDI set) that does not refer to a race, the application must assume an error recovery pending state. The sense codes used for race conditions that do not require the transition to error recovery pending state are:</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=21%>0x080B</td>
<td width=79%>Bracket race error</td>
</tr>
<tr valign=top>
<td width=21%>0x0813</td>
<td width=79%>Bracket bid reject (no RTR forthcoming)</td>
</tr>
<tr valign=top>
<td width=21%>0x0814</td>
<td width=79%>Bracket bid reject (RTR forthcoming) </td>
</tr>
<tr valign=top>
<td width=21%>0x081B</td>
<td width=79%>Receiver in transmit mode</td>
</tr>
</table><br>
<p>
The application must therefore examine the sense code on an SDI message to detect such races.</p>
<p>
Error recovery pending state differs from receive state only in one respect: The application can convey sense information to the host using <b>Status-Control(LUSTAT)</b>—see <a href="3270c3_667k.htm">LUSTATs</a>. The LUSTAT must not have the CD or EB flags set (the host already has direction, and the bracket must not be terminated prematurely by the application). SNA Server also allows the FMI application to send <b>Status-Control(LUSTAT)</b> in receive state (see LUSTATs).</p>
<p>
An application using the half-duplex contention protocol does not have an error recovery pending state, and must enter contention state whenever it sends a negative response.</p>
<p>
Note that if the chain is canceled by the host with CD on the CANCEL, the application must assume send state.</p>
<p>&nbsp;</p></body>
</HTML>
