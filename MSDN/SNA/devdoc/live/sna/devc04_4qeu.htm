<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Open(LINK) Request</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_open_link_request_dev"></a>Open(LINK) Request</h1>
<p>
Flow : NODE ------&gt; DLC</p>
<h4>Header</h4>
<table cellspacing=4 cols=3>
<tr valign=top>
<th align=left width=25%>Field</th>
<th align=left width=25%>Type</th>
<th align=left width=50%>Description</th>
</tr>
<tr valign=top>
<td width=25%><b>nxtqptr</b></td>
<td width=25%>PTRBFHDR</td>
<td width=50%>Pointer to next buffer header in a queue</td>
</tr>
<tr valign=top>
<td width=25%><b>hdreptr</b></td>
<td width=25%>PTRBFELT</td>
<td width=50%>Pointer to first buffer element </td>
</tr>
<tr valign=top>
<td width=25%><b>numelts</b></td>
<td width=25%>CHAR</td>
<td width=50%>Number of buffer elements: 1 (Number of elements can be 2 if the connection is for an X.25 SVC)</td>
</tr>
<tr valign=top>
<td width=25%><b>msgtype</b></td>
<td width=25%>CHAR</td>
<td width=50%>Message type: OPENMSG (0x01)</td>
</tr>
<tr valign=top>
<td width=25%><b>srcl</b></td>
<td width=25%>CHAR</td>
<td width=50%>Source locality</td>
</tr>
<tr valign=top>
<td width=25%><b>srcp</b></td>
<td width=25%>CHAR</td>
<td width=50%>Source partner</td>
</tr>
<tr valign=top>
<td width=25%><b>srci</b></td>
<td width=25%>INTEGER</td>
<td width=50%>Source index</td>
</tr>
<tr valign=top>
<td width=25%><b>destl</b></td>
<td width=25%>CHAR</td>
<td width=50%>Destination locality</td>
</tr>
<tr valign=top>
<td width=25%><b>destp</b></td>
<td width=25%>CHAR</td>
<td width=50%>Destination partner</td>
</tr>
<tr valign=top>
<td width=25%><b>desti</b></td>
<td width=25%>INTEGER</td>
<td width=50%>Destination index</td>
</tr>
<tr valign=top>
<td width=25%><b>ophdr.openqual</b></td>
<td width=25%>CHAR</td>
<td width=50%>Open qualifier: REQU (0x01)</td>
</tr>
<tr valign=top>
<td width=25%><b>ophdr.opentype</b></td>
<td width=25%>CHAR</td>
<td width=50%>Open type: LINK (0x10)</td>
</tr>
<tr valign=top>
<td width=25%><b>ophdr.opresid</b></td>
<td width=25%>INTEGER</td>
<td width=50%>Resource identifier</td>
</tr>
</table><br>
<h4>Element 1</h4>
<table cellspacing=4 cols=3>
<tr valign=top>
<th align=left width=30%>Field</th>
<th align=left width=28%>Type</th>
<th align=left width=42%>Description</th>
</tr>
<tr valign=top>
<td width=30%><b>hdreptr–&gt;elteptr</b></td>
<td width=28%>PTRBFELT</td>
<td width=42%>Pointer to optional second buffer element (NULL if only one element)</td>
</tr>
<tr valign=top>
<td width=30%><b>hdreptr–&gt;startd</b></td>
<td width=28%>INTEGER</td>
<td width=42%>Index to start of data in this buffer element's data array</td>
</tr>
<tr valign=top>
<td width=30%><b>hdreptr–&gt;endd</b></td>
<td width=28%>INTEGER</td>
<td width=42%>Index to last byte of data in this buffer element's data array</td>
</tr>
<tr valign=top>
<td width=30%><b>hdreptr–&gt;dataru</b></td>
<td width=28%>CHAR[SNANBEDA]</td>
<td width=42%>Defined as follows, where <br>
s = startd–1</td>
</tr>
<tr valign=top>
<td class=indent1 width=30%><b>dataru[s..s+9]</b></td>
<td width=28%></td>
<td width=42%>Source name—name of local node</td>
</tr>
<tr valign=top>
<td class=indent1 width=30%><b>dataru[s+10..s+19]</b></td>
<td width=28%></td>
<td width=42%>Destination name—name of remote PU (blank for incoming calls)</td>
</tr>
<tr valign=top>
<td class=indent1 width=30%><b>dataru[s+20..s+21]</b></td>
<td width=28%></td>
<td width=42%>Link index</td>
</tr>
</table><br>
<h4>LINK DATA (depends on DLC type)</h4>
<p>
Unless otherwise stated, these fields are valid for outgoing calls only.</p>
<table cellspacing=4 cols=3>
<tr valign=top>
<td class=indent1 width=31%><b>SDLC LINK DATA</b></td>
<td width=19%></td>
<td width=50%></td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+22]</b></td>
<td width=19%></td>
<td width=50%>XID supplied<br>
0x00 Do not send initial XID<br>
0x01 Send initial XID from this message (may be a NULL XID)</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+23]</b></td>
<td width=19%></td>
<td width=50%>Link operational role<br>
0x00 Primary<br>
0x01 Secondary<br>
0x02 Negotiable</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+24]</b></td>
<td width=19%></td>
<td width=50%>Use Reject_Command indicator<br>
0x00 Do use it<br>
0x01 Do not use it</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+25]</b></td>
<td width=19%></td>
<td width=50%>Address match byte<br>
0x00 Primary/Negotiable SDLC<br>
0x01 to 0xFE Secondary SDLC</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+26]</b></td>
<td width=19%></td>
<td width=50%>Second SDLC address match byte<br>
0x00 Primary SDLC<br>
0xFF Secondary/Negotiable SDLC</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+27]</b></td>
<td width=19%></td>
<td width=50%>Reserved</td>
</tr>
</table><br>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=50%><b>CHANNEL ADAPTER LINK DATA</b></td>
</tr>
<tr valign=top>
<td class=indent1 width=50%><b>dataru[s+22]</b></td>
<td width=50%>XID supplied<br>
0x00 Do not send initial XID<br>
0x01 Send initial XID from this message (may be a NULL XID)</td>
</tr>
<tr valign=top>
<td class=indent1 width=50%><b>dataru[s+23]</b></td>
<td width=50%>PU emulation type<br>
0x00 Unknown<br>
0x20 PU 2.0 (format 0 XID)<br>
0x21 PU 2.1 (format 3 XID)</td>
</tr>
<tr valign=top>
<td class=indent1 width=50%><b>dataru[s+24]</b></td>
<td width=50%>Control Unit Image number (0 to 15) on the Channel address configured in SNA Server Manager</td>
</tr>
<tr valign=top>
<td class=indent1 width=50%><b>dataru[s+25]</b></td>
<td width=50%>Channel subaddress</td>
</tr>
<tr valign=top>
<td class=indent1 width=50%><b>dataru[s+26..s+67]</b></td>
<td width=50%>Reserved (may not be zero)</td>
</tr>
</table><br>
<table cellspacing=4 cols=3>
<tr valign=top>
<td width=31%><b>STATION TIMERS</b></td>
<td width=19%></td>
<td width=50%></td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+28..s+29]</b></td>
<td width=19%></td>
<td width=50%>Contact time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+30..s+31]</b></td>
<td width=19%></td>
<td width=50%>Contact retry limit</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+32..s+33]</b></td>
<td width=19%></td>
<td width=50%>Discontact time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+34..s+35]</b></td>
<td width=19%></td>
<td width=50%>Discontact retry limit</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+36..s+37]</b></td>
<td width=19%></td>
<td width=50%>Negative poll time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+38..s+39]</b></td>
<td width=19%></td>
<td width=50%>Negative poll retry limit</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+40..s+41]</b></td>
<td width=19%></td>
<td width=50%>T1 (no acknowledgment) time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+42..s+43]</b></td>
<td width=19%></td>
<td width=50%>T2 (acknowledgment) time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+44..s+45]</b></td>
<td width=19%></td>
<td width=50%>Remote station busy time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+46..s+47]</b></td>
<td width=19%></td>
<td width=50%>Remote station busy retry limit</td>
</tr>
</table><br>
<table cellspacing=4 cols=3>
<tr valign=top>
<td colspan=3 width=100%><b>LINK TIMERS</b></td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+48..s+49]</b></td>
<td width=19%></td>
<td width=50%>Idle time-out </td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+50..s+51]</b></td>
<td width=19%></td>
<td width=50%>Idle retry limit </td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+52..s+53]</b></td>
<td width=19%></td>
<td width=50%>Nonproductive receive time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+54..s+55]</b></td>
<td width=19%></td>
<td width=50%>Nonproductive receive retry limit</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+56..s+57]</b></td>
<td width=19%></td>
<td width=50%>Write time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+58..s+59]</b></td>
<td width=19%></td>
<td width=50%>Write retry limit</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+60..s+61]</b></td>
<td width=19%></td>
<td width=50%>Link connection time-out</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+62..s+63]</b></td>
<td width=19%></td>
<td width=50%>Link connection retry limit<br>
0xFFFF for infinite retry</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+64..s+65]</b></td>
<td width=19%></td>
<td width=50%>Reserved</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+66]</b></td>
<td width=19%></td>
<td width=50%>Configuration options:<br>
Bit 0 :&nbsp;&nbsp;&nbsp;&nbsp;1 = Constant carrier selected<br>
Bit 1 :&nbsp;&nbsp;&nbsp;&nbsp;1 = NRZI<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = NRZ<br>
Bit 2 :&nbsp;&nbsp;&nbsp;&nbsp;= Reserved<br>
Bit 3 :&nbsp;&nbsp;&nbsp;&nbsp;1 = Full-duplex<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = Half-duplex<br>
Bit 4 :&nbsp;&nbsp;&nbsp;&nbsp;0 = External clocking<br>
Bit 5 :&nbsp;&nbsp;&nbsp;&nbsp;1 = Data signal rate select high<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = Data signal rate select low<br>
Bit 6 :&nbsp;&nbsp;&nbsp;&nbsp;1 = Select standby on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = Select standby off<br>
Bit 7 :&nbsp;&nbsp;&nbsp;&nbsp;= Reserved</td>
</tr>
<tr valign=top>
<td class=indent1 width=31%><b>dataru[s+67]</b></td>
<td width=19%></td>
<td width=50%>Configuration options: line type<br>
0x00 leased<br>
0x01 switched manual dial<br>
0x02 switched auto-dial</td>
</tr>
<tr valign=top>
<td colspan=3 width=100%>Note that for configuration options, bit 0 is the most significant option and bit 7 is the least significant. Reserved bits are not always zero, so always use a bitwise <b>AND</b> operation when testing these bits.<p>
The PU emulation type is returned as 0x00 (unknown) for versions of SNACFG.DLL supplied with versions of Microsoft® SNA Server earlier than 3.0. </p>
<p>
The configuration options byte is also valid for incoming calls.</p>
</td>
</tr>
</table><br>
<p>&nbsp;</p></body>
</HTML>
