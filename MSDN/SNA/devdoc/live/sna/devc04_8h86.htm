<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Message Formats</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_message_formats_dev"></a>Message Formats</h1>
<p>
This section describes the SNA Device Interface Specification interface in terms of message formats. These are presented in a language-independent notation that is described below.</p>
<p>
The messages used between the node and the SNALinks are shown in the following table.</p>
<table cellspacing=4 cols=3>
<tr valign=top>
<th align=left width=34%>Message type</th>
<th align=left width=31%>Direction</th>
<th align=left width=35%>LPI connection</th>
</tr>
<tr valign=top>
<td width=34%><b>Open(LINK)Request</b></td>
<td width=31%>NODE ------&gt; DLC</td>
<td width=35%>LINK </td>
</tr>
<tr valign=top>
<td width=34%><b>Close(LINK)Request</b></td>
<td width=31%>NODE ------&gt; DLC</td>
<td width=35%>LINK</td>
</tr>
<tr valign=top>
<td width=34%><b>Send-XID</b></td>
<td width=31%>NODE ------&gt; DLC</td>
<td width=35%>LINK</td>
</tr>
<tr valign=top>
<td width=34%></td>
<td width=31%></td>
<td width=35%></td>
</tr>
<tr valign=top>
<td width=34%><b>Open(STATION) Request</b></td>
<td width=31%>NODE ------&gt; DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%><b>Close(STATION) Request</b></td>
<td width=31%>NODE ------&gt; DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%></td>
<td width=31%></td>
<td width=35%></td>
</tr>
<tr valign=top>
<td width=34%><b>Open(LINK) Response</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>LINK</td>
</tr>
<tr valign=top>
<td width=34%><b>Close(LINK) Response</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>LINK</td>
</tr>
<tr valign=top>
<td width=34%><b>Request-Open-Station</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>LINK</td>
</tr>
<tr valign=top>
<td width=34%></td>
<td width=31%></td>
<td width=35%></td>
</tr>
<tr valign=top>
<td width=34%><b>Open(STATION) Response</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%><b>Close(STATION) Response</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%><b>Station-Contacted</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%></td>
<td width=31%></td>
<td width=35%></td>
</tr>
<tr valign=top>
<td width=34%><b>Outage</b></td>
<td width=31%>NODE &lt;------ DLC</td>
<td width=35%>LINK/STATION</td>
</tr>
<tr valign=top>
<td width=34%></td>
<td width=31%></td>
<td width=35%></td>
</tr>
<tr valign=top>
<td width=34%><b>DLC-Data</b></td>
<td width=31%>NODE &lt;-----&gt; DLC</td>
<td width=35%>STATION</td>
</tr>
<tr valign=top>
<td width=34%><b>Status-Resource</b></td>
<td width=31%>NODE &lt;-----&gt; DLC</td>
<td width=35%>STATION</td>
</tr>
</table><br>
<p>
Details of the message format notation and key assumptions about the contents of the message formats are as follows:
<ul>
<li>
"Reserved" indicates that the field must be set to zero (for a numeric field) or all nulls (for names) by the sender of the message.</li>
<li>
"Undefined" indicates that the value of the field is indeterminate. The field is not set by the sender and should not be examined by the receiver of the message.</li>
<li>
Fields that occupy two bytes—the <b>srci</b> field in all messages, and fields such as <b>opresid</b> in <a href="devc04_4qeu.htm"><b>Open(LINK) Request</b></a> —are represented with the arithmetically most significant byte in the lowest byte address, irrespective of the normal byte order used by the processor on which the software executes. That is, the 2-byte value 0x1234 has the byte 0x12 in the lowest byte address. The exception to this is the <b>startd</b> and <b>endd</b> fields in all elements, which are always stored in the processor's normal byte order.</li>
<li>
Messages are composed of buffers, consisting of a buffer header and zero or more buffer elements; see <a href="devc01_1kxi.htm">Messages</a> for more information on buffer formats.</li>
<li>
The <b>startd</b> field in each element gives the offset of the first byte of data in the element after the <b>trpad</b> field. Its value will either be 1 (data starts in the byte after the <b>trpad</b> field), 10 (nine bytes of padding are included between the <b>trpad</b> field and the start of the data), or 13 (12 bytes of padding are included between the <b>trpad</b> field and the start of the data). Any extra bytes are used by the local node for additional header information. This avoids having to copy data into a new buffer when adding this information.</li>
<li>
Because <b>startd</b> indicates the index into <b>dataru</b> starting from 1, not 0, the first byte of valid data will always be at <b>dataru[startd–</b><b>1]</b>.</li>
<li>
All fields within <b>dataru</b> are of type unsigned character (UCHAR), except where the notes indicate otherwise.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
