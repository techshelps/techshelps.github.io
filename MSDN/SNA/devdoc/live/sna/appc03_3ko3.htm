<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DISPLAY</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_display_appc"></a>DISPLAY</h1>
<p>
The <b>DISPLAY</b> verb returns configuration information and current operating values for the SNA node.</p>
<p>
It is recommended that you use the <a href="appc07_1ko3.htm"><b>GetAPPCConfig</b></a> Windows extension function to obtain system configuration information relating to APPC LUs. Users of 5250 emulators, in particular, should use the <b>GetAPPCConfig</b> Windows extension.</p>
<p>
<b>Note</b>&nbsp;&nbsp;Because of the nature of client/server architecture, the SNA Server version of <b>DISPLAY</b> contains important differences from the IBM Extended Services for OS/2 version 1.0 (IBM ES for OS/2 version 1.0) on which it was based. These differences are described in the following topics. For information on configuring <b>DISPLAY</b> in SNA Server Manager, see the <i>Microsoft SNA Server Administration Guide</i>.</p>
<p>
For applications that use the APPC <b>DISPLAY </b>verb in IBM ES for OS/2 version 1.0 compatibility mode and that do not use the SNA Server extensions for enumerating all active servers and connections, SNA Server will randomly choose a default <b>DISPLAY</b> connection, unless a specific default <b>DISPLAY</b> connection has been configured in SNA Server Manager. This connection is used as the basis for all <b>DISPLAY</b> requests. For information about specifying the default <b>DISPLAY</b> connection, see the <i>Microsoft SNA Server Administration Guide</i>.</p>
<p>
The following structure describes the verb control block used by the <b>DISPLAY</b> verb.</p>
<pre><code>struct display {
    unsigned short  opcode;
    unsigned char   reserv2[2];
    unsigned short  primary_rc;
    unsigned long   secondary_rc;
    unsigned long   init_sect_len;
    unsigned long   buffer_len;
    unsigned char FAR * buffer_ptr;
    unsigned long  num_sections;
    unsigned long  display_len;
    unsigned long  area_needed;
    unsigned char  sna_global_info;
    unsigned char  lu62_info;
    unsigned char  am_info;
    unsigned char  tp_info;
    unsigned char  sess_info;
    unsigned char  link_info;
    unsigned char  lu_0_3_info;
    unsigned char  gw_info;
    unsigned char  x25_physical_link_info;
    unsigned char  sys_def_info;
    unsigned char  adapter_info;
    unsigned char  lu_def_info;
    unsigned char  plu_def_info;
    unsigned char  mode_def_info;
    unsigned char  link_def_info;
    unsigned char  ms_info;
    struct sna_global_info_sect FAR * sna_global_info_ptr;
    struct lu62_info_sect FAR * lu62_info_ptr;
    struct am_info_sect FAR * am_info_ptr;
    struct tp_info_sect FAR * tp_info_ptr;
    struct sess_info_sect FAR * sess_info_ptr;
    struct link_info_sect FAR * link_info_ptr;
    struct lu_0_3_info_sect FAR * lu_0_3_info_ptr;
    struct gw_info_sect FAR * gw_info_ptr;
    struct x25_physical_link_info_sect FAR * x25_physical_link_info_ptr;
    struct sys_def_info_sect FAR * sys_def_info_ptr;
    struct adapter_info_sect FAR * adapter_info_ptr;
    struct lu_def_info_sect FAR * lu_def_info_ptr;
    struct plu_def_info_sect FAR * plu_def_info_ptr;
    struct mode_def_info_sect FAR * mode_def_info_ptr;
    struct link_def_info_sect FAR * link_def_info_ptr;
    struct ms_info_sect FAR * ms_info_ptr;
} DISPLAY; 
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>opcode</b></dt>
<dd>
Supplied parameter. Specifies the verb operation code, AP_DISPLAY.</dd>
<dt>
<b>reserv2</b></dt>
<dd>
A reserved field, this value must be set to NULL.</dd>
<dt>
<b>primary_rc</b></dt>
<dd>
Returned parameter. Specifies the primary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>secondary_rc</b></dt>
<dd>
Returned parameter. Specifies the secondary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>init_sect_len</b></dt>
<dd>
Supplied parameter. Specifies the number of bytes in the initial section of the VCB, up to the beginning of information pointers. This parameter and the <b>num_sections</b> parameter must be set to specific values depending on the format being requested. See the notes below for details. </dd>
<dt>
<b>buffer_len</b></dt>
<dd>
Supplied parameter. Specifies the length (0 to 65535 bytes) of the passed display data buffer.</dd>
<dt>
<b>buffer_ptr</b></dt>
<dd>
Supplied parameter. Provides the address of the display data buffer that will contain the requested information.</dd>
<dt>
<b>num_sections</b></dt>
<dd>
Supplied parameter. Specifies the maximum number of information sections that can be returned by the verb. This parameter and the <b>init_sect_len</b> parameter must be set to specific values depending on the format being requested. See the notes below for details.</dd>
<dt>
<b>display_len</b></dt>
<dd>
Returned parameter. Provides the total number of bytes used that are returned into the display data buffer.</dd>
<dt>
<b>area_needed</b></dt>
<dd>
Returned parameter. Provides the total number of bytes needed for all of the displayed data.</dd>
<dt>
<b>sna_global_info</b></dt>
<dd>
Supplied parameter. Specifies if global information is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>lu62_info</b></dt>
<dd>
Supplied parameter. Specifies if information on all active LUs, their partners, and their modes is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>am_info</b></dt>
<dd>
Supplied parameter. Specifies if Attach Manager information on the defined TP is requested. Allowed values are AP_YES and AP_NO. 
<p>
<b>Note</b> This option is not supported by SNA Server and this parameter must be set to AP_NO.

</dd>
<dt>
<b>tp_info</b></dt>
<dd>
Supplied parameter. Specifies if information on the active TPs and any active conversations is requested. Allowed values are AP_YES and AP_NO. 
<p>
<b>Note</b> This option is not supported by SNA Server and this parameter must be set to AP_NO.

</dd>
<dt>
<b>sess_info</b></dt>
<dd>
Supplied parameter. Specifies if information on sessions is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>link_info</b></dt>
<dd>
Supplied parameter. Specifies if information on the active SNA logical lines is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>lu_0_3_info</b></dt>
<dd>
Supplied parameter. Specifies if information on logical units type 0, 1, 2, and 3 is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>gw_info</b></dt>
<dd>
Supplied parameter. Specifies if information on the SNA gateway is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>x25_physical_link_info</b></dt>
<dd>
Supplied parameter. Specifies if X.25 information is required. Allowed values are AP_YES and AP_NO. 
<p>
<b>Note</b> This option is not supported by SNA Server and this parameter must be set to AP_NO.

</dd>
<dt>
<b>sys_def_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the default LU, node names, and default parameters for inbound and outbound implicit partners is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>adapter_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the configured communications adapters is requested. Allowed values are AP_YES and AP_NO.  This parameter must be set to AP_NO when NS/2 format is requested.</dd>
<dt>
<b>lu_def_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the defined LUs is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>plu_def_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the defined partner LUs is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>mode_def_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the defined nodes is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>link_def_info</b></dt>
<dd>
Supplied parameter. Specifies if information about the defined logical links is requested. Allowed values are AP_YES and AP_NO.</dd>
<dt>
<b>ms_info</b></dt>
<dd>
Supplied parameter. Specifies if information about management services is requested. Allowed values are AP_YES and AP_NO. This parameter must be set to AP_NO when NS/2 format is requested.</dd>
<dt>
<b>sna_global_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of SNA global information in the data buffer.</dd>
<dt>
<b>lu62_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of LU 6.2 information in the data buffer.</dd>
<dt>
<b>am_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of the Attach Manager information in the data buffer. 
<p>
<b>Note</b> This option is not supported by SNA Server.
</dd>
<dt>
<b>tp_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of TP information in the data buffer. 
<p>
<b>Note</b> This option is not supported by SNA Server.

</dd>
<dt>
<b>sess_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of session information in the data buffer.</dd>
<dt>
<b>link_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of link information in the data buffer.</dd>
<dt>
<b>lu_0_3_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of LU information in the data buffer.</dd>
<dt>
<b>gw_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of gateway information in the data buffer.</dd>
<dt>
<b>x25_physical_link_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of X.25 information in the data buffer. 
<p>
<b>Note</b> This option is not supported by SNA Server.

</dd>
<dt>
<b>sys_def_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of system default information in the data buffer.</dd>
<dt>
<b>adapter_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of adapter information in the data buffer.</dd>
<dt>
<b>lu_def_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of local LU definition information in the data buffer.</dd>
<dt>
<b>plu_def_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of partner LU definition information in the data buffer.</dd>
<dt>
<b>mode_def_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of mode definition information in the data buffer.</dd>
<dt>
<b>link_def_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of link definition information in the data buffer.</dd>
<dt>
<b>ms_info_ptr</b></dt>
<dd>
Returned parameter. Indicates the address of the beginning of management services information in the data buffer.
</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
ap_ok</dt>
<dd>
Primary return code; the verb executed successfully.</dd>
<dt>
ap_parameter_check</dt>
<dd>
Primary return code; the verb did not execute because of a parameter error.
<dl>
<dt>
ap_display_invalid_constant</dt>
<dd>
Secondary return code; the value supplied for NUM_SECTIONS or INIT_SEC_LEN is invalid.
</dd>
</dl>
</dd>
<dt>
ap_state_check</dt>
<dd>
Primary return code; the verb did not execute because it was issued in an invalid state.
<dl>
<dt>
ap_display_info_exceeds_len</dt>
<dd>
Secondary return code; the returned <b>DISPLAY</b> information did not fit in the buffer.</dd>
<dt>
ap_invalid_data_segment</dt>
<dd>
Secondary return code; the segment containing the data buffer is too small for the specified data length.
</dd>
</dl>
</dd>
<dt>
ap_comm_subsystem_abended</dt>
<dd>
Primary return code; indicates one of the following conditions:
<ul>
<li>
The node used by this conversation has encountered an ABEND.</li>
<li>
The connection between the TP and the node type 2.1 has been broken (a LAN error).</li>
<li>
The SnaBase at the TP's computer has encountered an ABEND.</li>
</ul>
</dd>
<dt>
ap_comm_subsystem_not_loaded</dt>
<dd>
Primary return code; a required component could not be loaded or terminated while processing the verb. Thus, communication could not take place. Contact the system administrator for corrective action.</dd>
<dt>
ap_invalid_verb_segment</dt>
<dd>
Primary return code; the VCB extended beyond the end of the data segment.</dd>
<dt>
ap_stack_too_small</dt>
<dd>
Primary return code; the stack size of the application is too small to execute the verb. Increase the stack size of your application.</dd>
<dt>
ap_unexpected_dos_error</dt>
<dd>
Primary return code; the operating system has returned an error to APPC while processing an APPC call from the local TP. The operating system return code is returned through the <b>secondary_rc</b>. It appears in Intel byte-swapped order. If the problem persists, consult the system administrator.
</dd>
</dl>
<h4>Remarks</h4>
<p>
<b>DISPLAY</b> identifies an LU by alias alone. If the same local LU alias is used multiple times in a domain (for backup or other purposes) and that LU alias is specified through <b>DISPLAY</b>, the verb can flow to a different LU than the one intended.</p>
<p>
For the <b>DISPLAY</b> verb to return successfully, a specific connection must be defined in the SNA Server Admin program Display Verb dialog box. IBM originally defined the <b>DISPLAY</b> verb with the IBM OS/2 Extended Edition product which assumed a single connection. However, because SNA Server supports multiple connections, the specific connection associated with the <b>DISPLAY</b> verb must be configured.</p>
<p>
The <b>DISPLAY</b> verb requires a user-supplied buffer for the return of system information. If the buffer is not large enough, APPC returns the AP_display_info_exceeds_len return code, along with the size actually needed at the time of the request (in the <b>area_needed</b> parameter). One possible strategy for the use of this verb follows:
<ul>
<li>
If the <b>buffer_len</b> value is less than the <b>area_needed</b> value returned by APPC, and the required length is less than 64 kilobytes (K), then increase the size of the display buffer to equal or greater than the <b>area_needed</b> value.</li>
<li>
If the <b>area_needed</b> value is greater than 64K, you can choose to request each information section individually. Or, you can take the following steps:<ol>
<li>
Process the information sections with complete information, whose total number displayed equals the total actual number.</li>
<li>
Choose a subset of the information sections you requested that contains incomplete information, and reissue the verb requesting those information sections.</li>
<li>
Repeat steps 1 and 2 as needed.</li>
</ol>
</li>
</ul>
<p>
<b>Note</b>&nbsp;&nbsp;If an individual information section is greater than 64K, then you cannot get all of the requested information from APPC.</p>
<p>
The <b>DISPLAY</b> verb should not executed from different threads of the same process, since it is not thread-safe.</p>
<p>
The <b>DISPLAY</b> verb returns AP_DISPLAY_INVALID_CONSTANT if the following values are not set for the supplied parameters for <b>init_sect_len</b> and <b>num_sections</b>:</p>
<table cellspacing=4 cols=5>
<tr valign=top>
<th align=left width=23%></th>
<th align=left width=19%>NS/2 format</th>
<th align=left width=19%>IBM EE format</th>
<th align=left width=19%>NS/2 format (Windows NT only</th>
<th align=left width=20%>IBM EE format (Windows NT only)</th>
</tr>
<tr valign=top>
<td width=23%><b>init_sect_len</b></td>
<td width=19%>50</td>
<td width=19%>44</td>
<td width=19%>52</td>
<td width=20%>48</td>
</tr>
<tr valign=top>
<td width=23%><b>num_sections</b></td>
<td width=19%>16</td>
<td width=19%>9</td>
<td width=19%>16</td>
<td width=20%>9</td>
</tr>
</table><br>
<p>
The AP_DISPLAY_INVALID_CONSTANT is also returned when the following parameters are not set properly:</p>
<p>
<b>reserv2</b> must be set to NULL.</p>
<p>
<b>am_info</b> must be set to AP_NO.</p>
<p>
<b>tp_info</b> must be set to AP_NO.</p>
<p>
<b>adapter_info</b> must be set to AP_NO if NS/2 format is requested.</p>
<p>
<b>ms_info</b> must be set to AP_NO if NS/2 format is requested. </p>
<p>&nbsp;</p></body>
</HTML>
