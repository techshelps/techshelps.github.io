<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TP_STARTED</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_tp_started_appc"></a>TP_STARTED</h1>
<p>
The <b>TP_STARTED</b> verb is issued by the invoking TP, and notifies APPC that the TP is starting.</p>
<p>
For the Microsoft® Windows® version 3.<i>x</i> system, it is recommended that you use the <a href="appc06_66sj.htm"><b>WinAsyncAPPC</b></a> function rather than the blocking version of this call.</p>
<p>
The following structure describes the verb control block used by the <b>TP_STARTED</b> verb.</p>
<pre><code>struct tp_started {
    unsigned short  opcode;
    unsigned char   opext;
    unsigned char   reserv2;
    unsigned short  primary_rc;
    unsigned long   secondary_rc;
    unsigned char   lu_alias[8];
    unsigned char   tp_id[8];
    unsigned char   tp_name[64];
    unsigned char   syncpoint_rqd;
}; 
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>opcode</b></dt>
<dd>
Supplied parameter. Specifies the verb operation code, AP_TP_STARTED.</dd>
<dt>
<b>opext</b></dt>
<dd>
Supplied parameter. Specifies the verb operation extension. If the AP_EXTD_VCB bit is set, this indicates that the <b>tp_started</b> structure includes the <b>syncpoint_rqd</b> member used for Sync Point support. Otherwise the verb control block ends immediately after the <b>tp_name</b> member.</dd>
<dt>
<b>primary_rc</b></dt>
<dd>
Returned parameter. Specifies the primary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>secondary_rc</b></dt>
<dd>
Returned parameter. Specifies the secondary return code set by APPC at the completion of the verb. The valid return codes vary depending on the APPC verb issued. See Return Codes for valid error codes for this verb.</dd>
<dt>
<b>lu_alias</b></dt>
<dd>
Supplied parameter. Specifies the alias by which the local LU is known to the local TP.
<p>
The name must match an LU alias established during configuration. APPC checks the LU alias against the current SNA Server configuration file. Due to the client/server architecture used by SNA Server, however, this parameter is not validated until an <a href="appc05a_1ckj.htm"><b>ALLOCATE</b></a> or <a href="appc05a_38f7.htm"><b>MC_ALLOCATE</b></a> is performed.

<p>
This parameter is an 8-byte ASCII character string. It can consist of the following ASCII characters:

<ul>
<li>
Uppercase letters</li>
<li>
Numerals from 0 through 9</li>
<li>
Spaces</li>
<li>
Special characters $, #, % and @</li>
</ul>

<p>
The first character of this string cannot be a space.

<p>
If the value of this parameter is fewer than eight bytes in length, pad it on the right with ASCII spaces (0x20).

<p>
To use an LU from the default LU pool, set this field to eight hexadecimal zeros. For more information, see <a href="appc04_5cv7.htm">Default LUs</a>.
</dd>
<dt>
<b>tp_id</b></dt>
<dd>
Returned parameter. Identifies the newly-established TP.</dd>
<dt>
<b>tp_name</b></dt>
<dd>
Supplied parameter. Specifies the name of the local TP.
<p>
Under the SNA Server implementation of APPC, this parameter is ignored when issued by <b>TP_STARTED</b>. However, this parameter is required if the program runs under the IBM ES for OS/2 version 1.0 implementation of APPC.

<p>
This parameter is a 64-byte EBCDIC character string and is case-sensitive. The <b>tp_name</b> parameter can consist of the following EDCDIC characters:

<ul>
<li>
Uppercase and lowercase letters</li>
<li>
Numerals from 0 through 9</li>
<li>
Special characters $, #, @, and period (.)</li>
</ul>

<p>
If the TP name is fewer than 64 bytes in length, use EBCDIC spaces (0x40) to pad it on the right.

<p>
The SNA convention for a service TP name is up to four characters. The first character is a hexadecimal byte between 0x00 and 0x3F.
</dd>
<dt>
<b>syncpoint_rqd</b></dt>
<dd>
This optional parameter is only applicable if the AP_EXTD_VCB bit is set in the <b>opext</b> parameter and Sync Point services are required.
<ul>
<li>
AP_YES if Sync Point is required.</li>
<li>
AP_NO if Sync Point is not required.</li>
</ul>
</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
ap_ok</dt>
<dd>
Primary return code; the verb executed successfully.</dd>
<dt>
ap_comm_subsystem_abended</dt>
<dd>
Primary return code; indicates one of the following conditions:
<ul>
<li>
The node used by this conversation encountered an ABEND.</li>
<li>
The connection between the TP and the PU 2.1 node has been broken (a LAN error).</li>
<li>
The SnaBase at the TP's computer encountered an ABEND.</li>
</ul>

<p>
The system administrator should examine the error log to determine the reason for the ABEND.
</dd>
<dt>
ap_comm_subsystem_not_loaded</dt>
<dd>
Primary return code; a required component could not be loaded or terminated while processing the verb. Thus, communication could not take place. Contact the system administrator for corrective action.
<p>
When this return code is used with <a href="appc05a_1ckj.htm"><b>ALLOCATE</b></a> or <a href="appc05a_38f7.htm"><b>MC_ALLOCATE</b></a>, it can indicate that no communications subsystem could be found to support the local LU. (For example, the local LU alias specified with <b>TP_STARTED</b> is incorrect or has not been configured.) Note that if <b>lu_alias</b> or <b>mode_name</b> is fewer than eight characters, you must ensure that these fields are filled with spaces to the right. This error is returned if these parameters are not filled with spaces, since there is no node available that can satisfy the <b>ALLOCATE</b> or <b>MC_ALLOCATE</b> request.

<p>
When <b>ALLOCATE</b> or <b>MC_ALLOCATE</b> produces this return code for an SNA Server system configured with multiple nodes, there are two secondary return codes as follows:

<dl>
<dt>
0xF0000001</dt>
<dd>
Secondary return code; no nodes have been started.</dd>
<dt>
0xF0000002</dt>
<dd>
Secondary return code; at least one node has been started, but the local LU (when <b>TP_STARTED</b> is issued) is not configured on any active nodes. The problem could be either of the following:
<table cellspacing=4 cols=1>
<tr valign=top>
<td width=100%><font face="Symbol">·</font>&nbsp;&nbsp;&nbsp;&nbsp;The node with the local LU is not started.</td>
</tr>
<tr valign=top>
<td width=100%><font face="Symbol">·</font>&nbsp;&nbsp;&nbsp;&nbsp;The local LU is not configured.</td>
</tr>
</table><br>

</dd>
</dl>
</dd>
<dt>
ap_invalid_verb_segment</dt>
<dd>
Primary return code; the VCB extended beyond the end of the data segment.</dd>
<dt>
ap_stack_too_small</dt>
<dd>
Primary return code; the stack size of the application is too small to execute the verb. Increase the stack size of your application.</dd>
<dt>
ap_tp_busy</dt>
<dd>
Primary return code; the local TP has issued a call to APPC while APPC was processing another call for the same TP.</dd>
<dt>
ap_thread_blocking</dt>
<dd>
Primary return code; the calling thread is already in a blocking call.</dd>
<dt>
ap_unexpected_dos_error</dt>
<dd>
Primary return code; the operating system has returned an error to APPC while processing an APPC call from the local TP. The operating system return code is returned through the <b>secondary_rc</b>. It appears in Intel byte-swapped order. If the problem persists, consult the system administrator.
</dd>
</dl>
<h4>Remarks</h4>
<p>
In response to <b>TP_STARTED</b>, APPC generates a TP identifier for the invoking TP. This identifier is a required parameter for subsequent APPC verbs issued by the invoking TP.</p>
<p>
This must be the first APPC verb issued by the invoking TP. Consequently, no prior APPC state exists.</p>
<p>
If the verb executes successfully (<b>primary_rc</b> is ap_ok), the state changes to RESET.</p>
<p>&nbsp;</p></body>
</HTML>
