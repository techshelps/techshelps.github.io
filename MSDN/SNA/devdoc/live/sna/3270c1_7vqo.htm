<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Making Connections</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_making_connections_3270"></a>Making Connections</h2>
<p>
Before messages can flow across a connection, the connection must be established, or opened. This is necessary because a partner (P1) does not initially know the LPI address of the partner with which it wishes to communicate; indeed, there may not even be a suitable partner for it to communicate with.</p>
<p>
A component of the Base, known as the Resource Locator, and a message with type of Open, known as an Open message, are used to establish a connection between partners.</p>
<p>
The following procedure outlines how a connection is established. More specific information is available in <a href="3270c3_3nxs.htm">The Function Management Interface</a>.</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To establish a connection between partners</h5>
<ol>
<li>
The Open message has two forms: an Open request and an Open response. The Open request contains information on the type of partner P1 is looking for.<p>
P1 fills in an Open request and calls the Base with it. Since it does not know the LPI address of its partner, it sets the destination LPI values to zero.
</li>
<li>
The Base cannot forward the Open to a particular partner, since it has no destination LPI address. Therefore it passes the Open to the Resource Locator, which attempts to find a locality that will accept the Open. The DMOD has a record of all the localities that could accept this type of Open. The Resource Locator tries each of these localities until the Open is accepted. If no locality is found, the Resource Locator returns a negative response to the Open to inform the sender that no partner could be found.</li>
<li>
When a remote locality receives an Open, the Base passes the Open to the partner (P2). If P2 can accept the Open, it responds by sending back a positive Open response message to P1.</li>
<li>
The Open response message returned to P1 contains both the source and destination LPI values for the particular connection. At the end of this exchange, both P1 and P2 know each other's addresses and can communicate over the connection.</li>
</ol>
<p>
Note that the terms "source" and "destination" in the context of LPIs refer to the source and destination of the particular message. Hence, when the 3270 emulator builds a message to send to the local 2.1 node, it needs to swap the source and destination LPIs received on the Open response from the local 2.1 node.</p>
<p>
For a detailed example of how LPI addresses are assigned during initialization of the SSCP and PLU sessions, see <a href="3270c3_41gw.htm">Opening the PLU Connection</a>.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
