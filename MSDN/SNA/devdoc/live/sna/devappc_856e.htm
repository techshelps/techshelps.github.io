<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SNA Performance Monitor Interface</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_sna_performance_monitor_interface_dev"></a>SNA Performance Monitor Interface</h1>
<p>
This section describes the interface for performance monitoring (Perfmon) used by the Microsoft® SNA Server-supplied SNADIS links. This interface is provided to simplify the integration of SNADIS-compliant link services with the Microsoft® Windows NT® Performance Monitor application. It provides a common look and feel to all link service performance counters exported by SNADIS links, independent of the vendor and link transport (channel, twinax, SDLC, X.25, TR, E/Net, and so on).</p>
<p>
The performance monitoring statistics maintained for an SNA link service are stored in a series of <a href="prfmonapi_4iba.htm"><b>ADAPTERCOUNTER</b></a> structures that are members of an <a href="prfmonapi_7lti.htm"><b>ADAPTERPERFDATA</b></a> structure. These structures are defined in the SEMFPERF.H header file. </p>
<p>
Three API entry points are exported from IHVLINK.DLL (and the IHVLINK.LIB import library) that are used by the Perfmon API. These functions should be called in the order noted below at link service initialization time.</p>
<p>
To support perfomance monitoring, an SNA Link driver first calls <a href="prfmonapi_2v92.htm"><b>SNAInitLinkPerfMon</b></a><b> </b>to initialize data structures used by the Perfmon application. This call should be followed with a call to function <a href="prfmonapi_93na.htm"><b>SNAGetLinkPerfArea</b></a>, which returns a shared mutex handle and a pointer to the shared data area for the <b>ADAPTERPERFDATA</b> structure used by the Perfmon application to store the link statistics. This handle and shared memory data area parameter are the returned values from <b>SNAInitLinkPerfmon</b>. Finally, the <a href="prfmonapi_15py.htm"><b>SNAGetPerfValues</b></a> function is called to fill in the <i>ServiceNameIndex</i> and <i>FirstCounterIndex</i> fields so that the Perfmon application knows where to get the descriptions of the performance counters from the registry.</p>
<p>
After these three calls have been made, the SNA link driver simply maintains the count members in the <b>ADAPTERCOUNTER</b> structures that make up the <b>ADAPTERPERFDATA</b> structure, incrementing the count member whenever data is received, connections fail, and other events occur. The Perfmon application accesses these counters to display Microsoft® SNA Server performance monitoring data statistics. </p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
