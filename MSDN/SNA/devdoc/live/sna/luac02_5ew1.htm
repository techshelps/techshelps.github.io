<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Issuing an LUA Verb</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_issuing_an_lua_verb_lua"></a>Issuing an LUA Verb</h2>
<p>
The following procedure is required to issue an LUA verb. In this example, the verb issued is <a href="luac03_37z5.htm"><b>RUI_INIT</b></a>.</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To issue an LUA verb</h5>
<ol>
<li>
Create a variable for the VCB structure. For example:<pre><code>#include &lt;winlua.h&gt;
        .
        .
struct LUA_VERB_RECORD rui_init;</code></pre>
</li>
</ol>
<pre><code></code></pre>
<p class=indent1>
The <a href="luac02_95i9.htm"><b>LUA_VERB_RECORD</b></a> structure is declared in the WINLUA.H header file.</p>
<ol start=2>
<li>
Clear (set to zero) the variables within the VCB:<pre><code>memset( &amp;rui_init, 0, sizeof( rui_init) );</code></pre>
</li>
</ol>
<pre><code></code></pre>
<p class=indent1>
LUA requires that all reserved parameters, and all parameters not required by the verb being issued, must be set to zero. The simplest way to do this is to set the entire VCB to zeros before setting the parameters required for this particular verb.</p>
<ol start=3>
<li>
Assign values to the VCB parameters that supply information to LUA:<pre><code>rui_init.common.lua_verb = LUA_VERB_RUI;
rui_init.common.lua_verb_length = sizeof(struct LUA_COMMON);
rui_init.common.lua_opcode = LUA_OPCODE_RUI_INIT;
memcpy (rui_init.common.lua_luname, "THISLU&nbsp;&nbsp;", 8);</code></pre>
</li>
</ol>
<pre><code></code></pre>
<p class=indent1>
The values LUA_VERB_RUI and LUA_OPCODE_RUI_INIT are symbolic constants. These constants are defined in the WINLUA.H header file in the SNA Server Software Development Kit. To ensure portability between different systems, use symbolic constants and not integer values.</p>
<ol start=4>
<li>
Invoke LUA. The only parameter is a pointer to the address of the structure containing the VCB for the desired verb.<pre><code>RUI( &amp;rui_init );</code></pre>
</li>
</ol>
<pre><code></code></pre>
<ol start=5>
<li>
Check the asynchronous flag (<b>rui_init.common.lua_flag2.async</b>) to determine whether the verb completed asynchronously. If events are being used and the verb did complete asynchronously, wait for the event to complete.<pre><code>if (rui_init.common.lua_flag2.async)
{
/* verb will complete asynchronously so continue
with other processing */
/* then wait */
WaitForSingleObject (...)
}</code></pre>
</li>
</ol>
<pre><code></code></pre>
<p class=indent1>
Do not check the return code; it may have changed from LUA_IN_PROGRESS to LUA_OK by the time you check it.</p>
<ol start=6>
<li>
Check the variables returned by LUA.<pre><code>if( rui_init.common.lua_prim_rc == LUA_OK )
{
/* Init OK */
        .
        .
} 
else
{
/* Do error routine */
        .
        .
}</code></pre>
</li>
</ol>
<pre><code></code></pre>
<p>&nbsp;</p></body>
</HTML>
