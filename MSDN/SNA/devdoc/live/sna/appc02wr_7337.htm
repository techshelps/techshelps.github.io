<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Implied Forget</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_implied_forget_appc"></a>Implied Forget</h3>
<p>
LU 6.2 Sync Point sessions can use an optimization of the architected message flows known as implied forget. When the protocol specifies that a FORGET presentation header (PS) is required, the next data flow on the session implies that a FORGET has been received, even though it has not. In the normal situation, the TP is aware of the next data flow when data is received or sent on one of its Sync Point conversations.</p>
<p>
However it is possible that the last message that flows is caused by the conversation being deallocated. In this case, the TP is unaware when the next data flow on the session occurs. To provide the TP with this notification, the <a href="appc05a_4ndv.htm"><b>DEALLOCATE</b></a> and <a href="appc05a_4okj.htm"><b>MC_DEALLOCATE</b></a><b> </b>verbs are modified to allow the TP to register a callback function which will be called:
<ul>
<li>
On the first normal flow transmission (request or response) over the session used by the conversation.</li>
<li>
If the session is unbound before any other data flows.</li>
<li>
If the session is terminated abnormally due to a data link control (DLC) outage.</li>
</ul>
<p>
The callback procedure can take any name because the address of the procedure is passed into the APPC DLL. </p>
<p>
Note that the <b>DEALLOCATE</b> and <b>MC_DEALLOCATE </b>verbs will probably complete before the callback routine is called. The conversation is considered to be in RESET state and no further verbs can be issued using the conversation identifier. If the application issues a <a href="appc04_8k0z.htm"><b>TP_ENDED</b></a> verb before the next data flow on the session, the callback routine will not be invoked.</p>
<p>
The <a href="appc05a_4ndv.htm"><b>DEALLOCATE</b></a><b> </b>and <a href="appc05a_4okj.htm"><b>MC_DEALLOCATE</b></a> verbs are modified as follows to support implied forget:
<ul>
<li>
A new member, <b>callback</b>, is added to allow the TP to specify the address of the function to call on the next data flow on the session being used by the conversation being deallocated. If this member is NULL, no notification will be provided. A vendor would normally supply this callback function.</li>
<li>
The <b>DEALLOCATE</b> and <b>MC_DEALLOCATE </b>verbs also contain a <b>correlator</b> member which is returned as one of the parameters when the callback function is invoked. The application can use this parameter in any way (for example, as a pointer to a control block within the application).</li>
</ul>
<p>
SNA Server allows TPs to deallocate conversations immediately after sending data by specifying the <b>type</b> member in the <a href="appc05b_7wbn.htm"><b>SEND_DATA</b></a><b> </b>and <a href="appc05b_8iub.htm"><b>MC_SEND_DATA</b></a><b> </b>verbs as AP_SEND_DATA_DEALLOC_FLUSH, AP_SEND_DATA_DEALLOC_SYNC_LEVEL, AP_SEND_DATA_DEALLOC_ABEND, and AP_SEND_DATA_DEALLOC_CONFIRM. However, the <b>SEND_DATA</b> and <b>MC_SEND_DATA </b>verbs do not contain the implied forget callback function. TPs wishing to receive implied forget notification must issue a <a href="appc05a_4ndv.htm"><b>DEALLOCATE</b></a> or <a href="appc05a_4okj.htm"><b>MC_DEALLOCATE</b></a> verb explicitly.</p>
<p>&nbsp;</p></body>
</HTML>
