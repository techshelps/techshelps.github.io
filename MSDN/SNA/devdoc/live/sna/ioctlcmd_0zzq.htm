<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Function 0x64: Read Interface Record</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_function_0x64colon_read_interface_record_dev"></a>Function 0x64: Read Interface Record</h1>
<p>
This function reads the driver's interface record and copies it into the buffer passed by the SNALink. The buffer must be allocated by the SNALink prior to making this call.</p>
<h4>Parameters</h4>
<dl>
<dt>
<b>IRP.System.Buffer</b></dt>
<dd>
Interface Record Address (IN) — a 32-bit pointer to the driver's interface record area.
<p>
The interface record format is as follows:

<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=42%>Description</th>
<th align=left width=58%>Type</th>
</tr>
<tr valign=top>
<td colspan=2 width=100%></td>
</tr>
<tr valign=top>
<td width=42%>Received Frames </td>
<td width=58%><b>int</b></td>
</tr>
<tr valign=top>
<td width=42%>Transmit Buffer Space</td>
<td width=58%><b>int</b></td>
</tr>
<tr valign=top>
<td width=42%>Status Events </td>
<td width=58%><b>int</b></td>
</tr>
<tr valign=top>
<td width=42%>Input V.24 Status</td>
<td width=58%><b>UCHAR</b></td>
</tr>
<tr valign=top>
<td width=42%>Output V.24 Status</td>
<td width=58%><b>UCHAR</b></td>
</tr>
<tr valign=top>
<td width=42%>Statistics Counters </td>
<td width=58%><b>int[11]</b></td>
</tr>
</table><br>


<ul>
<li>
Received Frames is the number of frames currently queued in the driver receive buffers.</li>
<li>
Transmit Buffer Space is used to signal to the SNALink:<p>
Whether more frames can be provided to the driver.
<p>
Whether the driver still has frames waiting to be sent.
<p>
The Transmit Buffer Space field indicates the maximum frame size that the driver can currently accept. This is updated after each successful Transmit Frame IOCTL, and should be checked by the SNALink before sending further frames to the driver.
</li>
<li>
Status Events is a count of the total number of increments made to the Statistics Counters.</li>
<li>
Input V.24 Status is a bitmap of the current logical state of the input interface lines, a value of 1 meaning ON and a value of 0 meaning OFF. The pins are mapped as follows:</li>
</ul>

<table cellspacing=4 cols=4>
<tr valign=top>
<th align=left width=16%>Bit <br>
number</th>
<th align=left width=42%>V.24 circuit name</th>
<th align=left width=16%>Circuit <br>
number</th>
<th align=left width=26%>RS-232C pin</th>
</tr>
<tr valign=top>
<td width=16%>7 - 5 </td>
<td width=42%>Reserved</td>
<td width=16%>142</td>
<td width=26%>25</td>
</tr>
<tr valign=top>
<td width=16%>4</td>
<td width=42%>Test Indicator</td>
<td width=16%>125</td>
<td width=26%>22</td>
</tr>
<tr valign=top>
<td width=16%>3</td>
<td width=42%>Calling Indicator</td>
<td width=16%>125</td>
<td width=26%>22</td>
</tr>
<tr valign=top>
<td width=16%>2</td>
<td width=42%>RLSD (commonly DCD)</td>
<td width=16%>109</td>
<td width=26%>8</td>
</tr>
<tr valign=top>
<td width=16%>1</td>
<td width=42%>Data Set Ready (DSR)</td>
<td width=16%>107</td>
<td width=26%>6</td>
</tr>
<tr valign=top>
<td width=16%>0</td>
<td width=42%>Ready For Sending (CTS)</td>
<td width=16%>106</td>
<td width=26%>5</td>
</tr>
</table><br>


<ul>
<li>
Output V.24 Status is a bitmap of the current logical state of the output interface lines, a value of 1 meaning ON and a value of 0 meaning OFF. The pins are mapped as follows:</li>
</ul>

<table cellspacing=4 cols=4>
<tr valign=top>
<th align=left width=16%>Bit <br>
number</th>
<th align=left width=41%>V.24 circuit name</th>
<th align=left width=17%>Circuit <br>
number</th>
<th align=left width=26%>RS-232C pin</th>
</tr>
<tr valign=top>
<td width=16%>7 - 5 </td>
<td width=41%>Reserved</td>
<td width=17%></td>
<td width=26%></td>
</tr>
<tr valign=top>
<td width=16%>4</td>
<td width=41%>Maintenance Test</td>
<td width=17%>140</td>
<td width=26%>18</td>
</tr>
<tr valign=top>
<td width=16%>3</td>
<td width=41%>Select Standby</td>
<td width=17%>116</td>
<td width=26%>11</td>
</tr>
<tr valign=top>
<td width=16%>2</td>
<td width=41%>Data Signal Rate Selector</td>
<td width=17%>111</td>
<td width=26%>23</td>
</tr>
<tr valign=top>
<td width=16%>1</td>
<td width=41%>Data Terminal Ready (DTR)</td>
<td width=17%>108/2</td>
<td width=26%>22</td>
</tr>
<tr valign=top>
<td width=16%>0</td>
<td width=41%>Request to Send (RTS)</td>
<td width=17%>105</td>
<td width=26%>4</td>
</tr>
</table><br>


<p class=indent1>
Note that the driver will raise and lower RTS as necessary while transmitting, reflecting the state of RTS in the output V.24 status field. The application should not, therefore, try to manipulate RTS.</p>

<ul>
<li>
The Statistics Counters are running counts of various kinds of link status information. The events they relate to are:</li>
</ul>

<table cellspacing=4 cols=2>
<tr valign=top>
<td width=22%>Counter 1</td>
<td width=78%>Frames received with incorrect CRC.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 2</td>
<td width=78%>Frames larger than the maximum size received.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 3</td>
<td width=78%>Frames smaller than 32 bits received.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 4</td>
<td width=78%>Frames received that are not a multiple of 8 bits.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 5</td>
<td width=78%>Aborted frames received. </td>
</tr>
<tr valign=top>
<td width=22%>Counter 6</td>
<td width=78%>Transmitter underruns. </td>
</tr>
<tr valign=top>
<td width=22%>Counter 7</td>
<td width=78%>Receiver overruns. </td>
</tr>
<tr valign=top>
<td width=22%>Counter 8</td>
<td width=78%>RLSD drops in mid-reception.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 9</td>
<td width=78%>CTS drops in mid-transmission.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 10</td>
<td width=78%>DSR drops.</td>
</tr>
<tr valign=top>
<td width=22%>Counter 11</td>
<td width=78%>Hardware failures (adapter or modem).</td>
</tr>
</table><br>

</dd>
</dl>
<h4>Remarks</h4>
<p>
The interface record provides a fast mechanism to use to decide whether a frame can be transmitted, whether there are any frames to be received, and so on. The driver maintains this information. Each time the SNALink requires this information, it calls <b>Read Interface Record</b> to get a copy of the current interface record. After each call, the driver clears the statistics counters in its own interface record. The V.24 status and transmit and receive data information are unchanged.</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
