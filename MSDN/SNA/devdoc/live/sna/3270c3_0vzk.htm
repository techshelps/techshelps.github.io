<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Confirmation and Rejection of Outbound Data</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_confirmation_and_rejection_of_outbound_data_3270"></a>Confirmation and Rejection of Outbound Data</h3>
<p>
The local node sends chains of data from the host to the application with their ACKRQD field set as follows:
<ol>
<li>
ACKRQD set<p>
If the corresponding SNA request was received specifying definite response, and the BIND parameters specify that the primary uses definite or definite/exception chain response mode.
</li>
<li>
ACKRQD not set, response mode<p>
If the corresponding SNA request was received specifying exception response, and the BIND parameters specify that the primary uses exception or definite/exception chain response mode.
</li>
<li>
ACKRQD not set, no-response mode<p>
If the corresponding SNA request was received specifying no response, and the BIND parameters specify that the primary uses no-response chain response mode.
</li>
</ol>
<p>
In case 1, the application should always send an acknowledgment as follows:
<ul>
<li>
If the application accepts the data, it should return a <a href="3270c4_5z00.htm"><b>Status-Acknowledge(Ack)</b></a> message.</li>
<li>
If the application wishes to reject the data, it should return a <b>Status-Acknowledge(Nack-1)</b> message carrying the appropriate SNA sense codes.</li>
</ul>
<p>
In case 2, the application should only send an acknowledgment in the following cases:
<ul>
<li>
If the application wishes to reject the data, it should return a <b>Status-Acknowledge(Nack-1)</b> message carrying the appropriate SNA sense codes.</li>
<li>
The application can send a courtesy acknowledgement (see <a href="3270c3_8ik0.htm">Outbound Data</a>) to an RQE message to clear up correlation data within the local node.</li>
</ul>
<p>
In case 3, the application should not send acknowledgments; however, the sending of a <b>Status-Acknowledge(Ack)</b> or <b>Status-Acknowledge(Nack-1)</b> by the application has no effect—it is discarded.</p>
<p>
Whenever an application sends a <b>Status-Acknowledge(Ack)</b> or <b>Status-Acknowledge(Nack-1)</b> to a received <a href="3270c4_4eeo.htm"><b>Data</b></a> message, it implicitly confirms receipt of this and all previously-received <b>Data</b> messages.</p>
<p>
In case 2, the host can issue a CHASE request; the local node sends a <b>Status-Control(CHASE) Request</b> with ACKRQD set to the application. When the application is in a position to confirm receipt of all outstanding data, it should issue a <b>Status-Control(CHASE) Acknowledge</b> message, which the local node converts into a positive response to CHASE for the host.</p>
<p>
In cases 1 and 2, if the local node detects an error in a received request, it converts the request into a special <a href="3270c4_4eeo.htm"><b>Data</b></a> message, which it passes to the application. Regardless of the chain response mode specified for the secondary in the BIND parameters, this <b>Data</b> message has the following characteristics:
<ul>
<li>
ACKRQD is set; that is, the application must confirm receipt using a <a href="3270c4_5z00.htm"><b>Status-Acknowledge(Ack)</b></a> message.</li>
<li>
The SDI application flag is set to indicate that this is a special <b>Data</b> message used to inform the application of an error detected by the local node.</li>
<li>
The ECI application flag is set to indicate that the received chain has now terminated.</li>
<li>
The first four bytes of the buffer element hold the SNA sense codes detected by the local node that caused the termination.</li>
</ul>
<p>
This mechanism allows:
<ul>
<li>
The application to reject any previously-received <b>Data</b> messages.</li>
<li>
The local node to inform the application of any errors it detects in received requests.</li>
<li>
The local node to send negative responses in the correct order.</li>
</ul>
<p>
The following three figures illustrate the outbound data confirmation and rejection protocols between the local node and the application and how those protocols relate to the underlying SNA protocols.</p>
<p>
In the first illustration, the host sends a definite response chain to get the application to confirm receipt of the RQD request and all previously sent RQE chains.</p>
<p>
<img src="images/32703q.gif" border=0></p>
<p>
In the following illustration, a <b>Status-Acknowledge(Nack-1)</b> from the application rejects the last chain and confirms receipt of all previously sent data chains.</p>
<p>
<img src="images/32703qa.gif" border=0></p>
<p>
In the following illustration, the host sends a CHASE request to get the application to confirm receipt of the CHASE and all previously sent chains.</p>
<p>
<img src="images/32703qb.gif" border=0></p>
<p>&nbsp;</p></body>
</HTML>
