<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>sepdcrec</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_sepdcrec_3270"></a>sepdcrec</h1>
<p>
The <b>sepdcrec</b> function gets configuration information. The application calls this function to obtain the 3270 configuration information for the name with which the user logged on to the network operating system. The call also registers this user name in the service table.</p>
<h4>Win32</h4>
<p>
<b>USHORT&nbsp;sepdcrec(</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;UCHAR</b>&nbsp;*<i>pBuffer</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;USHORT&nbsp;</b><i>length</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;USHORT</b>&nbsp;*<i>numbytes</i></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;);</b></td>
<td width=8%><pre></pre>
</td>
</tr>
</table><br>
<h4>MS-DOS, Windows Version 3.x, and OS/2</h4>
<p>
<b>USHORT&nbsp;FAR&nbsp;sepdcrec(</b></p>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;UCHAR</b>&nbsp;*<i>pBuffer</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;USHORT&nbsp;</b><i>length</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;USHORT</b>&nbsp;*<i>numbytes</i></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;);</b></td>
<td width=8%><pre></pre>
</td>
</tr>
</table><br>
<h4>Parameters</h4>
<dl>
<dt>
<i>pBuffer</i></dt>
<dd>
Pointer to a buffer supplied by the application, in which configuration information is returned.</dd>
<dt>
<i>length</i></dt>
<dd>
Size of the supplied buffer.</dd>
<dt>
<i>numbytes</i></dt>
<dd>
Used by SNA Server to return the number of bytes of information returned in the buffer.
</dd>
</dl>
<h4>Return Values</h4>
<dl>
<dt>
NO_ERROR  (0)</dt>
<dd>
OK.</dd>
<dt>
NOCSSRVR  (1)</dt>
<dd>
No configuration file server available.</dd>
<dt>
NODGNREC  (2)</dt>
<dd>
No diagnostics record found in configuration file.</dd>
<dt>
NOUSRREC  (3)</dt>
<dd>
No user record found in configuration file for this user.</dd>
<dt>
BUF2SMAL  (4)</dt>
<dd>
Supplied buffer was too small.</dd>
<dt>
NONOS  (5)</dt>
<dd>
Network operating system is not started.</dd>
<dt>
NOTLOGON  (6)</dt>
<dd>
User is not logged on to the network operating system.</dd>
<dt>
READERR  (7)</dt>
<dd>
Failed to read from configuration file.</dd>
<dt>
NONAP  (8)</dt>
<dd>
The NAP is not started.</dd>
<dt>
MAXAPP  (9)</dt>
<dd>
Windows only: <br>
Maximum number of concurrent applications exceeded.</dd>
<dt>
ERROR_SERVER  (14)</dt>
<dd>
Error on the server end of the RPC.</dd>
<dt>
ERROR_LOCAL_FAILURE  (15)</dt>
<dd>
Error on the local end of the RPC.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The <a href="entrypts_8eeo.htm"><b>sbpuinit</b></a> function should always be called before any other DL-BASE/DMOD entry points except <a href="entrypts_7pf4.htm"><b>SNAGetVersion</b></a>. For new emulators, <b>sepdcrec</b> should be called after <b>sbpuinit</b>. (Because of the order of calls used in older emulators, a call to <b>sepdcrec</b> before <b>sbpuinit</b> is still supported, but this order is not recommended.)</p>
<p>
On successful return, the buffer contains pointers to the appropriate 3270 user record and the diagnostics record, followed by the records themselves. It is formatted as follows:</p>
<h4>Win32</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;TECWRKUS</b>&nbsp;*<i>pUserRecord</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;TEDIAGNS</b>&nbsp;*<i>pDiagRecord</i></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;);</b></td>
<td width=8%><pre></pre>
</td>
</tr>
</table><br>
<p>
(UserRecord—variable length)</p>
<p>
(DiagRecord)</p>
<h4>MS-DOS, Windows Version 3.x, and OS/2</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;TECWRKUS&nbsp;FAR</b>&nbsp;*<i>pUserRecord</i><b>,</b></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;&nbsp;TEDIAGNS&nbsp;FAR</b>&nbsp;*<i>pDiagRecord</i></td>
<td width=8%><pre></pre>
</td>
</tr>
<tr valign=top>
<td width=92%><b>&nbsp;&nbsp;&nbsp;);</b></td>
<td width=8%><pre></pre>
</td>
</tr>
</table><br>
<p>
(UserRecord—variable length)</p>
<p>
(DiagRecord)</p>
<p>
The two records should be accessed using the supplied pointers.</p>
<p>
See <a href="3270c6_8ub4.htm">Configuration Information</a> for details of the format of these records and of how the application uses the configuration file information.</p>
<p>
If there is no 3270 user record for this user in the configuration file, or if no diagnostics record is found in the configuration file (an internal error), the application should terminate and not allow the user to use 3270 emulation. The SNA Server error log messages COM0438 and COM0437 can be used to report these failures.</p>
<p>
If the supplied buffer is too small for the returned information, the contents of the buffer are undefined and should not be examined, but the <i>numbytes</i> parameter will contain the total number of bytes of information available (that is, the size of the two pointers plus the two configuration records). The application should retry with a buffer of at least this size.</p>
<p>&nbsp;</p></body>
</HTML>
