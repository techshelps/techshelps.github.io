<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RUI_READ</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_rui_read_lua"></a>RUI_READ</h1>
<p>
The <b>RUI_READ</b> verb receives responses, SNA commands, and data into a Windows LUA application's buffer.</p>
<p>
The following structure describes the <b>LUA_COMMON</b> member of the VCB used by <b>RUI_READ</b>.</p>
<pre><code>struct LUA_COMMON {
    unsigned short lua_verb;
    unsigned short lua_verb_length;
    unsigned short lua_prim_rc;
    unsigned long  lua_sec_rc;
    unsigned short lua_opcode;
    unsigned long  lua_correlator;
    unsigned char  lua_luname[8];
    unsigned short lua_extension_list_offset;
    unsigned short lua_cobol_offset;
    unsigned long  lua_sid;
    unsigned short lua_max_length;
    unsigned short lua_data_length;
    char FAR *     lua_data_ptr;
    unsigned long  lua_post_handle;
    struct LUA_TH  lua_th;
    struct LUA_RH  lua_rh;
    struct LUA_FLAG1 lua_flag1;
    unsigned char  lua_message_type;
    struct LUA_FLAG2 lua_flag2; 
    unsigned char  lua_resv56[7];
    unsigned char  lua_encr_decr_option;
};
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>lua_verb</b></dt>
<dd>
Supplied parameter. Contains the verb code, LUA_VERB_RUI for RUI verbs.</dd>
<dt>
<b>lua_verb_length</b></dt>
<dd>
Supplied parameter. Specifies the length in bytes of the LUA VCB. It must contain the length of the verb record being issued.</dd>
<dt>
<b>lua_prim_rc</b></dt>
<dd>
Primary return code set by LUA at the completion of the verb. The valid return codes vary depending on the LUA verb issued.</dd>
<dt>
<b>lua_sec_rc</b></dt>
<dd>
Secondary return code set by LUA at the completion of the verb. The valid return codes vary depending on the LUA verb issued.</dd>
<dt>
<b>lua_opcode</b></dt>
<dd>
Supplied parameter. Contains the LUA command code (verb operation code) for the verb to be issued, LUA_OPCODE_RUI_READ.</dd>
<dt>
<b>lua_correlator</b></dt>
<dd>
Supplied parameter. Contains a user-supplied value that links the verb with other user-supplied information. LUA does not use or change this information. This parameter is optional.</dd>
<dt>
<b>lua_luname</b></dt>
<dd>
Supplied parameter. Specifies the ASCII name of the local LU used by the Windows LUA session.
<p>
<b>RUI_READ</b> only requires this parameter if <b>lua_sid</b> is zero.

<p>
This parameter is eight bytes long, padded on the right with spaces (0x20) if the name is shorter than eight characters.
</dd>
<dt>
<b>lua_extension_list_offset</b></dt>
<dd>
Not used by RUI in Microsoft® SNA Server and should be set to zero.</dd>
<dt>
<b>lua_cobol_offset</b></dt>
<dd>
Not used by LUA in SNA Server and should be zero.</dd>
<dt>
<b>lua_sid</b></dt>
<dd>
Supplied and returned parameter. Specifies the session identifier and is returned by <a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a> and <a href="luac03_37z5.htm"><b>RUI_INIT</b></a>. Other verbs use this parameter to identify the session used for the command. If other verbs use the <b>lua_luname</b> parameter to identify sessions, set the <b>lua_sid</b> parameter to zero.</dd>
<dt>
<b>lua_max_length</b></dt>
<dd>
Specifies the length of received buffer for <b>RUI_READ </b>and <a href="luac04_2nfl.htm"><b>SLI_RECEIVE</b></a>. Not used by other RUI and SLI verbs and should be set to zero. </dd>
<dt>
<b>lua_data_length</b></dt>
<dd>
Returned parameter. Specifies the length of data returned in <b>lua_peek_data</b> for the <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> verb.</dd>
<dt>
<b>lua_data_ptr</b></dt>
<dd>
Pointer to the application-supplied buffer that is to receive the data from an <b>RUI_READ</b> verb. Both SNA commands and data are placed in this buffer, and they can be in an EBCDIC format.
<p>
When <b>RUI_READ</b> is issued, this parameter points to the location to receive the data from the host.
</dd>
<dt>
<b>lua_post_handle</b></dt>
<dd>
Supplied parameter. Used under Microsoft® Windows NT® and Microsoft® Windows® 95 if asynchronous notification is to be accomplished by events. This variable contains the handle of the event to be signaled or a window handle.
<p>
For all other environments, this parameter is reserved and should be set to zero.
</dd>
<dt>
<b>lua_th</b></dt>
<dd>
Returned parameter. Contains the SNA transmission header (TH) of the message sent or received. Various subparameters are set for write functions and returned for read and bid functions. Its subparameters are as follows:
<dl>
<dt>
<b>lua_th.flags_fid</b></dt>
<dd>
Format identification type 2, four bits.</dd>
<dt>
<b>lua_th.flags_mpf</b></dt>
<dd>
Segmenting mapping field, two bits. Defines the type of data segment. The following values are valid:
<p>
<b>0x00</b>Middle segment<br>
<b>0x04</b>Last segment<br>
<b>0x08</b>First segment<br>
<b>0x0C</b>Only segment
</dd>
<dt>
<b>lua_th.flags_odai</b></dt>
<dd>
Originating address field–destination address field (OAF–DAF) assignor indicator, one bit.</dd>
<dt>
<b>lua_th.flags_efi</b></dt>
<dd>
Expedited flow indicator, one bit.</dd>
<dt>
<b>lua_th.daf</b></dt>
<dd>
Destination address field (DAF), an unsigned char.</dd>
<dt>
<b>lua_th.oaf</b></dt>
<dd>
Originating address field (OAF), an unsigned char.</dd>
<dt>
<b>lua_th.snf</b></dt>
<dd>
Sequence number field, an unsigned char[2].
</dd>
</dl>
</dd>
<dt>
<b>lua_rh</b></dt>
<dd>
Returned parameter. Contains the SNA request/response header (RH) of the message sent or received. It is set for the write function and returned by the read and bid functions. Its subparameters are as follows:
<dl>
<dt>
<b>lua_rh.rri</b></dt>
<dd>
Request-response indicator, one bit.</dd>
<dt>
<b>lua_rh.ruc</b></dt>
<dd>
RU category, two bits. The following values are valid:
<p>
<b>LUA_RH_FMD</b>  (<b>0x00</b>)FM data segment<br>
<b>LUA_RH_NC</b>  (<b>0x20</b>)Network control<br>
<b>LUA_RH_DFC</b>  (<b>0x40</b>)Data flow control<br>
<b>LUA_RH_SC</b>  (<b>0x60</b>)Session control
</dd>
<dt>
<b>lua_rh.fi</b></dt>
<dd>
Format indicator, one bit.</dd>
<dt>
<b>lua_rh.sdi</b></dt>
<dd>
Sense data included indicator, one bit.</dd>
<dt>
<b>lua_rh.bci</b></dt>
<dd>
Begin chain indicator, one bit.</dd>
<dt>
<b>lua_rh.eci</b></dt>
<dd>
End chain indicator, one bit.</dd>
<dt>
<b>lua_rh.dr1i</b></dt>
<dd>
Definite response 1 indicator, one bit.</dd>
<dt>
<b>lua_rh.dr2i</b></dt>
<dd>
Definite response 2 indicator, one bit.</dd>
<dt>
<b>lua_rh.ri</b></dt>
<dd>
Exception response indicator (for a request), or response type indicator (for a response), one bit.</dd>
<dt>
<b>lua_rh.qri</b></dt>
<dd>
Queued response indicator, one bit.</dd>
<dt>
<b>lua_rh.pi</b></dt>
<dd>
Pacing indicator, one bit.</dd>
<dt>
<b>lua_rh.bbi</b></dt>
<dd>
Begin bracket indicator, one bit.</dd>
<dt>
<b>lua_rh.ebi</b></dt>
<dd>
End bracket indicator, one bit.</dd>
<dt>
<b>lua_rh.cdi</b></dt>
<dd>
Change direction indicator, one bit.</dd>
<dt>
<b>lua_rh.csi</b></dt>
<dd>
Code selection indicator, one bit.</dd>
<dt>
<b>lua_rh.edi</b></dt>
<dd>
Enciphered data indicator, one bit.</dd>
<dt>
<b>lua_rh.pdi</b></dt>
<dd>
Padded data indicator, one bit.
</dd>
</dl>
</dd>
<dt>
<b>lua_flag1</b></dt>
<dd>
Supplied parameter. Contains a data structure containing flags for messages supplied by the application. Its subparameters are as follows:
<dl>
<dt>
<b>lua_flag1.bid_enable</b></dt>
<dd>
Bid enable indicator, one bit. </dd>
<dt>
<b>lua_flag1.close_abend</b></dt>
<dd>
Close immediate indicator, one bit. </dd>
<dt>
<b>lua_flag1.nowait</b></dt>
<dd>
No wait for data flag, one bit. </dd>
<dt>
<b>lua_flag1.sscp_exp</b></dt>
<dd>
SSCP expedited flow, one bit.</dd>
<dt>
<b>lua_flag1.sscp_norm</b></dt>
<dd>
SSCP normal flow, one bit.</dd>
<dt>
<b>lua_flag1.lu_exp</b></dt>
<dd>
LU expedited flow, one bit.</dd>
<dt>
<b>lua_flag1.lu_norm</b></dt>
<dd>
LU normal flow, one bit.
</dd>
</dl>

<p>
Set <b>lua_flag1.nowait</b> to 1 to indicate that you want <b>RUI_READ</b> to return immediately whether or not data is available to be read, or set it to zero if you want the verb to wait for data before returning.

<p>
Set <b>lua_flag1.bid_enable</b> to 1 to re-enable the most recent <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> (equivalent to issuing <b>RUI_BID</b> again with exactly the same parameters as before), or set it to zero if you do not want to re-enable <b>RUI_BID</b>. Note that re-enabling the previous <b>RUI_BID</b> reuses the VCB originally allocated for it, so this VCB must not have been freed or modified.

<p>
Set one or more of the following flags to 1 to indicate from which message flow to read data:

<p class=indent1>
<b>lua_flag1.sscp_exp</b></p>

<p class=indent1>
<b>lua_flag1.lu_exp</b></p>

<p class=indent1>
<b>lua_flag1.sscp_norm</b></p>

<p class=indent1>
<b>lua_flag1.lu_norm</b></p>


<p>
If more than one flag is set, the highest-priority data available is returned. The order of priorities (highest first) is: SSCP expedited, LU expedited, SSCP normal, LU normal. The equivalent flag in the <b>lua_flag2</b> group is set to indicate from which flow the data was read. 
</dd>
<dt>
<b>lua_message_type</b></dt>
<dd>
Specifies the type of the inbound or outbound SNA commands and data. Returned parameter. Specifies the type of SNA message indicated to <b>RUI_READ</b>. Possible values are:
<p>
LUA_MESSAGE_TYPE_LU_DATA

<p>
LUA_MESSAGE_TYPE_SSCP_DATA

<p>
LUA_MESSAGE_TYPE_RQR

<p>
LUA_MESSAGE_TYPE_BID

<p>
LUA_MESSAGE_TYPE_BIND

<p>
LUA_MESSAGE_TYPE_BIS

<p>
LUA_MESSAGE_TYPE_CANCEL

<p>
LUA_MESSAGE_TYPE_CHASE

<p>
LUA_MESSAGE_TYPE_CLEAR

<p>
LUA_MESSAGE_TYPE_CRV

<p>
LUA_MESSAGE_TYPE_LUSTAT_LU

<p>
LUA_MESSAGE_TYPE_LUSTAT_SSCP

<p>
LUA_MESSAGE_TYPE_QC

<p>
LUA_MESSAGE_TYPE_QEC

<p>
LUA_MESSAGE_TYPE_RELQ

<p>
LUA_MESSAGE_TYPE_RTR

<p>
LUA_MESSAGE_TYPE_SBI

<p>
LUA_MESSAGE_TYPE_SHUTD

<p>
LUA_MESSAGE_TYPE_SIGNAL

<p>
LUA_MESSAGE_TYPE_SDT

<p>
LUA_MESSAGE_TYPE_STSN

<p>
LUA_MESSAGE_TYPE_UNBIND


<p>
LU_DATA, LUSTAT_LU, LUSTAT_SSCP, and SSCP_DATA are not SNA commands.
</dd>
<dt>
<b>lua_flag2</b></dt>
<dd>
Returned parameter. Contains flags for messages returned by LUA. Its subparameters are as follows:
<dl>
<dt>
<b>lua_flag2.bid_enable</b></dt>
<dd>
Indicates that <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> was successfully re-enabled if set to 1.</dd>
<dt>
<b>lua_flag2.async</b></dt>
<dd>
Indicates that the LUA interface verb completed asynchronously if set to 1.</dd>
<dt>
<b>lua_flag2.sscp_exp </b></dt>
<dd>
Indicates SSCP expedited flow if set to 1.</dd>
<dt>
<b>lua_flag2.sscp_norm</b></dt>
<dd>
Indicates SSCP normal flow if set to 1.</dd>
<dt>
<b>lua_flag2.lu_exp</b></dt>
<dd>
Indicates LU expedited flow if set to 1.</dd>
<dt>
<b>lua_flag2.lu_norm</b></dt>
<dd>
Indicates LU normal flow if set to 1.
</dd>
</dl>
</dd>
<dt>
<b>lua_resv56</b></dt>
<dd>
Reserved and should be set to zero.</dd>
<dt>
<b>lua_encr_decr_option</b></dt>
<dd>
Reserved and should be set to zero.
</dd>
</dl>
<h4>Return Codes</h4>
<dl>
<dt>
LUA_OK</dt>
<dd>
Primary return code; the verb executed successfully.
<dl>
<dt>
LUA_DATA_INCOMPLETE</dt>
<dd>
Secondary return code; <b>RUI_READ</b> was not able to return all of the data received because the application's data buffer (indicated by <b>lua_max_length</b>) was not large enough. Subsequent <b>RUI_READ</b> requests can be issued to retrieve the remaining RUI data. 
<p>
Note that this is not the default behavior for <b>RUI_READ</b> and is only enabled when <b>lua_resv56[3]</b> is set to a nonzero value in the verb control block when calling <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> during session establishment. See Remarks for more details.
</dd>
</dl>
</dd>
<dt>
LUA_CANCELED</dt>
<dd>
Primary return code; the verb did not complete successfully because it was canceled by another verb or by an internal error.
<dl>
<dt>
LUA_PURGED</dt>
<dd>
Secondary return code; <b>RUI_READ</b> has been canceled by <a href="luac03_4joh.htm"><b>RUI_PURGE</b></a>.</dd>
<dt>
LUA_TERMINATED</dt>
<dd>
Secondary return code; <a href="luac03_2c69.htm"><b>RUI_TERM</b></a> was issued while <b>RUI_READ</b> was pending.
</dd>
</dl>
</dd>
<dt>
LUA_PARAMETER_CHECK</dt>
<dd>
Primary return code; the verb did not execute because of a parameter error.
<dl>
<dt>
LUA_BAD_DATA_PTR</dt>
<dd>
Secondary return code; the <b>lua_data_ptr</b> parameter contained an invalid value.</dd>
<dt>
LUA_BAD_SESSION_ID</dt>
<dd>
Secondary return code; an invalid value for <b>lua_sid</b> was specified in the VCB.</dd>
<dt>
LUA_BID_ALREADY_ENABLED</dt>
<dd>
Secondary return code; <b>lua_flag1.bid_enable</b> was set to re-enable <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> but the previous <b>RUI_BID</b> was still in progress.</dd>
<dt>
LUA_DUPLICATE_READ_FLOW</dt>
<dd>
Secondary return code; the flow flags in the <b>lua_flag1</b> group specified one or more session flows for which <b>RUI_READ</b> was already outstanding. Only one <b>RUI_READ</b> at a time can be waiting on each session flow.</dd>
<dt>
LUA_INVALID_FLOW</dt>
<dd>
Secondary return code; none of the <b>lua_flag1</b> flow flags was set. At least one of these flags must be set to 1, to indicate from which flow or flows to read.</dd>
<dt>
LUA_INVALID_POST_HANDLE</dt>
<dd>
Secondary return code; for a Windows NT or Windows 95 system using events as the asynchronous posting method, the Windows LUA VCB does not contain a valid event handle.
<p>
For a Windows version 3.<i>x</i> system, the Windows LUA VCB does not contain the valid procedure address returned by the <b>MakeProcInstance</b> command.

<p>
For OS/2, the Windows LUA VCB does not contain a valid semaphore or queue handle, which is needed when the verb completes asynchronously.
</dd>
<dt>
LUA_NO_PREVIOUS_BID_ENABLED</dt>
<dd>
Secondary return code; <b>lua_flag1.bid_enable</b> was set to re-enable <a href="luac03_8fmp.htm"><b>RUI_BID</b></a>, but there was no previous <b>RUI_BID</b> that could be enabled. (See Remarks for more information.)</dd>
<dt>
LUA_RESERVED_FIELD_NOT_ZERO</dt>
<dd>
Secondary return code; a reserved field in the verb record or a parameter not used by this verb was set to a nonzero value.</dd>
<dt>
LUA_VERB_LENGTH_INVALID</dt>
<dd>
Secondary return code; an LUA verb was issued with the value of <b>lua_verb_length</b> unexpected by LUA.
</dd>
</dl>
</dd>
<dt>
LUA_STATE_CHECK</dt>
<dd>
Primary return code; the verb did not execute because it was issued in an invalid state.
<dl>
<dt>
LUA_NO_RUI_SESSION</dt>
<dd>
Secondary return code; <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> has not yet completed successfully for the LU name specified on <b>RUI_READ</b>.
</dd>
</dl>
</dd>
<dt>
LUA_NEGATIVE_RSP</dt>
<dd>
Primary return code; indicates one of the following two cases, which can be distinguished by the secondary return code:
<ul>
<li>
LUA detected an error in the data received from the host. Instead of passing the received message to the application on <b>RUI_READ</b>, LUA discards the message (and the rest of the chain if it is in a chain), and sends a negative response to the host. LUA informs the application on a subsequent <b>RUI_READ</b> or <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> that a negative response was sent.</li>
<li>
The LUA application previously sent a negative response to a message in the middle of a chain. LUA has purged subsequent messages in this chain, and is now reporting to the application that all messages from the chain have been received and purged.</li>
</ul>

<dl>
<dt>
LUA_SEC_RC</dt>
<dd>
Secondary return code; this parameter is a nonzero secondary return code containing the sense code sent to the host on the negative response. This indicates that LUA detected an error in the host data and sent a negative response to the host. See <a href="luac02_5y1t.htm">SNA Considerations</a> for information on interpreting the sense code values that may be returned.
<p>
A secondary return code of zero indicates that, following a previous <a href="luac03_7uap.htm"><b>RUI_WRITE</b></a> of a negative response to a message in the middle of a chain, LUA has now received and discarded all messages from this chain.

</dd>
</dl>
</dd>
<dt>
LUA_UNSUCCESSFUL</dt>
<dd>
Primary return code; the verb record supplied was valid, but the verb did not complete successfully.
<dl>
<dt>
LUA_DATA_TRUNCATED</dt>
<dd>
Secondary return code; the <b>lua_data_length</b> parameter was smaller than the actual length of data received on the message. Only <b>lua_data_length</b> bytes of data were returned to the verb; the remaining data was discarded. Additional parameters are also returned if this secondary return code is obtained.</dd>
<dt>
LUA_NO_DATA</dt>
<dd>
Secondary return code; <b>lua_flag1.nowait</b> was set to indicate immediate return without waiting for data, and no data was currently available on the specified session flow or flows.</dd>
<dt>
LUA_INVALID_PROCESS</dt>
<dd>
Secondary return code; the OS/2 process that issued this verb was not the same process that issued <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> for this session. Only the process that started a session can issue verbs on that session.
</dd>
</dl>
</dd>
<dt>
LUA_COMM_SUBSYSTEM_ABENDED</dt>
<dd>
Primary return code; indicates one of the following conditions:
<ul>
<li>
The node used by this conversation encountered an ABEND.</li>
<li>
The connection between the TP and the PU 2.1 node was broken (a LAN error).</li>
<li>
The SnaBase at the TP's computer encountered an ABEND.</li>
</ul>
</dd>
<dt>
LUA_SESSION_FAILURE</dt>
<dd>
Primary return code; a required SNA Server component has terminated.
<dl>
<dt>
LUA_LU_COMPONENT_DISCONNECTED</dt>
<dd>
Secondary return code; indicates that the LUA session failed because of a problem with the link service or with the host LU.</dd>
<dt>
LUA_RUI_LOGIC_ERROR</dt>
<dd>
Secondary return code; an internal error was detected within LUA. This error should not occur during normal operation.
</dd>
</dl>
</dd>
<dt>
LUA_INVALID_VERB</dt>
<dd>
Primary return code; either the verb code or the operation code, or both, is invalid. The verb did not execute.</dd>
<dt>
LUA_STACK_TOO_SMALL</dt>
<dd>
Primary return code; the stack size of the application is too small to execute the verb. Increase the stack size of your application.</dd>
<dt>
LUA_COMM_SUBSYSTEM_NOT_LOADED</dt>
<dd>
Primary return code; a required component could not be loaded or has terminated while processing the verb. Thus, communication could not take place. Contact the system administrator for corrective action.</dd>
<dt>
LUA_UNEXPECTED_DOS_ERROR</dt>
<dd>
Primary return code; after issuing an operating system call, an unexpected operating system return code was received and is specified in the secondary return code.
</dd>
</dl>
<h4>Remarks</h4>
<p>
<a href="luac03_37z5.htm"><b>RUI_INIT</b></a> must have completed successfully before <b>RUI_READ</b> is issued.</p>
<p>
While an existing <b>RUI_READ</b> is pending, you can issue another <b>RUI_READ</b> only if it specifies a different session flow or flows from pending <b>RUI_READ</b> verbs; that is, you cannot have more than one <b>RUI_READ</b> outstanding for the same session flow.</p>
<p>
You can specify a particular message flow (LU normal, LU expedited, SSCP normal, or SSCP expedited) from which to read data, or you can specify more than one message flow. You can have multiple <b>RUI_READ</b> verbs outstanding, provided that no two of them specify the same flow.</p>
<p>
Data is received by the application on one of four session flows. The four session flows, from highest to lowest priority are:
<ul>
<li>
SSCP expedited</li>
<li>
LU expedited</li>
<li>
SSCP normal</li>
<li>
LU normal</li>
</ul>
<p>
The data flow type that <b>RUI_READ</b> is to process is specified in the <b>lua_flag1</b> parameter. The application can also specify whether it wants to look at more than one type of data flow. When multiple flow bits are set, the highest priority is received first. When <b>RUI_READ</b> completes processing, <b>lua_flag2</b> indicates the specific type of flow for which data has been received by the Windows LUA application.</p>
<p>
If <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> successfully completes before an <b>RUI_READ</b> is issued, the Windows LUA interface can be instructed to reuse the last <b>RUI_BID</b> verb's VCB. To do this, issue the <b>RUI_READ</b> with <b>lua_flag1.bid_enable</b> set.</p>
<p>
The <b>lua_flag1.bid_enable</b> parameter can be used only if the following are true:
<ul>
<li>
<b>RUI_BID</b> has already been issued successfully and has completed.</li>
<li>
The storage allocated for <b>RUI_BID</b> has not been freed or modified.</li>
<li>
No other <b>RUI_BID</b> is pending.</li>
</ul>
<p>
When using <b>lua_flag1.bid_enable</b>, the <b>RUI_BID</b> storage must not be freed because the last <b>RUI_BID</b> verb's VCB is used. Also, when using <b>lua_flag1.bid_enable</b>, the successful completion of <b>RUI_BID</b> will be posted.</p>
<p>
If <b>RUI_READ</b> is issued with <b>lua_flag1.nowait</b> when no data is available to receive, LUA_NO_DATA will be the secondary return code set by the Windows LUA interface.</p>
<p>
If the data received is longer than <b>lua_max_length</b>, it is truncated; and only <b>lua_max_length</b> bytes of data are returned. The primary return code LUA_UNSUCCESSFUL and the secondary return code LUA_DATA_TRUNCATED are also returned. The RUI library returns as much data as possible to the application's data buffer, but the remaining data in the RUI is discarded and cannot be extracted on subsequent <b>RUI_READ</b> requests. This forces the RUI application to allocate an <b>RUI_READ</b> data buffer large enough to handle the full RU size.</p>
<p>
This default behavior can be changed by setting the value of <b>lua_resv56[3]</b> to a nonzero value in the verb control block when calling <a href="luac03_37z5.htm"><b>RUI_INIT</b></a> during session establishment. In this case, if the data received is longer than <b>lua_max_length</b>, an <b>RUI_READ</b> request will return a primary return code of LUA_OK and a secondary return code of LUA_DATA_INCOMPLETE. An RUI application can then issue new <b>RUI_READ</b> calls and receive the remainder of the data. Note that this enhancement has not been adopted as part of the Microsoft Windows Open Services Architecture (WOSA) LUA API standard and differs from the implementation of RUI by IBM.</p>
<p>
After a message has been read using <b>RUI_READ,</b> it is removed from the incoming message queue and cannot be accessed again. (Note that <a href="luac03_8fmp.htm"><b>RUI_BID</b></a> can be used as a nondestructive read; that is, the application can use it to check the type of data available, but the data remains on the incoming queue and does not need to be used immediately.)</p>
<p>
Pacing can be used on the primary-to-secondary half-session (this is specified in the host configuration), to protect the LUA application from being flooded with messages. If the LUA application is slow to read messages, SNA Server delays the sending of pacing responses to the host to slow it down.</p>
<h4>See Also</h4>
<p>
<a href="luac03_8fmp.htm"><b>RUI_BID</b></a>, <a href="luac03_37z5.htm"><b>RUI_INIT</b></a>, <a href="luac03_2c69.htm"><b>RUI_TERM</b></a>, <a href="luac03_7uap.htm"><b>RUI_WRITE</b></a>, <a href="luac04_7bxd.htm"><b>SLI_OPEN</b></a>, <a href="luac04_75i9.htm"><b>SLI_PURGE</b></a>, <a href="luac04_2nfl.htm"><b>SLI_RECEIVE</b></a>, <a href="luac04_2lr5.htm"><b>SLI_SEND</b></a></p>
<p>&nbsp;</p></body>
</HTML>
