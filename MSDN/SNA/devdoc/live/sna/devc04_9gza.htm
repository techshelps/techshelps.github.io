<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Expanded Information About Message Formats for Open(LINK) Request with SDLC</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_expanded_information_about_message_formats_for_open_link_request_with_sdlc_dev"></a>Expanded Information About Message Formats for Open(LINK) Request with SDLC</h3>
<p>
The following list supplements the information found in the table in <a href="devc04_4qeu.htm"><b>Open(LINK) Request</b></a>. The timers described in the lists are used by an SDLC link service to determine when to retry communication and when to generate outages. Generally, after the time interval specified by the time-out (usually 1000 milliseconds), the communication is retried. The cycle of time-out and retry is repeated until the retry limit is reached. Then an <a href="devc04_4l6e.htm"><b>Outage</b></a> message is sent by the SDLC link service.</p>
<p>
With some timers, there are no communication retries. Such timers simply cycle through the time-out as many times as allowed in the retry limit (without actually retrying), then generate an <b>Outage</b> message.</p>
<p>
Each description indicates whether you can configure the field through an SNA Server interface (such as the SNA Server Manager program). If the field is not configurable, the built-in setting for the field is shown.</p>
<p>
For information about configuring with SNA Server Manager, see the <i>Microsoft SNA Server Administration Guide</i> or the SNA Server Manager Help.</p>
<h4>SDLC LINK DATA</h4>
<dl>
<dt>
<b>dataru[s+22]XID supplied</b></dt>
<dd>
This field controls whether an initial XID is sent on this connection. The value used is determined by the leased/switched setting for the line:
<p>
<b>Leased line:</b> 0x00  Do not send an initial XID<br>
<b>Switched line:</b> 0x01  Send an initial XID (may be a NULL XID)

<p>
A line is configured as leased or switched in SNA Server Setup.
</dd>
<dt>
<b>dataru[s+24]Use Reject_Command indicator</b></dt>
<dd>
This field determines that the link service will not send a Reject command (an SDLC command, not often used, value 0x19) if a frame is received with an invalid NS (next-to-send) value. Instead, the link service waits until the next poll before requesting retransmission of the frame.
<p>
This field is not configurable and must remain at the setting of "Do not use."

</dd>
</dl>
<h4>STATION TIMERS (described for SDLC only)</h4>
<dl>
<dt>
<b>dataru[s+28..s+29]Contact time-out</b></dt>
<dt>
<b>dataru[s+30..s+31]Contact retry limit</b></dt>
<dd>
This timer is started when an XID or set normal response mode (SNRM) is transmitted. If the time-out expires without acknowledgment, the frame is retransmitted. When the number of retransmitted frames reaches the retry limit, an outage is generated. Note that for XIDs, the time-out value is randomized to prevent possible clashes between two servers sending XIDs simultaneously.
<p>
This timer is configurable in SNA Server Manager, in the advanced settings for an SDLC connection.
</dd>
<dt>
<b>dataru[s+32..s+33]Discontact time-out</b></dt>
<dt>
<b>dataru[s+34..s+35]Discontact retry limit</b></dt>
<dd>
This timer is started when a discontact (DISC) is sent. It is stopped when an unnumbered acknowledgment (UA) or disconnect mode (DM) is received. If the number of sent DISCs reaches the retry limit, an outage is generated.
<p>
This timer is not configurable. The discontact time-out is 1000 milliseconds; the discontact retry limit is 3.
</dd>
<dt>
<b>dataru[s+36..s+37]Negative poll time-out</b></dt>
<dt>
<b>dataru[s+38..s+39]Negative poll retry limit</b></dt>
<dd>
This timer is used for primary SDLC only. At intervals specified by the negative poll time-out, a receive ready (RR) is transmitted. The negative poll retry limit is set at no limit; therefore, no outage is generated, no matter how many RRs are transmitted without acknowledgment being received.
<p>
The negative poll time-out is configurable in SNA Server Manager, in the advanced settings for an SDLC connection, where the time-out is called poll rate. Poll rate is set in polls per second (and translated internally into the negative poll time-out, timed in milliseconds).

<p>
The negative poll retry limit is not configurable. It is set at –1, meaning no limit.
</dd>
<dt>
<b>dataru[s+40..s+41]T1 (no acknowledgment) time-out</b></dt>
<dt>
<b>dataru[s+42..s+43]N2 (no acknowledgment) retry limit</b></dt>
<dd>
This timer is used for primary SDLC and is started when a poll/final bit is expected. If the time-out expires before a frame containing a poll/final bit is received, an RR is sent. When the number of sent RRs reaches the retry limit, an outage is generated.
<p>
This timer is configurable in SNA Server Manager, in the advanced settings for an SDLC connection, where it is called the poll time-out and poll retry limit.
</dd>
<dt>
<b>dataru[s+44..s+45]Remote station busy time-out</b></dt>
<dt>
<b>dataru[s+46..s+47]Remote station busy retry limit</b></dt>
<dd>
This timer is used for primary SDLC and is started when a receive not ready (RNR) is received. It is stopped when an RR is received. If the time-out expires the number of times specified by the retry limit, an outage is generated.
<p>
This timer is not configurable. The remote station busy time-out is 1000 milliseconds; the remote station busy retry limit is 30. Therefore, the time allowed before an outage is 30 seconds.

</dd>
</dl>
<h4>LINK TIMERS (described for SDLC only)</h4>
<dl>
<dt>
<b>dataru[s+48..s+49]Idle time-out</b></dt>
<dt>
<b>dataru[s+50..s+51]Idle retry limit</b></dt>
<dd>
This timer is configurable in SNA Server Manager, in the advanced settings for an SDLC connection.</dd>
<dt>
<b>dataru[s+52..s+53]Nonproductive receive time-out</b></dt>
<dt>
<b>dataru[s+54..s+55]Nonproductive receive retry limit</b></dt>
<dd>
This timer is used for secondary SDLC only and is started when any frame is received for this station. It is stopped when additional frames are received for this station. If the time-out expires the number of times specified by the retry limit, the link service causes a pop-up message, but does not generate an outage (because multidrop lines can be very slow).
<p>
This timer is not configurable. The nonproductive receive time-out is 1000 milliseconds (1 second); the nonproductive receive retry limit is 60. Therefore, the time allowed before a pop-up message is 60 seconds.
</dd>
<dt>
<b>dataru[s+56..s+57]Write time-out</b></dt>
<dt>
<b>dataru[s+58..s+59]Write retry limit</b></dt>
<dd>
This timer is started after an information frame has been transmitted to the hardware and stopped when the hardware acknowledges the frame. If the time-out expires the number of times specified by the retry limit, an outage is generated.
<p>
This timer is not configurable. The write time-out is 1000 milliseconds (one second); the write retry limit is 15. Therefore, the time allowed before an outage is 15 seconds.
</dd>
<dt>
<b>dataru[s+60..s+61] Link connection time-out</b></dt>
<dt>
<b>dataru[s+62..s+63] Link connection retry limit</b></dt>
<dd>
This timer is started when an open link for a leased line is received, and stopped when data set ready (DSR) is raised. If the time-out expires the number of times specified by the retry limit, an outage is generated.
<p>
This timer is not configurable. The link connection time-out is 1000 milliseconds (one second); the link connection retry limit is 300. Therefore, the time allowed before an outage is 300 seconds.


<table cellspacing=4 cols=3>
<tr valign=top>
<td colspan=3 width=100%><b>X.25 LINK DATA</b></td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+22]</b></td>
<td width=19%></td>
<td width=50%>Circuit type<br>
0x00 PVC<br>
0x01 SVC</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+23]</b></td>
<td width=19%></td>
<td width=50%>PVC alias, starting at 1 for lowest PVC channel number (reserved for SVC)</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+24..s+25]</b></td>
<td width=19%></td>
<td width=50%>PVC packet size (reserved for SVC)</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+26]</b></td>
<td width=19%></td>
<td width=50%>Default level 3 window size for PVC (reserved for SVC)</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+27]</b></td>
<td width=19%></td>
<td width=50%>Link role<br>
0x00 Primary<br>
0x01 Secondary<br>
0x02 Negotiable</td>
</tr>
<tr valign=top>
<td colspan=3 width=100%><b>802.2 LINK DATA</b></td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+22]</b></td>
<td width=19%></td>
<td width=50%>Maximum receives without a transmit acknowledgment</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+23]</b></td>
<td width=19%></td>
<td width=50%>Maximum transmits without a receive acknowledgment</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+24]</b></td>
<td width=19%></td>
<td width=50%>Dynamic window increment value</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+25]</b></td>
<td width=19%></td>
<td width=50%>Remote SAP address</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+26]</b></td>
<td width=19%></td>
<td width=50%>Local SAP address (for incoming calls)</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+27]</b></td>
<td width=19%></td>
<td width=50%>Value for t1 timer multiplier</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+31]</b></td>
<td width=19%></td>
<td width=50%>Value for t2 timer multiplier</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+35]</b></td>
<td width=19%></td>
<td width=50%>Value for t3 timer multiplier</td>
</tr>
<tr valign=top>
<td colspan=3 width=100%>Note that if the above fields for timer multipliers are set to zero, the SNALink should use appropriate defaults</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+42]</b></td>
<td width=19%></td>
<td width=50%>Maximum retry count (N2 Value)</td>
</tr>
<tr valign=top>
<td colspan=3 width=100%>Note that this 802.2 link data is required for the 802.2 command DLC.OPEN.STATION</td>
</tr>
</table><br>


<table cellspacing=4 cols=3>
<tr valign=top>
<td colspan=3 width=100%><b>END OF LINK DATA SECTION</b></td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+68..s+69]</b></td>
<td width=19%></td>
<td width=50%>Length of link connection data (= a)<br>
(0x0000) None present</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+70..s+70+a]</b></td>
<td width=19%></td>
<td width=50%>Link connection data</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+70+b..s+71+b]</b></td>
<td width=19%></td>
<td width=50%>Where b is maximum of a and 20.<br>
Size of XID I-frame (= n)<br>
(0x0000) NULL XID</td>
</tr>
<tr valign=top>
<td width=31%><b>dataru[s+72+b]</b></td>
<td width=19%></td>
<td width=50%>XID</td>
</tr>
<tr valign=top>
<td colspan=3 width=100%>Note that if there are 20 or fewer bytes of link connection data, the XID length is at s+90 and the actual XID starts at s+92</td>
</tr>
</table><br>

</dd>
</dl>
<p>
The link connection data can contain one of the following:
<ul>
<li>
MAC address of remote station</li>
<li>
X.25 address of remote station</li>
<li>
Dial-digits for manual or auto-dial modems</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
