<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Driver Interface</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_the_driver_interface_dev"></a>The Driver Interface</h1>
<p>
Application software running on Microsoft® Windows NT® normally does not interact directly with device drivers. Usually, the operating system itself controls the interface to underlying device drivers on behalf of the application. For example, Disk I/O consists of sequences of driver requests generated by a file system, as a result of an application making file system requests.</p>
<p>
By contrast, in the Microsoft® SNA Server device driver model, synchronous dumb cards are controlled directly by the SNALink using input and output control (IOCTL) commands. This mechanism allows the SNALink to pass raw control packets to the driver without any intervention from the operating system.</p>
<p>
This is achieved by issuing an Open request with a file name that identifies the device driver. The operating system detects the fact that this file is in fact a driver and passes an OPEN I/O request packet to the driver. The user application is returned a handle that can be used to reference the driver.</p>
<p>
The IBMSYNC driver creates various device names. During setup, the configuration for adapters in the computer is saved in the registry; when the driver starts up, it reads this data and creates the device names for all the adapters that are found.</p>
<p>
The following table lists the device names that the IBMSYNC driver can create.</p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=28%>Device name</th>
<th align=left width=72%>Description</th>
</tr>
<tr valign=top>
<td width=28%>\Device\IBMSDLC</td>
<td width=72%>Standard IBM SDLC adapter.</td>
</tr>
<tr valign=top>
<td width=28%>\Device\MPCA_1</td>
<td width=72%>IBM MPCA 1 adapter. This adapter has a switch set on it to enforce MPCA 1 operation. This adapter is the primary MPCA adapter in the computer and supports DMA interrupt mode.</td>
</tr>
<tr valign=top>
<td width=28%>\Device\MPCA_2</td>
<td width=72%>IBM MPCA 2 adapter. This adapter has a switch set on it to enforce MPCA 2 operation. This adapter is the secondary MPCA adapter in the computer and supports only interrupt mode.</td>
</tr>
<tr valign=top>
<td width=28%>\Device\SYNC_<i>x</i></td>
<td width=72%>Generic adapter (for example, Microgate). The letter <i>x</i> is 1 (for the primary adapter) or 2 (for the secondary adapter).</td>
</tr>
<tr valign=top>
<td width=28%>\Device\MPAA_S<i>x</i></td>
<td width=72%>IBM MPAA adapter, where <i>x</i> represents the number of the MCA slot where the adapter is installed in the computer. This number is a value from 1 through 8.</td>
</tr>
<tr valign=top>
<td width=28%>\Device\SYNC_S<i>x</i></td>
<td width=72%>Generic MPAA adapter (for example, the Microgate MPAA adapter). The letter <i>x</i> represents the number of the MCA slot where the adapter is installed in the computer. This number is a value from 1 through 8.</td>
</tr>
</table><br>
<p>
Subsequent IOCTL calls (using <b>DeviceIOControl</b> under Windows NT) made by the SNALink using the driver handle cause the operating system to pass an IOCTL I/O request packet to the driver. The driver therefore sees IOCTL requests from the SNALink as a series of I/O request packets passed to it by the operating system.</p>
<p>
The SNA Server dumb card interface uses the following operating system calls:</p>
<p class=indent1>
<b>OpenFile</b></p>
<p class=indent1>
<b>DeviceIOControl</b></p>
<p class=indent1>
<b>CloseFile</b></p>
<p>
<b>DeviceIOControl</b> allows free-format information to be passed to the driver. The dumb card interface uses its own format of information to pass all requests to the driver (with the exception of Open and Close requests, which are handled differently by the operating system).</p>
<p>&nbsp;</p></body>
</HTML>
