<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Remotely Initiated Conversations</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_sna_remotely_initiated_conversations_appc"></a>Remotely Initiated Conversations</h3>
<p>
Applications wishing to receive remotely initiated conversations (incoming Attaches) issue a <a href="appc05b_0m77.htm"><b>RECEIVE_ALLOCATE</b></a> verb. To accommodate Sync Point support, the <b>RECEIVE_ALLOCATE</b> verb is modified in a number of ways as follows:
<ul>
<li>
The returned <b>sync_level</b> parameter of the <b>RECEIVE_ALLOCATE</b> verb can take on a value of AP_SYNCPT, specifying that the conversation is a Sync Point conversation. The value of the <b>sync_level</b> parameter can also be determined by issuing a <a href="appc05a_5o0z.htm"><b>GET_ATTRIBUTES</b></a> verb on the new conversation.</li>
<li>
Support is added for the receipt of program initiation parameters (PIP) data by a new parameter to the <b>RECEIVE_ALLOCATE</b> verb:<p>
The <b>pip_incoming</b> parameter is set by the application to indicate whether it is willing to accept incoming PIP data, and is returned by SNA Server to indicate whether PIP data is available to be received. If the application does not wish to receive PIP data, this member should be set to AP_NO, the default, before issuing the <b>RECEIVE_ALLOCATE</b> verb. If it is willing to accept PIP data, this member should be set to AP_YES. On completion of the <b>RECEIVE_ALLOCATE</b> verb, this member will be set to AP_YES if PIP data is available to be received by the application, and to AP_NO otherwise.
</li>
<li>
If PIP data is available, the application can receive it by issuing one of the verbs for receiving data on completion of the <a href="appc05b_0m77.htm"><b>RECEIVE_ALLOCATE</b></a> verb. For basic conversations, these receive verbs include <a href="appc05b_92oz.htm"><b>RECEIVE_AND_POST</b></a>, <a href="appc05b_19er.htm"><b>RECEIVE_AND_WAIT</b></a>, and <a href="appc05b_5tnn.htm"><b>RECEIVE_IMMEDIATE</b></a>. On basic conversations the PIP data will be returned inclusive of the general data stream (GDS) header for PIP data (GDS identifier 0x12F5). For mapped conversations, these receive verbs include <a href="appc05a_3jvn.htm"><b>MC_RECEIVE_AND_POST</b></a>, <a href="appc05a_5qlf.htm"><b>MC_RECEIVE_AND_WAIT</b></a>, and <a href="appc05a_2dib.htm"><b>MC_RECEIVE_IMMEDIATE</b></a>. On mapped conversations, SNA Server removes the 4-byte GDS header, and returns the PIP data only.</li>
<li>
For basic conversations, if the application issues a <a href="appc05b_1azn.htm"><b>SEND_ERROR</b></a>, <a href="appc05a_4ndv.htm"><b>DEALLOCATE</b></a>, or <a href="appc04_8k0z.htm"><b>TP_ENDED</b></a> verb before the PIP data is received, the PIP data will be discarded. For mapped conversations, if the application issues an <a href="appc05b_1c6b.htm"><b>MC_SEND_ERROR</b></a>, <a href="appc05a_4okj.htm"><b>MC_DEALLOCATE</b></a>, or <b>TP_ENDED</b> verb before the PIP data is received, the PIP data will be discarded.</li>
<li>
If PIP data is received for a TP that cannot or does not want to receive it, the conversation is rejected with a primary return code of AP_ALLOCATION_ERROR, and a secondary return code of AP_PIP_NOT_ALLOWED.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
