<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Data</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_sna_data_3270"></a>Data</h1>
<p>
<b>Data</b> messages carry both inbound and outbound data between the application and the local node on all three connections. See <a href="3270c3_2gds.htm">Data Flow</a> for a detailed description of outbound and inbound data flows.</p>
<p>
The <b>Data</b> message flows from the node to the application and from the application to the node. It is used with both the SSCP and the PLU connections.</p>
<pre><code>struct Data {
    PTRBFHDR  nxtqptr;
    PTRBFELT  hdreptr;
    CHAR      numelts;
    CHAR      msgtype;
    CHAR      srcl;
    CHAR      srcp;
    INTEGER   srci;
    CHAR      destl;
    CHAR      destp;
    INTEGER   desti;
    CHAR      dfhdr.fhackrqd;
    CHAR      dfhdr.fhpad1;
    INTEGER   dfhdr.fhmsgkey;
    CHAR      dfhdr.fhflags1;
    CHAR      dfhdr.fhflags2;
    INTEGER   dfhdr.fhpad2;
    INTEGER   dfhdr.fhpad3;
    INTEGER   dfhdr.fhseqno;
}; 
 </code></pre>
<p>
<b>Element</b></p>
<pre><code>struct Data {
    PTRBFELT   hdreptr-&gt;elteptr<b>;
    </b>INTEGER    hdreptr-&gt;startd<b>;
    </b>INTEGER    hdreptr-&gt;endd<b>;
</b>    CHAR       hdreptr-&gt;trpad;<b>
</b>    CHAR[268]  hdreptr-&gt;dataru;
}; 
 </code></pre>
<h4>Members</h4>
<dl>
<dt>
<b>nxtqptr</b></dt>
<dd>
Pointer to next buffer header.</dd>
<dt>
<b>hdreptr</b></dt>
<dd>
Pointer to buffer element.</dd>
<dt>
<b>numelts</b></dt>
<dd>
Number of buffer elements.</dd>
<dt>
<b>msgtype</b></dt>
<dd>
Message type DATAFMI (0x20).</dd>
<dt>
<b>srcl</b></dt>
<dd>
Source locality.</dd>
<dt>
<b>srcp</b></dt>
<dd>
Source partner.</dd>
<dt>
<b>srci</b></dt>
<dd>
Source index.</dd>
<dt>
<b>destl</b></dt>
<dd>
Destination locality.</dd>
<dt>
<b>destp</b></dt>
<dd>
Destination partner.</dd>
<dt>
desti</dt>
<dd>
Destination index.</dd>
<dt>
<b>dfhdr.fhackrqd</b></dt>
<dd>
Acknowledgment required indicator
<p>
NOACKREQ    (0x00)<br>
ACKREQ         (0x01)
</dd>
<dt>
<b>dfhdr.fhpad1</b></dt>
<dd>
Reserved.</dd>
<dt>
<b>dfhdr.fhmsgkey</b></dt>
<dd>
Message key.</dd>
<dt>
<b>dfhdr.fhflags1</b></dt>
<dd>
Application flag 1.</dd>
<dt>
<b>dfhdr.fhflags2</b></dt>
<dd>
Application flag 2.</dd>
<dt>
<b>dfhdr.fhpad2</b></dt>
<dd>
Reserved.</dd>
<dt>
<b>dfhdr.fhpad3</b></dt>
<dd>
Reserved.</dd>
<dt>
<b>dfhdr.fhseqno</b></dt>
<dd>
Sequence number.
</dd>
</dl>
<p>
<b>Element</b>
<dl>
<dt>
<b>hdreptr–&gt;elteptr</b></dt>
<dd>
Pointer to buffer element.</dd>
<dt>
<b>hdreptr–&gt;startd</b></dt>
<dd>
Start of data in this buffer element:
<p>
Non-LUA: 13, or 10 for second and subsequent segments of outbound segmented RUs.<br>
LUA, inbound data: 4 in first element, 13 in subsequent elements.
</dd>
<dt>
<b>hdreptr–&gt;endd</b></dt>
<dd>
End of data in this buffer element.</dd>
<dt>
<b>hdreptr–&gt;trpad</b></dt>
<dd>
Reserved.</dd>
<dt>
<b>hdreptr–&gt;dataru</b></dt>
<dd>
Data RU.
</dd>
</dl>
<h4>Remarks</h4>
<ul>
<li>
The use of the acknowledgment required indicator in both inbound and outbound data acknowledgment protocols is described in <a href="3270c3_2gds.htm">Data Flow</a>.</li>
<li>
The use of the application flag fields is described in <a href="3270c3_74vk.htm">Application Flags</a> (see note below for LUA).</li>
<li>
The sequence number is undefined for inbound data but contains the corresponding SNA sequence number for outbound data.</li>
<li>
If the application is using the LUA variant of the FMI (see <a href="3270c3_886o.htm">FMI Concepts</a>), the TH and (if appropriate) RH are included in the data, and the <b>startd</b> field points to the TH. The <b>fhmsgkey</b>, <b>fhflags1</b>, <b>fhflags2</b>, and <b>fhseqno</b> fields are undefined and should not be used; the corresponding data from the element should be used instead.</li>
</ul>
<p>&nbsp;</p></body>
</HTML>
