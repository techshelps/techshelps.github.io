<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Opening the PLU Connection</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_opening_the_plu_connection_3270"></a>Opening the PLU Connection</h2>
<p>
The opening of the PLU connection is closely associated with the establishment of the PLU session. The local node opens the PLU connection when it receives a BIND command from the host for an LU for which an application has previously opened an SSCP connection. Possible sequences are:
<ul>
<li>
An application opens its SSCP connection and sends a character-coded logon request or INIT-SELF request to the host SSCP. A host PLU subsequently sends a BIND request to the SNA Server LU, and the local node opens the PLU connection.</li>
<li>
A host PLU sends an unsolicited BIND command to the SNA Server LU. If the SSCP connection for the LU is open, the local node opens the PLU connection. If the local node is supporting NOTIFY, then the host can be configured to send a BIND when it receives the NOTIFY message sent by the local node when the application opens its SSCP connection (see <a href="3270c3_0os0.htm">The SSCP Connection</a>).</li>
<li>
A host PLU sends a BIND command to the SNA Server LU. If the SSCP connection for the LU is not open, the local node returns a negative response to the BIND request. The sense code used is 0x0845 (NOTIFY will be sent). The local node does not open the PLU connection. In this case the local node sends NOTIFY when the SSCP connection is opened (see The SSCP Connection).</li>
</ul>
<p>
To successfully open the PLU connection, the local node sends an <a href="3270c4_0gvk.htm"><b>Open(PLU) Request</b></a> to the application. The application responds with an <a href="3270c4_07lc.htm"><b>Open(PLU) (OK) Response</b></a>. Finally the local node sends an <a href="3270c4_6e40.htm"><b>Open(PLU) (OK) Confirm</b></a> to the application. This exchange of messages opens the PLU connection and establishes the PLU session. It should be noted that a successful PLU opening sequence is a "three-way handshake," in comparison to the opening of the SSCP connection, which is a "two-way handshake."</p>
<p>
The <b>Open(PLU) Request</b> is delivered to the application using the SSCP connection for the LU. The <b>Open(PLU) Request</b> contains the application name and open resource identifier to allow applications to correlate the PLU and SSCP connections.</p>
<p>
The <b>Open(PLU) Request</b> indicates the logical unit that the BIND request was directed to, references the resource identifier supplied in the <a href="3270c4_4jcg.htm"><b>Open(SSCP) Request</b></a> for that LU, and carries the actual BIND RU received from the host (see <a href="3270c4_0yy8.htm">Open(PLU)</a>). It also carries the maximum RU sizes, chunk sizes (if appropriate), and pacing windows for the PLU session, to enable the application to determine the initial credit if it wishes to be involved in outbound pacing (see <a href="3270c3_30q8.htm">Pacing and Chunking</a>).</p>
<p>
The message flow for a successful opening of the PLU connection (on receipt of a nonnegotiable BIND) is shown in the following figure. Note that the BIND parameters are verified (at [1]) only when the application has supplied the BIND check table index as part of the CICB.</p>
<p>
<img src="images/32703f.gif" border=0></p>
<p>
The following figure shows the message sequence for the initiation of both the SSCP and PLU sessions, including details of where the LPI values are assigned. (The application's source P value of 0x12 indicates that it is a 3270 emulator; see <a href="3270c4_4jcg.htm"><b>Open(SSCP) Request</b></a> for more details of how the source LPI values are set.) The message flow shown assumes that the connection to the host is already established and that both the configuration and the BIND are valid.</p>
<p>
After this message sequence, there are two valid sets of LPI values, one for the SSCP session and one for the PLU session. The application can access either session at any time until UNBIND and can use the LPI values to distinguish between received data on the two sessions.</p>
<p>
<img src="images/32703fa.gif" border=0></p>
<p>&nbsp;</p></body>
</HTML>
