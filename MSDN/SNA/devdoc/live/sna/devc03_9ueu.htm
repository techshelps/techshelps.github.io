<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Opening the LINK LPI Connection</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_sna_opening_the_link_lpi_connection_dev"></a>Opening the LINK LPI Connection</h2>
<p>
The local node attempts to activate a connection:
<ul>
<li>
During system initialization if the connection is configured as initially active.</li>
<li>
If the system administrator manually activates the connection.</li>
<li>
If a 3270 or LU 6.2 session is requested when there is no active connection to support the LU, and the connection is configured to be activated on demand.</li>
</ul>
<p>
For each connection to be activated, the local node opens a LINK LPI connection by sending an <a href="devc04_4qeu.htm"><b>Open(LINK) Request</b></a> to the SNALink. This message contains configuration data such as:
<ul>
<li>
SDLC line type: leased, switched.</li>
<li>
Operational role: primary, secondary, or negotiable.</li>
<li>
Time-out values.</li>
<li>
Retry limit values.</li>
<li>
Line speed.</li>
<li>
Half-duplex/full-duplex.</li>
<li>
802.2 remote service access point (SAP) address.</li>
<li>
X.25 facility data.</li>
</ul>
<p>
For incoming calls, the local node primes the SNALink by opening the LINK LPI connection, but does not perform an activation sequence at this stage (see <a href="devc03_5j5i.htm">Incoming Call Support</a>).</p>
<p>
The local node also inserts the first XID frame to be used (where applicable) and link connection data to be used on a switched link. The link connection data can be:
<ul>
<li>
A telephone number for a manual or auto-dial modem (in this case, the SNALink software could dial the required number or send a message to the operator specifying the number to be dialed).</li>
<li>
The media access control (MAC) address of the remote station.</li>
<li>
The X.25 remote data terminal equipment (DTE) address.</li>
</ul>
<p>
Finally, the <b>Open(LINK)</b> contains various time-out values that should be used by the SNALink when setting up protocol timers. See <a href="devc04_4qeu.htm"><b>Open(LINK) Request</b></a> and <a href="devc04_4cs6.htm"><b>Open(LINK) Response</b></a>.</p>
<p>
The SNALink should return an <b>Open(LINK) OK Response</b> if:
<ul>
<li>
Its internal control blocks are successfully initialized.</li>
<li>
Its device driver has installed correctly.</li>
<li>
Its link hardware is successfully initialized.</li>
</ul>
<p>
The SNALink should not wait for an end-to-end connection before giving an <b>Open(LINK) Response</b>.</p>
<p>
If the SNALink has successfully initialized, it should return an <b>Open(LINK) OK Response</b> immediately, supplying the required link-specific configuration information to the node (such as the maximum BTU size it can support). The local node will use this information during XID negotiation with the remote station.</p>
<p>
If the SNALink cannot initialize successfully, it responds with an <b>Open(LINK) Error Response</b> containing an error code. The error is logged and the local node notifies the system operator before retrying the link activation.</p>
<p>
If an XID is supplied on the <b>Open(LINK) Request</b>, this should be sent when the end-to-end connection is established for a primary or negotiable link. Note that the supplied XID can be a NULL XID, which has a zero length. Hence, it is important that the OPINIXID field is examined rather than checking for a zero XID length. An XID will be supplied for all connections except primary leased connections (which could be multipoint).</p>
<p>
When an SNALink receives an XID frame from the remote station, it is passed to the local node in a <a href="devc04_977a.htm"><b>Request-Open-Station</b></a> message on the LINK LPI connection.</p>
<p>
If the SNALink fails to receive any frames from the remote station, it generates an <a href="devc04_4l6e.htm"><b>Outage</b></a> message as described in <a href="devc03_9bqu.htm">Closing a Connection</a>.</p>
<p>
The following figure shows the <b>Open(LINK) Request</b> and <b>Open(LINK) Response</b>, followed by an exchange of XIDs.</p>
<p>
<img src="images/dev3a.gif" border=0></p>
<p>&nbsp;</p></body>
</HTML>
