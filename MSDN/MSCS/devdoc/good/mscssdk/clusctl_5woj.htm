<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CLUSCTL_RESOURCE_GET_CHARACTERISTICS</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_wolf_clusctl_resource_get_characteristics"></a>CLUSCTL_RESOURCE_GET_CHARACTERISTICS</h2>
<p>
The CLUSCTL_RESOURCE_GET_CHARACTERISTICS control code is used to request the intrinsic characteristics of a resource. </p>
<h4>Quick Info</h4>
<table cellspacing=4 cols=2>
<tr valign=top>
<td width=37%>Type:</td>
<td width=63%>External</td>
</tr>
<tr valign=top>
<td width=37%>Access:</td>
<td width=63%>CLUS_ACCESS_READ</td>
</tr>
<tr valign=top>
<td width=37%>Input:</td>
<td width=63%>None</td>
</tr>
<tr valign=top>
<td width=37%>Output:</td>
<td width=63%>DWORD bitmask</td>
</tr>
<tr valign=top>
<td width=37%>Global:</td>
<td width=63%>CLUS_NOT_GLOBAL</td>
</tr>
<tr valign=top>
<td width=37%>Modify:</td>
<td width=63%>CLUS_NO_MODIFY</td>
</tr>
<tr valign=top>
<td width=37%>Code:</td>
<td width=63%>CLCTL_GET_CHARACTERISTICS</td>
</tr>
</table><br>
<h4>Notes to Callers</h4>
<p>
The <i>lpOutBuffer</i> parameter of <b>ClusterResourceControl</b> points to a bitmask that describes the resource's characteristics. The bits can be set to one or more of the following values: </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=42%>CHARACTERISTICS value</th>
<th align=left width=58%>Description</th>
</tr>
<tr valign=top>
<td width=42%>CLUS_CHAR_UNKNOWN</td>
<td width=58%>Resource has no known characteristics.</td>
</tr>
<tr valign=top>
<td width=42%>CLUS_CHAR_QUORUM</td>
<td width=58%>Resource is capable of being the <a href="wfintro_81t1.htm">quorum resource</a> for a cluster.</td>
</tr>
<tr valign=top>
<td width=42%>CLUS_CHAR_DELETE_<br>
REQUIRES_ALL_NODES</td>
<td width=58%>Resource requires delete notification on all nodes.</td>
</tr>
</table><br>
<p>
Cluster Server's Physical Disk resources return CLUS_CHAR_QUORUM and CLUS_CHAR_DELETE_REQUIRES_ALL_NODES from a CLUSCTL_RESOURCE_GET_CHARACTERISTICS control code request. </p>
<h4>Notes to Resource DLL Writers</h4>
<p>
If you do not handle the CLUSCTL_RESOURCE_GET_CHARACTERISTICS control code in your <a href="resapi_0w8c.htm"><b>ResourceControl</b></a> entry point function, return ERROR_INVALID_FUNCTION. The Resource Monitor will read the Characteristics value from the resource's key in the cluster database. </p>
<p>
If you do support CLUSCTL_RESOURCE_GET_CHARACTERISTICS, return a value that accurately describes your resource. A resource DLL that manages resources incapable of functioning as quorum resources must not, for example, return CLUS_CHAR_QUORUM. Doing so can cause the cluster to become unusable if a resource of the type managed by the resource DLL is chosen as the quorum resource. Likewise, when a resource DLL for quorum resources does not set the CLUS_CHAR_QUORUM bit, its resources will not be able to be selected as quorum resources. </p>
<p>
Setting CLUS_CHAR_DELETE_REQUIRES_ALL_NODES indicates that all nodes must be online before a resource handled by your resource DLL can be deleted. The reason for the advance warning is to provide your DLL with the opportunity to remove any information from one or more nodes. For example, if your resource DLL stores data in a portion of the cluster database or in an alternate location, you will probably want to return the CLUS_CHAR_DELETE_REQUIRES_ALL_NODES as a characteristic so that you receive the delete notification. The Cluster Service notifies a resource DLL by calling its <b>ResourceControl</b> function with the <a href="clusctl_4j8l.htm">CLUSCTL_RESOURCE_DELETE</a>control code. Note that you can get these notifications regardless of whether the CLUS_CHAR_DELETE_REQUIRES_ALL_NODES characteristic bit is set; setting the bit guarantees it.</p>
<p>
When a resource DLL returns the CLUS_CHAR_DELETE_REQUIRES_ALL_NODES characteristic, all nodes must be online in order for resources of that type to be deleted. If all nodes are not online, the delete attempt fails and the <b>DeleteClusterResource</b> function returns ERROR_HOST_NODE_NOT_AVAILABLE.</p>
<p>&nbsp;</p></body>
</HTML>
