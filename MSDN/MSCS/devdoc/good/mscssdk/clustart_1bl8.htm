<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Debugging a Resource DLL</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_wolf_debugging_a_resource_dll"></a>Debugging a Resource DLL</h2>
<p>
When you debug a resource DLL, you are debugging both the resource type and the resources that belong to the resource type. </p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To debug a resource type</h5>
<ul>
<li>
Set the resource type's <a href="cluprops_91gz.htm">DebugControlFunctions</a> property to TRUE.</li>
<li>
Set the resource type's <a href="cluprops_3k1f.htm">DebugPrefix</a> property to the path to your debugger. </li>
</ul>
<p>
When your <a href="resapi_0q0c.htm"><b>ResourceTypeControl</b></a> entry point function is called, the Cluster Service checks the settings for these properties. If DebugControlFunction is set to TRUE and DebugPrefix contains a valid path, the Cluster Service creates a new Resource Monitor process for <b>ResourceTypeControl</b> and attaches the specified debugger to it.</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To debug a resource DLL</h5>
<ol>
<li>
Register the <b>DebugEx</b> Cluster Administrator DLL. </li>
<li>
Start Cluster Administrator.</li>
<li>
Create a new resource of the type supported by your resource DLL. Specify that the resource should run in a separate Resource Monitor. A dedicated Resource Monitor is required during debugging to help you isolate problems and insure that other resources remain unaffected by those problems. </li>
<li>
View the properties of the new resource by choosing <b>Properties</b> from the <b>File</b> menu after selecting the new resource.</li>
<li>
Click the <b>Debug</b> tab.</li>
<li>
In the Debug Command Prefix edit control, type the full path to your debugger. For example, if you are using MSDEV, type "c:\msdev\bin\msdev.exe."</li>
<li>
Press the <b>OK</b> button.</li>
<li>
Stop the Cluster Service by typing "net stop clussvc."</li>
<li>
Start the Cluster Service locally by typing the following command from the cluster directory:<pre><code>start clussvc -debug</code></pre>
<p>
This command will cause a command box to be displayed with the output from the Cluster Service. As soon as the Cluster Service starts, it will start the Resource Monitor with your resource in it and attach your debugger to it. At that point you will see MSDEV being invoked. You can now set breakpoints in the DLL, such as SmbSampleOnlineThread.
</li>
</ol>
<p>&nbsp;</p></body>
</HTML>
