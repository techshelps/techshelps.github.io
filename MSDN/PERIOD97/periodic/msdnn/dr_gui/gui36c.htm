<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text-html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>That's a nasty COFF you have there</title>
<meta name=MS-HAID content="msdn_gui36c">

<meta name=href content="msdn_ie4.css">                
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>
<BODY BGCOLOR=#FFFFFF TEXT=#000000>

<font face="verdana,arial,helvetica" size="2"><form name=x><object name=iv classid="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016">
</object></form>
<h1><a name="msdn_gui36c"></a>That's a nasty COFF you have there</h1>
<p>
<b>Dear Dr. GUI,</b></p>
<p>
We distribute Microsoft Win32 software in OBJ/LIB format. Is possible to remove the Common Object File Format (COFF) symbol tables for local variables/procedures?</p>
<p>
Thanks in advance,<BR><i>Maurizio Vairani</i></p>
<p>
<b>Dr. GUI replies:</b></p>
<p>
Have you tried Dr. GUI's new cough elixir? Take one part Java and six parts single-malt Scotch&nbsp;.&nbsp;.&nbsp;.&nbsp;.</p>
<p>
In general the COFF format does not have private symbolic information except static function names. The CodeView (CV) format, however, has private symbolic information about function names, local variables, type definitions, and so on. There are no application programming interfaces (APIs) to strip private COFF symbol information. There are, however, APIs in the IMAGEHLP.DLL to strip private CV symbolic information. One such API is <b>RemovePrivateCvSymbolic()</b>. The <b>RemovePrivateCvSymbolic()</b> API removes all but public information from the CV debug information. The intent is to allow the user to ship the debug symbols for an image without disclosing the data structures or source information. A consumer can only get a stack trace, place breakpoints on functions, and dump memory. Another IMAGEHLP API which does the same thing is <b>SplitSymbols()</b> (only if you specify the SPLITSYM_REMOVE_PRIVATE flag). These APIs are documented in the Platform Software Development Kit (SDK). Check the docs for these functions to decide which API you should use.</p>
</font></BODY>
</HTML>
