<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>MiniportSynchronizeISR</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_MiniportSynchronizeISR_NR"></A>MiniportSynchronizeISR</H2>
<P>
<B>BOOLEAN</B><BR>
&nbsp; &nbsp; <B>MiniportSynchronizeISR(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp; <I>SynchronizeContext</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
MiniportSynchronizeISR is a required function if any NIC driver function that
runs at less than DIRQL shares resources with that driver’s MiniportISR or
MiniportDisableInterrupt function. 
<H3>Parameters</H3>
<DL>
<DT>
<I>SynchronizeContext</I>
<DD>
Points to a context area supplied when the NIC driver’s Miniport<I>Xxx</I>&nbsp;or
internal function called <B>NdisMSynchronizeWithInterrupt</B>. Usually, this
input parameter is a pointer to a set of shared resources at an offset within
the NIC-specific <I>MiniportAdapterContext</I>&nbsp;area passed to other Miniport<I>Xxx</I>
functions. 
</DL>
<H3>Return Value</H3>
<P>
MiniportSynchronizeISR returns a Boolean with a driver-determined meaning that
is propagated to the caller of <B>NdisMSynchronizeWithInterrupt</B>. 
<H3>Comments</H3>
<P>
If any NIC driver function shares resources, such as device registers, with
the driver’s MiniportISR or MiniportDisableInterrupt function, the driver
function that runs, by default, at less than DIRQL cannot access those
resources directly. If it attempted to access such shared resources directly,
the lower priority function might be pre-empted by execution of MiniportISR or
MiniportDisableInterrupt, which could change state out from under the lower
priority driver function. 
<P>
To synchronize access to such shared resources with MiniportISR or
MiniportDisableInterrupt, lower priority driver functions must call <B>NdisMSynchronizeWithInterrupt</B>
to have the driver’s MiniportSynchronizeISR function access those shared
resources at DIRQL. Calling <B>NdisMSynchronizeWithInterrupt</B>&nbsp;prevents race
conditions and deadlocks in such a NIC driver, particularly in SMP machines.
<P>
Any lower priority driver functions that share resources among themselves (but
not with any function that runs at DIRQL) should use a spin lock to protect
those shared resources. 
<P>
MiniportSynchronizeISR runs at the DIRQL assigned when the driver’s
MiniportInitialize function called <B>NdisMRegisterInterrupt</B>. Like any
driver function that runs at DIRQL, MiniportSynchronizeISR should return
control as quickly as possible, and it can call only those <B>Ndis</B><I>Xxx</I>
functions that are safe to call at any IRQL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_4.htm">MiniportDisableInterrupt</A></B>, <B><A HREF="101mini_8.htm">MiniportInitialize</A></B>,
<B><A HREF="101mini_9.htm">MiniportISR</A></B>, <B><A HREF="103ndisx_13.htm">NdisAllocateSpinLock</A></B>,
<B><A HREF="103ndisx_123.htm">NdisMRegisterInterrupt</A></B>, <B><A HREF="103ndisx_137.htm">NdisMSynchronizeWithInterrupt</A></B>,
<B><A HREF="103ndisx_163.htm">NdisRawReadPortBufferUchar</A></B>,
<B><A HREF="103ndisx_164.htm">NdisRawReadPortBufferUlong</A></B>,
<B><A HREF="103ndisx_165.htm">NdisRawReadPortBufferUshort</A></B>,
<B><A HREF="103ndisx_166.htm">NdisRawReadPortUchar</A></B>, <B><A HREF="103ndisx_167.htm">NdisRawReadPortUlong</A></B>,
<B><A HREF="103ndisx_168.htm">NdisRawReadPortUshort</A></B>, <B><A HREF="103ndisx_169.htm">NdisRawWritePortBufferUchar</A></B>,
<B><A HREF="103ndisx_170.htm">NdisRawWritePortBufferUlong</A></B>,
<B><A HREF="103ndisx_171.htm">NdisRawWritePortBufferUshort</A></B>,
<B><A HREF="103ndisx_172.htm">NdisRawWritePortUchar</A></B>, <B><A HREF="103ndisx_173.htm">NdisRawWritePortUlong</A></B>,
<B><A HREF="103ndisx_174.htm">NdisRawWritePortUshort</A></B>, <B><A HREF="103ndisx_181.htm">NdisReadRegisterUchar</A></B>,
<B><A HREF="103ndisx_182.htm">NdisReadRegisterUlong</A></B>, <B><A HREF="103ndisx_183.htm">NdisReadRegisterUshort</A></B>,
<B><A HREF="103ndisx_219.htm">NdisWriteRegisterUchar</A></B>, <B><A HREF="103ndisx_220.htm">NdisWriteRegisterUlong</A></B>,
<B><A HREF="103ndisx_221.htm">NdisWriteRegisterUshort</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
