<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TDI_SET_INFORMATION</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_TDI_SET_INFORMATION_NR"></A>TDI_SET_INFORMATION</H2>
<P>
When a kernel-mode client makes a TDI_SET_INFORMATION request, it asks the
underlying TDI transport driver to set information of a client-specified type
on a particular address, connection, or control channel. 
<H3>IRP</H3>
<P>
The transport calls <B>IoGetCurrentIrpStackLocation</B>&nbsp;with the given <I>Irp</I>
to get a pointer to its own I/O stack location in the IRP, shown in the
following list as <B>IrpSp</B>. IRP members relevant to this request include
the following:
<DL>
<DT>
<B>IoStatus.Status</B>
<DD>
Specifies the final status of the set-information request. The transport sets
this member before it completes the IRP, possibly to one of the following:
<P>
STATUS_SUCCESS<BR>
STATUS_INVALID_ADDRESS_COMPONENT<BR>
STATUS_INVALID_CONNECTION<BR>
STATUS_INVALID_DEVICE_REQUEST<BR>
STATUS_INVALID_PARAMETER<BR>
STATUS_INSUFFICIENT_RESOURCES<BR>
STATUS_NOT_IMPLEMENTED
<BR>
<DT>
<B>IoStatus.Information</B>
<DD>
Specifies the number of bytes of client-supplied data the driver used from the
buffer mapped at <B>Irp-&gt;MdlAddress</B>. 
<BR>
<DT>
<B>IrpSp-&gt;MajorFunction</B>
<DD>
Specifies IRP_MJ_INTERNAL_DEVICE_CONTROL. The transport can ignore this member
if it exports a TdiDispatchInternalDeviceControl routine that handles only
TDI_<I>XXX</I>&nbsp;requests. 
<BR>
<DT>
<B>IrpSp-&gt;MinorFunction</B>
<DD>
Specifies TDI_SET_INFORMATION.
<BR>
<DT>
<B>IrpSp-&gt;FileObject</B>
<DD>
Points to an open file object representing a local-node address, connection
endpoint, or control channel. The transport uses the <B>FsContext</B>&nbsp;and,
possibly, <B>FsContext2</B>&nbsp;fields to access the state it maintains about this
address, connection, or control channel. 
<BR>
<DT>
<B>IrpSp-&gt;Parameters</B>
<DD>
Points to a TDI_REQUEST_KERNEL_SET_INFORMATION structure, defined as follows:
<PRE><FONT FACE="Courier" SIZE="2">struct _TDI_REQUEST_KERNEL_SET_INFO {<B>&nbsp;</B>
&nbsp; &nbsp; LONG SetType;<B>&nbsp;</B>
&nbsp; &nbsp; PTDI_CONNECTION_INFORMATION RequestConnectionInformation;<B>&nbsp;</B>
} TDI_REQUEST_KERNEL_SET_INFORMATION, *PTDI_REQUEST_KERNEL_SET_INFORMATION;<B>&nbsp;</B>
<B>&nbsp;</B></FONT></PRE>
<P>
The transport uses the members of this structure as follows:
<DL>
<DT>
<B>SetType</B>
<DD>
Specifies the type of set operation to carry out (see Comments). 
<BR>
<DT>
<B>RequestConnectionInformation</B>
<DD>
Points to a TDI_CONNECTION_INFORMATION structure containing input connection
information if the given file object represents a connection. Otherwise, this
member is NULL.
</DL>
<DT>
<B>MdlAddress</B>
<DD>
Points to an MDL mapping a client-supplied buffer containing the data to be
set. The format and contents of this buffer depend on the value of <B>SetType</B>.
</DL>
<H3>Comments</H3>
<P>
When a client calls <B>TdiBuildSetInformation</B>&nbsp;to set up this IRP, it must
specify the type of set operation it wants done and must provide a buffer
containing appropriate data. The transport finds this information at <B>IrpSp-&gt;Parameters</B>
in the <B>SetType</B>&nbsp;member. On input, <B>SetType</B>&nbsp;can be any of the
following subset of the system-defined TDI_QUERY_<I>XXX</I>: 
<DL>
<DT>
TDI_QUERY_ADDRESS_INFO
<DD>
Set information for an address. The client-supplied buffer mapped at <B>MdlAddress</B>
contains data formatted as a TDI_ADDRESS_INFO structure.
<BR>
<DT>
TDI_QUERY_CONNECTION_INFO
<DD>
Set information for a connection endpoint. The client-supplied buffer mapped
at <B>MdlAddress</B>&nbsp;contains data formatted as a TDI_CONNECTION_INFO
structure. 
<BR>
<DT>
TDI_QUERY_PROVIDER_INFO
<DD>
Set information for a control channel. The client-supplied buffer mapped at <B>MdlAddress</B>
contains data formatted as a TDI_PROVIDER_INFO structure. 
<BR>
<DT>
TDI_QUERY_PROVIDER_STATISTICS
<DD>
Set statistics information for a control channel. The client-supplied buffer
mapped at <B>MdlAddress</B>&nbsp;contains data formatted as a
TDI_PROVIDER_STATISTICS structure. 
</DL>
<P>
A transport can extend this interface at the discretion of the driver writer
to support additional set operations for its clients. Such a transport must
define TDI_QUERY_<I>XXX</I>&nbsp;codes in which the most significant bit is set. 
<P>
The transport must fail any set-information request in which the given file
object is inappropriate to the specified <B>SetType</B>. 
<P>
The transport also can fail any set-information request for which the client
supplies values that exceed a driver-determined limit. For example, most
transports do not allow their clients to reset the <B>MaxDatagramSize</B>&nbsp;or <B>MaxSendSize</B>
with TDI_QUERY_PROVIDER_INFO-type set-information requests. 
<P>
<B>TdiBuildSetInformation</B>&nbsp;is the macro a client uses to fill in this IRP.
<H3>See Also</H3>
<P>
<B><A HREF="26tdstrc_11.htm">TDI_ADDRESS_INFO</A></B>, <B><A HREF="26tdstrc_20.htm">TDI_CONNECTION_INFO</A></B>,
<B><A HREF="26tdstrc_21.htm">TDI_CONNECTION_INFORMATION</A></B>,
<B><A HREF="24bldmac_17.htm">TdiBuildSetInformation</A></B>, <B><A HREF="21tddisp_6.htm">TdiDispatchInternalDeviceControl</A></B>,
<B><A HREF="26tdstrc_24.htm">TDI_PROVIDER_INFO</A></B>, <B><A HREF="26tdstrc_25.htm">TDI_PROVIDER_STATISTICS</A></B>
&nbsp;
<P>
&nbsp;
<P></FONT>
</BODY>
</HTML>
