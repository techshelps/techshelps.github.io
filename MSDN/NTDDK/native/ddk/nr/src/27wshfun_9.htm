<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>WSHGetWinsockMapping</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_WSHGetWinsockMapping_NR"></A>WSHGetWinsockMapping</H2>
<P>
<B>DWORD</B><BR>
<B>&nbsp; &nbsp; WSHGetWinsockMapping(</B><BR>
<B>&nbsp; &nbsp; &nbsp; &nbsp; OUT PWINSOCK_MAPPING</B>&nbsp; <I>Mapping</I><B>,</B><BR>
<B>&nbsp; &nbsp; &nbsp; &nbsp; IN DWORD</B>&nbsp; <I>MappingLength</I><BR>
<B>&nbsp; &nbsp; &nbsp; &nbsp; );</B>
<P>
<B>WSHGetWinSockMapping</B>&nbsp;returns information about the address family,
socket type, and protocol parameter triples supported by this helper DLL.
<H3>Parameters</H3>
<DL>
<DT>
<I>Mapping</I>
<DD>
Points to a WINSOCK_MAPPING-structured buffer in which <B>WSHGetWinsockMapping</B>
returns information that describes the parameters supported by this helper
DLL.
<BR>
<DT>
<I>MappingLength</I>
<DD>
Specifies the size in bytes of the buffer at <I>Mapping</I>.
</DL>
<H3>Return Value</H3>
<P>
<B>WSHGetWinsockMapping</B>&nbsp;returns the number of bytes of WINSOCK_MAPPING
information used by this helper DLL. If the given <I>MappingLength</I>&nbsp;is too
small, the return value indicates how large a buffer is necessary to contain
the helper DLL&#39;s WINSOCK_MAPPING information.
<H3>Comments</H3>
<P>
<B>WSHGetWinsockMapping</B>&nbsp;returns information about the types of sockets
supported by this helper DLL. The WINSOCK_MAPPING<B>&nbsp;</B>structure is defined
as follows:
<PRE><FONT FACE="Courier" SIZE="2">typedef struct WINSOCK_MAPPING {
&nbsp; &nbsp; DWORD Rows;
&nbsp; &nbsp; DWORD Columns;
&nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; DWORD AddressFamily;
&nbsp; &nbsp; &nbsp; &nbsp; DWORD SocketType;
&nbsp; &nbsp; &nbsp; &nbsp; DWORD Protocol;
&nbsp; &nbsp; } Mapping[1];
} WINSOCK_MAPPING, *PWINSOCK_MAPPING;
&nbsp;</FONT></PRE>
<P>
Members of this structure contain the following information:
<DL>
<DT>
<B>Rows</B>
<DD>
Specifies the number of entries in the <I>Mapping</I>&nbsp;array.
<BR>
<DT>
<B>Columns</B>
<DD>
Specifies three.
<BR>
<DT>
<B>Mapping</B>
<DD>
Is an array with <B>Rows</B>&nbsp;elements, each of which specifies an address
family, socket type, and protocol triple supported by the helper DLL.
</DL>
<P>
The <B>Mapping</B>&nbsp;returned should be exactly the same as the value stored
under the transport driver&#39;s <B>..Parameters\Winsock</B>&nbsp;registry key for <B>Mapping</B>.<I>
</I>The setup utility routines mentioned in the <I>Network Driver Design Guide</I>
actually call <B>WSHGetWinsockMapping</B>&nbsp;to obtain the mapping information to
be written into the registry.
<P></FONT>
</BODY>
</HTML>
