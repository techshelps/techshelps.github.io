<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisMInitializeTimer</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisMInitializeTimer_NR"></A>NdisMInitializeTimer</H2>
<P>
<B>VOID <BR>
</B>&nbsp; &nbsp; <B>NdisMInitializeTimer(<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN OUT PNDIS_MINIPORT_TIMER</B>&nbsp;<I>Timer</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp;<I>MiniportAdapterHandle</I><B>,</B><I><BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PNDIS_TIMER_FUNCTION</B>&nbsp;<I>TimerFunction</I><B>,</B><I><BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp;<I>FunctionContext<BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisMInitializeTimer</B>&nbsp;initializes a timer object associated with a
driver’s MiniportTimer function. 
<H3>Parameters</H3>
<DL>
<DT>
<I>Timer</I>
<DD>
Points to caller-supplied, resident storage for a timer object. The timer
object is opaque to the caller, but, when it has been initialized, this
pointer is a required parameter to the <B>NdisM..Timer</B>&nbsp;functions. 
<BR>
<DT>
<I>MiniportAdapterHandle</I>
<DD>
Specifies the handle input to MiniportInitialize.
<BR>
<DT>
<I>TimerFunction</I>
<DD>
Specifies the entry point of a caller-supplied MiniportTimer function.
<BR>
<DT>
<I>FunctionContext</I>
<DD>
Points to a caller-supplied context area to be passed to the given
MiniportTimer function when it is called.
</DL>
<H3>Comments</H3>
<P>
The MiniportInitialize function must call <B>NdisMInitializeTimer</B>&nbsp;to set
up the driver’s MiniportTimer function(s), if any. MiniportInitialize must
call <B>NdisMInitializeTimer</B>&nbsp;before the driver passes the <I>MiniportTimer</I>
pointer to any other <B>NdisM..Timer</B>&nbsp;function. 
<P>
Drivers of NICs that do not generate interrupts initialize at least one timer
object for a polling MiniportTimer function that monitors the NIC state for
incoming receives and for send completions. 
<P>
Calls to the <B>NdisMSet..Timer</B>&nbsp;functions insert the timer object in the
system timer queue. Calls to <B>NdisMCancelTimer</B>&nbsp;dequeue the timer object
if it is currently queued. Only one instantiation of a particular timer object
can be queued at any given moment. 
<P>
When a driver calls <B>NdisMSetTimer</B>, the timer object at <I>Timer</I>&nbsp;is
queued until the interval specified in the call expires. When it does, the
timer object is dequeued and the caller-supplied <I>TimerFunction</I>&nbsp;is run
once at IRQL DISPATCH_LEVEL as soon as a processor becomes available. When a
driver calls <B>NdisMSetPeriodicTimer</B>, the timer object is dequeued and
the caller-supplied <I>TimerFunction</I>&nbsp;is run when the given interval
expires, but the timer object is automatically requeued for the same fixed
interval so the MiniportTimer function runs periodically, also at IRQL
DISPATCH_LEVEL. 
<P>
MiniportInitialize can call <B>NdisMInitializeTimer</B>&nbsp;more than once to
initialize more than one timer object, each associated with a distinct
MiniportTimer function. For example, a NIC driver might have one MiniportTimer
function that polls the NIC state periodically and another that the miniport
uses only to time-out a particular operation on its NIC. Each such
MiniportTimer function has different functionality, and each such function
should be associated with a different timer object by calling <B>NdisMInitializeTimer</B>
from MiniportInitialize. 
<P>
Callers of <B>NdisMInitializeTimer</B>&nbsp;run at IRQL PASSIVE_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_8.htm">MiniportInitialize</A></B>, <B><A HREF="101mini_19.htm">MiniportTimer</A></B>,
<B><A HREF="103ndisx_91.htm">NdisMCancelTimer</A></B>,<B>&nbsp;<A HREF="103ndisx_132.htm">NdisMSetPeriodicTimer</A></B>,
<B><A HREF="103ndisx_133.htm">NdisMSetTimer</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
