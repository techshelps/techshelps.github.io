<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisAllocatePacket</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisAllocatePacket_NR"></A>NdisAllocatePacket</H2>
<P>
<B>VOID<BR>
&nbsp; &nbsp; NdisAllocatePacket(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>OUT PNDIS_STATUS</B>&nbsp; <I>Status</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>OUT PNDIS_PACKET</B>&nbsp; *<I>Packet</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp; <I>PoolHandle</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisAllocatePacket</B>&nbsp;allocates and initializes a packet descriptor. 
<H3>Parameters</H3>
<DL>
<DT>
<I>Status</I>
<DD>
Points to a caller-supplied variable in which this function returns the final
status of the request, which can be one of the following:
<DL>
<DT>
NDIS_STATUS_SUCCESS
<DD>
The caller can use the packet descriptor returned at <I>Packet</I>.
<BR>
<DT>
NDIS_STATUS_RESOURCES
<DD>
The free list for the packet pool currently has no available entries. A
subsequent call to <B>NdisFreePacket</B>&nbsp;will return the given entry to the
free list. 
</DL>
<DT>
<I>Packet</I>
<DD>
Points to a caller-supplied variable in which this function returns a pointer
to the allocated packet descriptor.
<BR>
<DT>
<I>PoolHandle</I>
<DD>
Specifies the handle returned by a preceding call to <B>NdisAllocatePacketPool</B>.
</DL>
<H3>Comments</H3>
<P>
NDIS drivers must allocate packet descriptors from packet pool. Protocol
drivers call <B>NdisAllocatePacket</B>&nbsp;one or more times for their subsequent
calls to <B>NdisSend</B>&nbsp;or <B>NdisSendPackets</B>. Miniports call <B>NdisAllocatePacket</B>
one or more times for subsequent calls to <B>NdisMIndicateReceivePacket</B>.
NDIS intermediate drivers must call <B>NdisAllocatePacket</B>&nbsp;to repackage
sends and receive indications in fresh packet descriptors before passing
incoming transfer requests on to other NDIS drivers. 
<P>
Each packet descriptor will eventually have one or more buffer descriptors
chained to it. <B>NdisAllocatePacket</B>&nbsp;zero-initializes the packet
descriptor and sets its buffer chain pointer to NULL. The caller must chain
the buffer descriptor(s) mapping the packet data to the packet descriptor
before it is sent or indicated. Most NDIS drivers allocate buffer descriptors
with <B>NdisAllocateBuffer</B>. 
<P>
Drivers must use the NDIS_GET/SET_PACKET_<I>XXX</I>&nbsp;macros or
NDIS_OOB_DATA_FROM_PACKET to access or set up any out-of-band information
associated with the packet descriptor.
<P>
Callers of <B>NdisAllocatePacket</B>&nbsp;run at IRQL &lt;= DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="103ndisx_8.htm">NdisAllocateBuffer</A></B>,<A HREF="103ndisx_12.htm">
<B>NdisAllocatePacketPool</A></B>, <B><A HREF="103ndisx_30.htm">NdisDprAllocatePacket</A></B>,
<B><A HREF="103ndisx_32.htm">NdisDprFreePacket</A></B>, <B><A HREF="103ndisx_40.htm">NdisFreePacket</A></B>,
<B><A HREF="103ndisx_51.htm">NDIS_GET_PACKET_HEADER_SIZE</A></B>,
<B><A HREF="103ndisx_52.htm">NDIS_GET_PACKET_MEDIA_SPECIFIC_INFO</A></B>,
<B><A HREF="103ndisx_53.htm">NDIS_GET_PACKET_STATUS</A></B>, <B><A HREF="103ndisx_54.htm">NDIS_GET_PACKET_TIME_RECEIVED</A></B>,
<B><A HREF="103ndisx_55.htm">NDIS_GET_PACKET_TIME_SENT</A></B>, <B><A HREF="103ndisx_56.htm">NDIS_GET_PACKET_TIME_TO_SEND</A></B>,
<B><A HREF="103ndisx_89.htm">NdisMArcIndicateReceive</A></B>, <B><A HREF="103ndisx_100.htm">NdisMEthIndicateReceive</A></B>,
<B><A HREF="103ndisx_102.htm">NdisMFddiIndicateReceive</A></B>, <B><A HREF="103ndisx_107.htm">NdisMIndicateReceivePacket</A></B>,
<B><A HREF="103ndisx_139.htm">NdisMTrIndicateReceive</A></B>, <B><A HREF="103ndisx_147.htm">NDIS_OOB_DATA_FROM_PACKET</A></B>,
<B><A HREF="106nstru_4.htm">NDIS_PACKET</A></B>, <B><A HREF="106nstru_5.htm">NDIS_PACKET_OOB_DATA</A></B>,
<B><A HREF="103ndisx_193.htm">NdisSend</A></B>, <B><A HREF="103ndisx_194.htm">NdisSendPackets</A></B>,
<B><A HREF="103ndisx_197.htm">NDIS_SET_PACKET_HEADER_SIZE</A></B>,
<B><A HREF="103ndisx_198.htm">NDIS_SET_PACKET_MEDIA_SPECIFIC_INFO</A></B>,
<B><A HREF="103ndisx_199.htm">NDIS_SET_PACKET_STATUS</A></B>, <B><A HREF="103ndisx_200.htm">NDIS_SET_PACKET_TIME_RECEIVED</A></B>,
<B><A HREF="103ndisx_201.htm">NDIS_SET_PACKET_TIME_SENT</A></B>, <B><A HREF="103ndisx_202.htm">NDIS_SET_PACKET_TIME_TO_SEND</A></B>
<P></FONT>
</BODY>
</HTML>
