<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TDI_REQUEST_KERNEL</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_TDI_REQUEST_KERNEL_NR"></A>TDI_REQUEST_KERNEL</H2>
<PRE><FONT FACE="Courier" SIZE="2">typedef struct _TDI_REQUEST_KERNEL {<B>&nbsp;</B>
&nbsp; &nbsp; ULONG                        RequestFlags;<B>&nbsp;</B>
&nbsp; &nbsp; PTDI_CONNECTION_INFORMATION  RequestConnectionInformation;<B>&nbsp;</B>
&nbsp; &nbsp; PTDI_CONNECTION_INFORMATION  ReturnConnectionInformation;<B>&nbsp;</B>
&nbsp; &nbsp; PVOID                        RequestSpecific;<B>&nbsp;</B>
} TDI_REQUEST_KERNEL, *PTDI_REQUEST_KERNEL;<B>&nbsp;</B>
<B>&nbsp;</B></FONT></PRE>
<P>
TDI_REQUEST_KERNEL defines a parameter format common to certain kernel-mode
TDI_<I>XXX</I>&nbsp;IOCTL requests. 
<H3>Members</H3>
<DL>
<DT>
<B>RequestFlags</B>
<DD>
Specifies a flag or combination of flags for certain TDI_<I>XXX</I>&nbsp;IOCTLs.
<BR>
<DT>
<B>RequestConnectionInformation</B>
<DD>
Points to a TDI_CONNECTION_INFORMATION structure containing client-supplied
data.
<BR>
<DT>
<B>ReturnConnectionInformation</B>
<DD>
Points to a caller-supplied buffer in which the transport returns data,
formatted as TDI_CONNECTION_INFORMATION structure.
<BR>
<DT>
<B>RequestSpecific</B>
<DD>
Points to a caller-supplied value of a request-specific nature, used only for
IOCTL requests that need additional parameters, such as a time-out value.
</DL>
<H3>Comments</H3>
<P>
Although not all members of the TDI_REQUEST_KERNEL structure are relevant to
each such TDI_<I>XXX</I>&nbsp;IOCTL code, this structure is used as the common
format at <B>IrpSp-&gt;Parameters</B>&nbsp;in the following TDI_<I>XXX</I>&nbsp;IOCTL
requests to TDI transport drivers: 
<UL>
<LI>
For TDI_CONNECT requests, the client supplies a remote-node address to which a
connection should be offered, and possibly user connect data, at <B>RequestConnectionInformation</B>.
The client can supply a time-out for its connection offer at <B>RequestSpecific</B>,
or this member can be NULL, which directs the transport to use its own default
time-out for the connection operation. The transport returns connection
acceptance information at <B>ReturnConnectionInformation</B>. 
<P>
<LI>
For TDI_DISCONNECT requests, the client can set <B>RequestFlags</B>&nbsp;if the
transport supports controlled disconnects; otherwise, this member is zero. The
client can supply a time-out for the disconnection at <B>RequestSpecific</B>,
or this member can be NULL, which directs the transport to use its own default
time-out for the disconnection operation. The transport returns any disconnect
data and status information supplied by the corresponding remote-node
transport at <B>ReturnConnectionInformation</B>.  
<P>
<LI>
For TDI_LISTEN requests, the client can set <B>RequestFlags</B>&nbsp;with
TDI_QUERY_ACCEPT if the transport supports delayed-connection acceptances;
otherwise, this member is zero, which directs the transport to immediately
accept any appropriate connection offer that comes in from a remote node. The
client can specify a remote-node address from which a connection offer should
be accepted and, if <B>RequestFlags</B>&nbsp;is zero, also some connect data to be
transmitted to the remote node when the connection offer is accepted at <B>RequestConnectionInformation</B>.
The transport returns any connect data transmitted from the remote node, as
well as the remote-node address, at <B>ReturnConnectionInformation</B>&nbsp;when it
accepts an endpoint-to-endpoint connection for its client, thereby satisfying
its client&#39;s listen request. 
</UL>
<P>
Kernel-mode clients use the <B>TdiBuild</B><I>Xxx</I>&nbsp;macros to set up <B>Parameters</B>
in the transport&#39;s I/O stack location of a given IRP with the
TDI_KERNEL_REQUEST structure for the preceding kernel-mode IOCTL requests. For
TDI_DISASSOCIATE_ADDRESS requests, neither the client nor the transport pass
any information in this structure. 
<P>
The format at <B>Parameters</B>&nbsp;is request-specific for all other TDI_<I>XXX</I>.
For more information about these structures, see the TDI_<I>XXX</I>&nbsp;references
in <A HREF="22ioctl.htm">Chapter 2</A>. 
<H3>See Also</H3>
<P>
<B><A HREF="24bldmac_4.htm">TdiBuildConnect</A></B>, <B><A HREF="24bldmac_6.htm">TdiBuildDisconnect</A></B>,
<B><A HREF="24bldmac_8.htm">TdiBuildListen</A></B>, <B><A HREF="22ioctl_4.htm">TDI_CONNECT</A></B>,
<B><A HREF="26tdstrc_21.htm">TDI_CONNECTION_INFORMATION</A></B>,
<B><A HREF="22ioctl_6.htm">TDI_DISCONNECT</A></B>, <B><A HREF="22ioctl_7.htm">TDI_LISTEN</A></B>
<P></FONT>
</BODY>
</HTML>
