<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisMSendResourcesAvailable</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisMSendResourcesAvailable_NR"></A>NdisMSendResourcesAvailable</H2>
<P>
<B>VOID <BR>
&nbsp; &nbsp; NdisMSendResourcesAvailable(<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN</B>&nbsp;<B>NDIS_HANDLE</B>&nbsp;<I>MiniportAdapterHandle<BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisMSendResourcesAvailable</B>&nbsp;notifies NDIS that a miniport has
sufficient internal resources to accept another send request, even though one
or more outstanding send packets are pending within the miniport. 
<H3>Parameters</H3>
<DL>
<DT>
<I>MiniportAdapterHandle</I>
<DD>
Specifies the handle originally input to MiniportInitialize.
</DL>
<H3>Comments</H3>
<P>
The NDIS library queues send requests on behalf of miniports so each NIC
driver can deal with one device transmit operation at a time, although a
miniport can transmit several packets per operation, depending on the
capabilities of its NIC. NDIS serializes the submission of incoming packet
arrays to each miniport’s MiniportSendPackets function, and it serializes the
submission of packets to each miniport’s MiniportSend function. NDIS queues
incoming send requests in FIFO order. 
<P>
Any miniport can retains ownership of such a send packet in one of the
following ways:
<UL>
<LI>
Its MiniportSendPackets function sets the <B>Status</B>&nbsp;member in the
out-of-band data block for a packet to NDIS_STATUS_PENDING with
NDIS_SET_PACKET_STATUS. 
<P>
<LI>
Its MiniportSend function returns NDIS_STATUS_PENDING.
</UL>
<P>
In either of these circumstances, the NIC driver eventually must call <B>NdisMSendComplete</B>
or <B>NdisMWanSendComplete</B>&nbsp;to indicate that it has released ownership of
the packet and that the driver has sufficient resources available to accept
the next transmit request. 
<P>
However, before miniport calls <B>NdisMSendComplete</B>&nbsp;for a pending packet,
it can call <B>NdisMSendResourcesAvailable</B>&nbsp;if the driver and its NIC are
capable of accepting another send request immediately, assuming NDIS has one
in its queue to submit to that driver. Such a call allows the driver of a
high-capacity NIC to optimize transmissions over the network by sending more
data at a time. 
<P>
<B>NdisMSendResourcesAvailable</B>&nbsp;can be called only in the window between
the return of NDIS_STATUS_PENDING for a given packet and the miniport’s call
to <B>NdisMSendComplete</B>&nbsp;with that packet. 
<P>
If a miniport returns any value except NDIS_STATUS_PENDING for a particular
packet from MiniportSendPackets or from MiniportSend, it should neither call <B>NdisMSendResourcesAvailable</B>
nor <B>NdisMSendComplete</B>. Any send packet for which a NIC driver returns
something other than NDIS_STATUS_PENDING should be considered inaccessible by
that miniport on return from its MiniportSendPackets or MiniportSend function.
<P>
A WAN miniport cannot call <B>NdisMSendResourcesAvailable</B>. 
<P>
Callers of <B>NdisMSendResourcesAvailable</B>&nbsp;run at IRQL DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_8.htm">MiniportInitialize</A></B>,<B>&nbsp;<A HREF="101mini_14.htm">MiniportSend</A></B>,<B>
<A HREF="101mini_15.htm">MiniportSendPackets</A></B>, <B><A HREF="103ndisx_127.htm">NdisMSendComplete</A></B>,
<B><A HREF="103ndisx_145.htm">NdisMWanSendComplete</A></B>, <B><A HREF="106nstru_4.htm">NDIS_PACKET</A></B>,
<B><A HREF="106nstru_5.htm">NDIS_PACKET_OOB_DATA</A></B>, <B><A HREF="103ndisx_193.htm">NdisSend</A></B>,
<B><A HREF="103ndisx_194.htm">NdisSendPackets</A></B>, <B><A HREF="103ndisx_199.htm">NDIS_SET_PACKET_STATUS</A></B>
<P></FONT>
</BODY>
</HTML>
