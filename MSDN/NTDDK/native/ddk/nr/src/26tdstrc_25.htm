<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TDI_PROVIDER_STATISTICS</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_TDI_PROVIDER_STATISTICS_NR"></A>TDI_PROVIDER_STATISTICS</H2>
<PRE><FONT FACE="Courier" SIZE="2">struct _TDI_PROVIDER_STATISTICS {<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          Version;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          OpenConnections;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          ConnectionsAfterNoRetry;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          ConnectionsAfterRetry;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          LocalDisconnects;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          RemoteDisconnects;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          LinkFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          AdapterFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          SessionTimeouts;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          CancelledConnections;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          RemoteResourceFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          LocalResourceFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          NotFoundFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          NoListenFailures;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DatagramsSent;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DatagramBytesSent;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DatagramsReceived;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DatagramBytesReceived;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          PacketsSent;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          PacketsReceived;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DataFramesSent;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DataFrameBytesSent;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DataFramesReceived;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DataFrameBytesReceived;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DataFramesResent;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DataFrameBytesResent;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          DataFramesRejected;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  DataFrameBytesRejected;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          ResponseTimerExpirations;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          AckTimerExpirations;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          MaximumSendWindow;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          AverageSendWindow;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          PiggybackAckQueued;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          PiggybackAckTimeouts;<B>&nbsp;</B>
&nbsp; &nbsp; LARGE_INTEGER  WastedPacketSpace;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          WastedSpacePackets;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG          NumberOfResources;<B>&nbsp;</B>
&nbsp; &nbsp; TDI_PROVIDER_RESOURCE_STATS  Resources[1];<B>&nbsp;</B>
} TDI_PROVIDER_STATISTICS, *PTDI_PROVIDER_STATISTICS;<B>&nbsp;</B>
<B>&nbsp;</B></FONT></PRE>
<P>
TDI_PROVIDER_STATISTICS defines the structure of the information returned for
a TDI_QUERY_INFORMATION request in which the <B>IrpSp-&gt;Parameters.QueryType</B>
is set to TDI_QUERY_PROVIDER_STATISTICS.
<H3>Members</H3>
<DL>
<DT>
<B>Version</B>
<DD>
Specifies the TDI version number. The low-order bytes specify the minor
version number, and the high-order bytes the major version number.  
<BR>
<DT>
<B>OpenConnections</B>
<DD>
Specifies the number of open connection endpoints in the transport.
<BR>
<DT>
<B>ConnectionsAfterNoRetry</B>
<DD>
Specifies the number of connections the transport has established with
remote-node clients without doing frame retransmissions.
<BR>
<DT>
<B>ConnectionsAfterRetry</B>
<DD>
Specifies the number of connections the transport has established with remote
node clients after doing some frame retransmissions.
<BR>
<DT>
<B>LocalDisconnects</B>
<DD>
Specifies the number of endpoint-to-endpoint connections that the
transport&#39;s local-node clients have closed.
<BR>
<DT>
<B>RemoteDisconnects</B>
<DD>
Specifies the number of endpoint-to-endpoint connections that remote-node
clients have closed.
<BR>
<DT>
<B>LinkFailures</B>
<DD>
Specifies the number of connections lost due to link-level failures.
<BR>
<DT>
<B>AdapterFailures</B>
<DD>
Specifies the number of connections lost due to problems in the underlying NIC
driver.
<BR>
<DT>
<B>SessionTimeouts</B>
<DD>
Specifies the number of connections lost due to session-level time-outs.
<BR>
<DT>
<B>CancelledConnections</B>
<DD>
Specifies the number of rejected connection offers.
<BR>
<DT>
<B>RemoteResourceFailures</B>
<DD>
Specifies the number of connections that have failed due to resource problems
at a remote node.
<BR>
<DT>
<B>LocalResourceFailures</B>
<DD>
Specifies the number of connections that have failed due to local-node
resource problems.
<BR>
<DT>
<B>NotFoundFailures</B>
<DD>
Specifies the number of connection attempts that have failed because the
transport could not find the specified remote node on the network.
<BR>
<DT>
<B>NoListenFailures</B>
<DD>
Specifies the number of incoming connection offers failed because local-node
clients were not listening for incoming connections.
<BR>
<DT>
<B>DatagramsSent</B>
<DD>
Specifies the number of datagrams the TDI transport has sent.
<BR>
<DT>
<B>DatagramBytesSent</B>
<DD>
Specifies the number of bytes in all datagrams the transport has sent.
<BR>
<DT>
<B>DatagramsReceived</B>
<DD>
Specifies the number of datagrams the TDI transport has received.
<BR>
<DT>
<B>DatagramBytesReceived</B>
<DD>
Specifies the number of bytes in all datagrams the transport has received.
<BR>
<DT>
<B>PacketsSent</B>
<DD>
Specifies the number of packets, including control, data, and other frames,
the transport has sent through NDIS to the physical medium.
<BR>
<DT>
<B>PacketsReceived</B>
<DD>
Specifies the number of packets, including control, data, and other frames,
the transport has received from the physical medium through NDIS.
<BR>
<DT>
<B>DataFramesSent</B>
<DD>
Specifies the number of data frames the underlying NDIS NIC driver has sent.
<BR>
<DT>
<B>DataFrameBytesSent</B>
<DD>
Specifies the number of bytes of frame data the underlying NDIS NIC driver has
sent.
<BR>
<DT>
<B>DataFramesReceived</B>
<DD>
Specifies the number of data frames the underlying NDIS NIC driver has
received.
<BR>
<DT>
<B>DataFrameBytesReceived</B>
<DD>
Specifies the number of bytes of frame data the underlying NDIS NIC driver has
received.
<BR>
<DT>
<B>DataFramesResent</B>
<DD>
Specifies the number of data frames the underlying NDIS NIC driver has
re-sent.
<BR>
<DT>
<B>DataFrameBytesResent</B>
<DD>
Specifies the number of bytes of frame data the underlying NDIS NIC driver has
re-sent.
<BR>
<DT>
<B>DataFramesRejected</B>
<DD>
Specifies the number of data frames the underlying NDIS NIC driver has
received but rejected.
<BR>
<DT>
<B>DataFrameBytesRejected</B>
<DD>
Specifies the number of bytes of frame data the underlying NDIS NIC driver has
received but rejected.
<BR>
<DT>
<B>ResponseTimerExpirations</B>
<DD>
Specifies the number of times the response timer (for example, T1 for NetBIOS)
has expired.
<BR>
<DT>
<B>AckTimerExpirations</B>
<DD>
Specifies the number of times the acknowledgment timer (for example, T2 for
NetBIOS) has expired.
<BR>
<DT>
<B>MaximumSendWindow</B>
<DD>
Specifies the maximum send window, in bytes, of the transport.
<BR>
<DT>
<B>AverageSendWindow</B>
<DD>
Specifies the average send window, in bytes, of the transport.
<BR>
<DT>
<B>PiggybackAckQueued</B>
<DD>
Specifies the number of times the transport has started a timer waiting for
reverse traffic on which it can piggyback a data acknowledgment to a remote
node.
<BR>
<DT>
<B>PiggybackAckTimeouts</B>
<DD>
Specifies the number of times a piggyback acknowledgment timer has expired
before the transport could send reverse traffic to a remote node.
<BR>
<DT>
<B>WastedPacketSpace</B>
<DD>
Specifies the total number of bytes of wasted buffer space for transferred
packets.  
<BR>
<DT>
<B>WastedSpacePackets</B>
<DD>
Specifies how many packets contributed to the value of <B>WastedPacketSpace</B>.
<BR>
<DT>
<B>NumberOfResources</B>
<DD>
Specifies the number of elements of type TDI_PROVIDER_RESOURCE_STATS in the
array at <B>Resources</B>.
<BR>
<DT>
<B>Resources[1]</B>
<DD>
Specifies an array of TDI_PROVIDER_RESOURCE_STATS structures, each defined as
follows:
<PRE><FONT FACE="Courier" SIZE="2">struct _TDI_PROVIDER_RESOURCE_STATS {<B>&nbsp;</B>
&nbsp; &nbsp; ULONG ResourceId;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG MaximumResourceUsed;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG AverageResourceUsed;<B>&nbsp;</B>
&nbsp; &nbsp; ULONG ResourceExhausted;<B>&nbsp;</B>
} TDI_PROVIDER_RESOURCE_STATS, *PTDI_PROVIDER_RESOURCE_STATS;<B>&nbsp;</B>
<B>&nbsp;</B></FONT></PRE>
<DL>
<DT>
<B>ResourceId</B>
<DD>
Specifies a transport-specific value identifying a resource.
<BR>
<DT>
<B>MaximumResourceUsed</B>
<DD>
Specifies the maximum number of resources of the specified type the transport
can use concurrently.
<BR>
<DT>
<B>AverageResourceUsed</B>
<DD>
Specifies the average number of resources of the specified type the transport
uses overall.
<BR>
<DT>
<B>ResourceExhausted</B>
<DD>
Specifies the number of times the transport has failed to allocate the
specified resource.
</DL>
</DL>
<H3>Comments</H3>
<P>
Any kernel-mode client that has opened a control channel can make a query to
determine the current statistics maintained by its underlying transport. Such
a client sets up an IRP with <B>TdiBuildQueryInformation</B>, passing in the <I>QType</I>
TDI_QUERY_PROVIDER_STATISTICS, and submits the IRP to the underlying transport
to get this information. 
<P>
TDI_PROVIDER_STATISTICS defines the format in which the transport returns the
requested information for such a query. 
<H3>See Also</H3>
<P>
<B><A HREF="24bldmac_11.htm">TdiBuildQueryInformation</A></B>, <B><A HREF="22ioctl_8.htm">TDI_QUERY_INFORMATION</A></B>,
<B><A HREF="26tdstrc_24.htm">TDI_PROVIDER_INFO</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
