<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisGetCurrentProcessorCpuUsage</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisGetCurrentProcessorCpuUsage_NR"></A>NdisGetCurrentProcessorCpuUsage</H2>
<P>
<B>VOID</B><BR>
&nbsp; &nbsp; <B>NdisGetCurrentProcessorCpuUsage(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>PULONG</B>&nbsp; <I>pCpuUsage</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisGetCurrentProcessorCpuUsage</B>&nbsp;returns how busy the current processor
is as a percentage. 
<H3>Parameters</H3>
<DL>
<DT>
<I>pCpuUsage</I>
<DD>
Points to a caller-supplied variable in which this function returns the
percentage of CPU, on which the caller is running, that is currently in use. 
</DL>
<H3>Comments</H3>
<P>
NDIS drivers can call <B>NdisGetCurrentProcessorCpuUsage</B>&nbsp;to determine how
loaded the CPU on which they are running is so they can change how they handle
certain operations to improve driver performance. 
<P>
For example, a NIC driver might call this function periodically and, as its
percentage of CPU usage trends higher, disable interrupts on the NIC and
switch to polling the state of the NIC. This strategy yields higher
performance during periods of high network traffic by eliminating
interrupt-processing overhead while the NIC is generating many interrupts.
Instead, the driver’s polling MiniportTimer function makes indications and
completes sends until network traffic declines again. When its periodic calls
to <B>NdisGetCurrentProcessorCpuUsage</B>&nbsp;indicate CPU usage is trending lower
again, such a driver would re-enable interrupts on the NIC and cancel its
polling MiniportTimer function. 
<P>
Callers of <B>NdisGetCurrentProcessorCpuUsage</B>&nbsp;can run at any IRQL.
<H3>See Also</H3>
<P>
<B><A HREF="101mini_4.htm">MiniportDisableInterrupt</A></B>,<A HREF="101mini_7.htm">
<B>MiniportHandleInterrupt</A></B>, <B><A HREF="101mini_9.htm">MiniportISR</A></B>,
<B><A HREF="101mini_19.htm">MiniportTimer</A></B>, <B><A HREF="103ndisx_91.htm">NdisMCancelTimer</A></B>,
<B><A HREF="103ndisx_132.htm">NdisMSetPeriodicTimer</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
