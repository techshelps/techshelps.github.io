<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TrFilterIndicateReceive</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_TrFilterIndicateReceive_NR"></A>TrFilterIndicateReceive</H2>
<P>
<B>VOID<BR>
</B>&nbsp; &nbsp; <B>TrFilterIndicateReceive(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PTR_FILTER</B>&nbsp;<I>Filter</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp;<I>MacReceiveContext</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp;<I>HeaderBuffer</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN UINT</B>&nbsp;<I>HeaderBufferSize</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp;<I>LookaheadBuffer</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN UINT</B>&nbsp;<I>LookaheadBufferSize</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN UINT</B>&nbsp;<I>PacketSize</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>TrFilterIndicateReceive</B>&nbsp;is called by a NIC driver to indicate a
received packet to all filter library database bindings associated with a
Token Ring address. 
<H3>Parameters</H3>
<DL>
<DT>
<I>Filter</I>
<DD>
Points to a previously created and initialized filter library database.
<BR>
<DT>
<I>MacReceiveContext</I>
<DD>
Specifies a context the NIC driver associates with a packet received from the
network.
<BR>
<DT>
<I>HeaderBuffer</I>
<DD>
Points to the virtual address of the virtually contiguous buffer containing
the packet header. The buffer is valid only within the current call to this
function.
<BR>
<DT>
<I>HeaderBufferSize</I>
<DD>
Indicates the length, in bytes, of the packet header.
<BR>
<DT>
<I>LookaheadBuffer</I>
<DD>
Points to the virtual address of the virtually contiguous buffer containing
the first bytes of packet data. The packet buffer is valid only for the
current call to this function.
<BR>
<DT>
<I>LookaheadBufferSize</I>
<DD>
Specifies the size, in bytes, of the lookahead buffer.
<BR>
<DT>
<I>PacketSize</I>
<DD>
Specifies the size, in bytes, of the received packet data. This number has no
relationship with the lookahead buffer. It indicates the size of the received
packet data so a protocol driver can call <B>NdisTransferData</B>&nbsp;to transfer
the data in the packet, as necessary. The data length does not include the
packet header length.
</DL>
<H3>Comments</H3>
<P>
Instead of calling <B>NdisIndicateReceive</B>&nbsp;without filtering, the NIC
driver calls <B>TrFilterIndicateReceive</B>&nbsp;to filter a received packet so
that only the appropriate bindings receive it. <B>TrFilterIndicateReceive</B>
then calls ProtocolReceive for each protocol driver to which the binding
filter applies.
<P>
In its calls to ProtocolReceive, this function passes each protocol driver a
pointer to the packet header, as well as a pointer to some or all of the
packet data. The protocol driver can inspect the header and data in the
packet, optionally copy as much of the header or data as is visible, or
optionally call <B>NdisTransferData</B>, which calls the NIC driver’s
MacTransferData function to copy the data into a protocol-supplied packet.
<P>
Callers of <B>TrFilterIndicateReceive</B>&nbsp;run at IRQL &lt;= DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="appdxa_23.htm">MacTransferData</A></B>, <B><A HREF="appdxa_79.htm">NdisIndicateReceive</A></B>,
<B><A HREF="103ndisx_210.htm">NdisTransferData</A></B>, <B><A HREF="104tdlow_5.htm">ProtocolReceive</A></B>,
<B><A HREF="appdxa_126.htm">TrFilterIndicateReceiveComplete</A></B>
<P></FONT>
</BODY>
</HTML>
