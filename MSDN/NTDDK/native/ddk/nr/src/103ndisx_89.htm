<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisMArcIndicateReceive</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisMArcIndicateReceive_NR"></A>NdisMArcIndicateReceive</H2>
<P>
<B>VOID <BR>
&nbsp; &nbsp; NdisMArcIndicateReceive(<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN</B>&nbsp;<B>NDIS_HANDLE</B>&nbsp;<I>MiniportAdapterHandle</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN</B>&nbsp;<B>PUCHAR</B>&nbsp;<I>HeaderBuffer</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PUCHAR</B>&nbsp;<I>DataBuffer</I><B>,</B><I><BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN</B>&nbsp;<B>UINT</B>&nbsp;<I>Length<BR>
</I>&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisMArcIndicateReceive</B>&nbsp;notifies NDIS that an ARCNET packet (or some
initial lookahead portion of the packet) has arrived so NDIS can forward the
received packet to bound protocols. 
<H3>Parameters</H3>
<DL>
<DT>
<I>MiniportAdapterHandle</I>
<DD>
Specifies the handle originally input to MiniportInitialize.
<BR>
<DT>
<I>HeaderBuffer</I>
<DD>
Specifies the base virtual address of the packet header. The header buffer
includes all bytes preceding the protocol ID. 
<BR>
<DT>
<I>DataBuffer</I>
<DD>
Specifies the virtual base virtual address of a buffer containing <I>Length</I>
bytes of received packet data. 
<BR>
<DT>
<I>Length</I>
<DD>
Specifies the number of bytes in the buffer at <I>DataBuffer</I>. 
</DL>
<H3>Comments</H3>
<P>
A miniport calls <B>NdisMArcIndicateReceive</B>&nbsp;if it designates its NIC as of
type <B>NdisMediumArcnet878_3</B>&nbsp;or <B>NdisMediumArcnetRaw</B>&nbsp;in response to
the OID_GEN_MEDIA_IN_USE query, unless the driver supports multipacket
receives. Any miniport that supports multipacket receives calls <B>NdisMIndicateReceivePacket</B>
with a packet array, rather than calling any of the medium-type-specific <B>NdisM..IndicateReceive</B>
functions. 
<P>
When a miniport calls <B>NdisMArcIndicateReceive</B>, NDIS passes a pointer to
the header of the packet and a pointer to some or all of the data in the
packet to the ProtocolReceive function(s) of bound protocol driver(s). Each
protocol that receives such an indication can do the following:
<OL>
<LI>
Inspect the header and data in the packet to decide whether the indication is
of interest to the protocol’s client(s).
<P>
<LI>
If it is, copy as much of the header or data as is visible into
protocol-allocated memory, using <B>NdisMoveMemory</B>.
<P>
<LI>
Get the remaining data, if any, for the indication by allocating a packet
descriptor with sufficient chained buffer descriptors and calling <B>NdisTransferData</B>.
The call to <B>NdisTransferData</B>&nbsp;causes the NIC driver’s
MiniportTransferData function to copy the data into the protocol-supplied
packet.
</OL>
<P>
For any protocol driver that receives an indication through <B>NdisMArcIndicateReceive</B>,
the <I>HeaderBuffer</I>&nbsp;and <I>DataBuffer</I>&nbsp;addresses are valid only during
the current call to its ProtocolReceive function, and these buffers are
read-only. A protocol driver cannot retain a pointer to the indicated packet
with these associated buffers nor can it retain any pointers to these buffers
for later use. Any data that a protocol driver needs from such a packet must
be copied and saved during the receive indication.
<P>
The data in the header is the same as that received on the NIC. A miniport
need not remove any headers or trailers from the data its NIC receives.
<P>
The transmitting driver adds padding to any packet that is too short for the
requirements of the medium. The receiving miniport can include such padding in
the data and length it subsequently indicates. Each bound protocol is
responsible for detecting any such padding and ignoring it.
<P>
Callers of <B>NdisMArcIndicateReceive</B>&nbsp;run at IRQL DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_7.htm">MiniportHandleInterrupt</A></B>, <B><A HREF="101mini_8.htm">MiniportInitialize</A></B>,
<B><A HREF="101mini_10.htm">MiniportQueryInformation</A>,</B>&nbsp;<B><A HREF="101mini_19.htm">MiniportTimer</A></B>,
<B><A HREF="101mini_20.htm">MiniportTransferData</A></B>, <B><A HREF="103ndisx_90.htm">NdisMArcIndicateReceiveComplete</A></B>,
<B><A HREF="103ndisx_107.htm">NdisMIndicateReceivePacket</A></B>,
<B><A HREF="103ndisx_115.htm">NdisMoveMemory</A></B>, <B><A HREF="103ndisx_210.htm">NdisTransferData</A></B>,
<B><A HREF="104tdlow_5.htm">ProtocolReceive</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
