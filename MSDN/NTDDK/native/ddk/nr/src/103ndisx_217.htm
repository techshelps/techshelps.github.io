<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisWriteErrorLogEntry</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisWriteErrorLogEntry_NR"></A>NdisWriteErrorLogEntry</H2>
<P>
<B>VOID<BR>
&nbsp; &nbsp; NdisWriteErrorLogEntry(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp;<I>NdisAdapterHandle</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_ERROR_CODE</B>&nbsp;<I>ErrorCode</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp;<I>NumberOfErrorValues</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp;<I>...</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisWriteErrorLogEntry</B>&nbsp;writes an entry to the system I/O error log
file. 
<H3>Parameters</H3>
<DL>
<DT>
<I>NdisAdapterHandle</I>
<DD>
Specifies the handle representing the NIC that is the cause of the I/O error
to be logged. This handle is an input parameter to MiniportInitialize. 
<BR>
<DT>
<I>ErrorCode</I>
<DD>
Specifies the NDIS_STATUS_<I>XXX</I>&nbsp;code describing the I/O error. 
<BR>
<DT>
<I>NumberOfErrorValues</I>
<DD>
Specifies the number of ULONG values to follow this parameter.
<BR>
<DT>
<I>...</I>
<DD>
Specifies a variable-sized array of ULONGs associated with the error to be
logged.
</DL>
<H3>Comments</H3>
<P>
<B>NdisWriteErrorLogEntry </B>allocates an I/O error log record, fills in the
record with the supplied information about the error, and then writes the
record to the I/O error log file.
<P>
The system places a limit on the potential size of an error log record. The
Windows NT limit is defined as ERROR_LOG_MAXIMUM_SIZE. The <I>NumberOfErrorValues</I>
passed to <B>NdisWriteErrorLogEntry</B>&nbsp;therefore has a system-enforced limit,
which is considerably less than the maximum possible value for a ULONG. 
<P>
In practice, few callers of <B>NdisWriteErrorLogEntry</B>&nbsp;even approach the
limit for <I>NumberOfErrorValues</I>&nbsp;because supplying many additional
NDIS_STATUS_<I>XXX</I>&nbsp;values is not particularly helpful to the user or
system administrator who later reads the error log, using the Win32 event
viewer. Logging an I/O error at every possible opportunity is not particularly
helpful to users either, so a miniport should log only critical I/O errors
that can help a user or system administrator to debug a network failure for
which the NIC is responsible on a particular machine or a configuration
resource conflict discovered during driver initialization. 
<P>
In general, a NIC driver calls <B>NdisWriteErrorLogEntry</B>&nbsp;during
initialization from its MiniportInitialize function if it cannot initialize a
NIC that it controls or cannot allocate the hardware resources it needs to
carry out I/O operations on its NIC. A NIC driver also can call <B>NdisWriteErrorLogEntry</B>
when a device-reset operation fails due to unrecoverable hardware error(s).
Logging these kinds of I/O errors helps users or system administrators to
identify a badly configured NIC or a NIC with failing hardware components. 
<P>
Callers of <B>NdisWriteErrorLogEntry</B>&nbsp;run at IRQL &lt;= DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_8.htm">MiniportInitialize</A></B>, <B><A HREF="101mini_12.htm">MiniportReset</A></B>,
<B><A HREF="103ndisx_129.htm">NdisMSetAttributes</A></B>, <B><A HREF="103ndisx_130.htm">NdisMSetAttributesEx</A></B>
<P></FONT>
</BODY>
</HTML>
