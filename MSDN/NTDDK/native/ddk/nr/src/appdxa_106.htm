<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisUpdateSharedMemory</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisUpdateSharedMemory_NR"></A>NdisUpdateSharedMemory</H2>
<P>
<B>VOID<BR>
</B>&nbsp; &nbsp; <B>NdisUpdateSharedMemory(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp;<I>NdisAdapterHandle</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp;<I>Length</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp;<I>VirtualAddress</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_PHYSICAL_ADDRESS</B>&nbsp;<I>PhysicalAddress</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisUpdateSharedMemory</B>&nbsp;ensures that data the driver reads from a shared
memory region is kept current. 
<H3>Parameters</H3>
<DL>
<DT>
<I>NdisAdapterHandle</I>
<DD>
Specifies the handle that the NDIS interface library associates with the
network interface card.
<BR>
<DT>
<I>Length</I>
<DD>
Specifies the size, in bytes, of the shared memory.
<BR>
<DT>
<I>VirtualAddress</I>
<DD>
Specifies the virtual address of the shared memory.
<BR>
<DT>
<I>PhysicalAddress</I>
<DD>
Identifies the physical address of the shared memory.
</DL>
<H3>Comments</H3>
<P>
<B>NdisUpdateSharedMemory </B>ensures that any data the network interface card
writes is present in physical memory at the virtual address written by <B>NdisAllocateSharedMemory</B>.
<P>
For cached shared memory, this function does not ensure that the cache fully
reflects physical memory. The NIC driver must flush the cache before the read
operation begins and protect the physical memory from access until the read
operation has completed.
<P>
Callers of <B>NdisUpdateSharedMemory</B>&nbsp;run at IRQL &lt;= DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="appdxa_63.htm">NdisAllocateSharedMemory</A></B>, <B><A HREF="103ndisx_36.htm">NdisFlushBuffer</A></B>
<P></FONT>
</BODY>
</HTML>
