<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>NdisMWanIndicateReceive</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_NdisMWanIndicateReceive_NR"></A>NdisMWanIndicateReceive</H2>
<P>
<B>VOID</B><BR>
&nbsp; &nbsp; <B>NdisMWanIndicateReceive(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>OUT PNDIS_STATUS</B>&nbsp; <I>Status</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp; <I>MiniportAdapterHandle</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN NDIS_HANDLE</B>&nbsp; <I>NdisLinkContext</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PUCHAR</B>&nbsp; <I>PacketBuffer</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN UINT</B>&nbsp; <I>PacketSize</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>NdisMWanIndicateReceive</B>&nbsp;notifies NDISWAN that a packet has been
received for an established link to be forwarded to the appropriate bound
protocol driver. 
<H3>Parameters</H3>
<DL>
<DT>
<I>Status</I>
<DD>
Points to a caller-supplied variable in which this function returns the status
of the indication, which can be one of the following:
<DL>
<DT>
NDIS_STATUS_SUCCESS
<DD>
NDISWAN recognized and accepted the packet. 
<BR>
<DT>
NDIS_STATUS_NOT_ACCEPTED
<DD>
NDISWAN did not recognize the frame. 
</DL>
<P>
Any other status indicates that NDISWAN recognized the frame, but for some
reason was unable to accept it.
<BR>
<DT>
<I>MiniportAdapterHandle</I>
<DD>
Specifies the handle originally input to MiniportInitialize.
<BR>
<DT>
<I>NdisLinkContext</I>
<DD>
Specifies the handle supplied by NDISWAN in the NDIS_MAC_LINE_UP structure at
the miniport’s initial call to <B>NdisMIndicateStatus</B>&nbsp;for this link.
<BR>
<DT>
<I>PacketBuffer</I>
<DD>
Specifies the base virtual address of the buffer containing the received
packet. 
<BR>
<DT>
<I>PacketSize</I>
<DD>
Specifies the size in bytes of the received packet data.
</DL>
<H3>Comments</H3>
<P>
When a miniport calls <B>NdisMWanIndicateReceive</B>, NDISWAN indicates the
packet by calling the ProtocolReceive functions of bound protocol drivers. The
entire packet is available for inspection by protocols, because WAN miniports
never indicate partial packets with only a lookahead portion of the packet
data.
<P>
Consequently, such a protocol will never call <B>NdisTransferData</B>&nbsp;so the
underlying miniport driver needs no MiniportTransferData function. The
miniport always passes up an entire packet due to compression and encryption
that might be applied to the packet from the transmitting node. Also, because
the link is point-to-point, at least one higher-level protocol accepts each
received packet.
<P>
For any protocol that receives an indication through <B>NdisMWanIndicateReceive</B>,
the buffer at <I>PacketBuffer</I>&nbsp;is valid only during the current call to its
ProtocolReceive function. Because the packet might be compressed, the entire
packet must be available when this call is made. This buffer should contain
the same data and size as the buffer sent by the driver on the remote node. 
<P>
The data contained in the header is the same as that received on the NIC. A
WAN miniport need not remove any headers or trailers from the data its NIC
receives. The transmitting driver does not<B>&nbsp;</B>add padding to the packet. 
<P>
Callers of <B>NdisMWanIndicateReceive</B>&nbsp;run at IRQL DISPATCH_LEVEL. 
<H3>See Also</H3>
<P>
<B><A HREF="101mini_8.htm">MiniportInitialize</A></B>, <B><A HREF="101mini_21.htm">MiniportWanSend</A></B>,
<B><A HREF="103ndisx_108.htm">NdisMIndicateStatus</A></B>, <B><A HREF="103ndisx_144.htm">NdisMWanIndicateReceiveComplete</A></B>,
<B><A HREF="104tdlow_5.htm">ProtocolReceive</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
