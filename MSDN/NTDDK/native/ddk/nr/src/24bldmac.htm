<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Chapter 4  TdiBuildXxx Macros and Functions</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H1><A NAME="DDK_TdiBuildXxx_Macros_and_Functions_NR"></A>Chapter 4  TdiBuild<I>Xxx</I>&nbsp;Macros and Functions</H1>
<P>
This describes the system-supplied <B>TdiBuild</B><I>Xxx</I>&nbsp;macros, used by
kernel-mode clients to set up the TDI_<I>XXX</I>&nbsp;internal device control IRPs
they subsequently submit to underlying TDI transport drivers with <B>IoCallDriver</B>.
<P>
Parameters to these macros always include pointers or handles to file objects
representing addresses, connection endpoints, or control channels already
opened with calls to <B>ZwCreateFile</B>. A successful call to <B>ZwCreateFile</B>
returns a handle to an open file object, from which the client can obtain a
pointer to that file object by calling <B>ObReferenceObjectByHandle</B>. 
<P>
This also describes some <B>TdiBuild</B><I>Xxx</I>&nbsp;functions that only
kernel-mode clients might call:
<UL>
<LI>
<B>TdiBuildInternalDeviceControlIrp</B>&nbsp;to allocate an IRP to be passed to a <B>TdiBuild</B><I>Xxx</I>
macro and, then, to <B>IoCallDriver</B>&nbsp;when a kernel-mode client makes a
request to its underlying transport on its own behalf
<P>
<LI>
<B>TdiBuildNetbiosAddressEa</B>&nbsp;to set up a buffered EA describing an address
with which the client of a NetBIOS transport can subsequently call <B>ZwCreateFile</B>
to open that NetBIOS address
<P>
<LI>
<B>TdiBuildNetbiosAddress</B>&nbsp;to set up a NetBIOS address for the client of a
NetBIOS transport 
</UL>
<P>
For more information about how transport drivers handle the TDI_<I>XXX</I>
requests set up by the build-IRP macros, see <A HREF="22ioctl.htm">Chapter
2</A>. See the <I>Kernel-Mode Driver Design Guide</I>&nbsp;and <I>Reference</I>&nbsp;for
more information about the kernel-mode support routines, such as <B>IoCallDriver</B>,
<B>ZwCreateFile</B>, and <B>ObReferenceObjectByHandle</B>, mentioned here. 
<P>
The macros and functions described here are in alphabetic order. 
<P></FONT>
</BODY>
</HTML>
