<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ScsiPortIoMapTransfer</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_ScsiPortIoMapTransfer_KR"></A>ScsiPortIoMapTransfer</H2>
<P>
<B>VOID <BR>
&nbsp; &nbsp; ScsiPortIoMapTransfer(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp; <I>HwDeviceExtension</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PSCSI_REQUEST_BLOCK</B>&nbsp; <I>Srb</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp; <I>LogicalAddress</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp; <I>Length</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>ScsiPortIoMapTransfer</B>&nbsp;sets up the system DMA controller for a miniport
driver to transfer data through a slave HBA.
<H3>Parameters</H3>
<DL>
<DT>
<I>HwDeviceExtension</I>
<DD>
Points to the miniport driver’s per-HBA storage area.
<BR>
<DT>
<I>Srb</I>
<DD>
Point to the SCSI request block for the DMA transfer.
<BR>
<DT>
<I>LogicalAddress</I>
<DD>
Specifies the starting address for the transfer operation. This value can be
the base address of a buffer into which or from which data is to be
transferred. This value can be an offset within such a buffer.
<BR>
<DT>
<I>Length</I>
<DD>
Specifies the number of bytes to be transferred.
</DL>
<H3>Comments</H3>
<P>
Only miniport drivers of HBAs that use a system DMA controller (slave DMA)
call <B>ScsiPortIoMapTransfer</B>. This routine must be called before such a
miniport sets up its HBA to transfer data. The range specified by the <I>LogicalAddress</I>
and <I>Length</I>&nbsp;must be within the buffer described by the given SRB.
<P>
After the OS-specific port driver programs the system DMA controller, it calls
the miniport driver’s HwScsiDmaStarted routine. HwScsiDmaStarted should
program the HBA to begin the data transfer. Note that an HBA can interrupt
between the miniport’s call to <B>ScsiPortIoMapTransfer</B>&nbsp;and the
OS-specific port driver’s call to the miniport’s HwScsiDmaStarted routine.
<H3>See Also</H3>
<P>
<A HREF="k302_4.htm">HwScsiDmaStarted</A>, <B><A HREF="k301_4.htm">ScsiPortFlushDma</A></B>
<P></FONT>
</BODY>
</HTML>
