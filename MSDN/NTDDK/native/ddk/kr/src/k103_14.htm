<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HalTranslateBusAddress</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_HalTranslateBusAddress_KR"></A>HalTranslateBusAddress</H2>
<P>
<B>BOOLEAN <BR>
&nbsp; &nbsp; HalTranslateBusAddress(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN INTERFACE_TYPE</B>&nbsp; <I>InterfaceType</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp; <I>BusNumber</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PHYSICAL_ADDRESS</B>&nbsp; <I>BusAddress</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN OUT PULONG</B>&nbsp; <I>AddressSpace</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>OUT PPHYSICAL_ADDRESS</B>&nbsp; <I>TranslatedAddress</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>HalTranslateBusAddress</B>&nbsp;translates a bus-specific address into the
corresponding system logical address.
<H3>Parameters</H3>
<DL>
<DT>
<I>InterfaceType</I>
<DD>
Specifies the bus interface type, which can be one of the following: <B>Internal</B>,
<B>Isa</B>, <B>Eisa</B>, <B>MicroChannel</B>, <B>TurboChannel</B>, or <B>PCIBus</B>.
However, additional types of buses will be supported in future versions of
Windows NT. The upper bound on the types of buses supported is always <B>MaximumInterfaceType</B>.
<BR>
<DT>
<I>BusNumber</I>
<DD>
Specifies the zero-based and system-assigned bus number for the device, used
together with <I>InterfaceType</I>&nbsp;to identify the bus for systems with more
than one bus of the same type.
<BR>
<DT>
<I>BusAddress</I>
<DD>
Specifies the bus-relative address.
<BR>
<DT>
<I>AddressSpace</I>
<DD>
In cross-platform-portable drivers, specifies whether the address is a port
number or a memory address; <I>AddressSpace</I>&nbsp;0x0 indicates memory, 0x1 is
I/O space.
<BR>
<DT>
<I>Translated Address</I>
<DD>
Is a pointer to the translated address.
</DL>
<H3>Return Value</H3>
<P>
A return value of TRUE indicates the system logical address corresponding to
the given <I>BusNumber</I>&nbsp;and <I>BusAddress</I>&nbsp;has been returned in <I>TranslatedAddress</I>.
<H3>Comments</H3>
<P>
The value returned for <I>TranslatedAddress</I>&nbsp;must be used in a subsequent
call to <B>MmMapIoSpace</B>&nbsp;if the <I>AddressSpace</I>&nbsp;value of zero is
returned.
<P>
There are many ways to connect a peripheral bus into a system. The memory
address space of the bus, referred to as the logical address space, can be
directly merged with the physical address space of the host, or some mapping
may be involved. Also, some machines can have more than one bus, or a bus can
have more than one address space, as in having separate memory and I/O
addresses.
<P>
A device driver calls <B>HalTranslateBusAddress</B>&nbsp;to perform this
translation. The parameters to this routine include a bus number to support
platforms with more than one bus of the same <I>InterfaceType</I>, the bus
address to be translated, and an <I>AddressSpace</I>&nbsp;specifier typically used
to differentiate between memory and I/O space, if these are separate. The
driver might obtain these parameters from the registry, by calling <B>HalGetBusData</B>
or <B>HalGetBusDataByOffset</B>&nbsp;and interrogating the device hardware, by
calling <B>IoAssignResources</B>&nbsp;or <B>HalAssignSlotResources</B>, or by using
defaults and claiming them in the registry.
<P>
Callers of <B>HalTranslateBusAddress</B>&nbsp;must be running at IRQL &lt;=
DISPATCH_LEVEL. Usually, the caller is running at IRQL PASSIVE_LEVEL, because
this routine is seldom called except when a driver is initializing.
<H3>See Also</H3>
<P>
<B><A HREF="k103_2.htm">HalAssignSlotResources</A></B>,<B>&nbsp;<A HREF="k103_6.htm">HalGetBusData</A></B>,
<B><A HREF="k103_7.htm">HalGetBusDataByOffset</A></B>, <B><A HREF="k104_8.htm">IoAssignResources</A></B>,
<B><A HREF="k106_26.htm">MmMapIoSpace</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
