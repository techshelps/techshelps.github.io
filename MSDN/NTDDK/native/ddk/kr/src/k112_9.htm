<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CM_PARTIAL_RESOURCE_DESCRIPTOR</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_CM_PARTIAL_RESOURCE_DESCRIPTOR_KR"></A>CM_PARTIAL_RESOURCE_DESCRIPTOR</H2>
<PRE><FONT FACE="Courier" SIZE="2">typedef struct _CM_PARTIAL_RESOURCE_DESCRIPTOR {
&nbsp; &nbsp; UCHAR Type;
&nbsp; &nbsp; UCHAR ShareDisposition;
&nbsp; &nbsp; USHORT Flags;
&nbsp; &nbsp; union {

&nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; // Range of port numbers, inclusive. These are physical and
&nbsp; &nbsp; &nbsp; &nbsp; // bus-relative values, which should be passed, unchanged,
&nbsp; &nbsp; &nbsp; &nbsp; // to HalTranslateBusAddress to get the mapped logical port
&nbsp; &nbsp; &nbsp; &nbsp; // range the driver uses to communicate with its device.
&nbsp; &nbsp; &nbsp; &nbsp; //

&nbsp; &nbsp; &nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PHYSICAL_ADDRESS Start;&#09;    // 8-byte physical address
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Length;
&nbsp; &nbsp; &nbsp; &nbsp; } Port;
&nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; // Bus-relative IRQL or vector and affinity, which are returned
&nbsp; &nbsp; &nbsp; &nbsp; // by IoQueryDeviceDescription or HalGetBusData and passed,
&nbsp; &nbsp; &nbsp; &nbsp; // unchanged, to HalGetInterruptVector and/or
&nbsp; &nbsp; &nbsp; &nbsp; // IoReportResourceUsage.
&nbsp; &nbsp; &nbsp; &nbsp; //

&nbsp; &nbsp; &nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Level;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Vector;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Affinity;
&nbsp; &nbsp; &nbsp; &nbsp; } Interrupt;

&nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; // Range of device memory, inclusive. These are physical and
&nbsp; &nbsp; &nbsp; &nbsp; // bus-relative values, which should be passed, unchanged,
&nbsp; &nbsp; &nbsp; &nbsp; // to HalTranslateBusAddress to get the mapped logical address.
&nbsp; &nbsp; &nbsp; &nbsp; // This, in turn, can be passed to MmMapIoSpace to get the virtual
&nbsp; &nbsp; &nbsp; &nbsp; // address range that the driver uses to communicate with its device.
&nbsp; &nbsp; &nbsp; &nbsp; //

&nbsp; &nbsp; &nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PHYSICAL_ADDRESS Start;    // 8-byte physical addresses.
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Length;
&nbsp; &nbsp; &nbsp; &nbsp; } Memory;

&nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; // The DMA channel number or MCA-type DMA port for the device.
&nbsp; &nbsp; &nbsp; &nbsp; //

&nbsp; &nbsp; &nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Channel;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Port;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Reserved1;
&nbsp; &nbsp; &nbsp; &nbsp; } Dma;

&nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; // Device-specific information defined by the system or driver.
&nbsp; &nbsp; &nbsp; &nbsp; // The DataSize field indicates the size of the data in bytes. The
&nbsp; &nbsp; &nbsp; &nbsp; // data is located immediately after the Reserved2 member of
&nbsp; &nbsp; &nbsp; &nbsp; // the structure.
&nbsp; &nbsp; &nbsp; &nbsp; //

&nbsp; &nbsp; &nbsp; &nbsp; struct {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG DataSize;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Reserved1;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ULONG Reserved2;
&nbsp; &nbsp; &nbsp; &nbsp; } DeviceSpecificData;
&nbsp; &nbsp; } u;
} CM_PARTIAL_RESOURCE_DESCRIPTOR, *PCM_PARTIAL_RESOURCE_DESCRIPTOR;
</FONT></PRE>
<P>
Each CM_PARTIAL_RESOURCE_DESCRIPTOR defines an element of an array  within a
CM_PARTIAL_RESOURCE_LIST. Each CM_PARTIAL_RESOURCE_DESCRIPTOR describes only
one type of resource used by a driver or device controlled by that driver.
<H3>Members</H3>
<DL>
<DT>
<B>Type</B>
<DD>
Specifies which of the following is described by this partial descriptor: <B>CmResourceTypePort</B>,
<B>CmResourceTypeInterrupt</B>, <B>CmResourceTypeMemory</B>, <B>CmResourceTypeDma</B>,
<B>CmResourceTypeDeviceSpecific</B>.
<BR>
<DT>
<B>ShareDisposition</B>
<DD>
Specifies whether or how the particular resource can be shared as one of the
following: <B>CmResourceShareDeviceExclusive</B>, <B>CmResourceShareDriverExclusive</B>,
<B>CmResourceShareShared</B>.
<BR>
<DT>
<B>Flags</B>
<DD>
Specifies type-dependent information about this descriptor:
<UL>
<LI>
When <B>Type</B>&nbsp;is set with <B>CmResourceTypePort,</B>&nbsp;can be either of the
following: CM_RESOURCE_PORT_MEMORY, CM_RESOURCE_PORT_IO.
<P>
<LI>
When <B>Type</B>&nbsp;is set with <B>CmResourceTypeInterrupt,</B>&nbsp;can be either of
the following: CM_RESOURCE_INTERRUPT_LEVEL_SENSITIVE,
CM_RESOURCE_INTERRUPT_LATCHED.
<P>
<LI>
When <B>Type</B>&nbsp;is set with <B>CmResourceTypeMemory</B>&nbsp;can be one of the
following: CM_RESOURCE_MEMORY_READ_WRITE, CM_RESOURCE_MEMORY_READ_ONLY,
CM_RESOURCE_MEMORY_WRITE_ONLY.
</UL>
<DT>
<B>u.Port</B>
<DD>
Describes a range of device ports in I/O space, as the following:
<DL>
<DT>
<B>Start</B>
<DD>
Bus-specific, 8-byte base physical address for the range.
<BR>
<DT>
<B>Length</B>
<DD>
The length, in bytes, of the range.
</DL>
<DT>
<B>u.Interrupt</B>
<DD>
Describes a bus-relative interrupt, as the following:
<DL>
<DT>
<B>Level</B>
<DD>
The IRQL at which the bus interrupts.
<BR>
<DT>
<B>Vector</B>
<DD>
The vector at which the bus interrupts.
<BR>
<DT>
<B>Affinity</B>
<DD>
The set of processors to which bus interrupts are dispatched. Set this to -1
in any partial resource descriptor describing interrupt configuration
information that is passed to <B>IoReportResourceUsage</B>. 
</DL>
<DT>
<B>u.Memory</B>
<DD>
Describes a bus-relative range of device memory, which is in system memory
space, as the following:
<DL>
<DT>
<B>Start</B>
<DD>
Bus-specific, 8-byte base physical address for the range.
<BR>
<DT>
<B>Length</B>
<DD>
Size in bytes of the range.
</DL>
<DT>
<B>u.Dma</B>
<DD>
Describes a bus-relative DMA setting, as one of the following:
<DL>
<DT>
<B>Channel</B>
<DD>
Number of the DMA channel on a system DMA controller that the device can use.
<BR>
<DT>
<B>Port</B>
<DD>
Number of the DMA port that an MCA-type device can use.
</DL>
<DT>
<B>u.DeviceSpecificData</B>
<DD>
Describes how much device-specific data follows immediately after the <B>Reserved2</B>
member, as the following:
<DL>
<DT>
<B>DataSize</B>
<DD>
The size in bytes of the device-specific data area.
</DL>
</DL>
<H3>Comments</H3>
<P>
For some examples of <B>DeviceSpecificData</B>, see the CM_<I>XXX</I>_DEVICE_DATA
structures also described in this chapter.
<P>
For partial resource descriptors with <B>CmResourceTypeInterrupt</B>
information, either the <B>Level</B>&nbsp;or <B>Vector</B>&nbsp;member of <B>u.Interrupt</B>
is set, depending on the platform and type of bus. The <B>Affinity</B>&nbsp;member
should either be left as returned by <B>IoQueryDeviceDescription</B>&nbsp;or be set
to -1 when claiming resources in the registry with <B>IoReportResourceUsage</B>.
<H3>See Also</H3>
<P>
<A HREF="k112_10.htm">CM_PARTIAL_RESOURCE_LIST</A>, <B><A HREF="k103_9.htm">HalGetInterruptVector</A></B>,
<B><A HREF="k103_14.htm">HalTranslateBusAddress</A></B>, <B><A HREF="k104_8.htm">IoAssignResources</A></B>,
<B><A HREF="k104_57.htm">IoQueryDeviceDescription</A></B>, <B><A HREF="k104_65.htm">IoReportResourceUsage</A></B>,
<B><A HREF="k106_26.htm">MmMapIoSpace</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
