<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IoBuildPartialMdl</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_IoBuildPartialMdl_KR"></A>IoBuildPartialMdl</H2>
<P>
<B>VOID <BR>
&nbsp; &nbsp; IoBuildPartialMdl(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PMDL</B>&nbsp; <I>SourceMdl</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN OUT PMDL</B>&nbsp; <I>TargetMdl</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PVOID</B>&nbsp; <I>VirtualAddress</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN ULONG</B>&nbsp; <I>Length</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>IoBuildPartialMdl</B>&nbsp;maps a portion of a buffer described by another MDL
into an MDL.
<H3>Parameters</H3>
<DL>
<DT>
<I>SourceMdl</I>
<DD>
Points to an MDL describing the original buffer, of which a subrange is to be
mapped.
<BR>
<DT>
<I>TargetMdl</I>
<DD>
Points to a caller-allocated MDL. The MDL must be large enough to map the
subrange specified by <I>VirtualAddress</I>&nbsp;and <I>Length</I>.
<BR>
<DT>
<I>VirtualAddress</I>
<DD>
Points to the base virtual address for the subrange to be mapped in the <I>TargetMdl</I>.
<BR>
<DT>
<I>Length</I>
<DD>
Specifies the length in bytes to be mapped by the <I>TargetMdl</I>. This
value, in combination with <I>VirtualAddress</I>, must specify a buffer that
is a proper subrange of the buffer described by <I>SourceMdl</I>. If <I>Length</I>
is zero, the subrange to be mapped starts at <I>VirtualAddress</I>&nbsp;and
includes the remaining range described by the <I>SourceMdl</I>.
</DL>
<H3>Comments</H3>
<P>
<B>IoBuildPartialMdl</B>&nbsp;maps a subrange of a buffer currently mapped by <I>SourceMdl</I>.
The <I>VirtualAddress</I>&nbsp;and <I>Length</I>&nbsp;parameters describe the subrange
to be mapped from the <I>SourceMdl</I>&nbsp;into the <I>TargetMdl</I>.
<P>
Drivers that must split large transfer requests can use this routine. The
caller must release the partial MDL it allocated when it has transferred all
the requested data or completed the IRP with an error status.
<P>
Callers of <B>IoBuildPartialMdl</B>&nbsp;must be running at IRQL PASSIVE_LEVEL.
<H3>See Also</H3>
<P>
<B><A HREF="k104_6.htm">IoAllocateMdl</A></B>, <B><A HREF="k104_16.htm">IoCallDriver</A></B>,
<B><A HREF="k104_38.htm">IoFreeMdl</A></B>, <B><A HREF="k104_68.htm">IoSetCompletionRoutine</A></B>
<P></FONT>
</BODY>
</HTML>
