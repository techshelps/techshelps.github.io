<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>KeRemoveDeviceQueue</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_KeRemoveDeviceQueue_KR"></A>KeRemoveDeviceQueue</H2>
<P>
<B>PKDEVICE_QUEUE_ENTRY <BR>
&nbsp; &nbsp; KeRemoveDeviceQueue(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PKDEVICE_QUEUE</B>&nbsp; <I>DeviceQueue</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>KeRemoveDeviceQueue</B>&nbsp;removes an entry from the head of a specified
device queue.
<H3>Parameters</H3>
<DL>
<DT>
<I>DeviceQueue</I>
<DD>
Points to an initialized device queue object for which the caller provides the
storage.
</DL>
<H3>Return Value</H3>
<P>
If the device queue is empty but the device queue’s state is Busy, <B>KeRemoveDeviceQueue</B>
returns NULL.
<H3>Comments</H3>
<P>
The specified device queue spin lock is acquired and the state of the device
queue is checked. If the state is Busy and an IRP is queued, this routine
dequeues the entry and returns a pointer to the IRP. A call to <B>KeRemoveDeviceQueue</B>
when the state of the device queue object is Busy but no IRPs are queued
causes the state transition to Not-Busy. The given device queue’s spin lock is
released.
<P>
It is an error to call <B>KeRemoveDeviceQueue</B>&nbsp;when the state of the device
queue object is Not-Busy.
<P>
Callers of <B>KeRemoveDeviceQueue </B>must be running at IRQL DISPATCH_LEVEL.
<H3>See Also</H3>
<P>
<B><A HREF="k105_15.htm">KeInitializeDeviceQueue</A></B>, <B><A HREF="k105_23.htm">KeInsertByKeyDeviceQueue</A></B>,
<B><A HREF="k105_24.htm">KeInsertDeviceQueue</A></B>, <B><A HREF="k105_42.htm">KeRemoveByKeyDeviceQueue</A></B>,
<B><A HREF="k105_44.htm">KeRemoveEntryDeviceQueue</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
