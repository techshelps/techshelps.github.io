<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.4  Serial I/O Control Codes</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Serial_I_O_Control_Codes_KR"></A>4.4  Serial I/O Control Codes</H2>
<P>
The following summarizes the I/O control codes handled by serial drivers.
<H3>IOCTL_SERIAL_GET_STATS</H3>
<H4>Operation</H4>
<P>
Returns the current values of the performance statistics for the device. The
statistics include the number of characters transmitted, the number of
characters received, and various errors. The values increase until they are
explicitly reset with SERIAL_IOCTL_CLEAR_STATS.
<P>
If a driver does not implement this IOCTL, it should return an error and not
modify the output buffer. If the modem driver is involved in processing the
I/O, it will adjust the return value from error to success but only return
zeros for the counter values.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIALPERF_STATS).
<H4>Output</H4>
<P>
The driver returns data to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIALPERF_STATS) when
the <B>Status</B>&nbsp;field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>
field is set to zero if the <B>Status</B>&nbsp;field is set to
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_CLEAR_STATS</H3>
<H4>Operation</H4>
<P>
Resets the performance statistics for the device.
<H4>Input</H4>
<P>
None.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero and the <B>Status</B>&nbsp;field is set
to STATUS_SUCCESS.
<H3>IOCTL_SERIAL_GET_PROPERTIES</H3>
<H4>Operation</H4>
<P>
Returns information about the characteristics of the attached communication
device.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_COMMPROP).
<H4>Output</H4>
<P>
The driver returns the information to the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_COMMPROP) when the
<B>Status</B>&nbsp;field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>
field is set to zero and the <B>Status</B>&nbsp;field is set to
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_GET_MODEMSTATUS</H3>
<H4>Operation</H4>
<P>
Returns a bitmask indicating the status.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(ULONG).
<H4>Output</H4>
<P>
The driver returns the bitmask to the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(ULONG) when the <B>Status</B>
field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set
to zero and the <B>Status</B>&nbsp;field is set to STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_GET_COMMSTATUS</H3>
<H4>Operation</H4>
<P>
Returns general status information, including how many <B>Errors</B>&nbsp;and <B>HoldReasons</B>
have occurred, how much data is in the driver’s buffers as indicated by the <B>AmountInInQueue</B>
and <B>AmountInOutQueue</B>&nbsp;values, and whether <B>EofReceived</B>&nbsp;and <B>WaitForImmediate</B>
are set.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_STATUS).
<H4>Output</H4>
<P>
The driver returns information to the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_STATUS) when the <B>Status</B>
field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set
to zero and the <B>Status</B>&nbsp;field is set to STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_RESET_DEVICE</H3>
<H4>Operation</H4>
<P>
Sets the device to a known state.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Status</B>&nbsp;field is set to STATUS_SUCCESS and the <B>Information</B>
field is set to zero.
<H3>IOCTL_SERIAL_PURGE</H3>
<H4>Operation</H4>
<P>
Purges the specified operation(s) or queues: one or more of the current and
all pending writes, the current and all pending reads, the transmit buffer if
one exists, and the receive buffer if one exists.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>, which
contains a bitmask of type ULONG, indicating what to purge.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero, and the <B>Status</B>&nbsp;field is
set to STATUS_SUCCESS or possibly to STATUS_PENDING, STATUS_CANCELLED, or
STATUS_INVALID_PARAMETER.
<H3>IOCTL_SERIAL_LSRMST_INSERT</H3>
<H4>Operation</H4>
<P>
Enables or disables insertion of the line status or modem status into the RX
stream at the behest of a user-mode application.While this state is enabled,
the serial driver inserts the caller-supplied escape character, together with
one of the following, into the data stream being read from the device:
<UL>
<LI>
SERIAL_LSRMST_LSR_DATA, indicating that a line-status change occurred.
Immediately following this, the driver inserts the value of the line status
register and the character present in the receive hardware when the
line-status change was processed.
<P>
<LI>
SERIAL_LSRMST_LSR_NODATA, indicating that a line-status change occurred but
that no data was available in the receive buffer. Immediately following this,
the driver inserts the value of the line status register when the line-status
change was processed.
<P>
<LI>
SERIAL_LSRMST_MST, indicating that a modem-status change occurred. Immediately
following this, the driver inserts the value of the modem status register when
the modem-status change was processed.
<P>
<LI>
SERIAL_LSRMST_ESCAPE, indicating that the next character in the stream, which
was received from the device, is identical to the caller-supplied escape
character.
</UL>
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>, which
contains a value of type UCHAR, indicating whether to enable LSRMST-insertion
mode. A value of zero indicates the driver should disable LSRMST-insertion
mode. A nonzero value is the caller-supplied escape character.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>zero</B>. The <B>Status</B>&nbsp;field is
set to STATUS_SUCCESS or possibly to STATUS_BUFFER_TOO_SMALL or
STATUS_INVALID_PARAMETER if the input escape character is the same as the
current XOFF or XON character, or if handflow error replacement is enabled.
<H3>IOCTL_SERIAL_GET_BAUD_RATE</H3>
<H4>Operation</H4>
<P>
Returns the current baud-rate setting.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_BAUD_RATE).
<H4>Output</H4>
<P>
The driver returns the data to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_BAUD_RATE) when
the <B>Status</B>&nbsp;field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>
field is set to zero, and the <B>Status</B>&nbsp;field is set to
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_BAUD_RATE</H3>
<H4>Operation</H4>
<P>
Sets the speed at which characters are sent over the serial line.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_BAUD_RATE)) of the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field is set to
STATUS_SUCCESS or possibly to STATUS_INVALID_PARAMETER or
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_QUEUE_SIZE</H3>
<H4>Operation</H4>
<P>
Resizes the driver’s internal typeahead and input buffers. The driver can
allocate buffers larger than the requested sizes and can refuse to allocate
buffers larger than its capacity.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_QUEUE_SIZE)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>,
containing the <B>InSize</B>&nbsp;and <B>OutSize</B>&nbsp;specifications.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field is set to
STATUS_SUCCESS or possibly to STATUS_BUFFER_TOO_SMALL or
STATUS_INSUFFICIENT_RESOURCES if the driver cannot satisfy the request by
allocating more memory.
<H3>IOCTL_SERIAL_GET_HANDFLOW</H3>
<H4>Operation</H4>
<P>
Returns the current values for the flow control and handshaking.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_HANDFLOW).
<H4>Output</H4>
<P>
The driver returns the information to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_HANDFLOW) when the
<B>Status</B>&nbsp;field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>
field is set to zero and the <B>Status</B>&nbsp;field is set to
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_HANDFLOW</H3>
<H4>Operation</H4>
<P>
Sets up flow control and handshaking for subsequent operations.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_HANDFLOW)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>,
which contains the values to be set.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero, and the <B>Status</B>&nbsp;field can
be set to STATUS_SUCCESS or possibly to STATUS_BUFFER_TOO_SMALL or
STATUS_INVALID_PARAMETER.
<H3>IOCTL_SERIAL_GET_LINE_CONTROL</H3>
<H4>Operation</H4>
<P>
Returns the current values of the stop-bits, parity, and word-length
parameters for the device.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_LINE_CONTROL).
<H4>Output</H4>
<P>
The driver returns data to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_LINE_CONTROL) when
the <B>Status</B>&nbsp;field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>
field is set to zero if the <B>Status</B>&nbsp;field is set to
STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_LINE_CONTROL</H3>
<H4>Operation</H4>
<P>
Resets the stop-bits, parity, and word-length parameters for the device.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_LINE_CONTROL)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field is set to
STATUS_SUCCESS or possibly to STATUS_BUFFER_TOO_SMALL or
STATUS_INVALID_PARAMETER.
<H3>IOCTL_SERIAL_SET_BREAK_ON</H3>
<H4>Operation</H4>
<P>
Causes a break condition to be transmitted by the UART.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Status</B>&nbsp;field is set to STATUS_SUCCESS and the <B>Information</B>
field is set to zero.
<H3>IOCTL_SERIAL_SET_BREAK_OFF</H3>
<H4>Operation</H4>
<P>
Disables the transmission of break conditions by the UART.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Status</B>&nbsp;field is set to STATUS_SUCCESS and the <B>Information</B>
field is set to zero.
<H3>IOCTL_SERIAL_GET_TIMEOUTS</H3>
<H4>Operation</H4>
<P>
Returns the current settings for read and write time-outs on the device.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_TIMEOUTS).
<H4>Output</H4>
<P>
The driver returns information to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_TIMEOUTS) when the
<B>Status</B>&nbsp;field is set to STATUS_SUCCESS. The <B>Information</B>&nbsp;field is
set to zero when the <B>Status</B>&nbsp;field is set to STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_TIMEOUTS</H3>
<H4>Operation</H4>
<P>
Sets up time-out constraints for serial I/O operations.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_TIMEOUTS)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS or STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_IMMEDIATE_CHAR</H3>
<H4>Operation</H4>
<P>
Causes a single character to be transmitted as soon as the hardware is
available.
<H4>Input</H4>
<P>
The buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>&nbsp;contains the character
to be sent. <B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the
size in bytes of the buffer, which must be &gt;= <B>sizeof</B>(UCHAR).
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to one when the <B>Status</B>&nbsp;field is set
to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set to zero, and
the <B>Status</B>&nbsp;field can be set to STATUS_PENDING, STATUS_CANCELLED,
STATUS_BUFFER_TOO_SMALL, or STATUS_INVALID_PARAMETER if another immediate
character is already pending.
<H3>IOCTL_SERIAL_XOFF_COUNTER</H3>
<H4>Operation</H4>
<P>
Sends the specified XOFF character, sets up a timer to track the specified
time-out value, and decrements the supplied count of characters for each
subsequently written character until the count goes to zero or a time-out
occurs. This IOCTL supports software emulation of the serial chip in certain
protected subsystems.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_XOFF_COUNTER)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>,
which contains the data.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS (all requested characters written) or possibly to
STATUS_SERIAL_MORE_WRITES, STATUS_SERIAL_COUNTER_TIMEOUT,
STATUS_BUFFER_TOO_SMALL, or STATUS_INVALID_PARAMETER if the <B>XoffChar</B>
specified is inconsistent with the current flow-control specification.
<H3>IOCTL_SERIAL_SET_DTR</H3>
<H4>Operation</H4>
<P>
Sets DTR (data terminal ready).
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS or to STATUS_INVALID_PARAMETER if the current handshake
setup is inconsistent with the requested operation.
<H3>IOCTL_SERIAL_CLR_DTR</H3>
<H4>Operation</H4>
<P>
Clears DTR.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS or to STATUS_INVALID_PARAMETER if the current handshake
setup is inconsistent with the requested operation.
<H3>IOCTL_SERIAL_SET_RTS</H3>
<H4>Operation</H4>
<P>
Sets RTS (request to send).
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS or to STATUS_INVALID_PARAMETER if the current handshake
setup is inconsistent with the requested operation.
<H3>IOCTL_SERIAL_CLR_RTS</H3>
<H4>Operation</H4>
<P>
Clears RTS.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field can be
set to STATUS_SUCCESS or to STATUS_INVALID_PARAMETER if the current handshake
setup is inconsistent with the requested operation.
<H3>IOCTL_SERIAL_GET_DTRRTS</H3>
<H4>Operation</H4>
<P>
Returns the state of the DTR and RTS lines at the time this request is
processed.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(ULONG).
<H4>Output</H4>
<P>
The driver returns information to the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(ULONG) when the <B>Status</B>
field is set to STATUS_SUCCESS. The <B>Information</B>&nbsp;field is set to zero
when the <B>Status</B>&nbsp;field is set to STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_XON</H3>
<H4>Operation</H4>
<P>
Enables emulation of receipt of characters, which the serial driver might
already have in its internal buffers.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Status</B>&nbsp;field is set to STATUS_SUCCESS and the <B>Information</B>
field is set to zero.
<H3>IOCTL_SERIAL_SET_XOFF</H3>
<H4>Operation</H4>
<P>
Disables emulation of receipt of characters.
<H4>Input</H4>
<P>
None
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Status</B>&nbsp;field is set to STATUS_SUCCESS and the <B>Information</B>
field is set to zero.
<H3>IOCTL_SERIAL_GET_WAIT_MASK</H3>
<H4>Operation</H4>
<P>
Returns the current value of the event wait mask.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(ULONG).
<H4>Output</H4>
<P>
The driver returns the information to the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(ULONG) when the <B>Status</B>
field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set
to zero, and the <B>Status</B>&nbsp;field can be set to STATUS_PENDING,
STATUS_CANCELLED, or STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_WAIT_MASK</H3>
<H4>Operation</H4>
<P>
Causes the driver to track the specified events, or, if the specified value is
zero, to complete pending waits.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(ULONG)) of the bitmask at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero. The <B>Status</B>&nbsp;field is set to
STATUS_SUCCESS or possibly to STATUS_PENDING, STATUS_CANCELLED,
STATUS_BUFFER_TOO_SMALL, or STATUS_INVALID_PARAMETER.
<H3>IOCTL_SERIAL_WAIT_ON_MASK</H3>
<H4>Operation</H4>
<P>
Returns information about which events have occurred among those that the
caller was waiting on.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(ULONG)) of the buffer.
<H4>Output</H4>
<P>
The driver returns a bitmask with bits set for events that occurred (or with a
value of zero if the preceding set-waitmask request specified zero) to the
buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(ULONG) when the <B>Status</B>
field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set
to zero, and the <B>Status</B>&nbsp;field can be set to STATUS_PENDING or
STATUS_INVALID_PARAMETER if a wait is already pending.
<H3>IOCTL_SERIAL_GET_CHARS</H3>
<H4>Operation</H4>
<P>
Returns the current values for the special characters used by the driver.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.OutputBufferLength</B>&nbsp;indicates the size in
bytes of the buffer, which must be &gt;= <B>sizeof</B>(SERIAL_CHARS).
<H4>Output</H4>
<P>
The driver returns the information to the buffer at <BR>
<B>Irp-&gt;AssociatedIrp.SystemBuffer</B>.
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to <B>sizeof</B>(SERIAL_CHARS) when the <B>Status</B>
field is set to STATUS_SUCCESS. Otherwise, the <B>Information</B>&nbsp;field is set
to zero and the <B>Status</B>&nbsp;field is set to STATUS_BUFFER_TOO_SMALL.
<H3>IOCTL_SERIAL_SET_CHARS</H3>
<H4>Operation</H4>
<P>
Sets special characters (<B>EofChar</B>, <B>ErrorChar</B>, <B>BreakChar</B>, <B>EventChar</B>,
<B>XonChar</B>, and <B>XoffChar</B>) used by the driver.
<H4>Input</H4>
<P>
<B>Parameters.DeviceIoControl.InputBufferLength</B>&nbsp;indicates the size in
bytes (must be &gt;= <B>sizeof</B>(SERIAL_CHARS)) of the buffer at <B>Irp-&gt;AssociatedIrp.SystemBuffer</B>,
which contains the values to the used.
<H4>Output</H4>
<P>
None
<H4>I/O Status Block</H4>
<P>
The <B>Information</B>&nbsp;field is set to zero, and the <B>Status</B>&nbsp;field is
set to STATUS_SUCCESS or possibly to STATUS_BUFFER_TOO_SMALL or
STATUS_INVALID_PARAMETER if the specified values for <B>XonChar</B>&nbsp;and <B>XoffChar</B>
are identical.
<P>
&nbsp;
<P></FONT>
</BODY>
</HTML>
