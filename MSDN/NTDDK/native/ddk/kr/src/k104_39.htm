<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>IoGetConfigurationInformation</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_IoGetConfigurationInformation_KR"></A>IoGetConfigurationInformation</H2>
<P>
<B>PCONFIGURATION_INFORMATION <BR>
&nbsp; &nbsp; IoGetConfigurationInformation( <BR>
&nbsp; &nbsp; );</B>
<P>
<B>IoGetConfigurationInformation</B>&nbsp;returns a pointer to the I/O Manager’s
global configuration information structure, which contains the current values
for how many physical disk, floppy, CD-ROM, tape, SCSI HBA, serial, and
parallel devices have device objects created to represent them by drivers as
they are loaded.
<H3>Return Value</H3>
<P>
<B>IoGetConfigurationInformation</B>&nbsp;returns a pointer to the configuration
information structure. This structure is defined as follows:
<PRE><FONT FACE="Courier" SIZE="2">typedef struct _CONFIGURATIONAL_INFORMATION{
&nbsp; &nbsp; //
&nbsp; &nbsp; // Each field indicates the total number of physical
&nbsp; &nbsp; // devices of a particular type in the machine.  The value
&nbsp; &nbsp; // should be used by the driver to determine the digit
&nbsp; &nbsp; // suffix for device object names. This field must be
&nbsp; &nbsp; // updated as the driver finds new devices of its own.
&nbsp; &nbsp; //
&nbsp; &nbsp; ULONG DiskCount;            // Count of hard disks so far.
&nbsp; &nbsp; ULONG FloppyCount;          // Count of floppy drives so far.
&nbsp; &nbsp; ULONG CDRomCount;           // Count of CD-ROM drives so far.
&nbsp; &nbsp; ULONG TapeCount;            // Count of tape drives so far.
&nbsp; &nbsp; ULONG ScsiPortCount;        // Count of HBAs so far.
&nbsp; &nbsp; ULONG SerialCount;          // Count of serial ports so far.
&nbsp; &nbsp; ULONG ParallelCount;        // Count of parallel ports so far.
&nbsp; &nbsp; //
&nbsp; &nbsp; // The next two fields indicate ownership of
&nbsp; &nbsp; // either of the two I/O address spaces
&nbsp; &nbsp; // that are used by WD1003-compatible disk controllers.
&nbsp; &nbsp; //
&nbsp; &nbsp; BOOLEAN AtDiskPrimaryAddressClaimed;       //0x1F0-0x1FF
&nbsp; &nbsp; BOOLEAN AtDiskSecondaryAddressClaimed;     //0x170-0x17F
} CONFIGURATION_INFORMATION,*PCONFIGURATION_INFORMATION
</FONT></PRE>
<H3>Comments</H3>
<P>
Certain types of device drivers can use the configuration information
structure’s values to construct device object names with appropriate digit
suffixes when each driver creates its device objects. Note that the digit
suffix for device object names is a zero-based count, while the counts
maintained in the configuration information structure represent the number of
device objects of a particular type already created. That is, the
configuration information counts are one-based.
<P>
Any driver that calls <B>IoGetConfigurationInformation</B>&nbsp;must increment the
count for its kind of device in this structure when it creates a device object
to represent a physical device.
<P>
The system-supplied SCSI port driver supplies the count of SCSI HBAs present
in the machine. SCSI class drivers can read this value to determine how many
HBA-specific miniport drivers might control a SCSI bus with an attached device
of the class driver’s type.
<P>
The configuration information structure also contains a value indicating
whether an already loaded driver has claimed either of the “AT” disk I/O
address ranges.
<P>
Callers of <B>IoGetConfigurationInformation</B>&nbsp;must be running at IRQL
PASSIVE_LEVEL.
<H3>See Also</H3>
<P>
<B><A HREF="k103_2.htm">HalAssignSlotResources</A></B>, <B><A HREF="k103_6.htm">HalGetBusData</A></B>,
<B><A HREF="k103_7.htm">HalGetBusDataByOffset</A></B>, <B><A HREF="k104_8.htm">IoAssignResources</A></B>,
<B><A HREF="k104_57.htm">IoQueryDeviceDescription</A></B>, <B><A HREF="k104_65.htm">IoReportResourceUsage</A></B>
<P></FONT>
</BODY>
</HTML>
