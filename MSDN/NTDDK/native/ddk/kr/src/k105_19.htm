<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>KeInitializeSemaphore</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_KeInitializeSemaphore_KR"></A>KeInitializeSemaphore</H2>
<P>
<B>VOID <BR>
&nbsp; &nbsp; KeInitializeSemaphore(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PKSEMAPHORE</B>&nbsp; <I>Semaphore</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN LONG</B>&nbsp; <I>Count</I><B>,<BR>
</B>&nbsp; &nbsp; &nbsp; &nbsp; <B>IN LONG</B>&nbsp; <I>Limit</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>KeInitializeSemaphore</B>&nbsp;initializes a semaphore object with a given count
and specifies an upper limit that the count can attain.
<H3>Parameters</H3>
<DL>
<DT>
<I>Semaphore</I>
<DD>
Points to a dispatcher object of type semaphore, for which the caller provides
the storage.
<BR>
<DT>
<I>Count</I>
<DD>
Specifies the initial count value to be assigned to the semaphore. This value
must be positive. A nonzero value sets the initial state of the semaphore to
Signaled.
<BR>
<DT>
<I>Limit</I>
<DD>
Specifies the maximum count value that the semaphore can attain. This value
must be positive. It determines how many waiting threads become eligible for
execution when the semaphore is set to the Signaled state and can therefore
access the resource that the semaphore protects.
</DL>
<H3>Comments</H3>
<P>
The semaphore object is initialized with the specified initial count and
limit.
<P>
Storage for a semaphore object must be resident: in the device extension of a
driver-created device object, in the controller extension of a driver-created
controller object, or in nonpaged pool allocated by the caller.
<P>
Callers of <B>KeInitializeSemaphore</B>&nbsp;must be running at IRQL PASSIVE_LEVEL.
<H3>See Also</H3>
<P>
<B><A HREF="k105_35.htm">KeReadStateSemaphore</A></B>, <B><A HREF="k105_39.htm">KeReleaseSemaphore</A></B>,
<B><A HREF="k105_54.htm">KeWaitForMultipleObjects</A></B>, <B><A HREF="k105_56.htm">KeWaitForSingleObject</A></B>
<P></FONT>
</BODY>
</HTML>
