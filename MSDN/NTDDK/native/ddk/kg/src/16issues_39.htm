<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>16.8.4  Setting Up Driver-specific, User-visible Error Logging</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Setting_Up_Driver_specific_User_visible_Error_Logging_KG"></A>16.8.4  Setting Up Driver-specific, User-visible Error Logging</H3>
<P>
Any NT driver that logs driver-defined I/O errors, as described in <A HREF="16issues_20.htm">Section
16.6</A>, can set itself up as an error-logging component of the system, which is
also called an <I>event-logging</I>&nbsp;<I>component</I>&nbsp;within the Win32
subsystem programming environment.
<P>
Such a driver must create a new subkey in the registry under the key <B>CurrentControlSet\Services\EventLog\System</B>
in order to have its driver-supplied message file made available to the Win32
event viewer or to any (subsystem-specific) application that reads the system
error log file and displays Win32 events to users or system administrators.
Note that a comparable application within another protected subsystem might
use another, subsystem-specific term for Win32 “events.”
<P>
Such a driver should name its new subkey with a unique <I>DriverName</I>&nbsp;that
is identical to the name of the driver’s executable. The driver-created subkey
must include a value entry for the driver-supplied message file, which can
have any unique name chosen by the driver writer. The value entry of a
driver-supplied message file is a full pathname for the file.
<P>
Any NT device driver writer who sets up the value entries for a new <I>DriverName</I>
subkey of the <B>\EventLog\System</B>&nbsp;key also should weigh the tradeoffs of
supplying information that is truly useful to the customer who buys the device
against the resources that setting up a Win32 event-logging component
consumes.
<P>
An NT driver writer who sets up an event-logging driver should make its
messages meaningful to the system administrator or end user who will use the
Win32 event viewer (or some other application) to diagnose problems that have
occurred while the system is running. The system error-logging mechanisms are
not intended to be, nor should they be used for, debugging under-development
NT drivers. Instead, they should provide useful information to an NT driver
writer’s retail customers.
<P>
For more information about the Windows NT event-logging mechanisms and how to
set up <I>Source</I>, which corresponds to the NT <I>DriverName</I>, subkeys
and message files, see the documentation provided with the Win32 SDK.
<P></FONT>
</BODY>
</HTML>
