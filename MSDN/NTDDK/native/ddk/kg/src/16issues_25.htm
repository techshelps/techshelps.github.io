<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>16.6.5  Defining New IO_ERR_XXX</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Defining_New_IO_ERR_XXX_KG"></A>16.6.5  Defining New IO_ERR_<I>XXX</I>&nbsp;</H3>
<P>
NT driver writers can create driver-specific private IO_ERR_<I>XXX</I>&nbsp; codes
of type NTSTATUS within the driver’s <I>xxxlog.mc</I>&nbsp;resource file. 
<P>
The NTSTATUS <B>Facility</B>&nbsp;field, shown in <A HREF="16issues_23.htm#DDK_Figure_16..5_NG">Figure
16.5</A>, for such an error must be set to FACILITY_IO_ERROR_CODE. The driver
writer must supply a <B>Sev</B>&nbsp;value and a unique <B>Code</B>&nbsp;value for each
new IO_ERR_<I>XXX</I>. Such a driver also must set the <B>C</B>&nbsp;bit in its new
IO_ERR_XXX. 
<P>
The <B>Sev</B>&nbsp;field shown in <A HREF="16issues_23.htm#DDK_Figure_16..5_NG">Figure 16.5</A>
indicates the severity code, which must be one of the following system-defined
values: 
<DL>
<DT>
STATUS_SEVERITY_SUCCESS 
<DD>
Indicates STATUS_SUCCESS was set for <B>FinalStatus</B>, and a value such as
IO_ERR_RETRY_SUCCEEDED for an <B>ErrorCode </B>value in error log packets. 
<P>
While STATUS_PENDING also belongs to the STATUS_SEVERITY_SUCCESS category, NT
drivers would not log an error on a pending IRP.
<BR>
<DT>
STATUS_SEVERITY_INFORMATIONAL 
<DD>
Indicates an informational NTSTATUS value, such as STATUS_SERIAL_MORE_WRITES. 
<BR>
<DT>
STATUS_SEVERITY_WARNING 
<DD>
Indicates a warning NTSTATUS value, such as STATUS_DEVICE_PAPER_EMPTY. 
<BR>
<DT>
STATUS_SEVERITY_ERROR 
<DD>
Indicates an error NTSTATUS value, such as STATUS_INSUFFICIENT_RESOURCES for a
<B>FinalStatus </B>value or IO_ERR_CONFIGURATION_ERROR for an <B>ErrorCode </B>value
in error log packets. 
</DL>
<P>
Most public IO_ERR_<I>XXX</I>&nbsp; constants belong to the STATUS_SEVERITY_ERROR
category. 
<P>
If the designer of an NT driver decides to make a set of driver-defined errors
visible to system administrators or end users through the Win32 event viewer,
such a driver must set itself up as an error-logging component in the
registry, as described in <A HREF="16issues_39.htm">Section
16.8.4</A>. 
<P></FONT>
</BODY>
</HTML>
