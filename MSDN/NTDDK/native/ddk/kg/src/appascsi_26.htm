<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>A.3.1  Using the Tape Class Driver</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Using_the_Tape_Class_Driver_KG"></A>A.3.1  Using the Tape Class Driver</H3>
<P>
The system-supplied tape class driver implements device-independent,
OS-specific tape support and exports support routines to the device-specific
tape miniclass drivers.
<P>
The tape class driver:
<UL>
<LI>
Performs a large part of miniclass driver initialization, including allocating
and initializing OS resources for the miniclass driver and the devices it
supports.
<P>
<LI>
Exports memory allocation and initialization routines.
<P>
<LI>
Recognizes the maximum transfer size for HBAs and splits transfer requests
when necessary.
<P>
<LI>
Handles IRP_MJ_CREATE, IRP_MJ_READ, and IRP_MJ_WRITE requests.
<P>
<LI>
Handles IOCTL_TAPE_CHECK_VERIFY, IOCTL_TAPE_FIND_NEW_DEVICES, and
IOCTL_TAPE_REMOVE_DEVICE requests.
<P>
<LI>
Performs driver-independent preprocessing for IRP_MJ_DEVICE_CONTROL requests
and dispatches to the appropriate device-specific routines in the tape
miniclass drivers.
<P>
<LI>
Communicates with other drivers in the system to deliver the CDBs to the tape
devices.
<P>
<LI>
Translates between NT status codes and tape status codes, provides
device-independent tape-specific error handing, and calls device-specific
error handling routines.
<P>
<LI>
Allocates driver context areas for miniclass drivers (minitape extension and
command extension).
</UL>
<P>
The tape class driver is provided as a kernel-mode DLL.
<P>
See the <I>Kernel-Mode Driver Reference</I>&nbsp;for descriptions of the <B>TapeClass</B><I>Xxx</I>
routines that can be called by a tape miniclass driver.
<P></FONT>
</BODY>
</HTML>
