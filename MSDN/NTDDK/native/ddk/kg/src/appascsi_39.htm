<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>A.4.3.4  Setting Again and Returning from HwScsiFindAdapter</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Setting_Again_and_Returning_from_HwScsiFindAdapter_KG"></A>A.4.3.4  Setting Again and Returning from HwScsiFindAdapter</H4>
<P>
For a supported and successfully configured HBA, the HwScsiFindAdapter routine
returns SP_RETURN_FOUND. 
<P>
The HwScsiFindAdapter routine should set <I>Again</I>&nbsp;to TRUE to indicate it
should be called again <I>with exactly the same ConfigInfo but a new
DeviceExtension</I>&nbsp;if another of its HBAs might be connected on the same I/O
bus. 
<P>
If HwScsiFindAdapter cannot find an HBA it supports, it should set <I>Again</I>
to FALSE and return SP_RETURN_NOT_FOUND. If the HwScsiFindAdapter routine
finds a supported HBA but the input PORT_CONFIGURATION_INFORMATION has
inconsistent configuration data (such as an invalid <B>DmaChannel</B>&nbsp;or <B>BusInterruptLevel</B>
on an EISA bus), it should set <I>Again</I>&nbsp;to FALSE and return
SP_RETURN_BAD_CONFIG. For an HBA on a PCI bus, HwScsiFindAdapter can accept
the interrupt configuration information supplied by the system. 
<P>
Note that setting <I>Again</I>&nbsp;to FALSE and returning control with
SP_RETURN_NOT_FOUND or SP_RETURN_BAD_CONFIG indicates that a given I/O bus,
identified by the <B>SystemIoBusNumber</B>&nbsp;in the input <I>ConfigInfo</I>
buffer, has no HBA that the miniport driver can support. It does not prevent
the system port driver from calling HwScsiFindAdapter again with updated
PORT_CONFIGURATION_INFORMATION to scan another I/O bus for HBA(s) if the
machine has additional I/O buses of the same <B>AdapterInterfaceType</B>. 
<P></FONT>
</BODY>
</HTML>
