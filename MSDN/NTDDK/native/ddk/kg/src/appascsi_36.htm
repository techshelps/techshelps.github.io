<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>A.4.3.1  Calling ScsiPortXxx  from HwScsiFindAdapter</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Calling_ScsiPortXxx_from_HwScsiFindAdapter_KG"></A>A.4.3.1  Calling ScsiPort<I>Xxx</I>&nbsp; from HwScsiFindAdapter</H4>
<P>
Certain <B>ScsiPort</B><I>Xxx</I>&nbsp;routines can be called <I>only</I>&nbsp;from the
miniport driver’s HwScsiFindAdapter routine(s), in particular, the following: 
<UL>
<LI>
<B>ScsiPortGetBusData</B>&nbsp;to get BUS_DATA_TYPE-specific configuration
information, such as bus-relative device memory (access) ranges, interrupt
vector or IRQL, DMA channel or port, etc. 
<P>
<LI>
<B>ScsiPortValidateRange</B>&nbsp;to verify that a miniport-supplied bus-relative
access range has not already been claimed in the registry by another driver
for its device 
<P>
<LI>
<B>ScsiPortGetDeviceBase</B>&nbsp;to map the (bus-relative) “physical” address
range for an HBA to a system-assigned logical address range that the driver
can use to communicate with the HBA by calling the <B>ScsiPortRead</B><I>Xxx</I>
and <B>ScsiPortWrite</B><I>Xxx</I>&nbsp;routines with the mapped logical range
addresses
<P>
<LI>
<B>ScsiPortFreeDeviceBase</B>&nbsp;to release such a mapped range if
HwScsiFindAdapter does not find an HBA it can support on a given I/O bus, as
indicated by the PORT_CONFIGURATION_INFORMATION <B>SystemIoBusNumber</B>&nbsp;value
<P>
<LI>
<B>ScsiPortGetUncachedExtension</B>&nbsp;to allocate a DMA buffer shared between
the system and a busmaster HBA 
</UL>
<P>
For more information about the PORT_CONFIGURATION_INFORMATION structure and
these <B>ScsiPort</B><I>Xxx</I>&nbsp;routines, see also the <I>Kernel-Mode Driver
Reference</I>. 
<P></FONT>
</BODY>
</HTML>
