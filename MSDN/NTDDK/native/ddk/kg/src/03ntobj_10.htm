<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.3  Adapter Objects and DMA</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Adapter_Objects_and_DMA_KG"></A>3.3  Adapter Objects and DMA</H2>
<P>
An NT device driver must use a system-created adapter object if it sets up its
device objects for direct I/O and its device uses DMA, as already mentioned in
<A HREF="03ntobj_8.htm">Section 3.2.4.2</A>.
<P>
Two kinds of lowest-level NT drivers must use adapter objects:
<UL>
<LI>
Drivers whose devices use the system DMA controller (also called <I>slave
devices</I>)
<P>
Such a device is said to “use system DMA.&quot;
<P>
<LI>
Drivers whose devices are busmaster adapters
<P>
Such a device, which arbitrates with the system for use of the I/O bus, is
said to “use busmaster DMA.”
</UL>
<P>
When these kinds of device drivers initialize, they call the platform-specific
NT HAL to create a set of adapter objects, representing DMA controller
channels or ports and busmaster devices. Each HAL, like the NT SCSI port
driver described in Chapter 2, is implemented as a dynamic-link library so
that NT drivers can link themselves against each HAL (or SCSI miniport drivers
against the NT SCSI port driver) and call the same support routines on every
NT platform.
<P>
For any machine running Windows NT, the set of HAL-created adapter objects
usually includes the following:
<UL>
<LI>
An adapter object for each system DMA controller channel or port to which a
slave device is attached
<P>
<LI>
An adapter object for each busmaster DMA device in the machine
</UL>
<P>
Note that the NT SCSI port driver is responsible for creating and managing
adapter objects for SCSI HBAs. An HBA-specific miniport driver supplies the
necessary data for the NT SCSI port driver to create a corresponding adapter
object when the miniport driver’s HwScsiGetConfigInfo routine executes. For
more information about SCSI miniport drivers, see <A HREF="appascsi.htm">Appendix
A</A>.
<P></FONT>
</BODY>
</HTML>
