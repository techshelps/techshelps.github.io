<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.5  Interrupt Objects</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Interrupt_Objects_KG"></A>3.5  Interrupt Objects</H2>
<P>
Each NT driver of a physical device that generates interrupts must register
its ISR when the driver initializes. The NT Kernel defines the interrupt
object type to track information about each interrupt vector, its
system-assigned DIRQL, the ISR to be called when the interrupt occurs, and so
forth.
<P>
Every NT driver should be portable across all NT platforms, including SMP
machines with several I/O buses of various types (ISA, EISA, PCI and so
forth). Consequently, the following are configurable when NT device drivers
and the system itself are loaded:
<UL>
<LI>
The set of processors on which interrupts can occur
<P>
For any Windows NT platform, this determines how many interrupt objects must
be set up to register an NT device driver’s ISR. In SMP machines, each device
driver might require an interrupt object per processor. However, the system
can perform load balancing by restricting any particular device interrupt to a
subset of available processors.
<P>
<LI>
The system-assigned interrupt vectors for every device on each I/O bus in the
machine
<P>
For Windows NT multibus machines, the bus-relative interrupt vectors of the
devices on each I/O bus must be mapped to a set of system-assigned interrupt
vectors.
<P>
<LI>
The DIRQL assigned to each system interrupt vector
<P>
For an NT device driver, the DIRQL value assigned to its mapped system vector
determines the hardware priority at which that driver’s ISR executes.
</UL>
<P>
For any Windows NT platform, the NT HAL can remap all bus-relative device
interrupt vectors to a set of machine-specific interrupt vectors, each with a
system-assigned DIRQL value. A platform-specific HAL provides hardware-level
support to both the Kernel and the I/O Manager for the I/O buses, peripherals,
and processors in each NT machine, as already shown in <A HREF="03ntobj_1.htm">Figure
3.1</A>. The HAL also provides platform-specific support for NT drivers that use
interrupt objects, as explained in the next section.
<P></FONT>
</BODY>
</HTML>
