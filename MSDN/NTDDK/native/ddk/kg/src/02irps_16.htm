<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.4.4  Mass-storage Devices and Driver Layers</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Mass_storage_Devices_and_Driver_Layers_KG"></A>2.4.4  Mass-storage Devices and Driver Layers</H3>
<P>
As already mentioned in <A HREF="02irps_3.htm">Section
2.2</A>, NT drivers for most kinds of mass-storage devices have at least one
higher-level driver layered above them: an NT file system driver like the FSD
shown previously in <A HREF="02irps_3.htm#DDK_Figure_2..3_KG">Figure 2.3</A>. While NT file
systems have much in common with all higher-level (intermediate or
highest-level class) drivers, NT places additional requirements on and
supplies additional support for file system drivers.
<P>
The following subsections illustrate representative hardware configurations
for common mass-storage devices and the corresponding layered NT drivers,
including which system-supplied file systems are layered above particular
system-supplied device drivers, such as disk, floppy, CD-ROM, or tape drivers.
<P>
Note that NT also has a “last-resort” file system driver, called the <I>RAW
file system</I>, that is layered above any driver for a mass-storage device
that no other NT file system recognizes when a file object on that device is
first opened.
<P>
The developer of a driver for a mass-storage, nonSCSI, adapter can choose
either to write a full blown driver for that adapter, or to write a miniport
driver based on the SCSI miniport model. Such an adapter-specific miniport
driver must translate SCSI-specific input, such as the SRB, into an
adapter-specific form to communicate with the mass-storage adapter. Note that
such a miniport driver only calls SCSI port routines.
<P></FONT>
</BODY>
</HTML>
