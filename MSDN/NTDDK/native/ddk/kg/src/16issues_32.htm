<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>16.8.1.3  HardwareDatabase and the System DeviceMap</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_HardwareDatabase_and_the_System_DeviceMap_KG"></A>16.8.1.3  HardwareDatabase and the System DeviceMap</H4>
<P>
Higher-level NT drivers also can use the pointer at <B>DriverObject-&gt;HardwareDatabase</B>,
which identifies the key <B>\Registry\Machine\Hardware</B>&nbsp;as shown in <A HREF="16issues_29.htm#DDK_Figure_16..6_NG">Figure
16.6</A>, to get information from or to set information in a driver-created subkey
under <B>\Registry\Machine\Hardware\DeviceMap</B>.
<P>
All driver-created subkeys of <B>DeviceMap</B>&nbsp;are volatile: that is, they are
recreated every time the system boots. Any NT driver can supply
driver-determined value entries in its <B>DeviceMap</B>&nbsp;subkey. Thus, an NT
driver can set up a subkey under the <B>DeviceMap</B>&nbsp;containing any
information that the driver writer chooses.
<DL>
<DT>
Usually, such a subkey supplies information to be consumed by a higher-level
driver or that is useful to a system administrator or end user. For example,
the NT video port driver sets up aliases between its device objects’ names and
the type of video adapter each represents. Such an alias might appear in the
registry as something like the following:
<DD>
<PRE><FONT FACE="Courier" SIZE="2">\Device\Video0:REG_SZ:\REGISTRY\Machine\System\ControlSet001 
&nbsp; &nbsp; \Services\Vga\Device0 
&nbsp;</FONT></PRE>
<DT>
The system serial driver supplies a mapping between the generic NT names of
its device objects and the corresponding Win32 names for serial ports. Such a
mapping might appear in the registry as the following value entry:
<DD>
<PRE><FONT FACE="Courier" SIZE="2">Serial0:REG_SZ:COM1 
&nbsp;</FONT></PRE>
</DL>
<P>
While the NT I/O Manager’s generic naming scheme for device objects, as
mentioned in <A HREF="16issues_30.htm">Section
16.8.1.1</A>, is designed to create a set of unique names for every device object
that can be the target of an I/O request in any particular machine, end users
and/or user-mode applications running within a protected subsystem generally
use subsystem-specific device names to request I/O operations. For more
information about setting up symbolic links between device object names and
user-mode names for the same devices, see <A HREF="16issues_42.htm">Section
16.9.1</A>.
<P>
NT device drivers can get information from and must set information in the
registry along the <B>HardwareDatabase</B>&nbsp;registry path. Device drivers get
hardware configuration information, collected by the ARC or NtDetect
component, under the key <B>\Registry\Machine\Hardware\Description</B>. They
must set configuration information about the hardware resources claimed for
their device(s) under the key <B>\Registry\Machine\Hardware\ResourceMap</B>,
as explained in Sections <A HREF="16issues_33.htm">16.8.2</A>
and <A HREF="16issues_36.htm">16.8.3</A>, respectively.
<P></FONT>
</BODY>
</HTML>
