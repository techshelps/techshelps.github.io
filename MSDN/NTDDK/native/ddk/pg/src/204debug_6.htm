<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.1.5  Accessing the Target Machine’s Symbols</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Accessing_the_Target_Machines_Symbols_PG"></A>4.1.5  Accessing the Target Machine’s Symbols</H3>
<P>
<B>WinDbg KD</B>&nbsp;must have access to the symbols for the target machine so
that the system can accurately interpret the information on the target
machine. The symbols for the Windows NT kernel and drivers are stored in <I>.dbg</I>
files; the symbols for your driver are stored in the driver’s <I>.sys</I>&nbsp;file
itself, or may have been split off into a .dbg file. For more information on
splitting symbols from a driver executable image into a .dbg file see <A HREF="204debug_13.htm">Section
4.1.12</A>.
<P>
These symbols must be copied into a specific tree layout on disk in order for
WinDbg to access them correctly. The root directory of the symbol tree may be
created at any level in the disk drives existing directory tree structure.
However, it must specifically be named <I>SYMBOLS</I>. The Symbols directory
must then have three subdirectories specifically named <I>DLL</I>, <I>SYS</I>,
and <I>EXE</I>. When the layout is finished it will have the following layout:
<PRE><FONT FACE="Courier" SIZE="2">\Symbols
&nbsp; &nbsp; \DLL
&nbsp; &nbsp; \EXE
&nbsp; &nbsp; \SYS
&nbsp;</FONT></PRE>
<P>
Symbol files for the system can be found in on the Windows NT system CD-ROM in
the <I>\SUPPORT</I>&nbsp;directory. The following files should be copied into the
directories specified for each file:
<UL>
<LI>
ntoskrnl.dbg should be copied into <I>\SYMBOLS\EXE</I>. If this computer is a
multiprocessor machine, it will be necessary to copy ntkrnlmp.dbg to
ntoskrnl.dbg in the <I>\SYMBOLS\EXE</I>&nbsp;directory.
<P>
<LI>
hal.dbg should be copied into <I>\SYMBOLS\DLL</I>. If this computer does not
use the standard x86 HAL, then the appropriate HAL symbols for that machine
should be copied to hal.dbg in the <I>\SYMBOLS\DLL</I>&nbsp;directory.
<P>
<LI>
<I>yourdriver</I>.sys (or <I>yourdriver</I>.dbg, if the symbols have been
split off into a separate .dbg file) should be copied into <I>\SYMBOLS\SYS</I>.
<P>
<LI>
<I>otherdrivers</I>.sys with which your driver interacts (or <I>otherdrivers</I>.dbg,
if the symbols have been split off into separate .dbg files) should be copied
into <I>\SYMBOLS\SYS</I>.
</UL>
<P>
Specify the symbol search path with the User DLLs command from the Options
menu of WinDbg. If you start WinDbg KD from the command line, you can use the
-y command-line option to specify the symbol search path. The path should
point to the named Symbols directory. For example, if Symbols was created a
subdirectory of C:\Foo, then the path to apply would be C:\Foo\Symbols.
<P></FONT>
</BODY>
</HTML>
