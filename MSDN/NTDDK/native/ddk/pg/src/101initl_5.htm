<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>1.2.3  Kernel Driver Initialization: Phase 5</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Kernel_Driver_Initialization_Phase_5_PG"></A>1.2.3  Kernel Driver Initialization: Phase 5</H3>
<P>
The Registry’s <B>System</B>&nbsp;hive, which is visible to users under the <B>HKEY_LOCAL_MACHINE</B>
tree after the system is running, determines the load order of all drivers in
the system. The NTLDR or OSLOADER and the I/O Manager both access the contents
of the <B>System</B>&nbsp;hive to determine which drivers should be loaded and when
each driver should be initialized.
<P>
Each driver key under the registry node <B>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services</B>
has a value entry named <B>Start</B>. The value assigned to <B>Start</B>
determines when any particular driver is loaded during the system
initialization process, as follows:
<UL>
<LI>
<B>Start</B>&nbsp;= 0 indicates the driver is loaded by NTLDR or OSLOADER during
Phase 2.
<P>
<LI>
<B>Start</B>&nbsp;= 1 indicates the driver is loaded by the I/O Manager during
Phase 5.
<P>
<LI>
<B>Start</B>&nbsp;= 2 indicates the driver is started by Service Controller
manager.
<P>
<LI>
<B>Start</B>&nbsp;= 3 indicates the driver must be manually started by using the
services icon of the Control Panel.
<P>
<LI>
<B>Start</B>&nbsp;= 4 indicates the driver was disabled and made unloadable.
</UL>
<P>
When each driver is loaded, its DriverEntry routine is automatically called by
the I/O Manager. 
<P>
For each device object created, a driver may create a corresponding value
entry with a name that is the same as the device object in the registry under <B>HKEY_LOCAL_MACHINE\Hardware\DeviceMap</B>.
<P>
Both the created value entry in the registry <B>DeviceMap</B>&nbsp;and the symbolic
link are <I>volatile</I>: each is regenerated automatically every time the
machine is booted, based on the drivers that were initialized by the I/O
Manager. Both are logical names representing a device in the machine.
<P></FONT>
</BODY>
</HTML>
