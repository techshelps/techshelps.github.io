<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.1.2  Configuration Registry</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Configuration_Registry_PG"></A>2.1.2  Configuration Registry</H3>
<P>
The registry is a database where configuration information is stored. This
database takes the place of most configuration and initialization files. Data
in the registry is structured as a hierarchical tree of keys and values. The
database is something like a file system, in that each key can contain both
subkeys (analogous to directories) and data entries or values (analogous to
files). A key will have an associated security descriptor to control access to
its data. For more information about the registry, refer to the Registry
overview in the Win32 online documentation.
<P>
Device drivers can use the registry to store a variety of information. In
general, drivers should make use of the registry to store all data they wish
to maintain across boots. In addition, drivers can access the registry to
obtain information stored there by the system or by other programs or drivers.
For a discussion of registry use by device drivers, refer to the <I>Kernel-mode
Drivers Design Guide.</I>
<P>
Two trees in the registry are useful during driver installation:
<P>
<B>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services</B>
<P>
Each installed driver is required to have a key under this tree. At boot time,
the system looks for a set of value entries under each driver’s key in the <B>Services</B>
tree to determine whether and when to load the driver. A driver can store
additional driver-defined data under its key in the <B>Services</B>&nbsp;tree.
Information stored under this key is available to the driver during its
initialization. This is the safest place to preserve data that is vital to
your driver, because the data is stored in the system hive. The system takes
extra precautions to protect the system hive (for example, keeping multiple
copies). For additional information about the Services database, refer to the
Services overview in the Win32 SDK online documentation.
<P>
<B>HKEY_LOCAL_MACHINE\SOFTWARE</B>
<P>
Use this tree to store information about the driver software.
<P></FONT>
</BODY>
</HTML>
