<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SetupDiBuildDriverInfoList</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_SetupDiBuildDriverInfoList_PG"></A>SetupDiBuildDriverInfoList</H4>
<P>
<B>BOOLEAN</B><BR>
&nbsp; &nbsp; <B>SetupDiBuildDriverInfoList(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN HDEVINFO</B>&nbsp;<I>DeviceInfoSet</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN OUT PSP_DEVINFO_DATA</B>&nbsp; <I>DeviceInfoData</I><B>,</B>&nbsp; &nbsp; /* optional */<BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN DWORD</B>&nbsp; <I>DriverType</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>SetupDiBuildDriverInfoList</B>&nbsp;builds a list of drivers associated with a
specified device instance or with the device information set&#39;s global
class driver list. 
<H5>Parameters</H5>
<DL>
<DT>
<I>DeviceInfoSet</I>
<DD>
Supplies a handle to the device information set to contain the driver
information list (either globally for all members or specifically for a single
member).
<BR>
<DT>
<I>DeviceInfoData</I>
<DD>
Supplies a pointer to the SP_DEVINFO_DATA structure for the device information
member for which to build a driver list. If this parameter is NULL, the list
is associated with the device information set and not with a particular device
information element. Use NULL with driver lists of type SPDIT_CLASSDRIVER
only.
<P>
If the class of this device is updated as a result of building a compatible
driver list, the <B>ClassGuid</B>&nbsp;field of the SP_DEVINFO_DATA structure is
updated upon return.
<BR>
<DT>
<I>DriverType</I>
<DD>
Specifies what type of driver list to build. Must be one of the following
values:
<DL>
<DT>
SPDIT_CLASSDRIVER
<DD>
Build a list of class drivers.
<BR>
<DT>
SPDIT_COMPATDRIVER
<DD>
Build a list of drivers for this device. <I>DeviceInfoData</I>&nbsp;must be
specified if this flag is set.
</DL>
</DL>
<H5>Return Value</H5>
<P>
The function returns TRUE if it is successful. Otherwise it returns FALSE and
the logged error can be retrieved with a call to <B>GetLastError</B>.
<H5>Comments</H5>
<P>
After this function has built the specified driver list, its constituent
elements may be enumerated by a call to <B>SetupDiEnumDriverInfo</B>.
<P>
If the driver list is associated with a device instance (that is, <I>DeviceInfoData</I>
is specified), the resulting list is composed of drivers that have the same
class as the device instance with which they are associated. If this is a
global class driver list (that is, <I>DriverType</I>&nbsp;is SPDIT_CLASSDRIVER and <I>DeviceInfoData</I>
is not specified), the class that is used when building the list is the class
associated with the device information set. If the device information set has
no associated class, drivers of all classes are used when building the list.
<P>
Another thread can terminate the building of a driver list by a call to <B>SetupDiCancelDriverInfoSearch</B>.
<H5>See Also</H5>
<P>
<B><A HREF="102instl_59.htm">SetupDiCancelDriverInfoSearch</A></B>,
<B><A HREF="102instl_70.htm">SetupDiDestroyDriverInfoList</A></B>,
<B><A HREF="102instl_73.htm">SetupDiEnumDriverInfo</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
