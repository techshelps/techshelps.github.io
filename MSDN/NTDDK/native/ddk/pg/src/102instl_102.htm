<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SetupDiRemoveDevice</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_SetupDiRemoveDevice_PG"></A>SetupDiRemoveDevice</H4>
<P>
<B>BOOLEAN</B><BR>
&nbsp; &nbsp; <B>SetupDiRemoveDevice(</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN HDEVINFO</B>&nbsp; <I>DeviceInfoSet</I><B>,</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>IN PSP_DEVINFO_DATA</B>&nbsp; <I>DeviceInfoData</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>);</B>
<P>
<B>SetupDiRemoveDevice</B>&nbsp;is the default handler for the DIF_REMOVE
installation request. It removes a device from the system.
<H5>Parameters</H5>
<DL>
<DT>
<I>DeviceInfoSet</I>
<DD>
Supplies a handle to the device information set containing the device to be
removed.
<BR>
<DT>
<I>DeviceInfoData</I>
<DD>
Supplies a pointer to an SP_DEVINFO_DATA structure for which the device
instance should be removed. This is an IN OUT parameter because the <B>DevInst</B>
field of the structure can be updated with a new handle value upon return. If
this is a global removal or the last hardware profile-specific removal, all
traces of the device instance are deleted from the registry and the
DeviceInfoSet handle is NULL.
</DL>
<H5>Return Value</H5>
<P>
The function returns TRUE if it is successful. Otherwise it returns FALSE and
the logged error can be retrieved by a call to <B>GetLastError</B>.
<H5>Comments</H5>
<P>
This function removes the device from the system. It deletes both of the
device&#39;s registry keys and dynamically stops the device if its DevInst is
active. If the device cannot be dynamically stopped, flags are set in the
Install Parameter block of the device information set that eventually cause
the user to be prompted to shut down the system. Device removal is either
global to all hardware profiles or specific to one hardware profile as
specified by the <B>ClassInstallParams</B>&nbsp;field of the structure.
<H5>See Also</H5>
<P>
<A HREF="102instl_113.htm">SP_DEVINFO_DATA</A>, <A HREF="102instl_123.htm">SP_REMOVEDEVICE_PARAMS</A>
<P></FONT>
</BODY>
</HTML>
