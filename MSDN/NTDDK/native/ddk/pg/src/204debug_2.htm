<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.1.1  Establishing a Kernel Debugging Session</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Establishing_a_Kernel_Debugging_Session_PG"></A>4.1.1  Establishing a Kernel Debugging Session</H3>
<P>
Set up a kernel debugging session as follows:
<OL>
<LI>
Connect the host and target machines with a null-modem serial cable, using any
available port. The connection should then be tested. For details on the cable
and how to test a connection, see <A HREF="204debug_3.htm">Section
4.1.2</A>.
<P>
<LI>
On the target machine:
<P>
<UL>
<LI>
Install the checked build of Windows NT. It is necessary that this be the same
version of Windows NT as you install on the host. For more information on
installing a checked build of Windows NT, please see the <I>Getting Started</I>
guide.
<P>
<LI>
Install your driver. For more information on installing Windows NT device
drivers, see <A HREF="102instl.htm">Chapter 2</A>&nbsp;of this guide.
<P>
<LI>
Enable kernel debugging for this system using the appropriate options for the
port that is connected to the host machine. For more information on enabling
debugging, see <A HREF="204debug_5.htm">Section
4.1.4</A>&nbsp;
</UL>
<P>
<LI>
On the host machine:
<P>
<UL>
<LI>
Install the free build of Windows NT. It is necessary that this be the same
version of Windows NT as you install on the target. For more information on
installing a free build of Windows NT, please see the <I>Getting Started</I>
guide.
<P>
<LI>
Install the SDK, which also installs <B>WinDbg</B>.
<P>
<LI>
Copy the symbols from the target machine to the host machine into the symbol
tree. For information on the exact layout of the symbol tree see <A HREF="204debug_6.htm">Section
4.1.5</A>.
<P>
<LI>
Copy your driver’s source to the host machine.
<P>
<LI>
Start <B>WinDbg </B>with kernel debugging enabled. For more information on
starting <B>WinDbg</B>&nbsp;as a kernel debugger, see <A HREF="204debug_7.htm">Section
4.1.6</A>&nbsp;
<P>
<LI>
Using the User DLLs dialog box from the Options menu, specify the symbol
search path to the symbol tree where you copied the required symbols.
<P>
<LI>
Using the Debug dialog box from the Options menu, specify the source search
path to where you copied the source for your driver.
<P>
<LI>
Select Go from the Run menu and wait for “KD: waiting to connect...” message
to appear in the Command window.
</UL>
<P>
<LI>
Boot the target machine and select the version of Windows NT for which you
enabled kernel debugging. To have <B>WinDbg </B>automatically stop the system
at initial load time, you can set the Initial Breakpoint option in the Options
dialog.
<P>
<LI>
To break into <B>WinDbg</B>, press CTRL+C on the host machine, or press SYSRQ
on the target machine. To continue execution, select Go from the Run menu.
</OL>
<P></FONT>
</BODY>
</HTML>
