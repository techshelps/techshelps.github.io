<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>2.3.1  Miniport NIC Driver Upper-Edge Functions</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Miniport_NIC_Driver_Upper_Edge_Functions_NG"></A>2.3.1  Miniport NIC Driver Upper-Edge Functions </H3>
<P>
The miniport NIC driver must export some or all of the functions described in
the following table. NDIS calls these functions on behalf of other layers of
the network software, such as a higher level protocol driver that is bound to
a NIC managed by the NIC driver. 
<P>
Some of the NIC driver functions are inherently synchronous, while others can
complete either synchronously or asynchronously. When a miniport function
returns the status NDIS_STATUS_PENDING, the miniport must later complete the
request by calling the appropriate <B>NdisM...Complete</B>&nbsp;function. NDIS
takes care of any further coordination with other layers, calling the
completion functions of those layers for asynchronous requests as required. 
<P>
Names of the miniport driver functions discussed here use Miniport as a
generic prefix. Functions written for an actual miniport driver should be
named with a more descriptive prefix in place of the Miniport prefix to make
debugging easier. Because the addresses of the functions (not the names) are
passed to the NDIS library during initialization, function naming is at the
discretion of the driver developer. 
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Function </B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Description</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Async Option</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>DriverEntry</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Called by the operating system to activate and initialize the NIC driver. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Not Applicable
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportCheckForHang
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Checks the internal state of the network interface card. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportDisableInterrupt
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Disables the network interface card from generating interrupts. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportEnableInterrupt
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Enables the network interface card to generate interrupts.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportHalt
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Deallocates and deregisters resources used for the NIC, and halts the NIC so
it is no longer functioning.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportHandleInterrupt
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Deferred processing function called to complete interrupt-driven I/O
processing.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportInitialize
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Initializes the network interface card. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportISR
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Runs at a high priority as the interrupt service function for the network
interface card. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportQueryInformation
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Queries the capabilities and current status of the miniport driver. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportReconfigure
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Not used. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportReset
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Issues a hardware reset to the network interface card. 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportSend
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Transmits a packet through the network interface card onto the network.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportSetInformation
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Changes (sets) information about the miniport driver or its NIC.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportTransferData
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Copies the contents of a packet received by the network interface card into a
given packet buffer.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportSendPackets
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Transmits an array of packets through the network interface card onto the
network.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Yes
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportReceivePacket
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Receives a packet from an upper layer that was previously passed up by a call
to <B>NdisMIndicateReceivePacket</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportAllocateMemoryComplete
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Called to indicate that a preceding call to <B>NdisMAllocateMemoryAsync</B>&nbsp;is
now complete.
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No
</FONT></TABLE>
<P>
The corresponding NDIS completion function that is associated with each
possibly asynchronous upper-edge driver function is listed here. 
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Function </B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Asynchronous Completion Function</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportQueryInformation
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>NdisMQueryInformationComplete</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportReset
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>NdisMResetComplete</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportSend
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>NdisMSendComplete</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportSetInformation
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>NdisMSetInformationComplete</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MiniportTransferData
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>NdisMTransferDataComplete</B>
</FONT></TABLE>
<P></FONT>
</BODY>
</HTML>
