<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>4.4.2  Completion Options</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Completion_Options_NG"></A>4.4.2  Completion Options</H3>
<P>
MiniportSendPackets is passed an array of packets (although a single packet
could be passed this way). The status must be set individually in the OOB data
block for each packet descriptor in the array before returning. 
<P>
For instance, the miniport might return NDIS_STATUS_PENDING for a packet in
the array to indicate that the miniport is not done with such a packet. It is
also possible for the miniport to reject one or more packets in an array due
to a lack of available resources, such as transmit buffer space in the NIC. In
this case, MiniportSendPackets sets the <B>Status</B>&nbsp;member for the first
rejected packet in the array to NDIS_STATUS_RESOURCES before returning. 
<P>
NDIS assumes that, if this status is set for one element, it is set in all
subsequent array elements, and NDIS then requeues the packets for resubmission
to the miniport later. In effect, the miniport relinquishes ownership,
temporarily or permanently, of any packet in an array of packets for which it
sets a <B>Status</B>&nbsp;other than NDIS_STATUS_PENDING before returning from
MiniportSendPackets. Otherwise, the miniport owns those packet resources until
it later relinquishes ownership by calling <B><A HREF="../../nr/src/103ndisx_127.htm">NdisMSendComplete</A></B>,
passing the final status of the send as a parameter to this call.
<P>
MiniportSend returns the status of the send operation as the status of the
function. It relinquishes ownership of any packet for which it returns a
status other than pending. As is true for MiniportSendPackets, if MiniportSend
returns NDIS_STATUS_PENDING for any packet, the miniport must call <B>NdisMSendComplete</B>
later when the send completes. In such a case, the status of the completed
send is returned as the <I>Status</I>&nbsp;parameter to <B>NdisMSendComplete</B>.
<P></FONT>
</BODY>
</HTML>
