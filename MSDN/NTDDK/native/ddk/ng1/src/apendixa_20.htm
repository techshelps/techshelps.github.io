<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>A.2.3.4.2  Packets</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_A.2.3.4.2_Packets_NG"></A>A.2.3.4.2  Packets</H4>
<P>
NDIS 3.0 defines a packet as a chain of one or more buffers that composes a
network message. The NIC driver or a transport driver can locate the source
and destination start locations for various packet copy operations at any
offset in any buffer of the associated packet. The NDIS interface library
includes functions that NDIS 3.0 drivers can call to allocate, construct, and
inspect packets. 
<P>
A driver forms a packet descriptor by building a chain of buffer descriptors.
NDIS 3.0 (<I>ndis.h</I>) describes a packet descriptor by an NDIS_PACKET
structure. The descriptor consists of two parts: a public component that a
driver can see and a private component that is invisible to the driver. The
public component allows a NIC or transport driver to maintain context
information about the packet. A driver can use this component to link packets
into data transfer queues. 
<P>
<B>Table A.2.7    Packet Functions </B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Function</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Definition</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_11.htm">NdisAllocatePacket</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Allocates and initializes a packet descriptor. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_12.htm">NdisAllocatePacketPool</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Allocates and initializes storage for a pool of packet descriptors. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_25.htm">NdisCopyFromPacketToPacket</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Copies data between two packets. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_40.htm">NdisFreePacket</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Returns a packet descriptor to the packet pool. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_41.htm">NdisFreePacketPool</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Terminates use of the packet pool.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_160.htm">NdisQueryPacket</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Retrieves information about a packet. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_184.htm">NdisRecalculatePacketCounts</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Recalculates packet counts and lengths.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><A HREF="../../nr/src/103ndisx_186.htm">NdisReinitializePacket</A></B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Reinitializes a packet descriptor to its initial state. 
</FONT></TABLE>
<P>
&nbsp;
<P>
In allocating packets to describe data to send over the network, a transport
driver assigns a packet descriptor; allocates and maps a buffer descriptor for
each virtually contiguous buffer that contains packet data; chains the buffer
descriptors into a packet descriptor; and issues an <B><A HREF="../../nr/src/103ndisx_193.htm">NdisSend</A></B>
request, passing a pointer to the packet descriptor. The NIC driver can then
inspect the packet descriptor and its component buffer descriptors using the
packet and buffer functions of the NDIS interface library. 
<P>
A transport driver also builds a packet descriptor to describe the
non-contiguous area into which it wants the NIC driver to copy a packet
received from the network. The transport driver can then make a call to <B><A HREF="../../nr/src/103ndisx_210.htm">NdisTransferData</A></B>
to request the NIC driver to copy data into the area the packet descriptor
indicates. 
<P></FONT>
</BODY>
</HTML>
