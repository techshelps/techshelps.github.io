<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>B.10.3  STREAMS Pool Tracing</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_B.10.3_STREAMS_Pool_Tracing_NG"></A>B.10.3  STREAMS Pool Tracing</H3>
<P>
The STREAMS pool-tracing facility can be used to trace allocations from pool
memory. This facility operates similar to the message-tracing feature. The
following command formats are available:
<PRE><FONT FACE="Courier" SIZE="2">&nbsp; &nbsp; strmdbg -p flush            // flushes the tracing table
&nbsp; &nbsp; strmdbg -p on               // enables pool tracing
&nbsp; &nbsp; strmdbg -p off              // disables pool tracing
&nbsp; &nbsp; strmdbg -p print            // dumps the table too the debugger
&nbsp;</FONT></PRE>
<P>
Code that modifies pool memory after deallocating it can be tracked by tracing
recent allocations. The following command provides this facility:
<PRE><FONT FACE="Courier" SIZE="2">&nbsp; &nbsp; strmdbg -n on               // enables pool history tracing
&nbsp; &nbsp; strmdbg -n off              // disables pool history tracing
&nbsp;</FONT></PRE>
<P>
STREAMS maintains a circular log in memory of recent pool operations by
address, size, file, and line number. An individual log is kept for each
processor. The log can be dumped by issuing the following commands at the
kernel debugger prompt:
<PRE><FONT FACE="Courier" SIZE="2">&nbsp; &nbsp; da streams!StrmPoolLogList
&nbsp; &nbsp; da
&nbsp; &nbsp; da
&nbsp; &nbsp; ...
&nbsp;</FONT></PRE>
<P>
The next entry in the circular buffer will be marked as will the end of the
log for each processor.
<P></FONT>
</BODY>
</HTML>
