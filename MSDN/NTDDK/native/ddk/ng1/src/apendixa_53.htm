<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>A.4.1.3  Memory Mapping for Physical Addresses</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_A.4.1.3_Memory_Mapping_for_Physical_Addresses_NG"></A>A.4.1.3  Memory Mapping for Physical Addresses</H3>
<P>
Memory mapping allows the NDIS interface library to associate the virtual
address of a buffer with the addresses of the physical segments that make up
the buffer. At initialization, your NIC driver must specify the number of map
registers needed and, for each mapping, the map register for <B><A HREF="../../nr/src/appdxa_96.htm">NdisRegisterAdapter</A></B>
to use. For memory mapping, the driver should first call<B>&nbsp;<A HREF="../../nr/src/appdxa_103.htm">NdisStartBufferPhysicalMapping</A></B>.
The physical addresses that this function writes are valid for netcard use
only until the driver finishes the mapping by calling <B><A HREF="../../nr/src/appdxa_65.htm">NdisCompleteBufferPhysicalMapping</A></B>.
Through the virtual address, the driver can only access data the netcard
copies into operating system memory after the mapping is complete. 
<P>
<B>Note</B>&nbsp; An NDIS 3.0 NIC driver cannot allocate memory from its ISR or
DPR. 
<P></FONT>
</BODY>
</HTML>
