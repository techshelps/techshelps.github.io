<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>5.1  Windows NT RAS Architecture</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Windows_NT_RAS_Architecture_NG"></A>5.1  Windows NT RAS Architecture</H2>
<P>
This section shows the relationship of Windows NT RAS and how drivers for wide
area network cards such as ISDN, X.25, and Switched 56 adapters use the
services of NDIS and NDISWAN to communicate in a WAN environment.
<P>
<IMG SRC="../art/ng2_05.gif" BORDER=0>
<P>
The following describes the NDISWAN intermediate NDIS driver and the NDISTAPI
driver and provide a more detailed view of the entire RAS system.
<P>
The components of RAS that are shown in this picture are described next.
<H5>RAS Functions</H5>
<P>
This set of functions allows user-mode applications to make RAS connections.
After a RAS connection is established, applications can connect to network
services using standard network interfaces such as Windows Sockets, NetBIOS,
Named Pipes, or RPC.
<H5>PPP Authentication and Control Protocols</H5>
<P>
PPP Authentication (PAP, CHAP) and network configuration protocols (IPCP,
IPXCP, NBFCP, LCP, and so forth) are provided by the RAS system component. A
WAN NIC driver implements only PPP media-specific framing. However, if a WAN
NIC driver manages a NIC that implements these capabilities in hardware, it
replaces this NDISWAN capability. The miniport informs NDISWAN during driver
initialization when it responds to the OID_WAN_GET_INFO query.
<H5>User-Mode TAPI</H5>
<P>
This component presents an SPI interface to user-mode applications and
converts user-mode requests to corresponding TAPI OIDs. 
<H5>NDISTAPI</H5>
<P>
This component implements TAPI with a kernel-mode portion of the TAPI
interface. The <I>ndistapi.sys</I>&nbsp;component communicates with WAN drivers by
routing TAPI-related OID requests with the <B>NdisRequest</B>&nbsp;function to the
appropriate WAN driver. 
<H5>NDISWAN </H5>
<P>
The NDISWAN intermediate NDIS driver supports PPP protocol/link framing,
compression, and encryption. NDISWAN converts an NDIS_PACKET from an upper
layer transport driver to an NDIS_WAN_PACKET and passes the reformatted packet
to an underlying WAN NIC miniport driver. The <I>ndiswan.sys</I>&nbsp;driver
communicates with WAN NIC drivers through two interfaces:
<OL>
<LI>
The NDIS WAN interface
<P>
<LI>
The NDIS miniport NIC driver interface
</OL>
<H5>Serial Driver</H5>
<P>
This component is a standard Windows NT device driver for internal serial
ports or multiport serial cards. The built-in asynchronous WAN miniport NIC
driver for Windows NT uses the internal serial driver for modem
communications. Any driver that exports the same functions as the Windows NT
serial driver will work with the built-in async WAN NIC driver.
<P>
X.25 vendors can choose to implement serial driver emulators for the X.25
card. In this case, each virtual circuit on the X.25 card appears as a serial
port (with an X.25 PAD attached to it). The connection interface must
correctly emulate serial signals such as DTR, DCD, CTS, RTS, and DSR.
<P>
X.25 vendors who choose to implement a serial driver emulator for their X.25
card must also make an entry for their PAD in the <I>pad.inf</I>&nbsp;file. This
file contains the command/response script needed to make a connection through
the X.25 PAD. See the <I>Remote Access Service Administrator’s Guide</I>&nbsp;for
details on the <I>pad.inf</I>&nbsp;file.
<H5>NDIS WAN Miniport NIC Driver</H5>
<P>
ISDN, Switched 56, and X.25 vendors should write a WAN NIC driver for their
adapters.
<P></FONT>
</BODY>
</HTML>
