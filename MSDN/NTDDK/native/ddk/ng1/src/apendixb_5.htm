<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>B.2.2  STREAMS Driver and Module Registration Functions</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_B.2.2_STREAMS_Driver_and_Module_Registration_Functions_NG"></A>B.2.2  STREAMS Driver and Module Registration Functions</H3>
<P>
STREAMS transport drivers and modules are compiled into NT drivers which are
not linked into the kernel or the STREAMS binaries. They register their
streamtab structure and other information needed by STREAMS by use of the
following functions, detailed in the paragraphs below:
<UL>
<LI>
StrmRegisterDriver
<P>
<LI>
StrmRegisterModule
</UL>
<H5>StrmRegisterDriver</H5>
<P>
The function <B>StrmRegisterDriver</B>&nbsp;registers a STREAMS driver with Windows
NT.
<PRE><FONT FACE="Courier" SIZE="2">NTSTATUS
StrmRegisterDriver(
&nbsp; &nbsp; IN PDRIVER_OBJECT <I>driverobject</I>,
&nbsp; &nbsp; IN struct streamtab <I>*ptr</I>,
&nbsp; &nbsp; IN char *<I>subsystem</I>&nbsp;OPTIONAL,
&nbsp; &nbsp; IN PSTREAMS_TDI_INFO <I>ptdiinfo</I>&nbsp;OPTIONAL
&nbsp; &nbsp; );
&nbsp;</FONT></PRE>
<H5>Parameters</H5>
<DL>
<DT>
<I>driverobject</I>
<DD>
Points to Windows NT driver object that contains the STREAMS driver.
<BR>
<DT>
<I>ptr</I>
<DD>
Points to relevant STREAMS information.
<BR>
<DT>
<I>subsystem</I>
<DD>
Optionally points to subsystem name, or NULL if stack is fully parallel.
<BR>
<DT>
<I>ptdiinfo</I>
<DD>
Optionally points to information about driver for TDI.
</DL>
<H5>StrmRegisterModule</H5>
<P>
The function <B>StrmRegisterModule</B>&nbsp;registers a STREAMS module with Windows
NT.
<PRE><FONT FACE="Courier" SIZE="2"><B>NTSTATUS</B>
StrmRegisterModule(
&nbsp; &nbsp; IN PDRIVER_OBJECT <I>driverobject</I>,
&nbsp; &nbsp; IN struct streamtab <I>*ptr</I>,
&nbsp; &nbsp; IN char <I>*subsystem</I>&nbsp;OPTIONAL
&nbsp; &nbsp; );
&nbsp;</FONT></PRE>
<H5>Parameters</H5>
<DL>
<DT>
<I>driverobject</I>
<DD>
Points to Windows NT driver object that contains the STREAMS module.
<BR>
<DT>
<I>ptr</I>
<DD>
Points to relevant STREAMS information.
<BR>
<DT>
<I>subsystem</I>
<DD>
Optionally points to subsystem name, or NULL if stack is fully parallel.
</DL>
<P></FONT>
</BODY>
</HTML>
