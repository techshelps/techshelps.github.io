<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>7.1.1  Installing NDIS WAN drivers</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Installing_NDIS_WAN_drivers_NG"></A>7.1.1  Installing NDIS WAN drivers</H3>
<P>
This section provides information on how to install an NDIS WAN driver such
that Remote Access setup can be configured to use that driver.
<P>
Write a configuration utility that installs the driver. Package the
configuration utility as a DLL that can be started from the network control
panel by using an installation script (<I>.inf</I>&nbsp;file). Users can then
install the NIC by using the network control panel application, clicking the
“Add Adapter” button, and installing the correct driver.
<H5>Port Naming</H5>
<P>
ISDN Adapters:              ISDN1, ISDN2, ... ISDN<I>m</I><BR>
Switched 56 Adapters:    Sw56_1, Sw56_2, ... Sw56_<I>m</I><BR>
X.25 Adapters:               X25_1, X25_2, ... X25_<I>m</I>. 
<P>
&nbsp; &nbsp; where <I>m</I>&nbsp;represents the number of the card starting with one.
<H5>Windows NT Registry</H5>
<P>
Service providers should store their configured data in the following location
and format in the registry. If the <B>TAPI DEVICES</B>&nbsp;key does not already
exist, the service provider setup script should create the key and add the
entries corresponding to the addresses configured by the user. This
installation script should remove the service provider key and the
corresponding value if (or when) the user deletes the WAN miniport from the
network control panel application. 
<P>
A detailed description of each key follows the registry layout shown here:
<P>
<B>HKEY_LOCAL_MACHINE</B><BR>
&nbsp; &nbsp; <B>SOFTWARE</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; <B>MICROSOFT</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>RAS</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>TAPI DEVICES</B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<I>Service Provider 1</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Media Type:</B>&nbsp;<B>REG_SZ:</B>&nbsp; <I>media_type</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Address: REG_MULTI_SZ:</B>&nbsp; <I>address1</I>&nbsp; <I>address2</I>
..<I>addressN</I>
<P>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<I>Service Provider 2</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Media Type: REG_SZ:</B>&nbsp; <I>media_type</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Address: REG_MULTI_SZ:</B>&nbsp; <I>address1</I>&nbsp; <I>address2</I>
..<I>addressN</I>
<P>
<I>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>&nbsp;. . .</I></B>
<P>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<I>Service Provider N</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Media Type: REG_SZ:</B>&nbsp; <I>media_type</I><BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <B>Address: REG_MULTI_SZ:</B>&nbsp; <I>address1</I>&nbsp; <I>address2</I>
..<I>addressN</I>
<DL>
<DT>
<B>Service Provider</B>&nbsp;<I>N</I>
<DD>
This is the name of the service provider. This name corresponds to the service
name in the registry, for example, ISDNDRV, X25DRV, SW56DRV, and so forth.
<BR>
<DT>
<B>Media Type</B>
<DD>
This is the name of the media type, for example ISDN, X25_, Sw56_, and so
forth. RAS setup uses the <B>ServiceProvider</B>&nbsp;and <B>MediaType</B>&nbsp;entries
to make the friendly name in the absence of a friendly name, for example,
X25DRVX25_1, SW56DRVSw56_1, and so forth.
<BR>
<DT>
<B>Address</B>
<DD>
This is a list of addresses that uniquely identifies each end point. Each
address is a string made up of the following three elements:
<UL>
<LI>
Net adapter number <FONT FACE="Symbol">&#190;</FONT> this corresponds to the
network card number associated with the device adapter. For example, if there
are two ISDN cards associated with the same service provider, each card has a
corresponding net adapter number. These net adapter numbers are enumerated in
the <B>NetworkCards</B>&nbsp;key in the <B>HKEY_LOCAL_MACHINE</B><BR>
<B>\SOFTWARE\Microsoft\Windows NT\CurrentVersion</B>&nbsp;registry tree.
<P>
<LI>
Line Number<B>&nbsp;</B><FONT FACE="Symbol">&#190;</FONT> this is the number that
identifies the particular line within each adapter.
<P>
<LI>
End Point<B>&nbsp;</B><FONT FACE="Symbol">&#190;</FONT> if a line supports more
than one end point (for example, channel number in the case of ISDN or port
number for serial ports), this value corresponds to that end point, otherwise
it defaults to zero.
</UL>
</DL>
<P>
The following example shows how the registry might look if there were an ISDN
adapter with one line supporting either or both channels; an X25 adapter
supporting 4 virtual circuits; and two Switched 56K adapters, one with a
single line and another with two lines, both adapters supported by the same
driver. The <B>NetworkCards</B>&nbsp;key is assumed to have assigned the numbers 1,
2, 3, 4 to these adapters.
<H5>Example</H5>
<P>
&nbsp; &nbsp; ISDNDRV<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Media Type: REG_SZ: ISDN<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Address REG_MULTI_SZ “1 1 0” “1 1 1” “1 1 3”<BR>
&nbsp; &nbsp; X25DRV<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Media Type: REG_SZ: X25_<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Address: REG_MULTI_SZ: “2 1 0” “2 1 1&quot; “2 1 2” “2 1 3”<BR>
&nbsp; &nbsp; SW56DRV<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Media Type: REG_SZ: Sw56_<BR>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Address: REG_MULTI_SZ: “3 1 0” “4 1 0” “4 2 0”
<P></FONT>
</BODY>
</HTML>
