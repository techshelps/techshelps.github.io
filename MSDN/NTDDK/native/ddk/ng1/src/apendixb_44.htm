<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>B.8.5.2  Binding a Stream to a Network Adapter Device</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_B.8.5.2_Binding_a_Stream_to_a_Network_Adapter_Device_NG"></A>B.8.5.2  Binding a Stream to a Network Adapter Device</H4>
<P>
Usually, the lower edge of a STREAMS stack must be bound to one or more
network adapter devices. This is best done by having the plumbing daemon for
the stack issue a DATAL_IBIND IOCTL command to the <B>dndis</B>&nbsp;driver (open <B>\Device\Streams\dndis</B>).
<P>
<B>Example: Associating a Stream with the Lance Network Adapter</B>
<PRE><FONT FACE="Courier" SIZE="2">#include &lt;dl_ctrl.h&gt;
&nbsp;
cf_ndisdrv()
{
&nbsp; &nbsp; int result;
&nbsp; &nbsp; HANDLE fd;
&nbsp; &nbsp; struct strioctl StrIoctl;
&nbsp; &nbsp; struct datal_ibind DatalIbind;
&nbsp;
&nbsp; &nbsp; fd = s_open(&quot;\Device\Streams\dndis&quot;, 0, 0);
&nbsp;
&nbsp; &nbsp; strncpy(
&nbsp; &nbsp; &nbsp; &nbsp; DatalIbind.buffer, 
&nbsp; &nbsp; &nbsp; &nbsp; &quot;\Device\Lance01&quot;, 
&nbsp; &nbsp; &nbsp; &nbsp; sizeof(DatalIbind.buffer) - 1
&nbsp; &nbsp; &nbsp; &nbsp; );
&nbsp;
&nbsp; &nbsp; RtlInitString(&amp;DatalIbind.adapter_name, DatalIbind.buffer);
&nbsp;
&nbsp; &nbsp; Strioctl.ic_cmd = DATAL_IBIND;
&nbsp; &nbsp; StrIoctl.ic_len = sizeof(DatalIbind);
&nbsp; &nbsp; StriIoctl.ic_dp = (char *) &amp;DatalIbind;
&nbsp;
&nbsp; &nbsp; result = s_ioctl(fd, I_STR, &amp;StrIoctl);
&nbsp;
&nbsp; &nbsp; // now I_LINK fd under the ip driver
&nbsp; &nbsp; ...
}</FONT></PRE>
<P></FONT>
</BODY>
</HTML>
