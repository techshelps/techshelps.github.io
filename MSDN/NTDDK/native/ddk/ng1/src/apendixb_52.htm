<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>B.10  Debugging a Streams Driver</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_B.10_Debugging_a_Streams_Driver_NG"></A>B.10  Debugging a Streams Driver</H2>
<P>
The <B>strmdbg</B>&nbsp;utility provides some useful facilities for debugging
STREAMS drivers. It provides services to track the allocation/deallocation of
STREAMS messages and the allocation/deallocation of kernel pool memory. It
also provides spin lock usage tracing and queue status information.
<P>
<B>Note</B>&nbsp; The <B>strmdbg</B>&nbsp;command only operates on a checked version of
STREAMS.SYS. Supporting this tool required modifying the definitions of some
of the functions exported by STREAMS.SYS. Macros in the header file <B>debugapi.h</B>
transparently redefine the necessary functions to implement the debugging
features. Thus, a free build of <I>streams.sys </I>and a checked version of a
driver <I>will not interoperate</I><B>, </B>and vice versa. The transport
driver will fail to load if they are mixed because the loader will be unable
to resolve some of the driver’s imports. The Service Controller will log an
event if this situation occurs with drivers loaded under its control.
<P>
The output of the program is to the kernel debugger. The basic command is:
<PRE><FONT FACE="Courier" SIZE="2">&nbsp; &nbsp; strmdbg
&nbsp;</FONT></PRE>
<P></FONT>
</BODY>
</HTML>
