<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.2.6  Synchronization During Initialization</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Synchronization_During_Initialization_NG"></A>3.2.6  Synchronization During Initialization</H3>
<P>
When a miniport initializes its NIC, it might need to wait for a state change
before continuing execution. NDIS provide two mechanisms that can be used.
<P>
MiniportInitialize can call <B><A HREF="../../nr/src/103ndisx_135.htm">NdisMSleep</A></B>&nbsp;to
delay execution for a specified interval expressed in microseconds. When
MiniportInitialize calls <B>NdisMSleep</B>, it is put into a suspended state.
When the sleep interval expires, MiniportInitialize resumes execution.
MiniportInitialize should <I>not </I>call <B><A HREF="../../nr/src/103ndisx_206.htm">NdisStallExecution</A></B>,
a function that is only called at raised IRQL and only for intervals less than
50 microseconds.
<P>
MiniportInitialize can also synchronize with events. MiniportInitialize can
create an event by calling <B><A HREF="../../nr/src/103ndisx_77.htm">NdisInitializeEvent</A></B>.
Then after MiniportInitialize writes to its NIC, it calls <B><A HREF="../../nr/src/103ndisx_215.htm">NdisWaitEvent</A></B>.
When an interrupt occurs and MiniportHandleInterrupt runs, it clears the
interrupt on the NIC and sets the event by calling <B><A HREF="../../nr/src/103ndisx_195.htm">NdisSetEvent</A></B>.
MiniportInitialize, which was waiting on the event, now has its wait
satisfied, so it clears the event by calling <B><A HREF="../../nr/src/103ndisx_190.htm">NdisResetEvent</A></B>
and continues with its execution.
<P></FONT>
</BODY>
</HTML>
