<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>3.1.3.3  Choosing a Send Function</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Choosing_a_Send_Function_NG"></A>3.1.3.3  Choosing a Send Function </H4>
<P>
A miniport NIC driver can handle sends in either of two ways:
<OL>
<LI>
By supplying a MiniportSendPackets function
<P>
In this case, the miniport receives more than one packet in a single call,
passed as an array of pointers to packets to send to its adapter.
<P>
<LI>
By supplying a MiniportSend function
<P>
In this case, a miniport receives a single packet at its MiniportSend function
for sending to its adapter.
</OL>
<P>
A miniport NIC driver developer can choose to support one or the other but not
both of these functions, that is, when it calls <B>NdisMRegisterMiniport</B>,
it supplies either a MiniportSend or a MiniportSendPackets handler but not
both. The choice is based on whether the miniport’s NIC can handle multipacket
sends, in which case, the performance of the driver is better than if it
handles single packets.
<P>
If a miniport NIC driver supplies both entry points in
NDIS_MINIPORT_CHARACTERISTICS, NDIS will always call MiniportSendPackets to
pass send requests to the miniport.
<P>
To recapitulate, a miniport NIC driver must decide whether it will accept
several send packets or only one packet per send request. If it can accept
several send packets, it registers a <B>SendPacketsHandler</B>&nbsp;with <B>NdisMRegisterMiniport</B>.
Otherwise, the miniport registers a <B>SendHandler</B>.
<P>
Generally, a miniport provides a MiniportSendPackets function if either of the
following are true:
<UL>
<LI>
The NIC has hardware support that can achieve enhanced performance by
transmitting several packets at a time; that is, a busmaster DMA device with a
ring. For such a NIC, the miniport can set up the ring with some number of
packets and transmit them in a single operation. 
<P>
<LI>
Although the driver’s NIC can only send one packet at a time, improved
performance can be attained by queuing several packets internally to the
driver and avoiding the latency of additional calls to MiniportSend incurred
when packets are sent one at a time. 
</UL>
<P></FONT>
</BODY>
</HTML>
