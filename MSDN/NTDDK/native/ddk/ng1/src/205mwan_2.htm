<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>5.2  Implementing WAN Miniports</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Implementing_WAN_Miniports_NG"></A>5.2  Implementing WAN Miniports</H2>
<P>
In order to support such media as ISDN, Frame Relay, Switch 56, and so forth
with NT RAS, vendors must supply a WAN miniport NIC driver. The driver should
be written to the current version of NDIS, which is 4.0, however, existing
drivers written to NDIS 3.0 will continue to run. WAN NIC drivers call the
WAN-specific variations of a few NDIS functions. While a WAN miniport calls
many of the same NDIS functions as a LAN NIC driver, equivalent WAN-specific
NDIS calls replace certain LAN NIC driver NDIS calls. In addition, a WAN
miniport driver provides a WAN-specific send function whose definition differs
from the definition of the MiniportSend function implemented by LAN miniport
NIC drivers. These WAN-specific calls are described here.
<P>
WAN miniport drivers communicate with the NDISWAN intermediate NDIS driver
through the NDIS library. NDISWAN can provide common services such as data
compression, encryption, loopback, simple PPP framing, and so forth, so that
the WAN NIC drivers need only features specific to the medium (for example,
Q931 signalling required for ISDN). If a WAN miniport manages a NIC with
compression, PPP, and encryption capabilities, it can specify to NDISWAN that
the driver will offload these operations. When the miniport responds to the
OID_WAN_GET_INFO query during initialization, it indicates that it will
perform one or more of these functions.
<P>
A WAN NIC driver is an NDIS miniport NIC driver that:
<UL>
<LI>
Performs connection-management operations passed from the NDISWAN intermediate
NDIS driver to the WAN NIC driver.
<P>
<LI>
Accepts send requests and indicates received data to the NDISWAN driver.
</UL>
<P>
The following sections define the interface between the NDISWAN driver and a
WAN NIC driver. Note that in addition to the information in this chapter,
developers of WAN NIC drivers also should refer to the previous chapters on
LAN miniport NIC drivers and to the <I>Network Driver Reference</I>&nbsp;for
details on the many NDIS functions, for instance, <B>NdisMSetTimer</B>, <B>NdisOpenConfiguration</B>,
and so forth, that are provided for all miniport NIC drivers.
<P></FONT>
</BODY>
</HTML>
