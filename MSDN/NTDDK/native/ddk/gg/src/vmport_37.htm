<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VGA-Compatible Miniport’s HwVidStartIO</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_VGA_Compatible_Miniports_HwVidStartIO_GG"></A>VGA-Compatible Miniport’s HwVidStartIO</H3>
<P>
When the user switches a full-screen MS-DOS application back to running in a
window, a VGA-compatible miniport’s <B>HwVidStartIO</B>&nbsp;function is sent a VRP
with the I/O control code IOCTL_VIDEO_SAVE_HARDWARE_STATE. The miniport must
store the state of the adapter in case the user switches the application to
full-screen mode again.
<P>
Note that the miniport’s SvgaHwIoPort<I>Xxx</I>&nbsp;might have buffered a sequence
of application <B>IN</B>s and/or <B>OUT</B>s, as described in <A HREF="vmport_36.htm">Validating
Instructions in SvgaHwIoPortXxx</A>, when its <B>HwVidStartIO</B>&nbsp;routine is
called to save the adapter state. In these circumstances, the miniport should
save the current state, including the buffered instructions, so that the <B>SvgaHwIoPort<I>Xxx</I></B>
can resume validation operations exactly where they left off if the user
switches the application to full-screen mode again.
<P>
When the miniport completes a save operation, the port driver automatically
disables the current IOPM for VDMs and the miniport’s <B>SvgaHwIoPort<I>Xxx</I></B>
functions. The port driver restores the IOPM automatically if the application
is switched to full-screen mode again. It also resumes calling the miniport’s
SvgaHwIoPortXxx, after it calls the miniport’s <B>HwVidStartIO</B>&nbsp;routine
with the IOCTL_VIDEO_RESTORE_HARDWARE_STATE request.
<P>
&nbsp;
<P></FONT>
</BODY>
</HTML>
