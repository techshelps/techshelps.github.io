<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Developing Windows NT Minidrivers</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Developing_Windows_NT_Minidrivers_GG"></A>Developing Windows NT Minidrivers</H2>
<P>
Unitool, version 3.06 is compatible with RasDD, although a number of file
conversions are required to prepare the minidriver for use with it. The
requirement for these conversions results from the major optimizations that
have been incorporated to enhance the performance of RasDD as follows:
<UL>
<LI>
Handles rendering. RasDD retrieves the bitmap image the graphics engine
creates and sends the bitmap to the printer.
<P>
<LI>
Scans for rules. Rules are rectangular areas that the LaserJet printer can
handle. Scanning for rules substantially reduces the volume of data sent to
the printer. In some instances, this means a page that would otherwise be too
large to fit into the printer&#39;s memory can be printed. It also permits a
grid, such as in a spreadsheet, to be sent to the printer as a number of
rules, thereby eliminating most of the graphics.
<P>
<LI>
For the font metrics, RasDD uses the IFIMETRICS structure to provide the
Windows NT version of the font metrics information which is preferred to the
PFM files.
<P>
<LI>
The Windows NT GPC extensions provide Windows NT-specific information about
the printer that is later passed to GDI. In particular, the Windows NT GPC
extensions data consists of color rendering (halftoning) information. The
Windows NT GPC data also characterizes the printing mechanism. This data
defines both the <I>effective</I>&nbsp;resolution of the printer and the default
halftone pattern size to use. The NTGPC structure also identifies minidriver
version, a size field and a field to indicate whether the minidriver uses
IFIMETRICS or PFM.
<P>
<B>Note</B>&nbsp; If the NTGPC structure is not included, the driver is assumed to
be using the Windows 3.1 format.
<P>
<LI>
Instead of the Windows 3.1 CTT, Windows NT uses the RLE format for glyph
encoding. RLE fully supports Unicode because RLE does not have the
256-character limitation CTT contains. This is particularly important for the
handling of non-latin based ideographic languages. RasDD can still use the old
format (for compatibility with 16-bit minidrivers), but the RLE format caters
to the wide characters of Unicode and speeds up Win32 <B>CreateDC</B>&nbsp;calls by
having much of the font information precomputed in the format that is required
by GDISRV.
<P>
<LI>
<I>.Inf</I>&nbsp;files are required for installation and setup. The Windows NT DDK
contains sample code for Setup including the <B>\setup\printer\oemsetup.inf</B>
file.
</UL>
<P></FONT>
</BODY>
</HTML>
