<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Determining Supported Video Adapters</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Determining_Supported_Video_Adapters_GG"></A>Determining Supported Video Adapters</H3>
<P>
As already mentioned in <A HREF="vmport_15.htm">Setting
up Video Adapter Access Ranges</A>, the <B>HwVidFindAdapter</B>&nbsp;or <B>HwVidQueryDeviceCallback</B>
function calls a <B>VideoPortRead</B><I>Xxx</I>&nbsp;or, possibly, <B>VideoPortWrite</B><I>Xxx</I>
function to identify its adapter.
<P>
However, the <B>HwVidFindAdapter</B>&nbsp;(or <B>HwVidQueryDeviceCallback</B>)
routine <I>should not </I>change the state of any video adapter unnecessarily
and <I>must not</I>&nbsp;leave any adapter in a changed state.
<P>
While the <B>HwVidFindAdapter</B>&nbsp;function runs, the HAL has control of the
video adapter so it can write information to the screen in the early stages of
the system boot process. If a <B>HwVidFindAdapter</B>&nbsp;routine’s attempt to
identify its adapter might have affected an adapter’s state, this routine
should restore the original state immediately so that on return from <B>HwVidFindAdapter</B>
the HAL can continue to display boot-up messages.
<P>
As its name suggests, a <B>HwVidFindAdapter</B>&nbsp;function is responsible for
detecting any adapters that the miniport driver supports. This function should
not change the state of any video adapter permanently.
<P>
The <B>HwVidInitialize</B>&nbsp;routine should actually initialize the adapter
because the HAL does not relinquish control of the video adapter to a video
miniport driver until its <B>HwVidInitialize</B>&nbsp;function is called. For
example, <B>HwVidFindAdapter</B>&nbsp;should defer determining the DAC type of an
adapter to the <B>HwVidInitialze</B>&nbsp;function, because making this
determination does not affect whether the miniport will be loaded but does
change the state of the adapter permanently.
<P></FONT>
</BODY>
</HTML>
