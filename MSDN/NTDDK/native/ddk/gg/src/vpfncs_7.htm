<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VideoPortGetBusData</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_VideoPortGetBusData_GG"></A>VideoPortGetBusData</H2>
<P>
<B>ULONG VideoPortGetBusData(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PVOID</B>&nbsp; <I>HwDeviceExtension</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>BUS_DATA_TYPE</B>&nbsp; <I>BusDataType</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG</B>&nbsp; <I>SlotNumber</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PVOID</B>&nbsp; <I>Buffer</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG  </B><I>Offset</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG  </B><I>Length</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp;);
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>VideoPortGetBusData</B>&nbsp;returns bus-type-specific configuration
information.
<H3>Parameters</H3>
<DL>
<DT>
<I>HwDeviceExtension</I>
<DD>
Points to the miniport driver’s device extension.
<BR>
<DT>
<I>BusDataType</I>
<DD>
Specifies the type of bus configuration data to return. Currently, the value
of this parameter can be one of the following:
<P>
<B>Cmos</B><BR>
<B>EisaConfiguration</B><BR>
<B>Pos</B><BR>
<B>PCIConfiguration</B>
<P>
However, additional types of bus configuration will be supported in the
future. The upper bound on the types supported is always <B>MaximumBusDataType</B>.
<BR>
<DT>
<I>SlotNumber</I>
<DD>
Specifies the logical slot number or, for a <B>Cmos</B>&nbsp;<I>BusDataType</I>,
the location of the device on the bus.
<P>
If <B>PCIConfiguration</B>&nbsp;is specified as the <I>BusDataType</I>, this
parameter must be specified as a <A HREF="../../kr/src/k112_37.htm">PCI_SLOT_NUMBER</A>-type
value.
<BR>
<DT>
<I>Buffer</I>
<DD>
Points to a buffer into which <B>VideoPortGetBusData</B>&nbsp;returns the
configuration information. The contents of the buffer depend on the <I>BusDataType</I>,
as follows:
<UL>
<LI>
If <B>Cmos</B>&nbsp;is specified, the buffer contains the contents of the CMOS (bus
number equals zero) or ECMOS (bus number equals one) locations, starting with
the location specified for <I>SlotNumber</I>. A miniport’s <B><A HREF="vmpfncs_3.htm">HwVidFindAdapter</A></B>
function can determine the number of the bus from the <B>SystemIoBusNumber</B>
member of the <A HREF="vstrcts_6.htm">VIDEO_PORT_CONFIG_INFO</A>
input structure.
<P>
<LI>
If <B>EisaConfiguration</B>&nbsp;is specified, the buffer contains the <A HREF="../../kr/src/k112_3.htm">CM_EISA_SLOT_INFORMATION</A>
structure, followed by zero or more <A HREF="../../kr/src/k112_2.htm">CM_EISA_FUNCTION_INFORMATION</A>
structures for the specified slot.
<P>
<LI>
If <B>Pos</B>&nbsp;is specified, the buffer contains a <A HREF="../../kr/src/k112_8.htm">CM_MCA_POS_DATA</A>
structure for the specified slot.
<P>
<LI>
If <B>PCIConfiguration</B>&nbsp;is specified, the buffer contains the <A HREF="../../kr/src/k112_36.htm">PCI_COMMON_CONFIG</A>
information for the specified slot.
</UL>
<DT>
<I>Offset</I>
<DD>
Zero for all <I>BusInterfaceType</I>&nbsp;values except <B>PCIConfiguration</B>.
Otherwise, this specifies the starting offset within the PCI_COMMON_CONFIG
structure from which the requested information should be returned. Callers can
use PCI_COMMON_HDR_LENGTH to specify the device-specific area of
PCI_COMMON_CONFIG.
<BR>
<DT>
<I>Length</I>
<DD>
Specifies the maximum number of bytes to return in <I>Buffer</I>.
</DL>
<H3>Return Value</H3>
<P>
<B>VideoPortGetBusData</B>&nbsp;returns the number of bytes of configuration
information it has written in <I>Buffer</I>. If the given <I>BusDataType</I>
is not valid for the current platform, this function usually returns zero.
<P>
When the <I>BusDataType</I>&nbsp;parameter is <B>PCIConfiguration</B>, <B>VideoPortGetBusData</B>
can return either of the following values to indicate an error:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Value</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Meaning</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
0
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
The PCI bus does not exist.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
2
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
The PCI bus exists, but there is no device at the given PCI <I>SlotNumber</I>.
The <I>Buffer</I>&nbsp;contains the value PCI_INVALID_VENDOR_ID at the
PCI_COMMON_CONFIG <B>VendorId</B>&nbsp;member.
</FONT></TABLE>
<H3>Comments</H3>
<P>
<B>VideoPortGetBusData</B>&nbsp;can be called only from a miniport’s <B>HwVidFindAdapter</B>
function.
<P>
Drivers of PCI video adapters usually call <B>VideoPortGetAccessRanges</B>
rather than <B>VideoPortGetBusData</B>.
<H3>See Also</H3>
<P>
<A HREF="../../kr/src/k112_2.htm">CM_EISA_FUNCTION_INFORMATION</A>, <A HREF="../../kr/src/k112_3.htm">CM_EISA_SLOT_INFORMATION</A>,
<A HREF="../../kr/src/k112_8.htm">CM_MCA_POS_DATA</A>, <B><A HREF="vmpfncs_3.htm">HwVidFindAdapter</A></B>,
<B><A HREF="vmpfncs_6.htm">HwVidQueryDeviceCallback</A></B>, <A HREF="../../kr/src/k112_36.htm">PCI_COMMON_CONFIG</A>,
<A HREF="../../kr/src/k112_37.htm">PCI_SLOT_NUMBER</A>, <A HREF="vstrcts_6.htm">VIDEO_PORT_CONFIG_INFO</A>,
<B><A HREF="vpfncs_6.htm">VideoPortGetAccessRanges</A></B>, <B><A HREF="vpfncs_9.htm">VideoPortGetDeviceBase</A></B>,
<B><A HREF="vpfncs_10.htm">VideoPortGetDeviceData</A></B>, <B><A HREF="vpfncs_11.htm">VideoPortGetRegistryParameters</A></B>
<P></FONT>
</BODY>
</HTML>
