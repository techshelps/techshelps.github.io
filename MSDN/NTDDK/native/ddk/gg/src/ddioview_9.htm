<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating Device-Dependent Bitmaps</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Creating_Device_Dependent_Bitmaps_GG"></A>Creating Device-Dependent Bitmaps</H2>
<P>
When an application requests the creation of a bitmap, a driver can create and
manage a <A HREF="glossary.htm#DDK_DDB_GG">DDB</A>&nbsp;by supporting the <B><A HREF="grfncs_10.htm">DrvCreateDeviceBitmap</A></B>
function. When such a driver creates the bitmap, it can store the bitmap in
any format. The driver examines the passed parameters and provides a bitmap
with at least as many bits-per-pixel as requested.
<P>
<B>Note</B>&nbsp; Graphics drivers can improve performance by supporting bitmaps in
offscreen memory and by drawing bitmaps using hardware, such as in the case of
the S3 display driver.
<P>
Within <B>DrvCreateDeviceBitmap</B>, the driver calls the GDI service <B><A HREF="grfncs_71.htm">EngCreateDeviceBitmap</A></B>
to have GDI create a handle for the device bitmap.
<P>
If the driver supports <B>DrvCreateDeviceBitmap</B>, it creates a DDB, defines
its format, and returns a handle to it. The driver controls where the bitmap
is stored, and in what format. The driver should support the color format that
matches its device surface most closely.
<P>
The contents of the bitmap are undefined after creation. If the application
has requested a device-managed bitmap, GDI calls <B>DrvBitBlt</B>&nbsp;after <B>DrvCreateDeviceBitmap</B>
returns control. If the driver returns zero, it does not create and manage the
bitmap, instead GDI performs these tasks.
<P>
If the driver creates bitmaps, it must also be able to delete them by
implementing <B><A HREF="grfncs_11.htm">DrvDeleteDeviceBitmap</A></B>.
<P></FONT>
</BODY>
</HTML>
