<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Managing Display Palettes</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_Managing_Display_Palettes_GG"></A>Managing Display Palettes</H2>
<P>
If the video hardware supports colors that can be set, it maintains a color
lookup table called a <I>palette</I>. GDI takes each RGB value and translates
it into a device color index so that it can be displayed. GDI uses
precalculated and cached tables to assist in the translation. These tables are
accessible to drivers as the user object <A HREF="grstrcts_35.htm">XLATEOBJ</A>.
Therefore, every GDI graphics function that takes source colors and moves them
to a destination device uses a XLATEOBJ structure to translate the colors. For
more information on palettes in general, and how GDI handles them, see Part 1.
<P>
If the video hardware supports palettes that can be set, GDI calls the <B><A HREF="grfncs_48.htm">DrvSetPalette</A></B>
function in the display driver when it has finished mapping colors into the
device palette requested by the application. GDI passes the new palette to the
display driver, and the driver queries the PALOBJ to set its internal hardware
palette to match (&quot;realize&quot;) the palette changes for the video
hardware.
<P>
The <B>DrvSetPalette</B>&nbsp;function supplies a handle to a <A HREF="glossary.htm#DDK_PDEV_GG">PDEV</A>
to the driver, and requests the driver to realize the palette for that device.
The driver should set the hardware palette to match the entries in the given
palette as closely as possible.
<P>
This entry point is required if the device supports a palette that can be set,
and should not be provided otherwise. A display driver specifies that its
device has a settable palette by setting the GCAPS_PALMANAGED bit in the <I>flGraphicsCaps</I>
field of the <A HREF="grstrcts_6.htm">DEVINFO</A>&nbsp;structure returned in <B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>.
<P>
The service routine <B><A HREF="grfncs_171.htm">PALOBJ_cGetColors</A></B>
is available to display drivers. This function downloads RGB colors from an
indexed palette, and should be called from within the implementation of <B>DrvSetPalette</B>.
<P></FONT>
</BODY>
</HTML>
