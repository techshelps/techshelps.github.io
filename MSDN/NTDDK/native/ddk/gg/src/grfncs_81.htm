<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>EngDeleteDriverObj</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_EngDeleteDriverObj_GG"></A>EngDeleteDriverObj</H2>
<P>
<B>BOOL EngDeleteDriverObj(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN HDRVOBJ  </B><I>hdo</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><I>&nbsp; &nbsp; </I>IN BOOL  </B><I>bCallBack</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B><I>&nbsp; &nbsp; </I>IN BOOL  </B><I>bLocked</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp;);</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>EngDeleteDriverObj</B>&nbsp;frees the handle used for tracking a driver-managed
resource.
<H3>Parameters</H3>
<DL>
<DT>
<I>hdo</I>
<DD>
Identifies the GDI handle that is to be deleted. This handle was obtained from
<B><A HREF="grfncs_73.htm">EngCreateDriverObj</A></B>.
<BR>
<DT>
<I>bCallBack</I>
<DD>
Specifies whether or not the cleanup callback should be called. If TRUE, GDI
will invoke the cleanup callback before removing the <A HREF="grstrcts_8.htm">DRIVEROBJ</A>
from the handle manager. If the callback function returns failure, <B>EngDeleteDriverObj</B>
will fail.
<BR>
<DT>
<I>bLocked</I>
<DD>
Specifies whether the object was locked by the driver (through <B>EngLockDriverObj</B>)
before <B>EngDeleteDriverObj</B>&nbsp;was called.
</DL>
<H3>Return Value</H3>
<P>
The return value is TRUE if the function is successful and the handle is
freed; it is FALSE if the handle has not been freed. If the <I>pFreeObjProc</I>
driver function specified in <B>EngCreateDriverObj</B>&nbsp;returns FALSE, then <B>EngDeleteDriverObj</B>
will fail and the handle won’t be freed. This could happen if the cleanup
callback needs to lock another DRIVEROBJ (in order to free the current
DRIVEROBJ) and fails because the other DRIVEROBJ is in use by another thread.
<H3>Comments</H3>
<P>
After the handle is freed, the associated driver resource is no longer tracked
by GDI and the function pointed to by the <I>pFreeObjProc</I>&nbsp;parameter of <B><A HREF="grfncs_73.htm">EngCreateDriverObj</A></B>
<I>will not</I>&nbsp;be called upon process termination. It is the responsibility
of the driver to ensure that the resource is freed.
<P>
Most drivers should be consistent in how objects are cleaned up at termination
time. Consequently, they will pass TRUE for <I>bCallback</I>, indicating to
GDI that it should call the driver’s cleanup function to free this driver
resource. Passing FALSE prevents GDI from calling the driver’s cleanup
function.
<P>
The <I>bCallBack</I>&nbsp;parameter indicates to GDI whether or not the callback
function needs to be called. Most drivers pass in TRUE to ensure that objects
are cleaned up consistently when an application terminates. Passing TRUE for <I>bCallBack</I>
tells GDI to call the driver’s cleanup function back to free this driver
resource. Passing FALSE prevents GDI from calling the cleanup function. If <I>pFreeObjProc</I>
returns FALSE, <B>EngDeleteDriverObj</B>&nbsp;fails and the handle won’t be freed.
For example, this could happen if the <I>pFreeObjProc</I>&nbsp;needed to lock down
another DRIVEROBJ to free the current DRIVEROBJ and failed because it was
being used by another thread. The <I>pFreeObjProc</I>&nbsp;should never fail at
cleanup time, because no threads, other than the cleanup thread, are running,
so locks of other objects won’t fail.
<P>
The <I>bLocked</I>&nbsp;parameter indicates to GDI that the object has already been
locked once by the driver. Often, before an object is deleted, the driver
might have locked it down to use first. This allows the driver to call GDI
without first having to unlock the object, thus eliminating the possibility
that another thread could enter the driver and lock it down before the handle
is freed.
<H3>See Also</H3>
<P>
<A HREF="grstrcts_8.htm">DRIVEROBJ</A>, <B><A HREF="grfncs_73.htm">EngCreateDriverObj</A></B>
<P></FONT>
</BODY>
</HTML>
