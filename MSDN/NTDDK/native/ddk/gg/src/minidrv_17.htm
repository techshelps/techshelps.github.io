<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Character-Translation Table File Formats</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Character_Translation_Table_File_Formats_GG"></A>Character-Translation Table File Formats</H3>
<P>
A character-translation table is used by RasDD to remap characters from the
printer’s native character and symbol set to the Windows ANSI set. RasDD will
provide support for some of the common code pages and symbol sets, so that
this data will not need to be redundant in a large number of individual
printer drivers. It is intended that printer drivers supporting devices with
less common code pages and symbol sets will contain their own
character-translation table resources. Any given driver can mix and match
either of these types of character-translation tables as needed.
Character-translation tables provided by RasDD are referenced from the
minidriver through negative numbers that correspond to the resource ID values
(from RasDD), and character-translation tables provided by the minidriver are
referenced by positive numbers corresponding to the resource ID values (from
the minidriver).
<P>
<B>Note</B>&nbsp; For a Windows NT minidriver, the RLE format for glyph encoding is
provided instead of the characterization tables to better support Unicode
because there is no 256 entry limitation. This is particularly important for
that translation of non-Latin based languages. The Windows NT DDK provides the
CCT2RLE program that converts the Windows 3.1 CCT format to the preferred RLE
format. This enables you to generate the RLE using the current CCT structure.
<H4>Predefined Translation Tables</H4>
<P>
RasDD will provide support for some of the common code pages and symbol sets,
and allow drivers to support less common ones. The list of
character-translation tables currently supported by RasDD is as follows:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Translation Table</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Description</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_CP437
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Translate using IBM Code Page 437.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_CP850
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Translate using IBM Code Page 850.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_BIG5
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use for Big 5 to Big 5 conversions.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_CPJIS78
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use to convert a range of single byte or double byte characters into JIS78.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_CPJIS83
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use to convert a range of single byte or double byte characters into JIS83.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_CPJIS78_ANK
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use to convert a range of double byte characters into JIS78.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_CPJIS83_ANK
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use to convert a range of double byte characters into JIS83.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_NS86
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Use to convert Chinese Big 5 to Industrial Standard Code.
</FONT></TABLE>
<H4>TRANSTAB Structure</H4>
<P>
Three formats of character-translation tables are available. The first is a
single byte-to-byte translation used for simple remappings. The second is a
single byte-to-two bytes translation, where the second character is used to
overstrike the first. The DI_BKSP_OK flag determines how the cursor should be
repositioned to overstrike the second character. The third allows a single
byte-to-variable length string that may contain commands to change symbol
sets, or whatever else is necessary, to create the desired character. This
difference between these formats is transparent to the user, but UniTool
creates the character-translation table in the format resulting in the
smallest file size depending upon the actual translations specified by the
user. Any printer commands sent from the CTT cannot change the permanent state
of the printer.
<PRE><FONT FACE="Courier" SIZE="2">typedef struct {
&nbsp; &nbsp; WORD    wType;
&nbsp; &nbsp; BYTE    chFirstChar;
&nbsp; &nbsp; BYTE    chLastChar;
&nbsp; &nbsp; union
&nbsp; &nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; short    psCode[1];
&nbsp; &nbsp; &nbsp; &nbsp; BYTE     bCode[1];
&nbsp; &nbsp; &nbsp; &nbsp; BYTE     bPairs[2][1];
&nbsp; &nbsp; &nbsp; &nbsp; } uCode;
} TRANSTAB;
&nbsp;</FONT></PRE>
<H4>Members</H4>
<DL>
<DT>
<B>wType</B>
<DD>
Translation table type. It can be one of these values:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Value</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Meaning</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_COMPOSE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>uCode</B>&nbsp;is an array of 16-bit offsets from the beginning of the file
pointing to the strings to use for translation. The length of the translated
string is the difference between the next offset and the current offset.
Please note that an additional offset is needed (<B>dfLastChar</B>&nbsp;+ 1) to
provide a means to read the length of the string for the translation of the
last character.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_DIRECT
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>uCode</B>&nbsp;is a byte array of one-to-one translation table from <B>chFirstChar</B>
to <B>chLastChar</B>.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
CTT_WTYPE_PAIRED
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>uCode</B>&nbsp;contains an array of paired, unsigned bytes. If only one
character is needed to do the translation, then the second byte is zero,
otherwise the second byte is struck over the first byte.
</FONT></TABLE>
<DT>
<B>chFirstChar</B>
<DD>
First character in character-translation table.
<BR>
<DT>
<B>chLastChar</B>
<DD>
Last character in character-translation table.
</DL>
<P></FONT>
</BODY>
</HTML>
