<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DrvQueryFontData</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_DrvQueryFontData_GG"></A>DrvQueryFontData</H2>
<P>
<B>LONG DrvQueryFontData(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN DHPDEV  </B><I>dhpdev</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN FONTOBJ  </B><I>*pfo</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN ULONG  </B><I>iMode</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; HGLYPH  </B><I>hg</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; GLYPHDATA  </B><I>pgd</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN PVOID  </B><I>pv</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; ULONG  </B><I>cjSize</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp;);</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>DrvQueryFontData</B>&nbsp;retrieves information about a realized font. GDI
provides a pointer to an array of glyph or kerning handles, and the driver
returns information about the glyphs or kerning pairs. The driver can assume
that all handles in the array are valid.
<H3>Parameters</H3>
<DL>
<DT>
<I>dhpdev</I>
<DD>
Identifies a <A HREF="glossary.htm#DDK_PDEV_GG">PDEV</A>&nbsp;returned from a prior call to <B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>.
<BR>
<DT>
<I>pfo</I>
<DD>
Points to a <A HREF="grstrcts_19.htm">FONTOBJ</A>&nbsp;structure that defines the font
realization.
<BR>
<DT>
<I>iMode</I>
<DD>
Specifies the type of information requested. This parameter can be one of the
following values:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Value</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Meaning</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
QFD_GLYPHANDBITMAP
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
If <I>pgd</I>&nbsp;is not null, then the driver should fill in the GLYPHDATA
structure with the metrics of the glyph specified by <I>hg</I>.
<P>
If <I>pv</I>&nbsp;is not null, a GLYPHBITS structure should be written at this
address. The driver should copy the glyph bitmap corresponding to the glyph
specified by <I>hg</I>&nbsp;into this structure. The size of the structure is
specified by <I>cjSize</I>.
<P>
If glyph bitmaps are not supported by the driver, this function will only be
called with <I>pv</I>&nbsp;set to null.
<P>
If the driver supports glyph bitmaps, the return value is the size, in bytes,
of the glyph bitmap. Otherwise, it is zero.
<P>
This mode must be supported.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
QFD_GLYPHANDOUTLINE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
If <I>pgd</I>&nbsp;is not null, then the driver should fill in the GLYPHDATA
structure with the metrics of the glyph specified by <I>hg</I>.
<P>
If <I>pv</I>&nbsp;is not null, a <A HREF="grstrcts_27.htm">PATHOBJ</A>&nbsp;structure should
be written at this address. The driver passes this PATHOBJ to the <B>PATHOBJ</B><I>Xxx</I>
services to create the outline for the glyph specified by <I>hg</I>. The <I>cjSize</I>
parameter should be ignored.
<P>
The return value is zero if the function is successful. Otherwise, it is
FD_ERROR.
<P>
Only font drivers that provide glyph outlines need to support this mode.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
QFD_MAXEXTENTS
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
If <I>pv</I>&nbsp;is not null, the driver should write an FD_DEVICEMETRICS
structure to the buffer pointed to by <I>pv</I>.
<P>
The return value is the size, in bytes, needed for the buffer if <I>pv</I>&nbsp;is
null.
<P>
If <I>pgd</I>&nbsp;is nonzero, the font driver should copy an FD_REALIZEEXTRA
structure to this address that corresponds to this realization of the font, as
identified by the FONTOBJ.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
QFD_MAXGLYPHBITMAP
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
The return value is the size, in bytes, of the largest RASTERGLYPH structure
required for the font realization specified by <I>pfo</I>. The driver should
ignore the <I>hg</I>, <I>pv</I>, <I>pgd</I>, and <I>cjSize</I>&nbsp;parameters.
<P>
Only font drivers that provide glyph bitmaps need to support this mode.
</FONT></TABLE>
<DT>
<I>hg</I>
<DD>
Specifies the glyph.
<BR>
<DT>
<I>pgd</I>
<DD>
Points to GLYPHDATA structure. This parameter can be null.
<BR>
<DT>
<I>pv</I>
<DD>
Points to a data buffer. The type of data written to this buffer is dependent
on <I>iMode</I>. This parameter can be null.
<BR>
<DT>
<I>cjSize</I>
<DD>
Specifies the size of the buffer pointed to by <I>pv</I>.
</DL>
<H3>Return Value</H3>
<P>
The return value depends on the value of the <I>iMode</I>&nbsp;parameter. If an
error occurs, the return value is FD_ERROR, and an error code is logged.
<H3>Comments</H3>
<P>
<B>DrvQueryFontData</B>&nbsp;is required for font drivers and drivers that use
device-specific or driver-specific fonts.
<H3>See Also</H3>
<P>
<B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>, <B><A HREF="grfncs_39.htm">DrvQueryFontFile</A></B>,
<A HREF="grstrcts_13.htm">FD_DEVICEMETRICS</A>, <A HREF="grstrcts_19.htm">FONTOBJ</A>,
<A HREF="grstrcts_21.htm">GLYPHBITS</A>, <A HREF="grstrcts_27.htm">PATHOBJ</A>&nbsp;
<P></FONT>
</BODY>
</HTML>
