<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DrvGetModes</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_DrvGetModes_GG"></A>DrvGetModes</H2>
<P>
<B>ULONG DrvGetModes(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN HANDLE  </B><I>hDriver</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; IN ULONG  </B><I>cjSize</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp; OUT DEVMODEW  </B><I>*pdm</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>&nbsp; &nbsp;);</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>DrvGetModes</B>&nbsp;lists the modes supported by a given device.
<H3>Parameters</H3>
<DL>
<DT>
<I>hDriver</I>
<DD>
Specifies the handle to the kernel driver for which the modes must be
enumerated. This is the handle that is passed in the <I>hDriver</I>&nbsp;parameter
of the <B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>&nbsp;function.
<BR>
<DT>
<I>cjSize</I>
<DD>
Specifies the size, in bytes, of the buffer pointed to by <I>pdm</I>.
<BR>
<DT>
<I>pdm</I>
<DD>
Points to the buffer in which <A HREF="grstrcts_7.htm">DEVMODEW</A>&nbsp;structures
will be written.
</DL>
<H3>Return Value</H3>
<P>
The return value is the count of bytes written to the buffer, or, if <I>pdm </I>is
null, the number of bytes required to hold all mode data. If an error occurs,
the return value is zero, and an error code is logged.
<H3>Comments</H3>
<P>
This function is required for display drivers. It is called indirectly by the
Display applet contained within the Control Panel to get the list of supported
modes.
<P>
The Window Manager (<I>user.exe</I>) dynamically loads all display drivers
associated with a miniport (based on the <B>InstalledDisplayDrivers</B>&nbsp;key in
the registry). Each display driver is called to retrieve the list of modes
supported by that combination of loaded drivers. For example, the VGA64K
display driver only returns the 64K color modes that were returned in the list
of modes obtained from the miniport driver.
<P>
The <B>DrvGetModes</B>&nbsp;function can be called even when the display driver has
not been loaded.
<H3>See Also</H3>
<P>
<A HREF="grstrcts_7.htm">DEVMODEW</A>, <B><A HREF="grfncs_6.htm">DrvAssertMode</A></B>,
<B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>&nbsp;
<P>
&nbsp;
<P></FONT>
</BODY>
</HTML>
