<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating a Minidriver</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Creating_a_Minidriver_GG"></A>Creating a Minidriver</H3>
<P>
The version of Unitool shipped with this DDK is a 16-bit application.
Consequently, Unitool does not operate satisfactorily without some preparation
of the resource files. The sample.RC files provided with the DDK cannot be
read by Unitool, so if you want to use the sample files as a template for a
new minidriver, you must use the .W31 files. When you have finished using
Unitool to enter pertinent printer and font data, you must convert the .PFM
files to .IFI files (refer to “<A HREF="minidrv_19.htm">Converting
a Minidriver to Windows NT</A>” for additional information) and also convert the
.CTT files to .RLE files (see “<A HREF="minidrv_14.htm">NT
RLE Character Mapping</A>” and “<A HREF="minidrv_15.htm">Using
the RLE File Format</A>” for information).
<P>
You will also need to run <B>ntgpcedt.exe</B>, a program that specifies the
NTGPC extensions data. Refer to “<A HREF="minidrv_16.htm">NTGPC
Data Extensions</A>.”
<P>
The following steps outline the procedure for creating a new minidriver while
using one of the samples as a template.
<P>
<B>Note</B>&nbsp; The following procedure uses the <B>epson9</B>&nbsp;sample files as an
example template.
<OL>
<LI>
Create a destination directory for the new minidriver files.
<P>
<LI>
Copy the following directories from the DDK sample files to the destination
directory created in step 1:
<P>
<UL>
<LI>
\src\print\epson9\ifi
<P>
<LI>
\src\print\epson9\pfm
<P>
<LI>
\src\print\epson9\ctt
<P>
<LI>
\src\print\epson9\rle
</UL>
<P>
That is, if your destination directory is named MYDRIVER, you will now have
the following directories:
<P>
<UL>
<LI>
...\MYDRIVER\ifi
<P>
<LI>
...\MYDRIVER\pfm
<P>
<LI>
...\MYDRIVER\ctt
<P>
<LI>
...\MYDRIVER\rle
</UL>
<P>
<LI>
Delete the .IFI files from your ......\MYDRIVER\ifi directory and the .RLE
files from the ......\MYDRIVER\rle directory created in step 2.
<P>
<LI>
Start Unitool and choose File/Open. Enter ...\src\print\epson9\epson9.w31 in
the File Name: text box and click OK. Unitool opens the Printer Data, Fonts,
and CTT windows which contain information extracted from the epson9.w31 file.
<P>
You may get a message box stating that the file is read-only; click OK since
you won’t need to overwrite the epson9.w31 file.
<P>
At this point you can do a File/SaveAs to create a new file for your
minidriver. Enter the pathname of the destination directory (created in step
1) and name of the new driver (using the form &lt;<I>driver_name</I>&gt;.GPC)
in the File Name: list box.
<P>
Unitool writes the following files to the \MYDRIVER directory:
<P>
<UL>
<LI>
&lt;<I>driver_name</I>&gt;.RC
<P>
<LI>
&lt;<I>driver_name</I>&gt;.GPC
<P>
<LI>
&lt;<I>driver_name</I>&gt;.RC$
</UL>
<P>
<LI>
Set up the minidriver&#39;s Printer Data window. You can start by opening the <A HREF="minidrv_48.htm">Model
Data dialog box</A>&nbsp;(choose Printer Data/ModelData) and deleting the unsupported
models provided by the sample .W31 file you opened in step 3. For example, you
could delete all but the “Epson Compatible 9 Pin” model and use this as the
template for the models included in your minidriver.
<P>
Make the changes in each of the following dialog boxes accessed under the
Printer Data menu, as appropriate for your minidriver:
<P>
<UL>
<LI>
<A HREF="minidrv_26.htm">MiniDriver Data dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_28.htm">Page Control dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_29.htm">Cursor Movement dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_31.htm">Paper Sizes dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_33.htm">Paper Sources dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_34.htm">Paper Destinations dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_36.htm">RESOLUTION dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_37.htm">Compression dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_38.htm">Color Models dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_39.htm">Rectangle Fill dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_44.htm">Font Cartridges dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_45.htm">Font Simulation dialog box</A>&nbsp;
<P>
<LI>
<A HREF="minidrv_46.htm">Download Information dialog
box</A>&nbsp;
</UL>
<P>
The Validate Dialog Boxes function on the Options menu can be selected to
automatically validate each entry. When this function is active, a dialog box
is selected, and OK, Next, or Previous is selected (a choice that causes the
current dialog box contents to be saved rather than ignored. Unitool performs
limited error checking on the contents of that dialog box and if any potential
problems are found, a dialog box warning of problems is displayed. These
warnings can be ignored or the dialog box can be displayed to correct the
errors. If the Validate Dialog Boxes command is not selected, error checking
does not occur. This command is enabled by default. For more information, see <A HREF="minidrv_54.htm">Unitool
Error Messages</A>.
<P>
In addition, Validate Now! on the Options menu can be selected to perform
limited error checking on the contents of the currently loaded minidriver
file. If any potential problems are found, a dialog box listing them is
displayed.
<P>
<B>Note</B>&nbsp; Subsequent topics provide information relating to the setting of
the minidriver&#39;s Printer Data window. Each topic provides a specific,
detailed description for each category of information that can be set up in
the minidriver&#39;s Printer Data window. Each topic also offers recommended
values that can be entered based on the type of source minidriver to be built.
For example, the page-control commands section recommends values to enter for
the Diconix 150 Plus printer and for the HP LaserJet IIP.
<P>
<LI>
When all the Printer Data entries have been made, you can edit the .PFM files
in the FONTS window and the CCT files in the CCT window. You only need to edit
those files that relate to fonts and character translation tables supported by
your printer.
<P>
You may need to close your &lt;<I>driver_name</I>&gt;.RC file in Unitool and
edit this file with your text editor to add/delete the names of .PFM files as
appropriate for your driver (these will be converted to .IFI files later). You
may also need to name the .CTT files you are using and delete any .RLE
filenames (the .CTT files willl be converted to .RLE files later).
<P>
<LI>
When all changes are complete in the FONTS and CCT windows. exit Unitool and
proceeed with “<A HREF="minidrv_19.htm">Converting
a Minidriver to Windows NT</A>” to convert the minidriver to Windows NT format.
</OL>
<P></FONT>
</BODY>
</HTML>
