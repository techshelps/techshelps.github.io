<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>HwVidResetHw</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_HwVidResetHw_GG"></A>HwVidResetHw</H2>
<P>
<B>BOOLEAN HwVidResetHw(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PVOID  </B><I>HwDeviceExtension</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG  </B><I>Columns</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG  </B><I>Rows</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp;);
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
Any video miniport driver must have a <B>HwVidResetHw</B>&nbsp;function if its
adapter cannot be reset to a fully initialized state without a hard boot of
the machine. For example, if the adapter’s ROM initialization code cannot
reset the adapter state to a boot-up mode, the miniport must have a <B>HwVidResetHw</B>
function.
<H3>Parameters</H3>
<DL>
<DT>
<I>HwDeviceExtension</I>
<DD>
Points to the miniport’s per-adapter storage area.
<BR>
<DT>
<I>Columns</I>
<DD>
Specifies the number of columns of the mode to be set up.
<BR>
<DT>
<I>Rows</I>
<DD>
Specifies the number of rows of the mode to be set up.
</DL>
<H3>Return Value</H3>
<P>
<B>HwVidResetHw</B>&nbsp;should return TRUE if it completely reset the adapter to
the given character mode. Otherwise, it should return FALSE to indicate that
the HAL should perform the equivalent of an INT10, MODE3-type BIOS call after <B>HwVidResetHw</B>
returns control.
<H3>Comments</H3>
<P>
The HAL calls <B>HwVidResetHw</B>&nbsp;if the system is about to crash, so that the
HAL can display information on the screen while the system is being shut down.
The HAL also calls <B>HwVidResetHw</B>&nbsp;just before the machine is rebooted
when a soft boot occurs.
<P>
Most miniport drivers must provide this function, except for drivers of
adapters that are reset to a VGA standard character mode on receipt of an
INT10, MODE3-type command.
<P>
<B>HwVidResetHw</B>&nbsp;resets the adapter to character mode, according to the
given <I>Columns</I>&nbsp;and <I>Rows</I>&nbsp;values. However, because the system is
shutting down, <B>HwVidResetHw</B>&nbsp;cannot call the BIOS or any pageable code. <B>HwVidResetHw</B>
should call only the <B>VideoPortRead/WritePort</B><I>Xxx</I>&nbsp;and/or <B>VideoPortRead/WriteRegister</B><I>Xxx</I>
functions.
<P>
If <B>HwVidResetHw</B>&nbsp;cannot change the mode of the adapter by simply
programming the adapter registers, it can set up the appropriate values in
adapter registers and return FALSE. This causes the HAL to perform an extended
INT10-type operation to reset the video adapter to chararacter mode.
<P>
<B>HwVidResetHw</B>&nbsp;cannot and must not attempt to call <B>VideoPortInt10</B>.
A miniport’s <B>HwVidStartIO</B>&nbsp;function is called with the
IOCTL_VIDEO_RESET_DEVICE VRP to reset the adapter whenever the Win32 video
installation applet is used to test or change the graphics display mode, <I>not</I>
the miniport’s <B>HwVidResetHw</B>&nbsp;function.
<H3>See Also</H3>
<P>
<B><A HREF="vmpfncs_4.htm">HwVidInitialize</A></B>, <B><A HREF="vmpfncs_9.htm">HwVidStartIO</A></B>,
IOCTL_VIDEO_RESET_DEVICE, <B><A HREF="vpfncs_13.htm">VideoPortInt10</A></B>,
<B>VideoPortRead</B><I>Xxx</I>, <B>VideoPortWrite</B><I>Xxx</I>
<P></FONT>
</BODY>
</HTML>
