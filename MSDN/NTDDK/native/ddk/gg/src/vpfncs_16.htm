<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VideoPortMapMemory</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_VideoPortMapMemory_GG"></A>VideoPortMapMemory</H2>
<P>
<B>VP_STATUS VideoPortMapMemory(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PVOID</B>&nbsp; <I>HwDeviceExtension</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PHYSICAL_ADDRESS</B>&nbsp; <I>PhysicalAddress</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PULONG</B>&nbsp; <I>Length</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PULONG</B>&nbsp; <I>InIoSpace</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PVOID</B>&nbsp; <I>*VirtualAddress</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp;);
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>VideoPortMapMemory</B>&nbsp;remaps a bus-relative physical range of video memory
into the corresponding display driver’s virtual address space in response to a
VRP with the <B>IoControlCode</B>&nbsp;member set to <A HREF="virqs.htm#DDK_IOCTL_VIDEO_MAP_VIDEO_MEMORY_GG">IOCTL_VIDEO_MAP_VIDEO_MEMORY</A>.
<H3>Parameters</H3>
<DL>
<DT>
<I>HwDeviceExtension</I>
<DD>
Points to the miniport driver’s device extension.
<BR>
<DT>
<I>PhysicalAddress</I>
<DD>
Specifies the bus-relative base address of the range to be mapped.
<BR>
<DT>
<I>Length</I>
<DD>
Points to a variable specifying the number of bytes of device memory to be
mapped. <B>VideoPortMapMemory</B>&nbsp;returns the actual size of the memory
mapped, which can be rounded to a system-determined alignment boundary, in
this parameter. However, the miniport and display drivers cannot access memory
outside the range delimited by the input value at <I>Length</I>.
<BR>
<DT>
<I>InIoSpace</I>
<DD>
Points to a variable indicating whether the range is in I/O space or memory
space. TRUE indicates I/O space.
<BR>
<DT>
<I>VirtualAddress</I>
<DD>
Points to a variable that specifies a process handle, which usually should be
set to zero. Such a handle can also be a value passed in a VRP by the
corresponding display driver. Zero specifies that the port driver should map
the logical memory range at any location in the address space of the current
process. On return from a successful call, <B>VideoPortMapMemory</B>&nbsp;resets
the variable to the base virtual address to which it has mapped the given <I>PhysicalAddress</I>.
</DL>
<H3>Return Value</H3>
<P>
<B>VideoPortMapMemory</B>&nbsp;returns NO_ERROR if the given logical range was
successfully mapped to a user-space virtual range. Otherwise, it can return
ERROR_INVALID_PARAMETER.
<H3>Comments</H3>
<P>
<B>VideoPortMapMemory</B>&nbsp;runs in kernel mode within the same context as the
user-mode thread that initiated the call.
<P>
<B>VideoPortMapMemory</B>&nbsp;should be used by miniport drivers to manage video
adapters that allow the video frame buffer to be completely mapped at all
times. That is, miniport drivers for adapters that are <I>not</I>&nbsp;restricted
to using Banks to map a slice at a time can use the more efficient <B>VideoPortMapMemory</B>.
<P>
Callers of <B>VideoPortMapMemory</B>&nbsp;are running at IRQL = PASSIVE_LEVEL.
<H3>See Also</H3>
<P>
<A HREF="virqs.htm#DDK_IOCTL_VIDEO_MAP_VIDEO_MEMORY_GG">IOCTL_VIDEO_MAP_VIDEO_MEMORY</A><B>,</B>
<A HREF="vstrcts_7.htm">VIDEO_REQUEST_PACKET</A>, <B><A HREF="vpfncs_38.htm">VideoPortUnmapMemory</A></B>
<P></FONT>
</BODY>
</HTML>
