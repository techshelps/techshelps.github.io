<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Converting a Minidriver to Windows NT</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Converting_a_Minidriver_to_Windows_NT_GG"></A>Converting a Minidriver to Windows NT</H3>
<P>
Converting a minidriver to the Windows NT format requires the <B>pfm2ifi.exe</B>,
<B>ctt2rle.exe</B>, and <B>ntgpcedt.exe</B>&nbsp;programs (available in the Windows
NT DDK) to generate the NTGPC data extensions.
<P>
To convert the minidriver:
<OL>
<LI>
Open a command window and move to the directory containing the binary files
provided with the DDK and run the <B>pfm2ifi.exe</B>&nbsp;program to convert the
PFM files you crated with Unitool and generate the files in the IFIMETRICS
format.
<P>
The command to convert a .PFM file is:
<P>
&nbsp; &nbsp; <B>pfm2ifi</B>&nbsp;&lt;<I>pathname</I>&gt;<B>.pfm</B>&nbsp;&lt;<I>filename</I>&gt;<B>.ifi<I>
</I>[-v]</B>
<P>
The <I>pathname </I>is the path and filename of the .PFM file to be converted.
The -v option prints the converted metrics to the standard output device.
<P>
<LI>
Run the <B>ctt2rle.exe</B>&nbsp;program to convert the CTT files you created with
Unitool and generate these files in the RLE format.
<P>
The command to convert a .CTT file is:
<P>
&nbsp; &nbsp; <B>ctt2rle</B>&nbsp;&lt;<I>pathname</I>&gt;<B>.ctt</B>
<P>
The <I>pathname </I>is the path and filename of the .CTT file to be converted.
The created .RLE file will be written to the same directory as the .CCT file.
<P>
<LI>
Move the newly created .RLE files to your ...\rle directory.
<P>
<LI>
Open the MYDRIVER.RC file with a text editor. Immediately under the
<P>
<PRE><FONT FACE="Courier" SIZE="2">RC_TABLES    PRELOAD  MOVEABLE    MYDRIVER.RC
&nbsp;</FONT></PRE>
<P>
<DL>
<DT>
line, add the following line and close the file.
<DD>
<PRE><FONT FACE="Courier" SIZE="2">RC_TABLES    PRELOAD  MOVEABLE    NT.GPC
&nbsp;</FONT></PRE>
</DL>
<P>
<LI>
Run the <B>ntgpcedt.exe</B>&nbsp;program and open your .RC file (MYDRIVER.RC in
this example).
<P>
<LI>
Make any appropriate changes to the  color calibration data, halftone, and
pixel values displayed in the NT GPC Editor dialog box and select Close.
Choose Yes in response to the “Save updated NT GPC data to ‘NT.GPC’?” message
box and the data is saved to the NT.GPC file for your driver.
<P>
<LI>
Type <B>Build</B>&nbsp;to build the minidriver DLL file. Refer to <A HREF="minidrv_20.htm">Setting
up the Environment</A>, <A HREF="minidrv_21.htm">Creating Your Driver</A>,
and <A HREF="minidrv_22.htm">Compiling Your Driver</A>&nbsp;for details
on the build environment and process.
<P>
<LI>
Test and implement the minidriver. Refer also to “<A HREF="minidrv_23.htm">Debugging
and Tuning Your Driver</A>” and “<A HREF="minidrv_24.htm">Testing Your
Driver</A>.”
</OL>
<P>
<B>Note</B>&nbsp; Sample minidrivers are provided in the Windows DDK to demonstrate
the input and output files the minidrivers produce during conversion.
<P></FONT>
</BODY>
</HTML>
