<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SvgaHwIoPortUcharString</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_SvgaHwIoPortUcharString_GG"></A>SvgaHwIoPortUcharString</H2>
<P>
<B>VP_STATUS SvgaHwIoPortUcharString(</B>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG</B>&nbsp; <I>Context</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG</B>&nbsp; <I>Port</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>UCHAR</B>&nbsp; <I>AccessMode</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>PUCHAR</B>&nbsp; <I>Data</I><B>,</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp; <B>ULONG</B>&nbsp; <I>DataLength</I>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
&nbsp; &nbsp;);
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
</FONT></TABLE>
<P>
<B>SvgaHwIoPortUcharString</B>&nbsp;traps an I/O port to which a full-screen MS-DOS
application in an x86-based machine is sending a sequence of UCHAR-sized data.
Only miniport drivers of VGA-compatible SVGA adapters have <B>SvgaHwIoPort</B><I>Xxx</I>
functions.
<H3>Parameters</H3>
<DL>
<DT>
<I>Context</I>
<DD>
Specifies the miniport-determined context value that was set in the <B>EmulatorAccessEntriesContext</B>
member of VIDEO_PORT_CONFIG_INFO.
<BR>
<DT>
<I>Port</I>
<DD>
Specifies the mapped I/O port.
<BR>
<DT>
<I>AccessMode</I>
<DD>
Specifies the type of access allowed, which can be one or a combination (ORed)
of the following values:
<P>
EMULATOR_READ_ACCESS<BR>
EMULATOR_WRITE_ACCESS
<BR>
<DT>
<I>Data</I>
<DD>
Points to the UCHAR string to be transferred. One character at a time is
hooked out until the whole string is transferred.
<BR>
<DT>
<I>DataLength</I>
<DD>
Specifies the number of UCHAR values in the string.
</DL>
<H3>Return Value</H3>
<P>
<B>SvgaHwIoPortUcharString</B>&nbsp;returns the final status of the operation.
<H3>Comments</H3>
<P>
<B>SvgaHwIoPortUcharString</B>&nbsp;will intercept any byte access attempted by a
full-screen MS-DOS application issuing either or both of the instructions <B>REP
OUTSB DX, ESI</B>&nbsp;and <B>REP INSB EDI, DX</B>.
<P>
If the miniport driver enables the <I>Port</I>&nbsp;for direct access by calling <B>VideoSetTrappedEmulatorPorts</B>,
its <B>SvgaHwIoPortUcharString</B>&nbsp;function will not be called. Such an
application then will have direct access to the I/O port, unless the miniport
driver disables the port with another call to <B>VideoSetTrappedEmulatorPorts</B>.
<P>
If an application-issued x86 <B>INSB</B>&nbsp;or <B>OUTSB</B>&nbsp;instruction(s) might
affect the state of the VGA-compatible adapter sequencer register,
miscellaneous output register, or any adapter-specific register and, thereby,
cause the machine to hang, the miniport driver must <I>not</I>&nbsp;enable the port
for direct access by calling <B>VideoPortSetTrappedEmulatorPorts</B>.
<P>
<B>SvgaHwIoPortUcharString</B>&nbsp;must buffer subsequent instructions from the
application and check that none can hang the machine. If the application
issues any sequence of instructions that might hang the machine, <B>SvgaHwIoPortUcharString</B>
must discard the buffered instructions. Otherwise, it should output them, a
UCHAR at a time, to the specified, mapped I/O port.
<H3>See Also</H3>
<P>
<A HREF="vstrcts_1.htm">EMULATOR_ACCESS_ENTRY</A>, <B><A HREF="vmpfncs_12.htm">SvgaHwIoPortUchar</A></B>,
<A HREF="vstrcts_3.htm">VIDEO_ACCESS_RANGE</A>, <A HREF="vstrcts_6.htm">VIDEO_PORT_CONFIG_INFO</A>,
<B><A HREF="vpfncs_9.htm">VideoPortGetDeviceBase</A></B>, <B><A HREF="vpfncs_33.htm">VideoPortSetTrappedEmulatorPorts</A></B>
<P></FONT>
</BODY>
</HTML>
