<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Debugging and Tuning Your Driver</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Debugging_and_Tuning_Your_Driver_GG"></A>Debugging and Tuning Your Driver</H3>
<P>
During driver development and testing, you will need to adjust the registry of
your Windows NT development and test machines. You will need to enable/disable
driver loading, add/modify registry keys and values, and so on.
<P>
Windows NT provides an application for this purpose called Registry Editor.
Registry Editor (<B>regedt2.exe</B>) is documented in the Windows NT
documentation.
<P>
Additionally, the DDK includes two registry tools, <B>regini</B>&nbsp;and <B>regdmp</B>,
which are script-driven. These tools provide a “-?” option, which provides
help from the command line. <B>Regdmp</B>&nbsp;dumps the contents of the registry
to a script file. <B>Regini</B>&nbsp;creates registry entries according to the
specified script. Sample <B>regini</B>&nbsp;script files can be found in several
driver source directories in the DDK.
<P>
The methods available for driver debugging center around the kernel debugger
and the checked build, both of which have already been discussed in some
detail. Additional information about the kernel debugger is available in the
Win32 SDK documentation and the Windows NT DDK <I>Programmer’s Guide</I>.
<P>
Some debugger extensions have also been included for the Windows NT STREAMS (<B>strmexts.dll</B>),
Windows NT GDI (<B>gdiexts.dll</B>) and Windows NT USER (<B>userexts.dll</B>)
components. These are installed and placed in your path by DDK Setup, to be
used while debugging.
<P>
Performance tuning is covered in the Win32 SDK documentation and in the <I>Programmer’s
Guide</I>&nbsp;topic of the DDK Help online documentation. The DDK includes a
sample illustrating performance counters that is based on the VGA display
driver; this sample is found in the src\perf directory of the DDK.
<P>
Also included are the utilities that are useful for quickly loading
performance counter information into the registry, <B>lodctrs</B>&nbsp;and <B>unlodctrs</B>.
The tools are script-driven and are documented in the Windows NT DDK <I>Programmer’s
Guide</I>.
<P>
Other useful tools include the <B>ObjDir</B>&nbsp;and <B>Drivers</B>&nbsp;tools, which
provide information about objects in the system and what resources drivers
have created, own, or are using. The <B>ObjDir</B>&nbsp;tool is similar to the <B>WinObj</B>
tool that is included with the Win32 SDK, except it is console based. The <B>Drivers</B>
tool provides a listing of what drivers are loaded in the system and their
resource usage.
<P></FONT>
</BODY>
</HTML>
