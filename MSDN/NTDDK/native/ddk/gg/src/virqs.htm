<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Chapter 8  Video I/O Control Codes</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H1><A NAME="DDK_Video_I_O_Control_Codes_GG"></A>Chapter 8  Video I/O Control Codes</H1>
<P>
This chapter summarizes the public IOCTL_VIDEO_<I>XXX</I>&nbsp;requests that video
miniport drivers handle. Every video miniport driver must provide support for
at least the following requests:
<UL>
<LI>
IOCTL_VIDEO_MAP_VIDEO_MEMORY
<P>
<LI>
IOCTL_VIDEO_UNMAP_VIDEO_MEMORY
<P>
<LI>
IOCTL_VIDEO_QUERY_NUM_AVAIL_MODES
<P>
<LI>
IOCTL_VIDEO_QUERY_AVAIL_MODES
<P>
<LI>
IOCTL_VIDEO_QUERY_CURRENT_MODE
<P>
<LI>
IOCTL_VIDEO_SET_CURRENT_MODE
<P>
<LI>
IOCTL_VIDEO_RESET_DEVICE
</UL>
<P>
Depending on the adapter features, a miniport driver can be required to
support additional IOCTL_VIDEO_<I>XXX</I>&nbsp;requests, while support for others
is optional.
<P>
For information on the design of display drivers and video miniport drivers,
see the <I>Graphics Driver Design Guide</I>.
<H2><A NAME="DDK_IOCTL_VIDEO_DISABLE_CURSOR_GG"></A>IOCTL_VIDEO_DISABLE_CURSOR</H2>
<H3>Operation</H3>
<P>
Makes the cursor invisible: that is, disables the cursor’s visibility
attribute. Miniport drivers for VGA-compatible adapters are required to
support this request, which is modal. Support is optional for other miniport
drivers.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_DISABLE_POINTER_GG"></A>IOCTL_VIDEO_DISABLE_POINTER</H2>
<H3>Operation</H3>
<P>
Makes the pointer invisible: that is, disables pointer attributes. Supports
for this request, which is modal, is optional.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_ENABLE_CURSOR_GG"></A>IOCTL_VIDEO_ENABLE_CURSOR</H2>
<H3>Operation</H3>
<P>
Makes the cursor visible: that is, enables the cursor’s visibility attribute.
Miniport drivers for VGA-compatible adapters are required to support this
request, which is modal. Support is optional for other miniport drivers.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_ENABLE_POINTER_GG"></A>IOCTL_VIDEO_ENABLE_POINTER</H2>
<H3>Operation</H3>
<P>
Makes the pointer visible: that is, enables pointer attributes. Support for
this request, which is modal, is optional. However, if a miniport driver
supports this request, it must process an IOCTL_VIDEO_SET_POINTER_ATTR request
before processing this request.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_FREE_PUBLIC_ACCESS_RANGES_GG"></A>IOCTL_VIDEO_FREE_PUBLIC_ACCESS_RANGES</H2>
<H3>Operation</H3>
<P>
Releases the address range that was allocated by a preceding
IOCTL_VIDEO_QUERY_PUBLIC_ACCESS_RANGES request. Support for this request,
which is nonmodal, is optional.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains an array of VIDEO_PUBLIC_ACCESS_RANGES to
be released.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_GET_BANK_SELECT_CODE_GG"></A>IOCTL_VIDEO_GET_BANK_SELECT_CODE</H2>
<H3>Operation</H3>
<P>
Returns a block of x86-specific executable code to be used by a
high-resolution SVGA display driver for bank-switching. Miniport drivers for
VGA-compatible adapters are required to support this request, which is modal.
It is optional for other miniport drivers. On RISC-based machines, this
request is a no-op.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_BANK_SELECT information in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver returns its code block, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_BANK_SELECT). Otherwise, the miniport driver sets
the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_GET_POWER_MANAGEMENT_GG"></A>IOCTL_VIDEO_GET_POWER_MANAGEMENT</H2>
<H3>Operation</H3>
<P>
Returns the current power-consumption level of the adapter. Support for this
IOCTL, which is nonmodal, is required for adapters that conform to the VESA
DPMS standard.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_POWER_MANAGEMENT information in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the power-consumption information,
it sets the <B>Information</B>&nbsp;field to <B>sizeof</B>(VIDEO_POWER_MANAGEMENT).
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_LOAD_AND_SET_FONT_GG"></A>IOCTL_VIDEO_LOAD_AND_SET_FONT</H2>
<H3>Operation</H3>
<P>
Loads a user-defined font on the adapter. Miniport drivers for VGA-compatible
adapters are required to support this request, which is modal. Support is
optional for other miniport drivers.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_LOAD_FONT_INFORMATION describing
the font’s width, height, and size, as well as a pointer to the font buffer.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_MAP_VIDEO_MEMORY_GG"></A>IOCTL_VIDEO_MAP_VIDEO_MEMORY</H2>
<H3>Operation</H3>
<P>
Maps the video hardware frame buffer and video RAM into the virtual address
space of the requestor. Miniport drivers are required to handle this IOCTL and
to map all video memory in the caller’s address space with <B>VideoPortMapMemory</B>.
This request is both modal and nonmodal: the miniport driver must return the
location size of the frame buffer within video memory, and the frame buffer
size and location can vary from mode to mode (modal characteristic), but a
subsequent set-mode operation (to the same mode) must not cause the video
memory to change location (nonmodal characteristic).
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains a VIDEO_MEMORY structure specifying either
a requested virtual base address or zero, which requests the system to assign
a virtual base address mapped to the adapter’s RAM and frame buffer range(s).
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_MEMORY_INFORMATION in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully maps the memory, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_MEMORY_INFORMATION). Otherwise, it sets the <B>Information</B>
field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_AVAIL_FONTS_GG"></A>IOCTL_VIDEO_QUERY_AVAIL_FONTS</H2>
<H3>Operation</H3>
<P>
None. This request is obsolete.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_AVAIL_MODES_GG"></A>IOCTL_VIDEO_QUERY_AVAIL_MODES</H2>
<H3>Operation</H3>
<P>
Returns information about each video mode supported by the adapter. Miniport
drivers are required to support this request, which is nonmodal.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns an array of VIDEO_MODE_INFORMATION-type elements
in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the available modes, it sets the <B>Information</B>
field to (<B>sizeof</B>(VIDEO_MODE_INFORMATION) * <I>NumberOfSupportedModes)</I>.
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_COLOR_CAPABILITIES_GG"></A>IOCTL_VIDEO_QUERY_COLOR_CAPABILITIES</H2>
<H3>Operation</H3>
<P>
Returns the color-capabilities information found in the VDDP description file
for the adapter. Support for this request, which is nonmodal, is optional.
However, if a miniport driver supports this request, it cannot return a subset
of the color-capabilities information.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns all VIDEO_COLOR_CAPABILITIES information in the
VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the color-capabilities data, it
sets the <B>Information</B>&nbsp;field to <B>sizeof</B>(VIDEO_COLOR_CAPABILITIES).
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_CURRENT_FONT_GG"></A>IOCTL_VIDEO_QUERY_CURRENT_FONT</H2>
<H3>Operation</H3>
<P>
None. This request is obsolete.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_CURRENT_MODE_GG"></A>IOCTL_VIDEO_QUERY_CURRENT_MODE</H2>
<H3>Operation</H3>
<P>
Returns information about the current adapter mode. Miniport drivers are
required to support this request, which is modal.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_MODE_INFORMATION in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the mode data, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_MODE_INFORMATION). Otherwise, the miniport driver
sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_CURSOR_ATTR_GG"></A>IOCTL_VIDEO_QUERY_CURSOR_ATTR</H2>
<H3>Operation</H3>
<P>
Returns the size, position, and visibility of the cursor. Miniport drivers for
VGA-compatible adapters are required to support this request, which is modal.
Support is optional for other miniport drivers. The cursor position is
specified by top and bottom scan lines, instead of row and column information,
for VGA-compatible adapters.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_CURSOR_ATTRIBUTES information in the VRP
<B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the cursor-attribute data, it sets
the <B>Information</B>&nbsp;field to <B>sizeof</B>(VIDEO_CURSOR_ATTRIBUTES).
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_CURSOR_POSITION_GG"></A>IOCTL_VIDEO_QUERY_CURSOR_POSITION</H2>
<H3>Operation</H3>
<P>
Returns the current cursor position (row and column). Miniport drivers for
VGA-compatible adapters are required to support this request, which is modal.
It is optional for other miniport drivers.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_CURSOR_POSITION information in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the cursor position, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_CURSOR_POSITION). Otherwise, the miniport driver
sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_NUM_AVAIL_FONTS_GG"></A>IOCTL_VIDEO_QUERY_NUM_AVAIL_FONTS</H2>
<H3>Operation</H3>
<P>
None. This request is obsolete.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_NUM_AVAIL_MODES_GG"></A>IOCTL_VIDEO_QUERY_NUM_AVAIL_MODES</H2>
<H3>Operation</H3>
<P>
Returns the number of video modes supported by the adapter and the size in
bytes of the video mode information, which can be used to allocate a buffer
for an IOCTL_VIDEO_QUERY_AVAIL_MODES request. Miniport drivers are required to
support this request, which is nonmodal.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_NUM_MODES in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the mode count, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_NUM_MODES). Otherwise, the miniport driver sets
the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_POINTER_ATTR_GG"></A>IOCTL_VIDEO_QUERY_POINTER_ATTR</H2>
<H3>Operation</H3>
<P>
Returns the attributes for the pointer, defined as a set of pixels used to
paint the shape associated with the mouse. Support for this request, which is
modal, is optional.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_POINTER_ATTRIBUTES information in the
VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the pointer attributes, it sets
the <B>Information</B>&nbsp;field to <B>sizeof</B>(VIDEO_POINTER_ATTRIBUTES).
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_POINTER_CAPABILITIES_GG"></A>IOCTL_VIDEO_QUERY_POINTER_CAPABILITIES</H2>
<H3>Operation</H3>
<P>
Returns information about the adapter’s “hardware cursor” features. Support
for this request, which is modal, is optional.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_POINTER_CAPABILITIES information in the
VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the pointer capabilities, it sets
the <B>Information</B>&nbsp;field to <B>sizeof</B>(VIDEO_POINTER_CAPABILITIES).
Otherwise, the miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_POINTER_POSITION_GG"></A>IOCTL_VIDEO_QUERY_POINTER_POSITION</H2>
<H3>Operation</H3>
<P>
Returns the current position of the pointer. Support for this request, which
is modal, is optional.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_POINTER_POSITION information in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully returns the pointer position, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_POINTER_POSITION). Otherwise, the miniport driver
sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_QUERY_PUBLIC_ACCESS_RANGES_GG"></A>IOCTL_VIDEO_QUERY_PUBLIC_ACCESS_RANGES&#09;</H2>
<H3>Operation</H3>
<P>
Returns an array, possibly with one element, of address ranges used to program
the adapter registers or ports directly. Support for this request, which is
nonmodal, is optional.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns an array of VIDEO_PUBLIC_ACCESS_RANGES in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver returns address range(s), it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_PUBLIC_ACCESS_RANGES). Otherwise, the miniport
driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_RESET_DEVICE_GG"></A>IOCTL_VIDEO_RESET_DEVICE</H2>
<H3>Operation</H3>
<P>
Resets the video hardware to the default mode, to which it was initialized at
system boot. Miniport drivers are required to support this request, which is
nonmodal.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_RESTORE_HARDWARE_STATE_GG"></A>IOCTL_VIDEO_RESTORE_HARDWARE_STATE</H2>
<H3>Operation</H3>
<P>
Restores all values used to set the hardware registers. Miniport drivers for
VGA-compatible adapters are required to support this request, which is
nonmodal. It is optional for other miniport drivers.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_HARDWARE_STATE previously saved.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SAVE_HARDWARE_STATE_GG"></A>IOCTL_VIDEO_SAVE_HARDWARE_STATE</H2>
<H3>Operation</H3>
<P>
Saves the state of the video adapter in the VRP <B>OutputBuffer</B>. Miniport
drivers for VGA-compatible adapters are required to support this request,
which is nonmodal. Support is optional for other miniport drivers.
<H3>Input</H3>
<P>
None
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_HARDWARE_STATE information in the VRP <B>OutputBuffer</B>.
<H3>Status Block</H3>
<P>
If the miniport driver successfully saves the adapter state, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_HARDWARE_STATE). Otherwise, the miniport driver
sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_COLOR_REGISTERS_GG"></A>IOCTL_VIDEO_SET_COLOR_REGISTERS</H2>
<H3>Operation</H3>
<P>
Sets the adapter’s color registers to the specified RGB values. If the adapter
has a CLUT, sometimes called a “palette<I>,”</I>&nbsp;the miniport driver is
required to support this request, which is modal.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_CLUT, specifying an array of RGB
values to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_CURRENT_FONT_GG"></A>IOCTL_VIDEO_SET_CURRENT_FONT</H2>
<H3>Operation</H3>
<P>
None. This request is obsolete.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_CURRENT_MODE_GG"></A>IOCTL_VIDEO_SET_CURRENT_MODE</H2>
<H3>Operation</H3>
<P>
Sets the adapter to the specified operating mode. Miniport drivers are
required to support this request, which is nonmodal since it resets the
current mode. The miniport driver must also consider the two high order flags
which are used to additionally control the mode set operation. See <A HREF="vstrcts_5.htm">VIDEO_MODE</A>
for further information.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains a <A HREF="vstrcts_5.htm">VIDEO_MODE</A>
structure specifying the mode to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_CURSOR_ATTR_GG"></A>IOCTL_VIDEO_SET_CURSOR_ATTR</H2>
<H3>Operation</H3>
<P>
Sets the cursor size, position, and visibility. Miniport drivers for
VGA-compatible adapters are required to support this request, which is modal.
Support is optional for other miniport drivers.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_CURSOR_ATTRIBUTES to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_CURSOR_POSITION_GG"></A>IOCTL_VIDEO_SET_CURSOR_POSITION</H2>
<H3>Operation</H3>
<P>
Sets the cursor position (row and column). Miniport drivers for VGA-compatible
adapters are required to support this request, which is modal. It is optional
for other miniport drivers.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_CURSOR_POSITION to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_PALETTE_REGISTERS_GG"></A>IOCTL_VIDEO_SET_PALETTE_REGISTERS</H2>
<H3>Operation</H3>
<P>
Loads a specified portion of the adapter palette registers with an array of
colors. Miniport drivers for VGA-compatible adapters are required to support
this request, which is modal. Support is optional for other miniport drivers.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_PALETTE_DATA, specifying an
array of colors to be set in the palette registers.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_POINTER_ATTR_GG"></A>IOCTL_VIDEO_SET_POINTER_ATTR</H2>
<H3>Operation</H3>
<P>
Sets the pointer attributes. Support for this request, which is modal, is
optional. A supporting miniport driver can fail this request (for example, if
the attributes specify a larger pointer than the miniport driver can supply).
When a miniport driver fails this request, the corresponding display driver
must manage the pointer.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_POINTER_ATTRIBUTES to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_POINTER_POSITION_GG"></A>IOCTL_VIDEO_SET_POINTER_POSITION</H2>
<H3>Operation</H3>
<P>
Sets the pointer position. Support for this request, which is modal, is
optional. A supporting miniport driver should have already processed an
enable-pointer request before processing this request.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_POINTER_POSITION to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SET_POWER_MANAGEMENT_GG"></A>IOCTL_VIDEO_SET_POWER_MANAGEMENT</H2>
<H3>Operation</H3>
<P>
Resets the power-consumption level of the adapter to the specified state. As
long as the state is <B>VideoPowerOff</B>, the port driver intercepts and
fails all IOCTL_VIDEO_<I>XXX</I>&nbsp;requests to the miniport driver until the
next IOCTL_VIDEO_SET_POWER_MANAGEMENT request that resets the state to a
power-on condition.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_POWER_MANAGEMENT structure,
specifying the state to be set.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_SHARE_VIDEO_MEMORY_GG"></A>IOCTL_VIDEO_SHARE_VIDEO_MEMORY</H2>
<H3>Operation</H3>
<P>
This IOCTL is called by a process that will share video memory as a linear
frame buffer. Miniport drivers handle this IOCTL by mapping the frame buffer
into the caller’s address space with <B>VideoPortMapBankedMemory</B>.
Otherwise this IOCTL is the same as IOCTL_VIDEO_MAP_VIDEO_MEMORY.  
<P>
This request is both modal and nonmodal: the miniport driver must return the
location size of the frame buffer within video memory, and the frame buffer
size and location can vary from mode to mode (modal characteristic), but a
subsequent set-mode operation (to the same mode) must not cause the video
memory to change location (nonmodal characteristic)
<P>
This IOCTL is DCI only.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains a VIDEO_SHARE_MEMORY structure specifying
a handle to the process mapping the frame buffer, and the requested view size
and offset into the shared memory.  The view size plus the offset must not
exceed the memory size of the adapter.
<H3>Output</H3>
<P>
The miniport driver returns the VIDEO_MEMORY_INFORMATION structure in the VRP <B>OutputBuffer</B>.
&nbsp;This output contains the virtual address where the video memory is mapped,
the view size in bytes of the mapped memory and the offset into the view. 
<H3>Status Block</H3>
<P>
If the miniport driver successfully maps the memory, it sets the <B>Information</B>
field to <B>sizeof</B>(VIDEO_SHARE_MEMORY_INFORMATION).  Otherwise, the
miniport driver sets the <B>Information</B>&nbsp;field to zero.
<H2><A NAME="DDK_IOCTL_VIDEO_UNMAP_VIDEO_MEMORY_GG"></A>IOCTL_VIDEO_UNMAP_VIDEO_MEMORY</H2>
<H3>Operation</H3>
<P>
Releases a mapping between the virtual address space and the adapter’s frame
buffer and video RAM. Miniport drivers are required to support this request,
which is nonmodal.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains the VIDEO_MEMORY, specifying the
previously mapped virtual base address to be released with <B>VideoPortUnmapMemory</B>.
<H3>Output</H3>
<P>
None
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<H2><A NAME="DDK_IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY_GG"></A>IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY</H2>
<H3>Operation</H3>
<P>
Unmaps a video hardware frame buffer and video RAM from the virtual address
space of the requestor that was mapped by an IOCTL_VIDEO_SHARE_VIDEO_MEMORY
request.
<H3>Input</H3>
<P>
The VRP <B>InputBuffer</B>&nbsp;contains a VIDEO_MEMORY structure specifying the
process and the virtual address where the video memory is mapped.  The memory
is unmapped by calling <B>VideoPortUnmapMemory</B>.
<H3>Output</H3>
<P>
None.
<H3>Status Block</H3>
<P>
The miniport driver does not set the <B>Information</B>&nbsp;field.
<P>
&nbsp;
<P></FONT>
</BODY>
</HTML>
