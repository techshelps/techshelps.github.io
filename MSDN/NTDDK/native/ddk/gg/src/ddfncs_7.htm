<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DrvGetDirectDrawInfo</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_DrvGetDirectDrawInfo_GG"></A>DrvGetDirectDrawInfo</H2>
<P>
<B>BOOL DrvGetDirectDrawInfo(</B><BR>
&nbsp; &nbsp; <B>DHPDEV</B>&nbsp; <I>dhpdev</I><B>,</B><I><BR>
</I><B>&nbsp; &nbsp; DD_HALINFO  </B><I>*pHalInfo</I><B>,</B><BR>
&nbsp; &nbsp; <B>DWORD</B>&nbsp; <I>*pdwNumHeaps</I><B>,</B><BR>
<B>&nbsp; &nbsp; VIDEOMEMORY  </B><I>*pvmList</I><B>,</B><BR>
&nbsp; &nbsp; <B>DWORD  </B><I>pdwNumFourCC</I><B>,</B><BR>
<B>&nbsp; &nbsp; DWORD  </B><I>*pdwFourCC</I><BR>
<B>);</B>
<P>
<B>DrvGetDirectDrawInfo </B>gets the capabilities of the graphics hardware.
<H3>Parameters</H3>
<DL>
<DT>
<I>dhpdev</I>
<DD>
Handle to the PDEV that was returned by the driver’s <B><A HREF="grfncs_20.htm">DrvEnablePDEV</A></B>
routine.
<BR>
<DT>
<I>pHalInfo</I>
<DD>
Pointer to a <A HREF="ddstrcts_11.htm">DD_HALINFO</A>&nbsp;structure in which the
driver should return its supported hardware capabilities.
<BR>
<DT>
<I>pdwNumHeaps</I>
<DD>
Pointer to a DWORD in which the number of VIDEOMEMORY structures pointed to by
<I>pvmList</I>&nbsp;is returned.
<BR>
<DT>
<I>pvmList</I>
<DD>
Pointer to an array of VIDEOMEMORY structures in which the driver should
return information about each video memory chunk that it controls.
<BR>
<DT>
<I>pdwNumFourCC</I>
<DD>
Pointer to a DWORD in which the number of DWORDs pointed to by <I>pdwFourCC</I>
is returned.
<BR>
<DT>
<I>pdwFourCC</I>
<DD>
Pointer to an array of DWORDs in which the driver should return information
about each FOURCC that it supports.
</DL>
<H3>Return Value</H3>
<P>
<B>DrvGetDirectDrawInfo</B>&nbsp;returns TRUE if it succeeds; otherwise, it returns
FALSE.
<H3>Comments</H3>
<P>
GDI calls <B>DrvGetDirectDrawInfo</B>&nbsp;and <B><A HREF="ddfncs_6.htm">DrvEnableDirectDraw</A></B>
in response to an application’s call to <B>DirectDrawObjectCreate</B>.
<P>
When enabling a DirectDraw driver, GDI will call <B>DrvGetDirectDrawInfo</B>
twice. The first call determines the size of the video memory heap and the
number of FOURCCs that the driver supports. In this call, GDI passes NULL for
both <I>pvmList</I>&nbsp;and <I>pdwFourCC</I>, so the driver should initialize and
return <I>pdwNumHeaps</I>&nbsp;and <I>pdwNumFourCC</I>&nbsp;only. The second call is
made after GDI allocates the required amount of memory for <I>pvmList</I>&nbsp;and <I>pdwFourCC</I>
based on the values returned by the first call. In the second call, the driver
should initialize and return <I>pdwNumHeaps</I>, <I>pvmList</I>, <I>pdwNumFourCC</I>,
and <I>pdwFourCC</I>.
<P>
GDI allocates and zero-initializes the DD_HALINFO structure to which <I>pHalInfo</I>
points. The driver need only fill in the fields of the DD_HALINFO structure
that pertain to it. <B>&nbsp;</B>
<H3>See Also</H3>
<P>
<B><A HREF="ddfncs_6.htm">DrvEnableDirectDraw</A></B>&nbsp;
<P></FONT>
</BODY>
</HTML>
