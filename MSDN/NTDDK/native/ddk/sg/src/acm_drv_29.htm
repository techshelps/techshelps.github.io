<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ACMDM_FORMATTAG_DETAILS</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_ACMDM_FORMATTAG_DETAILS"></A>ACMDM_FORMATTAG_DETAILS</H2>
<P>
The ACMDM_FORMATTAG_DETAILS message requests an ACM driver to return
information about a format tag.
<H4>Parameters</H4>
<DL>
<DT>
<I>dwDriverID</I>
<DD>
Driver instance identifier. This is the value returned by the driver in
response to the <A HREF="intro_34.htm">DRV_OPEN</A>&nbsp;message.
<BR>
<DT>
<I>hDriver</I>
<DD>
Driver handle.
<BR>
<DT>
<I>uMsg</I>
<DD>
ACMDM_FORMATTAG_DETAILS
<BR>
<DT>
<I>lParam1</I>
<DD>
Pointer to an ACMFORMATTAGDETAILS structure. (ACMFORMATTAGDETAILS is defined
in <I>msacm.h</I>&nbsp;and described in the Win32 SDK.)
<BR>
<DT>
<I>lParam2</I>
<DD>
Contains one of the following flags, specified by the <I>fdwDetails</I>
parameter of the <B>acmFormatTagDetails</B>&nbsp;function, which is described in
the Win32 SDK:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Flag</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Meaning</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ACM_FORMATTAGDETAILSF_<BR>
INDEX
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Indicates the <B>dwFormatTagIndex</B>&nbsp;member of the ACMFORMATTAGDETAILS
structure contains a format tag index. The valid index range is from zero to
one less than the <B>cFormatTags</B>&nbsp;member returned in the driver’s
ACMDRIVERDETAILS structure. (See <A HREF="acm_drv_23.htm">ACMDM_DRIVER_DETAILS</A>.)
<P>
The driver should return details for the format tag associated with the index.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ACM_FORMATTAGDETAILSF_<BR>
FORMATTAG
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Indicates the <B>dwFormatTag</B>&nbsp;member of the ACMFORMATTAGDETAILS structure
contains a format tag.
<P>
The driver should return details for the specified format tag.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ACM_FORMATTAGDETAILSF_<BR>
LARGESTSIZE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Indicates the driver should return details for the format tag having the
largest format. The <B>dwFormatTag</B>&nbsp;member of ACMFORMATTAGDETAILS can
contain a format tag or WAVE_FORMAT_UNKNOWN.
</FONT></TABLE>
</DL>
<H4>Return Value</H4>
<P>
The driver should return MMSYSERR_NOERROR if the operation succeeds. Otherwise
it should return one of the MMSYSERR error codes defined in <I>mmsystem.h</I>,
or one of the ACMERR error codes defined in <I>msacm.h</I>. Possible error
codes include:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Error Code</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Meaning</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
MMSYSERR_NOTSUPPORTED
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
The driver does not support the specified query operation.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ACMERR_NOTPOSSIBLE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
The input parameter values do not represent a valid format or format tag.
</FONT></TABLE>
<H4>Comments</H4>
<P>
A client sends the ACMDM_FORMATTAG_DETAILS message by calling the driver’s <B><A HREF="intro_44.htm">DriverProc</A></B>
entry point, passing the specified parameters. The ACM sends this message when
an application calls the <B>acmFormatTagDetails</B>&nbsp;function, which is
described the Win32 SDK.
<P>
All ACM drivers must support this message.
<P>
The client specifies the format tag in the ACMFORMATTAGDETAILS structure’s <B>dwFormatTag</B>
member. The driver returns information for a particular tag, as follows:
<UL>
<LI>
If the ACM_FORMATDETAILSF_INDEX flag is set, the client has specified an index
value in the ACMFORMATTAGDETAILS structure’s <B>dwFormatTagIndex</B>&nbsp;member.
The driver fills in the ACMFORMATTAGDETAILS structure for the format tag
associated with the specified index value.
<P>
<LI>
If the ACM_FORMATTAGDETAILSF_FORMATTAG flag is set, the client has specified a
format tag in the ACMFORMATTAGDETAILS structure’s <B>dwFormatTag</B>&nbsp;member.
The driver fills in the ACMFORMATTAGDETAILS structure for the specified format
tag. 
<P>
<LI>
If the ACM_FORMATTAGDETAILSF_LARGESTSIZE flag is set, the driver does one of
two things:
<P>
<OL>
<LI>
If <B>dwFormatTag</B>&nbsp;contains WAVE_FORMAT_UNKNOWN, the driver fills in the
ACMFORMATTAGDETAILS structure for the format tag that has a format with the
largest format structure size.
<P>
<LI>
If <B>dwFormatTag</B>&nbsp;contains a format tag, the driver fills in the
ACMFORMATTAGDETAILS structure for that format tag, describing the format with
the largest structure size belonging to the specified tag.
</OL>
</UL>
<P>
Before calling the driver’s <B>DriverProc</B>&nbsp;function, the ACM verifies that:
<UL>
<LI>
The ACMFORMATTAGDETAILS structure is readable and writeable.
<P>
<LI>
The size of the ACMFORMATTAGDETAILS structure (contained in its <B>cbStruct</B>
member) is at least the structure’s defined size. (The structure’s size can be
larger than its defined size, to allow for a longer <B>szFormatTag</B>&nbsp;member
or to allow newer, larger structure definitions to be used within drivers
under development.)
<P>
<LI>
The ACMFORMATTAGDETAILS structure’s <B>fdwSupport</B>&nbsp;member contains zero.
<P>
<LI>
The <I>lParam2</I>&nbsp;parameter contains a valid flag value.
</UL>
<P>
If the format tag is WAVE_FORMAT_PCM, then the driver should return a
zero-length string in <B>szFormatTag</B>. The ACM provides a description
string for this format.
<P>
Before returning, the driver must set the ACMFORMATTAGDETAILS structure’s <B>cbStruct</B>
member to the actual number of bytes returned. The value returned in <B>cbStruct</B>
must not be greater than the value received.
<P>
For more information about format tags, see <A HREF="acm_drv_4.htm">Format
Tags and Filter Tags</A>.
<P></FONT>
</BODY>
</HTML>
