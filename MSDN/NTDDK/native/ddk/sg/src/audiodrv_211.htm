<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LOCAL_DEVICE_INFO</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_LOCAL_DEVICE_INFO"></A>LOCAL_DEVICE_INFO</H2>
<PRE><FONT FACE="Courier" SIZE="2">typedef struct _LOCAL_DEVICE_INFO {
&nbsp; &nbsp; ULONG           Key;
#define LDI_WAVE_IN_KEY     (*(ULONG *)&quot;LDWi&quot;)
#define LDI_WAVE_OUT_KEY    (*(ULONG *)&quot;LDWo&quot;)
#define LDI_MIDI_IN_KEY     (*(ULONG *)&quot;LDMi&quot;)
#define LDI_MIDI_OUT_KEY    (*(ULONG *)&quot;LDMo&quot;)
#define LDI_AUX_KEY         (*(ULONG *)&quot;LDAx&quot;)
#define LDI_MIX_KEY         (*(ULONG *)&quot;LDMx&quot;)
&nbsp; &nbsp; PVOID           pGlobalInfo;
&nbsp; &nbsp; UCHAR           DeviceType;
&nbsp; &nbsp; UCHAR           DeviceNumber;
&nbsp; &nbsp; UCHAR           DeviceIndex;
&nbsp; &nbsp; UCHAR           CreationFlags;
#define SOUND_CREATION_NO_NAME_RANGE ((UCHAR)0x01)
#define SOUND_CREATION_NO_VOLUME     ((UCHAR)0x02)
&nbsp; &nbsp; BOOLEAN         PreventVolumeSetting;
&nbsp; &nbsp; UCHAR           VolumeControlId;
&nbsp; &nbsp; PSOUND_LINE_NOTIFY   LineNotify;
#ifndef SOUNDLIB_NO_OLD_VOLUME
&nbsp; &nbsp; WAVE_DD_VOLUME  Volume;
#endif
#ifdef VOLUME_NOTIFY
&nbsp; &nbsp; LIST_ENTRY      VolumeQueue;
&nbsp; &nbsp; struct _LOCAL_DEVICE_INFO * MixerDevice;
#endif
#ifdef MASTERVOLUME
&nbsp; &nbsp; BOOLEAN         MasterVolume;
#endif
&nbsp; &nbsp; BOOLEAN         VolumeChanged;
&nbsp; &nbsp; PVOID           DeviceSpecificData;
&nbsp; &nbsp; PVOID           HwContext;
&nbsp; &nbsp; ULONG           State;
&nbsp; &nbsp; PCSOUND_DEVICE_INIT   DeviceInit;
} LOCAL_DEVICE_INFO, *PLOCAL_DEVICE_INFO;
&nbsp;</FONT></PRE>
<P>
Within <I>soundlib.lib</I>, the LOCAL_DEVICE_INFO structure is used as the
device extension for each device object created by <B><A HREF="../../kr/src/k104_22.htm">IoCreateDevice</A></B>.
Device objects and device extensions are described in the <I>Kernel-Mode
Drivers</I>&nbsp;<I>Design Guide</I>. The LOCAL_DEVICE_INFO structure is defined in
<I>devices.h</I>. One LOCAL_DEVICE_INFO structure exists for each device
created by <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>.
<H5>Members</H5>
<DL>
<DT>
<B>Key</B>
<DD>
Internal only. Used for debugging. The value is copied from the <B>Key</B>
member of <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>.
<BR>
<DT>
<B>pGlobalInfo</B>
<DD>
Pointer to a driver-defined structure containing device object-specific data.
Specified by the <I>pGDI</I>&nbsp;parameter of <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>.
<BR>
<DT>
<B>DeviceType</B>
<DD>
Copied from the <B>DeviceType</B>&nbsp;member of the <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>
structure.
<BR>
<DT>
<B>DeviceNumber</B>
<DD>
Contains number to append to the end of the device name. Set to 0xFF within <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>
if the SOUND_CREATION_NO_NAME_RANGE flag is specified.
<BR>
<DT>
<B>DeviceIndex</B>
<DD>
For use by the driver. Contains the <I>i</I>&nbsp;parameter specified with <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>.
<BR>
<DT>
<B>CreationFlags</B>
<DD>
Contains flags passed as <I>CreationFlags</I>&nbsp;parameter of <B>SoundCreateDevice</B>.
<BR>
<DT>
<B>PreventVolumeSetting</B>
<DD>
Internal only. Used to prevent volume being shared for devices opened without
shared write access. Set by <B><A HREF="audiodrv_200.htm">SoundSetShareAccess</A></B>.
<BR>
<DT>
<B>VolumeControlId</B>
<DD>
Set by <B><A HREF="audiodrv_201.htm">SoundSetVolumeControlId</A></B>.
<BR>
<DT>
<B>LineNotify</B>
<DD>
Address of a driver-supplied function called when a line status changes. The
function type is <A HREF="audiodrv_217.htm">PSOUND_LINE_NOTIFY</A>. Set by <B><A HREF="audiodrv_199.htm">SoundSetLineNotify</A></B>.
<BR>
<DT>
<B>Volume</B>
<DD>
Contains the device’s volume setting.
<BR>
<DT>
<B>VolumeQueue</B>
<DD>
IRP queue for SOUND_IOCTL_GET_CHANGED_VOLUME requests not completed.
<BR>
<DT>
<B>MixerDevice</B>
<DD>
If the device object represents a mixer device, this member points to an
additional LOCAL_DEVICE_INFO structure for the mixer device. <I>This member
must be set by the driver’s mixer initialization code. It is not set by</I>
soundlib.lib.
<BR>
<DT>
<B>MasterVolume</B>
<DD>
Set if this device is the master volume control device.
<BR>
<DT>
<B>VolumeChanged</B>
<DD>
Internal only. If there is no mixer device, <I>soundlib.lib</I>&nbsp;sets this
after a volume change, to indicate that volume settings need to be updated in
the registry before system shutdown.
<BR>
<DT>
<B>DeviceSpecificData</B>
<DD>
Contains the value passed as the <I>DeviceSpecificData</I>&nbsp;parameter of <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>.
<BR>
<DT>
<B>HwContext</B>
<DD>
Contains the value passed as the <I>pHw</I>&nbsp;parameter of <B>SoundCreateDevice</B>.
<BR>
<DT>
<B>State</B>
<DD>
Internal only Used by <I>soundlib.lib </I>to store the current device state.
<BR>
<DT>
<B>DeviceInit</B>
<DD>
Contains the value passed as the <I>DeviceInit</I>&nbsp;parameter to <B>SoundCreateDevice</B>.
</DL>
<H5>Comments</H5>
<P>
Drivers do not allocate LOCAL_DEVICE_INFO structures locally. When a driver
calls <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>, a pointer to a
<A HREF="../../kr/src/k112_15.htm">DEVICE_OBJECT</A>&nbsp;structure is returned. The
structure’s <B>DeviceExtension</B>&nbsp;member is used as the device’s
LOCAL_DEVICE_INFO structure.
<P></FONT>
</BODY>
</HTML>
