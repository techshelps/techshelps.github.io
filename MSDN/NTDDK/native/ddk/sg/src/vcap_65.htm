<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>DVM_UPDATE</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_DVM_UPDATE"></A>DVM_UPDATE</H2>
<P>
The DVM_UPDATE message requests a user-mode video capture driver to update the
overlay display.
<H5>Parameters</H5>
<DL>
<DT>
<I>dwDriverID</I>
<DD>
Video channel identifier. For this message, the driver should only accept
VIDEO_EXTERNALOUT. (For details, see <A HREF="vcap_9.htm">Opening
Video Channels</A>.)
<BR>
<DT>
<I>hDriver</I>
<DD>
Driver handle.
<BR>
<DT>
<I>uMsg</I>
<DD>
DVM_UPDATE
<BR>
<DT>
<I>lParam1t</I>
<DD>
Handle to a client window.
<BR>
<DT>
<I>lParam2</I>
<DD>
Handle to a display device context.
</DL>
<H5>Return Value</H5>
<P>
The driver should return DV_ERR_OK if the operation succeeds. Otherwise, it
should return one of the DV_ERR error codes defined in <I>msvideo.h</I>.
Custom error codes are also allowed (see <A HREF="vcap_48.htm">DVM_GETERRORTEXT</A>).
<H5>Comments</H5>
<P>
A client sends the DVM_UPDATE message by calling the driver’s <B><A HREF="intro_44.htm">DriverProc</A></B>
entry point, passing the specified parameter values. Applications can send
this message by calling the <B>videoUpdate</B>&nbsp;function, which is described in
the Video for Windows Development Kit.
<P>
If the hardware supports color keying, the driver should repaint the current
key color onto the overlay area. If the key color has not yet been specified,
the driver should specify it. The driver should create a brush using the key
color, convert the screen coordinates describing the overlay area into client
coordinates, and repaint the overlay area, as illustrated in the sample
drivers.
<P>
Typically, a client sends this message whenever its window receives a
WM_PAINT, WM_MOVE, WM_POSITIONCHANGED, or WM_SIZE message. It also typically
sends the message after sending a <A HREF="vcap_52.htm">DVM_SRC_RECT</A>&nbsp;or <A HREF="vcap_44.htm">DVM_DST_RECT</A>
message.
<DL>
<DT>
User-mode video capture drivers <A HREF="vcap_18.htm">using <I>VCUser.lib</A></I>
can call the following functions to set or to determine the key color:
<DD>
<B><A HREF="vcap_87.htm">VC_GetKeyColour</A></B>&nbsp;
<P>
<B><A HREF="vcap_99.htm">VC_SetKeyColourPalIdx</A></B>&nbsp;
<P>
<B><A HREF="vcap_100.htm">VC_SetKeyColourRGB</A></B>&nbsp;
</DL>
<P></FONT>
</BODY>
</HTML>
