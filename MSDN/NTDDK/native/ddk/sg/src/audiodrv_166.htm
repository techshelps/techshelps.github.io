<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SoundCreateDevice</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_SoundCreateDevice"></A>SoundCreateDevice</H2>
<P>
<B>NTSTATUS<BR>
&nbsp; &nbsp; SoundCreateDevice(<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PCSOUND_DEVICE_INIT </B><I>DeviceInit</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN UCHAR </B><I>CreationFlags</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PDRIVER_OBJECT </B><I>pDriverObject</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PVOID </B><I>pGDI</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PVOID </B><I>DeviceSpecificData</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PVOID </B><I>pHw</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN int </B><I>i</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; OUT PDEVICE_OBJECT </B><I>*ppDevObj</I><B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; );</B>
<P>
The <B>SoundCreateDevice</B>&nbsp;function creates a device object and an
associated <A HREF="audiodrv_211.htm">LOCAL_DEVICE_INFO</A>&nbsp;structure.
<H5>Parameters</H5>
<DL>
<DT>
<I>DeviceInit</I>
<DD>
Pointer to an initialized <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>
structure.
<BR>
<DT>
<I>CreationFlags</I>
<DD>
The following flag values are supported:
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Flag</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Definition</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
SOUND_CREATION_NO_NAME_RANGE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Don’t append number to name prototype when creating device name.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
SOUND_CREATION_NO_VOLUME
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Volume setting not supported.
</FONT></TABLE>
<DT>
<I>pDriverObject</I>
<DD>
Pointer to the driver object received as input to the <B>DriverEntry</B>
function.
<BR>
<DT>
<I>pGDI</I>
<DD>
Pointer to driver-specified information. Pointer is stored in the <B>pGlobalInfo</B>
member of the device’s <A HREF="audiodrv_211.htm">LOCAL_DEVICE_INFO</A>
structure.
<BR>
<DT>
<I>DeviceSpecificData</I>
<DD>
Pointer to one of the following device-type structures.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Structure</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Usage</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="audiodrv_228.htm">WAVE_INFO</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
For waveform devices
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="audiodrv_212.htm">MIDI_INFO</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
For MIDI devices
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="audiodrv_215.htm">MIXER_INFO</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
For mixer devices
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
NULL
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
For other devices
</FONT></TABLE>
<DT>
<I>pHw</I>
<DD>
Pointer to driver-specified hardware context information. The pointer is
stored in the <B>HwContext</B>&nbsp;member of the device’s LOCAL_DEVICE_INFO
structure.
<BR>
<DT>
<I>i</I>
<DD>
Driver-specified index value. Stored in <B>DeviceIndex</B>&nbsp;member of the
device’s LOCAL_DEVICE_INFO structure.
<BR>
<DT>
<I>ppDevObj</I>
<DD>
Address of a location to receive a pointer to a DEVICE_OBJECT structure, if
the call succeeds.
</DL>
<H5>Return Value</H5>
<P>
Returns STATUS_SUCCESS if device creation succeeds. Returns
STATUS_INSUFFICIENT_RESOURCES if device creation fails.
<H5>Comments</H5>
<P>
The <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>&nbsp;structure must be
nonpaged.
<P>
The <B>SoundCreateDevice</B>&nbsp;function creates a device object by calling <B><A HREF="../../kr/src/k104_22.htm">IoCreateDevice</A></B>.
If the object creation succeeds, the function returns the address of a <A HREF="../../kr/src/k112_15.htm">DEVICE_OBJECT</A>
structure. The function also allocates a LOCAL_DEVICE_INFO structure and
assigns its address to the <B>DeviceExtension</B>&nbsp;member of the DEVICE_OBJECT
structure.
<P>
The function calls <B><A HREF="../../kr/src/k104_24.htm">IoCreateSymbolicLink</A></B>
to map the NT generic name for the device object to the corresponding Win32
logical name.
<P>
For more information about device objects, see the <I>Kernel-Mode Drivers
Design Guide</I>.
<P></FONT>
</BODY>
</HTML>
