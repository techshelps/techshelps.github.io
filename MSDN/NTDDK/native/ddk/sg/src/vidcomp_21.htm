<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Initialization for the Compression Sequence</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Initialization_for_the_Compression_Sequence"></A>Initialization for the Compression Sequence</H4>
<P>
When the client application is ready to start compressing data, it sends the <A HREF="vidcomp_38.htm">ICM_COMPRESS_BEGIN</A>
message. The client application uses <I>dwParam1</I>&nbsp;to point to the format of
the data being compressed, and uses <I>dwParam2</I>&nbsp;to point to the format for
the compressed data. If your driver cannot handle the formats, or if they are
incorrect, your driver should return ICERR_BADFORMAT to fail the message.
<P>
Before the client application starts compressing data, it sends <A HREF="vidcomp_42.htm">ICM_COMPRESS_GET_SIZE</A>.
For this message, the client application uses <I>dwParam1</I>&nbsp;to point to the
input format and uses <I>dwParam2</I>&nbsp;to point to the output format. Your
driver should return the worst-case size (in bytes) that it expects a
compressed frame to occupy. The client application uses this size value when
it allocates buffers for the compressed video frame.
<P>
Client applications might send the <A HREF="vidcomp_40.htm">ICM_COMPRESS_FRAMES_INFO</A>
message to set the compression parameters. The <I>dwParam1</I>&nbsp;parameter
specifies a pointer to an <A HREF="vidcomp_87.htm">ICCOMPRESSFRAMES</A><B>&nbsp;</B>structure.
For this message, the <B>GetData</B>&nbsp;and <B>PutData</B>&nbsp;members are not used.
The <I>dwParam2</I>&nbsp;parameter specifies the size of the structure. A
compressor can use this message to make decisions about the amount of space
allocated for each frame while compressing. 
<P></FONT>
</BODY>
</HTML>
