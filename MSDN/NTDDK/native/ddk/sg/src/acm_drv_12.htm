<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Configuring ACM Drivers</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Configuring_ACM_Drivers"></A>Configuring ACM Drivers</H3>
<P>
It is often necessary for ACM drivers to obtain and store configuration
parameters. A driver requiring configuration parameters must display a
configuration dialog box when its <B><A HREF="intro_44.htm">DriverProc</A></B>
function receives a <A HREF="intro_28.htm">DRV_CONFIGURE</A>&nbsp;message. The
dialog box must allow a user to specify configuration parameter values.
Optionally, the dialog box can allow the user to select automatic
configuration. If your driver provides this automatic configuration option, it
must attempt to automatically provide values for all configuration parameters.
Two of the sample ACM drivers, the <A HREF="acm_drv_5.htm#DDK_IMA_ADPCM_Audio_Codec">IMA
ADPCM Audio Codec</A>&nbsp;and the <A HREF="acm_drv_5.htm#DDK_Microsoft_GSM_6.10_Audio_Codec">Microsoft
GSM 6.10 Audio Codec</A>, provide automatic configuration.
<P>
An ACM driver’s <B>DriverProc</B>&nbsp;function must respond to <A HREF="intro_36.htm">DRV_QUERYCONFIGURE</A>
messages by indicating whether or not the driver provides a configuration
dialog box.
<P>
A separate copy of an ACM driver’s configuration parameters should be saved
for each user. To accomplish this, the driver should store configuration
parameters in the registry, under the path <B>HKEY_CURRENT_USER\Software\Microsoft\Multimedia\msacm.</B><I>alias</I>.
<P>
For a description of <I>alias</I>, see <A HREF="acm_drv_11.htm">Installing
ACM Drivers</A>. (Use the msacm.<I>alias</I>&nbsp;naming scheme even for local drivers,
which are not installed.) Since configuration parameters should be stored for
each user, the parameters should be obtained and stored when the driver
receives a <A HREF="intro_34.htm">DRV_OPEN</A>&nbsp;message.
<P>
It is important for your driver to provide default values for all
configuration parameters. In some circumstances, such as the playing of system
sounds, there is no user context, so attempts to reference a registry path
under HKEY_CURRENT_USER will fail. In such a case your driver must use its
default values.
<P></FONT>
</BODY>
</HTML>
