<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Obtaining the Driver State</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Obtaining_the_Driver_State"></A>Obtaining the Driver State</H4>
<P>
The client application obtains the driver state by sending <A HREF="vidcomp_79.htm">ICM_GETSTATE</A>.
The client application determines the size of the buffer needed for the state
information by sending this message with <I>dwParam1</I>&nbsp;set to NULL. Your
driver should respond to the message by returning the size of the buffer it
needs for state information.
<P>
After it determines the buffer size, the client application resends the
message with <I>dwParam1</I>&nbsp;pointing to a block of memory it allocated. The <I>dwParam2</I>
parameter specifies the size of the memory block. Your driver should respond
by filling the memory with its state information. If your driver uses state
information, include only optional decompression parameters with the state
information. State information typically includes the setup specified by the
user in the dialog box resulting from an <A HREF="vidcomp_44.htm">ICM_CONFIGURE</A>
message. Any information required for decompressing the image data must be
included with the format data. When done, your driver should return the size
of the state information.
<P>
The client application does not validate any data in the state information. It
simply stores the state information in the ‘strd’ data chunk of the AVI file.
<P></FONT>
</BODY>
</HTML>
