<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SoundConnectInterrupt</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_SoundConnectInterrupt"></A>SoundConnectInterrupt</H2>
<P>
<B>NTSTATUS<BR>
&nbsp; &nbsp; SoundConnectInterrupt(<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN ULONG </B><I>InterruptNumber</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN INTERFACE_TYPE </B><I>BusType</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN ULONG </B><I>BusNumber</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PKSERVICE_ROUTINE </B><I>Isr</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PVOID </B><I>ServiceContext</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN KINTERRUPT_MODE </B><I>InterruptMode</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN BOOLEAN </B><I>ShareVector</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; OUT PKINTERRUPT </B><I>*Interrupt</I><B><BR>
&nbsp; &nbsp; &nbsp; &nbsp; );</B>
<P>
The <B>SoundConnectInterrupt</B>&nbsp;function creates an interrupt object and
installs an interrupt handler.
<H5>Parameters</H5>
<DL>
<DT>
<I>InterruptNumber</I>
<DD>
Interrupt number.
<BR>
<DT>
<I>BusType</I>
<DD>
Bus type. INTERFACE_TYPE is defined in <I>ntddk.h</I>.
<BR>
<DT>
<I>BusNumber</I>
<DD>
Bus number, as returned from <B><A HREF="audiodrv_176.htm">SoundGetBusNumber</A></B>.
<BR>
<DT>
<I>Isr</I>
<DD>
Pointer to an interrupt service routine (ISR). PKSERVICE_ROUTINE is defined in
<I>ntddk.h</I>&nbsp;as follows:
<PRE><FONT FACE="Courier" SIZE="2">typedef BOOLEAN
(*PKSERVICE_ROUTINE) (
&nbsp; &nbsp; IN struct _KINTERRUPT *Interrupt,
&nbsp; &nbsp; IN PVOID ServiceContext
&nbsp; &nbsp; );
&nbsp;</FONT></PRE>
<DT>
<I>ServiceContext</I>
<DD>
Pointer to driver-specified information that is passed to the ISR.
<BR>
<DT>
<I>InterruptMode</I>
<DD>
Interrupt mode (<B>Latched</B>&nbsp;or <B>LevelSensitive</B>). KINTERRUPT_MODE is
defined in <I>ntddk.h</I>.
<BR>
<DT>
<I>ShareVector</I>
<DD>
TRUE if interrupt is shareable, FALSE otherwise.
<BR>
<DT>
<I>Interrupt</I>
<DD>
Pointer to one or more system-defined interrupt objects in nonpaged memory.
</DL>
<H5>Return Value</H5>
<P>
Returns one of the following values.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Value</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Definition</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
STATUS_SUCCESS
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Operation succeeded.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
STATUS_DEVICE_CONFIGURATION_ERROR
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Improper input parameter.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
STATUS_INSUFFICIENT_RESOURCES
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Insufficient system resources.
</FONT></TABLE>
<H5>Comments</H5>
<P>
Interrupt objects are of type _KINTERRUPT. These are a system-defined type
that your driver doesn’t reference directly. Save the interrupt object pointer
received in <I>Interrupt</I>, because it must be passed as input to <B><A HREF="../../kr/src/k105_53.htm">KeSynchronizeExecution</A></B>.
<P>
The ISR is responsible for clearing device interrupts. The HAL handles
controller interrupts. After interrupts are cleared, the ISR should call <B><A HREF="../../kr/src/k104_66.htm">IoRequestDPC</A></B>
to queue a deferred procedure call to the DPC function pointed to by the <B>DeferredRoutine</B>
member of the <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>&nbsp;structure. The
DPC function should finish processing the interrupt.
<P>
Prior to being unloaded, the driver must release the interrupt objects by
calling <B><A HREF="../../kr/src/k104_32.htm">IoDisconnectInterrupt</A></B>.
<P>
For discussions of interrupt objects and deferred procedure calls, see the <I>Kernel-Mode
Drivers Design Guide</I>.
<P></FONT>
</BODY>
</HTML>
