<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Rendering Directly to Video Hardware</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Rendering_Directly_to_Video_Hardware"></A>Rendering Directly to Video Hardware</H3>
<P>
Drivers that can render video directly to hardware should support the ICM_DRAW
messages in addition to the ICM_DECOMPRESS messages. The ICM_DRAW messages
render data directly to hardware rather than into a data buffer returned to
the client application by the decompression driver.
<P>
Your driver receives a series of messages from the client application to
coordinate the following activities to render a video sequence:
<UL>
<LI>
Setting the driver state
<P>
<LI>
Specifying the input format
<P>
<LI>
Preparing to decompress video
<P>
<LI>
Decompressing the video
<P>
<LI>
Ending decompression
</UL>
<P>
The following ICM_DRAW messages are used by renderers for these decompression
activities.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Message</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Description</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Decompresses a frame of data and draws it.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW_BEGIN
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Prepares to draw data.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW_END
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Cleans up after decompressing an image to the screen.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW_REALIZE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Realizes a palette.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW_QUERY
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Determines if the driver can render data in a specific format.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_DRAW_SUGGESTFORMAT
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Has the driver suggest an output format.
</FONT></TABLE>
<P>
The video decompressed with the ICM_DRAW messages is retained by your driver,
which handles the display of data. These messages control only the
decompression process. The messages used to control the drawing are described
separately. Your driver will receive the ICM_DRAW messages only if it sets the
VIDCF_DRAW flag when it responds to the <A HREF="vidcomp_77.htm">ICM_GETINFO</A>
message.
<P></FONT>
</BODY>
</HTML>
