<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Transferring Waveform Output Data</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Transferring_Waveform_Output_Data"></A>Transferring Waveform Output Data</H4>
<P>
For waveform output operations, clients call the user-mode driver’s <B><A HREF="audiodrv_49.htm">wodMessage</A></B>
function. User-mode drivers should expect the client to first send a <A HREF="audiodrv_123.htm">WODM_OPEN</A>
message to open a driver instance. Next, the client allocates memory for one
or more data buffers and sends <A HREF="audiodrv_125.htm">WODM_PREPARE</A>
messages to prepare the buffers for use.
<P>
The client then begins filling the buffers and sending <A HREF="audiodrv_132.htm">WODM_WRITE</A>
messages, which include a buffer address. The user-mode driver keeps a queue
of buffer addresses. When the user-mode driver starts receiving <A HREF="audiodrv_132.htm">WODM_WRITE</A>
messages, it uses a separate thread to begin sending the received data to the
kernel-mode driver, typically by calling <B>WriteFile</B>&nbsp;or <B>WriteFileEx</B>.
Each time the user-mode driver reads a buffer and sends the data to the
kernel-mode driver, it dequeues the buffer and sends the client a <A HREF="audiodrv_134.htm">WOM_DONE</A>
callback message to notify it that the buffer has been read. The client can
then re-use the buffer by specifying its address with another <A HREF="audiodrv_132.htm">WODM_WRITE</A>
message.
<P>
When the client has finished the output operation, it stops sending <A HREF="audiodrv_132.htm">WODM_WRITE</A>
messages. It can also send <A HREF="audiodrv_126.htm">WODM_RESET</A>, which
indicates to the user-mode driver that it should not dequeue any remaining
data buffers. The client can then send a <A HREF="audiodrv_131.htm">WODM_UNPREPARE</A>
message for each buffer and deallocate the buffers. Finally, the driver should
expect the client to close the instance by sending <A HREF="audiodrv_116.htm">WODM_CLOSE</A>.
<P></FONT>
</BODY>
</HTML>
