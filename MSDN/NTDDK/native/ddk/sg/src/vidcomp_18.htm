<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Compressing Video Data</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H3><A NAME="DDK_Compressing_Video_Data"></A>Compressing Video Data</H3>
<P>
When used to compress video data, your driver receives a series of messages,
similar to decompressing data. The client application sends messages to your
driver to coordinate the following activities:
<UL>
<LI>
Obtaining the driver state
<P>
<LI>
Specifying the input format and determining the compression format
<P>
<LI>
Preparing to compress video
<P>
<LI>
Compressing the video
<P>
<LI>
Ending compression
</UL>
<P>
The following messages are used by video compression drivers.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Message</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Description</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Compresses a frame of data into the buffer provided by the client application.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS_BEGIN
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Prepares for compressing data.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS_END
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Cleans up after compressing.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS_GET_FORMAT
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Obtains the driver’s suggested output format of the compressed data.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS_GET_SIZE
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Obtains the maximum size of one frame of data when it is compressed in the
output format.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
ICM_COMPRESS_QUERY
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Determines if a driver can compress a specific input format.
</FONT></TABLE>
<P>
The video compressed with these messages is returned to the client
application. When compressing data, your driver can use either software or
hardware to do the compression.
<P>
<B>Note</B>&nbsp; When MSVideo recompresses a file, each frame is decompressed to a
full frame before it is passed to the compressor.
<P></FONT>
</BODY>
</HTML>
