<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Standard Driver Messages</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H4><A NAME="DDK_Standard_Driver_Messages"></A>Standard Driver Messages</H4>
<P>
Every user-mode driver must export a <B><A HREF="intro_44.htm">DriverProc</A></B>
function. Each <B>DriverProc</B>&nbsp;function must recognize a set of standard
driver messages, which are defined in <I>mmsystem.h</I>. A driver receives the
following standard messages, in the order listed, when an application uses the
driver to perform input or output operations.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Message</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Operation Performed by Driver</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_33.htm">DRV_LOAD</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Performs post-load operations.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_30.htm">DRV_ENABLE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No operations performed under Windows NT.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_34.htm">DRV_OPEN</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Opens a driver instance.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_27.htm">DRV_CLOSE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Closes a driver instance.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_29.htm">DRV_DISABLE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
No operations performed under Windows NT.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_31.htm">DRV_FREE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Performs pre-unload operations.
</FONT></TABLE>
<P>
Additionally, a driver can receive the following standard messages, which are
typically sent from a Control Panel application during installation and
configuration operations.
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Message</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Operation Performed by Driver</B>
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_32.htm">DRV_INSTALL</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Installs the kernel-mode driver.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_35.htm">DRV_PNPINSTALL</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Installs a kernel-mode driver, using Plug and Play configuration information.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_28.htm">DRV_CONFIGURE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Obtains configuration parameters.
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<A HREF="intro_36.htm">DRV_QUERYCONFIGURE</A>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Indicates whether configuration parameters can be modified.
</FONT></TABLE>
<P>
Although applications can send standard driver messages directly by calling <B>SendDriverMessage</B>,
described in the Win32 SDK, typically they do not. Instead, they call
functions provided by higher level multimedia APIs. These APIs in turn act as
clients to the user-mode drivers and send messages by:
<UL>
<LI>
Calling <B>SendDriverMessage</B>, to directly send any of the standard
messages.
<P>
<LI>
Calling <B>OpenDriver</B>, described in the Win32 SDK. This function calls <B>SendDriverMessage</B>
to send <A HREF="intro_33.htm">DRV_LOAD</A>&nbsp;and <A HREF="intro_30.htm">DRV_ENABLE</A>
messages, if the driver has not been previously loaded, and then to send <A HREF="intro_34.htm">DRV_OPEN</A>.
<P>
<LI>
Calling <B>CloseDriver</B>, described in the Win32 SDK. This function calls <B>SendDriverMessage</B>
to send <A HREF="intro_27.htm">DRV_CLOSE</A>&nbsp;and, if there are no other open
instances of the driver, to also send <A HREF="intro_29.htm">DRV_DISABLE</A>
and <A HREF="intro_31.htm">DRV_FREE</A>.
</UL>
<P>
Besides supporting the standard driver messages, a user-mode multimedia
driver’s <B><A HREF="intro_44.htm">DriverProc</A></B>&nbsp;function generally also
supports a set of <A HREF="intro_10.htm">customized driver
messages</A>.
<P></FONT>
</BODY>
</HTML>
