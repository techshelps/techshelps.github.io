<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>ICM_COMPRESS</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_ICM_COMPRESS"></A>ICM_COMPRESS</H2>
<P>
The ICM_COMPRESS message is sent to a video compression driver to compress a
frame of data into an application-supplied buffer.
<H5>Parameters</H5>
<DL>
<DT>
<I>dwParam1</I>
<DD>
Specifies a pointer to an <A HREF="vidcomp_86.htm">ICCOMPRESS</A>&nbsp;data structure.
The following members of ICCOMPRESS specify the compression parameters:
<P>
The <B>lpbiInput</B>&nbsp;member contains the format of the uncompressed data; the
data itself is in a buffer pointed to by <B>lpInput</B>.
<P>
The <B>lpbiOutput</B>&nbsp;member contains a pointer to the output (compressed)
format, and <B>lpOutput</B>&nbsp;contains a pointer to a buffer used for the
compressed data.
<P>
The <B>lpbiPrev</B>&nbsp;member contains a pointer to the format of the previous
frame, and <B>lpPrev</B>&nbsp;contains a pointer to a buffer used for the previous
data. These members are used by drivers that do temporal compression.
<P>
The driver should use the <B>biSizeImage</B>&nbsp;member of the BITMAPINFOHEADER
structure associated with <B>lpbiOutput</B>&nbsp;to return the size of the
compressed frame.
<P>
The <B>lpckid</B>&nbsp;member points to a DWORD. If the pointer is not NULL, the
driver should specify a two-character code for the chunk ID in the DWORD. The
chunk ID should correspond to the chunk ID used in the AVI file.
<P>
The <B>lpdwFlags</B>&nbsp;member points to a DWORD. The driver should fill the
DWORD with the flags that should go in the AVI index. In particular, if the
returned frame is a key frame, your driver should set the AVIIF_KEYFRAME flag.
<P>
The <B>dwFrameSize</B>&nbsp;member contains the size into which the compressor
should try to make the frame fit. The size value is used for compression
methods that can make tradeoffs between compressed image size and image
quality.
<P>
The <B>dwQuality</B>&nbsp;member contains the specific quality the compressor
should use, if it supports quality.
<BR>
<DT>
<I>dwParam2</I>
<DD>
Specifies the size of the ICCOMPRESS structure.
</DL>
<H5>Return Value</H5>
<P>
Returns ICERR_OK if successful. Otherwise, returns an error number.
<P></FONT>
</BODY>
</HTML>
