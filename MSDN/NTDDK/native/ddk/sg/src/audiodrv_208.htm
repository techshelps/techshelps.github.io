<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SynthInit</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_SynthInit"></A>SynthInit</H2>
<P>
<B>NTSTATUS<BR>
&nbsp; &nbsp; SynthInit(<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PDRIVER_OBJECT </B><I>pDriverObject</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PWSTR </B><I>RegistryPathName</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PGLOBAL_SYNTH_INFO </B><I>pGDI</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN ULONG </B><I>SynthPort</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN BOOLEAN </B><I>InterruptConnected</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN INTERFACE_TYPE </B><I>BusType</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN ULONG </B><I>BusNumber</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN PMIXER_DATA_ITEM </B><I>MidiOutItem</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN UCHAR </B><I>VolumeControlId</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN BOOLEAN </B><I>Multiple</I><B>,<BR>
&nbsp; &nbsp; &nbsp; &nbsp; IN SOUND_DISPATCH_ROUTINE </B><I>*DevCapsRoutine</I><B><BR>
);</B>
<P>
The <B>SynthInit</B>&nbsp;function creates a device object for a MIDI synthesizer
(AdLib or OPL3) and performs additional initialization tasks.
<H5>Parameters</H5>
<DL>
<DT>
<I>pDriverObject</I>
<DD>
Address of a location to receive a pointer to a DEVICE_OBJECT structure, if
the call succeeds.
<BR>
<DT>
<I>RegistryPathName</I>
<DD>
Pointer to a string representing the registry path to the device subkey. Use
the path name created by either <B><A HREF="audiodrv_171.htm">SoundEnumSubkeys</A></B>
or <B><A HREF="audiodrv_197.htm">SoundSaveRegistryPath</A></B>.
<BR>
<DT>
<I>pGDI</I>
<DD>
Pointer to a <A HREF="audiodrv_210.htm">GLOBAL_SYNTH_INFO</A>&nbsp;structure.
<BR>
<DT>
<I>SynthPort</I>
<DD>
Port address.
<BR>
<DT>
<I>InterruptConnected</I>
<DD>
TRUE if interrupt is connected, FALSE otherwise.
<BR>
<DT>
<I>BusType</I>
<DD>
Bus type. INTERFACE_TYPE is defined in <I>ntddk.h</I>.
<BR>
<DT>
<I>BusNumber</I>
<DD>
Bus number.
<BR>
<DT>
<I>MidiOutItem</I>
<DD>
Not used. Should be set to NULL.
<BR>
<DT>
<I>VolumeControlId</I>
<DD>
A driver-defined volume control ID value.
<BR>
<DT>
<I>Multiple</I>
<DD>
TRUE if indexed device names are allowed, FALSE otherwise. 
<BR>
<DT>
<I>DevCapsRoutine</I>
<DD>
Pointer to a driver-defined function that returns device capabilities. The
function type is <A HREF="audiodrv_219.htm">SOUND_DISPATCH_ROUTINE</A>.
To read about functions that return device capabilities, refer to the
description of the <B>DevCapsRoutine</B>&nbsp;member of the <A HREF="audiodrv_218.htm">SOUND_DEVICE_INIT</A>
structure.
</DL>
<H5>Return Value</H5>
<P>
Returns STATUS_SUCCESS if the operation succeeds. Otherwise returns an
NTSTATUS error code.
<H5>Comments</H5>
<P>
You do not create a SOUND_DEVICE_INIT structure for a synthesizer device,
because <I>soundlib.lib</I>&nbsp;creates one internally. It also provides an
internal dispatch routine and exclusion routine.
<P>
The <B>SynthInit</B>&nbsp;function performs the following operations, in order:
<OL>
<LI>
Calls <B><A HREF="audiodrv_166.htm">SoundCreateDevice</A></B>&nbsp;to create a
device object and a LOCAL_DEVICE_INFO structure.
<P>
<LI>
Sets default volume values for left and right channels in the <B>Volume</B>
member of the device’s <A HREF="audiodrv_211.htm">LOCAL_DEVICE_INFO</A>
structure.
<P>
<LI>
Calls <B><A HREF="audiodrv_194.htm">SoundReportResourceUsage</A></B>
to obtain system resources.
<P>
<LI>
Calls <B><A HREF="audiodrv_184.htm">SoundMapPortAddress</A></B>&nbsp;to map port
addresses.
<P>
<LI>
Attempts to reference the synthesizer hardware to verify that it exists at the
specified address.
<P>
<LI>
Calls <B><A HREF="audiodrv_195.htm">SoundSaveDeviceName</A></B>&nbsp;to write
the device name in the registry.
<P>
<LI>
Stores the specified volume control ID in the device’s LOCAL_DEVICE_INFO
structure.
<P>
<LI>
Determines if the synthesizer chip is OPL3-compatible.
<P>
<LI>
Initializes the synthesizer hardware to silence.
</OL>
<P>
Setting <I>Multiple</I>&nbsp;to FALSE causes <B>SoundCreateDevice</B>&nbsp;to be called
with the SOUND_CREATION_NO_NAME_RANGE flag set. Use FALSE if the port address
is 0x388.
<P>
Synthesizer interrupts are not handled by <I>soundlib.lib</I>. If the device
supports a hardware interrupt, the driver must provide ISR code to handle it.
<P>
Drivers calling <B>SynthInit</B>&nbsp;must include <I>synthdrv.h</I>.
<P></FONT>
</BODY>
</HTML>
