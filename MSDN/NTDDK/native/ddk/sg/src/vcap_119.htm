<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>VC_Cleanup</TITLE>
<style>@import url(/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="/msdn_ie3.css"></HEAD>
<BODY BGPROPERTIES="FIXED" TEXT="#000000" BGCOLOR="#FFFFFF">

<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="DDK_VC_Cleanup"></A>VC_Cleanup</H2>
<P>
<B>VOID<BR>
VC_Cleanup(<BR>
&nbsp; &nbsp; PDRIVER_OBJECT </B><I>pDriverObject<B><BR>
&nbsp; &nbsp; </I>);</B>
<P>
The <B>VC_Cleanup</B>&nbsp;function deallocates the system resources that were
allocated by a previous call to <B><A HREF="vcap_128.htm">VC_Init</A></B>.
<H5>Parameters</H5>
<DL>
<DT>
<I>pDriverObject</I>
<DD>
The driver object pointer received as input to the driver’s <B>DriverEntry</B>
function.
</DL>
<H5>Return Value</H5>
<P>
None.
<H5>Comments</H5>
<P>
A kernel-mode video capture driver should call <B>VC_Cleanup</B>&nbsp;if a failure
occurs within its <B>DriverEntry</B>&nbsp;function after <B><A HREF="vcap_128.htm">VC_Init</A></B>
has been called.
<P>
Additionally, the <I>VCKernel.lib</I>&nbsp;library specifies <B>VC_Cleanup</B>&nbsp;as
the function to be called when the kernel-mode driver is unloaded (by
assigning the function’s address to the driver object’s <B>DriverUnload</B>
member).
<P>
The <B>VC_Cleanup</B>&nbsp;function performs the following operations, in the order
listed:
<OL>
<LI>
Cancels outstanding IRPs.
<P>
<LI>
Calls the kernel-mode driver’s <B><A HREF="vcap_141.htm">CleanupFunc</A></B>
function.
<P>
<LI>
Unmaps mapped I/O memory space.
<P>
<LI>
Removes the device’s interrupt objects.
<P>
<LI>
Releases system resources (interrupt number, DMA channel, and so on) reserved
for the device.
<P>
<LI>
Removes the device object associated with the device.
</OL>
<P>
For more information about driver objects, device objects and interrupt
objects, see the <I>Kernel-Mode Drivers Design Guide</I>.
<P></FONT>
</BODY>
</HTML>
