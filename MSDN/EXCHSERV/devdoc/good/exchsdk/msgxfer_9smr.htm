<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Message Transfer Process</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_gdk_the_message_transfer_process"></a>The Message Transfer Process</h2>
<p>
When Microsoft Exchange Server gives a message to a gateway, its first step is to transfer the message to the gateway for that foreign system. The gateway receives messages from its MTS-OUT folder on the server. The following procedure summarizes the basic message transfer steps for outgoing messages.</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To transfer messages from the Microsoft Exchange Server information store to a gateway</h5>
<ol>
<li>
The information store receives a message which has an attached list of recipients.</li>
<li>
The <a href="gwgloss_0vfx.htm#_gdk_message_transfer_agent_mta_">message transfer agent (MTA)</a> determines if any of the recipients are outside of Microsoft Exchange Server and must receive the message through a gateway.</li>
<li>
The MTA wraps the message in a message transfer envelope for delivery through the gateway.</li>
<li>
The message is delivered to the MTS-OUT folder for the gateway.</li>
</ol>
<p>
Your gateway must take messages from MTS-OUT, translate them into the foreign system format, and deliver them to their intended recipients in the foreign system. </p>
<p>
If a recipient’s address type is not EX (the native Microsoft Exchange Server format), then the recipient is on a foreign system. In this case, Microsoft Exchange Server assigns the message to the gateway that handles the recipient’s address type. </p>
<p>
<b>Note</b>  The MTA continues to deliver messages to a gateway even if the gateway service is paused. This can cause messages to collect in the delivery queues and to overflow.</p>
<p>
A message’s <a href="gwgloss_0vfx.htm#_gdk_message_transfer_envelope_mte_">message transfer envelope (MTE)</a> contains information about the recipients to whom the gateway must deliver the message. Microsoft Exchange Server puts all addresses that must be handled by the gateway into the recipient list of a message’s MTE. The properties that can be set on an MTE are described in <a href="msgxfer_30kz.htm">Using Message Transfer Envelope Properties</a>.</p>
<p>
Because there is a separate recipient list for a message’s MTE, there are two recipient lists associated with the message — the original list that came with the message and the list on the MTE. The MTE’s recipient list is always a subset (although possibly a complete subset) of the original list. The MTE list contains only those recipients to whom the gateway must deliver the message. These recipients are called Responsibility-TRUE. The list on the message itself contains all the recipients to whom the message is addressed; some of these addresses may be for mail systems not associated with the gateway. See <a href="adrssing_2b1h.htm">The Responsibility Attribute</a> for details.</p>
<p>&nbsp;</p></body>
</HTML>
