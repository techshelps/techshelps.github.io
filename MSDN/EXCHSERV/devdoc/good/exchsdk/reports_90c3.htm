<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Nondelivery Reports</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_gdk_nondelivery_reports"></a>Nondelivery Reports</h1>
<p>
A gateway should generate nondelivery reports whenever message delivery fails. The nondelivery report is returned to the original sender.  There are several reasons why message delivery can fail:
<ul>
<li>
Address mapping can fail. This means the gateway is unable to find or generate an address for a responsibility-true recipient to which it can deliver the message.</li>
<li>
The gateway is unable to connect to the foreign system. Typically a gateway will make several attempts at regular intervals before deciding that a message cannot be delivered.</li>
<li>
The gateway delivers the message to the foreign system, but the foreign system returns it as undeliverable. This can happen if the recipient’s address does not exist in the foreign system, or if local problems in the foreign system prevent delivery.</li>
</ul>
<p>
Like delivery reports, nondelivery reports can be generated by calling the MAPI method <b>IMAPISupport::StatusRecips</b>. Since nondelivery reports are so important, however, you may want your gateway to generate its own nondelivery reports (messages with the message class REPORT.IPM.Note.NDR). A Microsoft Exchange Server nondelivery report should contain at least the following elements:
<ul>
<li>
Nondelivery report envelope--the report message itself.</li>
<li>
Nondelivery report failed recipient list</li>
<li>
Original message</li>
<li>
Original message recipient list</li>
</ul>
<p>
The original message and its recipient list are included in the nondelivery report as an embedded message attachment. The properties for the envelope and failed recipient list are described in <a href="reports_7sj7.htm">Nondelivery Report Envelope Properties</a> and <a href="reports_3lbn.htm">Nondelivery Report Failed Recipient List Properties</a>.</p>
<p>
The remaining topics in this section present information necessary to generate well-formed nondelivery reports.</p>
<p>&nbsp;</p></body>
</HTML>
