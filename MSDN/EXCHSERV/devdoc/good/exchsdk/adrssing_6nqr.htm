<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Mapping Outbound Addresses</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_gdk_mapping_outbound_addresses"></a>Mapping Outbound Addresses</h2>
<p>
When a gateway receives a message from Microsoft Exchange Server, addresses for each recipient have the properties PR_ENTRYID, PR_ADDRTYPE, and PR_EMAIL_ADDRESS. The originator address has the PR_ORIGINATOR_ENTRYID, PR_ORIGINATOR_ADDRTYPE, and PR_ORIGINATOR_ADDRESS properties. These addresses are in Microsoft Exchange Server format and the gateway must translate them to the format of the foreign system.</p>
<p>
Beginning with the PR_ENTRYID and PR_ADDRTYPE properties, the gateway can look up an existing proxy address for the foreign system using the address lookup function <b>HrGWResolveProxy</b>. When it finds the proxy address corresponding to the foreign system, it uses that address to deliver the message.</p>
<p>
If the gateway cannot map an address from Microsoft Exchange Server to the foreign system, it must take appropriate action as follows:
<ul>
<li>
<b>Originator</b>  Generate a nondelivery report for each Responsibility-TRUE recipient, and send the nondelivery report to the originator. This is because the gateway cannot generate a return address for replies to the message. (See <a href="reports_6ann.htm">Reports</a> for information about gateway reports.) </li>
<li>
<b>Responsibility-TRUE recipient</b>  Generate a nondelivery report for the recipient.</li>
<li>
<b>Responsibility-FALSE recipient</b>  Do not generate a nondelivery report, but preserve as much address information as possible by using encapsulation or a comment field.</li>
</ul>
<p>
The following figure illustrates a message being sent from a Microsoft Exchange Server originator to an SMTP recipient. The originator’s address is expressed in Microsoft Exchange Server format and the recipient’s address is in SMTP format. This tells Microsoft Exchange Server that the message must be sent through the SMTP gateway.</p>
<p>
<img src="images/gpg02_04.gif" border=0></p>
<p>
<b>Outbound address mapping</b></p>
<p>
In this scenario, the gateway looks up the originator’s SMTP proxy address and maps the originator’s EX address to SMTP format before delivering the message to the SMTP system.</p>
<p>&nbsp;</p></body>
</HTML>
