<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Checking Disk I/O with FERNEL32</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_edk_checking_disk_i_o_with_fernel32"></a>Checking Disk I/O with FERNEL32</h1>
<p>
The <i>Windows NT Server Resource Kit </i>provides DLL replacements that can monitor usage for any Win32 function. </p>
<p>
FERNEL32.DLL is a replacement for KERNEL32.DLL in Windows NT Server. It includes functions for the kernel-level interfaces, which include file I/O, semaphores, events, and mutexes. Using FERNEL32 with the APF32DMP.EXE program, you can run a test and view all file activity requested by each component from the Windows NT Server kernel. This will tell you how much I/O is generated by each file. You can then isolate areas where I/O affects performance. </p>
<p>
This same technique can be used to replace ADVAPI32.DLL, GDI32.DLL, USER32.DLL, and the CRTDLL.DLL with ZDVAPI32.DLL, ZDI32.DLL, ZSER32.DLL, and ZRTDLL.DLL. These utilities output unformatted text, so they may require a parser for data analysis. For more information, see <i>Optimizing Windows NT </i>in the<i> </i>Windows NT Server Resource Kit.</p>
<h5><img src="../../images/wedge.gif" border=0>&nbsp;&nbsp;&nbsp;&nbsp;To use FERNEL32.DLL</h5>
<ol>
<li>
Make sure your application is stopped.</li>
<li>
Type the following at a command line: <br>
<b>APT32CVT FERNEL32 &lt;<i>application list</i>&gt;</b><p>
for example:<br>
<b>APF32CVT FERNEL32 EMSMTA.EXE</b>
</li>
<li>
Start your application.</li>
<li>
Start the APF32DMP.EXE utility.</li>
<li>
Select FERNEL32.DLL.</li>
<li>
Change to the directory to start your test case.</li>
<li>
In APF32DMP.EXE, choose <b>Clear</b>.</li>
<li>
Perform your test case.</li>
<li>
In APF32DMP.EXE, choose <b>Dump</b>.</li>
</ol>
<p>
</p>
<p>
After running your application with FERNEL32, the FERNEL32.WAP file contains the data to be analyzed. It is located in the working directory of the application you are profiling. To analyze this data, you may need to create simple parsing tools, which you can write with Microsoft Excel macros or other programs.</p>
<p>&nbsp;</p></body>
</HTML>
