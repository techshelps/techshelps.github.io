<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>The Heartbreak of C4275 Warnings</title>

<meta name=href content="msdn_ie4.css">                
<style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD><basefont face="verdana,arial,helvetica" size=2 color="#000000">

<BODY bgcolor="#FFFFFF">
<font face="verdana,arial,helvetica" size="2">

<font size="5" face="verdana,arial,helvetica">The Heartbreak of C4275
Warnings</font>

<h2><font size="2" face="verdana,arial,helvetica">Dear Dr. GUI:</font></h2>

<p><font size="2" face="verdana,arial,helvetica">I've used the <b>DECLARE_SERIAL</b>
and <b>IMPLEMENT_SERIAL</b> macros in some classes I'd now like
to export from a DLL. But I'm having some trouble linking. There
were a bunch of warnings&#151;C4273, C4251, and C4275, to be
specific. I've <b>#pragma</b>'d them out for the time being. But
I'm getting another error now: </font></p>

<p><font size="2" face="verdana,arial,helvetica"><b>C:\USERS\DEFAULT\src\bbsched\lib\src\schevent.cpp(83)
: error C2491: 'CBWeeklyEvent::classCBWeeklyEvent': definition of
dllimport static data member not allowed</b> </font></p>

<p><font size="2" face="verdana,arial,helvetica">The offending line is: </font></p>

<pre><code>IMPLEMENT_SERIAL(CBWeeklyEvent, CObject, SERIALIZE_VERSION);</code></pre>

<p><font size="2" face="verdana,arial,helvetica">I'm not sure what I can
do about this. Clearly, there must be some workaround, otherwise
MFC couldn't use <b>IMPLEMENT_SERIAL</b> in any of its exported
classes. What's the answer? </font></p>

<p><font size="2" face="verdana,arial,helvetica">Frustrated Linker </font></p>

<h2><font size="2" face="verdana,arial,helvetica">Dr. GUI replies:</font></h2>

<p><font size="2" face="verdana,arial,helvetica">I assume that you are
using an extension dialog. I had this problem with an extension.
I fixed it by changing the _AFXDLL preprocessor flag to _AFXEXT. </font></p>

<p><font size="2" face="verdana,arial,helvetica">C4275 warnings are to be
expected. They are just telling you that a Microsoft Foundation
Class Library (MFC) base class you are using isn't exported from
the dynamic-link library (DLL). However, this doesn't matter
because the MFC classes are in the shared DLL. It would matter if
the base class were your own class.</font></p>
</font></body>
</html>
