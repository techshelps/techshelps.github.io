<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Calculating the Size of a Table with a Clustered Index</TITLE><BODY BGCOLOR="#FFFFFF">


<H2 CLASS="h1">Calculating the Size of a Table with a Clustered Index</H2><P CLASS="t">The steps in this section demonstrate how to calculate the size of a table with a clustered index. For an example of how to use the formulas presented in this section, see "Calculating the Size of a 9,000,000-Row Table with a Clustered Index" later in this article.</P>
<H3 CLASS="h3"><A NAME="sec0"></A>Step 1: Calculate the Data Row Size</H3><P CLASS="t">Calculation of data row size is slightly different depending on whether the row stores any variable-length columns. Use the first formula if all the columns are fixed-length and defined as NOT NULL. Use the second formula if the row contains variable-length columns or if the columns are defined as NULL.</P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">For fixed-length columns, calculate:
<P CLASS="lt1">2 + (sum of bytes in all fixed-length columns) = Data Row Size</P></LI><LI CLASS="ULI1">For fixed- and variable-length columns, calculate:
<P CLASS="lt1">2 + (sum of bytes in all fixed-length columns) + (sum of bytes in all variable-length columns) = Subtotal</P>

<P CLASS="lt1">Subtotal + ((Subtotal/256) + 1) + (Number of variable-length columns + 1) + 2 = Data Row Size</P></LI></UL></SPAN><P CLASS="t">The values 1 and 2 in the previous equations are overhead that SQL Server uses for internal storage.</P>
<H3 CLASS="h3"><A NAME="sec1"></A>Step 2: Calculate the Number of Data Pages</H3><P CLASS="t">Calculate the number of data pages using these formulas:</P>
<P CLASS="t">2,016/(Data Row Size) = number of data rows per page (round down, as there are no partial rows on a page)</P>
<P CLASS="t">(number of rows)/(number of data rows per page) = number of data pages required (round up)</P>
<H3 CLASS="h3"><A NAME="sec2"></A>Step 3: Calculate the Size of Clustered Index Rows</H3><P CLASS="t">Calculation of the size of clustered index rows depends on whether the keys are fixed- or variable-length. Use the first formula if all keys are fixed-length. Use the second formula if keys include variable-length columns.</P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">For fixed-length columns, calculate:
<P CLASS="lt1">5 + (sum of bytes in the fixed-length index keys) = clustered index row size</P></LI><LI CLASS="ULI1">For fixed- and variable-length columns, calculate:
<P CLASS="lt1">5 + (sum of bytes in the fixed-length index keys) + (sum of bytes in variable-length index keys) = Subtotal</P>

<P CLASS="lt1">(Subtotal) + ((Subtotal/256) + 1) + (number of variable-length columns + 1) + 2 = clustered index row size</P></LI></UL></SPAN><P CLASS="t">The values 5 and 2 in the previous equations are overhead that SQL Server uses for internal storage.</P>
<H3 CLASS="h3"><A NAME="sec3"></A>Step 4: Calculate the Number of Clustered Index Pages</H3><P CLASS="t">After you have calculated the row size of the clustered index, you can calculate the number of pages for the clustered index using these formulas:</P>
<P CLASS="t">(2,016/clustered index row size) – 2 = number of clustered index rows per page</P>
<P CLASS="t">(number of data pages)/(number of clustered index rows per page) = number of index pages at level 0</P>
<P CLASS="t">If the result is greater than 1, repeat the following division step, using the quotient as the next dividend, until the quotient equals 1. When the quotient equals 1, you have reached the root level of the index.</P>
<P CLASS="t">(number of index pages at the last level)/(number of clustered index rows per page) = number of index pages at next level</P>
<H3 CLASS="h3"><A NAME="sec4"></A>Step 5: Calculate the Total Number of Pages</H3><P CLASS="t">Calculate the total number of pages using this formula:</P>
<P CLASS="t">(number of data pages) + (number of index pages at level 0) + (number of index pages at next level) + (number of index pages at next level) […] = total number of data pages</P></BODY></HTML>
