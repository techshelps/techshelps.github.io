<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Replication Issues</TITLE><BODY BGCOLOR="#FFFFFF">


<H2 CLASS="h1">Replication Issues</H2><P CLASS="t">The following represents a list of some of the more common issues you can encounter when installing and using the replication feature of SQL Server.</P>
<P CLASS="term1"><B>A table does not appear in the list of possible articles when creating a publication in SQL Enterprise Manager. </B></P>
<P CLASS="dt1">Any table that will be published must have a PRIMARY KEY constraint defined using the CREATE TABLE or ALTER TABLE statement. A constraint can also be created using SQL Enterprise Manager. </P>
<P CLASS="dt1">Creating a unique index will not allow the table to appear in the list of possible articles. Users who have upgraded their database from prior versions of SQL Server usually do not have PRIMARY KEY constraints, but rather have used unique indexes because constraints were not supported until SQL Server version 6.0. Use ALTER TABLE to add constraints as appropriate.</P>
<P CLASS="term1"><B>LogReader and Distribution tasks do not show any entries in the Task History of SQL Enterprise Manager after setting up replication. </B></P>
<P CLASS="dt1">By default, LogReader and Distribution subsystem tasks are created with an "Auto Start" frequency. When setting up subscription servers, you can change the default for the Distribution task to a different frequency. This means the tasks will start when they are first created as tasks or any time SQL Executive is started. They run continuously in a polling "loop," pausing for each loop <I>n</I> milliseconds as defined by the "polling interval" set with the <B>-i</B> parameter. The tasks are set up with a default of one second for LogReader and two seconds for Distribution. Under this type of task scheduling, these two tasks will not display any task history, provided there are no errors, because the tasks never quit. Any error or retry attempt will cause an entry to be displayed in the Task History. If SQL Executive is shut down, these tasks will have an entry in the Task History with a message of:</P>
<P>This task was shutdown.</P>
<P></P>
<P CLASS="dt1">This message indicates the task ended as part of the shutdown to SQL Executive. </P>
<P CLASS="dt1">If a LogReader or Distribution task is scheduled to run "On Demand" or "Recurring," then it will process jobs until no more jobs are available, display information about its processing to the Task History, and then quit. For example, a LogReader task will display the following message:</P>
<P>Processed &lt;n&gt; replicated transactions consisting of &lt;m&gt; commands from '&lt;published db&gt;.'</P>
<P></P>
<P CLASS="dt1">One method that can be used to examine a more detailed view of the processing of a LogReader, Sync, or Distribution task is to add the <B>-o</B> parameter to each of these tasks.</P>
<P>-o<I>file_name</I></P>
<P></P>
<P CLASS="dt1">Do not use a space between <B>-o</B> and <I>file_name</I> or the file will not be created. </P>
<P CLASS="dt1">This parameter will force the task to dump details of replication processing. The parameter can be added by editing any of the tasks using SQL Enterprise Manager. Remember that if the task is set to "Auto Start," the parameter change will not take effect until SQL Executive is restarted. This parameter should only be used for troubleshooting situations as the amount of output written to the file can be substantial and could cause a degradation in performance. The <B>-o</B> parameter is valid for any LogReader, Distribution, and Sync task. These tasks open the file to "append" entries if the file exists and to share it so a user can view the file while the task is still executing. Remember that this parameter is only for troubleshooting purposes and only typically used when working with a support engineer. The task will not display any errors if the file cannot be created for any reason—for example, if the syntax is incorrect or the path does not exist.</P></BODY></HTML>
