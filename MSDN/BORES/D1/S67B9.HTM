<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Creating and Sizing Transaction Logs</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Creating and Sizing Transaction Logs</H3><P CLASS="t">To dump a transaction log to a physical dump device, the log must reside on its own device. This can be accomplished in one of two ways:</P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">Use the LOG ON clause of the CREATE DATABASE statement when the database is initially created.</LI></UL></SPAN><P CLASS="t">Or</P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">After the database has been created:
<P CLASS="ls2">Use the ALTER DATABASE statement to change to a new device.</P>

<P CLASS="ls2">Execute the <B>sp_logdevice</B> system procedure to move the log to the new device.</P></LI></UL></SPAN><P CLASS="t">Ideally, every database should have its log on a separate device. Exceptions are small databases that are either dumped often enough to negate the need for transaction log dumps, or "test" databases whose contents are not needed or can be easily rebuilt, such as the <B>pubs</B> database. The other exception is the <B>master</B> database, which must have the data and log portions on the <B>master</B> device.</P>
<P CLASS="t">The first step in managing transaction logs is to estimate how large to make the log. The size will depend on the volume of transactions in the database and the frequency with which the log is dumped. After a transaction log is dumped to a physical dump device, the inactive portion of the log—the portion from the beginning of the log to the first noncommitted transaction—is automatically truncated to free new space for the log to use. As a general rule, creating a log that is approximately 10 to 25 percent of the size of the database is a good place to start—depending on your environment, you may require a log that is significantly larger or smaller than that amount. It is best to simulate the volume and types of transactions that will be expected when the system is in production. If the log fills up or comes close to filling up before the scheduled transaction log dump occurs, you should either enlarge the size of the log or decrease the time between transaction log dumps.</P></BODY></HTML>
