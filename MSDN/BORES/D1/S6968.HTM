<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Calculating the Size of a 9,000,000-Row Table with a Clustered Index</TITLE><BODY BGCOLOR="#FFFFFF">


<H2 CLASS="h1">Calculating the Size of a 9,000,000-Row Table <BR>with a Clustered Index</H2><P CLASS="t">The following example calculates the size, in 2K pages, of the data and clustered index for a table containing:</P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">9,000,000 rows</LI><LI CLASS="ULI1">Sum of bytes in fixed-length columns = 100</LI><LI CLASS="ULI1">Sum of bytes in two variable-length columns = 50</LI><LI CLASS="ULI1">Clustered key, fixed-length = 4 bytes</LI></UL></SPAN><P CLASS="t">The five steps previously discussed were used to ascertain the table size.</P>
<P CLASS="ls">Calculate the data row size.</P>
<P>4    Overhead</P>
<P>+ 100    Sum of bytes in all fixed-length columns</P>
<P>+  50    Sum of bytes in all variable-length columns</P>
<P>———--    </P>
<P>  154    Subtotal</P>
<P>+   1    (Subtotal / 256) + 1 (Overhead)</P>
<P>+   3    Number of variable-length columns + 1</P>
<P>+   2    (Overhead)</P>
<P>———--    </P>
<P>  160    Data row size</P>
<P></P>
<P CLASS="ls">Calculate the number of data pages.</P>
<P>2,016/160 = 12 data rows per page</P>
<P>9,000,000/12 = 750,000 data pages</P>
<P></P>
<P CLASS="ls">Calculate the size of clustered index rows.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;5    Overhead</P>
<P>+   4    Sum of bytes in the fixed-length index keys</P>
<P>———--    </P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;9    Clustered index row size</P>
<P></P>
<P CLASS="ls">Calculate the number of clustered index pages.</P>
<P>(2,016/9) — 2 = 222 clustered index rows per page</P>
<P>750,000/222 = 3,378 index pages (level 0)</P>
<P>3,378/222 = 15 index pages (level 1)</P>
<P>15/222 = 1 index page (level 2)</P>
<P></P>
<P CLASS="ls">Calculate the total number of pages.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="128pt" VALIGN="TOP"><COL WIDTH="54pt" VALIGN="TOP"><COL WIDTH="163pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="thf">Totals</P></TD><TD VALIGN="TOP"><P CLASS="thf">Pages</P></TD><TD VALIGN="TOP"><P CLASS="thf">Rows</P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P CLASS="tr"></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Level 2 (root)</P></TD><TD VALIGN="TOP"><P CLASS="tt">           1</P></TD><TD VALIGN="TOP"><P CLASS="tt">            15</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Level 1</P></TD><TD VALIGN="TOP"><P CLASS="tt">         15</P></TD><TD VALIGN="TOP"><P CLASS="tt">       3,378</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Level 0</P></TD><TD VALIGN="TOP"><P CLASS="tt">    3,378</P></TD><TD VALIGN="TOP"><P CLASS="tt">   750,000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Data</P></TD><TD VALIGN="TOP"><P CLASS="tt">750,000</P></TD><TD VALIGN="TOP"><P CLASS="tt">9,000,000</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt"></P></TD><TD VALIGN="TOP"><P CLASS="tt">———</P></TD><TD VALIGN="TOP"><P CLASS="tt"></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Total number of 2K pages</P></TD><TD VALIGN="TOP"><P CLASS="tt">753,394</P></TD><TD VALIGN="TOP"><P CLASS="tt"></P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P></BODY></HTML>
