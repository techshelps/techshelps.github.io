<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Dumping a Full Transaction Log</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Dumping a Full Transaction Log</H3><P CLASS="t">It is possible for a transaction log to become so full that there is no room left to log new transactions. When this occurs, SQL Server reports error 1105:</P>

<PRE>Can't allocate space for object 'syslogs' in database database_name because the 'logsegment' segment is full. If you ran out of space in Syslogs, dump the transaction log. Otherwise, use ALTER DATABASE or sp_extendsegment to increase the size of the segment.
</PRE>
<P CLASS="t">In most cases, the log can be dumped to a physical dump device, which will free up new space in the log. When the transaction log is dumped, SQL Server first writes a checkpoint record in the log to get a snapshot of which transactions are currently open. It then writes out the pages of the log and removes the inactive portion of the log.</P>
<P CLASS="t">If the log is so full that there is not even enough room left to write the checkpoint record, the only option available is to issue a DUMP TRANSACTION <I>database_name</I> WITH NO_LOG statement. This statement truncates the inactive portion of the log without writing the initial checkpoint record and without logging any of the truncation operation. Because the log is not written to a physical dump device, it is not recoverable. It is therefore imperative that the database be dumped immediately so that future transaction log dumps will be recoverable. If you encounter this situation regularly, you should increase the size of the log or increase the frequency of your log dumps.</P>
<P CLASS="t">SQL Server can help prevent a transaction log from ever filling completely. Through its close integration with the Windows NT Performance Monitor, the percentage of log space used for each database can be continuously monitored. Using Performance Monitor alerts, the database administrator can have Performance Monitor automatically run a batch file to dump the transaction log when the percentage of log space used hits a predefined threshold. Using this approach, along with the automated scheduled backup, alerting, and e-mail and page notification capabilities of SQL Enterprise Manager, the database administrator's task of managing backups is greatly simplified and automated.</P></BODY></HTML>
