<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Setting Up a Backup Server</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Setting Up a Backup Server</H3><P CLASS="t">To accomplish a backup server setup, there are a couple of changes that need to be made to the databases on Standby. After initially creating the databases on Standby, the two database options <B>read only</B> and <B>no chkpt on recovery</B> need to be set for each database that will be maintained. As stated earlier, when loading a database and its transaction logs, no update activity can take place in the database until all logs have been loaded. These two options help to reduce the risk of having any activity between log loads. When SQL Server is started, a checkpoint record is written in each database after it has been recovered. Setting the <B>no chkpt on recovery</B> option prevents SQL Server from writing this checkpoint. That way, if the Standby server goes down and SQL Server is restarted, the databases will still show that no activity has taken place, and transaction logs can continue to be loaded from the Primary server.</P>
<P CLASS="t">If SQL Server is manually stopped by using the SHUTDOWN statement, the shutdown procedure waits for all active processes to complete and checkpoints each database before stopping. The writing of this checkpoint prevents any further transaction log loads because there would have been an update made to the database. Setting the <B>read only</B> option not only prevents users from performing any write activity in a database but also causes SQL Server to bypass writing a checkpoint record in the database when a SHUTDOWN statement is issued. When these two options are set for the databases on Standby, database and transaction logs should be able to continue loading regardless of how the Standby server goes down. If the Standby server is needed to replace Primary, you must turn off the <B>no chkpt on recovery </B>and <B>read only</B> options before users can resume updating.</P></BODY></HTML>
