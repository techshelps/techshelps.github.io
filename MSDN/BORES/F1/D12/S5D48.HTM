<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Detecting Performance Bottlenecks</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Detecting Performance Bottlenecks</H3><P CLASS="t">If you have a user who complains that the server is running too slowly, do you need to buy more hardware? It is important to realize that detecting performance bottlenecks is an art and that your ability to do so will improve with experience. For example, you may think that memory is your bottleneck. However, if you purchase more memory for your server, you may discover that the server still isn't performing better because the CPU is the bottleneck. </P>
<P CLASS="t">The goal is to determine which of the three major parts of the server—memory, disk I/O subsystem, or CPU—is causing the bottleneck. The Windows NT Performance Monitor tool can be an effective aid in making the correct decision.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Memory</H4><P CLASS="t">To determine if the system requires more memory, you need to find out how much your system is paging. Use the Performance Monitor to track the following elements of the paging file: percentage usage and memory percent available. If the paging file is more than 50 percent used and if less than 25 percent of the total memory is available, then it's best to add more RAM.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>Disk I/O</H4><P CLASS="t">To determine whether the disk I/O subsystem is the bottleneck, you need to find out if the server is being I/O-bound on asynchronous I/Os to the Microsoft Exchange Server database. To determine this, review the following performance monitor counters: PhysicalDisk: Disk Queue Length and PhysicalDisk: %Disk Time.</P>
<P CLASS="t">The Disk Queue Length parameter shows how many outstanding disk requests there are per physical disk. It includes requests in service at that time. Multi-spindle disk devices can have multiple disk requests active at one time. Therefore, look for the disk queue length minus the number of spindles on the disk device. The disk is I/O-bound when the difference between the length of the queue and the number of spindles on the disk device is consistently high. According to the Windows NT Performance Monitor, this difference should average less than two.</P>
<P CLASS="t"><I>Disk time</I> is the percentage of elapsed time that the selected disk drive spends servicing requests. A high percentage indicates that your system is spending most of its time servicing disk requests. In this case, your system needs either faster disk drives or more disk drives over which to spread the requests.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>CPU</H4><P CLASS="t">The CPU can have a high utilization even if the disk and/or memory are causing the bottleneck. Therefore, it's best to check those two areas before checking the CPU. To determine if your system requires more processors, track System: % Total Processor and Process: % Processor - Process X. If the total system processor use is averaging more than 75 percent, you probably need to add another processor. So if you already have four CPUs and are still CPU-bound, you need to upgrade the processor type or add a second server.</P></BODY></HTML>
