<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Transaction Logs Recovery</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Transaction Logs Recovery</H3><P CLASS="t">The following example describes how transaction logs are recovered.</P>
<P CLASS="t">The circumstances are as follows: </P>
<SPAN CLASS="list"><UL><LI CLASS="ULI1">Circular logging is not enabled </LI><LI CLASS="ULI1">The transaction logs are stored on a disk separate from the database files. </LI><LI CLASS="ULI1">The last full (normal) backup took place two days ago.</LI><LI CLASS="ULI1">Due to a hardware failure, such as a bad hard disk, the information store databases become damaged, but the transaction log drive remains intact. </LI></UL></SPAN><P CLASS="t">Do the above circumstances dictate that the best you can do is lose two days of production data? The answer is no. Because the transaction logs are complete, they contain all transactions from the point of the last full backup. </P>
<P CLASS="t">In this case, after the hardware is restored, you need to perform a full restore. Do not select <B>Erase All Existing Data</B>, which prompts the backup program to remove all existing log files. The full restore writes the database files and the log files that were backed up with the last full backup. </P>
<P CLASS="t">The restored log files are any log file saved up to the first log file on the current transaction log drive. For example, suppose that the full backup copied Edb00012.log through Edb00014.log. The log files on the transaction log drive would be Edb00015.log and up. The full restore will copy Edb00012.log through Edb00014.log and the information store database files that are part of the backup set. </P>
<P CLASS="t">When the information store service is started, it restores transactions from Edb00012.log through the last log file (such as Edb00019.log) and Edb.log, the most recent log file. After this is completed, the database will be up-to-date. The log files contain signatures, which ensure that these files are included in the sequence to be restored.</P></BODY></HTML>
