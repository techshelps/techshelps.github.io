<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>FIPERF.BAT: Add File Counters to Performance Monitor</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">FIPERF.BAT: Add File Counters to Performance Monitor</H3><P CLASS="t">FIPERF adds counters to Performance Monitor that monitor the number, size, and age of files in various directories. This ability is particularly useful in SMS to monitor directories such as SMS\site.srv\dataload.box\deltamif.col.</P>
<P CLASS="t">The name of the new Performance Monitor object is <B>SMS_Files</B>. Look at the <B>Explain</B> text in Performance Monitor for definitions of the counters.</P>
<P CLASS="t">FIPERF must be run on the computer running the SMS site services.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Usage Notes</H4><SPAN CLASS="list"><UL><LI CLASS="ULI1">Do not run these counters with too small a polling interval, which adversely affects server performance because the server continuously scans directories. A reasonable minimum polling interval is one minute, but one hour is recommended.</LI><LI CLASS="ULI1">The directories that are monitored are stored in the registry in \\HKEY_LOCAL_MACHINE\SYSTEM\CURRENTCONTROLSET\SMS_FILES\LINKAGE. Add or remove items from this list if you wish (see next note).</LI><LI CLASS="ULI1">Due to the nature of Performance Monitor, whenever you bring up a list of counters, the counter DLLs are called to return data. This means that a scan of all the directories is performed. If these directories have many files, this could take from a few seconds to a few minutes. If you find that there is a large delay and that there are directories that you don't want to monitor, remove them from the Linkage key.</LI></UL></SPAN><H4 CLASS="h3"><A NAME="sec1"></A>Removing FIPERF</H4><P CLASS="t">To remove this software, run the following command (<B>unlodctr</B> is provided with Windows&nbsp;NT):</P>
<P CLASS="t"><B>unlodctr SMS_Files</B></P>
<P CLASS="t">Do not simply delete the registry keys; you could lose other Performance Monitor counters.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>Runs On</H4><P CLASS="t">Alpha, x86</P>
<H4 CLASS="h3"><A NAME="sec3"></A>Files Required for FIPERF</H4><P CLASS="t">FIPERF.DLL<BR>SMSPERF.DLL</P>
<P CLASS="t">The following files are required for installing the <B>SMS_Files</B> counter, but can be removed after installation:</P>
<P CLASS="t">FIPERF.BAT<BR>FICTRNM.H<BR>FI.INI</P>
<H4 CLASS="h3"><A NAME="sec4"></A>FIPERF Syntax     </H4><P CLASS="t"><B>fiperf </B><I>path</I></P>
<P CLASS="term1"><I>path</I></P>
<P CLASS="dt1">The path to the root SMS directory; for example, D:\SMS.</P></BODY></HTML>
