<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>SnaBase Service: SNA Servers of Variables</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">SnaBase Service: SNA&nbsp;Servers of Variables</H3><P CLASS="t">The Registry variables that affect the SnaBase service on a computer running SNA&nbsp;Server are found in the following location in the Registry:</P>
<P CLASS="t">HKEY_LOCAL_MACHINE<BR>    SYSTEM<BR>    CurrentControlSet<BR>            Services<BR>                SnaBase<BR>                    Parameters</P>
<P CLASS="t">These are the variable names and descriptions:</P>
<P CLASS="term1"><B>BackupSponsors: REG_MULTI_SIZE: </B><B><I>server names</I></B></P>
<P CLASS="dt1">This is a list of all the backup SNA&nbsp;Server computers in the subdomain.</P>
<P CLASS="term1"><B>ConfigFilePath:REG_SZ:</B><I>pathname</I><BR>Default: <I>SnaRoot</I>\SYSTEM\CONFIG\COM.CFG</P>
<P CLASS="dt1">Specifies the path for the location of the configuration file on the local server; therefore, it applies only to primary or backup servers. This variable may need to be set to an explicit string (for example, a string such as C:\SNA\SYSTEM\CONFIG\COM.CFG) in unusual situations where software interaction prevents normal local access to the configuration file.</P>
<P CLASS="term1"><B>IgnoreClientUpdates: REG_SZ: {YES|NO}   </B>Default: <B>NO</B></P>
<P CLASS="dt1">If YES all of the service table updates from SNA&nbsp;Server clients are ignored. </P>
<P CLASS="term1"><B>ListenBacklog: REG_DWORD:       </B>Default: <B>32</B></P>
<P CLASS="dt1">This variable specifies the maximum size to which the queue that holds pending connections can grow. This value is used by both the SnaBase and SnaServer services; however, it can only be configured in the SnaBase Registry setting.</P>
<P CLASS="dt1">If a Windows NT TCP/IP Winsock server application (like SNA&nbsp;Server) is bombarded with multiple, simultaneous TCP/IP connection requests when the listen() backlog queue is full, it will begin rejecting requests by replying with a TCP/IP reset frame.</P>
<P CLASS="dt1">To locate the problem, run a network trace with a protocol analyzer, count the number of unacknowledged TCP SYN connection request frames before the server starts replying with the TCP Reset bit set (which tells the sending station that the frame was received but the server did not have the resources to process the connection request).</P>
<P CLASS="dt1">The actual network interaction may appear as a delayed or slow connection because the client should attempt the connection again after waiting for a timeout.</P>
<P CLASS="dt1">SNA&nbsp;Server has a default "listen backlog" of 32 that can be adjusted higher or lower by using the ListenBacklog Registry parameter. The ListenBacklog is normally sufficient when set to five. This parameter is not added during Setup, and must be added manually. This value should only be increased if a large number of clients are all attempting to open sessions to SNA&nbsp;Server at the same time over TCP/IP sockets. If this value is modified, both SnaServer and SnaBase will use the new value.</P>
<P CLASS="dt1">The maximum values for the backlog setting in Windows NT are as follows:</P>
<P></P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="161pt" VALIGN="TOP"><COL WIDTH="173pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th">Windows NT Version</P></TD><TD VALIGN="TOP"><P CLASS="th">Backlog</P></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><P CLASS="tr"></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">3.51</P></TD><TD VALIGN="TOP"><P CLASS="tt">100</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">4.0 (Server)</P></TD><TD VALIGN="TOP"><P CLASS="tt">200</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">4.0 (Workstation)</P></TD><TD VALIGN="TOP"><P CLASS="tt">5</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P CLASS="term1"><B>MacVersion:REG_DWORD:</B>                Default: <B>210</B></P>
<P CLASS="dt1">SnaBase sends the SNA&nbsp;Server version number to Macintosh clients.</P>
<P CLASS="term1"><B>PermanentServers: REG_MULTI_SZ       </B>Default: <B>NONE</B></P>
<P CLASS="dt1">This specifies the names and/or IP addresses of SNA&nbsp;Server computers to where SnaBase always sends the service table updates, even if the SNA&nbsp;Server computers are not in the configuration file. </P>
<P CLASS="term1"><B>PrimaryServer: REG_SZ: </B><I>servername</I></P>
<P CLASS="dt1">SNA&nbsp;Server backup and member server computers locate the primary SNA&nbsp;Server computer by contacting its name or IP address directly. It uses the primary server name entered during Setup of the backup or member server. Either the server name or an IP address can be entered. If using an IP address, use the standard notation layout, such as 123.45.67.89. </P>
<P CLASS="term1"><B>SecureSponsor: REG_SZ: {YES|NO}</B>      Default: <B>YES</B></P>
<P CLASS="dt1">SNA&nbsp;Server client and server software support the ability to encrypt client-server data for LU session data as configured in SNA&nbsp;Server Manager by the <B>Use Client/Server Encryption</B> checkbox in the User property page. In addition, the data flowing over the sponsor session can be encrypted by setting the SecureSponsor Registry parameter to YES. This parameter can also use the values {ON|OFF}. Regardless of the parameter used, they must be entered in uppercase letters. The setting applies to all sponsor connections supported by the SNA&nbsp;Server computer on which the Registry parameter is defined. This entry must be configured on the server. Configuration on the client is optional.</P>
<P CLASS="term1"><B>SnaBackupDomain: REG_SZ</B></P>
<P CLASS="dt1">This is the name of the backup SNA&nbsp;Server subdomain and is a client-only parameter.</P>
<P CLASS="term1"><B>STServiceName: REG_SZ</B>                Default: <B><I>&lt;local computer name&gt;</I></B></P>
<P CLASS="dt1">This parameter specifies the SNA&nbsp;Server Banyan VINES service name. The value can be any ASCII string less than 16 characters long. The default is the local computer name.</P>
<P CLASS="term1"><B>SyncConfigFiles:REG_SZ:{ ON </B>|<B> OFF }       </B>Default:<B> ON</B></P>
<P CLASS="dt1">When this variable is set to <B>OFF</B>, replication of the configuration file from the primary server to any backup servers is disabled. Otherwise, the configuration file will automatically be replicated from the primary server to any backup servers whenever the configuration file is changed and saved. Setting this variable to <B>OFF</B> does not offer any performance gains, so it is generally best not to set the variable; that is, it's best to allow the default behavior (replicating the configuration file).</P>
<P CLASS="term1"><B>TerminatelfNoSponsors: REG_DWORD: {0|1}     </B>Default: <B>1</B></P>
<P CLASS="dt1">This is a client-only parameter. If this parameter value is set to 0, a client SnaBase cannot initially connect to an SNA&nbsp;Server computer and the client will terminate. If this parameter value is set to 1, SnaBase will not terminate if it cannot open the initial sponsor connection.</P>
<P CLASS="term1"><B>WatchDogTimeout: REG_DWORD:</B> <I>decimal value in seconds</I></P>
<P CLASS="dt1">This parameter defaults to 60 seconds if it is not configured. Both SNA&nbsp;Server and clients send these SNA&nbsp;Server specific "keepalive" messages, so both sides must be adjusted to prevent timeouts over very slow connections. </P>
<P CLASS="dt1">This parameter is valid for SNA&nbsp;Server, Windows NT clients, and Windows 95 clients. Windows 3.x clients adjust this parameter in the WIN.INI file in the [WNAP] section. Edit the line <B>WatchDogTimeOut=</B> &lt;seconds&gt;.</P>
<P CLASS="t">HKEY_LOCAL_MACHINE<BR>    SYSTEM<BR>    CurrentControlSet<BR>            Services<BR>                SnaBase<BR>                    Parameters<BR>                        SnaLm</P>
<P CLASS="t">SNALM is the transport DLL for Microsoft Networking. The variable name and description is:</P>
<P CLASS="term1"><B>BufferSize:REG_WORD: {0|1|2|3}       </B>Default: <B>1</B></P>
<P CLASS="dt1">This entry specifies the Microsoft Networking input/output buffer size. </P>
<P CLASS="dt1">0 = It minimizes the memory usage. The buffer size equals the maximum message size.</P>
<P CLASS="dt1">1 = This is a compromise between 0 and 2 values. The buffer size is twice the maximum message size. This is the default value.</P>
<P CLASS="dt1">2 = Maximum performance, the buffer size is for time the maximum message size.</P>
<P CLASS="dt1">3 = This values allowsWindows NT Server to decide on the buffer size.</P>
<P CLASS="t">HKEY_LOCAL_MACHINE<BR>    SYSTEM<BR>    CurrentControlSet<BR>            Services<BR>                SnaBase<BR>                    Parameters<BR>                        SnaSpx</P>
<P CLASS="t">The variable name and description is:</P>
<P CLASS="term1"><B>FlipMacAddress:REG_SZ {YES|NO}       </B>Default: </P>
<P CLASS="dt1">This entry is used with SPX connections (the protocol used in Novell NetWare networks). If set to YES, SNANW.DLL will bit flip the IPX node (MAC) address before trying to open an SPX connection. If the connection fails, it retries with the original non-flipped address. This entry can only be set on client computers. </P>
<P CLASS="t">HKEY_LOCAL_MACHINE<BR>    SYSTEM<BR>    CurrentControlSet<BR>            Services<BR>                SnaBase<BR>                    Parameters<BR>                        SnaTcp</P>
<P CLASS="term1"><B>BroadcastDisabled:REG_SZ {YES|NO}</B>    Default: <B>YES</B></P>
<P CLASS="dt1">SnaBase broadcasts service table updates over IP. A service table is a server-to-server data structure that each server in the subdomain has to keep track of SNA&nbsp;Server resources. These include real-time status of connections, invokable TPs, and LU pools.</P>
<P CLASS="dt1">If this entry is set to NO, SnaBase will send both service table broadcasts and directed datagrams over IP. If this entry is set to yes, it will use the method available for the version of SNA&nbsp;Server (2.1x or 3.0) residing on the computer.</P>
<P CLASS="dt1">If the <B>UseBroadcasts</B> Registry entry is set to YES, the <B>BroadcastDisabled</B> entry is disabled.</P>
<P CLASS="term1"><B>KeepAlive: REG_SZ: { YES|NO }</B>        Default: <B>YES</B></P>
<P CLASS="dt1">This parameter was created to disable TCP/IPs keepalives. By default, TCP/IP will send its own keepalives on an idle connection every two hours when an SNA&nbsp;Server connection is bound to TCP/IP. When this is set to YES, it disables the keepalive. The Registry entry is the same on SNA&nbsp;Server, Windows NT clients, and Windows 95 clients.</P>
<P CLASS="dt1">To disable the keepalive on a Windows 3.x client, edit the <B>KeepAlive =</B> {YES|NO} line of the [WNAP] section of the WIN.INI file. </P>
<P CLASS="dt1">For more information see the section on WatchDogTimeOut in the SnaBase parameters section.</P>
<P CLASS="term1"><B>Network: REG_DWORD</B>                   Default: <B>0</B></P>
<P CLASS="dt1">This entry specifies the network IP address SnaBase sends to clients and other servers in the subdomain. The allowed values are 0 to <I>&lt;the number of adapters -1&gt;</I> (one less than the total number of adapters). By default, SnaBase advertises the IP address associated with adapter 0. If the default is changed, SnaBase will advertise the IP address associated with other adapters on the computer.</P>
<P CLASS="term1"><B>UseBroadcasts:REG_SZ {YES|NO}</B>        Default: <B>NO</B></P>
<P CLASS="dt1">This enables SNA&nbsp;Server 2.1x service table broadcasts over IP. SNA&nbsp;Server 2.1x sends broadcasts, 3.0 sends directed datagrams. If the value is set to YES, the SnaBase will use broadcasts. If it is set to NO (the default), SnaBase will send directed datagrams.</P></BODY></HTML>
