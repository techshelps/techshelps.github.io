<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Tuning and Bottlenecks</TITLE><BODY BGCOLOR="#FFFFFF">


<H2 CLASS="h1">Tuning and Bottlenecks</H2><P CLASS="t">Tuning a system means locating the reason why the system is not performing up to expectations. Frequently, there is a single system component that is causing the system to perform poorly. The condition in which the limitations in one component prevent the whole system from operating faster is known as a <I>bottleneck</I>. The primary indicator of a bottleneck is an extended high rate of use on one hardware resource and resulting low rates of use on related components. It is accompanied by sustained queues for one or more services, and slow response time. </P>
<P CLASS="t">If a computer handles many different types of tasks, different components may become bottlenecks at different times. For instance, the CPU may become the bottleneck when a compute-intensive application is running; the disk may become the bottleneck if several applications are attempting to read and write data simultaneously. However, in general, the device with the lowest maximum throughput is the most likely to become a bottleneck if it is in demand. This is especially true of server applications that tend to run only a few demanding applications (like SMS or SQL&nbsp;Server). If a component is acting as a bottleneck, making other components faster can never yield more throughput; it can only result in lower utilization of the faster components.</P>
<P CLASS="t">Although 100 percent utilization of a resource is a clear warning of a bottleneck, it is neither a necessary nor sufficient condition. You can have bottlenecks on devices with utilization well below 100 percent and you can, at least in theory, have a device running at nearly 100 percent utilization that is not a bottleneck. That is, the device is not preventing any other resource from getting its work done, nothing is waiting for it, and even if it were infinitely fast, things wouldn't happen any sooner.</P>
<P CLASS="t">The following list describes some of the most obvious and common signs that can be observed and that may indicate a bottleneck:</P>
<P CLASS="term1"><B><B>Server hard disk is always busy.</B></B></P>
<P CLASS="dt1">Frequently, you can observe how busy a server's hard disk is by watching and listening to the server. If the server's disk is always busy, then there is a good chance that the server is not performing optimally. </P>
<P CLASS="term1"><B><B>Server applications run very slowly.</B></B></P>
<P CLASS="dt1">You may notice that the SMS&nbsp;Administrator (or other applications) runs very slowly on the server.</P>
<P CLASS="term1"><B><B>Clients cannot access server (or server responds very slowly).</B></B></P>
<P CLASS="dt1">SMS servers are used to perform a number of different functions. For instance, servers log clients on to the network, configure the clients to run SMS, collect the inventory data from the clients, and provide distributed packages to the clients. You may observe that some servers are so busy that they stop processing log ons, or process the logon requests very slowly. Users may notice that their logon scripts take much longer than they used to, or that SMS Client Setup or inventory is much slower. Additionally, users may not be able to install packages, or may not be able to gain access to shared packages.</P>
<P CLASS="term1"><B><B>SMS stops processing system files.</B></B></P>
<P CLASS="dt1">You should routinely check the SMS system directories to be sure that files are being processed correctly. The following table lists some of the directories that should be monitored; a backlog of files in these directories may indicate that the system is not performing optimally.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="153pt" VALIGN="TOP"><COL WIDTH="285pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Directory</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Comment</B></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">LOGS</P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the SMS services and components to store logs. Contains primary and backup logs for up to 19 components. By default, each log uses up to 128K. Logging can take a great deal of disk space and can degrade system performance. Use the SMS Service Manager to change the log size or to disable logging.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\INVENTRY.BOX</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where Maintenance Manager puts client inventory files that it collects from SMS logon servers. The Inventory Processor monitors this directory. The files in this directory are deleted when the inventory data is written to the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory. A backlog might indicate that the Inventory Processor is not running or is too busy to process the files.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\INVENTRY.BOX <BR>\BADMIFS</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where the Inventory Processor places .MIF files that cannot be processed. This directory should always be empty. </P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\INVENTRY.BOX <BR>\BADRAWS</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where the Inventory Processor places .RAW files that cannot be processed. This directory should always be empty. </P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\DATALOAD.BOX <BR>\DELTAMIF.COL</P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the Inventory Processor to store MIF files that are ready to be processed by the Data Loader. When the Data Loader is ready to process the files, it moves them to the PROCESS subdirectory. A backlog in this directory might indicate that the SQL&nbsp;Server is unavailable, or that the Data Loader is too busy to process the files.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\DATALOAD.BOX <BR>\DELTAMIF.COL\PROCESS</P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the Data Loader to store MIF files that it is ready to process. Once these files are processed, they are moved to the SITEREP.BOX directory. If the Data Loader is unable to process some files, they are moved to the BADMIFS directory. A backlog might indicate that the SQL&nbsp;Server is unavailable, or that the Data Loader is too busy to process the files.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\DATALOAD.BOX <BR>\DELTAMIF.COL\BADMIFS</P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the Data Loader to store MIF files that cannot be processed. Under ideal conditions, this directory is empty. Any files here indicate a problem.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\SITEREP.BOX</P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the Data Loader to store files that should be sent to a parent site. When the Site Reporter detects a queue of MIF files in this directory, it creates a system job that sends these MIF files to the parent site. A backlog might indicate that Site Reporter is not running or is overloaded, or that the site cannot connect to the parent site.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\SCHEDULE.BOX</P>
<P CLASS="tt"></P></TD><TD VALIGN="TOP"><P CLASS="tt">Used by the SMS components to store system job instructions for the Scheduler. The Scheduler monitors this directory and uses the instructions to start the specified system jobs. A backlog might indicate that the Scheduler is not running or is too busy to process the jobs.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\SENDER.BOX <BR>\REQUESTS</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where the Scheduler places send request files for the sender. The specific sender assigned to each subdirectory (outbox) monitors its directory and processes the requests. Files remain in this directory until the sender successfully sends the job. A backlog might indicate that the sender is busy or not running, or that it cannot connect to the target site.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\SENDER.BOX <BR>\TOSEND</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where the Scheduler places compressed packages and despooler instruction files to be sent to another site. When the sender processes a send request for a job, it sends the job's files from this directory to the target site. A backlog might indicate that the sender is busy or not running, or that it cannot connect to the target site.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">SITE.SRV\DESPOOLR.BOX <BR>\RECEIVE</P></TD><TD VALIGN="TOP"><P CLASS="tt">The location where the sender places despooler instruction files and compressed packages that are targeted for the site. The Despooler monitors this directory and processes the instruction files. The packages should be moved to the STORE directory as soon as the Despooler verifies that the package and instructions have been completely and correctly received. A backlog might indicate that the Despooler is too busy to process the packages.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">In these cases, it may or may not be reasonably easy to determine the cause of the problem and to find a solution. For instance, if MIF files are backing up in the DELTAMIF.COL directory, you can be reasonably sure that the Data Loader is the bottleneck. A quick look may show that the Data Loader is not running, in which case you simply need to restart it. If the Data Loader is running, you may need to increase the capacity of the site server, or move the Data Loader to another server, in order to get better results. To specifically determine the reason that the Data Loader is not keeping up, you should use one of the troubleshooting tools or techniques described later in this chapter.</P></BODY></HTML>
