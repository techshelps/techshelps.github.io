<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>How SMS Collects Files</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">How SMS Collects Files</H3><P CLASS="t">SMS collects files that have the Collect This File option enabled in the package Inventory properties. The inventory collection process varies depending on your network operating system (Windows&nbsp;NT, LAN&nbsp;Manager, NetWare, or Macintosh). When the Inventory Agent scans for software, it also collects files specified by the inventory rules set for packages.</P>
<P CLASS="t">On servers running Windows&nbsp;NT Server and clients running MS-DOS, Windows version&nbsp;3.1, Windows for Workgroups, Windows&nbsp;95, and Windows&nbsp;NT Workstation, the Inventory Agent appends collected files to the *.RAW file containing the inventory information being reported.</P>
<P CLASS="t">On servers running LAN&nbsp;Manager and clients running OS/2 and Macintosh, the Inventory Agent creates a *.CFD directory beneath LOGON.SRV \ISVMIF.BOX. If no files are collected, this directory does not exist. The *.CFD directory's name begins with eight characters, which are the same as the MIF file reporting the computer's inventory. For example, if the computer's MIF file is 00000000.MIF, its collected file directory is 00000000.CFD. The *.CFD directory contains all collected files (which are renamed *.FIL to ensure the file name is unique to that computer). The directory also contains a COLLFILE.LST file, which is an ASCII text file containing the package number, path, and name where the file is found, and the renamed file name (*.FIL) of each collected file.</P>
<P CLASS="t">On NetWare servers, Maintenance Manager handles collected files the same way as OS/2 and Macintosh clients, except that the MIF file and the *.CFD directory are placed in the SITE.SRV\INVENTRY.BOX directory on the site server.</P>
<P CLASS="t">At the site server, the Maintenance Manager monitors the LOGON.SRV \INVENTRY.BOX and LOGON.SRV\ISVMIF.BOX directories of the SMS_SHR share on all SMS logon servers in the site. The Maintenance Manager collects the client inventory files (*.RAW and *.MIF) and collected files from the directories previously mentioned on the SMS logon servers and places them in the SITE.SRV\INVENTRY.BOX directory on the site server. Inventory history files are maintained in the SITE.SRV\INVENTRY.BOX\HISTORY directory.</P>
<P CLASS="t">The Inventory Processor processes the client inventory files (*.RAW and *.MIF), extracts the collected files from the *.RAW files, places the processed files (*.MIF) in the SITE.SRV\DATALOAD.BOX\DELTAMIF.COL directory on the site server, compresses the collected files (files extracted from the *.RAW files and files collected as *.FIL files), and appends these compressed files to the *.MIF files. These processed files are called inventory Binary MIF files.</P>
<P CLASS="t">The Inventory Data Loader processes Binary MIF files and updates the site database with inventory reported by the clients. It also decompresses the collected files and places them in a subdirectory beneath SITE.SRV \DATALOAD.BOX \FILES.COL. The subdirectory structure reflects the hierarchy of sites, as follows: <I>site_code\range_of_smsids</I>\<I>smsid</I>. Note that <I>range_of_smsids</I> is the first ID in the range. All of the collected files for the computer are placed in that computer's SMSID subdirectory. If there is a conflict in the file name, a random four-digit sequence is appended to the extension. For example, if you collected two AUTOEXEC.BAT files from a computer with SMS ID RED12345, SMS will create a subdirectory RED\RED12300\RED12345 beneath the SITE.SRV \DATALOAD.BOX\FILES.COL directory. Both collected files are stored in that subdirectory; one as AUTOEXEC.BAT, the other as AUTOEXEC.BAT_4EBD (where the digits 4EBD appended to the file extension are four digits selected randomly for this example).</P>
<P CLASS="t">The Inventory Data Loader copies all Binary MIF files that cannot be processed to a BADMIFS subdirectory. For more detailed information about how the Inventory Data Loader processes Binary MIF files at a primary site, see "Collecting Inventory at a Primary Site" earlier in this chapter.</P>
<P CLASS="t">After the site database is updated, you can view the collected files using the SMS&nbsp;Administrator. </P></BODY></HTML>
