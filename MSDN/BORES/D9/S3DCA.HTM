<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Installing TCP/IP and SNMP</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Installing TCP/IP and SNMP</H3><P CLASS="t">If the Windows&nbsp;NT-based client that will generate traps is running Windows&nbsp;NT version 3.51, SP4 must be installed. For detailed installation procedures, see the SMS version 1.2 <I>Administrator's Guide</I>, Chapter&nbsp;14.</P>
<P CLASS="t">You must configure the SNMP service and add at least one community name containing at least one address to send traps to.</P>
<H4 CLASS="h4"><A NAME="sec0"></A>To add a community name</H4><p>&nbsp;&nbsp;&nbsp;&nbsp;1.    On the client that will receive the traps, run <B>ipconfig </B>to display the IP address for the local computer.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2.    On the client that will send traps, make sure the SNMP service is running.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;3.    On the client that will send traps, configure the SNMP service (in the Networks control panel) and add the address of the receiving client to the community.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;4.    Stop and then start the SNMP service so that all the settings will be active.</P>
<P CLASS="t">If SNMP is installed after the SMS client is installed, you might need to manually set the TranslatorEnabled value in the HKEY_LOCAL_MACHINE\Software\Microsoft\SNMP_EVENTS\EventLog registry key. This value is created by SNMP Setup and set to Yes by the <B>cli_nt</B> program the next time the user logs on or runs RUNSMS.BAT. Ensure that this value is Yes so that the event to SNMP trap translation will occur.</P>
<H4 CLASS="h4"><A NAME="sec1"></A>To start the Event to Trap Translator</H4><p>&nbsp;&nbsp;&nbsp;&nbsp;1.    In the SMS&nbsp;Administrator, open the Personal Computer Properties for the client that will be sending SNMP traps.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2.    In the Windows&nbsp;NT Administrator group, select Event to Trap Translator.</P>
<P>The EVENTRAP.EXE program starts, using the client as the target. The Event to Trap Translator window appears.</P>
<P>Unless you use this tool to specify events to be converted to SNMP traps, no Windows&nbsp;NT events will be translated and sent. A few traps are sent by default.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;3.    Choose Custom.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;4.    Choose Edit.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;5.    In the Event Source list, choose Security.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;6.    Choose Security to list the Windows&nbsp;NT security events. One at a time, select an event, and choose Add to add it to the configuration.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;7.    When you are finished, choose Close.</P>
<P CLASS="t">The following event IDs can be quite useful: 560, 561, 562, 592, and 593. The 56<I>x</I> events are for the directory where you can test bursts of traps, and the 59<I>x</I> events can be used to tell if a process has a general protection fault and gets restarted. (It had a general protection fault if you weren't the one to start it.)</P>
<P CLASS="t">The LOGON.SRV\MSTEST\EVENTCM<I>x</I>.EXE program can be sent as a job to configure SNMP on a group of clients. For details on this program, see "Configuring the Event to Trap Translator" earlier in this chapter.</P>
<H4 CLASS="h4"><A NAME="sec2"></A>To audit Windows&nbsp;NT events</H4><p>&nbsp;&nbsp;&nbsp;&nbsp;1.    Start the Windows&nbsp;NT User Manager.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2.    From the Policies menu, choose Audit.</P>
<P>The Audit Policy dialog box appears.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;3.    Choose Audit These Events, and then select all events to be audited.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;4.    Choose OK.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;5.    If you want to audit file and object access, open the File Manager and select the directory to be audited.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;6.    From the Security menu, choose Auditing.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;7.    Select the events to audit.</P>
<P>If you select the name <I>after</I> the events, nothing gets audited.</P>
<P CLASS="t"><B>Note</B></P>
<P>Auditing is available only on NTFS partitions.</P>
<P CLASS="t">Do not use the domain\smsadmin and local\smsadmin accounts because Windows&nbsp;NT will never activate the local admin account for auditing.</P>
<P CLASS="t">Now go to the SMS&nbsp;Administrator for the site that the client is sending SNMP traps to, and set it to write some of these traps to the database. For details, see the SMS version 1.2 <I>Administrator's Guide</I>.</P></BODY></HTML>
