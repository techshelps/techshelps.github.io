<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Primary Site</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Primary Site</H3><P CLASS="t">A primary site has its own SQL&nbsp;Server database to store the system, package, inventory, and status information for the primary site and the sites beneath it in the hierarchy. It also has administrative tools to directly manage all sites in the site hierarchy.</P>
<P CLASS="t">A primary site must be installed from the SMS Setup program that is included in the Microsoft Systems Management Server version 1.2 compact disc. When a primary site is installed for the first time, it is a standalone central site. Once a primary site is installed, you can use the SMS&nbsp;Administrator to integrate the new site and any of its subsites in the hierarchy of another SMS system.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Installing a Primary Site</H4><P></P>
<P CLASS="t">When you run the SMS Setup program to install a primary site, it begins by determining the available language and platform included on the Microsoft Systems Management Server version 1.2 compact disc. It then decompresses files and writes them to disk as specified in the SYSTEM.MAP file. SMS Setup reads SYSTEM.MAP directly from the Microsoft Systems Management Server version 1.2 compact disc, and then copies it to your disk for later use by the SMS&nbsp;Administrator and the Hierarchy Manager and Site Configuration Manager services. In order to interact with logon servers and clients running various CPU platforms and languages, SMS Setup downloads binaries for all supported configurations according to the directory structure mapped out in SYSTEM.MAP. The SYSTEM.MAP file is also used to manage client files.</P>
<P CLASS="t">While copying files to the hard disk and creating the directory tree, SMS Setup initiates SQL&nbsp;Server database operations. Once file installation and database operations are complete, SMS Setup starts the Hierarchy Manager and Site Configuration Manager services and writes information to the Windows&nbsp;NT registry under the following key: </P>
<P CLASS="t">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SMS </P>
<P CLASS="t">The Identification, Setup, and SQL&nbsp;Server keys contain information relevant to the setup process:</P>
<UL><LI>The Identification key contains the Windows&nbsp;NT domain and server names for the site server and the name of the SMS installation directory.</LI></UL><UL><LI>The Setup key records the SMS version and user and organization names.</LI></UL><UL><LI>The SQL&nbsp;Server key stores database and device names, as well as the encrypted SQL&nbsp;Server password and account. </LI></UL><P CLASS="t">During the installation process, the Hierarchy Manager service reads and writes information to and from the SQL&nbsp;Server database. The Site Configuration Manager service sets up services, domain management, shares, and so on. As part of the installation process, the Hierarchy Manager creates a temporary site control file (SMS\SITE.SRV\SITECFG.BOX\_INIT.CT1), which contains all proposed configurations for a site. The Hierarchy Manager passes this file to the Site Configuration Manager, which carries out the proposed configuration.</P>
<P CLASS="t">After the Site Configuration Manager completes the site configuration instructions, it sends a site control file (*.CT2) back to the Hierarchy Manager. The Hierarchy Manager uses this site control file to write configuration data to the site database. The Site Configuration Manager also copies this file to a permanent text file (SITECTRL.CT0) in the SITE.SRV\SITECFG.BOX directory. Note that this process repeats each time there is a proposed change to the site configuration. Each site has its own SITECTRL.CT0 file. </P>
<P CLASS="t">As part of site configuration, the Site Configuration Manager starts the following services: SMS Executive, Client Configuration Manager, Inventory Agent for Windows&nbsp;NT, and the Package Command Manager for Windows&nbsp;NT. The SMS Executive service, in turn, starts additional SMS components such as the Despooler and Scheduler. The SMS Setup program creates the Systems Management Server program group and icons.</P>
<P CLASS="t">Installation on the site server is now complete. Note that if events or errors occur during setup, they are written to the Windows&nbsp;NT event log. You can also view the SMSSETUP.LOG file to trace the actions and errors logged by the SMS Setup program. SMSSETUP.LOG is located at the root of the first hard disk drive on the computer (usually, this is drive C).</P></BODY></HTML>
