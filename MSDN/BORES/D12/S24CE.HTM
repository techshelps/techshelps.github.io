<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>X.400 Message Handling System</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">X.400 Message Handling System</H3><P CLASS="t">An X.400 <I>message handling system</I> (MHS) is a collection of components that work together to transfer messages. The X.400 Recommendations specify that an MHS should have the following components.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="125pt" VALIGN="TOP"><COL WIDTH="222pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Component </B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>User agent (UA)</P></TD><TD VALIGN="TOP"><P>Prepares, submits, and receives messages for a user. Displays messages and provides other functions such as text editing and security.</P></TD></TR><TR><TD VALIGN="TOP"><P>Message transfer agent (MTA)</P></TD><TD VALIGN="TOP"><P>Forwards and relays messages within the network. </P></TD></TR><TR><TD VALIGN="TOP"><P>Message transfer system (MTS)</P></TD><TD VALIGN="TOP"><P>Two or more MTAs. </P></TD></TR><TR><TD VALIGN="TOP"><P>Message store (MS)</P></TD><TD VALIGN="TOP"><P>Stores messages transferred between MTAs and user agents. (1988 Recommendations only.) Known as the information store in Microsoft Exchange Server.</P></TD></TR><TR><TD VALIGN="TOP"><P>Access unit (AU)</P></TD><TD VALIGN="TOP"><P>Gateway to other messaging systems. </P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">The set of message handling system components and users is called a <I>message handling environment</I> (MHE). An MHE can include several messaging systems connected through gateways or public data networks or just one message handling system where messages are contained within the system.</P>
<P CLASS="t">An X.400 MHS usually works with directory services, including the directory user agent and directory system agent. Directory services are not part of the X.400 Recommendations, but the 1988 X.400 Recommendations allow the use of directory services. The directory is a database of all objects in the message handling system, such as mailboxes and distribution lists. The following diagram illustrates how the components of the MHS work together to transfer messages.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src="xerk_f02.gif"></P>
<P></P>
<P CLASS="t">The user agents and message transfer agents in the MHS form the <I>message transfer system</I> (MTS) and the <I>interpersonal messaging service</I> (IPMS).</P>
<P CLASS="t">The MTS is a collection of one or more MTAs that submit, transfer, and deliver messages through the MHS. The MTS is the infrastructure of message handling.</P>
<P CLASS="t">In the following example, a user agent submits a message to the MTA within the MTS for delivery to one or more MTS users. The MTS accepts the message and provides any necessary store and forward features, such as distributing the message to more than one recipient. The MTA then routes and delivers the message.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src="xerk_f03.gif"></P>
<P></P>
<P CLASS="t">The IPMS allows messages to be exchanged from person to person. When a message is sent from one user to another, the IPMS invokes the services of the underlying MTS to submit and deliver the message to its destination. The following illustration shows how the MTS functions within the IPMS.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src="xerk_f04.gif"></P>
<P></P>
<P CLASS="t">There are two types of IPMS messages: interpersonal messages and interpersonal message notifications. The interpersonal message contains text, graphics, or other content sent from one user to another. The interpersonal message notification contains information about the status of the delivery of the message, or whether the message was read or not read.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Transferring Messages Through the MHS</H4><P CLASS="t">Messages are transferred through the MHS by protocols defined in the X.400 Recommendations. The protocol for each message component is assigned a number. The following are the most common protocols.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="123pt" VALIGN="TOP"><COL WIDTH="224pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Component</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Protocol</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>Envelope</P></TD><TD VALIGN="TOP"><P>P1</P></TD></TR><TR><TD VALIGN="TOP"><P>Message content (1984)</P></TD><TD VALIGN="TOP"><P>P2</P></TD></TR><TR><TD VALIGN="TOP"><P>Client-MTA communications</P></TD><TD VALIGN="TOP"><P>P3</P></TD></TR><TR><TD VALIGN="TOP"><P>Client-message store (MS)</P></TD><TD VALIGN="TOP"><P>P7</P></TD></TR><TR><TD VALIGN="TOP"><P>Message content (1988)</P></TD><TD VALIGN="TOP"><P>P22</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<H4 CLASS="h3"><A NAME="sec1"></A>Message Components</H4><P CLASS="t">An X.400 message has two components: an envelope and its content.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src="xerk_f05.gif"></P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P CLASS="t">The envelope contains addressing information, including the address of the originator and recipient, the delivery priority, and message trace information. The envelope is formatted by using the P1 protocol.</P>
<P CLASS="t">Most X.400 messages are made up of one or more <I>body parts</I>, together with <I>header</I> information. The body parts make up the text of the message. The header contains address, routing, and trace information, and determines how the message is transported.</P>
<P CLASS="t">The X.400 body contains the actual message, which can contain text, graphics, voice, or other kinds of data. The X.400 Recommendations specify standards for different types of content found in body parts. Body parts are referred to by body part numbers. The following table shows the X.400 body part types and numbers that can be used with the Microsoft Exchange Server.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="108pt" VALIGN="TOP"><COL WIDTH="112pt" VALIGN="TOP"><COL WIDTH="127pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Body Part Type</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Body Part Number</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>IA5 text</P></TD><TD VALIGN="TOP"><P>BP 0</P></TD><TD VALIGN="TOP"><P>International alphabet number 5. Includes U.S. English, German, Norwegian, and Swedish.</P></TD></TR><TR><TD VALIGN="TOP"><P>Teletex 61</P></TD><TD VALIGN="TOP"><P>BP 5</P></TD><TD VALIGN="TOP"><P>U.S. English teletex.</P></TD></TR><TR><TD VALIGN="TOP"><P>Forwarded interpersonal message</P></TD><TD VALIGN="TOP"><P>BP 9</P></TD><TD VALIGN="TOP"><P>Embedded and forwarded messages.</P></TD></TR><TR><TD VALIGN="TOP"><P>ISO 6937 text</P></TD><TD VALIGN="TOP"><P>BP 13</P></TD><TD VALIGN="TOP"><P>Eastern Europe and German characters.</P></TD></TR><TR><TD VALIGN="TOP"><P>Bilaterally-defined<BR>(binary)</P></TD><TD VALIGN="TOP"><P>BP 14</P></TD><TD VALIGN="TOP"><P>Simple transfer of binary attachments.</P></TD></TR><TR><TD VALIGN="TOP"><P>Binary file transfer<BR>(FTBP)</P></TD><TD VALIGN="TOP"><P>BP 15 FTBP</P></TD><TD VALIGN="TOP"><P>Transfer of attachments using FTBP, which includes file name, size, and properties. Available for MTA conformance modes only.</P></TD></TR><TR><TD VALIGN="TOP"><P>ISO 8859-1</P></TD><TD VALIGN="TOP"><P>Encapsulated within BP 15</P></TD><TD VALIGN="TOP"><P>Latin 1 code page. Available for MTA conformance modes only.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<P CLASS="t">The header fields contain information such as the message originator, recipients, and expiration time, which is useful for tracing messages and troubleshooting. Microsoft Exchange Server uses the following header fields.</P>

<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="121pt" VALIGN="TOP"><COL WIDTH="226pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Field</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD COLSPAN="3" VALIGN="TOP"><P></P></TD></TR><TR><TD VALIGN="TOP"><P>originator</P></TD><TD VALIGN="TOP"><P>O/R address of originator.</P></TD></TR><TR><TD VALIGN="TOP"><P>authorizing-users</P></TD><TD VALIGN="TOP"><P>O/R addresses of <B>send on behalf of</B><I>.</I></P></TD></TR><TR><TD VALIGN="TOP"><P>primary-recipients</P></TD><TD VALIGN="TOP"><P>Recipients specified on the <B>To</B> line.</P></TD></TR><TR><TD VALIGN="TOP"><P>copy-recipients</P></TD><TD VALIGN="TOP"><P>Recipients specified on <B>Cc </B>line.</P></TD></TR><TR><TD VALIGN="TOP"><P>blind-copy-recipients</P></TD><TD VALIGN="TOP"><P>Recipients specified on <B>Bcc</B> line.</P></TD></TR><TR><TD VALIGN="TOP"><P>expiry-time</P></TD><TD VALIGN="TOP"><P>Message is deleted if it is not read by the specified time.</P></TD></TR><TR><TD VALIGN="TOP"><P>deferred-delivery-time</P></TD><TD VALIGN="TOP"><P>Message is sent at the specified time.</P></TD></TR><TR><TD VALIGN="TOP"><P>subject</P></TD><TD VALIGN="TOP"><P>Up to 128 characters. Sent using Teletex T.61.</P></TD></TR><TR><TD VALIGN="TOP"><P>importance</P></TD><TD VALIGN="TOP"><P>Low, medium, or high. </P></TD></TR><TR><TD VALIGN="TOP"><P>sensitivity</P></TD><TD VALIGN="TOP"><P>Low, medium, or high.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P></BODY></HTML>
