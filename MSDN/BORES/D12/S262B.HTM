<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Using Firewalls</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">Using Firewalls</H3><P CLASS="t">Firewalls are one of the best ways to protect your system from attack by users on the Internet. You can use a firewall to separate your internal network from the Internet. It restricts inbound and outbound access, and can analyze all traffic between your network and the Internet. A firewall can range from a simple packet filter to complex bastion hosts that analyze traffic for each application type. A <I>bastion host</I> is any computer that must be secured because it is accessible from the Internet and exposed to attack. A firewall can be a single router or computer, or it can be a combination of components such as routers, computers, networks, and software.</P>
<P CLASS="t">There are several types of firewall software and hardware you can use to protect your organization from outside attacks, including:</P>
<UL><LI>Proxy servers</LI><LI>Dual-homed systems</LI><LI>Packet filtering</LI><LI>Firewall software</LI></UL><UL><LI>Domain Name Service (DNS)</LI></UL><H4 CLASS="h3"><A NAME="sec0"></A>Using Proxy Servers</H4><P CLASS="t">Some services, such as Web and File Transfer Protocol (FTP), are point-to-point so that a client can make a connection directly to a server. Allowing clients inside your network to connect directly to hosts on the Internet is generally unsafe. One solution is to use a proxy server (also called an application-level gateway) to interact with external servers on the client's behalf. The client talks to the proxy server, which relays approved client requests to servers and relays responses back to the client. External hosts do not connect directly to clients in your network.</P>
<P CLASS="t">Microsoft Exchange Server and many other e-mail systems use a store-and-forward design, which uses a proxy mechanism. Clients connect to servers that reside on the local network. Servers then communicate with each other to transfer e-mail messages. Separate proxy services are unnecessary if Microsoft Exchange Server is configured correctly.</P>
<H4 CLASS="h3"><A NAME="sec1"></A>Using Dual-Homed Systems</H4><P CLASS="t">One way to set up a bastion host is to use a dual-homed computer, which has a connection to two networks, but does not route packets between them. One connection is to your internal network to allow communication with other servers and clients. The other connection is to the Internet. You can run Microsoft Exchange Server on a dual-homed computer to provide e-mail connectivity to the Internet safely.</P>
<H4 CLASS="h3"><A NAME="sec2"></A>Using Packet Filtering</H4><P CLASS="t">Implementing a packet filter between the Internet and your network can add a layer of security. You can use a packet filter, such as a screening router, to control the ports and Internet Protocol (IP) addresses to which external systems can connect. However, if an intruder is able to get past the router, your network is open to attack.</P>
<P CLASS="t">To minimize this risk, many organizations implement a perimeter network. This is a network that is connected to the Internet through an external screening router and to the internal network through an interior screening router. Computers that are connected to the perimeter network have limited access to both the Internet and the internal network. This can be a convenient architecture if multiple servers require direct Internet access.</P>
<P CLASS="t">This configuration provides three levels of defense. If the external router and a bastion host on the perimeter network are compromised, the attacker does not gain unlimited access to your internal network because the internal router is controlling access.</P>
<H4 CLASS="h3"><A NAME="sec3"></A>Using Firewall Software</H4><P CLASS="t">There are many commercial firewall products that provide proxy services. Some of these support simple mail transport protocol (SMTP) e-mail. There are also free implementations of SMTP proxies, such as smap, which forward messages between internal and external systems. These products are not likely to have security weaknesses because they are typically designed solely for security purposes. Furthermore, they are typically a simple implementation with restricted functionality. However, a disadvantage of firewall software is that different SMTP servers must be managed. If your internal SMTP server is upgraded with new features, the firewall software must also be upgraded.</P>
<P CLASS="t">Since Microsoft Exchange Server provides secure Internet access, additional firewall software is unnecessary. However, the Internet Mail Connector can be used with firewall software if desired. To do so, you should configure your Internet Mail Connector to forward all mail to the bastion host running the firewall software.</P>
<H4 CLASS="h3"><A NAME="sec4"></A>Using DNS</H4><P CLASS="t">DNS is a distributed database that translates between host names and IP addresses. It also carries other information about hosts, such as mail exchanger (MX) records that specify one or more hosts that will accept mail for a domain. When a client needs to find out information about another host, such as the IP address for mail.acme.net, it queries its local DNS server for that information. The local DNS server responds if it has the information. If it doesn't, then the local DNS server queries other DNS servers until it either finds the information or runs out of places to look. This forwarding of the query is transparent to the client, which connects only to the local DNS server.</P>
<P CLASS="t">If your system accepts mail directly from other hosts on the Internet, it should be listed in the DNS. A DNS MX record should be created that routes all mail sent to your registered domain to the host(s) that process incoming mail. Unless you plan to forward all outbound Internet mail to a relay host (a host outside your organization that has better e-mail connectivity), your server will also need to be able to query DNS to route messages to the proper destinations. You may have your Microsoft Exchange Server computer configured to use DNS services from your Internet service provider, or you may have your own DNS servers. If you maintain your own DNS servers, they must be registered with your parent domain.</P>
<P CLASS="t">If you are using DNS and do not want DNS queries from the Internet to return information about computers on your internal network, you should configure DNS so that external hosts can query for information about your Internet server(s), but not about any other hosts. To do this, you must set up a pair of DNS servers.</P>
<P CLASS="t">One server is an external DNS server, which you register with your parent domain and configure with address and MX records for your bastion hosts. You also set up an internal DNS server to be used by clients on your network. This DNS server should be configured to forward queries it cannot resolve to the external DNS server, so clients in your network can resolve Internet host names. Your bastion host should also use the internal server for DNS so it can resolve both internal and external names. Since the external DNS server does not have complete information for your internal network, and your internal DNS server cannot be accessed from the Internet, you can hide most of your computers from external DNS queries by not creating records for them on the external DNS server.</P></BODY></HTML>
