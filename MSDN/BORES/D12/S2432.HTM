<HTML><head><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>New Server Installation</TITLE><BODY BGCOLOR="#FFFFFF">


<H3 CLASS="h2">New Server Installation</H3><P CLASS="t">When you install Microsoft Exchange Server, Setup gathers information including your organization name and site, the service account name and password, and whether the server is creating a new site or joining an existing site. Then Setup does the following:</P>
<UL><LI>Installs core components.</LI><LI>Installs optional components.</LI><LI>Performs directory replication with other servers in the site.</LI></UL><P CLASS="t">If you encounter problems during or after you've run Setup, you can use the following information to help you find solutions.</P>
<H4 CLASS="h3"><A NAME="sec0"></A>Core Components</H4><P CLASS="t">During the first installation phase, Setup installs core components such as the system attendant, the directory, the information store, and the message transfer agent (MTA).</P>
<H5 CLASS="h4"><A NAME="sec1"></A>Validating the User Account and Service Account</H5><P CLASS="t">Setup first verifies that the account of the user who is currently logged on is valid in the Windows NT Server domain and has Administrator permissions for the Site and Configuration objects. Setup also verifies that the service account and password used to install Microsoft Exchange Server are valid in the domain. This prevents an unauthorized server from being installed in a site.</P>
<P CLASS="t">In general, the way Setup determines the service account varies depending on whether the server is creating a new site or joining a site. When a server is installed in a new site, the account of the user who is currently logged on is used as the default service account. When a server is installed in an existing site, Setup looks in the registry of the remote server and uses the same service account for the new server.</P>
<P CLASS="t">Setup grants the following rights to the service account on the local computer if the service account doesn't already have them.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="168pt" VALIGN="TOP"><COL WIDTH="180pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><P CLASS="th"><B>Right</B></P></TD><TD VALIGN="TOP"><P CLASS="th"><B>Description</B></P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Logon as a service</P></TD><TD VALIGN="TOP"><P CLASS="tt">Enables Microsoft Exchange Server services to use this service account for authentication in the domain.</P></TD></TR><TR><TD VALIGN="TOP"><P CLASS="tt">Restore files and directories</P></TD><TD VALIGN="TOP"><P CLASS="tt">Enables the information store and the directory to be restored from backup if necessary.</P></TD></TR></TBODY></TABLE>
<P CLASS="spacing"><BR></P><P></P>
<H5 CLASS="h4"><A NAME="sec2"></A>Copying Files and Installing Core Components</H5><P CLASS="t">Once the user account and service account have been validated, Setup reads the Server.inf file and copies files to directories on the local disk according to the components you selected during Setup. Setup then reads the Server.ins file in the directory that Setup is run from. This file instructs Setup to create shared file directories. It also installs core services and updates the server's registry by adding permissions for registry items. Setup then starts the system attendant and directory services.</P>
<H5 CLASS="h4"><A NAME="sec3"></A>Building the Directory and Initiating Directory Replication</H5><P CLASS="t">The next step in the process is installing the directory. Setup provides the directory with the server's computer name and the organization name and site that the new server is creating or joining. Once the names for the organization and site objects have been added to the directory, they can't be changed; however, you can change their display names after Microsoft Exchange Server has been installed.</P>
<P CLASS="t">The process for updating the directory with the organization and site name is different depending on whether the server is in a new site or joining an existing site. If the server is being installed in a new site, the organization and site names that you specified are added to the directory. If the server is joining an existing site, the server connects to another server in the existing site. It reads the names from the remote server's directory that you specified earlier in the process.</P>
<P CLASS="t">To complete the process of building the directory, Setup also performs the following:</P>
<UL><LI>Sets permissions on directory objects.</LI><LI>Initiates directory replication if the server is joining an existing site. To prevent directory conflicts when a server is added to an existing site, Setup notifies the server's directory that it shouldn't replicate with other directories in the site until the new directory is completely built. This ensures the objects in the new directory are the correct version.</LI><LI>Adds objects to the directory for additional components, such as the information store and the MTA, and modifies existing objects.</LI><LI>Installs templates into the directory.</LI></UL><P CLASS="t">Few directory operations occur on the new server that is joining a site. Setup modifies the directory on the remote server that you specified during Setup, and then the modified directory is replicated to the new server. If Setup fails while the directory is being installed, directory information about the new server can still exist on the remote computer until it's deleted from the remote server's directory. The following illustration shows how the directory is built and how replication is initiated.</P>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src="xerk_b01.gif"></P>
<H5 CLASS="h4"><A NAME="sec4"></A>Starting Remaining Core Services and Updating the System</H5><P CLASS="t">Setup then starts any remaining core services such as the information store and the MTA. It also adds program items to the Microsoft Exchange Server program group and updates the registry.</P>
<H4 CLASS="h3"><A NAME="sec5"></A>Optional Components</H4><P CLASS="t">After core components are installed and started, Setup installs the optional components that you selected, such as connectors and the Administrator program. The optional components are installed the same way as core components; however, the services for optional components must be started manually. Setup performs the following tasks to install optional components:</P>
<UL><LI>Reads the installation (.ins) file for each component. The .ins files instruct Setup to perform tasks such as installing services and modifying the registry.</LI><LI>Updates the directory with information about the component.</LI><LI>Adds program items to the program group and updates the registry.</LI></UL><H4 CLASS="h3"><A NAME="sec6"></A>Directory Replication</H4><P CLASS="t">While Setup completes, the directory is fully replicated asynchronously in the background. Information, such as user accounts, that was not replicated earlier during Setup, is replicated from the remote server to the new server at this time.</P></BODY></HTML>
