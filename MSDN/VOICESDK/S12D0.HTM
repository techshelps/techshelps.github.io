<HTML>
<HEAD>
<meta name="PREMIUM" content="MSDN">
<meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
<meta name="MS.LOCALE" content="EN-US">
<meta name="DESCRIPTION" content="This page is from the 'Integrated Voice and Data Software Support in Microsoft Windows' section in the MSDN Library">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>XFNOTIFYPROC</TITLE><style>@import url(msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="msdn_ie3.css"></HEAD>

<BODY bgcolor="#FFFFFF" link=#003399 vlink=#996699>

<FONT FACE="Verdana, Arial, Helvetica" SIZE="2">

	<!--TOOLBAR_START-->
	<!--TOOLBAR_EXEMPT-->
	<!--TOOLBAR_END-->

<H2>XFNOTIFYPROC</H2><P><B>#include &lt;fte.h&gt;</B></P>
<P><B>XFNOTIFYPROC</B> <I>xfNotifyProc</I><B>(</B><I>hSession</I><B>, </B><I>hConnection</I><B>, </B><I>dwNotificationCode</I><B>, </B><I>dwParam</I><B>)<BR>HSESSION </B><I>hSession</I><B>;    </B>                    <B>/* handle of session in which event occurred            */<BR>HCONNECTION </B><I>hConnection</I><B>;    </B>    <B>/* handle of connection in which event occurred        */<BR>DWORD </B><I>dwNotificationCode</I><B>;    </B>        <B>/* code specifying which event occurred                */<BR>DWORD </B><I>dwParam</I><B>;    </B>                    <B>/* parameter for notification code                        */</B></P>
<P><I>xfNotifyProc</I> is an application-defined call-back function for file transfer events.</P>
<P><B>Parameters</B></P>
<P><I>hSession</I></P>
<P>Provides a session to the <I>xfNotifyProc</I> routine.</P>
<P><I>hConnection</I></P>
<P>Provides a connection to the <I>xfNotifyProc</I> routine.</P>
<P><I>dwNotificationCode</I></P>
<P>Specifies the file transfer event that occurred.</P>

<TABLE COLS="2" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="173pt" VALIGN="TOP"><COL WIDTH="161pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P><B>Value</B></P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P><B>Meaning</B></P></FONT></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P></P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_CONNECTION_ABORT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Connection abnormally terminating.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_CONNECTION_END</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Connection normally closing.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_CONNECTION_START</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Connection starting.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_FILE_ABORT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>File transfer abnormally terminating.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_FILE_BLOCK</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Transfer of one block of data complete.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_FILE_END</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>File transfer normally closing.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_FILE_START</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>File transfer starting.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_ABORT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Transfer abnormally terminating.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_ACCEPT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>The receiver is notified that transfer is accepted.  An application should call xfReceive to start receiving files.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_CONFIRMED</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>The sender is notified that the transfer is confirmed.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_DECLINE</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>The sender is notified that the transfer is declined.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_END</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Transfer normally closing.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_START</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Transfer starting.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_TRANSFER_REFUSE</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>The receiver is notified that the current application declined the transfer.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_UI_CONNECT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>User interface connect notification.<BR>See <I>dwParam</I> for meaning.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_UI_CONFIRMTRANSFER</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Transfer about to start.<BR>Return 1 if transfer is OK, 0 if not.</P>
<P>This is the point at which to prompt the user to confirm acceptance through a message box.<BR><B>xfDefNotifyProc</B> will return 0 if the notification code is passed on to it.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_UI_DISCONNECT</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>User interface disconnect notification.<BR>See <I>dwParam</I> for meaning.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P></P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P></P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XFN_UI_TRANSFER</P></FONT></TD><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>User interface transfer notification.<BR>See <I>dwParam</I> for meaning.</P></FONT></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P><I>dwParam</I></P>
<P>Specifies a parameter for event corresponding to <I>dwNotificationCode</I>.</P>
<UL><LI>For XFN_UI_CONNECT, XFN_UI_DISCONNECT, and XFN_UI_TRANSFER, dwparam specifies additional information and  can be one of these values to describe the connect, disconnect, or transfer operation:</LI></UL>
<TABLE COLS="3" BORDER="0" CELLPADDING="7"><COLGROUP><COL WIDTH="107pt" VALIGN="TOP"><COL WIDTH="213pt" VALIGN="TOP"><COL WIDTH="0pt" VALIGN="TOP"></COLGROUP><TBODY><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P><B>Value</B></P></FONT></TD><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P><B>Meaning</B></P></FONT></TD></TR><TR><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P></P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XF_UI_ERROR</P></FONT></TD><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Error occurred during operation. Application normally creates dialog here. </P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XF_UI_PROGRESS</P></FONT></TD><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Update progress of operation. </P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XF_UI_START</P></FONT></TD><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Started operation. Application normally creates dialog here. <B>xfDefNotifyProc</B> can create dialog.</P></FONT></TD></TR><TR><TD VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>XF_UI_STOP</P></FONT></TD><TD COLSPAN="2" VALIGN="TOP"><FONT FACE="Verdana, Arial, Helvetica" SIZE="2"><P>Finished operation. </P></FONT></TD></TR></TBODY></TABLE>
<P><BR></P><P></P>
<P>xfDefNotifyProc will create the progress dialog when it receives the XFN_UI_TRANSFER notification with a dwparam of XF_UI_START.  It will update the progress indicator when it receives XF_UI_PROGRESS then it will close the dialog when it receives XF_UI_STOP.</P>
<P><B>Return Value</B></P>
<P>If the function does not handle the notification code, the value returned should be the value from xfDefNotifyProc.  If the application handles all the user interface, it should not pass the XFN_UI notification codes to xfDefNotifyProc.  Instead, it should return 0.  When an XFN_UI_CONFIRM_TRANSFER is received, return 1 to accept the files and 0 to decline.</P>
<P><B>Comments</B></P>
<P>Pass this function to the <B>xfInitialize</B> function when a session is started. The file transfer engine calls the notification procedure when a file transfer event occurs. These events include ones associated with connections, transferring of files, and the user interface elements.</P>
<P>Applications should generally pass all notification codes on to <B>xfDefNotifyProc</B>.  This routine should not block except when handling XF_UI_CONFIRMTRANSFER.  This should instead prompt the user for acceptance of the transfer.</P>
<P>If an application wishes to handle its own user interface messages, it should handle all XFN_UI notification codes.</P>
<P><B>See Also</B></P>
<P><B>xfDefNotifyProc</B>, <B>xfInitialize, xfReceive</B></P>
<P></P>
</FONT>
</BODY>
</HTML>
