<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>lineSetupTransfer</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_linesetuptransfer"></a>lineSetupTransfer</h1>
<p>
The <b>lineSetupTransfer</b> function initiates a transfer of the call specified by the <i>hCall </i>parameter. It establishes a consultation call, <i>lphConsultCall</i>, on which the party can be dialed that can become the destination of the transfer. The application acquires owner privilege to the <i>lphConsultCall </i>parameter. </p>
<pre><code><b>LONG lineSetupTransfer(
  HCALL</b><i> hCall</i><b>,                         </b>
<b>  LPHCALL</b><i> lphConsultCall</i><b>,              </b>
<b>  LPLINECALLPARAMS const</b><i> lpCallParams  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hCall</i> </dt>
<dd>
The handle of the call to be transferred. The application must be an owner of the call. The call state of <i>hCall</i> must be <i>connected</i>. </dd>
<dt>
<i>lphConsultCall</i> </dt>
<dd>
A pointer to an <i>hCall</i> handle. This location is then loaded with a handle identifying the temporary consultation call. When setting up a call for transfer, a consultation call is automatically allocated that enables <a href="func1_06cs.htm"><b>lineDial</b></a> to dial the address associated with the new transfer destination of the call. The originating party can carry on a conversation over this consultation call prior to completing the transfer. The call state of <i>hConsultCall</i> is not applicable. 
<p>
This transfer procedure may not be valid for some line devices. The application may need to ignore the new consultation call and unhold an existing held call (using <a href="func2_8zxg.htm"><b>lineUnhold</b></a>) to identify the destination of the transfer. On switches that support cross-address call transfer, the consultation call can exist on a different address than the call to be transferred. It may also be necessary that the consultation call be set up as an entirely new call, by <a href="func1_0fsc.htm"><b>lineMakeCall</b></a>, to the destination of the transfer. Which forms of transfer are available are specified in the call's address capabilities. 
</dd>
<dt>
<i>lpCallParams</i> </dt>
<dd>
A pointer to call parameters to be used when establishing the consultation call. This parameter can be set to NULL if no special call setup parameters are desired.</dd>
</dl>
<p>
</p>
<h4>Return Values</h4>
<p>
Returns a positive request identifier if the function is completed asynchronously, or a negative error number if an error occurs. The <i>dwParam2</i> parameter of the corresponding <a href="msgs_2ayh.htm">LINE_REPLY</a> message is zero if the function succeeds or it is a negative error number if an error occurs. Possible return values are: </p>
<p>
LINEERR_BEARERMODEUNAVAIL, LINEERR_INVALRATE, LINEERR_CALLUNAVAIL, LINEERR_NOMEM, LINEERR_INUSE, LINEERR_NOTOWNER, LINEERR_INVALADDRESSMODE, LINEERR_OPERATIONFAILED, LINEERR_INVALBEARERMODE, LINEERR_OPERATIONUNAVAIL, LINEERR_INVALCALLHANDLE, LINEERR_RATEUNAVAIL, LINEERR_INVALCALLPARAMS, LINEERR_RESOURCEUNAVAIL, LINEERR_INVALCALLSTATE, LINEERR_STRUCTURETOOSMALL, LINEERR_INVALLINESTATE, LINEERR_UNINITIALIZED, LINEERR_INVALMEDIAMODE, LINEERR_USERUSERINFOTOOBIG, LINEERR_INVALPOINTER. </p>
<h4>Remarks</h4>
<p>
The <b>lineSetupTransfer</b> function sets up the transfer of the call specified by <i>hCall</i>. The setup phase of a transfer establishes a consultation call that enables the application to send the address of the destination (the party to be transferred to) to the switch, while the call to be transferred is kept on hold. This new call is referred to as a consultation call (<i>hConsultCall</i>) and can be dropped or otherwise manipulated independently of the original call. </p>
<p>
When the consultation call has reached the <i>dialtone</i> call state, the application can proceed transferring the call either by dialing the destination address and tracking its progress, or by unholding an existing call. The transfer of the original call to the selected destination is completed using <a href="func1_8sdu.htm"><b>lineCompleteTransfer</b></a>. </p>
<p>
While the consultation call exists, the original call typically transitions to the <i>onholdPendingTransfer</i> state. The application may be able to toggle between the consultation call and the original call by using <b>lineSwapHold</b>. A consultation call can be canceled by invoking <b>lineDrop</b> on it. After dropping a consultation call, the original call typically transitions back to the <i>connected</i> state. If the call state of the original call is <i>onHoldPendingTransfer</i>, the <b>lineUnhold</b> function can be used to recover the call. In this case, the call state of the consultation call is set to <i>idle</i>. </p>
<p>
The application can also transfer calls in a single step, without having to deal with the intervening consultation call, by using <b>lineBlindTransfer</b>. </p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Version:</b> Use TAPI version 1.4 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in tapi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with tapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="quickref_9s85.htm">TAPI Reference Overview</a>, <a href="quickref_2bg3.htm">Supplementary Line Services Functions</a>, <a href="msgs_2ayh.htm">LINE_REPLY</a>, <a href="func1_6o8i.htm"><b>lineBlindTransfer</b></a>, <a href="func1_8sdu.htm"><b>lineCompleteTransfer</b></a>, <a href="func1_06cs.htm"><b>lineDial</b></a>, <a href="func1_0zhs.htm"><b>lineDrop</b></a>, <a href="func1_0fsc.htm"><b>lineMakeCall</b></a>, <a href="func2_7l9g.htm"><b>lineSwapHold</b></a>, <a href="func2_8zxg.htm"><b>lineUnhold</b></a></p>
<p>&nbsp;</p></body>
</HTML>
