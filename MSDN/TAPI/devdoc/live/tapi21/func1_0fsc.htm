<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>lineMakeCall</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_linemakecall"></a>lineMakeCall</h1>
<p>
The <b>lineMakeCall</b> function places a call on the specified line to the specified destination address. Optionally, call parameters can be specified if anything but default call setup parameters are requested. </p>
<pre><code><b>LONG lineMakeCall(
  HLINE</b><i> hLine</i><b>,                         </b>
<b>  LPHCALL</b><i> lphCall</i><b>,                     </b>
<b>  LPCSTR</b><i> lpszDestAddress</i><b>,              </b>
<b>  DWORD</b><i> dwCountryCode</i><b>,                 </b>
<b>  LPLINECALLPARAMS const</b><i> lpCallParams  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hLine</i> </dt>
<dd>
A handle to the open line device on which a call is to be originated. </dd>
<dt>
<i>lphCall</i> </dt>
<dd>
A pointer to an HCALL handle. The handle is only valid after the <a href="msgs_2ayh.htm">LINE_REPLY</a> message is received by the application indicating that the <b>lineMakeCall</b> function successfully completed. Use this handle to identify the call when invoking other telephony operations on the call. The application is initially the sole owner of this call. This handle is void if the function returns an error (synchronously or asynchronously by the reply message). </dd>
<dt>
<i>lpszDestAddress</i> </dt>
<dd>
A pointer to the destination address. This follows the standard dialable number format. This pointer can be NULL for non-dialed addresses (as with a hot phone) or when all dialing is performed using <a href="func1_06cs.htm"><b>lineDial</b></a>. In the latter case, <b>lineMakeCall</b> allocates an available call appearance that would typically remain in the <i>dialtone</i> state until dialing begins. Service providers that have inverse multiplexing capabilities can allow an application to specify multiple addresses at once. </dd>
<dt>
<i>dwCountryCode</i> </dt>
<dd>
The country code of the called party. If a value of 0 is specified, a default is used by the implementation. </dd>
<dt>
<i>lpCallParams</i> </dt>
<dd>
A pointer to a <a href="struc1_1tgy.htm"><b>LINECALLPARAMS</b></a> structure. This structure allows the application to specify how it wants the call to be set up. If NULL is specified, a default 3.1 kHz voice call is established and an arbitrary origination address on the line is selected. This structure allows the application to select elements such as the call's bearer mode, data rate, expected media mode, origination address, blocking of caller ID information, and dialing parameters. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns a positive request identifier if the function is completed asynchronously, or a negative error number if an error occurs. The <i>dwParam2</i> parameter of the corresponding <a href="msgs_2ayh.htm">LINE_REPLY</a> message is zero if the function succeeds or it is a negative error number if an error occurs. Possible return values are: </p>
<p>
LINEERR_ADDRESSBLOCKED, LINEERR_INVALLINEHANDLE, LINEERR_BEARERMODEUNAVAIL, LINEERR_INVALLINESTATE, LINEERR_CALLUNAVAIL, LINEERR_INVALMEDIAMODE, LINEERR_DIALBILLING, LINEERR_INVALPARAM, LINEERR_DIALDIALTONE, LINEERR_INVALPOINTER, LINEERR_DIALPROMPT, LINEERR_INVALRATE, LINEERR_DIALQUIET, LINEERR_NOMEM, LINEERR_INUSE, LINEERR_OPERATIONFAILED, LINEERR_INVALADDRESS, LINEERR_OPERATIONUNAVAIL, LINEERR_INVALADDRESSID, LINEERR_RATEUNAVAIL, LINEERR_INVALADDRESSMODE, LINEERR_RESOURCEUNAVAIL, LINEERR_INVALBEARERMODE, LINEERR_STRUCTURETOOSMALL, LINEERR_INVALCALLPARAMS, LINEERR_UNINITIALIZED, LINEERR_INVALCOUNTRYCODE, LINEERR_USERUSERINFOTOOBIG.</p>
<h4>Remarks</h4>
<p>
If LINEERR_INVALLINESTATE is returned, the line is currently not in a state in which this operation can be performed. A list of currently valid operations can be found in the <b>dwLineFeatures</b> member (of the type LINEFEATURE_) in the <a href="struc2_7i0i.htm"><b>LINEDEVSTATUS</b></a> structure. Calling <a href="func1_3kj7.htm"><b>lineGetLineDevStatus</b></a> updates the information in <b>LINEDEVSTATUS</b>. If LINEERR_DIALBILLING, LINEERR_DIALQUIET, LINEERR_DIALDIALTONE, or LINEERR_DIALPROMPT is returned, none of the actions otherwise performed by <b>lineMakeCall</b> have occurred; for example, none of the dialable address prior to the offending character has been dialed, no hookswitch state has changed, and so on. </p>
<p>
After dialing has completed, several <a href="msgs_1eud.htm">LINE_CALLSTATE</a> messages are usually sent to the application to notify it about the progress of the call. No generally valid sequence of call-state transitions is specified, as no single fixed sequence of transitions can be guaranteed in practice. A typical sequence can cause a call to transition from <i>dialtone</i>, <i>dialing</i>, <i>proceeding</i>, <i>ringback</i>, to <i>connected</i>. With non-dialed lines, the call can typically transition directly to <i>connected</i> state. </p>
<p>
An application has the option to specify an originating address on the specified line device. A service provider that models all stations on a switch as addresses on a single line device allows the application to originate calls from any of these stations using <b>lineMakeCall</b>. </p>
<p>
The call parameters allow the application to make non-voice calls or request special call setup options that are not available by default. </p>
<p>
An application can partially dial using <b>lineMakeCall</b> and continue dialing using <b>lineDial</b>. To abandon a call attempt, use <b>lineDrop</b>. </p>
<p>
After <b>lineMakeCall</b> returns a success reply message to the application, a LINE_CALLSTATE message is sent to the application to indicate the current state of the call. This state is not necessarily LINECALLSTATE_DIALTONE. </p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Version:</b> Use TAPI version 1.4 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in tapi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with tapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="quickref_9s85.htm">TAPI Reference Overview</a>, <a href="quickref_7uzp.htm">Basic Telephony Services Reference</a>, <a href="msgs_1eud.htm">LINE_CALLSTATE</a>, <a href="msgs_2ayh.htm">LINE_REPLY</a>, <a href="struc1_1tgy.htm"><b>LINECALLPARAMS</b></a>, <a href="struc2_7i0i.htm"><b>LINEDEVSTATUS</b></a>, <a href="func1_06cs.htm"><b>lineDial</b></a>, <a href="func1_0zhs.htm"><b>lineDrop</b></a>, <a href="func1_3kj7.htm"><b>lineGetLineDevStatus</b></a></p>
<p>
</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
