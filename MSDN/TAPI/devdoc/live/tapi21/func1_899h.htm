<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>lineGenerateTone</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_linegeneratetone"></a>lineGenerateTone</h1>
<p>
The <b>lineGenerateTone </b>function generates the specified inband tone over the specified call. Invoking this function with a zero for <i>dwToneMode</i> aborts the tone generation currently in progress on the specified call. Invoking <b>lineGenerateTone</b> or <a href="func1_1c37.htm"><b>lineGenerateDigits</b></a> while tone generation is in progress aborts the current tone generation or digit generation and initiates the generation of the newly specified tone or digits. </p>
<pre><code><b>LONG lineGenerateTone(
  HCALL</b><i> hCall</i><b>,                      </b>
<b>  DWORD</b><i> dwToneMode</i><b>,                 </b>
<b>  DWORD</b><i> dwDuration</i><b>,                 </b>
<b>  DWORD</b><i> dwNumTones</i><b>,                 </b>
<b>  LPLINEGENERATETONE const</b><i> lpTones  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hCall</i> </dt>
<dd>
A handle to the call on which a tone is to be generated. The application must be an owner of the call. The call state of <i>hCall</i> can be any state. </dd>
<dt>
<i>dwToneMode</i> </dt>
<dd>
Defines the tone to be generated. Tones can be either standard or custom. A custom tone is composed of a set of arbitrary frequencies. A small number of standard tones are predefined. The duration of the tone is specified with <i>dwDuration</i> for both standard and custom tones. The <i>dwToneMode</i> parameter can only have one bit set. If no bits are set (the value 0 is passed), tone generation is canceled. This parameter uses the following LINETONEMODE_ constants: 
<dl>
<dt>
LINETONEMODE_CUSTOM </dt>
<dd>
The tone is a custom tone, defined by the specified frequencies. </dd>
<dt>
LINETONEMODE_RINGBACK </dt>
<dd>
The tone to be generated is ring tone. The exact ringback tone is service provider defined. </dd>
<dt>
LINETONEMODE_BUSY </dt>
<dd>
The tone is a standard (station) busy tone. The exact busy tone is service provider defined. </dd>
<dt>
LINETONEMODE_BEEP </dt>
<dd>
The tone is a beep, as used to announce the beginning of a recording. The exact beep tone is service provider defined. </dd>
<dt>
LINETONEMODE_BILLING </dt>
<dd>
The tone is a billing information tone such as a credit card prompt tone. The exact billing tone is service provider defined. 
</dd>
</dl>
</dd>
<dt>
<i>dwDuration</i> </dt>
<dd>
Duration in milliseconds during which the tone should be sustained. A value of 0 for <i>dwDuration</i> uses a default duration for the specified tone. Default values are: 
<p>
CUSTOM: infinite 

<p>
RINGBACK: infinite 

<p>
BUSY: infinite 

<p>
BEEP: infinite 

<p>
BILLING: fixed (single cycle) 
</dd>
<dt>
<i>dwNumTones</i> </dt>
<dd>
The number of entries in the <i>lpTones</i> array. This parameter is ignored if <i>dwToneMode</i> is not equal to CUSTOM. </dd>
<dt>
<i>lpTones</i> </dt>
<dd>
A pointer to a <a href="struc2_7kky.htm"><b>LINEGENERATETONE</b></a> array that specifies the tone's components. This parameter is ignored for non-custom tones. If <i>lpTones</i> is a multifrequency tone, the various tones are played simultaneously. 
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if the request succeeds or a negative error number if an error occurs. Possible return values are: </p>
<p>
LINEERR_INVALCALLHANDLE, LINEERR_NOTOWNER, LINEERR_INVALCALLSTATE, LINEERR_OPERATIONUNAVAIL, LINEERR_INVALPOINTER, LINEERR_OPERATIONFAILED, LINEERR_INVALTONEMODE, LINEERR_RESOURCEUNAVAIL, LINEERR_INVALTONE, LINEERR_UNINITIALIZED, LINEERR_NOMEM. </p>
<h4>Remarks</h4>
<p>
The <b>lineGenerateTone</b> function is considered to have completed successfully when the tone generation has been successfully initiated, not when the generation of the tone is finished. The function allows the inband generation of several predefined tones, such as ringback, busy tones, and beep. It also allows for the fabrication of custom tones by specifying their component frequencies, cadence, and volume. Because these tones are generated as inband tones, the call would typically have to be in the <i>connected</i> state for tone generation to be effective. When the generation of the tone is complete, or when tone generation is canceled, a LINE_GENERATE message is sent to the application. </p>
<p>
Only one inband generation request (tone generation or digit generation) is allowed to be in progress per call across all applications that are owners of the call. This implies that if tone generation is currently in progress on a call, invoking <b>lineGenerateDigits</b> cancels the tone generation. </p>
<p>
If the LINEERR_INVALPOINTER error value is returned, the specified <i>lpTones</i> parameter is invalid or the value specified by the <i>dwNumTones</i> parameter is too large. </p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Version:</b> Use TAPI version 1.4 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in tapi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with tapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="quickref_9s85.htm">TAPI Reference Overview</a>, <a href="quickref_2bg3.htm">Supplementary Line Services Functions</a>, <a href="msgs_0mzp.htm">LINE_GENERATE</a>, <a href="func1_1c37.htm"><b>lineGenerateDigits</b></a>, <a href="struc2_7kky.htm"><b>LINEGENERATETONE</b></a></p>
<p>&nbsp;</p></body>
</HTML>
