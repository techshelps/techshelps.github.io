<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Event Routing</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_event_routing"></a>Event Routing</h2>
<p>
Although not described in <a href="overvw2_0po3.htm">Supplementary Line Functions</a>, event routing is a part of the supplementary line services and is not a basic function. </p>
<p>
With the <a href="func2_7oz0.htm"><b>lineSetTerminal</b></a> function, the application can control or suppress the routing of specified low-level events (exchanged between the switch and the station) to a device. With <b>lineSetTerminal</b>, the application specifies the terminal device to which these events (such as line, address, or call media-stream events) are routed. </p>
<p>
The routing of the different classes of events can be individually controlled, allowing separate terminals to be specified for each event class. Event classes include lamps, buttons, display, ringer, hookswitch, and media stream. </p>
<p>
For example, the media stream of a call (voice, for example) can be sent to any transducer device if the service provider and the hardware is capable of doing so. In general, a <i>transducer</i> means the same as what is referred to as a <i>hookswitch</i> device in TAPI, something that has a microphone and a speaker. Ring events from the switch to the phone can be mapped into a visual alert on the computer's screen or they can be routed to a phone device. Lamp events and display events can be ignored or routed to a phone device (which appears to behave as a normal phone set). Finally, button presses at a phone device may or may not be passed to the line. In any case, this routing of low-level signals from the line does not affect the operation of the line portion of TAPI, which always maps low-level events to their functional equivalent. To determine the terminals a line device has available (and their capabilities), consult the line device's capabilities with <a href="func1_22nn.htm"><b>lineGetDevCaps</b></a>. </p>
<p>
Assume initially that the application has suppressed the routing of all events (with <a href="func2_7oz0.htm"><b>lineSetTerminal</b></a>), and the user selects a headset as the current I/O device. An incoming call sends a <a href="msgs_1eud.htm">LINE_CALLSTATE</a> message, and a <a href="msgs_7het.htm">LINE_LINEDEVSTATE</a> message with the <i>ringing</i> indication. Because routing of all events is suppressed, ring events are not routed to the phone, so ringing is suppressed. Instead, the application notifies the user with a pop-up dialog box and a system beep in the headset. </p>
<p>
The user decides to answer the call. Because the user's current I/O device is the headset, the telephony application invokes <b>lineSetTerminal</b> on the incoming call to route the call's media to the headset and answer the call. The application may also invoke <b>lineSetTerminal</b> to route lamp and display information events to the phone set so that it will behave as usual. </p>
<p>
As a second example, assume that an incoming call is alerting at the user's computer. Instead of selecting the answer option with the mouse, the user decides to just pick up the phone's handset to answer the call. The offhook status at the phone sends a message to the application. The application can interpret this status as a request by the user to select the phone handset to conduct the conversation. The application then invokes <b>lineSetTerminal</b> to route the voice data on the call to the phone set. </p>
<p>&nbsp;</p></body>
</HTML>
