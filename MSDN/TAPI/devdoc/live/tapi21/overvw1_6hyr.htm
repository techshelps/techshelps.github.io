<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Call State Definitions</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_call_state_definitions"></a>Call State Definitions</h2>
<p>
Some of the call states and events defined by TAPI are exclusive to incoming or outgoing call processing, while others occur in both cases. Several of these call states provide additional information that can be used by the application. For example, the <i>busy</i> state signifies that a call cannot be completed because a resource between the originator and the destination is unavailable, as when an intermediate switch has reached its capacity and cannot handle an additional call. Information supplied with the <i>busy</i> state includes <i>station busy</i> or <i>trunk busy</i>. Station busy means that the destination's station is busy (the phone is offhook), while trunk busy means that a circuit in the switch or network is busy. The call states defined by TAPI are listed below. </p>
<table cellspacing=4 cols=2>
<tr valign=top>
<th align=left width=35%>Call State </th>
<th align=left width=65%>Description </th>
</tr>
<tr valign=top>
<td width=35%><i>idle</i> </td>
<td width=65%>This corresponds to the "null" state: No activity exists on the call, which means that no call is currently active. </td>
</tr>
<tr valign=top>
<td width=35%><i>offering</i> (incoming) </td>
<td width=65%>When the switch informs the computer of the arrival of a new incoming call, that call is in the offering state. The <i>offering</i> state is not the same as causing a phone or computer to ring. When a call is offered, the computer is not necessarily instructed to alert the user. </td>
</tr>
<tr valign=top>
<td width=35%></td>
<td width=65%><i>Example:</i> An incoming call on a shared call appearance is offered to all stations that share the appearance, but typically only the station that has the appearance as its primary address is instructed to ring. If that station does not answer after some amount of time, the bridging stations may be instructed to ring as well. </td>
</tr>
<tr valign=top>
<td width=35%><i>accepted</i> (incoming) </td>
<td width=65%>An application has taken responsibility for an incoming call. In ISDN, the <i>accepted</i> state is entered when the called-party equipment sends a message to the switch indicating that it is willing to present the call to the called person; this has the side effect of alerting the users at both sides of the call: the caller's and the called party's. An incoming call can always be immediately answered without first being separately accepted. </td>
</tr>
<tr valign=top>
<td width=35%><i>dial tone</i> (outgoing) </td>
<td width=65%>Indicates that the switch is ready to receive a dialable number. In most telephony environments, this state is entered when audible dial tone is detected by the line device. Additional information includes: </td>
</tr>
<tr valign=top>
<td width=35%>—<i>normal dial tone</i> </td>
<td width=65%>The "normal" or everyday dial tone, usually a continuous tone. </td>
</tr>
<tr valign=top>
<td width=35%>—s<i>pecial dial tone</i> </td>
<td width=65%>A special dial tone is often used to signal certain conditions such as message-waiting. This is usually an interrupted dial tone. </td>
</tr>
<tr valign=top>
<td width=35%><i>dialing</i> (outgoing) </td>
<td width=65%>The originator is dialing digits on the call. The dialed digits are collected by the switch. </td>
</tr>
<tr valign=top>
<td width=35%><i>proceeding</i> (outgoing) </td>
<td width=65%>The call is proceeding through the network. This occurs after dialing is complete and before the call reaches the dialed party, as indicated by <i>ringback</i>, <i>busy</i>, or <i>answer</i>. </td>
</tr>
<tr valign=top>
<td width=35%><i>special info</i> (outgoing) </td>
<td width=65%>The call is receiving a special information signal, which precedes a prerecorded announcement indicating why a call cannot be completed. Such announcements can be of these types: </td>
</tr>
<tr valign=top>
<td width=35%>—<i>no circuit</i> </td>
<td width=65%>A no-circuit or emergency announcement. </td>
</tr>
<tr valign=top>
<td width=35%>—<i>customer irregularity</i> </td>
<td width=65%>An announcement meaning that the dialed number is not correct. </td>
</tr>
<tr valign=top>
<td width=35%>—<i>reorder</i> </td>
<td width=65%>A reorder or equipment-irregularity announcement. </td>
</tr>
<tr valign=top>
<td width=35%><i>busy</i> (outgoing) </td>
<td width=65%>The call is receiving a busy signal. <i>Busy</i> indicates that some resource is not available and the call cannot be normally completed at this time. Additional information consists of: </td>
</tr>
<tr valign=top>
<td width=35%>—<i>station busy</i> </td>
<td width=65%>The station at the other end is offhook. </td>
</tr>
<tr valign=top>
<td width=35%>—<i>trunk busy</i> </td>
<td width=65%>The network is congested. This usually produces a "fast busy" signal. </td>
</tr>
<tr valign=top>
<td width=35%><i>ringback</i> (outgoing) </td>
<td width=65%>The station to be called has been reached, and the destination's switch is generating a ring tone back to the originator. A <i>ringback</i> means that the destination address is being alerted to the call. </td>
</tr>
<tr valign=top>
<td width=35%><i>connected</i> (incoming and outgoing) </td>
<td width=65%>Information is being exchanged over the call. </td>
</tr>
<tr valign=top>
<td width=35%><i>on hold</i> (incoming and outgoing) </td>
<td width=65%>The call is currently held by the switch. This frees the physical line, which allows another call to use the line. </td>
</tr>
<tr valign=top>
<td width=35%><i>conferenced</i> (incoming and outgoing) </td>
<td width=65%>The call is a member of a conference call and is logically in the connected state (to the conference bridge). A call in the <i>conferenced</i> state refers to a conference call (in the <i>connected</i>, <i>onHold</i>, ... state). </td>
</tr>
<tr valign=top>
<td width=35%><i>on hold pending conference</i> (incoming and outgoing) </td>
<td width=65%>The conference call is currently on hold and waiting for the user to add another party. </td>
</tr>
<tr valign=top>
<td width=35%><i>on hold pending transfer</i> (incoming and outgoing) </td>
<td width=65%>The call is on hold in preparation of being transferred. </td>
</tr>
<tr valign=top>
<td width=35%><i>disconnected</i> (incoming and outgoing) </td>
<td width=65%>The call has been disconnected by the remote party. </td>
</tr>
<tr valign=top>
<td width=35%><i>unknown</i> (incoming and outgoing) </td>
<td width=65%>The call exists, but its state is currently <i>unknown</i>. This may be the result of poor call progress detection by the service provider. A call state message with the call state set to unknown may also be generated to inform the TAPI DLL about a new call at a time that the actual call state of the call is not exactly known. </td>
</tr>
</table><br>
<p>
Although under normal circumstances an outgoing call is likely to transition to <i>connected</i> through a number of intermediate states (<i>dial tone</i>, <i>dialing</i>, <i>proceeding</i>, <i>ringback</i>), other paths are often possible. For example, the <i>ringback</i> state may be skipped, as when a hot phone (or other nondialed phone) transitions directly to <i>connected</i>. </p>
<p>
An application should always process call-state event notifications. Call-state transitions valid for one switch or configuration may be invalid for another. For example, consider a line from the switch that (using a simple Y-connector) physically terminates both at the computer and at a separate phone set, creating a party line configuration between the computer and the phone set. The computer termination and, therefore, the application using TAPI, may not know of the activities on the line handled by the phone set. That is, the line may be in use without the service provider being aware of it. An application that wants to make an outgoing call will succeed in allocating a call appearance from the API, but this results in sharing the active call on the line. In this case, blindly sending a DTMF dial string without first checking for a dial tone may not result in intended (or polite) behavior. </p>
<p>&nbsp;</p></body>
</HTML>
