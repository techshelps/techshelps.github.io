<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Media Event Timers</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h3><a name="_win32_media_event_timers"></a>Media Event Timers</h3>
<p>
Many applications depend on the timing relationship between media events (for example, DTMF digits received) in order to determine the nature of a requested operation. For example, in a voice mail application, two consecutive DTMF "1" digits may mean "back up two segments" or "replay from beginning of message", depending on how much time elapsed between the two digits. In a client/server environment, if the DTMF detection is being performed on a separate processor from the one on which the application is running, latency in the local area network makes it very likely that the timing relationship between media events will be skewed, with the result that these timing-based differences could be lost or become unreliable. </p>
<p>
To resolve this issue, several TAPI messages can be timestamped. Because it is the <i>relative</i> timing between these events that is important, the "clock time" of the event is not important, and sub-second timing is involved, these timestamps use the millisecond-resolution "time since Windows started" returned by the <b>GetTickCount</b> function. Applications must be aware that this is the tick count on the server (or machine where the service provider directly managing the hardware is running), and is not necessarily the same machine on which the application is executing; thus, the timestamps in these TAPI messages can only be compared to <i>each other</i>, and not to the value returned by <b>GetTickCount</b> on the processor on which the application is running. </p>
<p>
The TAPI messages that can be timestamped are: <a href="msgs_9myb.htm">LINE_GATHERDIGITS</a>, <a href="msgs_0mzp.htm">LINE_GENERATE</a>, <a href="msgs_8icz.htm">LINE_MONITORDIGITS</a>, <a href="msgs_3w9t.htm">LINE_MONITORMEDIA</a>, and <a href="msgs_4tb9.htm">LINE_MONITORTONE</a>. The tick count is inserted into <i>dwParam3</i> of these messages. If timestamping is not supported by the service provider (which is indicated by the service provider setting <i>dwParam3</i> in these messages to 0), then TAPI itself will insert the tick count into <i>dwParam3</i> of all of these messages (it can be skewed somewhat, but less than if the application did the same after the messages had traversed an interprocess communication scheme). </p>
<p>&nbsp;</p></body>
</HTML>
