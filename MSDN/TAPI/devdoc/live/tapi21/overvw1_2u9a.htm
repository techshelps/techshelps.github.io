<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Duties of the Media Mode Application</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_duties_of_the_media_mode_application"></a>Duties of the Media Mode Application</h2>
<p>
The media mode application that receives a call as a handoff target first checks the bit flags of <b>dwMediaMode</b> in <a href="struc1_0twy.htm"><b>LINECALLINFO</b></a>. If only a single media mode flag is set, the call is officially of that media mode, and the application can act accordingly. </p>
<p>
If the UNKNOWN and other media mode flags are set, the media mode of the call is officially UNKNOWN, but is assumed to be one of the media modes for which a flag is set in <b>LINECALLINFO</b>. The application should now probe for the highest priority media mode. </p>
<p>
If more than one bit is set in <b>LINECALLINFO</b> and the call has not been answered, the application must perform a <a href="func1_17zm.htm"><b>lineAnswer</b></a> to continue probing. If the call has already been answered, the application can continue probing without having to first answer the call. </p>
<p>
If the probe succeeds (either for the highest-priority media mode or for another one), the application should set <b>dwMediaMode</b> in <a href="struc1_0twy.htm"><b>LINECALLINFO</b></a> to the single media mode that was recognized. If the actual media mode is this expected media mode, the application can act accordingly. Otherwise—if it makes a determination of another media mode—it must first attempt to hand off the call in case it is not the highest priority application for the detected media mode. </p>
<p>
If the probe fails, the application should clear the flag for that media mode in <b>dwMediaMode</b> in <b>LINECALLINFO</b>, and hand the call off to the unknown application. It should also deallocate its call handle or revert back to monitoring the call. At this point, the fate of the call is determined by the steps described in <a href="overvw1_0dlz.htm">An Unknown Application Is Running</a>, depending on whether or not an unknown application is active. </p>
<p>
If the attempt to hand off the call to the UNKNOWN application fails, this means that no unknown application is running. It is then the responsibility of the application that currently owns the call to attempt to hand it off to the next-highest-priority media mode (while leaving the UNKNOWN bit turned on in <b>dwMediaMode</b> in <b>LINECALLINFO</b>). If that handoff fails, the application should turn off that media bit, and attempt the next higher-priority bit, until the handoff succeeds or all of the bits are off except for the UNKNOWN bit. </p>
<p>
If none of the media modes were determined to be the actual one, only the UNKNOWN flag will remain set in <b>dwMediaMode</b> in <b>LINECALLINFO</b> at the time the media application attempts to hand the call off to UNKNOWN. The final <a href="func1_0b52.htm"><b>lineHandoff</b></a> invocation will fail if the application is the only remaining owner of the call. This failure informs the application that it should drop the call and then deallocate the call's handle. At this point, the call is abandoned. </p>
<p>&nbsp;</p></body>
</HTML>
