<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>comm/datamodem</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h2><a name="_win32_comm_datamodem"></a>comm/datamodem</h2>
<p>
The comm/datamodem device class consists of datamodem devices. You access these devices by using the Win32 file and communications functions. Devices in this class are associated with line devices that support the LINEMEDIAMODE_DATAMODEM media mode, which is specified in the <b>dwMediaModes</b> member of the <a href="struc2_30mq.htm"><b>LINEDEVCAPS</b></a> structure for the line device. </p>
<p>
The <a href="func1_99r8.htm"><b>lineGetID</b></a> function fills a <a href="struc2_90xe.htm"><b>VARSTRING</b></a> structure, setting <b>dwStringFormat</b> to the STRINGFORMAT_BINARY value and appending these additional members: </p>
<pre><code>HANDLE hComm;            // Win32 file handle to data modem
CHAR   szDeviceName[1];  // name of data modem
 </code></pre>
<p>
The <b>hComm</b> member is the handle of the open communications port. This member is NULL if the port is not yet open or if the <i>dwSelect</i> parameter of <b>lineGetID</b> is not the LINECALLSELECT_CALL value. If a call is active, the service provider typically opens the port itself to get direct control of the communications hardware, but is only required to return a valid handle if the line is <i>connected</i>. The service provider opens the port using the FILE_FLAG_OVERLAPPED value and then configures the port using the settings specified by the <a href="func2_6qhz.htm"><b>lineSetDevConfig</b></a> function. You can set additional configuration options for the device by using Win32 functions with the returned handle. </p>
<p>
The <b>szDeviceName</b> member is a null-terminated ASCII string that specifies the name of the communications port associated with the line, address, or call. </p>
<p>
If <b>hComm</b> is a valid handle, you can use it in subsequent calls to Win32 file functions, such as <b>ReadFile</b> and <b>WriteFile</b>, to send and receive data on the call. When you are finished using the communications port and preferably before you use the <a href="func1_6q5o.htm"><b>lineDeallocateCall</b></a> function to deallocate the call, you must close the port by using the <b>CloseHandle</b> function. </p>
<p>
When using the <a href="func1_6ckn.htm"><b>lineGetDevConfig</b></a> and <b>lineSetDevConfig</b> functions, some service providers require that the configuration data for this device class have the following format: </p>
<pre><code>typedef struct  tagDEVCFG  {
  DEVCFGHDR   dfgHdr;
  COMMCONFIG  commconfig;
} DEVCFG, *PDEVCFG, FAR* LPDEVCFG;

// Device setting information
typedef struct  tagDEVCFGDR  {
  DWORD       dwSize;
  DWORD       dwVersion;
  WORD        fwOptions;
  WORD        wWaitBong;
} DEVCFGHDR;
 </code></pre>
<p>
The following is device configuration information for use with the <b>lineGetDevConfig</b> and <b>lineSetDevConfig</b> functions. 
<dl>
<dt>
<b>dwSize</b> </dt>
<dd>
Sum of the size of the <b>DEVCFGHDR</b> structure and the actual size of <b>COMMCONFIG</b> structure. </dd>
<dt>
<b>dwVersion</b> </dt>
<dd>
Version number of the Unimodem <b>DevConfig</b> structure. This member can be MDMCFG_VERSION (0x00010003). </dd>
<dt>
<b>dwOptions</b> </dt>
<dd>
Option flags that appear on the Unimodem Option page. This member can be a combination of these values: 
<dl>
<dt>
TERMINAL_PRE (1) </dt>
<dd>
Displays the pre-terminal screen. </dd>
<dt>
TERMINAL_POST (2) </dt>
<dd>
Displays the post-terminal screen. </dd>
<dt>
MANUAL_DIAL (4) </dt>
<dd>
Dials the phone manually, if capable of doing so. </dd>
<dt>
LAUNCH_LIGHTS (8) </dt>
<dd>
Displays the modem tray icon. 
<p>
Only the LAUNCH_LIGHTS value is set by default
</dd>
</dl>
</dd>
<dt>
<b>WWaitBong</b> </dt>
<dd>
Number of seconds (in two seconds granularity) to replace the wait for credit tone ($). </dd>
<dt>
<b>Commconfig</b> </dt>
<dd>
<b>COMMCONFIG</b> structure that can be used with the Win32 communications and modem configuration functions. 
</dd>
</dl>
<p>&nbsp;</p></body>
</HTML>
