<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>phoneSetStatusMessages</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_win32_phonesetstatusmessages"></a>phoneSetStatusMessages</h1>
<p>
The <b>phoneSetStatusMessages</b> function enables an application to monitor the specified phone device for selected status events. </p>
<pre><code><b>LONG phoneSetStatusMessages(
  HPHONE</b><i> hPhone</i><b>,        </b>
<b>  DWORD</b><i> dwPhoneStates</i><b>,  </b>
<b>  DWORD</b><i> dwButtonModes</i><b>,  </b>
<b>  DWORD</b><i> dwButtonStates  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hPhone</i> </dt>
<dd>
A handle to the open phone device to be monitored. </dd>
<dt>
<i>dwPhoneStates</i> </dt>
<dd>
These flags specify the set of phone status changes and events for which the application can receive notification messages. This parameter can have zero, one, or more bits set. This parameter uses the following PHONESTATE_ constants: 
<dl>
<dt>
PHONESTATE_OTHER </dt>
<dd>
Phone status items other than those listed below have changed. The application should check the current phone status to determine which items have changed. </dd>
<dt>
PHONESTATE_CONNECTED </dt>
<dd>
The connection between the phone device and TAPI was just made. This happens when TAPI is first invoked or when the wire connecting the phone to the PC is plugged in while TAPI is active. </dd>
<dt>
PHONESTATE_DISCONNECTED </dt>
<dd>
The connection between the phone device and TAPI was just broken. This happens when the wire connecting the phone set to the PC is unplugged while TAPI is active. </dd>
<dt>
PHONESTATE_OWNER </dt>
<dd>
The number of owners for the phone device has changed. </dd>
<dt>
PHONESTATE_MONITORS </dt>
<dd>
The number of monitors for the phone device has changed. </dd>
<dt>
PHONESTATE_DISPLAY </dt>
<dd>
The display of the phone has changed. </dd>
<dt>
PHONESTATE_LAMP </dt>
<dd>
A lamp of the phone has changed. </dd>
<dt>
PHONESTATE_RINGMODE </dt>
<dd>
The ring mode of the phone has changed. </dd>
<dt>
PHONESTATE_RINGVOLUME </dt>
<dd>
The ring volume of the phone has changed. </dd>
<dt>
PHONESTATE_HANDSETHOOKSWITCH </dt>
<dd>
The handset hookswitch state has changed. </dd>
<dt>
PHONESTATE_HANDSETVOLUME </dt>
<dd>
The handset's speaker volume setting has changed. </dd>
<dt>
PHONESTATE_HANDSETGAIN </dt>
<dd>
The handset's microphone gain setting has changed. </dd>
<dt>
PHONESTATE_SPEAKERHOOKSWITCH </dt>
<dd>
The speakerphone's hookswitch state has changed. </dd>
<dt>
PHONESTATE_SPEAKERVOLUME </dt>
<dd>
The speakerphone's speaker volume setting has changed. </dd>
<dt>
PHONESTATE_SPEAKERGAIN </dt>
<dd>
The speakerphone's microphone gain setting state has changed. </dd>
<dt>
PHONESTATE_HEADSETHOOKSWITCH </dt>
<dd>
The headset's hookswitch state has changed. </dd>
<dt>
PHONESTATE_HEADSETVOLUME </dt>
<dd>
The headset's speaker volume setting has changed. </dd>
<dt>
PHONESTATE_HEADSETGAIN </dt>
<dd>
The headset's microphone gain setting has changed. </dd>
<dt>
PHONESTATE_SUSPEND </dt>
<dd>
The application's use of the phone is temporarily suspended. </dd>
<dt>
PHONESTATE_RESUME </dt>
<dd>
The application's use of the phone device is resumed after having been suspended for some time. </dd>
<dt>
PHONESTATE_DEVSPECIFIC </dt>
<dd>
The phone's device-specific information has changed. </dd>
<dt>
PHONESTATE_REINIT </dt>
<dd>
Items have changed in the configuration of phone devices. To become aware of these changes (as with the appearance of new phone devices) the application should reinitialize its use of TAPI. New <a href="func2_9zs5.htm"><b>phoneInitialize</b></a>, <a href="func2_5ans.htm"><b>phoneInitializeEx</b></a> and <a href="func2_6him.htm"><b>phoneOpen</b></a> requests are denied until applications have shut down their usage of TAPI. The <i>hDevice</i> parameter of the <a href="msgs_6wkl.htm">PHONE_STATE</a> message is left NULL for this state change, because it applies to any of the lines in the system. Because of the critical nature of PHONESTATE_REINIT, such messages cannot be masked, so the setting of this bit is ignored and the messages are always delivered to the application. </dd>
<dt>
PHONESTATE_CAPSCHANGE </dt>
<dd>
Indicates that due to configuration changes made by the user or other circumstances one or more of the members in the <a href="struc2_8x6a.htm"><b>PHONECAPS</b></a> structure have changed. The application should use <a href="func2_0eib.htm"><b>phoneGetDevCaps</b></a> to read the updated structure. If a service provider sends a <a href="msgs_6wkl.htm">PHONE_STATE</a> message containing this value to TAPI, TAPI passes it along to applications that have negotiated TAPI version 1.4 or later; applications negotiating a previous TAPI version receive PHONE_STATE messages specifying PHONESTATE_REINIT, requiring them to shutdown and reinitialize their connection to TAPI in order to obtain the updated information. </dd>
<dt>
PHONESTATE_REMOVED </dt>
<dd>
Indicates that the device is being removed from the system by the service provider (most likely through user action, through a control panel or similar utility). A PHONE_STATE message with this value is normally immediately followed by a <a href="msgs_9oh1.htm">PHONE_CLOSE</a> message on the device. Subsequent attempts to access the device prior to TAPI being reinitialized result in PHONEERR_NODEVICE being returned to the application. If a service provider sends a PHONE_STATE message containing this value to TAPI, TAPI passes it along to applications that have negotiated TAPI version 1.4 or later; applications negotiating a previous TAPI version do not receive any notification. 
</dd>
</dl>
</dd>
<dt>
<i>dwButtonModes</i> </dt>
<dd>
The set of phone-button modes for which the application can receive notification messages. This parameter can have zero, one, or more bits set. This parameter uses the following PHONEBUTTONMODE_ constants: 
<dl>
<dt>
PHONEBUTTONMODE_CALL </dt>
<dd>
The button is assigned to a call appearance. </dd>
<dt>
PHONEBUTTONMODE_FEATURE </dt>
<dd>
The button is assigned to requesting features from the switch, such as hold, conference, and transfer. </dd>
<dt>
PHONEBUTTONMODE_KEYPAD </dt>
<dd>
The button is one of the twelve keypad buttons, '0' through '9', '*', and '#'. </dd>
<dt>
PHONEBUTTONMODE_LOCAL </dt>
<dd>
The button is a local function button, such as mute or volume control. </dd>
<dt>
PHONEBUTTONMODE_DISPLAY </dt>
<dd>
The button is a "soft" button associated with the phone's display. A phone set can have zero or more display buttons. 
</dd>
</dl>
</dd>
<dt>
<i>dwButtonStates</i> </dt>
<dd>
The set of phone-button state changes for which the application can receive notification messages. If the <i>dwButtonModes</i> parameter is zero, <i>dwButtonStates</i> is ignored. If <i>dwButtonModes</i> has one or more bits set, this parameter must also have at least one bit set. This parameter uses the following PHONEBUTTONSTATE_ constants: 
<dl>
<dt>
PHONEBUTTONSTATE_UP </dt>
<dd>
The button is in the "up" state. </dd>
<dt>
PHONEBUTTONSTATE_DOWN </dt>
<dd>
The button is in the "down" state (pressed down). </dd>
<dt>
PHONEBUTTONSTATE_UNKNOWN </dt>
<dd>
Indicates that the up or down state of the button is not known at this time, but may become known at a future time. </dd>
<dt>
PHONEBUTTONSTATE_UNAVAIL </dt>
<dd>
Indicates that the up or down state of the button is not known to the service provider, and will not become known. 
</dd>
</dl>
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if the request succeeds or a negative error number if an error occurs. Possible return values are: </p>
<p>
PHONEERR_INVALPHONEHANDLE, PHONEERR_NOMEM, PHONEERR_INVALPHONESTATE, PHONEERR_RESOURCEUNAVAIL, PHONEERR_INVALBUTTONMODE, PHONEERR_OPERATIONFAILED, PHONEERR_INVALBUTTONSTATE, PHONEERR_UNINITIALIZED, PHONEERR_OPERATIONUNAVAIL.</p>
<h4>Remarks</h4>
<p>
An application can use the <b>phoneSetStatusMessages</b> function to enable or disable the generation of the corresponding messages. All phone status messages are disabled by default. </p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Version:</b> Use TAPI version 1.4 and later.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in tapi.h.<br>
&nbsp;&nbsp;<b>Import Library:</b> Link with tapi32.lib.</p>
<h4>See Also</h4>
<p>
<a href="quickref_9s85.htm">TAPI Reference Overview</a>, <a href="quickref_352r.htm">Supplementary Phone Services Functions</a>, <a href="msgs_9oh1.htm">PHONE_CLOSE</a>, <a href="msgs_6wkl.htm">PHONE_STATE</a>, <a href="struc2_8x6a.htm"><b>PHONECAPS</b></a>, <a href="func2_0eib.htm"><b>phoneGetDevCaps</b></a>, <a href="func2_9zs5.htm"><b>phoneInitialize</b></a>, <a href="func2_5ans.htm"><b>phoneInitializeEx</b></a>, <a href="func2_6him.htm"><b>phoneOpen</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
