<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TSPI_providerEnumDevices</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_tspi_providerenumdevices"></a>TSPI_providerEnumDevices</h1>
<p>
TAPI calls the <b>TSPI_providerEnumDevices</b> function before <a href="func1_9pv8.htm"><b>TSPI_providerInit</b></a> to determine the number of line and phone devices supported by the service provider.</p>
<pre><code><b>LONG TSPIAPI TSPI_providerEnumDevices(
  DWORD</b><i> dwPermanentProviderID</i><b>,  </b>
<b>  LPDWORD</b><i> lpdwNumLines</i><b>,         </b>
<b>  LPDWORD</b><i> lpdwNumPhones</i><b>,        </b>
<b>  HPROVIDER</b><i> hProvider</i><b>,          </b>
<b>  LINEEVENT</b><i> lpfnLineCreateProc</i><b>,  </b>
<b>  PHONEEVENT</b><i> lpfnPhoneCreateProc  </i>
);
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>dwPermanentProviderID</i></dt>
<dd>
The permanent identifier, unique within the service providers on this system, of the service provider being initialized.</dd>
<dt>
<i>lpdwNumLines</i></dt>
<dd>
A pointer to a <b>DWORD</b>-sized memory location into which the service provider must write the number of line devices it is configured to support. TAPI initializes the value to 0, so if the service provider fails to write a different value, the value 0 is assumed.</dd>
<dt>
<i>lpdwNumPhones</i></dt>
<dd>
A pointer to a <b>DWORD</b>-sized memory location into which the service provider must write the number of phone devices it is configured to support. TAPI initializes the value to 0, so if the service provider fails to write a different value, the value 0 is assumed.</dd>
<dt>
<i>hProvider</i></dt>
<dd>
An opaque <b>DWORD</b>-sized value that uniquely identifies this instance of this service provider during this execution of the Win32 Telephony environment.</dd>
<dt>
<i>lpfnLineCreateProc</i></dt>
<dd>
A pointer to the <a href="func3_7q7o.htm"><b>LINEEVENT</b></a> callback procedure supplied by TAPI. The service provider uses this function to send <a href="messgs_9kkl.htm">LINE_CREATE</a> messages when a new line device needs to be created. This function should not be called to send a LINE_CREATE message until after the service provider has returned from the <a href="func1_9pv8.htm"><b>TSPI_providerInit</b></a> procedure.</dd>
<dt>
<i>lpfnPhoneCreateProc</i></dt>
<dd>
A pointer to the <a href="func3_2x6c.htm"><b>PHONEEVENT</b></a> callback procedure supplied by TAPI. The service provider uses this function to send <a href="messgs_1sv9.htm">PHONE_CREATE</a> messages when a new phone device needs to be created. This function should not be called to send a PHONE_CREATE message until after the service provider has returned from the <b>TSPI_providerInit</b> procedure.
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if the request succeeds or an error number if an error occurs. Possible return values are: </p>
<p>
LINEERR_NOMEM, LINEERR_OPERATIONFAILED. </p>
<h4>Remarks</h4>
<p>
In previous versions of TAPI, implementation of this function was optional. Beginning with TAPI 2.0, implementation of this function is <i>mandatory</i> in all service providers. TAPI no longer checks telephon.ini or the Registry at TAPI startup to determine the initial number of lines and phones supported by a service provider.</p>
<h4>See Also</h4>
<p>
<a href="messgs_9kkl.htm">LINE_CREATE</a>, <a href="func3_7q7o.htm"><b>LINEEVENT</b></a>, <a href="messgs_1sv9.htm">PHONE_CREATE</a>, <a href="func3_2x6c.htm"><b>PHONEEVENT</b></a>, <a href="func1_9pv8.htm"><b>TSPI_providerInit</b></a></p>
<p>&nbsp;</p></body>
</HTML>
