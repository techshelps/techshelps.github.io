<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LINE_LINEDEVSTATE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_line_linedevstate"></a>LINE_LINEDEVSTATE</h1>
<p>
The LINE_LINEDEVSTATE message is sent to the <a href="func3_7q7o.htm"><b>LINEEVENT</b></a> callback function when the state of a line device has changed. TAPI can invoke <a href="func2_3e7n.htm"><b>TSPI_lineGetLineDevStatus</b></a> to determine the new status of the line.</p>
<pre><code>LINE_LINEDEVSTATE
htLine = (HTAPILINE) hLineDevice;
htCall = (HTAPICALL) 0;
dwMsg = (DWORD) LINE_LINEDEVSTATE;
dwParam1 = (DWORD) LineDevState;
dwParam2 = (DWORD) DevStateData1;
dwParam3 = (DWORD) DevStateData2;
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>htLine</i></dt>
<dd>
The TAPI opaque object handle to the line device.</dd>
<dt>
<i>htCall</i></dt>
<dd>
Unused.</dd>
<dt>
<i>dwMsg</i></dt>
<dd>
The value LINE_LINEDEVSTATE.
<p>
Specifies the callback instance supplied when opening the line.
</dd>
<dt>
<i>dwParam1</i></dt>
<dd>
Specifies the line device status item that has changed. This parameter can have multiple flags set and uses the following LINEDEVSTATE_ constants: 
<dl>
<dt>
LINEDEVSTATE_OTHER </dt>
<dd>
Device-status items other than those listed below have changed. </dd>
<dt>
LINEDEVSTATE_RINGING </dt>
<dd>
The switch tells the line to alert the user. This should be sent repeatedly in a LINE_LINEDEVSTATE message, once for each ring cycle. On a POTS device, the service provider can send the message whenever the central office sends ring voltage. On digital devices such as ISDN, the service provider may need to synthesize the repetition of the message if the switch generates only one ring request. Each repetition of the message should show the ring count increasing, so that toll save functions work properly. </dd>
<dt>
LINEDEVSTATE_CONNECTED </dt>
<dd>
The line was previously disconnected and is now connected to the API. </dd>
<dt>
LINEDEVSTATE_DISCONNECTED </dt>
<dd>
This line was previously connected and is now disconnected from the API. </dd>
<dt>
LINEDEVSTATE_MSGWAITON </dt>
<dd>
The "message waiting" indicator is turned on. </dd>
<dt>
LINEDEVSTATE_MSGWAITOFF </dt>
<dd>
The "message waiting" indicator is turned off. </dd>
<dt>
LINEDEVSTATE_INSERVICE </dt>
<dd>
The line is connected to the API. This happens when the API is first activated, or when the line wire is physically plugged in and in service at the switch while the API is active. </dd>
<dt>
LINEDEVSTATE_OUTOFSERVICE </dt>
<dd>
The line is out of service at the switch or physically disconnected. The API cannot be used to operate on the line device. </dd>
<dt>
LINEDEVSTATE_MAINTENANCE </dt>
<dd>
Maintenance is being performed on the line at the switch. The API cannot be used to operate on the line device. </dd>
<dt>
LINEDEVSTATE_NUMCALLS </dt>
<dd>
The number of calls on the line device has changed. </dd>
<dt>
LINEDEVSTATE_NUMCOMPLETIONS </dt>
<dd>
The number of outstanding call completions on the line device has changed. </dd>
<dt>
LINEDEVSTATE_TERMINALS </dt>
<dd>
The terminal settings have changed. </dd>
<dt>
LINEDEVSTATE_ROAMMODE </dt>
<dd>
The roaming state of the line device has changed. </dd>
<dt>
LINEDEVSTATE_BATTERY </dt>
<dd>
The battery level has changed significantly (cellular). </dd>
<dt>
LINEDEVSTATE_SIGNAL </dt>
<dd>
The signal level has changed significantly (cellular). </dd>
<dt>
LINEDEVSTATE_DEVSPECIFIC </dt>
<dd>
The line's device-specific information has changed. </dd>
<dt>
LINEDEVSTATE_REINIT </dt>
<dd>
Items have changed in the configuration of line devices. Except in extreme cases, the service provider should use the normal configuration change notification mechanism as described in the Overviews section instead of this message. Note that when <i>dwParam1</i> is LINEDEVSTATE_REINIT, <i>htLine</i> is unused, and should be set to NULL. </dd>
<dt>
LINEDEVSTATE_LOCK </dt>
<dd>
The locked status of the line device has changed. </dd>
<dt>
LINEDEVSTATE_CAPSCHANGE </dt>
<dd>
Due to configuration changes made by the user or other circumstances, one or more of the fields in the <a href="struc2_0j1u.htm"><b>LINEDEVCAPS</b></a> structure for the address have changed. If a service provider sends a LINE_LINEDEVSTATE message containing this value to TAPI, TAPI passes it along to applications that have negotiated this or a subsequent API version; applications negotiating an earlier API version receive LINE_LINEDEVSTATE messages specifying LINEDEVSTATE_REINIT, requiring them to shutdown and reinitialize their connection to TAPI to obtain the updated information. </dd>
<dt>
LINEDEVSTATE_CONFIGCHANGE </dt>
<dd>
Indicates that configuration changes have been made to one or more of the media devices associated with the line device. If a service provider sends a LINE_LINEDEVSTATE message containing this value to TAPI, TAPI passes it along to applications that have negotiated this or a later API version; applications negotiating an earlier API version do not receive any notification. </dd>
<dt>
LINEDEVSTATE_COMPLCANCEL </dt>
<dd>
The call completion identified by the completion identifier contained in the <i>dwParam2</i> parameter of the LINE_LINEDEVSTATE message has been externally cancelled and is no longer considered valid (if that value were to be passed in a subsequent call to <b>lineUncompleteCall</b>, the function would fail with LINEERR_INVALCOMPLETIONID). If a service provider sends a LINE_LINEDEVSTATE message containing this value to TAPI, TAPI passes it along to applications that have negotiated this or a later API version; applications negotiating an earlier API version do not receive any notification. </dd>
<dt>
LINEDEVSTATE_REMOVED </dt>
<dd>
The device is being removed from the system by the service provider (most likely through user action, through a control panel or similar utility). If a service provider sends a LINE_LINEDEVSTATE message containing this value to TAPI, TAPI passes it along to applications that have negotiated this or a subsequent API version; applications negotiating a previous API version do not receive any notification. </dd>
</dl>
</dd>
<dt>
<i>dwParam2</i></dt>
<dd>
The interpretation of this parameter depends on the value of <i>dwParam1</i>. If <i>dwParam1</i> is LINEDEVSTATE_RINGING, <i>dwParam2</i> contains the ring mode with which the switch instructs the line to ring. Valid ring modes are numbers in the range one to <b>dwNumRingModes</b>, where <b>dwNumRingModes</b> is a line device capability.</dd>
<dt>
<i>dwParam3</i></dt>
<dd>
The interpretation of this parameter depends on the value of <i>dwParam1</i>. If <i>dwParam1</i> is LINEDEVSTATE_RINGING, <i>dwParam3</i> contains the ring count for this ring event. The ring count starts at zero.
</dd>
</dl>
<h4>Remarks</h4>
<p>
The sending of this message can be controlled through <a href="func2_9fhv.htm"><b>TSPI_lineSetStatusMessages</b></a>. The service provider must send LINE_LINEDEVSTATE messages for at least the set of status changes selected through that procedure. The service provider can send more than this set, however, it should try to limit its messages to this set for performance reasons. By default all status reporting is disabled.</p>
<p>
At the TSPI level, the service provider does not report state changes when the line is opened and closed, since there is only ever one Open outstanding for the device.</p>
<p>
For backward compatibility, older service providers would not be expected to generate these values. If they do, TAPI treats them the same as if the service provider were using API version 1.4 or later (as described earlier).</p>
<h4>See Also</h4>
<p>
<a href="struc2_59bm.htm"><b>LINEDEVSTATUS</b></a>, <a href="func3_7q7o.htm"><b>LINEEVENT</b></a>, <a href="func2_3e7n.htm"><b>TSPI_lineGetLineDevStatus</b></a>, <a href="func2_9fhv.htm"><b>TSPI_lineSetStatusMessages</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
