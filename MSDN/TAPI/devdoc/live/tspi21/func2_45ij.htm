<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TSPI_linePark</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_tspi_linepark"></a>TSPI_linePark</h1>
<p>
The <b>TSPI_linePark</b> function parks the specified call according to the specified park mode.</p>
<pre><code><b>LONG TSPI_linePark(
  DRV_REQUESTID</b><i> dwRequestID</i><b>,  </b>
<b>  HDRVCALL</b><i> hdCall</i><b>,         </b>
<b>  DWORD</b><i> dwParkMode</i><b>,        </b>
<b>  LPCWSTR</b><i> lpszDirAddress</i><b>,  </b>
<b>  LPVARSTRING</b><i> lpNonDirAddress  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>dwRequestID</i></dt>
<dd>
The identifier of the asynchronous request.</dd>
<dt>
<i>hdCall</i></dt>
<dd>
The handle to the call to be parked. The call state of <i>hdCall</i> can be <i>connected</i>.</dd>
<dt>
<i>dwParkMode</i></dt>
<dd>
The park mode with which the call is to be parked. Only one of the following LINEPARKMODE_ flags can be set at a time: 
<dl>
<dt>
LINEPARKMODE_DIRECTED </dt>
<dd>
TAPI specifies the address at which the call is to be parked in <i>lpszDirAddress</i>. </dd>
<dt>
LINEPARKMODE_NONDIRECTED </dt>
<dd>
This operation reports to TAPI where the call has been parked in <i>lpNonDirAddress</i>. </dd>
</dl>
</dd>
<dt>
<i>lpszDirAddress</i></dt>
<dd>
A pointer to NULL-terminated Unicode string that indicates the address where the call is to be parked when using directed park. The address is in dialable address format. This parameter is ignored for nondirected park.</dd>
<dt>
<i>lpNonDirAddress</i></dt>
<dd>
A pointer to a structure of type <a href="struc2_7egi.htm"><b>VARSTRING</b></a>. For nondirected park, the address where the call is parked is returned in this structure. This parameter is ignored for directed park. Within the <b>VARSTRING</b> structure, <i>dwStringFormat</i> must be set to STRINGFORMAT_ASCII (an ASCII string buffer containing a NULL-terminated string), and the terminating NULL is accounted for in the <i>dwStringSize</i>. If the memory pointed to by the <i>lpNonDirAddress</i> parameter is not large enough for the requested address, the <b>TSPI_linePark</b> function returns LINEERR_STRUCTURETOOSMALL.
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns <i>dwRequestID</i>, or an error number if an error occurs. The <i>lResult</i> actual parameter of the corresponding <a href="func3_6ppq.htm"><b>ASYNC_COMPLETION</b></a> is zero if the function succeeds, or an error number if an error occurs. Possible return values are as follows: </p>
<p>
LINEERR_INVALCALLHANDLE, LINEERR_NOMEM, LINEERR_INVALPARKMODE, LINEERR_OPERATIONUNAVAIL, LINEERR_INVALCALLSTATE, LINEERR_OPERATIONFAILED, LINEERR_INVALADDRESS, LINEERR_RESOURCEUNAVAIL, LINEERR_STRUCTURETOOSMALL. </p>
<h4>Remarks</h4>
<p>
All members of the <a href="struc2_7egi.htm"><b>VARSTRING</b></a> structure, except <b>dwTotalSize</b>, are filled in by the service provider. The <b>dwTotalSize</b> member is filled in by TAPI, and the service provider must <i>not</i> overwrite this value.</p>
<p>
Under directed park, the client application (through TAPI) specifies the address at which it wants to park the call. Under nondirected park, the switch determines the address and provides this to TAPI. In either case, a parked call can be unparked by specifying this address.</p>
<p>
The parked call typically enters the <i>idle</i> call state after it is successfully parked. The service provider reports the new state using a <a href="messgs_7gth.htm">LINE_CALLSTATE</a> message. A subsequent <a href="func3_4a23.htm"><b>TSPI_lineUnpark</b></a> creates a new, distinct call handle, regardless of whether <a href="func1_4964.htm"><b>TSPI_lineCloseCall</b></a> has destroyed the old handle.</p>
<p>
Some switches can remind the user after a call has been parked for some long amount of time. The service provider reports this to TAPI as an <i>offering</i> call with a call reason set to <i>reminder</i> (if this is known).</p>
<h4>See Also</h4>
<p>
<a href="func3_6ppq.htm"><b>ASYNC_COMPLETION</b></a>, <a href="messgs_7gth.htm">LINE_CALLSTATE</a>, <a href="cnstant_6ovn.htm">LINEPARKMODE_ Constants</a>, <a href="func1_4964.htm"><b>TSPI_lineCloseCall</b></a>, <a href="func3_4a23.htm"><b>TSPI_lineUnpark</b></a>, <a href="struc2_7egi.htm"><b>VARSTRING</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
