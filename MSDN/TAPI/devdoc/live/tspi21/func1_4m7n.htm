<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TSPI_lineGenerateDigits</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_tspi_linegeneratedigits"></a>TSPI_lineGenerateDigits</h1>
<p>
The <b>TSPI_lineGenerateDigits</b> function initiates the generation of the specified digits on the specified call as in-band tones using the specified signaling mode. Invoking this function while digit or tone generation is in progress aborts the current digit or tone generation. Passing a NULL value for <i>lpsDigits</i> generates no new digits. </p>
<p>
<b>Note</b>&nbsp;&nbsp;Only one inband generation request at a time (tone generation or digit generation) can be in progress per call.</p>
<pre><code><b>LONG TSPI_lineGenerateDigits(
  HDRVCALL</b><i> hdCall</i><b>,    </b>
<b>  DWORD</b><i> dwEndToEndID</i><b>, </b>
<b>  DWORD</b><i> dwDigitMode</i><b>,  </b>
<b>  LPCWSTR</b><i> lpszDigits</i><b>, </b>
<b>  DWORD</b><i> dwDuration    </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hdCall</i></dt>
<dd>
The handle to the call on which digit generation is to be done.</dd>
<dt>
<i>dwEndToEndID</i></dt>
<dd>
This unique request identifier should be stored by the service provider and passed back as <i>dwParam2</i> to the <a href="func3_7q7o.htm"><b>LINEEVENT</b></a> procedure when the digit generation is completed.</dd>
<dt>
<i>dwDigitMode</i></dt>
<dd>
The format to be used for signaling these digits. This parameter is allowed to have only one of the following LINEDIGITMODE_ constants set: 
<dl>
<dt>
LINEDIGITMODE_PULSE </dt>
<dd>
Use pulse/rotary for digit signaling. Valid digits for pulse mode are '0' through '9', '!', and ',' (comma). The '!' indicates a "hookflash" operation. </dd>
<dt>
LINEDIGITMODE_DTMF </dt>
<dd>
Use DTMF tones for digit signaling. Valid digits for DTMF mode are '0' through '9', 'A', 'B', 'C', 'D', '*', '#', '!', and ',' (comma). The '!' indicates a "hookflash" operation. </dd>
</dl>
</dd>
<dt>
<i>lpszDigits</i></dt>
<dd>
A pointer to a NULL-terminated character buffer that contains the digits to be generated. A comma injects an extra delay between the signaling of the previous and next digits it separates. The duration of this pause is configuration defined. The line's device capabilities indicate what this duration is. Multiple commas can be used to inject longer pauses. Invalid digits are ignored during the generation, rather than being reported as an error.</dd>
<dt>
<i>dwDuration</i></dt>
<dd>
Specifies both the duration in milliseconds of DTMF digits and pulse and DTMF inter-digit spacing. A value of 0 uses a default value. The <i>dwDuration</i> parameter must be within the range specified by <b>MinDialParams</b> to <b>MaxDialParams</b> in <a href="struc2_0j1u.htm"><b>LINEDEVCAPS</b></a>. If out of range, the actual value is set by the service provider to the nearest value in the range. This parameter is not validated by TAPI when this function is called.
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if the function succeeds or an error number if an error occurs. Possible return values are as follows: </p>
<p>
LINEERR_INVALCALLHANDLE, LINEERR_NOMEM, LINEERR_INVALCALLSTATE, LINEERR_OPERATIONUNAVAIL, LINEERR_INVALDIGITMODE, LINEERR_OPERATIONFAILED, LINEERR_RESOURCEUNAVAIL, LINEERR_RESOURCEUNAVAIL. </p>
<h4>Remarks</h4>
<p>
The call state of <i>hdCall</i> can be any state.</p>
<p>
The <b>TSPI_lineGenerateDigits</b> function is considered to have completed successfully when the digit generation is successfully initiated; not when all digits are generated.</p>
<p>
After all digits in <i>lpsDigits</i> are generated, or after digit generation is aborted or canceled, a <a href="messgs_90it.htm">LINE_GENERATE</a> message is sent to TAPI.</p>
<p>
<b>Note</b>&nbsp;&nbsp;Only one inband generation request (tone generation or digit generation) is allowed to be in progress per call. This implies that if digit generation is currently in progress on a call, invoking either <b>TSPI_lineGenerateDigits</b> or <a href="func1_9ftx.htm"><b>TSPI_lineGenerateTone</b></a> cancels the digit generation. The service provider must terminate any digit generation in progress when a subsequent <b>TSPI_lineGenerateDigits</b> or <b>TSPI_lineGenerateTone</b> is invoked. Invoking <b>TSPI_lineGenerateDigits</b> with <i>lpszDigits</i> set to NULL cancels any current digit (or tone) generation.</p>
<p>
The corresponding function at the TAPI level does not include the formal parameter <i>dwEndToEndID</i>. At that level, there is no end-to-end marking. TAPI uses end-to-end marking at the TSPI level to disambiguate one <b>TSPI_lineGenerateDigits</b> request from another.</p>
<h4>See Also</h4>
<p>
<a href="messgs_90it.htm">LINE_GENERATE</a>, <a href="struc2_0j1u.htm"><b>LINEDEVCAPS</b></a>, <a href="cnstant_8m7n.htm">LINEDIGITMODE_ Constants</a>, <a href="func3_7q7o.htm"><b>LINEEVENT</b></a>, <a href="func1_9ftx.htm"><b>TSPI_lineGenerateTone</b></a></p>
<p>&nbsp;</p></body>
</HTML>
