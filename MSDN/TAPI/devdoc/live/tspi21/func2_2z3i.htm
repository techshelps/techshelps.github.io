<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>TSPI_lineSetDefaultMediaDetection</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_tspi_linesetdefaultmediadetection"></a>TSPI_lineSetDefaultMediaDetection</h1>
<p>
The <b>TSPI_lineSetDefaultMediaDetection</b> procedure tells the service provider the new set of media modes to detect for the indicated line (replacing any previous set). It also sets the initial set of media modes that should be monitored for on subsequent calls (inbound or outbound) on this line.</p>
<pre><code><b>LONG TSPI_lineSetDefaultMediaDetection(
  HDRVLINE</b><i> hdLine</i><b>,    </b>
<b>  DWORD</b><i> dwMediaModes  </i>
<b>);</b>
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>hdLine</i></dt>
<dd>
The handle to the line to have media monitoring set.</dd>
<dt>
<i>dwMediaModes</i></dt>
<dd>
The media mode(s) of interest to TAPI. This parameter uses the following LINEMEDIAMODE_ constants: 
<dl>
<dt>
LINEMEDIAMODE_UNKNOWN </dt>
<dd>
TAPI can handle calls of unknown media type (unclassified calls). </dd>
<dt>
LINEMEDIAMODE_INTERACTIVEVOICE </dt>
<dd>
TAPI can handle calls of the interactive voice media type. That is, it manages live voice calls. </dd>
<dt>
LINEMEDIAMODE_AUTOMATEDVOICE </dt>
<dd>
TAPI can handle calls in which there is voice data managed by an automated application. In cases where the service provider does not distinguish between automated or interactive voice, this is treated the same as interactive voice. </dd>
<dt>
LINEMEDIAMODE_DATAMODEM </dt>
<dd>
TAPI can handle calls with the data modem media mode. </dd>
<dt>
LINEMEDIAMODE_G3FAX </dt>
<dd>
TAPI can handle calls of the group 3 fax media type. </dd>
<dt>
LINEMEDIAMODE_TDD </dt>
<dd>
TAPI can handle calls with the TDD (Telephony Devices for the Deaf) media mode. </dd>
<dt>
LINEMEDIAMODE_G4FAX </dt>
<dd>
TAPI can handle calls of the group 4 fax media type. </dd>
<dt>
LINEMEDIAMODE_DIGITALDATA </dt>
<dd>
TAPI can handle calls of the digital data media type. </dd>
<dt>
LINEMEDIAMODE_TELETEX </dt>
<dd>
TAPI can handle calls with the teletex media mode. </dd>
<dt>
LINEMEDIAMODE_VIDEOTEX </dt>
<dd>
TAPI can handle calls with the videotex media mode. </dd>
<dt>
LINEMEDIAMODE_TELEX </dt>
<dd>
TAPI can handle calls with the telex media mode. </dd>
<dt>
LINEMEDIAMODE_MIXED </dt>
<dd>
TAPI can handle calls with the ISDN mixed media mode. </dd>
<dt>
LINEMEDIAMODE_ADSI </dt>
<dd>
TAPI can handle calls with the ADSI (Analog Display Services Interface) media mode. </dd>
<dt>
LINEMEDIAMODE_VOICEVIEW </dt>
<dd>
The media mode of the call is VoiceView. 
</dd>
</dl>
</dd>
</dl>
<h4>Return Values</h4>
<p>
Returns zero if the function succeeds, or an error number if an error occurs. Possible return values are as follows: </p>
<p>
LINEERR_INVALLINEHANDLE, LINEERR_OPERATIONFAILED, LINEERR_INVALMEDIAMODE, LINEERR_RESOURCEUNAVAIL, LINEERR_NOMEM, LINEERR_NODRIVER, LINEERR_OPERATIONUNAVAIL. </p>
<h4>Remarks</h4>
<p>
TAPI typically calls this function to update the set of detected media modes for the line to the union of all modes selected by all outstanding lineOpens whenever a line is Opened or Closed at the TAPI level. A <b>lineOpen</b> call attempt is rejected if media detection is rejected. A single call to this procedure is typically the result of a <b>lineOpen</b> call that does not specify the device identifier LINEMAPPER. The device identifier LINEMAPPER is never used at the TSPI level.</p>
<p>
TAPI must compute the union of media modes desired by all clients and pass the result to this function. The service provider uses the set passed to this function by TAPI. TAPI ensures that the <i>dwMediaModes</i> parameter has at least one bit set and that no reserved bits are set. The service provider must perform any further validity checks on the media modes, such as checking whether any media modes are indeed supported by the service provider. The union of all media modes can be the value 0 if the applications that have the line open are all either monitors or not interested in handling incoming calls.</p>
<p>
There is no directly corresponding function at the TAPI level. This procedure corresponds to the "request media modes" implied for the specific line by the <b>lineOpen</b> procedure when it is called with the specific device identifier (other than LINEMAPPER).</p>
<h4>See Also</h4>
<p>
<a href="struc1_8d82.htm"><b>LINECALLPARAMS</b></a>,<b> </b><a href="cnstant_4cxf.htm">LINEMEDIAMODE_ Constants</a>, <a href="func1_2mxx.htm"><b>TSPI_lineClose</b></a></p>
<p>&nbsp;</p></body>
</HTML>
