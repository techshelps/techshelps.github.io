<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>LINE_MONITORTONE</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_tspi_line_monitortone"></a>LINE_MONITORTONE</h1>
<p>
The LINE_MONITORTONE message is sent to the <a href="func3_7q7o.htm"><b>LINEEVENT</b></a> callback function whenever a monitored tone is detected. The sending of this message is controlled by the <a href="func2_4jar.htm"><b>TSPI_lineMonitorTones</b></a> function. A single tone detection can result in the service provider sending this message several times in the case where the detected tone matches several tone descriptions in several different tone lists. A tone can "match" several nonidentical tone descriptions, depending on how close they are to one another and the discrimination limits achieved by the service provider. Multiple matches can occur within the same or different tone lists.</p>
<pre><code>LINE_MONITORTONE
htLine = (HTAPILINE) hLineDevice;
htCall = (HTAPICALL) hCallDevice;
dwMsg = (DWORD) LINE_MONITORTONE;
dwParam1 = (DWORD) dwAppSpecific;
dwParam2 = (DWORD) dwToneListID;
dwParam3 = (DWORD) dwTickCount;
 </code></pre>
<h4>Parameters</h4>
<dl>
<dt>
<i>htLine</i></dt>
<dd>
The TAPI opaque object handle to the line device.</dd>
<dt>
<i>htCall</i></dt>
<dd>
The TAPI opaque object handle to the call device.</dd>
<dt>
<i>dwMsg</i></dt>
<dd>
The value LINE_MONITORTONE.</dd>
<dt>
<i>dwParam1</i></dt>
<dd>
The application-specific member <b>dwAppSpecific</b> of the <a href="struc2_178y.htm"><b>LINEMONITORTONE</b></a> structure for the tone that was detected.</dd>
<dt>
<i>dwParam2</i></dt>
<dd>
The <b>dwToneListID</b> member of the tone list containing a matching tone description.</dd>
<dt>
<i>dwParam3</i></dt>
<dd>
Service providers insert into <i>dwParam3</i> the "tick count" (number of milliseconds since Windows started), obtained from <b>GetTickCount</b>, at which the tone was detected.
</dd>
</dl>
<h4>Remarks</h4>
<p>
This message is sent once for each tone it matches in each tone list. Because there can be multiple matches both within a single tone list and across multiple tone lists, a single tone detection can result in several messages, indicating the same <b>dwToneListID</b> and several messages with a differing <b>dwToneListID</b>.</p>
<p>
The <i>dwParam2</i> parameter in the corresponding message at the TAPI level is unused. TAPI forwards all tone monitoring requests from all applications to the service provider to be handled concurrently. It assigns a unique <b>dwToneListID</b> to each tone list and uses the <b>dwToneListID</b> added to <i>dwParam2</i> at the TAPI level to discriminate the resulting messages.</p>
<h4>See Also</h4>
<p>
<a href="func3_7q7o.htm"><b>LINEEVENT</b></a>, <a href="struc2_178y.htm"><b>LINEMONITORTONE</b></a>, <a href="func2_4jar.htm"><b>TSPI_lineMonitorTones</b></a> </p>
<p>&nbsp;</p></body>
</HTML>
