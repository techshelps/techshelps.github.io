<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>CPICSR.H</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>
<h2><a name="_code_context5107"></a>CPICSR.H</h2>
<pre><code>/* cpicsr.h */ <br>/* (C) COPYRIGHT DATA CONNECTION LIMITED 1993 */ <br> <br>/*****************************************************************************/ <br>/* Change History                                                            */ <br>/*                                                                           */ <br>/*       30/06/93 NGR Created.                                               */ <br>/*****************************************************************************/ <br> <br>/* Global variables */ <br> <br>BOOL TPDead; <br>BOOL FirstConv; <br>CM_INT32 return_code; <br>CM_INT32 request_to_send_received; <br>int last_verb; <br>char * DataPtr; <br>unsigned short ConvCount; <br>unsigned char conversation_ID[8]; <br>HWND hWndMain; <br>unsigned short ASYNC_COMPLETE; <br>char title[30]={'\0'}; <br>typedef DWORD RESULT; <br>RESULT ConvStarted; <br>RESULT * ResultPtr; <br>RESULT * ResultBuf; <br> <br>#ifdef CPICSEND <br>char datach; <br>unsigned short SendCount; <br>unsigned short ConfirmCount; <br>#else <br>CM_INT32 status_received; <br>CM_INT32 data_received; <br>CM_INT32 received_length; <br>BOOL Deallocated; <br>#endif <br> <br>/* Config parameters */ <br> <br>CM_INT32 SendSize; <br>unsigned short NumConversations; <br>BOOL wait_mode; <br>BOOL blocking; <br>char FileName[60]; <br>#ifdef CPICSEND <br>char SymDestName[9]; <br>unsigned short NumSends; <br>unsigned short ConfirmEvery; <br>#else <br>char LocalTPName[64]; <br>#endif <br> <br>/* Function prototypes */ <br> <br>int PASCAL WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, <br>                   LPSTR lpCmdLine, int nCmdShow); <br>BOOL InitialiseWinMain(HINSTANCE hInstance); <br>LONG FAR PASCAL TPWndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam); <br>void InitialiseMain(void); <br>void IssueNextVerb(void); <br>void ProcessReturns(void); <br>void ReadConfig(void); <br>void NewConversation(void); <br>int ReadString(char * lpValueName, char * lpData, int maxlen); <br>void PadString(char * string, int length); <br>void OutputResults(void); <br>void Build_TP_ENDED(void); <br>void GenerateData(void); <br>void Do_cminit(void); <br>void Do_cmallc(void); <br>void Do_cmsend(void); <br>void Do_cmrcv(void); <br>void Do_cmcfm(void); <br>void Do_cmcfmd(void); <br>void Do_cmdeal(void); <br>void Do_cmaccp(void); <br> <br> <br>/* Macros */ <br>#define C_INIT 1 <br>#define C_ALLC 2 <br>#define C_SEND 3 <br>#define C_CFM  4 <br>#define C_RCV  5 <br>#define C_ACCP 6 <br>#define C_CFMD 7 <br>#define C_DEAL 8 <br> <br>#ifdef CPICSEND <br>#define OUTPUTNUMBER sprintf(title,"CPI-C Send TP %d",ConvCount); \ <br>                     SetWindowText(hWndMain,title); <br>#else <br>#define OUTPUTNUMBER sprintf(title,"CPI-C Receive TP %d",ConvCount); \ <br>                     SetWindowText(hWndMain,title); <br>#endif <br></code></pre>
<p>&nbsp;</p></body>
</HTML>
