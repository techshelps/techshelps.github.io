<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>AREMOTE.H</title>
<link disabled rel=stylesheet href=../../../../../backsdk3.css>
<style type="text/css">
@import url(../../../../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>
<h2><a name="_code_context5096"></a>AREMOTE.H</h2>
<pre><code>#define REMOTE_SERVER       1 <br>#define REMOTE_CLIENT       2 <br>#define REMOTE_INIT_MSGTEXT("APPC Remote") <br> <br>// commands for the remote server begin with this <br>#define COMMANDCHAR         TEXT('@') <br>#define CTRLC               3 <br> <br>#define CLIENT_ATTR         FOREGROUND_INTENSITY|FOREGROUND_GREEN|FOREGROUND_RED|BACKGROUND_BLUE <br>#define SERVER_ATTR         FOREGROUND_INTENSITY|FOREGROUND_GREEN|FOREGROUND_BLUE|BACKGROUND_RED <br> <br>// <br>//Some General purpose Macros <br>// <br>#define MINIMUM(x,y)          ((x)&gt;(y)?(y):(x)) <br>#define MAXIMUM(x,y)          ((x)&gt;(y)?(x):(y)) <br> <br>// All because printf does not work <br>// with NT IO redirection <br>#define WRITEF(wsprintfargs) \ <br>{                                                  \ <br>HANDLE h = GetStdHandle(STD_OUTPUT_HANDLE);       \ <br>wchar_tVBuff[256];                                \ <br>DWORD  tmp;                                       \ <br>    wsprintf wsprintfargs;\ <br>    WriteConsole(h, VBuff, lstrlen(VBuff), &amp;tmp, NULL);\ <br>} <br>   <br>#define HOSTNAMELEN         16 <br> <br>#define CHARS_PER_LINE      80 <br> <br>// magic number is version number is 00yyyymm (yyyy = year, mm = month) <br>#define MAGICNUMBER     0x00199406 <br>#define BEGINMARK       '\xfe' <br>#define ENDMARK         '\xff' <br>#define LINESTOSEND     200 <br> <br>#define MAX_SESSION     10 <br> <br>typedef struct <br>{ <br>    DWORD    MagicNumber;// version of client software <br>    TCHAR    ClientName[HOSTNAMELEN];// name of client machine <br>    DWORD    LinesToSend;// lines to send on startup <br>    DWORD    Flag;// optional flags <br>}   SESSION_STARTUPINFO; <br> <br>typedef struct <br>{ <br>    DWORD MagicNumber; // New Remote <br>    DWORD FileSize;         // Num bytes sent <br>}   SESSION_STARTREPLY; <br> <br>typedef struct <br>{ <br>    TCHAR    Name[HOSTNAMELEN];     //Name of client Machine; <br>    BOOL    Active;         //Client at the other end connected <br>    BOOL    CommandRcvd;    //True if a command recieved <br>    BOOL    SendOutput;     //True if Sendoutput output <br>tpconvid_t tpconv;//TP and conversation IDs for client's APPC connection <br>    HANDLE  rSaveFile;      //Sessions read handle to SaveFile <br>    HANDLE  hThread;        //Session Thread <br>    HANDLE  MoreData;       //Event handle set if data available to be read <br>HANDLEDoClose;//Event saying that this session should close <br>} SESSION_TYPE; <br> <br> <br> <br>VOID Server(TCHAR *ChildCmd, TCHAR *PipeName); <br> <br>VOID Client(TCHAR *local_lu, TCHAR *server_lu, TCHAR *tp_name, TCHAR *loc_tp_name, TCHAR *mode_name); <br> <br>VOID ErrorExit(TCHAR* str); <br> <br>VOID DisplayClientHlp(); <br> <br>VOID DisplayServerHlp(); <br> <br>ULONG DbgPrint(PCH Format, ...); <br> <br>// Timeout is ignored for now <br>DWORD ReadFixBytes(HANDLE hRead, TCHAR *Buffer, DWORD ToRead, DWORD  TimeOut); <br> <br>VOID Errormsg(TCHAR* str); <br> <br>externTCHAR   HostName[]; <br>externTCHAR   *ChildCmd; <br>externDWORD  ClientToServerFlag; <br>externDWORDLinesToSend; <br>externTCHAR*UserName; </code></pre>
<p>&nbsp;</p></body>
</HTML>
