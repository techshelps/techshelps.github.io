<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>About com.ms.io.clientstorage</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">
</HEAD>
<BODY BGCOLOR="White" TOPMARGIN=0 LEFTMARGIN=0 VLINK="#006699" ALINK="#006699">
<A NAME="top"></A>
<!--TOOLBAR_START-->
<!--TOOLBAR_END-->

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="98%">
<TR>
<TD ROWSPAN=2 WIDTH=114 ALIGN="LEFT" VALIGN="TOP">
<IMG SRC="art/title_x3.gif" WIDTH="112" HEIGHT="108"  BORDER=0 ALT="Packages"><TABLE CELLPADDING=0 CELLSPACING=0 BORDER=0 WIDTH="100%">
<TR><TD WIDTH=10>&nbsp;</TD><TD VALIGN="top"><FONT FACE="Verdana,Arial,Helvetica" SIZE=1><B STYLE="color:#006699">In this topic</B><P><IMG SRC="art/linkbull.gif" WIDTH="10" HEIGHT="8"  BORDER=0 ALT="*"><A STYLE="color: #333366;text-decoration:none" HREF="def_ics.htm#commsioclientstorage_ovr_0003000a01010000">Overview of Classes</A>
<P><IMG SRC="art/linkbull.gif" WIDTH="10" HEIGHT="8"  BORDER=0 ALT="*"><A STYLE="color: #333366;text-decoration:none" HREF="def_ics.htm#commsioclientstorage_ovr_0003000a01020000">Example</A>
<P><IMG SRC="art/linkbull.gif" WIDTH="10" HEIGHT="8"  BORDER=0 ALT="*"><A STYLE="color: #333366;text-decoration:none" HREF="def_ics.htm#commsioclientstorage_0003000a01030000">Classes</A>
<P><IMG SRC="art/linkbull.gif" WIDTH="10" HEIGHT="8"  BORDER=0 ALT="*"><A STYLE="color: #333366;text-decoration:none" HREF="def_ics.htm#commsioclientstorage_0003000a01040000">Hierarchy</A>
</FONT></TD></TR></TABLE>
</TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="LEFT" VALIGN="TOP">
<P>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR>
<TD WIDTH="355" VALIGN="bottom"><IMG SRC="art/package2.gif" WIDTH="355" HEIGHT="27"  BORDER=0 ALT="Packages"></TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="center" VALIGN="bottom"><A HREF="def_pack.htm"><IMG SRC="art/homenrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="Packages"></A></TD><TD ALIGN="center" VALIGN="bottom"><A HREF="ClientStorageManager.htm"><IMG SRC="art/nextnrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="Next"></A></TD></TR>
<TR>
<TD WIDTH="355" ALIGN="right" VALIGN="top"><FONT COLOR="#006699" SIZE="4" FACE="VERDANA,ARIAL,HELVETICA"><B>Package com.ms.io.clientstorage</B></FONT></TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">Packages</FONT></TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">Next</FONT></TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD WIDTH=20>&nbsp;</TD>
<TD>
<BR>
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<BR><BR><H2 STYLE="color:#333366">About com.ms.io.clientstorage</H2>
<P>The <A HREF="def_ics.htm">com.ms.io.clientstorage</A> package contains classes that manage and enforce storage limitations for principals. The three classes in this package work together to keep track of the available storage, allocate storage, and allow information about the files to be retrieved. 
These classes can be used to allocate scratch space for an applet on the client's computer. 

<P>Scratch space is unshared persistent storage that is available only to the signer of the applet that created the storage. If an applet is unsigned, it can obtain and use scratch space if it runs from the class path or from a fully trusted zone. The amount of scratch space and its location on the client computer is managed by the Microsoft Win32 VM for Java so that it cannot be used maliciously. Scratch space is sometimes used to store configuration information for applets that are re-used. 

<H3 STYLE="color:#333366"><A NAME="commsioclientstorage_ovr_0003000a01010000">Overview of Classes</A></H3><P>The <A HREF="ClientStorageManager.htm">ClientStorageManager</A> class keeps track of all client stores. You can use the <B>ClientStorageManager</B> class to obtain the store for a specified principal, open a shared store, or get the store for the currently executing principal. You can open a file for reading or writing with a specified type of accessibility. This is the class that you use to obtain scratch space for your applet.

<P>The <A HREF="ClientStore.htm">ClientStore</A> class provides access to individual client stores and enforces storage limitations. This class includes methods that allow you to delete a file, create directories, rename a file, get the length of a file, list the files in a directory, and determine whether a file exists. You can also use the <B>ClientStore</B> class to open a file for reading or writing (as you can with the <A HREF="ClientStorageManager.htm">ClientStorageManager</A> class).
The methods in this class allow you to create files and directories and obtain other information about files within your applet's scratch space.

<P>The <A HREF="ClientStoreFile.htm">ClientStoreFile</A> class manages individual files within client stores. Using the methods in this class, you can delete a file, rename it, make a directory for it, determine whether you can read from the file, get the absolute or canonical path for the file, and retrieve other information about a file. This class provides methods for manipulating an individual file within your applet's scratch space.
 
<P>The following table describes the accessibility flags used to open files in the <A HREF="def_ics.htm">com.ms.io.clientstorage</A> package. 
<P>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Flag Name </B></FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Accessibility Type 
</B></FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020009">STORE_FL_ROAMING</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The file is accessible to the user from any computer.
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020008">STORE_FL_LOCAL</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The file is found in a computer-specific local storage area. 
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020006">OPEN_FL_SHARED</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The file is accessible to the user and to other authorized principals.
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020004">OPEN_FL_APPEND</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">When writing to a file, append to the file if it exists; otherwise, open a new file for writing.
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020005">OPEN_FL_EXPENDABLE</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">When the storage area is full, the file is automatically deleted if the deletion will help satisfy a new request. 
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="ClientStore.htm#com_0003000a03020007">OPEN_FL_WRITABLE</A> </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The file is opened with write access. 
</FONT></TD>
</TR>
</TABLE>
<H3 STYLE="color:#333366"><A NAME="commsioclientstorage_ovr_0003000a01020000">Example</A></H3><P>The following example uses the <A HREF="def_ics.htm">com.ms.io.clientstorage</A> package to create a client store (scratch space) for an applet, write to a file called myFile.txt, and print a list of files in the current directory.

<PRE><FONT FACE="Courier" SIZE="2">
import com.ms.io.clientstorage.*;
import java.io.OutputStream;
import java.io.IOException;
import java.applet.*;

public class MySample extends Applet{
&#009;
  public void outputToScratch() throws IOException {
 &#009;
    ClientStore s = ClientStorageManager.getStore(); 
&#009;&#009;&#009;&#009;&#009;&#009;&#009;&#009;&#009; &#009;&#009;
    s.createDirectory("myDirectory"); 

    ClientStoreFile oneFile = 
       new ClientStoreFile(s,"MyFile.txt");

    long x = oneFile.length();

    OutputStream stream1 = oneFile.openOutputStream(); 
    &#009;
    byte buffer1[] = {1,2,3,4,5};                  
    stream1.write(buffer1);
    stream1.close();

    OutputStream appendStream = s.openWritable("myFile.txt",true);
    byte buffer2[] = {11,12,13,14,15}; 
    appendStream.write(buffer2);
    appendStream.close();
&#009;                                     
    String fileList[] = s.listFiles(".", ClientStore.LIST_FL_RECURSE);  
    for (int i = 0; i &lt; fileList.length; i++)  {
       System.out.println(fileList[i]);                                    
    }

    s.deleteFile("secondFile.txt");
  }
}
</FONT></PRE>
<P>After compiling the MySample applet, you would place the compiled file into a cabinet file. You would then sign the file using the signcode tool, specifying a level of security that permits access to client storage. 



<H3 STYLE="color:#333366"><A NAME="commsioclientstorage_0003000a01030000">Classes</A></H3><DL>
<DT><A HREF="ClientStorageManager.htm">Class ClientStorageManager</A>
 </DT><DD>This class manages the allocation of client stores.
</DD><DT><A HREF="ClientStore.htm">Class ClientStore</A>
 </DT><DD>This class helps manage client storage by enforcing storage limitations and providing access to client stores.
</DD><DT><A HREF="ClientStoreFile.htm">Class ClientStoreFile</A>
 </DT><DD>This class manages and provides access to individual files within client stores.

</DD></DL>
<H3 STYLE="color:#333366"><A NAME="commsioclientstorage_0003000a01040000">Hierarchy</A></H3><PRE><FONT FACE="Courier" SIZE="2"><B>Object</B>
  |
  +--<A HREF="ClientStorageManager.htm">ClientStorageManager</A>
  |
  +--<A HREF="ClientStore.htm">ClientStore</A>

<B>File</B>
  |
  +--<A HREF="ClientStoreFile.htm">ClientStoreFile</A>
</FONT></PRE>
<P>
</FONT>
</TD>
</TR>
</TABLE>
<CENTER>
<P><TABLE WIDTH="95%"><TR><TD HEIGHT=1 BGCOLOR="RED"></TD></TR></TABLE>
<TABLE WIDTH="100%"><TR>
<TD ALIGN="left"><A HREF="#top"><IMG SRC="art/upnrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="upnrm.gif"></A></TD>
<TD ALIGN="right">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1"><A HREF="cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of use.</A></FONT></TD></TR></TABLE>
</CENTER>
</BODY></HTML>
