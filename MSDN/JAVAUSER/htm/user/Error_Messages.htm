<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>Error Messages</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">
</HEAD>
<BODY BGCOLOR="White" TOPMARGIN=0 LEFTMARGIN=0 VLINK="#006699" ALINK="#006699">
<A NAME="top"></A>
<!--TOOLBAR_START-->
<!--TOOLBAR_END-->

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="98%">
<TR>
<TD ROWSPAN=2 WIDTH=114 ALIGN="LEFT" VALIGN="TOP">
<IMG SRC="art/title_x3.gif" WIDTH="112" HEIGHT="108"  BORDER=0 ALT="JDirect"><TABLE CELLPADDING=0 CELLSPACING=0 BORDER=0 WIDTH="100%">
<TR><TD WIDTH=10>&nbsp;</TD><TD VALIGN="top"><FONT FACE="Verdana,Arial,Helvetica" SIZE=1></FONT></TD></TR></TABLE>
</TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="LEFT" VALIGN="TOP">
<P>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR>
<TD WIDTH="365" VALIGN="bottom"><IMG SRC="art/jdirect2.gif" WIDTH="365" HEIGHT="27"  BORDER=0 ALT="JDirect"></TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="center" VALIGN="bottom">&nbsp;</TD><TD ALIGN="center" VALIGN="bottom"><A HREF="Security.htm"><IMG SRC="art/prevnrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="Previous"></A></TD><TD ALIGN="center" VALIGN="bottom"><A HREF="jdirect.htm"><IMG SRC="art/homenrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="JDirect"></A></TD><TD ALIGN="center" VALIGN="bottom"><A HREF="Troubleshooting.htm"><IMG SRC="art/nextnrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="Next"></A></TD></TR>
<TR>
<TD WIDTH="365" ALIGN="right" VALIGN="top"><FONT COLOR="#006699" SIZE="4" FACE="VERDANA,ARIAL,HELVETICA"><B>About J/Direct</B></FONT></TD>
<TD WIDTH=20>&nbsp;</TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">&nbsp;</FONT></TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">Previous</FONT></TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">JDirect</FONT></TD>
<TD ALIGN="center" VALIGN="top"><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1">Next</FONT></TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD WIDTH=20>&nbsp;</TD>
<TD>
<BR>
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<BR><BR><H2 STYLE="color:#333366">Error Messages</H2>
<P>There are several types of exceptions that might be thrown by the Microsoft Win32 VM for Java when you are using Microsoft&#174; J/Direct&#153;. For each of the following errors, possible causes and solutions are explained.
<BR><BR>
<P><A HREF="Error_Messages.htm#jdirect_000700020d000001">java.lang.SecurityException [class.method]: Only fully trusted classes can have native methods as members.</A>
<BR><BR>
<P><A HREF="Error_Messages.htm#jdirect_000700020d000002">java.lang.IllegalAccessError: Class has been marked as nonpublic to untrusted code.</A>
<BR><BR>
<P><A HREF="Error_Messages.htm#jdirect_000700020d000003">java.lang.SecurityException: J/Direct method has not been authorized for use on behalf of an untrusted caller.</A>
<BR><BR>
<P><A HREF="Error_Messages.htm#jdirect_000700020d000004">java.lang.NoClassDefFoundError</A>
<BR><BR>
<P><A HREF="Error_Messages.htm#jdirect_000700020d000005">com.ms.security.SecurityExceptionEx: [host] J/Direct method has not been authorized for use on behalf of an untrusted caller.</A>
<BR><BR><BR><BR>

<P><B><A NAME="jdirect_000700020d000001">java.lang.SecurityException [class.method]: Only fully trusted classes can have native methods as members.</A></B>
<P><TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Exception Class 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>java.lang.SecurityException</B>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Message 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">class.method: Only fully trusted classes can have native methods as members. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Causes 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">The <I>native</I> keyword has been used on a method that is a member of a class that is not loaded with full permissions (for example, an unsigned applet). This exception is thrown only if an attempt is made to invoke the native method.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Solutions 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Digitally sign your applet requesting full permissions. For more information on signing applets, see the article on <A href="signcode.htm">Signing a Cabinet File with Java Permissions Using Signcode</A>. 
</FONT></TD></TR></TABLE>
<P><BR><BR>

<P><B><A NAME="jdirect_000700020d000002">java.lang.IllegalAccessError: Class has been marked as nonpublic to untrusted code.</A></B>
<P><TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Exception Class 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>java.lang.IllegalAccessError</B>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Message 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Class has been marked as nonpublic to untrusted code. 
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Causes 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">An untrusted class has attempted to refer to a field or method of another class that has been marked for trusted use only. Many of the system classes in the <A HREF="def_pcom.htm">com.ms.com</A> and <A HREF="def_pdll.htm">com.ms.dll</A> packages have been marked this way. A class can be marked as nonpublic to untrusted code using the <B>@security</B> directive in the following way:
<PRE><FONT FACE="Courier" SIZE="2">
  /** @security(checkClassLinking=on) */
  public class ForTrustedUseOnly{
   ...
  }
</FONT></PRE>
<P>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Solutions 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Digitally sign your applet requesting full permissions. For more information on signing applets, see the article on <A href="signcode.htm">Signing a Cabinet File with Java Permissions Using Signcode</A>. 
</FONT></TD></TR></TABLE>
<P><BR><BR>

<P><B><A NAME="jdirect_000700020d000003">java.lang.SecurityException: J/Direct method has not been authorized for use on behalf of an untrusted caller.</A></B>
<P><TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Exception Class 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>java.lang.SecurityException</B>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Message 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">J/Direct method has not been authorized for use on behalf of an untrusted caller.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Causes 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">An untrusted class has invoked a trusted method that attempts to make a J/Direct call. Even if the class making the actual J/Direct call is trusted, the security manager will throw a <B>SecurityException</B> if any of the methods in the call stack belong to an untrusted class.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Solutions
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Digitally sign your applet requesting full permissions. For more information on signing applets, see the article on <A href="signcode.htm">Signing a Cabinet File with Java Permissions Using Signcode</A>. Or, you could disable the security check by marking the class that attempts the J/Direct call with the <B>@security</B> directive, as shown in the following example.

<PRE><FONT FACE="Courier" SIZE="2">
  /** @security(checkDllCalls=off) */
  public class SafeDllCalls{
   ...
  }
</FONT></PRE>
<P><B>Note: </B>Disabling this security check transfers responsibility for security from the Microsoft VM for Java to you. Remember that even with this security check disabled, you will still have to digitally sign the class for maximum trust. If you use the <B>@security</B> directive, you should ensure that the following statements are true.
<UL><LI>All J/Direct methods are declared private.
<LI>Your class exposes only the functionality needed by the client.
<LI>Your class guards all access to these capabilities with appropriate security checks.
</UL>
</FONT></TD></TR></TABLE>
<P><BR><BR>

<P><B><A NAME="jdirect_000700020d000004">java.lang.NoClassDefFoundError</A></B>
<P><TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Exception Class 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>java.lang.NoClassDefFoundError</B>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Message 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">None.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Causes 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">An untrusted class has attempted to load either a class marked with <B>@dll.struct</B> or a class generated using the jactivex tool. Although this is really a security violation (not a class loader error), a <B>NoClassDefFoundError</B> is thrown for backwards compatibility purposes.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Solutions
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Digitally sign your applet requesting full permissions. For more information on signing applets, see the article on <A href="signcode.htm">Signing a Cabinet File with Java Permissions Using Signcode</A>. 
</FONT></TD></TR></TABLE>
<P><BR><BR>

<P><B><A NAME="jdirect_000700020d000005">com.ms.security.SecurityExceptionEx: [host] J/Direct method has not been authorized for use on behalf of an untrusted caller.</A></B> 
<P><TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Exception Class
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="SecurityExceptionEx.htm">com.ms.security.SecurityExceptionEx</A>
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Message
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">[host] J/Direct method has not been authorized for use on behalf of an untrusted caller.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Causes
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">A J/Direct call was attempted from the <B>init</B>, <B>start</B>, <B>stop</B>, or <B>destroy</B> method of an applet. To make J/Direct calls during these methods, the applet must assert permissions even if the applet has been signed.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Possible Solutions
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Execute the following code to assert permissions.
<PRE><FONT FACE="Courier" SIZE="2">
  import com.ms.security.*;
    ...
  PolicyEngine.assertPermission(PermissionID.SYSTEM);
</FONT></PRE>
</FONT></TD></TR></TABLE>
<P><BR><BR>

<P>
</FONT>
</TD>
</TR>
</TABLE>
<CENTER>
<P><TABLE WIDTH="95%"><TR><TD HEIGHT=1 BGCOLOR="RED"></TD></TR></TABLE>
<TABLE WIDTH="100%"><TR>
<TD ALIGN="left"><A HREF="#top"><IMG SRC="art/upnrm.gif" WIDTH="51" HEIGHT="38"  BORDER=0 ALT="Top"></A></TD>
<TD ALIGN="right">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="1"><A HREF="cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of use.</A></FONT></TD></TR></TABLE>
</CENTER>
</BODY></HTML>
