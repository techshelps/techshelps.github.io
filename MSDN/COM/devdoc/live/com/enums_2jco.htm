<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML dir=ltr>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>RPC_C_IMP_LEVEL_xxx</title>
<link disabled rel=stylesheet href=../../backsdk3.css>
<style type="text/css">
@import url(../../backsdk4.css);
</style>
</HEAD>
<BODY BGCOLOR = #FFFFFF TEXT = #000000>

<h1><a name="_com_rpc_c_imp_level_xxx"></a>RPC_C_IMP<i>_</i>LEVEL_<i>xxx</i></h1>
<p>
<span style=color:#FF0000>[This is preliminary documentation and subject to change.]</span> </p>
<p>
Used in the security functions and interfaces to specify the impersonation level.</p>
<h4>Values</h4>
<dl>
<dt>
RPC_C_IMP_LEVEL_DEFAULT</dt>
<dd>
Tells DCOM to choose the impersonation level by using its normal security blanket negotiation algorithm. This value can be used with Windows NT 5.0 and later versions. For more information, see <a href="comext_2wtq.htm"><b>Security Blanket Negotiation</b></a>.</dd>
<dt>
RPC_C_IMP_LEVEL_ANONYMOUS</dt>
<dd>
(Not supported in this release.) The client is anonymous to the server. The server process can impersonate the client, but the impersonation token will not contain any information and cannot be used for anything.</dd>
<dt>
RPC_C_IMP_LEVEL_IDENTIFY</dt>
<dd>
The server can obtain the client's identity. The server can impersonate the client for ACL checking, but cannot access system objects as the client. 

<p>
<b>Note</b>&nbsp;&nbsp;<b>GetUserName</b> will fail while impersonating at identify level. The workaround is to impersonate, <b>OpenThreadToken</b>, revert, call <b>GetTokenInformation</b>, and finally, call <b>LookupAccountSid</b>.

</dd>
<dt>
RPC_C_IMP_LEVEL_IMPERSONATE</dt>
<dd>
The server process can impersonate the client's security context while acting on behalf of the client. This level of impersonation can be used to access local resources such as files. When impersonating at this level, the impersonation token can only be passed across one machine boundary. In order for the impersonation token to be passed, you must use <a href="comext_71lz.htm"><b>Cloaking</b></a>, which is available in Windows NT 5.0. </dd>
<dt>
RPC_C_IMP_LEVEL_DELEGATE</dt>
<dd>
Supported for Windows NT 5.0 and later versions. The server process can impersonate the client's security context while acting on behalf of the client. The server process can also make outgoing calls to other servers while acting on behalf of the client, using <a href="comext_71lz.htm"><b>Cloaking</b></a>. The server may use the client's security context on other machines to access local and remote resources as the client. When impersonating at this level, the impersonation token can be passed across any number of machine boundaries.
</dd>
</dl>
<h4>Comments</h4>
<p>
Only the RPC_C_IMP_LEVEL_IDENTIFY and RPC_C_IMP_LEVEL_IMPERSONATE levels are supported in Windows NT 4.0. In Windows NT 5.0, RPC_C_IMP_LEVEL_DELEGATE is supported as well.</p>
<p>
Using <a href="api1_9sj8.htm"><b>CoSetProxyBlanket</b></a>, the client sets the impersonation level and proxy identity that will be available when a server calls <a href="api1_6mwk.htm"><b>CoImpersonateClient</b></a>. The identity the server will see when impersonating takes place is described in <a href="comext_8xvd.htm"><b>How Cloaking Determines Client Identity</b></a>. Note that when making a call while impersonating, the callee will normally receive the caller's process token, not the caller's impersonation token. To receive the caller's impersonation token, the caller must enable cloaking. </p>
<h4>QuickInfo</h4>
<p>
&nbsp;&nbsp;<b>Windows NT:</b>  Use version 3.1 and later. <br>
&nbsp;&nbsp;<b>Windows:</b> Use Windows 95 and later. <br>
&nbsp;&nbsp;<b>Windows CE:</b>  Unsupported.<br>
&nbsp;&nbsp;<b>Header:</b> Declared in rpcdce.h.</p>
<h4>See Also</h4>
<p>
<a href="api1_8ayh.htm"><b>CoInitializeSecurity</b></a>, <a href="comext_78c3.htm"><b>Cloaking and Impersonation Levels</b></a> </p>
<p>
</p>
<p>
</p>
<p>&nbsp;</p></body>
</HTML>
