<html>
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>17.6 Rules about the Interaction of Locks and Variables</title>
<META NAME=MS-HAID CONTENT="17_6">
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></head>
<body bgcolor=#ffffff>

<h2>17.6	 Rules about the Interaction of Locks and Variables</h2>
<a name="28325"></a>
<p>
<a name="28326"></a>
Let <i>T</i><em></em> be any thread, let <i>V</i><i></i> be any variable, and let <i>L</i> be any lock. There are certain 
constraints on the actions performed by <i>T</i><em></em> with respect to <i>V</i><i></i> and <i>L</i>:
<p><ul><a name="28327"></a>
<li>Between an <i>assign</i> action by <i>T</i><em></em> on <i>V</i><i></i> and a subsequent <i>unlock</i> action by <i>T</i><em></em> on <i>L</i>, a <i>store</i> action by <i>T</i><em></em> on <i>V</i><i></i> must intervene; moreover, the <i>write</i> action corresponding to that <i>store</i> must precede the <i>unlock</i> action, as seen by main memory. (Less formally: if a thread is to perform an <i>unlock</i> action on <i>any</i> lock, it must first copy <i>all</i> assigned values in its working memory back out to main memory.)
<a name="28328"></a>
<li>Between a <i>lock</i> action by <i>T</i><em></em> on <i>L</i> and a subsequent <i>use</i> or <i>store</i> action by <i>T</i><em></em> on a variable <i>V</i><i></i>, an <i>assign</i> or <i>load</i> action on <i>V</i><i></i> must intervene; moreover, if it is a <i>load</i> action, then the <i>read</i> action corresponding to that <i>load</i> must follow the <i>lock</i> action, as seen by main memory. (Less formally: a <i>lock</i> action acts as if it flushes <i>all</i> variables from the thread's working memory; before use they must be assigned or loaded from main memory .)
</ul><p>

</body></html>
