<html>
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>17.5 Rules about Locks</title>
<META NAME=MS-HAID CONTENT="17_5">
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></head>
<body bgcolor=#ffffff>

<h2>17.5	 Rules about Locks</h2>
<a name="28320"></a>
<p>
<a name="44056"></a>
<p><i>By the pricking of my thumbs,<br>
Something wicked this way comes.<br>
Open, locks,<br>Whoever knocks!</i><br>
<a name="45493"></a>
&#151;William Shakespeare, Macbeth, Act IV, scene i</p>
<p>
<a name="28321"></a>
Let <i>T</i><em></em> be a thread and <i>L</i> be a lock. There are certain constraints on the actions performed by <i>T</i><em></em> with respect to <i>L</i>:
<p><ul><a name="28322"></a>
<li>A <i>lock</i> action by <i>T</i><em></em> on <i>L</i> may occur only if, for every thread <i>S</i><i></i> other than <i>T</i><em></em>, the number of preceding <i>unlock</i> actions by <i>S</i><i></i> on <i>L</i> equals the number of preceding <i>lock</i> actions by <i>S</i><i></i> on <i>L</i>. (Less formally: only one thread at a time is permitted to lay claim to a lock, and moreover a thread may acquire the same lock multiple times and doesn't relinquish ownership of it until a matching number of <i>unlock</i> actions have been performed.)
<a name="28763"></a>
<li>An <i>unlock</i> action by thread <i>T</i><em></em> on lock <i>L</i> may occur only if the number of preceding <i>unlock</i> actions by <i>T</i> on <i>L</i> is strictly less than the number of preceding <i>lock</i> actions by <i>T</i><em></em> on <i>L</i>. (Less formally: a thread is not permitted to unlock a lock it doesn't own.)
</ul><p><a name="28324"></a>
With respect to a lock, the <i>lock</i> and <i>unlock</i> actions performed by all the threads are performed in some total sequential order. This total order must be consistent with the total order on the actions of each thread.<p>


</body></html>
