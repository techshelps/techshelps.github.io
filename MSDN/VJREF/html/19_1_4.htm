<html>
<head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><title>19.1.4 Problem #4: Array Type versus Array Access</title>
<META NAME=MS-HAID CONTENT="19_1_4">
<style>@import url(stylesheets/msdn_ie4.css);</style>
<link disabled rel="stylesheet" href="stylesheets/msdn_ie3.css"></head>
<body bgcolor=#ffffff>

<h3>19.1.4	 Problem #4: Array Type versus Array Access</h3>
<a name="44543"></a>
<p>
<a name="44544"></a>
Consider the productions (shown after problem #1 has been corrected):
<p><pre>
<i>ArrayType:<br>
<code>	</code><i>Type</i><code> [ ]
</code></i></pre><p><a name="44546"></a>
and:
<p><pre>
<i>ArrayAccess:<br>
	Name<code> [ </code>Expression<code> ]<br>
</code>	PrimaryNoNewArray<code> [ </code>Expression<code> ]
</code></i></pre><p><a name="44548"></a>
Now consider the partial input:
<p><pre><a name="44549"></a>class Problem4 { Problem4() { peter[
</pre><p><a name="44550"></a>
When the parser is considering the token <code>peter</code>, with one-token lookahead to 
symbol <code>[</code>, it cannot yet tell whether <code>peter</code> will be part of a type name, as in:
<p><pre><a name="44551"></a>peter[] team;
</pre><p><a name="44552"></a>
or part of an array access, as in:
<p><pre><a name="44553"></a>peter[3] = 12;
</pre><p><a name="44554"></a>
Therefore, after the parser reduces <code>peter</code> to the nonterminal <i>Name</i>, it cannot tell 
with only one-token lookahead whether <i>Name</i> should be reduced ultimately to 
<i>Type</i> (for an array type) or left alone (for an array access). Therefore, the productions shown above result in a grammar that is not LALR(1).
<p><a name="44555"></a>
The solution is to have separate alternatives for <em>ArrayType</em>:<p>
<pre>
<i>ArrayType:<br>
<code>	</code>PrimitiveType<code> [ ]<br>
	</code><i>Name</i><code> [ ]<br>
	</code><i>ArrayType</i><code> [ ]
</code></i></pre><p><a name="44557"></a>
This allows the parser to reduce <code>peter</code> to <i>Name</i> and then leave it as is, delaying 
the decision as to whether an array type or array access is in progress.
<p>

</body></html>
