<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Scrolling the Screen Buffer</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="3frg79"></A><B>Scrolling the Screen Buffer</B></P>

<P>The console window displays a portion of the active screen buffer. Each screen buffer maintains its own current window rectangle that specifies the coordinates of the upper left and lower right character cells to be displayed in the console window. To determine the current window rectangle of a screen buffer, use <A HREF="h61zfu.htm"><B>GetConsoleScreenBufferInfo</B></A>. When a screen buffer is created, the upper left corner of its window is at the upper left corner of the screen buffer at (0,0). </P>

<P>The window rectangle can change to display different parts of the screen buffer. The window rectangle of a screen buffer can change in the following situations: </P>

<P>·When <A HREF="br66lz.htm"><B>SetConsoleWindowInfo</B></A> is called to specify a new window rectangle, it scrolls the view of the screen buffer by changing the position of the window rectangle without changing the size of the window. For examples of scrolling the window's contents, see <A HREF="q9pvq4.htm">Scrolling a Screen Buffer's Window</A>. </P>

<P><IMG SRC="../images/bm100.gif" ALT="" BORDER=0></P>

<P>·When using the <A HREF="g0sox_.htm"><B>WriteFile</B></A> function to write to a screen buffer with wrap at end-of-line (EOL) output mode enabled, the window rectangle shifts automatically, so the cursor is always displayed. </P>

<P>·When the <A HREF="patuu.htm"><B>SetConsoleCursorPosition</B></A> function specifies a new cursor position that is outside the boundaries of the current window rectangle, the window rectangle shifts automatically to display the cursor. </P>

<P>·When the user changes the size of the console window or uses the window's scroll bars, the window rectangle of the active screen buffer can change. This change is not reported as a window resizing event in the input buffer. </P>

<P></P>

<P>In each of these situations, the window rectangle shifts to display a different part of the screen buffer, but the contents of the screen buffer remain in the same position. The following situations can cause the screen buffer's contents to shift: </P>

<P>·When the <A HREF="0m6cbe.htm"><B>ScrollConsoleScreenBuffer</B></A> function is called, a rectangular block is copied from one part of a screen buffer to another. </P>

<P>·When using <A HREF="g0sox_.htm"><B>WriteFile</B></A> to write to a screen buffer with wrap at EOL output mode enabled, the screen buffer's contents scroll automatically when the end of the screen buffer is encountered. This scrolling discards the top row of the screen buffer. </P>

<P></P>

<P><B>ScrollConsoleScreenBuffer</B> specifies the screen buffer rectangle that is moved and the new upper left coordinates to which the rectangle is copied. This function can scroll a portion or the entire contents of the screen buffer. </P>

<P>The illustration shows a <A HREF="0m6cbe.htm"><B>ScrollConsoleScreenBuffer</B></A> operation that scrolls the entire contents of the screen buffer up by several rows. The contents of the top rows are discarded, and the bottom rows are filled with a specified character and color. </P>

<P><IMG SRC="../images/bm101.gif" ALT="" BORDER=0></P>

<P>The effects of <B>ScrollConsoleScreenBuffer</B> can be limited by specifying an optional clipping rectangle so that the contents of the screen buffer outside the clipping rectangle are unchanged. The effect of clipping is to create a subwindow (the clipping rectangle) whose contents are scrolled without affecting the rest of the screen buffer. For an example that uses <B>ScrollConsoleScreenBuffer</B>, see <A HREF="kwwuha.htm">Scrolling a Screen Buffer's Contents</A>. </P>

<P><B>Cursor Appearance and Position</B></P>

<P>A screen buffer's cursor can be visible or hidden. When it is visible, its appearance can vary, ranging from from completely filling a character cell to appearing as a horizontal line at the bottom of the cell. To retrieve information about the appearance and visibility of the cursor, use the <A HREF="lxegt2.htm"><B>GetConsoleCursorInfo</B></A> function. This function reports whether the cursor is visible and describes the appearance of the cursor as the percentage of a character cell that it fills. To set the appearance and visibility of the cursor, use the <A HREF="2q8kiw.htm"><B>SetConsoleCursorInfo</B></A> function. </P>

<P>Characters written by the high-level console I/O functions are written at the current cursor location, advancing the cursor to the next location. To determine the current cursor position in the coordinate system of a screen buffer, use <A HREF="h61zfu.htm"><B>GetConsoleScreenBufferInfo</B></A>. You can use <A HREF="patuu.htm"><B>SetConsoleCursorPosition</B></A> to set the cursor position and, thereby, control the placement of text that is written or echoed by the high-level I/O functions. If you move the cursor, text at the new cursor location is overwritten. </P>

<P>The position, appearance, and visibility of the cursor are set independently for each screen buffer. </P>

<P><B>Screen Buffer Color Attributes</B></P>

<P>Each screen buffer character cell stores the color attributes for the colors used in drawing the text and background of that cell. An application can set the color data for each character cell individually, storing the data in the <B>Attributes</B> member of the <A HREF="2xin06y.htm"><B>CHAR_INFO</B></A> structure for each cell. </P>

<P>The current text attributes of each screen buffer determine the foreground (text) and background colors of characters subsequently written or echoed by the high-level functions. An application can use <A HREF="h61zfu.htm"><B>GetConsoleScreenBufferInfo</B></A> to determine the current text attributes of a screen buffer and the <A HREF=".nbq2p.htm"><B>SetConsoleTextAttribute</B></A> function to set the text attributes. Changing a screen buffer's text attributes does not affect the display of characters previously written. These text attributes do not affect characters written by the low-level console I/O functions (such as the <A HREF="2buxzc.htm"><B>WriteConsoleOutput</B></A> or <A HREF=".04pw0.htm"><B>WriteConsoleOutputCharacter</B></A> function) which either explicitly specify the attributes for each cell that is written or leave the attributes unchanged at the written positions. </P>

<P>The following attribute constants are defined in the WINCON.H header file: </P>

<P>·FOREGROUND_BLUE </P>

<P>·FOREGROUND_GREEN </P>

<P>·FOREGROUND_RED </P>

<P>·FOREGROUND_INTENSITY </P>

<P>·BACKGROUND_BLUE </P>

<P>·BACKGROUND_GREEN </P>

<P>·BACKGROUND_RED </P>

<P>·BACKGROUND_INTENSITY </P>

<P></P>

<P>The foreground attributes specify the text color, and the background attributes specify the color used to fill the cell's background. An application can combine the constants to achieve different colors. For example, the following combination results in bright cyan text on a blue background. </P>

<P>FOREGROUND_BLUE | FOREGROUND_GREEN | FOREGROUND_INTENSITY | BACKGROUND_BLUE  </P>

<P></P>

<P>If no background constant is specified, the background is black, and if no foreground constant is specified, the text is black. For example, the following combination produces black text on a white background. </P>

<P>BACKGROUND_BLUE | BACKGROUND_GREEN | BACKGROUND_RED  </P>

<P></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
