<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Posting and Sending Messages</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="q53rgo"></A><B>Posting and Sending Messages</B></P>

<P>Any application can post and send messages. Like the system, an application posts a message by copying it to a message queue and sends a message by passing the message data as arguments to a window procedure. To post messages, an application uses the <A HREF="fixdt_.htm"><B>PostMessage</B></A> function. An application can send a message by calling the <A HREF="1724msn.htm"><B>SendMessage</B></A>, <A HREF="mk.ky2.htm"><B>BroadcastSystemMessage</B></A>, <A HREF="0nan2r.htm"><B>SendMessageCallback</B></A>, <A HREF="13wlizi.htm"><B>SendMessageTimeout</B></A>, <A HREF="18dol92.htm"><B>SendNotifyMessage</B></A>, or <A HREF="_ix_a8.htm"><B>SendDlgItemMessage</B></A> function. </P>

<P>An application typically posts a message to notify a specific window to perform a task. <B>PostMessage</B> creates an <A HREF="5ctef1.htm"><B>MSG</B></A> structure for the message and copies the message to the message queue. The application's message loop eventually retrieves the message and dispatches it to the appropriate window procedure. </P>

<P>An application typically sends a message to notify a window procedure to perform a task immediately. The <A HREF="1724msn.htm"><B>SendMessage</B></A> function sends the message to the window procedure corresponding to the given window. The function waits until the window procedure completes processing and then returns the message result. Parent and child windows often communicate by sending messages to each other. For example, a parent window that has an edit control as its child window can set the text of the control by sending a message to it. The control can notify the parent window of changes to the text that are carried out by the user by sending messages back to the parent. </P>

<P>The <A HREF="0nan2r.htm"><B>SendMessageCallback</B></A> function also sends a message to the window procedure corresponding to the given window. However, this function returns immediately. After the window procedure processes the message, the system calls the specified callback function. For more information about the callback function, see the <A HREF="e6zd7c.htm"><B>SendAsyncProc</B></A> function. </P>

<P>Occasionally, you may want to send or post a message to all top-level windows in the system. For example, if the application changes the system time, it must notify all top-level windows about the change by sending a <A HREF="1qwr8pp.htm">WM_TIMECHANGE</A> message. An application can send or post a message to all top-level windows by calling the <B>SendMessage</B> or <A HREF="fixdt_.htm"><B>PostMessage</B></A> function and specifying HWND_TOPMOST in the <I>hwnd</I> parameter. You can also broadcast a message to all applications by calling the <A HREF="mk.ky2.htm"><B>BroadcastSystemMessage</B></A> function and specifying BSM_APPLICATIONS in the <I>lpdwRecipients</I> parameter. </P>

<P>An application can post a message without specifying a window. If the application supplies a NULL window handle when calling <B>PostMessage</B>, the message is posted to the queue associated with the current thread. Because no window handle is specified, the application must process the message in the message loop. This is one way to create a message that applies to the entire application, instead of to a specific window. </P>

<P>By using the <A HREF="1mpehwg.htm"><B>InSendMessage</B></A> function, a window procedure can determine whether it is processing a message sent by another thread. This capability is useful when message processing depends on the origin of the message. </P>

<P>A common programming error is to assume that the <A HREF="fixdt_.htm"><B>PostMessage</B></A> function always posts a message. This is not true when the message queue is full. An application should check the return value of the <B>PostMessage</B> function to determine whether the message has been posted and, if it has not been, repost it. </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
