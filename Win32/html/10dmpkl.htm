<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>GetFileSecurity</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="10dmpkl"></A><B>GetFileSecurity  <A HREF="4ihd_xk.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>GetFileSecurity</B> function obtains specified information about the security of a file or directory. The information obtained is constrained by the caller's access rights and privileges. </P>

<P><B>BOOL GetFileSecurity(</B></P>

<TABLE cols=2 width=597>

<TR VALIGN="top">
<TD width=59%><B>LPCTSTR</B> <I>lpFileName</I><B>,</B></TD>
<TD width=41%>// address of string for file name</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    SECURITY_INFORMATION</B> <I>RequestedInformation</I><B>,</B></TD>
<TD width=41%>// requested information</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    PSECURITY_DESCRIPTOR</B> <I>pSecurityDescriptor</I><B>,</B></TD>
<TD width=41%>// address of security descriptor</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    DWORD</B> <I>nLength</I><B>,</B></TD>
<TD width=41%>// size of security descriptor buffer</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    LPDWORD</B> <I>lpnLengthNeeded</I> </TD>
<TD width=41%>// address of required size of buffer </TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>   );</B></TD>
<TD width=41%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>lpFileName</I></P>

<P>Points to a null-terminated string specifying the file or directory for which security information is retrieved. </P>

<P><I>RequestedInformation</I></P>

<P>Specifies a <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A> structure that identifies the security information being requested. </P>

<P><I>pSecurityDescriptor</I></P>

<P>Points to a buffer that receives a copy of the security descriptor of the object specified by the <I>lpFileName</I> parameter. The calling process must have the right to view the specified aspects of the object's security status. The <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> structure is returned in self-relative format. </P>

<P><I>nLength</I></P>

<P>Specifies the size, in bytes, of the buffer pointed to by the <I>pSecurityDescriptor</I> parameter. </P>

<P><I>lpnLengthNeeded</I></P>

<P>Points to a variable the function sets to zero if the file descriptor is copied successfully. If the buffer is too small for the security descriptor, this variable receives the number of bytes required. If this variable's value is greater than that of the <I>nLength</I> parameter when the function returns, none of the security descriptor is copied to the buffer. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>To read the security descriptor of a file or directory, the calling process must have READ_CONTROL access or be the owner of the file or directory. </P>

<P>To read the system access-control list (SACL) of a file or directory, the SE_SECURITY_NAME privilege must be enabled for the calling process.</P>

<P><B>See Also</B></P>

<P><A HREF="b8qwja.htm"><B>GetKernelObjectSecurity</B></A>, <A HREF="3ykw.ub.htm"><B>GetPrivateObjectSecurity</B></A>, <A HREF="btmesv.htm"><B>GetUserObjectSecurity</B></A>, <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A>, <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A>, <A HREF="ma1_ml.htm"><B>SetFileSecurity</B></A> </P>

<P></P>

<P></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
