<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>LookupAccountSid</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="zga68h"></A><B>LookupAccountSid  <A HREF="1zgv.tr.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>LookupAccountSid</B> function accepts a security identifier (SID) as input. It retrieves the name of the account for this SID and the name of the first domain on which this SID is found. </P>

<P><B>BOOL LookupAccountSid(</B></P>

<TABLE cols=2 width=573>

<TR VALIGN="top">
<TD width=50%><B>LPCTSTR</B> <I>lpSystemName</I><B>,</B></TD>
<TD width=50%>// address of string for system name</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PSID</B> <I>Sid</I><B>,</B></TD>
<TD width=50%>// address of security identifier</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPTSTR</B> <I>Name</I><B>,</B></TD>
<TD width=50%>// address of string for account name</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPDWORD</B> <I>cbName</I><B>,</B></TD>
<TD width=50%>// address of size account string</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPTSTR</B> <I>ReferencedDomainName</I><B>,</B></TD>
<TD width=50%>// address of string for referenced domain </TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPDWORD</B> <I>cbReferencedDomainName</I><B>,</B></TD>
<TD width=50%>// address of size domain string</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PSID_NAME_USE</B> <I>peUse</I> </TD>
<TD width=50%>// address of structure for SID type</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>   );</B></TD>
<TD width=50%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>lpSystemName</I></P>

<P>Points to a null-terminated string specifying the system. This string can be the name of a remote computer. If this string is NULL, the SID is looked up on the local system. </P>

<P><I>Sid</I></P>

<P>Points to a <A HREF="clji72.htm"><B>SID</B></A> structure for which the account name is looked up. </P>

<P><I>Name</I></P>

<P>Points to a buffer receiving a null-terminated string representing the account name corresponding to the <I>Sid</I> parameter. </P>

<P><I>cbName</I></P>

<P>Pointer to a <B>DWORD</B> variable. On input, this value specifies the size, in bytes (ANSI version) or characters (Unicode version), of the <I>Name</I> buffer. If the function fails because the buffer is too small, this variable receives the required buffer size, including the terminating null character.</P>

<P><I>ReferencedDomainName</I></P>

<P>Points to a buffer that will receive a null-terminated string giving the name of the domain where the account name was found. </P>

<P>For Windows NT systems, the domain name returned for most accounts in the local computer's security database is the computer's name as of the last start of the system. Backslashes are excluded. If the computer's name changes, the old name continues to be returned as the domain name until the system is restarted. </P>

<P>For Windows NT Server systems, the domain name returned for most accounts in the local computer's security database is the name of the domain for which the Windows NT Server is a domain controller. </P>

<P>Some accounts are predefined by the system. The domain name returned for these accounts is BUILTIN. </P>

<P><I>cbReferencedDomainName</I></P>

<P>Pointer to a <B>DWORD</B> variable. On input, this value specifies the size, in bytes (ANSI version) or characters (Unicode version), of the <I>ReferencedDomainName</I> buffer. If the function fails because the buffer is too small, this variable receives the required buffer size, including the terminating null character.</P>

<P><I>peUse</I></P>

<P>Points to an <A HREF="4gipbs.htm"><B>SID_NAME_USE</B></A> enumerated type indicating the type of the account when the function returns. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>The <B>LookupAccountSid</B> function attempts to find a name for the specified security identifier by first checking a list of well-known SIDs. If the supplied SID does not correspond to a well-known SID, the function checks built-in and administratively defined local accounts. Next, the function checks the primary domain. Security identifiers not recognized by the primary domain are checked against the trusted domains corresponding to their SID prefixes. </P>

<P><B>See Also</B></P>

<P><A HREF="0ejggz.htm"><B>EqualPrefixSid</B></A>, <A HREF="1qc.l77.htm"><B>LookupAccountName</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
