<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>AccessCheck</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="6bujdl"></A><B>AccessCheck  <A HREF="o9a0ft.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>AccessCheck</B> function is used by a server application to check a client's access to an object against the access control associated with the object. </P>

<P><B>BOOL AccessCheck(</B></P>

<TABLE cols=2 width=679>

<TR VALIGN="top">
<TD width=50%><B>PSECURITY_DESCRIPTOR</B> <I>pSecurityDescriptor</I><B>,</B></TD>
<TD width=50%>// pointer to security descriptor</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    HANDLE</B> <I>ClientToken</I><B>,</B></TD>
<TD width=50%>// handle to client access token</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    DWORD</B> <I>DesiredAccess</I><B>,</B></TD>
<TD width=50%>// access mask to request</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PGENERIC_MAPPING</B> <I>GenericMapping</I><B>,</B></TD>
<TD width=50%>// address of generic-mapping structure</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PPRIVILEGE_SET</B> <I>PrivilegeSet</I><B>,</B></TD>
<TD width=50%>// address of privilege-set structure</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPDWORD</B> <I>PrivilegeSetLength</I><B>,</B></TD>
<TD width=50%>// size of privilege-set structure</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPDWORD</B> <I>GrantedAccess</I><B>,</B></TD>
<TD width=50%>// address of granted access mask</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    LPBOOL</B> <I>AccessStatus</I> </TD>
<TD width=50%>// address of flag indicating whether access granted</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>   );</B></TD>
<TD width=50%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>pSecurityDescriptor</I></P>

<P>Pointer to a <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> structure against which access is checked. </P>

<P><I>ClientToken</I></P>

<P>Identifies an access token representing a client attempting to gain access. </P>

<P>This handle must be obtained from a communications session layer ¾ for instance, a named pipe ¾ to prevent possible security policy violations. </P>

<P><I>DesiredAccess</I></P>

<P>Specifies the access mask to be requested. This mask must have been mapped by the <A HREF="16rli2z.htm"><B>MapGenericMask</B></A> function to contain no generic access rights. </P>

<P><I>GenericMapping</I></P>

<P>Pointer to the <A HREF="il_uxb.htm"><B>GENERIC_MAPPING</B></A> structure associated with the object for which access is being checked. </P>

<P><I>PrivilegeSet</I></P>

<P>Pointer to a <A HREF="4venv2.htm"><B>PRIVILEGE_SET</B></A> structure that the function fills with any privileges used to perform the access validation. If no privileges were used, the buffer contains a privilege set consisting of zero privileges. </P>

<P><I>PrivilegeSetLength</I></P>

<P>Specifies the size, in bytes, of the buffer pointed to by the <I>PrivilegeSet</I> parameter. </P>

<P><I>GrantedAccess</I></P>

<P>Pointer to a variable the function fills with an access mask indicating which access rights were granted. If the function fails, this access mask is not supplied. </P>

<P><I>AccessStatus</I></P>

<P>Pointer to a flag indicating the success or failure of the access check. If <I>AccessStatus</I> is TRUE, the access token has the requested access to the object. If <I>AccessStatus</I> is FALSE, the access token does not have the requested access. When this parameter is FALSE, the application can use the <A HREF="11c2vs7.htm"><B>GetLastError</B></A> function to get extended error information. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>The <B>AccessCheck</B> function compares the specified security descriptor with the specified access token and indicates, in the <I>AccessStatus</I> parameter, whether access is granted or denied. If access is granted, the requested access mask becomes the object's granted access mask. </P>

<P>Only the discretionary access-control list is examined during an access check. </P>

<P><B>See Also</B></P>

<P><A HREF="42cfuj6.htm"><B>AccessCheckAndAuditAlarm</B></A>, <A HREF="12w7mz7.htm"><B>AreAllAccessesGranted</B></A>, <A HREF="3ebe6c.htm"><B>AreAnyAccessesGranted</B></A>, <A HREF="il_uxb.htm"><B>GENERIC_MAPPING</B></A>, <A HREF="16rli2z.htm"><B>MapGenericMask</B></A>, <A HREF="i9o5nf.htm"><B>PrivilegeCheck</B></A>, <A HREF="4venv2.htm"><B>PRIVILEGE_SET</B></A>, <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
