<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DefineDosDevice</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="10wk7fp"></A><B>DefineDosDevice  <A HREF="83bg6j.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="qnj9so.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="1f83g2.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>DefineDosDevice</B> function lets an application define, redefine, or delete MS-DOS device names. </P>

<P>MS-DOS device names are stored as symbolic links in the object name space in 32-bit versions of Windows. The code that converts an MS-DOS path into a corresponding path in 32-bit versions of Windows uses these symbolic links to map MS-DOS devices and drive letters. The <B>DefineDosDevice</B> function provides a mechanism whereby a Win32-based application can modify the symbolic links used to implement the MS-DOS device name space. </P>

<P><B>BOOL DefineDosDevice(</B></P>

<TABLE cols=2 width=563>

<TR VALIGN="top">
<TD width=36%><B>DWORD</B> <I>dwFlags</I><B>,</B></TD>
<TD width=64%>// flags specifying aspects of device definition  </TD>
</TR>

<TR VALIGN="top">
<TD width=36%><B>    LPCTSTR</B> <I>lpDeviceName</I><B>,</B></TD>
<TD width=64%>// pointer to MS-DOS device name string  </TD>
</TR>

<TR VALIGN="top">
<TD width=36%><B>    LPCTSTR</B> <I>lpTargetPath</I></TD>
<TD width=64%>// pointer to MS-DOS or path string for 32-bit Windows  </TD>
</TR>

<TR VALIGN="top">
<TD width=36%><B>   );</B></TD>
<TD width=64%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>dwFlags</I></P>

<P>Specifies several controllable aspects of the <B>DefineDosDevice</B> function. One or more of the following values can be used: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=56%><B>Value</B></TD>
<TD width=44%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=56%>DDD_RAW_TARGET_PATH</TD>
<TD width=44%>If this value is specified, the function does not convert the <I>lpTargetPath</I> string from an MS-DOS path to a path for a 32-bit version of Windows, but takes it as is.</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>DDD_REMOVE_DEFINITION</TD>
<TD width=44%>If this value is specified, the function removes the specified definition for the specified device. To determine which definition to remove, the function walks the list of mappings for the device, looking for a match of <I>lpTargetPath</I> against a prefix of each mapping associated with this device. The first mapping that matches is the one removed, and then the function returns.
<P>If <I>lpTargetPath</I> is NULL or a pointer to a NULL string, the function will remove the first mapping associated with the device and pop the most recent one pushed. If there is nothing left to pop, the device name will be removed.</P>

<P>If this value is NOT specified, the string pointed to by the <I>lpTargetPath</I> parameter will become the new mapping for this device.</P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>DDD_EXACT_MATCH_ON_REMOVE</TD>
<TD width=44%>If this value is specified along with DDD_REMOVE_DEFINITION, the function will use an exact match to determine which mapping to remove. Use this value to insure that you do not delete something that you did not define.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><I>lpDeviceName</I></P>

<P>Points to an MS-DOS device name string specifying the device the function is defining, redefining, or deleting. The device name string must not have a trailing colon, unless a drive letter (C or D, for example) is being defined, redefined, or deleted. </P>

<P><I>lpTargetPath</I></P>

<P>Points to a path string that will implement this device. Points to an MS-DOS path string unless the DDD_RAW_TARGET_PATH flag is specified, in which case this parameter points to a path string for a 32-bit version of Windows. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>As stated in this function's introductory summary, the <B>DefineDosDevice</B> function provides a means whereby a Win32-based application can create and modify the symbolic links used to implement the MS-DOS device namespace. To retrieve the current mapping for a particular MS-DOS device name or to obtain a list of all MS-DOS devices known to the system, use the <B>QueryDosDevice</B> function. </P>

<P>MS-DOS Device names are global. Once defined, an MS-DOS device name remains visible to all processes until either it is explicitly removed or the system reboots. </P>

<P>Note that drive letters and device names defined at system boot time are protected from redefinition and deletion unless a user is running in administrative mode (ADMIN). </P>

<P><B>See Also</B></P>

<P><A HREF="1n80kod.htm"><B>QueryDosDevice</B></A> </P>

</BODY>
</HTML>
