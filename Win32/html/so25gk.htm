<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Security Identifiers (SIDs)</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="so25gk"></A><B>Security Identifiers (SIDs)</B></P>

<P>A security identifier (SID) is a unique value of variable length used to identify a user or group. The SID assigned to a user when he or she logs on becomes part of the access token that accompanies any process begun by that user. Except for the logon SID, an SID is always unique. When it has been used to identify a user or group, it cannot be used again, at any time, to identify another user or group. </P>

<P>SIDs identify several separate elements. These include the owner and group in security descriptors, the recipient of the access being granted by access-control entries (ACEs), and the user, as well as groups of which the user is a member in access tokens. </P>

<P>An SID also contains the following information. </P>

<P>·A 48-bit identifier authority value </P>

<P>·A revision level </P>

<P>·A variable number of subauthority values (relative identifiers) </P>

<P></P>

<P>The identifier authority value actually contains two values and is the most important piece of information in an SID. It contains a value identifying the agency that issued the SID, usually representing a Microsoft® Server™ domain, and a 32-bit relative identifier (RID) value, to uniquely identify the user or group in that agency. Joining these values ensures that no two SIDs will be the same, even if two different SID-issuing authorities issue the same RID. Each SID-issuing authority issues a given RID only once. </P>

<P>A standardized shorthand notation for SIDs makes it simpler to visualize their components: </P>

<P><B>S</B>-<I>R</I>-<I>I</I>-<I>S</I>-<I>S</I>...</P>

<P>In the notation shown above, <B>S</B> identifies the series of digits as an SID, <I>R</I> is the revision level, <I>I</I> is the identifier-authority value, and <I>S</I> is the subauthority value. An SID could be written in this notation as follows: </P>

<P>S-1-4138-86</P>

<P>In this example, the SID has a revision level of 1, an identifier-authority value of 4138, and one subauthority value of 86. </P>

<P>An application is never required to manipulate an SID directly. The following Win32 functions provide all the functionality required to work with SIDs. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=37%><B>Function</B></TD>
<TD width=63%><B>Description</B></TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="ilceoa.htm"><B>AllocateAndInitializeSid</B></A><B> </B></TD>
<TD width=63%>Allocates and initializes an SID with the specified number of subauthorities.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="w5y_xl.htm"><B>CopySid</B></A><B> </B></TD>
<TD width=63%>Copies a source SID to a buffer.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="0ejggz.htm"><B>EqualPrefixSid</B></A><B> </B></TD>
<TD width=63%>Tests two SID prefix values for equality. An SID prefix is the entire SID except for the last subauthority value.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="82175v.htm"><B>EqualSid</B></A><B> </B></TD>
<TD width=63%>Tests two SIDs for equality. They must match exactly to be considered equal.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="3yue_xl.htm"><B>FreeSid</B></A><B> </B></TD>
<TD width=63%>Frees an SID previously allocated by using the <A HREF="ilceoa.htm"><B>AllocateAndInitializeSid</B></A> function.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="in0fy_.htm"><B>GetLengthSid</B></A><B> </B></TD>
<TD width=63%>Retrieves the length of an SID.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="w9dq5_.htm"><B>GetSidIdentifierAuthority</B></A><B> </B></TD>
<TD width=63%>Retrieves a pointer to an SID's identifier authority.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="1t9gtcl.htm"><B>GetSidLengthRequired</B></A><B> </B></TD>
<TD width=63%>Retrieves the size of the buffer required to store an SID with a specified number of subauthorities.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="ff0a8g.htm"><B>GetSidSubAuthority</B></A><B> </B></TD>
<TD width=63%>Retrieves a pointer to a specified subauthority in an SID.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="ewwul1.htm"><B>GetSidSubAuthorityCount</B></A><B> </B></TD>
<TD width=63%>Retrieves the number of subauthorities in an SID.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="1mn9a4a.htm"><B>InitializeSid</B></A><B> </B></TD>
<TD width=63%>Initializes an <A HREF="clji72.htm"><B>SID</B></A> structure.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="4ciwhf.htm"><B>IsValidSid</B></A><B> </B></TD>
<TD width=63%>Tests the validity of an SID by verifying that the revision number is within a known range and that the number of subauthorities is less than the maximum.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="1qc.l77.htm"><B>LookupAccountName</B></A><B> </B></TD>
<TD width=63%>Retrieves the SID corresponding to a specified account name. Use the <A HREF="35qklh5.htm"><B>GetUserName</B></A> function to retrieve the user name for the current thread.</TD>
</TR>

<TR VALIGN="top">
<TD width=37%><A HREF="zga68h.htm"><B>LookupAccountSid</B></A><B> </B></TD>
<TD width=63%>Retrieves the account name corresponding to a specified SID.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>Some identifier authorities are predefined, as shown in the following table. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=56%><B>Identifier authority</B></TD>
<TD width=44%><B>SID Value</B></TD>
</TR>

<TR VALIGN="top">
<TD width=56%>SECURITY_NULL_SID_AUTHORITY</TD>
<TD width=44%>0</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>SECURITY_WORLD_SID_AUTHORITY</TD>
<TD width=44%>1</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>SECURITY_LOCAL_SID_AUTHORITY</TD>
<TD width=44%>2</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>SECURITY_CREATOR_SID_AUTHORITY</TD>
<TD width=44%>3</TD>
</TR>

<TR VALIGN="top">
<TD width=56%>SECURITY_NT_AUTHORITY</TD>
<TD width=44%>5</TD>
</TR>
</TABLE><BR>

<P></P>

<P>The following RID values are also defined. </P>

<TABLE cols=3>

<TR VALIGN="top">
<TD width=52%><B>Relative identifier authority</B></TD>
<TD width=13%><B>Value</B></TD>
<TD width=35%><B>Superior authority</B></TD>
</TR>

<TR VALIGN="top">
<TD width=52%>SECURITY_NULL_RID</TD>
<TD width=13%>0</TD>
<TD width=35%>S-1-0 </TD>
</TR>

<TR VALIGN="top">
<TD width=52%>SECURITY_WORLD_RID</TD>
<TD width=13%>0</TD>
<TD width=35%>S-1-1 </TD>
</TR>

<TR VALIGN="top">
<TD width=52%>SECURITY_LOCAL_RID</TD>
<TD width=13%>0</TD>
<TD width=35%>S-1-2 </TD>
</TR>

<TR VALIGN="top">
<TD width=52%>SECURITY_CREATOR_OWNER_RID</TD>
<TD width=13%>0</TD>
<TD width=35%>S-1-3 </TD>
</TR>

<TR VALIGN="top">
<TD width=52%>SECURITY_CREATOR_GROUP_RID</TD>
<TD width=13%>1</TD>
<TD width=35%>S-1-3 </TD>
</TR>
</TABLE><BR>

<P></P>

<P>An application can combine an identifier authority and one of these RID values to create an SID that is meaningful on all installations. For example, S-1-1-0 (SECURITY_WORLD_SID_AUTHORITY and SECURITY_WORLD_RID) always identifies the special group representing all users. These security identifiers are <I>universal well-known SIDs</I>. A universal well-known SID is meaningful on all secure systems using this security model, including systems not running Windows NT. The <A HREF="ilceoa.htm"><B>AllocateAndInitializeSid</B></A> function provides a simple method of combining an identifier authority and an RID. </P>

<P>The following are some universal well-known SIDs. </P>

<TABLE cols=3>

<TR VALIGN="top">
<TD width=37%><B>Universal well-known SID</B></TD>
<TD width=15%><B>Value</B></TD>
<TD width=48%><B>Identifies</B></TD>
</TR>

<TR VALIGN="top">
<TD width=37%>Null SID</TD>
<TD width=15%>(S-1-0-0)</TD>
<TD width=48%>A group with no members. This is often used when an SID value is not known. </TD>
</TR>

<TR VALIGN="top">
<TD width=37%>World</TD>
<TD width=15%>(S-1-1-0)</TD>
<TD width=48%>A group that includes all users. </TD>
</TR>

<TR VALIGN="top">
<TD width=37%>Local</TD>
<TD width=15%>(S-1-2-0)</TD>
<TD width=48%>Users who log on to terminals locally (physically) connected to the system. </TD>
</TR>

<TR VALIGN="top">
<TD width=37%>Creator Owner ID</TD>
<TD width=15%>(S-1-3-0)</TD>
<TD width=48%>A security identifier to be replaced by the security identifier of the user who created a new object. This SID is used in inheritable ACLs. </TD>
</TR>

<TR VALIGN="top">
<TD width=37%>Creator Group ID</TD>
<TD width=15%>(S-1-3-1)</TD>
<TD width=48%>Identifies a security identifier to be replaced by the primary-group SID of the user who created a new object. Use this SID in inheritable ACLs. </TD>
</TR>
</TABLE><BR>

<P></P>

<P>Another predefined identifier authority is SECURITY_NT_AUTHORITY (S-1-5). This identifier authority produces SIDs that are not universal but are meaningful only on Windows NT installations. An application can use the following RID values with SECURITY_NT_AUTHORITY to create well-known SIDs. </P>

<TABLE cols=4>

<TR VALIGN="top">
<TD width=14%><B>Constant</B></TD>
<TD colspan=2 width=73%><B>Identifies</B></TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_DIALUP_RID (S-1-5-1)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>Users who log on to terminals using a dialup modem. This is a group identifier.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_NETWORK_RID (S-1-5-2)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>Users who log on across a network. This is a group identifier.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_BATCH_RID (S-1-5-3)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>Users who log on using a batch queue facility. This is a group identifier.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_INTERACTIVE_RID (S-1-5-4)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>Users who log on for interactive operation. This is a group identifier.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_LOGON_IDS_RID (S-1-5-5-X-Y)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>A logon session. This is used to ensure that only processes in a given logon session can gain access to the window-station objects for that session. The <I>X</I> and <I>Y</I> values for these SIDs are different for each logon session. The value SECURITY_LOGON_IDS_RID_COUNT is the number of RIDs in this identifier (5-X-Y).</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_SERVICE_RID (S-1-5-6)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>An account authorized to perform security services.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_LOCAL_SYSTEM_RID (S-1-5-0x12)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>The user account used by the operating system.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=16%>SECURITY_BUILTIN_DOMAIN_RID (S-1-5-0x20)</TD>
<TD colspan=2 width=84%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD colspan=2 width=73%>The built-in system domain.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>The following RIDs are relative to each domain. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=47%><B>RID</B></TD>
<TD width=53%><B>Identifies</B></TD>
</TR>

<TR VALIGN="top">
<TD width=47%>DOMAIN_USER_RID_ADMIN</TD>
<TD width=53%>The administrative user account in a domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>DOMAIN_USER_RID_GUEST</TD>
<TD width=53%>The guest-user account in a domain. This account can be logged onto automatically by users who do not have an account.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>DOMAIN_GROUP_RID_ADMINS</TD>
<TD width=53%>The domain administrator's group. This account exists only on systems running Microsoft® LAN Manager for Windows NT®, not Windows NT systems.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>DOMAIN_GROUP_RID_USERS</TD>
<TD width=53%>A group containing all user accounts in a domain. All users are automatically added to this group.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>An alias is a local group and is similar to a global group, but it can contain members from other domains. Its members can be users or other groups. Some domain-relative RIDs, such as the following, can be used to form well-known SIDs used as local groups. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=52%><B>RID</B></TD>
<TD width=48%><B>Identifies</B></TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_ADMINS</TD>
<TD width=48%>A local group used for administration of the domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_USERS</TD>
<TD width=48%>A local group representing all users in the domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_GUESTS</TD>
<TD width=48%>A local group representing guests of the domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_POWER_USERS</TD>
<TD width=48%>A local group used to represent a user or set of users that expect to treat a system as if it were their personal computer rather than a multiuser workstation.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_ACCOUNT_OPS</TD>
<TD width=48%>A local group existing only on systems running Microsoft LAN Manager for Windows NT. This local group permits control over non-administrator accounts.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_SYSTEM_OPS</TD>
<TD width=48%>A local group existing only on systems running Microsoft LAN Manager for Windows NT. This local group performs system administrative functions, not including security functions. It establishes network shares, controls printers, unlocks workstations, and performs other operations.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_PRINT_OPS</TD>
<TD width=48%>A local group existing only on systems running Microsoft LAN Manager for Windows NT. This local group controls printers and print queues.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_BACKUP_OPS</TD>
<TD width=48%>A local group used for controlling assignment of file backup-and-restore privileges.</TD>
</TR>

<TR VALIGN="top">
<TD width=52%>DOMAIN_ALIAS_RID_REPLICATOR</TD>
<TD width=48%>A local group responsible for copying security databases from the primary domain controller to the backup domain controllers.</TD>
</TR>
</TABLE><BR>

<P></P>

</BODY>
</HTML>
