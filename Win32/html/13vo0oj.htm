<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Creating a Mailslot</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="13vo0oj"></A><B>Creating a Mailslot</B></P>

<P>Mailslots are supported by three specialized functions: <A HREF="2.h57l4.htm"><B>CreateMailslot</B></A>, <A HREF="2l_29l.htm"><B>GetMailslotInfo</B></A>, and <A HREF="7qwis1.htm"><B>SetMailslotInfo</B></A>. These functions are used by the mailslot server. </P>

<P>The following code sample uses the <B>CreateMailslot</B> function to retrieve the handle of a mailslot named sample_mailslot. </P>

<P>BOOL FAR PASCAL Makeslot(HWND hwnd, HDC hdc)  </P>

<P>{ </P>

<P>LPSTR lpszSlotName = "\\\\.\\mailslot\\sample_mailslot"; </P>

<P></P>

<P>/* The mailslot handle "hSlot1" is declared globally. */ </P>

<P></P>

<P>hSlot1 = CreateMailslot(lpszSlotName, </P>

<P>0,                         /* no maximum message size         */ </P>

<P>MAILSLOT_WAIT_FOREVER,     /* no time-out for read operations */ </P>

<P>(LPSECURITY_ATTRIBUTES) NULL); /* no security attributes      */ </P>

<P></P>

<P>if (hSlot1 == INVALID_HANDLE_VALUE) { </P>

<P>ErrorHandler(hwnd, "CreateMailslot"); /* local error handler */ </P>

<P>return FALSE; </P>

<P>} </P>

<P></P>

<P>TextOut(hdc, 10, 10, "CreateMailslot successful.", 26); </P>

<P>return TRUE; </P>

<P>} </P>

<P></P>

<P>To create a mailslot that can be inherited by child processes, an application should change the <A HREF="be53kg.htm"><B>SECURITY_ATTRIBUTES</B></A> structure passed as the last parameter of <A HREF="2.h57l4.htm"><B>CreateMailslot</B></A>. To do this, the application sets the <B>bInheritHandle</B> member of this structure to TRUE (the default setting is FALSE). </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
