<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>GetSecurityInfo [New - Windows NT]</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1nae3gz"></A><B>GetSecurityInfo  <A HREF="1urdywe.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>[New - Windows NT]</P>

<P>The <B>GetSecurityInfo</B> function retrieves a copy of the security descriptor for an object specified by a handle. </P>

<P><B>DWORD GetSecurityInfo(</B></P>

<TABLE cols=2 width=649>

<TR VALIGN="top">
<TD width=54%><B>HANDLE</B> <I>handle</I><B>,</B></TD>
<TD width=46%>// handle to the object</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    SE_OBJECT_TYPE</B> <I>ObjectType</I><B>,</B></TD>
<TD width=46%>// type of object</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    SECURITY_INFORMATION</B> <I>SecurityInfo</I><B>,</B> </TD>
<TD width=46%>// type of security information to retrieve</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    PSID</B> *<I>ppsidOwner</I><B>,</B></TD>
<TD width=46%>// receives a pointer to the owner SID</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    PSID</B> *<I>ppsidGroup</I><B>,</B></TD>
<TD width=46%>// receives a pointer to the primary group SID</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    PACL</B> *<I>ppDacl</I><B>,</B></TD>
<TD width=46%>// receives a pointer to the DACL</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    PACL</B> *<I>ppSacl</I><B>,</B></TD>
<TD width=46%>// receives a pointer to the SACL</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>    PSECURITY_DESCRIPTOR</B> *<I>ppSecurityDescriptor</I></TD>
<TD width=46%>// receives a pointer to the security descriptor</TD>
</TR>

<TR VALIGN="top">
<TD width=54%><B>   );</B></TD>
<TD width=46%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>handle</I></P>

<P>A handle to the object from which to retrieve security information. </P>

<P><I>ObjectType</I></P>

<P>Specifies a value from the <A HREF="1p9iton.htm"><B>SE_OBJECT_TYPE</B></A> enumeration that indicates the type of object named by the <I>pObjectName</I> parameter.</P>

<P><I>SecurityInfo</I></P>

<P>A set of <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A> bit flags that indicate the type of security information to retrieve. This parameter can be a combination of the following values.</P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=57%><B>Value</B></TD>
<TD width=43%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=57%>OWNER_SECURITY_INFORMATION</TD>
<TD width=43%>If this flag is set, the <I>ppsidOwner</I> parameter receives the security identifier (<A HREF="clji72.htm">SID</A>) of the object's owner.</TD>
</TR>

<TR VALIGN="top">
<TD width=57%>GROUP_SECURITY_INFORMATION</TD>
<TD width=43%>If this flag is set, the <I>ppsidGroup</I> parameter receives the SID of the object's primary group. </TD>
</TR>

<TR VALIGN="top">
<TD width=57%>DACL_SECURITY_INFORMATION</TD>
<TD width=43%>If this flag is set, the <I>ppDacl</I> parameter receives the object's discretionary access-control list (DACL).</TD>
</TR>

<TR VALIGN="top">
<TD width=57%>SACL_SECURITY_INFORMATION</TD>
<TD width=43%>If this flag is set, the <I>ppSacl</I> parameter receives the object's system access-control list (SACL)..</TD>
</TR>
</TABLE><BR>

<P></P>

<P><I>ppsidOwner</I></P>

<P>Pointer to a variable that receives a pointer to the owner SID in the security descriptor returned in <I>ppSecurityDescriptor</I>. The returned pointer is valid only if you set the OWNER_SECURITY_INFORMATION flag. This parameter can be NULL if you do not need the owner SID.</P>

<P><I>ppsidGroup</I></P>

<P>Pointer to a variable that receives a pointer to the primary group SID in the returned security descriptor. The returned pointer is valid only if you set the GROUP_SECURITY_INFORMATION flag. This parameter can be NULL if you do not need the group SID.</P>

<P><I>ppDacl</I></P>

<P>Pointer to a variable that receives a pointer to the DACL in the returned security descriptor. The returned pointer is valid only if you set the DACL_SECURITY_INFORMATION flag. This parameter can be NULL if you do not need the DACL.</P>

<P><I>ppSacl</I></P>

<P>Pointer to a variable that receives a pointer to the SACL in the returned security descriptor. The returned pointer is valid only if you set the SACL_SECURITY_INFORMATION flag. This parameter can be NULL if you do not need the SACL.</P>

<P><I>ppSecurityDescriptor</I></P>

<P>Pointer to a variable that receives a pointer to the security descriptor of the object. You must call the <A HREF="0wv2ny.htm"><B>LocalFree</B></A> function to free the returned buffer.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is ERROR_SUCCESS.</P>

<P>If the function fails, the return value is a nonzero error code defined in WINERROR.H. </P>

<P><B>Remarks</B></P>

<P>If the <I>ppsidOwner</I>, <I>ppsidGroup</I>, <I>ppDacl</I>, <I>ppSacl</I> parameters are non-NULL, and the <I>SecurityInfo</I> parameter specifies that they be retrieved from the object, those parameters will point to the corresponding parameters in the security descriptor returned in <I>ppSecurityDescriptor</I>.</P>

<P>To read the object's owner, group and DACL the caller must have READ_CONTROL access or be the owner of the object. The caller must have the SE_SECURITY_NAME privilege enabled to read the S ACL. </P>

<P><B>See Also</B></P>

<P><A HREF="lm6.t4.htm"><B>ACL</B></A>, <A HREF="322nkdh.htm"><B>GetNamedSecurityInfo</B></A>, <A HREF="0wv2ny.htm"><B>LocalFree</B></A>, <A HREF="1p9iton.htm"><B>SE_OBJECT_TYPE</B></A>, <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A>, <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A>, <A HREF="a0hpj_.htm"><B>SetNamedSecurityInfo</B></A>, <A HREF="d4gl2j.htm"><B>SetSecurityInfo</B></A>, <A HREF="clji72.htm"><B>SID</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
