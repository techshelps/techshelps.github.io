<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>GetAuditedPermissionsFromAcl [New - Windows NT]</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="amqo_r"></A><B>GetAuditedPermissionsFromAcl  <A HREF="dc3lm..htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>[New - Windows NT]</P>

<P>The <B>GetAuditedPermissionsFromAcl</B> function returns the audited access rights for a specified trustee. The audited rights are based on the access-control entries (ACEs) of a specified access-control list (ACL). The audited access rights indicate the types of access attempts that cause the system to generate an audit record in the system event log. The audited rights include those that the <A HREF="lm6.t4.htm"><B>ACL</B></A> specifies for the trustee or for any groups of which the trustee is a member. In determining the audited rights, the function does not consider the security privileges held by the trustee.</P>

<P><B>DWORD GetAuditedPermissionsFromAcl(</B></P>

<TABLE cols=2 width=630>

<TR VALIGN="top">
<TD width=50%><B>PACL</B> <I>pacl</I><B>,</B></TD>
<TD width=50%>// ACL to get trustee's audited rights from </TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PTRUSTEE</B> <I>pTrustee</I><B>,</B></TD>
<TD width=50%>// trustee to get rights for</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PACCESS_MASK</B> <I>pSuccessfulAuditedRights</I><B>,</B></TD>
<TD width=50%>// receives rights audited for successful access</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>    PACCESS_MASK</B> <I>pFailedAuditRights</I></TD>
<TD width=50%>// receives rights audited for failed access</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><B>   );</B></TD>
<TD width=50%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>pacl</I></P>

<P>Pointer to an ACL from which to get the trustee's audited access rights. </P>

<P><I>pTrustee</I></P>

<P>Pointer to a <A HREF="2gkczjv.htm"><B>TRUSTEE</B></A> structure that identifies the trustee. A trustee can be a user, group, or program (such as a Windows NT service). You can use a name or a security identifier (<A HREF="clji72.htm"><B>SID</B></A>) to identify a trustee. </P>

<P><I>pSuccessfulAuditedRights</I></P>

<P>Pointer to an <A HREF="kd_.dn.htm"><B>ACCESS_MASK</B></A> variable that receives a set of access rights. The system generates an audit record when the trustee successfully uses any of these access rights. </P>

<P><I>pFailedAuditRights</I></P>

<P>Pointer to an <B>ACCESS_MASK</B> variable that receives a set of access rights based on the access-control entries in the specified ACL. The system generates an audit record when the trustee fails in an attempt to use any of these rights. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is ERROR_SUCCESS.</P>

<P>If the function fails, the return value is a nonzero error code defined in WINERROR.H. </P>

<P><B>Remarks</B></P>

<P>The <B>GetAuditedPermissionsFromAcl</B> function checks all system-audit ACEs in the ACL to determine the audited rights for the trustee. For all ACEs that specify audited rights for a group, <B>GetAuditedPermissionsFromAcl</B> enumerates the members of the group to determine whether the trustee is a member. The function returns an error if it cannot enumerate the members of a group.</P>

<P><B>See Also</B></P>

<P><A HREF="kd_.dn.htm"><B>ACCESS_MASK</B></A>, <A HREF="lf6.t4.htm"><B>ACE</B></A>, <A HREF="lm6.t4.htm"><B>ACL</B></A>, <A HREF="13rt_kw.htm"><B>GetEffectiveRightsFromAcl</B></A>, <A HREF="clji72.htm"><B>SID</B></A>, <A HREF="p6nlr.htm"><B>SYSTEM_AUDIT_ACE</B></A>, <A HREF="2gkczjv.htm"><B>TRUSTEE</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
