<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Window Update Lock</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME=".j..6u"></A><B>Window Update Lock</B></P>

<P>A <I>window update lock</I> is a temporary suspension of drawing in a window. Windows uses the lock to prevent other windows from drawing over the tracking rectangle whenever the user moves or sizes a window. Applications can use the lock to prevent drawing if they carry out similar moving or sizing operations with their own windows. </P>

<P>An application uses the <A HREF="6bbz47.htm"><B>LockWindowUpdate</B></A> function to set or clear a window update lock, specifying the window to lock. The lock applies to the given window and all of its child windows. When the lock is set, the <A HREF="4f0b0z.htm"><B>GetDC</B></A> and <A HREF="f7ytuy.htm"><B>BeginPaint</B></A> functions return a display DC with a visible region that is empty. Given this, the application can continue to draw in the window, but all output is clipped. The lock persists until the application clears it by calling <B>LockWindowUpdate</B>, specifying NULL for the window. Although <B>LockWindowUpdate</B> forces a window's visible region to be empty, the function does not make the given window invisible and does not clear the WS_VISIBLE style bit. </P>

<P>After the lock is set, the application can use the <A HREF="4m9cxu5.htm"><B>GetDCEx</B></A> function, with the DCX_LOCKWINDOWUPDATE value, to retrieve a display DC to draw over the locked window. This allows the application to draw a tracking rectangle when processing keyboard or mouse messages. Windows uses this method when the user moves and sizes windows. <B>GetDCEx</B> retrieves the display DC from the display DC cache, so the application must release the DC as soon as possible after drawing. </P>

<P>While a window update lock is set, the system creates an accumulated bounding rectangle for each locked window. When the lock is cleared, Windows uses this bounding rectangle to set the update region for the window and its child windows, forcing an eventual <A HREF="f55xz2.htm">WM_PAINT</A> message. If the accumulated bounding rectangle is empty (that is, if no drawing has occurred while the lock was set), the update region is not set. </P>

</BODY>
</HTML>
