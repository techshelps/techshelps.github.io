<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Window Background</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="yw394"></A><B>Window Background</B></P>

<P>The window background is the color or pattern used to fill the client area before a window begins drawing. The window background covers whatever was on the screen before the window was moved there, erasing existing images and preventing the application's new output from being mixed with unrelated information. </P>

<P>Windows paints the background for a window or gives the window the opportunity to do so by sending it a <A HREF="fey63i.htm">WM_ERASEBKGND</A> message when the application calls <A HREF="f7ytuy.htm"><B>BeginPaint</B></A>. If an application does not process the message but passes it to <A HREF="32d1nbh.htm"><B>DefWindowProc</B></A>, Windows erases the background by filling it with the pattern in the background brush specified by the window's class. If the brush is not valid or the class has no background brush, Windows sets the <B>fErase</B> member in the <A HREF="hrqqxj.htm"><B>PAINTSTRUCT</B></A> structure <B>BeginPaint</B> returns, but carries out no other action. The application then has a second chance to draw the window background, if necessary. </P>

<P>If it processes WM_ERASEBKGND, the application should use the message's <I>wParam</I> parameter to draw the background. This parameter contains the handle of the display DC for the window. After drawing the background, the application should return a nonzero value. This ensures that <B>BeginPaint</B> does not erroneously set the <B>fErase</B> member of the <B>PAINTSTRUCT</B> structure to a nonzero value (indicating the background should be erased) when the application processes the subsequent <A HREF="f55xz2.htm">WM_PAINT</A> message. </P>

<P>An application can define a class background brush by assigning a brush handle or a system color value to the <B>hbrBackground</B> member of the <A HREF="1onjoi2.htm"><B>WNDCLASS</B></A> structure when registering the class with the <A HREF="6v_00hu.htm"><B>RegisterClass</B></A> function. The <A HREF="d50dne.htm"><B>GetStockObject</B></A> or <A HREF="a5qz1v.htm"><B>CreateSolidBrush</B></A> function can be used to create a brush handle. A system color value can be one of those defined for the <A HREF="1n8lj_j.htm"><B>SetSysColors</B></A> function. (The value must be increased by one before it is assigned to the member.) </P>

<P>An application can process the WM_ERASEBKGND message even though a class background brush is defined. This is typical in applications that enable the user to change the window background color or pattern for a given window without affecting other windows in the class. In such cases, the application must not pass the message to <B>DefWindowProc</B>. </P>

<P>It is not necessary for an application to align brushes, because the system draws the brush using the window origin as the point of reference. Given this, the user can move the window without affecting the alignment of pattern brushes. </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
