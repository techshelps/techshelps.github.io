<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>CreateMailslot</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="2.h57l4"></A><B>CreateMailslot  <A HREF="2ilsjwo.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="k7uhr6.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="1udxmt1.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>CreateMailslot</B> function creates a mailslot with the specified name and returns a handle that a mailslot server can use to perform operations on the mailslot. The mailslot is local to the computer that creates it. An error occurs if a mailslot with the specified name already exists. </P>

<P><B>HANDLE CreateMailslot(</B></P>

<TABLE cols=2 width=585>

<TR VALIGN="top">
<TD width=59%><B>LPCTSTR</B> <I>lpName</I><B>,</B></TD>
<TD width=41%>// pointer to string for mailslot name</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    DWORD</B> <I>nMaxMessageSize</I><B>,</B></TD>
<TD width=41%>// maximum message size</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    DWORD</B> <I>lReadTimeout</I><B>,</B></TD>
<TD width=41%>// milliseconds before read time-out</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>    LPSECURITY_ATTRIBUTES</B> <I>lpSecurityAttributes</I> </TD>
<TD width=41%>// pointer to security structure</TD>
</TR>

<TR VALIGN="top">
<TD width=59%><B>   );</B></TD>
<TD width=41%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>lpName</I></P>

<P>Points to a null-terminated string specifying the name of the mailslot. This name must have the following form: </P>

<P></P>

<P><B>\\.\mailslot\</B>[<I>path</I>]<I>name</I></P>

<P>The <I>name</I> field must be unique. The name may include multiple levels of pseudodirectories separated by backslashes. For example, both \\.\mailslot\example_mailslot_name and \\.\mailslot\abc\def\ghi are valid names. </P>

<P><I>nMaxMessageSize</I></P>

<P>Specifies the maximum size, in bytes, of a single message that can be written to the mailslots. To specify that the message can be of any size, set this value to zero. </P>

<P><I>lReadTimeout</I></P>

<P>Specifies the amount of time, in milliseconds, a read operation can wait for a message to be written to the mailslot before a time-out occurs. The following values have special meanings: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=46%><B>Value</B></TD>
<TD width=54%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=46%>0</TD>
<TD width=54%>Returns immediately if no message is present. (The system does not treat an immediate return as an error.)</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>MAILSLOT_WAIT_FOREVER</TD>
<TD width=54%>Waits forever for a message.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>This time-out value applies to all subsequent read operations and all inherited mailslot handles. </P>

<P><I>lpSecurityAttributes</I></P>

<P>Pointer to a <A HREF="be53kg.htm"><B>SECURITY_ATTRIBUTES</B></A> structure that determines whether the returned handle can be inherited by child processes. If <I>lpSecurityAttributes</I> is NULL, the handle cannot be inherited. </P>

<P><B>Windows NT:</B> The <B>lpSecurityDescriptor</B> member of the structure specifies a security descriptor for the new mailslot. If <I>lpSecurityAttributes</I> is NULL, the mailslot gets a default security descriptor. </P>

<P><B>Windows 95:</B> The <B>lpSecurityDescriptor</B> member of the structure is ignored.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is a handle to the mailslot, for use in server mailslot operations. </P>

<P>If the function fails, the return value is INVALID_HANDLE_VALUE. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>The mailslot exists until one of the following conditions is true: </P>

<P>·The last (possibly inherited or duplicated) handle to it is closed using the <A HREF="ngwwie.htm"><B>CloseHandle</B></A> function. </P>

<P>·The process owning the last (possibly inherited or duplicated) handle exits. </P>

<P></P>

<P>Both Windows NT and Windows 95 use the second method to destroy mailslots. </P>

<P>To write a message to a mailslot, a process uses the <A HREF="xn35yd.htm"><B>CreateFile</B></A> function, specifying the mailslot name by using one of the following formats: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=44%><B>Format</B></TD>
<TD width=56%><B>Usage</B></TD>
</TR>

<TR VALIGN="top">
<TD width=44%><B>\\.\mailslot\</B><I>name</I></TD>
<TD width=56%>Retrieves a client handle to a local mailslot.</TD>
</TR>

<TR VALIGN="top">
<TD width=44%><B>\\</B><I>computername</I><B>\mailslot\</B><I>name</I></TD>
<TD width=56%>Retrieves a client handle to a remote mailslot.</TD>
</TR>

<TR VALIGN="top">
<TD width=44%><B>\\</B><I>domainname</I><B>\mailslot\</B><I>name</I></TD>
<TD width=56%>Retrieves a client handle to all mailslots with the specified name in the specified domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=44%><B>\\*\mailslot\</B><I>name</I></TD>
<TD width=56%>Retrieves a client handle to all mailslots with the specified name in the system's primary domain.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>If <B>CreateFile</B> specifies a domain or uses the asterisk format to specify the system's primary domain, the application cannot write more than 400 bytes at a time to the mailslot. If the application attempts to do so, the <B>WriteFile</B> function fails and <A HREF="11c2vs7.htm"><B>GetLastError</B></A> returns ERROR_BAD_NETPATH. </P>

<P>An application must specify the FILE_SHARE_READ flag when using <B>CreateFile</B> to retrieve a client handle to a mailslot. </P>

<P><B>See Also</B></P>

<P><A HREF="ngwwie.htm"><B>CloseHandle</B></A>, <A HREF="xn35yd.htm"><B>CreateFile</B></A>, <A HREF="2l_29l.htm"><B>GetMailslotInfo</B></A>, <A HREF="be53kg.htm"><B>SECURITY_ATTRIBUTES</B></A>, <A HREF="7qwis1.htm"><B>SetMailslotInfo</B></A>, <A HREF="g0sox_.htm"><B>WriteFile</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
