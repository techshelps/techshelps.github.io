<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>ServiceMain</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="y7r.4o"></A><B>ServiceMain  <A HREF="b2vauy.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="12c8zrk.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="we4jtq.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>A <B>ServiceMain</B> function is a function that a service process specifies as the entry point function of a particular service. The function can have any application-defined name. </P>

<P><B>VOID WINAPI ServiceMain(</B></P>

<TABLE cols=2 width=475>

<TR VALIGN="top">
<TD width=34%><B>DWORD</B> <I>dwArgc</I><B>,</B></TD>
<TD width=66%>// number of arguments </TD>
</TR>

<TR VALIGN="top">
<TD width=34%><B>    LPTSTR</B> *<I>lpszArgv</I> </TD>
<TD width=66%>// address of array of argument string pointers  </TD>
</TR>

<TR VALIGN="top">
<TD width=34%><B>   );</B></TD>
<TD width=66%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>dwArgc</I></P>

<P>Specifies the number of arguments in the <I>lpszArgv</I> array. </P>

<P><I>lpszArgv</I></P>

<P>Points to an array of pointers that point to null-terminated argument strings. The first argument in the array is the name of the service, and subsequent arguments are any strings passed to the service by the process that called the <A HREF="1osmk1p.htm"><B>StartService</B></A> function to start the service. </P>

<P></P>

<P><B>Return Values</B></P>

<P>This function does not return a value. </P>

<P><B>Remarks</B></P>

<P>A service process can start one or more services. For each service that it can start, a service process has a <A HREF="5a9q_6u.htm"><B>SERVICE_TABLE_ENTRY</B></A> structure that specifies the service name and a pointer to the <B>ServiceMain</B> function for that service. </P>

<P>When the service control manager receives a request to start a service, it starts the service process (if it is not already running). The main thread of the service process calls the <A HREF="1qmq_hc.htm"><B>StartServiceCtrlDispatcher</B></A> function with a pointer to an array of <B>SERVICE_TABLE_ENTRY</B> structures. Then the service control manager sends a start request to the service control dispatcher for this service process. The service control dispatcher creates a new thread to execute the <B>ServiceMain</B> function of the service being started. </P>

<P>This function should immediately call the <A HREF="hbd0d..htm"><B>RegisterServiceCtrlHandler</B></A> function to specify a <A HREF="1eqr9ip.htm"><B>Handler</B></A> function to handle control requests. Next, it should call the <A HREF="u71xdk.htm"><B>SetServiceStatus</B></A> function to send status information to the service control manager. After these calls, the function completes the initialization tasks of the service, and then it waits for the service to terminate. </P>

<P>A <B>ServiceMain</B> function does not return until the service is ready to terminate. </P>

<P><B>See Also</B></P>

<P><A HREF="1eqr9ip.htm"><B>Handler</B></A>, <A HREF="hbd0d..htm"><B>RegisterServiceCtrlHandler</B></A>, <A HREF="u71xdk.htm"><B>SetServiceStatus</B></A>, <A HREF="5a9q_6u.htm"><B>SERVICE_TABLE_ENTRY</B></A>, <A HREF="1qmq_hc.htm"><B>StartServiceCtrlDispatcher</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
