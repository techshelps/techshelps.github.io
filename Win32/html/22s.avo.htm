<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>HandlerRoutine</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="22s.avo"></A><B>HandlerRoutine  <A HREF="xge085.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="7re1xz.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF=".hu4wz.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>A <B>HandlerRoutine</B> function is a function that a console process specifies to handle control signals received by the process. The function can have any name. </P>

<P><B>BOOL HandlerRoutine(</B></P>

<TABLE cols=2 width=333>

<TR VALIGN="top">
<TD width=53%><B>DWORD</B> <I>dwCtrlType</I> </TD>
<TD width=47%>//  control signal type</TD>
</TR>

<TR VALIGN="top">
<TD width=53%><B>   );</B></TD>
<TD width=47%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>dwCtrlType</I></P>

<P>Indicates the type of control signal received by the handler. This value is one of the following: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=43%><B>Signal</B></TD>
<TD width=57%><B>Description</B></TD>
</TR>

<TR VALIGN="top">
<TD width=43%>CTRL_C_EVENT</TD>
<TD width=57%>A CTRL+C signal was received, either from keyboard input or from a signal generated by the <A HREF="19h8n57.htm"><B>GenerateConsoleCtrlEvent</B></A> function.</TD>
</TR>

<TR VALIGN="top">
<TD width=43%>CTRL_BREAK_EVENT</TD>
<TD width=57%>A CTRL+BREAK signal was received, either from keyboard input or from a signal generated by <B>GenerateConsoleCtrlEvent</B>.</TD>
</TR>

<TR VALIGN="top">
<TD width=43%>CTRL_CLOSE_EVENT</TD>
<TD width=57%>A signal that the system sends to all processes attached to a console when the user closes the console (either by choosing the Close command from the console window's System menu, or by choosing the End Task command from the Task List).</TD>
</TR>

<TR VALIGN="top">
<TD width=43%>CTRL_LOGOFF_EVENT</TD>
<TD width=57%>A signal that the system sends to all console processes when a user is logging off. This signal does not indicate which user is logging off, so no assumptions can be made.</TD>
</TR>

<TR VALIGN="top">
<TD width=43%>CTRL_SHUTDOWN_EVENT</TD>
<TD width=57%>A signal that the system sends to all console processes when the system is shutting down.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Return Values</B></P>

<P>If the function handles the control signal, it should return TRUE. If it returns FALSE, the next handler function in the list of handlers for this process is used. </P>

<P><B>Remarks</B></P>

<P>Each console process has its own list of <B>HandlerRoutine</B> functions. Initially, this list contains only a default handler function that calls <A HREF="i5ihdk.htm"><B>ExitProcess</B></A>. A console process adds or removes additional handler functions by calling the <A HREF="6gcpc8.htm"><B>SetConsoleCtrlHandler</B></A> function, which does not affect the list of handler functions for other processes. When a console process receives any of the control signals, its handler functions are called on a last-registered, first-called basis until one of the handlers returns TRUE. If none of the handlers returns TRUE, the default handler is called. </P>

<P>The CTRL_CLOSE_EVENT, CTRL_LOGOFF_EVENT, and CTRL_SHUTDOWN_EVENT signals give the process an opportunity to clean up before termination. A <B>HandlerRoutine</B> called to handle any of these signals can do one of the following after performing any cleanup operations: </P>

<P>·Call the <A HREF="i5ihdk.htm"><B>ExitProcess</B></A> function to terminate the process. </P>

<P>·Return FALSE. If none of the registered handler functions returns TRUE, the default handler terminates the process. </P>

<P>·Return TRUE. In this case, no other handler functions are called, and the system displays a pop-up dialog box that asks the user whether to terminate the process. The system also displays the dialog box if the process does not respond within a certain time-out period (5 seconds for CTRL_CLOSE_EVENT, and 20 seconds for CTRL_LOGOFF_EVENT and CTRL_SHUTDOWN_EVENT). </P>

<P></P>

<P>A process can use the <B>SetProcessShutdownParameters</B> function to prevent the CTRL_LOGOFF_EVENT and CTRL_SHUTDOWN_EVENT dialog box from being displayed. In this case, the system just terminates the process when a <B>HandlerRoutine</B> returns TRUE or when the time-out period elapses. </P>

<P><B>See Also</B></P>

<P><A HREF="i5ihdk.htm"><B>ExitProcess</B></A>, <A HREF="19h8n57.htm"><B>GenerateConsoleCtrlEvent</B></A>, <A HREF="2yi701.htm"><B>GetProcessShutdownParameters</B></A>, <A HREF="6gcpc8.htm"><B>SetConsoleCtrlHandler</B></A>, <A HREF="645nbc.htm"><B>SetProcessShutdownParameters</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
