<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>About File Mapping</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1_guwlo"></A><B>About File Mapping</B></P>

<P><I>File mapping</I> is the association of a file's contents with a portion of the virtual address space of a process. The operating system creates a <I>file-mapping object </I>to maintain this association. A <I>file view</I> is the portion of virtual address space that the process uses to access the file's contents. Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory. Processes can also manipulate the file view with the virtual memory function <A HREF="aruejx.htm"><B>VirtualProtect</B></A>.</P>

<P>The file-mapping functions in the Microsoft® Win32® application programming interface (API) allow a process to create file-mapping objects and file views to easily access and share data. The following illustration shows the relationship between the file on disk, a file-mapping object, and a file view.</P>

<P><IMG SRC="../images/bm104.gif" ALT="" BORDER=0></P>

<P>The file on disk can be any file that you want to map into memory, or it can be the system pagefile. </P>

<P>The file-mapping object can consist of all or only part of the file. It is backed by the file on disk. This means that when the system swaps out pages of the file-mapping object, any changes made to the file-mapping object are written to the file. When the pages of the file-mapping object are swapped back in, they are restored from the file.</P>

<P>A file view can consist of all or only part of the file-mapping object. A process manipulates the file through the file views. A process can create multiple views for a file-mapping object. </P>

<P><B>Windows NT:</B> The file views created by each process reside in the virtual address space of that process.</P>

<P><B>Windows 95:</B> All file views reside in the shared address space. The shared address space exists in the range between 2 and 3 gigabytes in the virtual address space for each process. It contains the 16-bit heap and shared system DLLs, as well as file views.</P>

<P></P>

<P>When multiple processes use the same file-mapping object to create views for a local file, the data is coherent. That is, the views contain identical copies of the file on disk. The file cannot reside on a remote computer if you want to share memory between multiple processes.</P>

</BODY>
</HTML>
