<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Using Crowd with Animated Non-Biped Objects</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Using Crowd with Animated Non-Biped Objects"><meta name="keywords" content="crowd:with animated non-biped objects,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7ff4.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Applying Logic to Crowd Behavior</div><a href="WSf742dab041063133fb5604511363e4556c-7ff5.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Animating Crowds</div><a href="WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Character Animation Tutorials</div><a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313363d7aea112a19e2fe5-8000.htm">Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm">Animating Crowds</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Using Crowd with Animated Non-Biped Objects</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7ff4"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dfc"></a></span>
The 3ds Max Crowd
animation system has a number of special features designed for applying
behaviors to non-biped objects. In this lesson, you'll learn how
to create a flock of birds that automatically flap their wings when they
fly upward, and glide without flapping when they fly horizontally
or downward. You'll use the Crowd system's non-bipedal <em class="mild">motion
synthesis</em> methods to achieve this.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dfa"></a></span>You'll animate several delegates and link them
with clones of an animated <em class="mild">global</em> object. Next, you'll use
clip controllers to define clips from the global object's animation.
You'll define <em class="mild">states</em> to specify which animation
clip the clones should use, depending on their parent delegates'
speed, acceleration, pitch, and so on. Crowd will blend the clips
and synthesize an animation based on the clip and state information.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df9"></a></span>This scene uses a vector field, which is a special
type of 3ds Max space warp that enables crowd members to move
around complex objects.</p>
<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df8"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df7"></a></span>Set
up the lesson:</p>
<ul><li>Open
the file <em class="mild">crowd_basics04.max </em>in the <em class="mild">tutorials\character_animation\crowd_basics</em> directory
in your 3ds Max path.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df6"></a></span>This file contains the basic setup for the birds
scene. It contains a crowd object and a "flock" of five delegates
in V formation, as well as a vector field surrounding a C-shaped
"obstacle" object. </p>
</li></ul>

<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df5"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df4"></a></span>Examine
the vector field:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df3"></a></span>The vector field is already set up, so you needn't
make any changes to it, but it's useful to take a quick look at
it to see how it works.</p>
<ol type="1" start="1"><li>Select
the vector field object. <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df2"></a></span>The vector field object is the gizmo shaped
like two double-headed arrows in an X formation, near the C-shaped
object. It's probably easiest to use the Top viewport to select
this.</p>
</li><li>Go
to the Modify panel. In the Obstacle Parameters rollout &gt; Display group,
turn on Show Lattice.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df1"></a></span>The lattice is a yellow, box-shaped, three-dimensional
grid surrounding the obstacle object. Its settings determine the
location, resolution, and maximum volume of the vector field. This
field uses a high-resolution grid, so the display in the Perspective
viewport is almost solid yellow, but you can see the grid clearly
in the orthogonal viewports.</p>
</li><li>Turn
off Show Lattice, and turn on Show Range.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7df0"></a></span>The range is typically an expanded version of
the obstacle object, and is used by the vector field to calculate
vectors within the lattice.</p>
</li><li>Turn
off Show Range, and turn on Show Vector Field.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7def"></a></span>The blue lines represent forces used by the
Vector Field space warp to guide delegates through this volume.
As you can see, their spacing is determined by the lattice resolution,
and the overall shape of the field is determined by the range volume.</p>
</li><li>Turn
off Show Vector Field.</li></ol>





<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dee"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7ded"></a></span>Assign
behaviors:</p>
<ol type="1" start="1"><li>Select
the Crowd object. On the Modify panel &gt; Setup rollout, add a
Space Warp behavior.</li><li>On
the Space Warp Behavior rollout, click the None button and select
the vector field object. <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dec"></a></span>Now, any delegates using the Space Warp behavior
will use the vector field to guide their motion.</p>
</li><li>Add
an Avoid behavior.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_selmult.png"> On the
Avoid Behavior rollout, click the Multiple Selection button. </li><li>In
the Select dialog, select all of the delegates and click Select.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7deb"></a></span>This instructs the delegates to avoid each other.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_behav_assign.png"> Open
the Behavior Assignments dialog.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dea"></a></span>The delegates have already been grouped into
a team (Team0).</p>
</li><li>Assign
both behaviors to the team and close the dialog.</li><li>On
the Solve rollout, click the Solve button.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de9"></a></span>You can stop the simulation at any time by pressing <em class="strong">ESC</em>.
As Crowd solves the simulation, the delegates move around the obstacle
object, roughly following its contours while remaining at their
starting height. Some might fly away, which you'll remedy in the
next procedure.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de8"></a></span>To allow the delegates to fly up and down, you
turn off the switch that constrains the delegates to the XY plane.</p>
</li></ol>








<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de7"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de6"></a></span>Modify
the delegates:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_edit_mult_delegates.png"> On the
Setup rollout, click Multiple Delegate Editing.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de5"></a></span>The delegates have already been added to the
Delegates To Edit list. You don't need to highlight them.</p>
</li><li>In
the General group, turn off Constrain To XY Plane. </li><li>Turn
on SET for Constrain To XY Plane. <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de4"></a></span>You can also vary the delegates' speeds.</p>
</li><li>In
the Speed group, to the right of Average Speed, turn on both Random and
SET.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de3"></a></span>Turning on Random gives you access to both Average
Speed settings.</p>
</li><li>Change
the first Average Speed setting to <em class="strong">3.0</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de2"></a></span>Crowd will use random values between 3 and 5
units per frame for the delegates' speeds.</p>
</li><li>Click
the Apply Edit button to close the dialog and apply your changes
to all specified delegates.</li><li>Solve
the simulation again. This time, be sure to let it finish.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de1"></a></span>The delegates move in three dimensions, soaring
and then descending.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7de0"></a></span>If any of the delegates still fly away, try
changing its starting position, or if you want to keep the V formation,
move all of them together.</p>
</li></ol>







<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7ddf"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dde"></a></span>Reveal
the eagle:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7ddd"></a></span>You'll assign an animated bird object to each
delegate.</p>
<ol type="1" start="1"><li>Right-click
in the active viewport, and from the Display quadrant of the right-click
menu, choose Unhide All.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7ddc"></a></span>Only the Eagle object was hidden. If you haven't
changed the Perspective view, you'll see it in that viewport. If
you have, and the Eagle object is not visible, use <em class="strong">SHIFT+Z</em> to
undo viewport changes.</p>
</li><li>Select
the Eagle object and drag the time slider to see its animation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7ddb"></a></span>The bird flaps its wings from frames 0 to 186
and then remains still. The last key frame is 288.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dda"></a></span>The bird is animated in place, so you can combine
the delegates' motion with the bird's animation to create a convincing
animation.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd9"></a></span>There are quite a few interim keyframes, even
while the bird doesn't move, because Motion Clips uses interim frames
to blend animation clips when it synthesizes an object's animation.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd8"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd7"></a></span>Assign
animated objects to delegates:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_scatter_objs.png"> Select
the Crowd object and click Scatter to open the Scatter Object dialog. </li><li>Specify
Eagle as the object to clone <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd6"></a></span>How Many is already set to 5.</p>
</li><li>Turn
off Clone Controllers so the eagle's animation won't be replicated
in the clones.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd5"></a></span>If you don't do this, the existing animation
mixes with the synthesized new keyframes, which can create confusing
and erroneous results.</p>
</li><li>Click
Generate Clones, and then click OK to exit the dialog.</li><li>Drag
the time slider to see the non-animated clones superimposed over the
original, animated eagle.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd4"></a></span>Next, you'll link the delegates with the eagle
clones, repositioning the clones at the same time.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_assoc_objs.png"> Click
Objects/Delegate Associations to open its dialog.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd3"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_obj_del_ass.png"></p>
</div>
</li><li>Click
the Add button under the Objects list and select the five eagle clones: <em class="mild">Eagle01</em> through <em class="mild">Eagle05</em>.</li><li>Click
the Add button under the Delegates list and select the five delegates.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd2"></a></span>The two lists appear in alphabetical order,
indicating the order in which each delegate and eagle mesh are to
be paired. You can change the order by highlighting list items and
clicking the up and down arrows in between the two lists. In this
case, it's not necessary.</p>
</li><li>Click
Align Objects With Delegates.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd1"></a></span>This moves each object to its respective delegate's
position, and reorients the object as necessary to align its local
axis with that of the delegate. In the viewports, the eagle clones
line up with the delegates. But they're not linked yet.</p>
</li><li>Click
the Link Objects To Delegates button, and then click OK to close
the dialog.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dd0"></a></span>This creates a parent-child hierarchy for each
pair, with the delegate as the parent in each pair.</p>
</li><li>Drag
the time slider to observe the eagle clones moving with the delegates.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dcf"></a></span>The eagle clones remain in their initial, wings-raised
animation position as they move.</p>
</li></ol>











<!--UList--><span style="display:none"><a name="WS73099cc142f4875538d2e113a875e9c9-7ce3"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dcd"></a></span>Use
Clip Controllers:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dcc"></a></span>You'll use Clip Controllers to apply the correct
animation clips from the original eagle object to the clones. Three
clip controller types are available:</p>
<ul><li>Global
Clip Controllers: the objects from which the animation clips are derived,
in this case, the Eagle object.</li><li>Master
Clip Controllers: the block controllers that are created in Track View.
There is one controller for each object to which the synthesized
animation is applied. For more information, see the Block Controller
topic in the <em class="mild">3ds Max User Reference</em>.</li><li>Slave
Clip Controllers: objects containing all animation tracks in each Master
Clip controller. For more information, see the Slave Parameters Dialog
topic in the <em class="mild">3ds Max User Reference</em>.</li></ul>



<!--OList--><span style="display:none"><a name="WS73099cc142f4875538d2e113a875e9c9-7ce2"></a></span>
<ol type="1" start="1"><li>With
the Crowd object selected, scroll down to the Global Clip Controllers
rollout at the bottom of the Modify panel.</li><li>Click
New and select the <em class="mild">Eagle</em> object.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dcb"></a></span>This specifies the <em class="mild">Eagle</em> as the
Global Object, from which the eagle clones' animation will be derived.</p>
</li><li>In
the Global Clip Controllers list, click the Eagle entry, then click
the Edit button to open the Eagle dialog.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dca"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_synth_moclip.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc9"></a></span>The dialog's three tabbed panels let you set
up the clip controllers in a logical workflow.</p>
</li><li>Look
at the five check boxes In the Motion Clips panel &gt; From Global Object
group. Make sure they are all turned off.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc8"></a></span>These controls are useful only when you've animated
the global object's position and rotation and want to incorporate
this animation in the resulting states.</p>
</li><li>In
the same group, click New to add a new clip.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc7"></a></span>The MotionClip Parameters dialog opens with
the default clip name Motion Clip.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc6"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_tut8_moclip.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc5"></a></span>The MotionClip Parameters dialog defines animation
clips from the global object. The current end frame is automatically
set to the last key in the global object's animation.</p>
</li><li>Change
the name to <em class="strong">Flap</em>, and set End to <em class="strong">186</em>,
the last frame of the flapping motion. Click OK.</li><li>Create
a second clip called <em class="strong">Glide</em>, and set it to use frames <em class="strong">187</em> through <em class="strong">288</em>. Click
OK.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc4"></a></span>The clips use different colors so you can distinguish
them in Track View.</p>
</li></ol>







<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc3"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc2"></a></span>Define
states:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc1"></a></span>You'll define two states to specify how a delegate
moves at any point in time. You can specify values or value ranges
for one or more of these motion categories: speed, acceleration,
pitch, pitch velocity, and heading velocity. You can also use MAXScript
to define a state. As you define states, you assign clips to them.
For example, if your animated object uses different motions for turning
sideways or slowing down, you create a state for each one and assign it
the appropriate motion clip. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dc0"></a></span>In this procedure, you'll create one state for
upward motion that uses the Flap clip, and a second state for downward
motion that uses the Glide clip.</p>
<ol type="1" start="1"><li>Click
the State tab, then click New State. Change the name from ClipState to <em class="strong">Flap</em>.</li><li>Click
Add Clip and choose the Flap clip.</li><li>Click
Edit Properties.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dbf"></a></span>You'll use this dialog, which has the same name
as the state (in this case, &#8220;Flap&#8221;) to apply the Flap state when
the delegate moves upward.</p>
</li><li>Click
the Pitch tab and turn on Use Pitch.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dbe"></a></span>The Range settings become available. Use these
to specify the range of pitches to activate this state.</p>
</li><li>Set
Min to <em class="strong">1</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dbd"></a></span>The bird will flap its wings whenever its pitch
is between 1 through 180 degrees (when it's flying upward).</p>
</li><li>Click
Exit to close the Flap dialog.</li><li>Add
a second state and call it <em class="strong">Glide</em>.</li><li>Assign
it the Glide motion clip and use Edit Properties to specify that
the Glide state is to use a pitch range of -180 to <em class="strong">0</em>.
Again, close the dialog by clicking Exit.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dbc"></a></span>The bird will stop flapping its wings whenever
it's flying downward or level. You can also set different flapping
rates for different pitches by creating more clips when you set
up the global object.</p>
</li></ol>








<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dbb"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dba"></a></span>Specify
master motion clips:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db9"></a></span>This is the final part of the motion clip setup
procedure. Here you specify the master motion clips, that is, the
objects to which the synthesis is to be applied. You also blend
the clips and synthesize the animation.</p>
<ol type="1" start="1"><li>Click
the Synthesis tab.</li><li>Click
the New Master Motion Clip button and select the five eagle clones.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db8"></a></span>The Global Object doesn't appear in the Select
Object To Copy dialog because you designated it as the object from
which the clips are derived.</p>
</li><li>In
the Synthesis Blend Parameters group, click Auto Blend All.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db7"></a></span>Auto Blend creates natural-looking transitions
between the clips. To see an example of the results of Auto Blend,
set From Clip to Glide and To Clip to Flap. The blend from gliding
to flapping begins on the 80th frame of the Glide clip.</p>
</li><li>Click
Synthesize All then click OK to close the Eagle dialog.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db6"></a></span>This generates the animations for the clones.
You don't have to solve the crowd simulation unless you change delegate
or behavior settings.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_tcnfg.png"> Click
Time Configuration and in the Playback group, turn off Real Time.
This turns off real-time animation playback. Maximize the Perspective
viewport and zoom in.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db5"></a></span>Although the birds should flap their wings only
when they fly upward, and then stop flapping to glide downward,
it isn't quite working that way. The problem is that the clips are
too long for their matched states. For instance, a bird might fly
upward for only 50 frames, but the animation clip for the Flap state
is 187 frames long. You'll need to modify the clips.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db4"></a></span>You might wonder why we didn't start with a
Global Object whose animation was set up expressly for use with
motion synthesis. In a production environment, you might be working
with models containing animation originally created for other purposes;
in this lesson, we're attempting to simulate such a situation. The
Synthesis dialog lets you specify exactly which frame ranges to
use when synthesizing motion from a Global Object's animation.</p>
</li></ol>





<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db3"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db2"></a></span>Examine
the Block and Slave controllers:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db1"></a></span>Before you modify the clips, take a look at
the "behind the scenes" results of the synthesis process; that is,
the creation of block and slave controllers.</p>
<ol type="1" start="1"><li>From
the Graph Editors menu, choose Track View - Dope Sheet.</li><li>In
the hierarchy pane on the left side, expand Global Tracks, expand
Block Control, and then expand Global Motion Clip::Eagle.</li><li>Scroll
down or expand the Track View window vertically so you can see a few
of the Master Motion Clip items.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7db0"></a></span>In the track hierarchy, the global motion clip
from the Eagle object's animation is the parent to the master motion
clips for the eagle clones. Each master motion clip is a different
sequence of blocks, created during the synthesis process. The Flap
and Glide blocks are each a different color.</p>
</li><li>Expand
a Master Motion Clip to see the Flap and Glide slave tracks. Expand
a slave track to see its keys.</li><li>Close
Track View.</li></ol>





<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7daf"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dae"></a></span>Modify
the clips:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dad"></a></span>Examine the Global Object's animation to see
how to improve the synthesis.</p>
<ol type="1" start="1"><li>Click
the Eagle object and drag the time slider slowly.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dac"></a></span>The wing-flapping animation repeats four times.
The clip needs only part of one cycle, though, because the clip
controller can blend between the last frame of one cycle and the
first of the next. The flap cycle should start with the wings all
the way up and end with the wings slightly up.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_keymod.png"> Move
the time slider back to frame 0 and turn on Key Mode Toggle.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_nxtkey.png"> Click
Next Key repeatedly while watching the eagle object. Stop at frame
48.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7dab"></a></span>The wing-flapping animation returns to the initial
wings-up position at frame 48.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_prevkey.png"> Click
Previous Key once.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7daa"></a></span>The last key before the end of the flap cycle
is 42. The Flap clip should go from frame 0 to frame 42.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da9"></a></span>The glide cycle is different. Because there's
no actual animation, you must make the clip long enough to avoid
generating too many keyframes (as the result of repeating a short
clip many times to fill the state), while keeping it short enough
to fit within the state length. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da8"></a></span>For this lesson, you'll set a glide-cycle length
of 10 frames. In your own animations, experiment to find a good
length for different clips. Even with animation clips, such as the
wing-flap cycle, you may need to scale or adjust the animation so
the cycle doesn't exceed the shortest length of a state.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da7"></a></span>Clip controllers perform spline interpolation
over the intersection of each pair of blocks using keys within the
blocks. To avoid this interpolation altering the motion within the
clip, insert additional keyframes near the ends of the motion. This
makes the interpolation occur at the extremes of the clip, rather
than over its entire length.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da6"></a></span>So, for the glide clip, you'll move some keys
immediately inside each endpoint. These keys are of Bend modifiers
applied to the wings, and have already been set to use linear interpolation.</p>
</li><li>With
the master eagle still selected, find the key at frame 205 of the
track bar (the mini Track View below the viewports).</li><li>Drag
the key from frame 205 to frame 211.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da5"></a></span>It helps to watch the status bar text while
you do this.</p>
</li><li>Drag
the next key from frame 228 to frame 212.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da4"></a></span>The key icon will overlap the icon of the key
at frame 211.</p>
</li><li>Drag
the next key from frame 253 to frame 219.</li><li>Drag
the next key from frame 270 to frame 220.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da3"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/cs/tut8_lsn4_trackbar.png"></p>
<p></p><p class="figure-title">Enlarged
view of track bar, showing keys at frames 211, 212, 219, and 220.</p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da2"></a></span>In the above illustration, the track bar has
been "zoomed in" for illustrative purposes by shortening the active
time segment. You'll see more overlap on your screen.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da1"></a></span>Now you have keys at frames 211 and 220 that
define the clip ends, and keys immediately inside the ends that
can be used for interpolation.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7da0"></a></span>To change the clip lengths used for synthesis,
edit the global clip controller.</p>
</li><li>In
the Crowd Global Clip Controllers rollout, click the Eagle list
item, and then click the Edit button.</li><li>In
the Global Motion Clips group, choose the Flap list item, and then,
in the From Global Object group, click Modify.</li><li>Set
the End parameter to <em class="strong">42</em>, then click OK.</li><li>Modify
the Glide clip to extend from frame 211 to frame 220.</li></ol>













<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9f"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9e"></a></span>Redo
the synthesis:</p>
<ol type="1" start="1"><li>On
the Synthesis tab, in the Synthesis Blend Parameters group, click
Auto Blend All.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9d"></a></span>From Clip and To Clip now reflect the changed
clip lengths. Also, after the Auto Blend, the Blend Start items
change.</p>
</li><li>Click
Synthesize All to apply the new clip lengths to the states.</li><li>Close
the dialog and play the animation.</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9b"></a></span>Hide
the Global Object and the delegates:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d9a"></a></span>At this point you can hide the <em class="mild">Eagle</em> object
and the delegates. This makes it easier to see the synthesized motion
of the eagle clones.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_selnam.png"> Use
Select By Name to select all the delegates and the <em class="mild">Eagle</em> object.</li><li>Right-click
in the active viewport and choose Hide Selection from the right-click
menu to hide the delegates and global object.</li></ol>


<div class="section"><span style="display:none"><a name="WS73099cc142f487551face5511473254fc3-1cd1"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e34443"></a>Summary</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d99"></a></span>In this lesson, you worked with a global object
that was animated in place. All <em class="mild">transformational</em> animation
was supplied by the Crowd system. You can also derive delegate motion
from the global object's transformational animation, if it exists.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d98"></a></span>The Global Object's animation wasn't ideal for
the crowd simulation. You learned how to adapt an animation so it
works better in a simulation.</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script></html>
