<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Wiring a Custom Attribute</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Wiring a Custom Attribute"><meta name="keywords" content="parameter wiring:character rig, wiring:character rig, custom attributes:character rig, rig:wiring, rig:custom attributes,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab04106313311b7d0e3112a19e3350-7fd2.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Adding Control Objectsrig:pivot points rig:shapes linking:character rigging pivot points:character rigging shapes:character rigging</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7fd3.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Introduction to Character Rigging</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7fd6.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Using List Controllersparameter wiring:character rig wiring:character rig custom attributes:character rig rig:wiring rotation list list controller:character rigging controller:character rigging rig:animation controllers</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7fd1.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-6b04.htm">Character Animation without Biped</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-7fd6.htm">Introduction to Character Rigging</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Wiring a Custom Attribute</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab04106313311b7d0e3112a19e3350-7fd2"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19df"></a></span>In this lesson, you will create custom attributes
to control the foot. A custom attribute is a parameter you create
yourself. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19de"></a></span>The parameter doesn't control anything until
you connect it to another parameter in the scene. You will use parameter
wiring to connect the custom attributes to the rotation of the foot's
IK chains.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a9c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a9b"></a></span>Prepare
the scene:</p>
<ol type="1" start="1"><li>Continue
from the previous lesson, or open the file <span class="filePath">tut_introrig_controls.max</span>.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a9a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_start.png"></p>
</div>
</li><li>If
you are continuing from the previous lesson, go to frame 0.</li></ol>


<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a99"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a98"></a></span>Create
custom attributes:</p>
<ol type="1" start="1"><li>Select <em class="mild">CtrlFoot</em>.</li><li>Choose
Animation menu &gt; Parameter Editor.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19dd"></a></span>The Parameter
Editor dialog appears.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a97"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_addca.png"></p>
</div>
</li><li>On
the dialog's Attribute rollout, enter <em class="strong">Roll</em> as the
Name parameter.</li><li>Expand
the Float UI Options rollout, and enter a range from <em class="strong">0</em> to <em class="strong">60</em>.</li><li>In
the Attribute rollout, click Add.</li><li>Close
the Parameter Editor dialog.</li></ol>






<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a96"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a95"></a></span>Determine
the rotation axis to be wired:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19dc"></a></span>You want the new Roll parameter to rotate the
IK chain at the ball of the foot so the character's heel will rise.
In order to do this, you must find out which of the IK chain's axes
of rotation should be affected by the parameter.</p>
<ol type="1" start="1"><li>Select <em class="mild">IKBall</em>.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_rotate_max.png"> On the
main Toolbar, turn on Select and Rotate.</li><li>Change
the reference coordinate system to Local.</li><li>Rotate <em class="mild">IKBall</em> so
the heel rises, and note which axis is affected by the rotation.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19db"></a></span>You can
easily see which axis is affected by watching the display of numbers
above the rotation gizmo. The X axis value changes as you rotate
IKBall.</p>
</li><li>Undo
any rotation you have done on IKBall before continuing.</li></ol>





<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a94"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a93"></a></span>Wire
the custom attribute to the IK chain's rotation:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19da"></a></span>Now you are ready to wire the Roll parameter
to IKBall's X rotation.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d9"></a></span>When you wire parameters, the wiring is limited
to the time segment that was active when the wiring was set. You
can change this setting in Track View later on, but it is much easier
to set the maximum time segment you think you might need before
wiring. In this case, you will change the active time segment to
1000 frames.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/but_tcnfg_max.png"> Click
Time Configuration, and change the Length parameter to 1000.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d8"></a></span>Now you
will create custom attributes on CtrlFoot, the control object for
the foot. This will allow you to roll the foot by changing parameters
on the Modify panel when CtrlFoot is selected. The custom attribute will
be called Roll, and will range from 0 to 60 degrees.</p>
</li><li>Select <em class="mild">CtrlFoot</em>.</li><li>Choose
Animation Menu &gt; Wire Parameters &gt; Wire Parameters. <p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d7"></a></span>A pop-up
menu appears, giving you a choice of all parameter paths that are
available for wiring. In this case, there are only two, Transform
and Object.</p>
</li><li>On
the pop-up menu, choose Object (Rectangle) &gt; Custom Attributes
&gt; Roll.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d6"></a></span>A dotted line appears, extending from CtrlFoot's
pivot point to the cursor. The dotted line indicates that you should
choose an object and parameter path for the second object in the
wiring pair.</p>
</li><li>Click <em class="mild">IKBall</em>.</li><li>On
the pop-up menu, choose Transform &gt; IK Goal &gt; Rotation &gt; X
Rotation.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d5"></a></span>The Parameter Wiring dialog appears.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a92"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_pwdialog.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d4"></a></span>This dialog
shows you the parameters that will be connected, and the direction
in which the control will occur. In this case, you want the Roll
parameter to affect the IK chain's X Rotation parameter.</p>
</li><li>In
the center of the Parameter Wiring dialog, turn on the arrow that
points to the right.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d3"></a></span>This will
cause Roll to control the X Rotation parameter.</p>
</li><li>Click
Connect.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d2"></a></span>The parameters are now wired together. Leave
the Parameter Wiring dialog open as you test the wiring.</p>
</li></ol>








<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a91"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a90"></a></span>Test
the wiring:</p>
<ol type="1" start="1"><li>Move
the Parameter Wiring dialog so you can clearly see the character's
foot.</li><li>On
the Modify panel, increase the Roll parameter.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d1"></a></span>The foot
spins wildly.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19d0"></a></span>What is
actually happening is a result of how <span class="charspan-special">3ds Max</span> handles rotations internally.
You're probably familiar with degrees as a measurement of rotation.
Ninety degrees is a quarter turn or rotation, 180 is half, and 360
is a full turn. However, many 3D applications use a different unit
of measure called radians to measure rotations. Radians are based
on the value of pi (approximately 3.1416).</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19cf"></a></span>With radians,
2 times pi is a full 360-degree spin. That is, 6.28 radians equals
360 degrees. Conversely, one radian is equal to about 57 degrees. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19ce"></a></span>
<span class="charspan-special">3ds Max</span> comes with a built-in function,
degtorad, that you can use to convert the Roll parameter to radians
before passing it on to IKBall's X rotation.</p>
</li><li>In
the Parameter Wiring dialog, replace the expression <em class="mild">Roll</em> in
the lower right entry area with <em class="strong">degtorad(Roll)</em>.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_expression.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19cd"></a></span>This tells
the wiring to use this expression for IKBall's X rotation.</p>
</li><li>In
the Parameter Wiring dialog, click Update.</li><li>On
the Modify panel, increase the Roll parameter.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19cc"></a></span>The heel
comes up as you increase the Roll parameter, and stops rising when
Roll reaches its maximum value of 60.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_roll.png"></p>
</div>
</li><li>Save
the scene as <em class="strong">my_introrig_toewiring.max</em>.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19cb"></a></span>You can
find a version of this scene in the file <span class="filePath">tut_introrig_toewiring.max</span>.</p>
</li></ol>






<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8d"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8c"></a></span>Set
up toe rotation:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19ca"></a></span>You can use CtrlFoot to move or rotate the entire
foot. However, if you tip CtrlFoot forward, it rotates from the
center of the control shape. You can make it rotate from the toe
tip by aligning its pivot point with IKToe.</p>
<ol type="1" start="1"><li>Select <em class="mild">CtrlFoot</em>.</li><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_hier.png"> On the
Hierarchy panel, turn on Affect Pivot Only.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_align_max.png"> Use
Align to align its pivot point with the pivot point of <em class="mild">IKToe</em>.
On the Align dialog, choose Pivot Point for both the Current Object
and Target Object, and choose the X, Y and Z axes.</li><li>Turn
off Affect Pivot Only.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c9"></a></span>Now, when
you rotate CtrlFoot, it rotates from the tip of the toe.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_footrotate.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c8"></a></span>If you
rotate CtrlFoot to test the setup, be sure to undo any rotation
before continuing.</p>
</li></ol>




<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a8a"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a89"></a></span>Wire
the knee's swivel angle:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c7"></a></span>Now you will create and wire another custom
attribute, this one for the knee's swivel angle.</p>
<ol type="1" start="1"><li>Select <em class="mild">CtrlFoot</em>.</li><li>Choose
Animation menu &gt; Parameter Editor. </li><li>Enter <em class="strong">KneeSwivel</em> for
the name, and enter a range of <em class="strong">&#8211;90</em> to <em class="strong">90</em>.
Click Add to create the custom attribute, and close the Add Parameter
dialog.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c6"></a></span>This adds a KneeSwivel parameter to CtrlFoot.</p>
</li><li>Right-click <em class="mild">CtrlFoot</em> and
choose Wire Parameters from the quad menu.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7118"></a></span><div class="note-tip"><span class="label">Tip</span>You
can access parameter wiring from the quad menu, or by choosing Animation
menu &gt; Wire Parameters &gt; Wire Parameters.</div></div>
</li><li>On
the pop-up menu, choose Object (Rectangle) &gt; Custom Attributes
&gt; KneeSwivel.</li><li>Click
IKAnkle, and choose Transform &gt; Swivel Angle from the pop-up
menu.</li><li>On
the Parameter Wiring dialog, enter <em class="strong">degtorad(KneeSwivel)</em> in
the lower right entry area.</li><li>Turn
on the right arrow, then click Connect.</li></ol>








<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a88"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a87"></a></span>Test
the knee swivel:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c5"></a></span>The easiest way to see the KneeSwivel parameter
in action is to look at the character with a bent knee. You can
see this by going to frame 10, where the character is animated to
bend its knee.</p>
<ol type="1" start="1"><li>Go
to frame 10.</li><li>On
the Modify panel, change the KneeSwivel parameter. <span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a86"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/tut_introrig_wire_kneeswivel.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c4"></a></span>The knee
swivels without affecting the foot.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a85"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a84"></a></span>Save
the file:</p>
<ol type="1" start="1"><li>Reset
Roll and KneeSwivel to 0.0.</li><li>Save
the scene as <em class="strong">my_introrig_wired.max</em>.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c3"></a></span>You can
find a version of this scene in the file <span class="filePath">tut_introrig_wired.max</span>.</p>
</li></ol>


<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6a83"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e48710"></a>Next</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-19c2"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab04106313311b7d0e3112a19e3350-7fd1.htm"><!--Reference = WSf742dab04106313311b7d0e3112a19e3350-7fd1; Target topic = WSf742dab04106313311b7d0e3112a19e3350-7fd1.htm-->Using List Controllers</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body></html>
