<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Adjusting Envelopes</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Adjusting Envelopes"><meta name="keywords" content="vertices:rigid, control point, rigid vertices, child overlap, parent overlap, radial scale, envelopes:adjusting,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab04106313311b7d0e3112a19e3350-7fea.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Applying the Physique Modifier</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7feb.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Adjusting the Biped to the Model</div><a href="WS73099cc142f4875514c01ac112a7acef16-6d0c.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Character Animation without Biped</div><a href="WS73099cc142f4875514c01ac112a7acef16-6b04.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-6d0c.htm">Adjusting the Biped to the Model</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Adjusting Envelopes</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab04106313311b7d0e3112a19e3350-7fea"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b7d"></a></span>






The
bulk of the work in Physique consists of adjusting the size and
overlap of envelopes to fine-tune mesh behavior as the character
moves. </p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c9b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/il/il_physique_basics_env_start.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b7c"></a></span>For the best results, each area of the mesh
requires some attention. </p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c9a"></a></span>
<ul><li>Each
envelope should encompass its surrounding vertices</li><li>Hip
and shoulder areas must be adjusted for smooth deformation when
the biped walks or stretches</li><li>The
head requires a rigid envelope for minimal deformation </li></ul>



<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b7b"></a></span>As you adjust the envelopes, inspect the mesh
from various angles. A test animation will also reveal different
flaws in the mesh as the biped posture changes. </p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c99"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c98"></a></span>Set
up for this lesson:</p>
<ol type="1" start="1"><li>Load
the file <em class="mild">my_wilson_physique.max</em> that you
created in the lesson <span class="hypertext">
<span class="char_link"><a href="WSf742dab04106313311b7d0e3112a19e3350-7feb.htm"><!--Reference = WSf742dab04106313311b7d0e3112a19e3350-7feb; Target topic = WSf742dab04106313311b7d0e3112a19e3350-7feb.htm-->Applying the Physique Modifier</a></span>
</span>.
Alternately, you can load the file <em class="mild">envelopes_wilson_start.max</em> from
the program disc. <span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c97"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_env_pose.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b7a"></a></span>This scene
contains the character Wilson and a posed biped. MeshSmooth has
been removed from the character for the time being. Physique has
been applied to the model, but the envelopes haven't been adjusted.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b79"></a></span>The biped
isn't needed for envelope adjustment, so you can hide it for now.</p>
</li><li>Select
the <em class="mild">Wilson Mesh Body</em> object.</li><li>Open
the Modify panel.</li><li>In
the Physique Level Of Detail rollout, turn on Hide Attached Nodes.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b78"></a></span>The biped
is hidden, and you have a better view of the mesh. </p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-713d"></a></span><div class="note-tip"><span class="label">Tip</span>Turning on Hide Attached Nodes has the same
effect as hiding the biped with the controls on the Display panel.</div></div>
</li><li>Scrub
the time slider to frame 10.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b77"></a></span>The biped
is animated very simply, just enough to show you the main problem
areas. The problems with the mesh are:</p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c96"></a></span>
<ul><li>The
sleeves don't go with the upper arm</li></ul>

<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c95"></a></span>
<ul><li>The
pant legs don't go with the legs as they split</li></ul>

<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c94"></a></span>
<ul><li>The
hips do not deform smoothly</li></ul>

<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b76"></a></span>If you're
using scene you created with the last two lessons, it's possible
that your biped pose differs slightly from the file included on
the CD, producing different problems with the hands, fingers, legs,
or feet. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b75"></a></span>In this lesson, you'll learn to fix the first
two problems listed above. You can apply the same principles to
other body parts, such as fingers and toes.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-713c"></a></span><div class="note-tip"><span class="label">Tip</span>To
get a better look at the envelopes and vertices as they change shape,
change the Perspective view to a User view and turn on Edged Faces.</div></div>
</li></ol>





<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c93"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c92"></a></span>Adjust
the arm envelopes:</p>
<ol type="1" start="1"><li>In
the Front viewport, zoom in on the upper body. The time slider should
be at frame 10.</li><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_modify.png"> Go to
the Modify panel.</li><li>Expand
the Physique modifier listing on the stack, and choose the Envelope
sub-object.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b74"></a></span>The links in the body turn yellow.</p>
</li><li>Click
the link for the left upper arm.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c91"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_arm_envelope.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b73"></a></span>Two envelopes
appear around the arm link. The vertices inside the envelopes are
influenced by the bone. The inner red envelope indicates the area
of most influence. The link's influence decreases until it reaches
the purple outer envelope. Vertices outside the envelopes are not affected
at all by the bone.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b72"></a></span>Vertices
affected by the currently selected envelope turn various colors
to show they are influenced by the envelope.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b71"></a></span>The radius
of each envelope can be changed with the Radial Scale parameter.
Increasing the radius enlarges the envelope to encompass more vertices,
increasing the number of vertices affected by the bone.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-713b"></a></span><div class="note-tip"><span class="label">Tip</span>To see the envelopes' influence in color
in a shaded viewport, turn on the Shaded option in the Blending
Envelopes rollout &gt; Display group.</div></div>
</li><li>In
the Blending Envelopes rollout &gt; Envelope Parameters group, increase
the Radial Scale parameter until all the vertices in the sleeve
pop into place.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c90"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_env_pop.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b70"></a></span>To make
the other arm's envelope the same, you can copy and paste the envelope
settings.</p>
</li><li>In
the Edit Commands group, click Copy.</li><li>Select
the right upper arm link and click Paste.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6f"></a></span>The sleeve
pops into place for the opposite arm.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_arms_pop.png"></p>
</div>
<div style="margin-top:9pt"><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-713a"></a></span><div class="note-note"><span class="label">Note</span>It
is possible that the right arm envelope's Radial Scale will have
to be increased slightly to encompass the sleeve on that arm. Even
with a symmetrical model, there can be very slight differences between
the biped pose on each side, causing differences in the initial
envelope size and placement.</div></div>
</li></ol>







<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8e"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8d"></a></span>Adjust
the leg envelopes:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6e"></a></span>The envelopes for the lower legs don't fully
encompass the entire pant leg near the ankle.</p>
<ol type="1" start="1"><li>Select
lower right leg link, and increase the Radial Scale.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6d"></a></span>When you
increase the Radial Scale enough to encompass the entire pant leg,
the outer envelope includes some of the vertices on the other leg.
You will solve this problem my moving control points.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6c"></a></span>The process
of moving control points is easier if you put the character back
into its figure pose.</p>
</li><li>In
the Display group, turn on Initial Skeletal Pose.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6b"></a></span>The character
jumps back to its figure pose.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_physique_control_point.png"> In the
Blending Envelopes rollout &gt; Selection Level group, click the
Control Point button.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b6a"></a></span>Control
points appear on each envelope.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_control_points.png"></p>
</div>
</li><li>In
the Front viewport, select the control points on the side of the
envelope that overlaps the left leg, and move them to the left until
the envelopes no longer affect the left leg's vertices.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_move_points.png"></p>
</div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_physique_link.png"> In the
Blending Envelopes rollout &gt; Selection Level group, click the
Link button.</li><li>Select
the lower left leg link. Increase its Radial Scale so the envelopes
encompass the entire left pant leg.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_physique_control_point.png"> Click
Control Point.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b69"></a></span>Control points appear on each envelope.</p>
</li><li>Adjust
the control points as you did before, so the lower left leg envelopes
don't affect the lower right leg's vertices.</li></ol>








<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c8a"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c89"></a></span>Adjust
foot envelopes:</p>
<ol type="1" start="1"><li>Turn
off Initial Skeletal Pose.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_physique_link.png"> In the
Blending Envelopes rollout &gt; Selection Level group, click the
Link button.</li><li>Select
one of the foot links, and increase the Radial Scale until any parts
of the foot that were sticking out are now following along with the
foot bone.</li><li>Copy
and paste the envelope settings to the other foot, or adjust them
manually.</li></ol>




<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c88"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c87"></a></span>Fine-tune
the ankle area:</p>
<ol type="1" start="1"><li>Click
the Link button, then click the calf link on the left leg.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c86"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_foot_spike.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b68"></a></span>In looking
at the pose on frame 10, you can see that parts of the shoe are
affected by the calf link, causing spikes to appear on the shoe. You'll
fix this problem by adjusting the Child Overlap parameter. This value
changes the length of the envelopes in the direction of the child link.
In this case, the foot link is the child of the calf link.</p>
</li><li>In
the Envelope Parameters group, decrease the Child Overlap setting
until the calf envelope no longer affects the vertices at the back
of the heel.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c85"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_child_adjust.png"></p>
</div>
<div style="margin-top:9pt"><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7139"></a></span><div class="note-note"><span class="label">Note</span>The
Parent Overlap parameter works in the opposite direction, increasing
or decreasing the length of the envelopes in the direction of the
parent link.</div></div>
</li><li>Copy
and paste the envelope settings to the opposite calf link.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b67"></a></span>Although
the hips are not deforming correctly just yet, the arms and legs
should now deform properly without vertices being left behind or
making unsightly spikes. If any problems remain, fix them by working with
the Radial Scale, Parent Overlap, and Child Overlap parameters.</p>
</li></ol>



<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c84"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c83"></a></span>Assign
a rigid envelope to the head:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b66"></a></span>The head is not expected to deform when the
biped is animated. To keep it from deforming, you'll assign rigid
vertices to it.</p>
<ol type="1" start="1"><li>Select
the character's head mesh, <em class="mild">Wilson Mesh Head</em>.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7138"></a></span><div class="note-note"><span class="label">Note</span>Because
the Physique modifier is instanced on both the mesh and head, it
doesn't matter whether the head, the mesh, or both objects are selected
when you adjust the head envelopes. Any changes to envelopes will take
place on both objects regardless of the current selection. You select
the head at this time only because it will be easier to see how
vertices are affected when you change the envelopes.</div></div>
</li><li>Access
the Envelope sub-object level for the Physique modifier.</li><li>Click
the head link to select it.</li><li>In
the Active Blending group, turn off Deformable and turn on Rigid.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b65"></a></span>Vertices
on the head turn green to indicate they are rigid.</p>
</li><li>Adjust
the outer envelope so it encompasses the head and a little of the
neck, but no more.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c82"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_physique_basics_head_rigid.png"></p>
</div>
</li></ol>





<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c81"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6c80"></a></span>Save
your work:</p>
<ul><li>Save
your scene as <em class="strong">my_wilson_envelopes.max</em>.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1b64"></a></span>A scene
with adjusted envelopes can be found in the file <em class="mild">envelopes_wilson_complete.max</em>.</p>
</li></ul>


<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body></html>
