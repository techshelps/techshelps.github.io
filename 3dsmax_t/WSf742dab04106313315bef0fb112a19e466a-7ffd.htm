<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Creating Cigarette Smoke</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Creating Cigarette Smoke"><meta name="keywords" content="cigarette smoke, particle systems:creating cigarette smoke,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab04106313315bef0fb112a19e466a-7ffd.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Non-Event-Driven Particle Systems</div><a href="WSf742dab04106313315bef0fb112a19e466a-7ffe.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Non-Event-Driven Particle Systems</div><a href="WSf742dab04106313315bef0fb112a19e466a-7ffe.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Creating Gushing Water</div><a href="WSf742dab04106313315bef0fb112a19e466a-7ffc.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-73a2.htm">Special Effects</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7fff.htm">Particle Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7ffe.htm">Non-Event-Driven Particle Systems</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Creating Cigarette Smoke</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab04106313315bef0fb112a19e466a-7ffd"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fba"></a></span>

In
this lesson, you use a particle system to create a stream of cigarette
smoke trailing from an ashtray. The animation relies on space warps
to affect the movement of the smoke. For example, you use a Wind
space warp to model the fan in the scene blowing the smoke around.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7392"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/il/il_t16a_finished.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fbb"></a></span>Animation techniques used in this lesson:</p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7391"></a></span>
<ul><li>Creating
a particle system.</li><li>Creating
space warps that affect the motion of the particles.</li><li>Choosing
appropriate particle geometry.</li><li>Creating
a material that models smoke when applied to particles.</li></ul>




<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7390"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738f"></a></span>Set
up the scene:</p>
<ul><li>Open <span class="filePath">cigarette_smoke.max</span>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fbd"></a></span>All the
files necessary for this tutorial are provided on the program disc
in the <em class="mild">\tutorials\simple_particle_effects</em> directory.
Before starting the tutorials, copy the <em class="mild">\tutorials</em> folder
from the disc to your local program installation.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fbe"></a></span>The scene
contains a simple table, an ashtray, and a fan. To make the animation
easier to adjust, the fan&#8217;s geometry (except for the fan motor)
is frozen.</p>
</li></ul>

<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738e"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738d"></a></span>Create
the particle system:</p>
<ol type="1" start="1"><li>Activate
the Top viewport.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_objsel.png"> If you
need to, select the ashtray and click Zoom Extents Selected to fit
the ashtray in the viewport.</li><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_create.png"> <img src="./images/MED/3dsMaxTut/English/but/b_geom.png"> In the
Create panel, make sure Geometry is active, and choose Particle
Systems from the drop-down list.</li><li>On
the Object Type rollout, click Super Spray.</li><li>In
the Top Viewport, click and drag in the ashtray near the tip of
the cigarette object.</li></ol>





<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_sspray_top.png"></p>
<p class="figure-title">Super spray particle system in the Top viewport</p>
</div>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_sspray_usr.png"></p>
<p class="figure-title">Super spray particle system in a user view</p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fbf"></a></span>You have now created a Super Spray particle
system. The icon you see is called the <em class="mild">emitter</em>. The
emitter doesn't render, but it shows the location in the scene where
particles will be emitted. The arrow points up, indicating that
initially particles will move upward out of the center of the icon.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc0"></a></span>When you create a Super Spray system, the particles
are emitted toward you in the viewport you click. That is, they
move along the Z axis in the positive direction. This is why we
used the Top viewport to create the system.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc1"></a></span>(Different kinds of particle systems have differently
shaped emitters, and different emission behavior.)</p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-738a"></a></span>
<ul><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Activate
the Camera02 viewport, and then click Play.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc2"></a></span>A burst
of particles leaves the emitter rapidly, moving in a vertical line.
Each particle is displayed as a plus sign or &#8220;tick.&#8221; By frame 40,
all of the particles have moved out of the frame. This doesn't look
much like smoke.</p>
</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc3"></a></span>You are seeing the default behavior and settings
for Super Spray. To get a more smoke-like effect, the first thing
to do is adjust the Super Spray parameters.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7389"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7388"></a></span>Slow
the particles down and make them easier to visualize:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_modify.png"> With
the Super Spray particle system selected, go to the Modify panel.<div><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7da0"></a></span><div class="note-tip"><span class="label">Tip</span>Particle systems have a large number of
rollouts. If you like, you can expand the command panel to see more
rollouts and controls at once. Move your mouse to the border between
the command panel and the viewports, and drag the command panel
to create multiple columns. The command panel can be widened whether
it is floating or docked. To dock or float a command panel, right-click
to one side of the tabs, and choose Float or Dock from the flyout
menu.</div></div>
</li><li>In
the Basic Parameters rollout &gt; Viewport Display group, change
the display type to Dots rather than Ticks.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc4"></a></span>For the
purpose of working in viewports, especially when particles are very
close together, Dots give a better preview than the plus-sign Ticks.</p>
</li><li>In
the Basic Parameters rollout &gt; Particle Formation group, set the
Spread value for Off Axis to <em class="strong">2.0</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc5"></a></span>(This is
the Spread spinner immediately below the Off Axis spinner, and not
the Spread value associated with Off Plane.)</p>
</li><li>In
the Particle Generation rollout &gt; Particle Motion group, set Speed
to <em class="strong">1.5</em>.</li></ol>




<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc6"></a></span>Now if you play the animation, you see the particles
stream upward more slowly. The slight increase in the Spread value
means they don't move in a completely straight line. (Spread is
measured in degrees. Higher Spread values create a more fan-like
pattern.)</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc7"></a></span>However, the particles stop emitting at frame
30 and completely disappear from the scene at frame 100. To get
a smoke effect, you also need to change the default values that
govern particle generation and lifetime.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7387"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7386"></a></span>Adjust
particle generation:</p>
<ol type="1" start="1"><li>In
the Particle Generation rollout &gt; Particle Quantity group, set Use
Rate to <em class="strong">30</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc8"></a></span>This increases
the number of particles generated per frame from 10 to 30.</p>
<div><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d9f"></a></span><div class="note-note"><span class="label">Note</span>When you play the animation in the Camera02
viewport, you don't see 30 particles being emitted per frame. By
default, in viewports, Super Spray displays only 10 percent of the
particles actually being emitted. This keeps viewport playback fast.
You can adjust the preview value in the Viewport Display group of
the Basic Parameters rollout, but we recommend you keep it low.
Previewing a large percentage of particles in a system can seriously
slow down <span class="charspan-special">3ds Max</span>.
When you render the animation, the rendering uses the full number
of particles.</div></div>
<div><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d9e"></a></span><div class="note-tip"><span class="label">Tip</span>A better way to preview the effect of all
particles is to use the command Rendering &gt; Make Preview.</div></div>
</li><li>Also
on the Particle Generation rollout, in the Particle Timing group,
set both Emit Stop and Display Until to <em class="strong">300</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fc9"></a></span>The animation
is 300 frames long. Setting Emit Stop to 300 means that particles
continue to be emitted throughout the animation. Setting Display
Until to the same value means that all particles that haven't died
remain in the scene until the end of the animation.</p>
</li><li>Continuing
down, set the Life value to <em class="strong">180</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fca"></a></span>A particle
in this system dies 180 frames after it is emitted. Not all of the
particles will last until frame 300.</p>
</li></ol>



<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fcb"></a></span>Now the particles emerge in a denser cloud that
doesn't move right out of the scene. This is more reminiscent of
smoke. But the movement of the particle system still looks artificial.</p>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7385"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e80611"></a>Adding Wind, Turbulence, and Drag</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fcc"></a></span>Particles are not smart. Like sheep, you need
to herd them. Space warps such as Wind and Gravity add directional
fields that affect particle motion. In this simulation of cigarette
smoke, you'll associate the fan with a Wind space warp that models
the breeze from the fan.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7384"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7383"></a></span>Create
a wind space warp to simulate a breeze from the fan:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_create.png"> <img src="./images/MED/3dsMaxTut/English/but/b_swarp.png"> Go to
the Create Panel and turn on the Space Warps button.</li><li>Make
sure Forces is the active space warp type.</li><li>In
the Object Type rollout, click Wind.</li><li>Drag
in the Left viewport to create the Wind space warp.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7382"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_wind_lft.png"></p>
<p></p><p class="figure-title">Wind space warp created in Left viewport (facing
away from user)</p>
</div>
</li></ol>




<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7381"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7380"></a></span>Position
the wind space warp:</p>
<ul><li>
<img src="./images/MED/3dsMaxTut/English/but/b_rotate.png"> <img src="./images/MED/3dsMaxTut/English/but/b_move.png"> Activate
the Top viewport. Using Rotate and Move transforms, align the Wind
space warp roughly to that of the fan. The arrow should point in
the direction of the particles.</li></ul>

<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_wind_top_before.png"></p>
<p class="figure-title">Wind space warp in Top viewport, before aligning
to fan</p>
</div>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_wind_top_after.png"></p>
<p class="figure-title">Wind space warp in Top viewport, after aligning
to fan</p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fcd"></a></span>You don't have to be too accurate about aligning
the Wind icon with the fan motor. The wind direction, and linking
it to the motor's motion, are the important things.</p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737d"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737c"></a></span>Link
the wind to the fan so their motion is coordinated:</p>
<ul><li>
<img src="./images/MED/3dsMaxTut/English/but/b_link.png"> With
the Top viewport still active and the Wind space warp still selected,
click Select And Link, then drag from the Wind space warp to the <em class="mild">FanMotor</em> object.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fce"></a></span>Now if
you play the animation, the Wind space warp rotates with the oscillating
fan. Nothing has changed the animation of the particles. They are
unaffected by the Wind space warp until you explicitly bind them
to it.</p>
</li></ul>

<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737b"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-737a"></a></span>Bind
the wind space warp to the smoke particles:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_objsel.png"> Select
the Super Spray particle system.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_bind_.png"> Click
Bind To Space Warp, then click the Super Spray system, and hold
the button down as you drag to the Wind space warp.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fcf"></a></span>When Bind
To Space Warp is active and the cursor is over a selected object,
the cursor changes to the space warp icon to inform you that this
object can be bound to a space warp. Then when you drag from the
object to the space warp, a line is drawn to show which object is
being bound. Once off the object, the cursor changes again until
it&#8217;s over a suitable space warp. Then it reverts to the space warp
icon to inform you that this binding is legal. When you release
the mouse, the bound space warp briefly highlights to indicate the
binding is complete.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Activate
the Camera02 viewport, then play the animation.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd0"></a></span>The effect
of the wind is much too strong. The smoke is whipped around dramatically.</p>
</li></ol>



<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7379"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7378"></a></span>Adjust
the strength of the wind:</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd1"></a></span>By default, the Wind space warp&#8217;s Strength value
is 1.0. Reducing the Strength value makes the effect of the fan
look more realistic.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_objsel.png"> Select
the Wind space warp.</li><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_modify.png"> In the
Modify panel, set the Strength value to <em class="strong">0.03</em>.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Activate
the Camera02 viewport, then play the animation.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd2"></a></span>The smoke
is more gently wafted now. But you can make the smoke's appearance
more realistic still, by giving it a bit of inertia. To do so, you
use another space warp.</p>
</li></ol>



<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7377"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7376"></a></span>Add
a drag space warp:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_create.png"> <img src="./images/MED/3dsMaxTut/English/but/b_swarp.png"> Go to
the Create panel and click the Space Warps button.</li><li>Make
sure Forces is the active space warp type.</li><li>On
the Object Type rollout, click Drag.</li><li>In
the Top viewport, drag to create a Drag space warp near the Super
Spray.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7375"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_drag_top.png"></p>
<p></p><p class="figure-title">Drag space warp created in the Top viewport</p>
</div>
</li></ol>




<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7374"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7373"></a></span>Set
the drag space warp parameters:</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd3"></a></span>The Drag space warp has a large number of parameters.
For the purposes of this animation, you need to set only a few of
them: Time Off, and the Axis percentages for Linear Damping.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_modify.png"> With
the Drag space warp selected, go to the Modify panel. Set Time Off
to <em class="strong">300</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd4"></a></span>By default,
the Time Off value is 100, but you need Drag to be active for the
duration of the animation.</p>
</li><li>With
Linear Damping the active damping type, set the X and Y Axis percentages
to <em class="strong">1.0</em>, and the Z Axis percentage
to <em class="strong">2.0</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd5"></a></span>As with
Wind, the Drag space warp doesn't affect the particles until you
bind them to it.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7372"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7371"></a></span>Bind
the drag space warp to the smoke particles:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/but_bind_.png"> Click
Bind To Space Warp, then in the Top viewport click the Super Spray
system, and hold the button down as you drag to the Drag space warp.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd6"></a></span>Now a drag
force is applied to the particles. The force is non-uniform: there
is more drag along the Z-axis (up and down in the scene) than in
other dimensions.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Activate
the Camera02 viewport, then play the animation.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd7"></a></span>The effect
of the Wind space warp is decreased. The Drag warp slows down the
particles.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7370"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736f"></a></span>Add
turbulence to the wind:</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd8"></a></span>The smoke looks better, but its motion is still
unnaturally uniform. The solution is to make the Wind more turbulent.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_objsel.png"> Select
the Wind space warp.</li><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_modify.png"> On the
Modify panel, go to the Wind group box in the Parameters rollout.
Set Turbulence to <em class="strong">0.03</em>, Frequency to <em class="strong">0.12</em>,
and Scale to <em class="strong">0.1</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fd9"></a></span>The Turbulence
value controls how much the particles are perturbed from their position.
Frequency causes random variation in the turbulence, and Scale adjusts
the size of the turbulence field.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fda"></a></span>Why such
low values? Actually, a good rule of thumb for turbulence settings
is to start very low and work your way up. Turbulence creates a
fractal noise field that is localized to the Wind space warp icon.
The scale of this field needs to match the scale of your scene.
The easiest way to do this is to start with low values and then
increase them as needed.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Activate
the Camera02 viewport, then play the animation.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fdb"></a></span>The particles
move much more like cigarette smoke, with wispy sways and curls.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fdc"></a></span>Also, the
particles are blown in the current direction of the Wind space warp
on a given frame. The effect is not conical with attenuation as it
would be for an actual fan; instead, the effect of the wind and
its turbulence is parallel.</p>
</li></ol>



</div>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736e"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e80885"></a>Particle Geometry</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fdd"></a></span>While the movement of the smoke is now good,
the particle geometry needs some adjusting.</p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736d"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736c"></a></span>Preview
the particle system:</p>
<ul><li>Activate
the Camera02 viewport, then choose Animation &gt; Make Preview.
A Make Preview dialog appears. Leave the settings at their defaults,
and click Create. A Video Compression dialog appears. Use this dialog's
default settings as well, and click OK.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fde"></a></span>When the
preview completes, use Animation &gt; View Preview to view it as
an AVI movie.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/tut/t16a_preview.png"></p>
</div>
</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fdf"></a></span>The particles still appear as a bunch of solid-looking
dots (by default, they render as 3D triangles). To make them more
convincing as smoke, first you adjust the particle geometry, then
you apply an appropriate material to them.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-736a"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7369"></a></span>Change
the particle geometry:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_objsel.png"> Select
the Super Spray particle system.</li><li>
<img src="./images/MED/3dsMaxTut/English/tut/t_modify.png"> Go to
the Modify panel.</li><li>If
one of the space warp bindings is chosen in the modifier stack, click
the Super Spray entry so you can see the particle system's rollouts.</li><li>In
the Particle Type rollout &gt; Standard Particles group, choose Facing.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe0"></a></span>Facings
are square particles that are constantly oriented towards the camera.
If you rendered them as solid, they wouldn't appear realistic, either.
But facing particles are meant to have a material applied to them. When
facings are clumped together and a material gives them a degree
of transparency, you can achieve a fairly realistic smoke.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe1"></a></span>The size
of the particles is uniform. In general, when you want realistically
to model natural phenomena, you want to avoid uniformity.</p>
</li></ol>




<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7368"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7367"></a></span>Make
the particle geometry more random:</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe2"></a></span>Ideally, the particles should increase in size
after they are born, and then fade out as they die. The Grow For
and Fade For parameters let you do this. Also, to break up the unrealistic
uniformity of the particle size, you need to add some variation
to the size.</p>
<ol type="1" start="1"><li>With
Super Spray still selected and the Modify panel still active, go
to the Particle Size group near the bottom of the Particle Generation rollout.</li><li>Set
the Size to <em class="strong">2.0</em> and the Variation to <em class="strong">30</em> %.</li><li>Set
the Grow For value to <em class="strong">90</em> and Fade For to <em class="strong">30</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe3"></a></span>In these
last steps, you have increased the overall size of the particles
and randomized this size by plus or minus 30 per cent. Each particle now
grows for 90 frames, from an initial size of zero to the full size
it will achieve. Thirty frames before it dies, it begins to shrink
back down to a size of zero. (Remember that you have set each particle
to live for 180 frames.)</p>
</li></ol>



</div>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7366"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e80975"></a>Cigarette Smoke Material</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe4"></a></span>Now that you've adjusted the particle geometry,
you can shade the particles to look like smoke. The trick to this
is to use a soft, partially transparent material that allows the
particles to blend together and form a wispy smoke pattern. Because
the particles are rendered as square facing geometry, a radial gradient
with transparent edges can accomplish this.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7365"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7364"></a></span>Set
up the material:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_mat.png"> Open
the Material Editor.</li><li>Choose
an unused sample slot.</li><li>On
the Blinn Basic Parameters rollout, click the Diffuse color swatch
to display the Color Selector.</li><li>Set
the Diffuse color to pure white (Value=255).</li><li>Set
both the Specular Level and Glossiness values to <em class="strong">0</em>.</li><li>Turn
on the Self-Illumination Color check box.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe5"></a></span>The Self-Illumination
control changes from a spinner to a color swatch.</p>
</li><li>Click
the Self-Illumination color swatch. In the Color Selector, set the
self-illumination color to a medium gray (Value=<em class="strong">144</em>).</li><li>On
the Shader Basic Parameters rollout, turn on the Face Map toggle.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe6"></a></span>Use Face
Map shading with Facing particles, so that each rendered particle
displays the entire map.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe7"></a></span>You now
have a material that is pure white, partially self-illuminated with
a medium gray color, and face mapped for particles.</p>
</li></ol>








<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7363"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7362"></a></span>Assign
the material to the smoke particles:</p>
<ul><li>
<img src="./images/MED/3dsMaxTut/English/but/but_assgnm.png"> Click
Assign Material To Selection, or drag from the sample slot to the
Super Spray particle system.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe8"></a></span>A rendering
would show that the smoke is now more smoke-colored, but has hard,
jagged edges from the square facing particles.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7361"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/il/il_t16a_faces.png"></p>
<p></p><p class="figure-title">Smoke particles without transparency appear
too solid and jagged.</p>
</div>
</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fe9"></a></span>To soften the smoke, you create a radial gradient
with transparency at its edges.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7360"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-735f"></a></span>Make
a radial gradient map for the smoke particles:</p>
<ol type="1" start="1"><li>In
the Material Editor, open the Maps rollout and click the Opacity
map button.</li><li>In
the Material/Map Browser, choose Browse From: New, click Gradient,
and then click OK.</li><li>On
the Gradient Parameters rollout, change the Gradient Type to Radial.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_gotopa.png"> Click
Go To Parent to return to the base level of the material.</li><li>On
the Maps rollout, change the Opacity Amount value to <em class="strong">5</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fea"></a></span>The Gradient
map determines only five per cent of the opacity. Ninety-five percent
of the opacity is still controlled by the base Opacity parameter.
For smoke, make the particles as soft and semi-transparent as possible,
especially with high particle counts. So the Gradient map should be
the only thing that sets the Opacity of the particles, but you also
want the overall Opacity to be very low. For this animation, you
turn off the base Opacity value completely.</p>
</li><li>In
the Basic Parameters rollout, set the Opacity value to <em class="strong">0</em>.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16feb"></a></span>The rendered
scene now has very soft smoke that rises up, grows gradually in
size, and is blown around and perturbed by the wind from the fan.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-735e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/il/il_t16a_finished.png"></p>
</div>
</li></ol>






</div>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-735d"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e81099"></a>The Final Animation</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fec"></a></span>You are now ready to activate the Camera02 viewport
and render the entire animation. Even at low resolution, this can
take about half an hour. Alternatively, you can play the file <span class="filePath">cigarette_smoke.avi</span>, provided on
the Tutorial Files CD.</p>
</div>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-735c"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e81111"></a>Next</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16fed"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab04106313315bef0fb112a19e466a-7ffc.htm"><!--Reference = WSf742dab04106313315bef0fb112a19e466a-7ffc; Target topic = WSf742dab04106313315bef0fb112a19e466a-7ffc.htm-->Creating Gushing Water</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
