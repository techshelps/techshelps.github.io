<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Associating Bipeds with Delegates</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Associating Bipeds with Delegates"><meta name="keywords" content=""><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7fea.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Creating Character Families</div><a href="WSf742dab041063133fb5604511363e4556c-7feb.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Animating Biped Crowds</div><a href="WS1a9193826455f5ff13cfd6e1136132a36f-7cbf.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Setting Up Behaviors</div><a href="WSf742dab041063133fb5604511363e4556c-7fe9.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS1a9193826455f5ff13cfd6e1136132a36f-7cbf.htm">Animating Biped Crowds</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Associating Bipeds with Delegates</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7fea"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c86"></a></span>In this lesson, you'll associate each biped
in the Brown and Black families with its corresponding delegate.
You'll also set up a <em class="mild">motion flow</em> graph so each character
can choose from the same batch of motions over the course of the
simulation.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c85"></a></span>The behaviors in the crowd simulation are set
up to make the delegates wander around a camp, seeking the center
of the camp and other members of their families.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c84"></a></span>This series of lessons assumes a basic knowledge
of the crowd and motion flow systems. If you haven't done the tutorials <span class="hypertext">
<span class="char_link"><a href="WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm"><!--Reference = WS1a9193826455f5ff13cfd6e1136132a36f-7eaf; Target topic = WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm-->Animating Crowds</a></span>
</span> and <span class="hypertext">
<span class="char_link"><a href="WSf742dab041063133fb5604511363e4556c-7ff3.htm"><!--Reference = WSf742dab041063133fb5604511363e4556c-7ff3; Target topic = WSf742dab041063133fb5604511363e4556c-7ff3.htm-->Using Motion Flow</a></span>
</span>,
do these tutorials before proceeding. </p>
<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c83"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c82"></a></span>Set
up the lesson:</p>
<ol type="1" start="1"><li>Load
the file <em class="mild">tut_biped_crowds01.max</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c81"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_biped_crowd_start01.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c80"></a></span>This file contains a crowd scene with six delegates
and a ground plane. The delegates on one side represent the Black
family, while the others represent the Browns. At the center of
the ground plane is a box that represents the center of the pandas'
camp.</p>
</li><li>Select
the Crowd helper in a viewport, and go to the Modify panel.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_behav_assign.png"> On the
Setup rollout, click Behavior Assignments. The Behavior Assignments
and Teams dialog appears.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_behaviors.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7e"></a></span>Behaviors have been set up to make the mama
and baby bears seek their respective fathers, who wander from time
to time. They all seek the box in the center to a small degree,
which keeps the delegates from wandering too far away from the camp.
An Avoid behavior prevents collisions between all delegates.</p>
</li><li>Click
OK to close the Behavior Assignments and Teams dialog.</li><li>Play
the animation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7d"></a></span>Even though there are no bipeds in the scene
yet, the simulation has been solved with just the delegates. The
two sets of delegates alternately mingle in the center and wander
off as a family group.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7154"></a></span><div class="note-tip"><span class="label">Tip</span>
<img src="./images/MED/3dsMaxTut/English/but/b_edit_mult_delegates.png"> It's
a good practice to test the simulation with delegates only, to ensure
the behaviors are all working correctly. A common error is to test
behaviors with delegates moving at high speeds that do not accurately
approximate the speed of biped movement. Test the behaviors with
the delegates' average speed similar to speed the bipeds will use.
You can change all the delegates' average speed by selecting the
Crowd helper, and clicking Modify panel &gt; Setup rollout &gt;
Multiple Delegate Editing. In this simulation, the average delegate
speed is 2 units per frame. </div></div>
</li></ol>





<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7b"></a></span>Merge
the characters:</p>
<ul><li>Choose
File menu &gt; Merge, and choose the file <em class="mild">my_families.max</em>.
If you didn't create this file in the previous lesson, merge the
file <em class="mild">tut_families.max</em>. Choose all objects
in the scene for merging.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c7a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_biped_crowd_merge_pandas.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c79"></a></span>The families of pandas have been merged into
the scene. The bipeds are visible, but the skins have been merged
as hidden objects.</p>
</li></ul>

<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c78"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c77"></a></span>Pair
up bipeds and delegates:</p>
<ol type="1" start="1"><li>Select
the Crowd helper.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_bip_del_ass.png"> On the
Modify panel, in the Setup rollout, click the Biped/Delegate Associations
button.</li><li>Beneath
the Bipeds list, click the Add button. Select all the bipeds in
the scene.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c76"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowd_associate_bipeds_list.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c75"></a></span>The selected bipeds display on the dialog in
alphabetical order. You want the papa biped to be listed first for
each family.</p>
</li><li>Highlight <em class="mild">Black_Papa_Biped</em>,
and use the up arrow button at the center of the dialog to move
that biped to the top of the list. Use the same technique to move <em class="mild">Brown_Papa_Biped</em> to
the fourth position, above the two other Brown family bipeds.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c74"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowd_associate_bipeds_order.png"></p>
</div>
</li><li>Beneath
the Delegates list, click the Add button. Select all the delegates.</li><li>Make
sure the Make Specified Associations option is selected.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c73"></a></span>This will associate each biped with the delegate
directly across from it on the list.</p>
</li><li>Make
sure Set Delegates to Use Biped is turned on.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c72"></a></span>This option will turn on the Use Biped option
for each delegate in the scene, which will make it possible to create
a biped crowd simulation.</p>
</li><li>Click
the Associate button to associate the bipeds with delegates.</li><li>Save
the scene as <em class="strong">my_biped_crowds02.max</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c71"></a></span>Although each biped is now associated with its
respective delegate, the bipeds are not aligned with delegates.
This will happen later once you solve the simulation for the first
time. Before you can solve the simulation, however, you'll need
to set up a motion flow graph.</p>
</li></ol>









<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c70"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6f"></a></span>Set
up a motion flow graph:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6e"></a></span>You'll set up a motion flow graph that they'll
all share, also known as a <em class="mild">shared motion flow</em>. When solving
a simulation with delegate-controlled bipeds, Crowd uses this graph
to synthesize motion flow scripts for the bipeds. The motion is
shared, but Crowd typically generates a unique script for each biped,
depending on the behaviors influencing its delegate. This process
is <em class="mild">motion synthesis</em>.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7153"></a></span><div class="note-tip"><span class="label">Tip</span>
<img src="./images/MED/3dsMaxTut/English/but/but_biped_loadfile.png"> Before
creating the motion flow graph, you might find it helpful to look
at each of the clips to see what they contain. To do this, reset 3ds Max,
create a biped, and load each clip listed in step 5 by clicking Load
File on the Biped rollout. Watch the motion contained in each clip.
When you have finished looking at the motions, reload <span class="charspan-special">
<em class="mild">my_biped_crowds02.max</em>
</span> or <span class="charspan-special">
<em class="mild">tut_biped_crowds02.max</em>
</span>,
and continue from this point.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6d"></a></span></p>
</div></div>
<ol type="1" start="1"><li>Select
any part of one of the bipeds, and go to the Motion panel.</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/genflow.png"> Click
the Motion Flow Mode button.</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/mofldia.png"> In the
Motion Flow rollout, turn on the Show Graph button.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6c"></a></span>This opens an empty motion flow graph. As a
first step in creating the motion flow graph, you'll add all the
necessary clips.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7152"></a></span><div class="note-note"><span class="label">Note</span>
<img src="./images/MED/3dsMaxTut/English/but/but_motionflow_load_file.png"> If you
like, instead of creating the motion flow graph from scratch, you
can click Load Motion Flow Graph and load the file <span class="charspan-special">
<em class="mild">panda_crowd.mfe</em>
</span> file
in the <span class="charspan-special">
<em class="mild">tutorials\character_animation\biped_crowds</em>
</span> folder. If
you do, the Reset Unfound Motion Flow File dialog might appear to
ask you for the location of the first clip referenced by the graph.
If this occurs, navigate to the <span class="charspan-special">
<em class="mild">tutorials\character_animation\biped_crowds</em>
</span> folder under
your <span class="charspan-special">
<em class="mild">3dsmax</em>
</span> path, turn
on Add Directory to Search Path and Add Directory to .ini File,
and choose the first file requested. The remaining clips will be
located in the same folder, and the graph will load. If you do this,
skip this procedure and the next, and continue with the &#8220;Choose
starting clips&#8221; procedure to ensure starting clips are selected.</div></div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_mult_file.png"> On the
Motion Flow Graph dialog toolbar, click the Create Multiple Clips
button.</li><li>Navigate
to the <em class="mild">tutorials\character_animation\biped_crowds</em> directory
in your 3ds Max path, and open the following files.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7151"></a></span><div class="note-tip"><span class="label">Tip</span>You
can select multiple files in the Open dialog by using the <span class="charspan-special">
<em class="strong">SHIFT</em>
</span> or <span class="charspan-special">
<em class="strong">CTRL</em>
</span> keys.</div></div>
<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6b"></a></span>
<ul><li>
<em class="mild">panda_walk.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c6a"></a></span>
<ul><li>
<em class="mild">panda_walk_fast.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c69"></a></span>
<ul><li>
<em class="mild">panda_walk_slow.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c68"></a></span>
<ul><li>
<em class="mild">panda_walk_L45.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c67"></a></span>
<ul><li>
<em class="mild">panda_walk_R45.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c66"></a></span>
<ul><li>
<em class="mild">panda_walk_L90.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c65"></a></span>
<ul><li>
<em class="mild">panda_walk_R90.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c64"></a></span>
<ul><li>
<em class="mild">panda_walk_L135.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c63"></a></span>
<ul><li>
<em class="mild">panda_walk_R135.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c62"></a></span>
<ul><li>
<em class="mild">panda_walk_180.bip</em>
</li></ul>

<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c61"></a></span>
<ul><li>
<em class="mild">panda_loiter.bip</em>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c60"></a></span>In the Motion Flow Graph, the software creates
a clip for each file.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_motion_flow.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5e"></a></span>Each clip's file name describes its motion.
For example, <em class="mild">panda_walk_L90</em> has the biped make
a right-angle turn to the left while walking, and <em class="mild">panda_walk_180</em> has
the biped turn around and walk in the opposite direction.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7150"></a></span><div class="note-tip"><span class="label">Tip</span>Numerous clips are needed to give the bipeds
enough options to avoid one another during the simulation. The more
clips you have, and the greater the variety of clips, the more choices
the bipeds will have. In general, a minimum of eight clips is needed
for an effective biped crowd simulation.</div></div>
</li></ul>

</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/mfmove.png"> If you
like, use the Move Clip tool to rearrange the clips in the graph
in a circular arrangement.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-714f"></a></span><div class="note-tip"><span class="label">Tip</span>The
arrangement of clips in the graph does not affect the simulation,
but it can help you see your graph more clearly. For this graph,
a roughly circular arrangement with <span class="charspan-special">
<em class="mild">panda_walk.bip</em>
</span>, <span class="charspan-special">
<em class="mild">panda_walk_fast.bip</em>
</span>,
and <span class="charspan-special">
<em class="mild">panda_walk_slow.bip</em>
</span> at
the top will make it easy to see all the clips and transitions, and
to choose starting clips.</div></div>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5d"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_graph_arrange.png"></p>
</div>
</li></ol>






<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5b"></a></span>Create
a motion flow network:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c5a"></a></span>A motion flow network is a series of connections
between clips. When the crowd simulation solves, it will choose
a series of clips for the biped to follow. Transitions between clips
tell the crowd simulation that one clip can follow another in the
series.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/but_moflowgraph_select_clip_transition.png"> On the
Motion Flow Graph toolbar, click Select Clip/Transition.</li><li>Draw
a selection region around all the clips to select all of them.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_moflowgraph_create_all_transitions.png"> Click
Create All Transitions. When you are asked if you want to create
transitions from each clip to itself, click Yes.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c59"></a></span>Transitions are created between all clips, and
between each clip and itself.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c58"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_motion_flow_synthesize.png"></p>
</div>
<div style="margin-top:9pt"><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-714e"></a></span><div class="note-tip"><span class="label">Tip</span>
<img src="./images/MED/3dsMaxTut/English/but/but_moflowgraph_show_random_percentages.png"> You
can toggle the probability display by clicking Show Random Percentages.
The number 100 appears next to and between each transition to indicate
the probability of each transition being chosen during the transition.</div></div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c56"></a></span>Next, you will optimize the new transitions.
This will change each default transition to the best possible transition
for each pair of clips.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_moflowgraph_optimize_selected_transitions.png"> Draw
a selection region around all clips and transitions to select them.
Click Optimize Transitions. Accept the default values and click
OK. Wait a few moments while transitions are optimized.</li></ol>




<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c55"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c54"></a></span>Choose
starting clips:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c53"></a></span>Next, you must designate the possible starting
clips for the simulation.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-714d"></a></span><div class="note-note"><span class="label">Note</span>If you loaded the motion flow graph <span class="charspan-special">
<em class="mild">panda_crowd.mfe</em>
</span> instead
of creating the graph from scratch, the starting clips might or
might not be selected depending on whether the system had to look
for clips upon opening the graph. In this case, use this procedure
to ensure the starting clips are selected.</div></div>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_sel_random_clip.png"> In the
toolbar at the top of the Motion Flow Graph dialog, click the Select
Random Start Clips button. Hold down the CTRL key and choose <em class="mild">panda_walk</em>, <em class="mild">panda_walk_fast</em>, <em class="mild">panda_walk_slow</em>,
and <em class="mild">panda_loiter</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c52"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_shared.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c51"></a></span>The selected clips are displayed in purple with
a probability value (100). This means there is an equal probability
that any one of these clips will be selected as the starting clip
for the simulation. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c50"></a></span>The selection of <em class="mild">panda_loiter</em> as
a possible starting clip means a biped can start the simulation
by standing and waiting for other bipeds to pass by before it starts
moving.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4f"></a></span>Next, to share the motion flow network among
all the bipeds, you need to save it and then reload it with the
Shared Motion Flow dialog.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/moflsav.png"> On the
Motion panel, In the Motion Flow rollout, click the Save File button.
Save the motion flow network as <em class="mild">my_panda_crowd.mfe</em>. <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4e"></a></span>Next, you'll set up a shared motion flow.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4d"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4c"></a></span>Set
up a shared motion flow:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4b"></a></span>The motion flow graph must be &#8220;shared&#8221; among
all bipeds. For the best results, each biped sharing the motion
should be of the same scale. The black and brown fathers are the
same size, as are the two mothers and two children. You'll create
three separate motion flows, pairing up father, mother, and child
bipeds.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/cs/i_shared_moflow.png"> In the
Motion Flow rollout, click the Shared Motion Flow button.</li><li>In
the Shared Motion Flow dialog, click the New button to add a shared
motion flow, and change its name from <em class="mild">SharedMoFlow0</em> to <em class="strong">Fathers</em>.</li><li>In
the Shared Motion Flow dialog, click the Add button, and use the
Select dialog to add <em class="mild">Black_Papa_Biped</em> and <em class="mild">Brown_Papa_Biped</em> to
the shared motion flow.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c4a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_biped_crowds_associating_bipeds_share.png"></p>
</div>
</li><li>In
the Parameters group, click the Load .mfe button, and open the <em class="mild">my_panda_crowd.mfe</em> file
you saved previously. Wait a few moments while the graph loads.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_put_bips_moflo.png"> Click
Put Multiple Bipeds In Motion Flow.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c49"></a></span>This turns on Motion Flow mode for the bipeds
listed in the dialog. Bipeds must be in Motion Flow mode in order
to work with a crowd simulation.</p>
</li><li>Click
OK to close the dialog.</li></ol>






<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c48"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c47"></a></span>Set
up the remaining shared motion flows:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/cs/i_shared_moflow.png"> Click
Shared Motion Flow again.</li><li>Click
New to create another shared motion flow named <em class="strong">Mothers</em>,
and apply it to <em class="mild">Black_Mama_Biped</em> and <em class="mild">Brown_Mama_Biped</em>.
Put these bipeds in Motion Flow mode, and click OK to close the
dialog.</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/i_shared_moflow.png"> Click
Shared Motion Flow again. Create another shared motion flow named <em class="strong">Children</em>,
and apply it to <em class="mild">Black_Baby_Biped</em> and <em class="mild">Brown_Baby_Biped</em>.
Put these bipeds in Motion Flow mode.</li><li>Click
OK to exit the dialog.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c46"></a></span>
<img src="./images/MED/3dsMaxTut/English/but/but_shared_motion_flow_on.png"> The
Shared Motion Flow button appears with a white circle, indicating
that the currently selected biped is part of a shared motion flow
network.</p>
</li><li>Close
the motion flow graph, if it is open.</li><li>Save
your work as <em class="mild">my_biped_crowds03.max</em>
</li></ol>






<div class="section"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c45"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e44394"></a>Next</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7c44"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab041063133fb5604511363e4556c-7fe9.htm"><!--Reference = WSf742dab041063133fb5604511363e4556c-7fe9; Target topic = WSf742dab041063133fb5604511363e4556c-7fe9.htm-->Setting Up Behaviors</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
