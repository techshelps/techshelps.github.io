<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Applying Avoidance</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Applying Avoidance"><meta name="keywords" content="applying:avoidance, animating:behavior assignments, avoidance behavior,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7ff6.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Using Multiple Delegates and Behaviors</div><a href="WSf742dab041063133fb5604511363e4556c-7ff7.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Animating Crowds</div><a href="WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Applying Logic to Crowd Behavior</div><a href="WSf742dab041063133fb5604511363e4556c-7ff5.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313363d7aea112a19e2fe5-8000.htm">Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS1a9193826455f5ff13cfd6e1136132a36f-7eaf.htm">Animating Crowds</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Applying Avoidance</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7ff6"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e49"></a></span>


In the previous lesson, you might have noticed
that the delegates penetrated each other when they were close to
the box. In this lesson, you'll learn to use the Avoid behavior
to prevent delegates from colliding. You'll also learn to apply
a second "desired direction" behavior to the Seek team and animate
the behaviors' influences.</p>
<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e45"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e44"></a></span>Set
up the lesson:</p>
<ul><li>Open
the file you saved at the end of the previous lesson. Or, if you
like, open the file <em class="mild">crowd_basics02.max </em>from the <em class="mild">tutorials\character_animation\crowd_basics</em> directory,
in your 3ds Max path.</li></ul>

<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e43"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e42"></a></span>Add
the Avoid behavior:</p>
<ol type="1" start="1"><li>Select
the Crowd object.</li><li>Add
an Avoid Behavior.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e41"></a></span>Like Seek and Repel, the Avoid behavior has
a button for specifying a single object to avoid. But in this case,
you want to specify several Avoid objects, so you use the Multiple
Selection button.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_selmult.png"> On the
Avoid Behavior rollout, click Multiple Selection.</li><li>Highlight
all objects (the delegates and the box), and click Select.</li><li>Use
the Behavior Assignment dialog to apply the Avoid behavior to the Seek
team.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e40"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/cs/tut8_lsn3_stp6.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3f"></a></span>When you click New Assignment, the Avoid behavior
appears in the assignments list above the Seek behavior. That's
because the list is sorted alphabetically, starting with the leftmost
column. By default, all behaviors are applied simultaneously, so
when you solve, both the Seek and Avoid behaviors are applied to
the Seek team at each frame.</p>
</li><li>Solve
the simulation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3e"></a></span>For the most part, the delegates now stay far
away from each other and the target box. </p>
</li></ol>






<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3d"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3c"></a></span>Use
visual cues:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3b"></a></span>You can get a better idea of how Avoid works
by turning on its various feedback options. These give visual cues
for distance-related settings and activities.</p>
<ol type="1" start="1"><li>On
the Avoid Behavior rollout, turn on Display Hard Radius and Display Repel
Radius.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e3a"></a></span>Wireframe spheres appear around the delegates,
showing the respective radii. </p>
</li><li>Turn
off Display Hard Radius and Display Repel Radius to avoid an overly complex
display.</li><li>On
the Avoid Behavior rollout &gt; Display During Solve group, turn
on Potential Collisions, Repel Activity, and Look Ahead Radius. </li><li>Solve
again.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e39"></a></span>During the solution, white lines appear indicating
Potential Collisions detection; colored lines indicate Repel Activity
calculations, and spheres indicate Look Ahead radii. The latter
are available only during solution, because the distance must be
computed from the Look Ahead setting and the delegate's current
velocity.</p>
</li></ol>




<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e38"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e37"></a></span>Adjust
the behavior:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e36"></a></span>The delegates give each other a wide berth because
the Look Ahead setting, which tells delegates how many frames to
look ahead for potential collisions before turning to avoid each
other, is set to the fairly large default value of 30. The delegates
can get closer to each other if you reduce this amount.</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/b_selmult.png"> On the
Avoid Behavior rollout, set Look Ahead to <em class="strong">3</em>.</li><li>Solve
the simulation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e35"></a></span>This time the Seek Team delegates don't stay
quite so far apart. In fact, you might see some interpenetration,
because the small Look Ahead setting doesn't give them enough to
time to start turning to avoid each other. The best settings for
Avoid, as with most other behaviors and Crowd settings, depend on
the situation, and finding them usually takes trial and error.</p>
</li></ol>


<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e34"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e33"></a></span>Change
the behavior:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e32"></a></span>Next, you'll make the delegates stop seeking
the box and start moving away when they reach it. You can do this
by assigning the existing Repel behavior to the Seek team and activating
it at the proper frame while simultaneously deactivating the Seek
behavior. </p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e31"></a></span>First, examine the animation to determine when
to change the behaviors.</p>
<ol type="1" start="1"><li>Move
the time slider back and forth to find frame where the delegates come
closest to the box.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e30"></a></span>Choose frame 70, or a frame near frame 70.</p>
</li><li>Move
the time slider back to frame 0. Turn on the Auto Key button.</li><li>Open
the Behavior Assignments dialog, and assign the Repel behavior to the
Seek team.</li><li>In
the Behavior Assignments list, click the Seek Team Repel Behavior
item.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2f"></a></span>The corresponding items in the Assignment Design
group are highlighted, and the controls at the bottom of the Behavior
Assignments group become available.</p>
</li><li>At
the bottom of the Behavior Assignments group, turn off Active.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2e"></a></span>The X next to the assignment in the list disappears,
indicating that the assignment is inactive. This setting is animatable,
so you can directly control which assignments are active on a frame-by-frame
basis throughout the animation.</p>
</li><li>Drag
the time slider to frame 70.</li><li>Turn
on Active for the Seek Team Repel Behavior assignment. Then choose the
Seek Team Seek Behavior assignment, and turn off Active.</li><li>Drag
the time slider back and forth to either side of frame 70 and watch the
Behavior Assignments list.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2d"></a></span>At the same time that the Repel behavior turns
on, the Seek behavior turns off.</p>
</li><li>Close
the dialog, and turn off Auto Key.</li><li>Solve
the simulation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2c"></a></span>At frame 70, the delegates stop seeking the
box, turn abruptly, and begin to move away.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2b"></a></span>For a more gradual change, you can animate the
Weight setting. This controls the relative influence of the behavior
over the delegates, and ranges from 0 to 1.0.</p>
</li></ol>










<div class="section"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e2a"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e33430"></a>Next </p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7e29"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab041063133fb5604511363e4556c-7ff5.htm"><!--Reference = WSf742dab041063133fb5604511363e4556c-7ff5; Target topic = WSf742dab041063133fb5604511363e4556c-7ff5.htm-->Applying Logic to Crowd Behavior</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
