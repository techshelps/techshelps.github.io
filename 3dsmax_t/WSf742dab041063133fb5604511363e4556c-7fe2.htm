<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Applying Final Touches</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Applying Final Touches"><meta name="keywords" content=""><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7fe2.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Creating Branching Paths</div><a href="WSf742dab041063133fb5604511363e4556c-7fe3.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Visualizing Flow Through Tubes</div><a href="WSf742dab041063133fb5604511363e4556c-7fe6.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Creating the Sun with a Lens Flare</div><a href="WSf742dab04106313315bef0fb112a19e466a-7ff8.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-73a2.htm">Special Effects</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7fff.htm">Particle Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7ffb.htm">Working with Particle Flow</a>&nbsp;&gt;&nbsp;<a href="WSf742dab041063133fb5604511363e4556c-7fe6.htm">Visualizing Flow Through Tubes</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Applying Final Touches</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7fe2"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b51"></a></span>The scene is nearly complete. The particles
appear as colored arrows that branch along different spline paths
and change colors depending on which path they follow. One issue
remains: The particles collect at the ends of the paths when they
complete the Speed By Icon animation. Since this is a visualization
scene and a constant flow is required, you&#8217;d ideally just want to
delete particles as they arrive at the end of the paths. There are
several different ways to do this, but one simple one is to just
define a condition where particles are deleted when they come to
a stop. While there isn&#8217;t a test that&#8217;s designed specifically for
this, you can use the Speed Test operator and pass the result to
a Delete operator. Here&#8217;s how you do it:</p>
<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b50"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4f"></a></span>Apply
finishing touches:</p>
<ol type="1" start="1"><li>Continue
from the previous lesson or load the file <span class="filePath">VizGasFlow_final_touches_start.max</span> from
the <em class="mild">\tutorials\mech_design</em> folder.
Open Particle View, if necessary, by pressing <span class="keyCaps">6</span> on
the keyboard.</li><li>Right-click
the Emit Particles event and choose Append &gt; Test &gt; Speed
Test.</li><li>Highlight
Speed Test 01 and set it to Test True If Particle Value &gt; Is
Less Than Test Value. Change Test Value to <em class="strong">1.0</em>. <span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow37.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4d"></a></span>By default, the Speed Test tests Velocity Magnitude,
which is a fancy way of saying &#8220;speed in any direction.&#8221; If necessary
(not in this case), you can make it more specific by testing velocity
along a specific axis. By setting it to &#8220;Less than 1&#8221; it will direct
particles that slow to a stop to a new event.</p>
</li><li>From
the depot, drag a Delete operator into an empty area of the event
display to create a new event.</li><li>Rename
the new event <em class="strong">Delete Particles</em>, and wire it
to the output of the Speed Test in the Emit Particles event.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow38.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4b"></a></span>You&#8217;ve created a test for the Emit Particles
event, the result of which can be seen in the animation now. The
Red particles moving along the center tube disappear when they reach
the end. Ideally you&#8217;d want this for the other events as well. There
are several ways to accomplish this, but the easiest is just to
apply the test globally.</p>
</li><li>Drag
Speed Test 01 from the Emit Particles event to the bottom of the
PF Source 01 event.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b4a"></a></span>The test's wiring (to the Delete operator) moves
along with it.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b49"></a></span>Now every particle disappears as soon as it
comes to the end of its path.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b48"></a></span>The only potential drawback with this method
is a loss of flexibility. By applying a test globally, all particles
within the system, regardless of any other parameters or conditions,
will be tested for speed and sent to the Delete Particles event.
If you need to test for different conditions, you can include the
test in each event instead.</p>
</li></ol>






<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b47"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b46"></a></span>Apply
BlobMesh</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b45"></a></span>Suppose your goal is not so much an abstract
visualization with arrow indicators, but something more realistic.
BlobMesh is a special compound object in 3ds Max that you can
use to simulate fluids. It works something like the MetaParticles
effect in the non-event-driven particle systems.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b44"></a></span>In this procedure, you'll use BlobMesh to simulate
the flow of liquids in the upper and lower tubes.</p>
<ol type="1" start="1"><li>On
the Create panel, choose Compound Objects &gt; BlobMesh and click
in the viewport to create a BlobMesh object.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b43"></a></span>The BlobMesh object references objects in the
scene, placing user-definable metaballs at each vertex in the object.
When of sufficient size and density, the metaball&#8217;s surface features
blend together to form a continuous blob.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b42"></a></span>You first have to assign an object for the BlobMesh
to reference: in this case, the particle system you&#8217;ve been working
on during this tutorial. </p>
</li><li>With
the BlobMesh object selected, go to the Modify Panel, click the
Add button in the Blob Objects group and choose PF Source 01 from the
list.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b41"></a></span>This applies to the system as a whole, however,
so next you'll define which events to include in the blobby mesh.</p>
</li><li>Scroll
down to the Particle Flow Parameters rollout and turn off the All
Particle Flow Events option.</li><li>Still
in the Particle Flow Parameters rollout, click the Add button and
choose PFSource 01 &gt; Flow South and PFSource 01 &gt; Flow North events
from the list. Click OK.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b40"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow39.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b3f"></a></span>If you scrub the time slider now, you'll see
blobs forming around the particles as they branch off into the north
and south tubes. The flow doesn't look very liquid because there
aren't enough particles. If you like, try increasing the Viewport
% setting until you get enough particles for the blobs to flow together.
You can find this setting by clicking the PF Source 01 event and
then going to the parameters panel &gt; Emission rollout &gt; Quantity
Multiplier group.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b3e"></a></span>You can find the final scene, without an increased
Viewport % setting, in the file <span class="filePath">VizGasFlow_finished.max</span>.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b3d"></a></span>An important consideration when using BlobMesh
with Particle Flow is that the size of the blob is determined by
the size of the particles; the BlobMesh Size parameter is ignored.
You can see this by adjusting the Scale value in the Shape Instance
operator. In some cases you&#8217;ll need greater quantities of smaller
particles. But as you increase the volume of particles, performance
tends to decrease. This is because BlobMesh analyzes the particles
at every frame. For faster feedback during setup of the particle
system, you can turn on the BlobMesh Off In Viewport option to restrict
its calculations to render time.</p>
</li><li>For
an example of a MetaParticles scene, load and play <span class="filePath">VizGasFlow_Blobs.max</span>.</li></ol>





<div class="section"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b3c"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e83547"></a>Summary</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b3b"></a></span>Use a particle system for simulating the flow
of gaseous or liquid substances through pipes or tubing. With Particle
Flow, use a Speed By Icon operator to make the particles follow
a path, and use a Find Target test to divert the flow into different
branches of the tubing. Use arrow-shaped particles to indicate flow
direction, or to make the flow look more realistic, apply the BlobMesh
compound object.</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body></html>
