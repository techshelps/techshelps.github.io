<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Creating Branching Paths</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Creating Branching Paths"><meta name="keywords" content=""><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7fe3.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Creating Particle Motion</div><a href="WSf742dab041063133fb5604511363e4556c-7fe4.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Visualizing Flow Through Tubes</div><a href="WSf742dab041063133fb5604511363e4556c-7fe6.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Applying Final Touches</div><a href="WSf742dab041063133fb5604511363e4556c-7fe2.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-73a2.htm">Special Effects</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7fff.htm">Particle Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313315bef0fb112a19e466a-7ffb.htm">Working with Particle Flow</a>&nbsp;&gt;&nbsp;<a href="WSf742dab041063133fb5604511363e4556c-7fe6.htm">Visualizing Flow Through Tubes</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Creating Branching Paths</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7fe3"></a></span>

<!--Body-->
<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7f"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7e"></a></span>Create
branching paths:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7d"></a></span>One of Particle Flow's unique capabilities is
that it lets you create branching events that are controlled by
conditions. You do this with a type of action called a <em class="mild">test</em>,
which defines a true or false condition against which the software
continually checks each particle. When a test returns False, the
particle stays in the current event, but if the result is True the
particle can move to another event that specifies different behavior.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7c"></a></span>In this procedure you&#8217;ll use Find Target tests
to cause some particles to change course and flow along different
paths.</p>
<ol type="1" start="1"><li>Continue
from the previous lesson or load the file <span class="filePath">VizGasFlow_create_branching.max</span> from
the <em class="mild">\tutorials\mech_design</em> folder.
Open Particle View if necessary.</li><li>Right-click
the Emit Particles event and choose Append &gt; Test &gt; Find Target
from the menu.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow22.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b7a"></a></span>The Find Target test is used primarily to set
a goal for particles. Its options include moving particles to the
goal based on speed or time. In addition, you can use it as a simple
proximity test, without affecting particle motion at all, as you'll
do next.</p>
</li><li>Click
the Find Target operator and, from the drop-down list at the top
of the parameters rollout, choose No Control.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b79"></a></span>This disables most of the test's parameters.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b78"></a></span>When you created the Find Target test, it added
a helper object to your scene called Find Target 01. This is now
the target for the particles within this event; the software will
test each particle based on its distance from the helper object.</p>
</li><li>In
the Find Target test parameters, set the Test True If Distance To
option to Target Pivot, and set the Is Less Than value to <em class="strong">5.0</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b77"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow23.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b76"></a></span>One visible difference between tests and operators
is that tests have a little &#8220;nub&#8221; that sticks out to the side. You
use this to wire the output of the test to the input of another
event. The result is that particles that test True will go to the
next event.</p>
</li><li>Right-click
to the right side of the Emit Particles event in the blank space
of Particle View and choose New &gt; Operator Event &gt; Speed By Icon
from the menu.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b75"></a></span>You&#8217;ve created a new event containing a single
operator. This is what you will connect the output of the Find Target
test to. But first you'll take some simple but important organizational
steps.</p>
</li><li>Rename
the new event <em class="strong">Flow North</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b74"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow24.png"></p>
</div>
</li><li>Move
the mouse cursor to the left edge of the Find Target test, where
the nub is. When the cursor changes to horizontal black arrows, click
and drag the cursor to the right side of the Find Target test and
release the button.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b73"></a></span>You&#8217;ve given the new event a more descriptive
name, and you&#8217;ve also moved the output connector on the Find Target
test operator to the opposite side so that the wire can travel in
a more direct path.</p>
</li><li>Click
and drag from the small blue dot on the end of the test connector
to the input connector of the Flow North event. The result is a blue
wire connecting the Find Target test to the Flow North event.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b72"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow25.png"></p>
</div>
</li></ol>








<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b71"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b70"></a></span>Set
up the Flow North event:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6f"></a></span>The output of the Find Target test is set up
correctly, but the Flow North event isn&#8217;t. The only operator within
the event is a Speed By Icon operator that isn&#8217;t animated. You&#8217;ll
animate its icon along a new path so that particles that enter this
event move to that path.</p>
<ol type="1" start="1"><li>In
the parameters of the Speed By Icon operator in the Flow North event,
make sure Icon Animation &gt; Sync By is set to Event Duration.</li><li>Rename
the operator <em class="strong">Icon North</em>.</li><li>Press <em class="strong">H</em> and
choose the <em class="mild">Icon North</em> helper object.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow26.png"></p>
<p></p><p class="figure-title">Select the Icon North helper object.</p>
</div>
</li><li>From
the Animation menu, choose Constraints &gt; Path Constraint and
complete the action by choosing the Path North spline as the path.</li><li>On
the Motion Panel &gt; Path Parameters rollout, turn on Path Options
&gt; Follow and set Axis to Z.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6d"></a></span>When you use a Path constraint, the software
sets default keys at the first and last frames of the animation.
For this animation, you&#8217;ll need to adjust the keys for both the <em class="mild">Icon
Main</em> and the <em class="mild">Icon North</em> helper objects.</p>
</li><li>In
the track bar, move the rightmost key to frame 100.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow27.png"></p>
</div>
</li><li>Select
the <em class="mild">Icon Main</em> helper object and slide
its rightmost key to 150.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6b"></a></span>This effectively increases the speed of each
icon along its path.</p>
</li><li>In
the Icon North operator parameters, turn on Use Icon Orientation.</li><li>Turn
on the Steer Towards Trajectory check box and set the Distance value
to <em class="strong">5.0</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b6a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow28.png"></p>
</div>
<div style="margin-top:9pt"><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d96"></a></span><div class="note-tip"><span class="label">Tip</span>In addition to using Particle View, you
can use the Modify panel to set parameters for a Speed By Icon operator
or a Find Target test if you select its icon.</div></div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b69"></a></span>Because of the way the scene was originally
set up, the Find Target icon is created close to the correct position
to determine whether particles should switch to the upper tube.
In the next step you'll move it upward slightly, but in many cases
you'll need to reposition the target by a greater amount.</p>
</li><li>Select
the <em class="mild">Find Target 01</em> helper object and
move it 7 units upward, along the Z axis, so that it&#8217;s slightly above
the center line of the main path.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b68"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow29.png"></p>
<p></p><p class="figure-title">Some of the arrows now move upwards.</p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b67"></a></span>If you play the animation now, you see some
of the arrows change direction and move upwards along the second
path. All of the particles continue to point in the same direction
because the Flow North event doesn&#8217;t have a Rotation operator to
define their orientation. To resolve this, you could add another
Rotation operator using identical parameters, or you could instance
the first one. Even better: All particles in this system should
point in the direction they&#8217;re traveling, so you can just move the
Rotation operator from the Emit Particles event to the global event.</p>
</li><li>Drag
the Rotation operator from the Emit Particles event into the PF
Source 01 event. Be sure to drop it when you see a blue line, not
a red one.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b66"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow30.png"></p>
<p></p><p class="figure-title">The upward-moving arrows now point in their
direction of motion.</p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b65"></a></span>This resolves the orientation issue. We still
need to address some other areas, but first you'll add one more path.</p>
</li></ol>











<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b64"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b63"></a></span>Add
a third path:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b62"></a></span>Most of the following steps will probably be
familiar to you.</p>
<ol type="1" start="1"><li>Append
a Find Target test to the Emit Particles event.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b61"></a></span>In order for the particles to move correctly
on the third path, the Find Target icon's pivot should coincide
with the path's starting point.</p>
</li><li>Select
the <em class="mild">Find Target 02</em> icon and then press <em class="strong">ALT+A</em> to
access the Align tool.</li><li>Select
the PathSouth spline to open the Align Selection dialog.</li><li>On
the Align Selection dialog, turn on X Position (make sure Y and
Z are disabled) and set Target Object to Minimum. For Current Object, choose
Center. Click OK to close the dialog.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b60"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow31.png"></p>
</div>
</li><li>Create
a new event that contains a single Speed By Icon operator. Rename
the event <em class="strong">Flow South</em> and the operator <em class="strong">Icon
South</em>.</li><li>Connect
the output of the second Find Target test to the Flow South event.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow32.png"></p>
</div>
</li><li>In
Particle View click the second Find Target test, set its mode to No
Control and set To Test True If Distance To: &gt; Target Pivot to
Is Less Than <em class="strong">5.0</em>.</li><li>In
the Flow South event, set the Icon South operator to Use Icon Orientation
and Steer Towards Trajectory with a Distance of <em class="strong">10.0</em>.</li><li>Select
the <em class="mild">Icon South</em> helper object and use
a Path constraint to attach it to the Path South spline.</li><li>On
the Motion Panel, turn on Path Options &gt; Follow and set Axis
to Z. Also turn on Allow Upside Down.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow33.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5d"></a></span>This latter step helps to smooth out the motion
when the particles are moving directly downward.</p>
</li><li>In
the track bar, slide the right-hand Position key to frame 100.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5c"></a></span>You now have icons moving down all three splines
and particles following them. You might want to adjust the locations
of the Find Target icons slightly so the particles branch properly.</p>
</li></ol>











<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5b"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b5a"></a></span>Change
colors:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b59"></a></span>What if you want to change the color of the
arrows based on which path they are moving along? This is a common
need in AEC visualization when showing how fluids move through pipes,
with the colors differentiating the types of fluid. Because you
have a different event defining each path, it&#8217;s easy to assign different
materials to particles within each event. You'll use three materials
that have already been prepared for you.</p>
<ol type="1" start="1"><li>From
the depot, drag a Material Static operator into the Emit Particles
event. Place it above the tests.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b58"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow34.png"></p>
</div>
</li><li>Click
the operator to open its parameters.</li><li>Open
the Material Editor and drag the Red material onto the button (&#8220;None&#8221;)
on the parameters panel. Click OK to accept the Instance method.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b57"></a></span>If you play or advance the animation in a shaded
viewport, you can see that all of the main particles are now red.
The color of the particles in the other events is determined by
the Display operator in the global event.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b56"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow35.png"></p>
</div>
</li><li>Add
a Material Static operator to each of the two Flow events, and apply
the Blue material to one and Green material to the other.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b55"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_vizflow36.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b54"></a></span>Now all three colors appear in the viewports.</p>
</li></ol>




<div class="section"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b53"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e83401"></a>Next</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7b52"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab041063133fb5604511363e4556c-7fe2.htm"><!--Reference = WSf742dab041063133fb5604511363e4556c-7fe2; Target topic = WSf742dab041063133fb5604511363e4556c-7fe2.htm-->Applying Final Touches</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
