<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Setting Up Knees, Elbows, Ankles and Wrists</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Setting Up Knees, Elbows, Ankles and Wrists"><meta name="keywords" content="rag doll tutorial:setting up knees elbows ankles and wrists, rag doll tutorial:hinge constraint,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab04106313315bef0fb112a19e466a-7fd6.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Using Hinge Constraints</div><a href="WSf742dab04106313315bef0fb112a19e466a-7fd7.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Rag Doll Tutorial</div><a href="WS73099cc142f4875514c01ac112a7acef16-71bd.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Using Rag Doll Constraints</div><a href="WSf742dab04106313315bef0fb112a19e466a-7fd5.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-73a2.htm">Special Effects</a>&nbsp;&gt;&nbsp;<a href="WS73099cc142f4875514c01ac112a7acef16-71bd.htm">Rag Doll Tutorial</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Setting Up Knees, Elbows, Ankles and Wrists</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab04106313315bef0fb112a19e466a-7fd6"></a></span>

<!--Body-->
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7193"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7192"></a></span>Open
the sample file:</p>
<ul><li>You
can continue from where you left off, or choose File menu &gt; Open
and load the <span class="filePath">character01.max</span> from
the <em class="mild">\tutorials\reactor\ragdoll</em> directory.</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161177"></a></span>

Using
a constraint is similar to the Rigid Body Collection, but this time
you add a <em class="strong">Constraint Solver</em> to the scene.
Next you can begin to add various constraint types to your objects
and then add them to this solver. The solver, in essence, figures
out how best to keep all of your objects happy under the conditions
they've been given (body A connected to body B, body B connected to
body C, etc.). </p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718f"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718e"></a></span>Add
a Constraint Solver to the scene:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_create.png"> On the
Create panel, click Helpers and choose reactor from the drop-down
list.</li><li>On
the Create panel &gt; Object Type rollout, click CSolver.</li><li>Click
in one of the viewports to create a Constraint Solver. <div><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d70"></a></span><div class="note-note"><span class="label">Note</span>The location of the helper object is not
important.</div></div>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718d"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_cs_in_viewport.png"></p>
</div>
<div style="margin-top:9pt"><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d6f"></a></span><div class="note-note"><span class="label">Note</span>The Constraint Solver works only if all
the constraints act upon rigid bodies that belong to the same Rigid
Body Collection.</div></div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161178"></a></span>Next, you'll
specify the collection to which to apply the Constraint Solver.</p>
</li><li>With
the solver selected, open the Modify panel &gt; Properties rollout,
and click the button labeled None, below RB Collection.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_select_by_name.png"> Press <span class="keyCaps">H</span> and choose <em class="strong">RBCollection01</em> from
the Pick Object dialog.</li></ol>





<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161179"></a></span>Now you're ready to start connecting bones together,
and soon will have your rag doll tumbling down the stairs. You'll
use the Hinge constraint to connect the various bones in the character,
first joining the right foot and calf bones to simulate an ankle.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718b"></a></span>Create
Hinge constraints for the ankles:</p>
<ol type="1" start="1"><li>On
the Create panel &gt; Object Type rollout, click Hinge.</li><li>Click
anywhere in a viewport to create a Hinge constraint.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-718a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_hinge_in_viewport.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117a"></a></span>Next you'll
choose the objects to which to assign to this constraint.</p>
</li><li>In
the Modify panel &gt; Properties rollout, click the button labeled None,
next to Child.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_select_by_name.png"> Press <span class="keyCaps">H</span> and choose <em class="strong">RFoot</em> in the
Pick Object dialog, then click Pick<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117b"></a></span>The Child
button should now read <em class="strong">RFoot</em>.</p>
</li><li>On
the Modify panel &gt; Properties rollout, turn on the Parent check
box.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117c"></a></span>This indicates that you want to constrain two
objects together, rather than one object to the world.</p>
</li><li>Click
the button labeled None, next to Parent.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_select_by_name.png"> Press <span class="keyCaps">H</span>, choose <em class="strong">RCalf</em> from the
Pick Objects dialog, and then click Pick<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117d"></a></span>The button
beside Parent should now read <em class="strong">RCalf</em> and the
scene should look like this:</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7189"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_hingecf_in_viewport.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117e"></a></span>In its
current state, the character's foot is free to rotate 360 degrees
around the hinge constraint, which as you can imagine would be pretty
painful! You need to use the Limited property for this hinge constraint.</p>
</li><li>On
the Properties rollout, turn on Limited.</li><li>In
the Limited group, set Min Angle to <em class="strong">-20.0</em> and Max
Angle to <em class="strong">30.0</em>
</li><li>Repeat
this process for the left foot and calf bones.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7188"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_ankles_in_viewport.png"></p>
</div>
</li></ol>










<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7187"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7186"></a></span>Create
Hinge constraints for the knees, elbows and wrists:</p>
<ul><li>The
process for setting up the hinge constraint for each of the other
bone pairs is identical, with only the constraint limits differing. With
this in mind use this list to set the constraint parameters for
each joint:<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7185"></a></span><table cellpadding="0" cellspacing="0" class="ruled"><colgroup><col style="width:0.613in"><col style="width:0.536in"><col style="width:0.552in"><col style="width:0.525in"><col style="width:0.552in">
<tr class="RuledHeading">
<th class="table-heading">Constraint Name</th>
<th class="table-heading">Child</th>
<th class="table-heading">Parent</th>
<th class="table-heading">Min Angle</th>
<th class="table-heading"> Max Angle</th>
</tr>

<tr class="RuledOddRow">
<td class="table-body"> RAnkleJoint</td>
<td class="table-body"> RFoot</td>
<td class="table-body"> RCalf</td>
<td class="table-body"> -20.0</td>
<td class="table-body"> 30.0</td>
</tr>
<tr class="RuledEvenRow">
<td class="table-body"> LAnkleJoint</td>
<td class="table-body"> LFoot</td>
<td class="table-body"> LCalf</td>
<td class="table-body"> -20.0</td>
<td class="table-body"> 30.0</td>
</tr>
<tr class="RuledOddRow">
<td class="table-body"> RKneeJoint</td>
<td class="table-body"> RCalf</td>
<td class="table-body"> RThigh</td>
<td class="table-body"> -85.0</td>
<td class="table-body"> 0.0</td>
</tr>
<tr class="RuledEvenRow">
<td class="table-body"> LKneeJoint</td>
<td class="table-body"> LCalf</td>
<td class="table-body"> LThigh</td>
<td class="table-body"> -85.0</td>
<td class="table-body"> 0.0</td>
</tr>
<tr class="RuledOddRow">
<td class="table-body"> RWristJoint</td>
<td class="table-body"> RHand</td>
<td class="table-body"> RForeArm</td>
<td class="table-body"> -35.0</td>
<td class="table-body"> 35.0</td>
</tr>
<tr class="RuledEvenRow">
<td class="table-body"> LWristJoint </td>
<td class="table-body"> LHand</td>
<td class="table-body"> LForeArm</td>
<td class="table-body"> -35.0</td>
<td class="table-body"> 35.0</td>
</tr>
<tr class="RuledOddRow">
<td class="table-body"> RElbowJoint</td>
<td class="table-body"> RForeArm</td>
<td class="table-body"> RUpperArm</td>
<td class="table-body"> -85.0</td>
<td class="table-body"> 0.0</td>
</tr>
<tr class="RuledEvenRow">
<td class="table-body"> LElbowJoint</td>
<td class="table-body"> LForeArm</td>
<td class="table-body"> LUpperArm</td>
<td class="table-body"> -85.0</td>
<td class="table-body"> 0.0</td>
</tr>
</colgroup></table>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16117f"></a></span>When you're done, the scene should look like
this:</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7184"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_hinge_all_in_viewport.png"></p>
</div>
</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161180"></a></span>You'll simulate the other bones using <em class="strong">Rag
Doll Constraints</em>, as their motion is more sophisticated.
The last thing you have to do is to add all of the constraints to
the Constraint Solver.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7183"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7182"></a></span>Add
the Hinge constraints to the Constraint Solver:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/but/but_select_by_name.png"> Press <span class="keyCaps">H</span>, and on the Object Select dialog,
choose <em class="strong">CSolver01</em> and click Select.</li><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_modify1.png"> On the
Modify panel &gt; Properties rollout, click Add.</li><li>On
the dialog, highlight all of the hinges and click Select<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161181"></a></span>The CSolver
Properties rollout should now look like this:</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7181"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/rol/rol_cs_properties.png"></p>
</div>
</li></ol>



<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161182"></a></span>Next you'll preview the scene again to see just
how these alterations have affected the character. </p>
<!--UList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7180"></a></span>
<ul><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_util.png"> On the
Utility panel, click reactor, and then on the Preview &amp; Animation
rollout, click the Preview in Window.</li></ul>

<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161183"></a></span>You might have noticed during the last preview
that reactor complained that some of the rigid bodies in the scene
were interpenetrating. Although you ignored this warning on that
occasion, it's not a good idea to do in general. Later in this tutorial,
you will take care of this issue, but for now click Continue and
view the preview.</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161184"></a></span>The first thing that stands out is that the
bones connected with hinge constraints stay together. This is exactly
as planned, but notice that they continue bouncing and dancing about
once they hit the floor. This is because reactor notices that the
bones are interpenetrating with one another and tries to separate
them. However, at the same time, the Constraint Solver is trying
to keep them together. Since they are essentially battling with
one another over the position of the various bones they continue
to bounce about erratically. The solution to this is to tell reactor
not to worry about interpenetrations between the bones that you've
connected.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717f"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717e"></a></span>Disable
collisions between the limbs:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_util.png"> On the
Utility panel &gt; reactor &gt; Collisions rollout &gt; Global Collisions
group, click Define Collision Pairs.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717d"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/rol/rol_collision_pairs.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161185"></a></span>You are
presented with the following dialog:</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_define_collisions.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161186"></a></span>There are
three columns: one for all the entities (objects) in the scene,
one for enabled collisions, and one for disabled collisions. By default,
all collisions are enabled between all objects so you need to tell reactor
to ignore the collisions between the bones in your character. You want
to ignore only bone-to-bone collisions, though. If, for example,
you chose to ignore the collision between the character's foot bone
and the floor object, the character's foot would pass straight through
the floor unimpeded.</p>
</li><li>Select
all of (and only) the bone objects in the first column.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161187"></a></span>This displays
a list of enabled collisions in the second column.</p>
</li><li>Click
the <em class="strong">&gt;&gt;</em> button<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717b"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/dlg/dlg_define_collisions_disabled.png"></p>
</div>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161188"></a></span>All of
the collision pairs between the selected bodies move to the third
column (disabled collision pairs).</p>
</li><li>Click
OK to accept the changes.<div><span style="display:none"><a name="WS73099cc142f487551face55114134b88b1-7d6e"></a></span><div class="note-note"><span class="label">Note</span>Instead of disabling all collisions between
all limbs, you could instead disable collisions between adjoining
limbs. In order to do so, you would start with all collisions enabled,
select each adjoining pair (<span class="charspan-special">
<em class="strong">LHand</em>
</span> and <span class="charspan-special">
<em class="strong">LForeArm</em>
</span>, <span class="charspan-special">
<em class="strong">Spine3</em>
</span> and <span class="charspan-special">
<em class="strong">Head</em>
</span>,
etc.) and click "&gt;&gt;" to disable just those pairs. </div></div>
</li></ol>




<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-717a"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7179"></a></span>Preview
the animation with collisions disabled:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/tab/tab_util.png"> On the
Utilities panel &gt; reactor &gt; Preview &amp; Animation rollout,
click Preview in Window.<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef161189"></a></span>The Preview
window should open this time without any warnings and everything
should behave as expected (no bouncing limbs). </p>
</li><li>Save
your work again, this time as <em class="strong">my_character02.max</em>
</li></ol>


<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-7178"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e89166"></a>Next</p>
<p><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16118a"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab04106313315bef0fb112a19e466a-7fd5.htm"><!--Reference = WSf742dab04106313315bef0fb112a19e466a-7fd5; Target topic = WSf742dab04106313315bef0fb112a19e466a-7fd5.htm-->Using
Rag Doll Constraints</a></span>

</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
