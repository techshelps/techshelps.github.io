<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Troubleshooting the Simulation</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Troubleshooting the Simulation"><meta name="keywords" content=""><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7fe7.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Creating Multiple BIP Files</div><a href="WSf742dab041063133fb5604511363e4556c-7fe8.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Animating Biped Crowds</div><a href="WS1a9193826455f5ff13cfd6e1136132a36f-7cbf.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Adjusting the Biped to the Model</div><a href="WS73099cc142f4875514c01ac112a7acef16-6d0c.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WS1a9193826455f5ff13cfd6e1136132a36f-7cbf.htm">Animating Biped Crowds</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Troubleshooting the Simulation</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7fe7"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bed"></a></span>To see the results of the motion synthesis,
you can check each biped's motion flow script.</p>
<!--UList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bec"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7beb"></a></span>Set
up the lesson:</p>
<ul><li>Open
the file <em class="mild">my_biped_crowds05.max</em> that you
created in the previous lesson, or open <em class="mild">tut_biped_crowds05.max</em>.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bea"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_biped_crowds_final3.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be9"></a></span>This file contains the scene from the previously
completed lesson. </p>
</li></ul>

<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be8"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be7"></a></span>Check
the results:</p>
<ol type="1" start="1"><li>Press <em class="strong">H</em> on
the keyboard. Select any available part of a biped, and then go
to the Motion panel.</li><li>In
the Motion Flow Script rollout, scroll through the script. <p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be6"></a></span>Their scripts show the sequence of clips used
for a specific biped's movement in the simulation. The script is
generated when the simulation is solved.</p>
</li><li>Select
another biped, and look at its script.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be5"></a></span>Each uses a different sequence of walking and
turning clips to move through the scene.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be4"></a></span>In addition to the techniques you learned in
this tutorial, there are many other ways to improve a crowd simulation.</p>
</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be3"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be2"></a></span>If
the crowd simulation isn't working at all:</p>
<ol type="1" start="1"><li>Try
removing all behaviors but one (such as a Seek behavior) and solving
the simulation. If the bipeds follow that one behavior just fine,
then the problem is with one or more of the other behaviors; add
the behaviors back one at a time, and solve each time to determine
which behavior is causing the problem. </li><li>If
the bipeds don't follow that one behavior, then the problem is with
the clips. Try adding more varied clips to the shared motion flow. Bipeds
can only follow the clips they have in the graph. For example, if
all clips move the bipeds straight forward, they will not be able
to turn to avoid other bipeds or obstacles in the scene.</li><li>To
see exactly where a problem is occurring, turn on Update Display
in the Solve rollout, and set Frequency to a low number such as
5. This will update the display every 5 frames. Watch the simulation
as it solves, and look for problem areas, such as places where bipeds
collide or go somewhere they shouldn&#8217;t. This will help you spot
which behavior is causing the problem.</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be1"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7be0"></a></span>If
collisions occur at the start of the simulation:</p>
<ol type="1" start="1"><li>If
delegates are placed too close together at the start of the simulation,
the simulation won&#8217;t detect potential collisions at the start. This happens
because the Avoid behavior checks to see if a collision between delegates
is going to occur; that is, if two bipeds' hard radii will intersect at
some frame in the future, not if it has already occurred. You can
solve this problem by moving delegates farther apart at the start
of the simulation so their hard radii don&#8217;t intersect. Remember
that if you move a delegate, the biped won&#8217;t align with the delegate
until you solve again.</li><li>Try
adding additional random start clips to the graph. This will give
the crowd system more choices when starting the simulation.</li><li>Move
delegates at frame 0 to allow more time for transitions.</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bdf"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bde"></a></span>If
collisions occur during the simulation:</p>
<ol type="1" start="1"><li>Increase
the Avoid behavior&#8217;s Hard Radius to a higher number, and solve again.</li><li>You
can also try changing the Priority and Start Frame values for individual
delegates to keep bipeds from colliding. You can change these values
individually by selecting the delegate and going to the Modify panel,
or with the tools on the Crowd helper &gt; Modify panel &gt; Priority rollout.</li></ol>


<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bdd"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bdc"></a></span>If
one or more bipeds can't find a solution even with backtracking: </p>
<ol type="1" start="1"><li>Decrease
the Hard Radius value on the Avoid behavior, and solve again. If
the Hard Radius is too high, bipeds will have nowhere they can go
without detecting a collision.</li><li>Make
motion clips as short as possible, so the crowd system doesn't have
to back up too far when backtracking.</li><li>You
can also change transition probabilities in the motion flow graph
to make some clips more likely to be used than others.</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bdb"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7bda"></a></span>General
tips for working with biped crowds:</p>
<ol type="1" start="1"><li>Use
freeform clips rather than footsteps to prevent viewports from becoming
cluttered with footsteps.</li><li>After
the simulation is complete, you can select a biped and scroll through
its script on the Motion Flow rollout. This will tell you if some
clips are being used more than others, and can give you clues about which
clips should be added to give the bipeds more variety to choose from.</li><li>When
creating a simulation for a large number of bipeds, a common workflow
is to place the camera in such a way that some bipeds aren't visible
at the very start or end of the simulation. For example, if you
have set the Start Frame for some delegates to a frame later than
the simulation start, these delegates and bipeds won't move until
their Start Frame comes up. The delegates and camera should be placed
in such a way that these bipeds are "offscreen" until they move
into view.</li><li>You
can use more than one motion flow graph in a scene. For example,
you could have one graph with running motions, and another with
walking motions. In this way, some bipeds could run around the scene
while others walk. Each biped can use only one graph.</li></ol>





<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
