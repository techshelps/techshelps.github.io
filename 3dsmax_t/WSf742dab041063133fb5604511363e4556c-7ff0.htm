<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Creating and Using Motion Flow Scripts</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Creating and Using Motion Flow Scripts"><meta name="keywords" content="use of:script, script:use of, script:motion flow, script:create, motion flow script:create, tutorial: motion flow, motion flow:tutorial, motion flow:script, creating:motion flow script,"><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab041063133fb5604511363e4556c-7ff0.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Adding Clips to the Motion Flow Graph</div><a href="WSf742dab041063133fb5604511363e4556c-7ff1.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Using Motion Flow</div><a href="WSf742dab041063133fb5604511363e4556c-7ff3.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Looping Animation in Motion Flow Mode</div><a href="WSf742dab041063133fb5604511363e4556c-7fef.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab041063133fb5604511363e4556c-7ff3.htm">Using Motion Flow</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Creating and Using Motion Flow Scripts</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab041063133fb5604511363e4556c-7ff0"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d65"></a></span>








The
Motion Flow Graph stores <em class="mild">.bip</em> files, referred to as <em class="mild">clips</em>.
To create a script, you select clips that you have added to the
Motion Flow Graph.</p>
<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d5b"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d5a"></a></span>Set
up the lesson:</p>
<ol type="1" start="1"><li>Continue
from the previous lesson or load <em class="mild">cs4_tut_moflow01.max</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d59"></a></span>Tutorial files are in the <em class="mild">tutorials\character_animation\motion_flow</em> folder.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/i_mx01.png"> If using
the tutorial file, select any part of the biped and open the Motion
panel.</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/mofldia.png"> Click
Show Graph to make sure the Motion Flow Graph is displayed.</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d58"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d57"></a></span>Create
a script:</p>
<ol type="1" start="1"><li>
<img src="./images/MED/3dsMaxTut/English/cs/scripdef.png"> On the
Motion Flow rollout, in the Scripts group, click Define Script.</li><li>On
the Motion Flow Graph, click the <em class="mild">AxeKick</em> icon
first, and then the <em class="mild">BackKick</em> icon.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d56"></a></span>The clip names appear in the list in the Scripts
group. The name <em class="mild">script1</em> displays in the text field
above the list. In the Motion Flow Graph, a red transition line
joins the two clips, showing that they are included in the current
script. By default, Biped uses &#8220;Minimum Motion Loss&#8221; to find a likely
starting frame for the transition between the source and destination
clips. You have created a script called <em class="mild">script1</em>.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d55"></a></span>
<img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_5.png"> <img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_6.png">
</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_play.png"> Close
the Motion Flow Graph window and click Play.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d54"></a></span>Use Arc Rotate to rotate the Perspective view
for a better look at the motion.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d53"></a></span>As the animation progresses, the name of the
currently-played clip appears in uppercase characters in the script
list, followed by three asterisks. The numbers on the left of each
clip name indicate the frame numbers where the animation starts.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d52"></a></span>The default Minimum Motion Loss search method
did not choose ideal starting frames in this case: the biped spins
unnaturally during the transition. You&#8217;ll first edit the transition
manually, then you&#8217;ll try an optimized transition, which uses minimum
foot sliding.</p>
</li></ol>



<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d51"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d50"></a></span>Use
the Transition Editor:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4f"></a></span>When you edit transitions manually, you can
discard unwanted motion and adjust the duration of transitions.
You can also change the direction of the destination clip in the
Transition Editor.</p>
<ol type="1" start="1"><li>Click <em class="mild">AxeKick</em> in
the Scripts list.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4e"></a></span>Controls in the Scripts group are activated.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/scripet.png"> Click
Edit Transition.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4d"></a></span>The Transition Editor dialog displays; the source
and destination clip names appear in the title of the dialog. Position
the dialog so the Perspective Viewport is visible.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4c"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_7.png"></p>
</div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_go_to_start_frame.png"> Click
Go To Start Frame near the upper right of the Transition Editor.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4b"></a></span>The time slider is positioned at the first frame
of the transition. By default, the duration of the transition is
25 frames. This is displayed in the Length field on the upper left
of the Transition Editor.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d4a"></a></span>Red and yellow stick figures (called ghosts)
in the viewports help to establish a starting frame for both clips.
Both stick figures display during the period of transition. Red
represents the destination clip motion. The biped interpolates between
the yellow and red ghosts over the course of the transition.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d49"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_8.png"></p>
</div>
</li><li>In
the dialog, set Angle to <em class="strong">-50</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d48"></a></span>The destination ghost changes orientation.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d47"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_9.png"></p>
</div>
</li><li>In
the Destination Clip group, set the Start to <em class="strong">0</em>.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d46"></a></span>You can choose the destination starting frame
by viewing all of the clip's motion.</p>
<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d45"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_10.png"></p>
</div>
</li><li>Drag
the time slider back and forth over the transition.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d44"></a></span>In order to create a smooth transition, you&#8217;ll
look for areas in the source and destination clips where foot and
body movements will flow together cleanly. Frame 80, where the character&#8217;s
right foot is in the air, looks like a reasonable starting frame
for the source clip. Body weight is in the process of shifting to
the right foot.</p>
</li><li>In
the Source Clip group, set the Start to <em class="strong">80</em>.</li><li>Move
the Frame spinner in the Destination Clip Ghost group and watch
the red stick figure representing the destination clip. At frame 20,
the character is starting to push backward with its right foot.
The character&#8217;s weight will be on the right foot in both clips if
this frame is used as the Destination Start Frame.<span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d43"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_tut_moflow_11.png"></p>
</div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/i_set_start_frame.png"> Click
Set Start Frame in the Destination Clip Ghost group. The Frame value
(20) is copied to the Destination Set Start Frame field; Biped recalculates
and positions the destination clip.</li><li>Set
Length to <em class="strong">6</em> frames.</li><li>Play
the animation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d42"></a></span>The weight shifts to the right foot in both
clips during the transition. The transition looks natural. Next
you&#8217;ll try an optimized transition.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-715d"></a></span><div class="note-tip"><span class="label">Tip</span>You
can open the Extras toolbar, turn on the Keyboard Shortcut Override
Toggle and press ALT+R to change the Active Time to the animation length.</div></div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_moflowgraph_optimize_selected_transitions.png"> In the
Transition Editor dialog, click Optimize Transition.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d41"></a></span>The Transition Optimization dialog displays.</p>
</li><li>On
the Transition Optimization dialog, turn on Search Near Existing
Transition. Click OK.</li><li>Play
the animation.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d40"></a></span>The transition calculated by the automatic optimization
also looks good. Optimized transitions are a time saver if there
are many clips and transitions that need to be processed.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-715c"></a></span><div class="note-tip"><span class="label">Tip</span>You can select multiple transitions in the
Motion Flow Graph window and use Optimize Selected Transitions in
the Motion Flow Graph toolbar to optimize all the transitions at
once. Optimized transitions can take time to compute, but the results
are worth the extra processing time.</div></div>
</li></ol>














<!--OList--><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3f"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3e"></a></span>Make
the animation available outside of Motion Flow mode:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3d"></a></span>To make the animation available in your scene
outside Motion Flow mode, use the Create Unified Motion command.</p>
<ol type="1" start="1"><li>Click
OK to close the Transition Editor dialog.</li><li>
<img src="./images/MED/3dsMaxTut/English/cs/scripdef.png"> Click
the Define Script button on the Motion Flow rollout, in the Scripts
group, to turn off scripting mode.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/b_unified.png"> On the
Motion Flow rollout, in the Scripts group, click Create Unified
Motion.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3c"></a></span>The Unify Options dialog is displayed.</p>
</li><li>Click
OK to accept the default settings on the Unify Options dialog.</li><li>On
the Biped rollout, turn off the Motion Flow Mode button.<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3b"></a></span>The motion is available as a freeform animation
in your scene.</p>
</li></ol>





<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d3a"></a></span>Open <em class="mild">cs4_tut_moflow02.max</em> to see the animation.
Note that a unified motion does not contain footsteps.</p>
<div class="section"><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d39"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e42320"></a>Next</p>
<p><span style="display:none"><a name="WS1a9193826455f5ff13cfd6e1136132a36f-7d38"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab041063133fb5604511363e4556c-7fef.htm"><!--Reference = WSf742dab041063133fb5604511363e4556c-7fef; Target topic = WSf742dab041063133fb5604511363e4556c-7fef.htm-->Looping Animation in Motion Flow Mode</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script></html>
