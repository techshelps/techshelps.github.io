<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso8859-1">
   <title>Using Controllers with Biped</title><link rel="stylesheet" type="text/css" href="./style/cpm.css"><link rel="stylesheet" type="text/css" href="./style/isd.css"><link rel="stylesheet" type="text/css" href="./style/commons.css"><link rel="stylesheet" type="text/css" href="./style/contents.css"><link rel="stylesheet" type="text/css" href="./style/header.css"><link rel="stylesheet" type="text/css" href="./style/indexes.css"><link rel="stylesheet" type="text/css" href="./style/search.css"><link rel="stylesheet" type="text/css" href="./style/med.css"><script type="text/javascript" src="./scripts/ac.strings.js"></script><script type="text/javascript" src="./ac_common.js"></script><script type="text/javascript" src="./scripts/acmap.js"></script><script type="text/javascript" src="./scripts/ac.acad_ak.js"></script><script type="text/javascript" src="./scripts/index-processing.js"></script><script type="text/javascript" src="./scripts/search-processing.js"></script><script type="text/javascript" src="./scripts/toc-processing.js"></script><script type="text/javascript" src="./scripts/highlight.js"></script><script type="text/javascript" src="./scripts/favorites.js"></script><script type="text/javascript" src="./scripts/commons-processing.js"></script><script language="javascript">
            function hideInfo() {
                info = document.getElementById('infoline');
                info.innerHTML = ' ';
                info.style.visibility = 'hidden';
            }
            function showInfo(title) {
                info = document.getElementById('infoline');
                info.innerHTML = title;
                info.style.visibility='visible';
            }
        </script><meta name="description" content="Using Controllers with Biped"><meta name="keywords" content=""><meta name="topic-type" content="concept"></head><body><!--
							Name = Topic;
							Class =  CPM-Topic ISD-Topic ;
							Url = WSf742dab04106313311b7d0e3112a19e3350-7ff0.htm--><div class="head"><div class="head-block"><div class="nav-group"><!--browse buttons--><div class="browse"><nobr><!--No Additional browse buttons are defined--><div id="prevTitle" style="display:none">Animating a Freeform Walk Cycle</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7ff1.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('prevTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-prev-xp.gif" border="0"></a><div id="parentTitle" style="display:none">Animating with Freeform</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7ff3.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('parentTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-up-xp.gif" border="0"></a><div id="nextTitle" style="display:none">Creating Animated Bones with Biped</div><a href="WSf742dab04106313311b7d0e3112a19e3350-7fef.htm" class="headNavLink" onmouseover="showInfo(document.getElementById('nextTitle').innerHTML);" onmouseout="hideInfo();"><img src="./images/nav-next-xp.gif" border="0"></a></nobr></div><!--end browse buttons--></div><div class="button-info"><span id="infoline">&nbsp;</span></div><div class="ancestry"><a href="welcome.htm">Autodesk 3ds Max Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-8000.htm">Character Animation Tutorials</a>&nbsp;&gt;&nbsp;<a href="WSf742dab04106313311b7d0e3112a19e3350-7ff3.htm">Animating with Freeform</a>&nbsp;&gt;&nbsp;</div><div class="head-text"><span>Using Controllers with Biped</span></div></div></div><div class="head-margin">&nbsp;</div><div style="line-height: 0pt">&nbsp;</div><div class="head-margin">&nbsp;</div><span style="display:none"><a name="WSf742dab04106313311b7d0e3112a19e3350-7ff0"></a></span>

<!--Body-->
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be8"></a></span> You can add controllers on top of Biped animations
to create a wide variety of effects. You can use scale controllers
to create stretchy legs or arms for cartoon animation, or create
the illusion of breathing by adding a scale controller on the spine
objects in the chest. You can add noise rotation controllers to
the spine to make a biped shake while he walks, or to create twitching
or random motion in the limbs or head.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be7"></a></span>Controllers can be added in the Motion panel,
Assign Controllers rollout, or by using the Workbench.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be6"></a></span>Although this lesson is performed with footsteps,
it could have been accomplished just as easily with a freeform animation.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d28"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d27"></a></span>Create
stretchy legs with controllers:</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be5"></a></span>In this exercise, you will add a scale controller
to a biped's legs to stretch them during a portion of an animation. </p>
<ol type="1" start="1"><li>Open <em class="mild">stretchyleg_start.max</em>.</li><li>Play
the animation.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be4"></a></span> The biped walks for 10 paces, zooms to a lower
level, and then walks another five steps. You&#8217;ll add the scale controller,
then animate the biped so that its legs stretch during the period
of the downward leap.</p>
</li><li>Move
the time slider to frame 162, then select the <em class="mild">Bip01 L Thigh</em> object,
the blue leg.</li><li>On
the Motion panel, open the Assign Controller rollout.</li><li>In
the controller list window, expand the Biped SubAnim entry.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be3"></a></span>Now you
can see the three list controllers.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_assigncontroller_assign_controller.png"> Click
the plus sign (+) next to<em class="mild"> BipScaleList</em> to expand this controller.
Select the entry marked <em class="mild">Available</em>, then click the Assign
Controller button.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be2"></a></span> The Assign Scale Controller dialog appears.</p>
</li><li>Choose
Scale XYZ from the list, and click OK to close the dialog.</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_uscale_max.png"> On the 3ds Max Main
toolbar, click the Select And Scale button.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be1"></a></span> The Scale
gizmo is visible on the thigh in the viewport.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_auto_key_on.png"> Turn
on Auto Key.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1be0"></a></span>First, you will set a key to start the stretch.
You don&#8217;t want the stretch to start before frame 162. You want the
biped to have a normal leg (unstretched) from the start of the animation
up to this frame.</p>
</li><li>Using
the Scale gizmo, stretch the leg <em class="mild">very</em> slightly
in the X-axis at this frame, so the final value in the Coordinate
rollout is 100 (no stretch).<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d26"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_stretch1a.png"></p>
<p></p><p class="figure-title">The leg at frame 162 (no stretch). </p>
</div>
</li><li>Move
to frame 164, and stretch the leg so the foot reaches the footstep.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d25"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_stretch2.png"></p>
</div>
</li><li>Move
to frame 167, and again stretch the leg in the X-axis, so the foot
stays on the footstep gizmo.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d24"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_stretch3.png"></p>
<p></p><p class="figure-title">Leg stretch at frame 167</p>
</div>
</li><li>Move
to frame 169. Here, you begin to shorten the leg stretch.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d23"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_stretch4.png"></p>
<p></p><p class="figure-title">Leg shortens at frame 169</p>
</div>
</li><li>Move
to frame 181 and stretch the leg back to normal. Adjust it visually
until the leg looks correct.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d22"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_stretch5.png"></p>
<p></p><p class="figure-title">Leg at frame 181 appears normal.</p>
</div>
</li><li>Play
the animation. The biped&#8217;s back foot stays on the footstep and the
leg stretches out as the biped descends to the lower set of footsteps.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bdf"></a></span> For extra
credit, add a scale controller to the green thigh, and stretch that
leg out, roughly between frames 161 and 171.</p>
</li><li>Save
your work as <em class="strong">mystretchy_leg.max</em>, or open <em class="mild">stretchyleg_final.max</em> for
comparison.</li></ol>
















<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bde"></a></span>Once you have controllers added to the biped
body parts you can animate their parameters, or animate their weights.
Here's an example that shows animation of parameters.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d21"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d20"></a></span>Animate
the weights of SubAnim controllers:</p>
<ol type="1" start="1"><li>Open <em class="mild">shake_and_walk_start.max</em>.</li><li>Play
the animation.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bdd"></a></span>The biped takes a few steps, then pauses for
a moment or two, then walks on.</p>
</li><li>In
the Perspective Viewport, select <em class="mild">Bip01 Spine</em>,
the lowest spine object.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1f"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake1.png"></p>
</div>
</li><li>On
the Motion panel, open the Assign Controller rollout.</li><li>In
the Assign Controller window, expand the Biped SubAnim so you can
see the list controllers.</li><li>Expand
the <em class="mild">BipRotationList</em>, and highlight
the entry marked <em class="mild">Available</em>.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1e"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake2.png"></p>
</div>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_assigncontroller_assign_controller.png"> Click
the Assign Controller button.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bdc"></a></span>The Assign
Rotation Controller dialog appears.</p>
</li><li>Choose <em class="mild">Noise
Rotation</em> in the list, and click OK.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bdb"></a></span>The Noise
Rotation Properties dialog is displayed. Don't close this dialog.</p>
</li><li>Play
the animation in the viewport.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bda"></a></span>The biped
shakes drastically as it walks.</p>
</li><li>In
the Properties floater, turn Fractal Noise off.</li><li>As
the animation plays, change the Frequency in the Properties dialog,
using the spinner. Lower the value until the shake becomes slower and
more rhythmic. Probably a value of <em class="strong">0.2</em> or less
will be good to use, but you can choose whatever you like.</li><li>As
the animation plays, change the X, Y and Z values. Set the three
values to <em class="strong">0</em>, then change them individually,
one at a time.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd9"></a></span>To create a shimmy effect, set X Strength to
be <em class="strong">2</em>, Y and Z Strength to <em class="strong">0</em>.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1d"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake3.png"></p>
</div>
</li><li>Close
the Noise Rotation Properties dialog.</li></ol>













<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd8"></a></span>In this example, the biped should shake only
while walking. The frames between 69 and 191 should not have any
shaking. To complete this effect, you will animate the weight of
the noise controller.</p>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1c"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1b"></a></span>Animate
the weight of the noise controller:</p>
<ol type="1" start="1"><li>On
the Motion panel, expand the Weight entry of the Noise Rotation
controller you added to the spine object. Highlight <em class="mild">Weight
0</em>.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d1a"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake4.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd7"></a></span>There is
a trick to accessing the weights.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_cs_manipulate_subanims.png"> Open
the Keyframing Tools rollout and click the Manipulate SubAnims button.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd6"></a></span>The Motion
panel now displays additional rollouts for Position List, Scale
List, and Rotation List.</p>
</li><li>Scroll
to the Rotation List and select the Layer<em class="mild">-&gt;Noise Rotation</em>.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d19"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake5.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd5"></a></span>Now you're
ready to animate the Weight field.</p>
</li><li>
<img src="./images/MED/3dsMaxTut/English/but/but_auto_key_on.png"> Turn
on Auto Key</li><li>Move
the time slider to frame 70.</li><li>Near
the bottom of the Rotation List rollout, right-click the Weight
field spinner. This sets it to zero.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7162"></a></span><div class="note-tip"><span class="label">Tip</span>Right-clicking
any spinner resets it to its lowest possible value. </div></div>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d18"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake6.png"></p>
</div>
</li><li>Move
the time slider to frame 69.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7161"></a></span><div class="note-tip"><span class="label">Tip</span>Use
the <span class="charspan-special">
<em class="strong">&lt;</em>
</span> and <span class="charspan-special">
<em class="strong">&gt;</em>
</span> keys
on the keyboard to move from frame to frame.</div></div>
</li><li>Change
the Rotation List Weight field to <em class="strong">100.0</em>.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd4"></a></span>The spinner
is outlined in red to show it is animated.</p>
</li><li>Drag
the time slider back and forth from frame 0 to frame 100 to see
the animation. The biped shakes while walking and stops shaking during
the pause.</li><li>Next,
you make the biped start shaking again at frame 191. At frame 190,
set a key with the Noise Rotation Weight set to <em class="strong">0</em>,
and to<em class="strong">100</em> at frame 191.<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-7160"></a></span><div class="note-tip"><span class="label">Tip</span>At
frame 190, hold down the <span class="keyCaps">Shift</span> key
while you right-click on the spinner. This will set a key without
having to change the value.</div></div>
</li><li>In
the Keyframing rollout, turn off Manipulate SubAnims when you're
done.</li><li>Play
the animation.</li><li>Save
your file as <em class="strong">myshake_and_walk.max</em>, or open <em class="mild">shake_and_walk_finished.max</em> for
comparison.</li></ol>













<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd3"></a></span>If you are exporting to a game engine, or if
you want to use this animation with Layers or in the Motion Mixer,
you will need to collapse the list controller animation (see following
procedure). This will add the controllers animation keys to the
tracks of the Biped SubAnim.</p>
<div><span style="display:none"><a name="WS1a9193826455f5ff662ffb11407b58d52-715f"></a></span><div class="note-note"><span class="label">Note</span>3ds Max has different behaviors for controllers
and constraints. The controller animation will be <span class="charspan-special">
<em class="mild">layered</em>
</span> onto
the existing keys in the Biped SubAnim track. If you have used a
constraint, however, it will <span class="charspan-special">
<em class="mild">replace</em>
</span> the Biped Subanim
tracks.</div></div>
<!--OList--><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d17"></a></span>
<p class="list-intro"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d16"></a></span>Collapse
the list controller track:</p>
<ol type="1" start="1"><li>Continue
from before, or open <em class="mild">shake_and_walk_finished.max</em>.</li><li>If
you open the file, select the <em class="mild">Bip01 Spine</em> object
in the viewport, open the Motion panel, and expand the Assign Controller
rollout.</li><li>In
the Assign Controller window, highlight Biped SubAnim and then right-click.</li><li>Choose
Properties from the right-click menu.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d15"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake7.png"></p>
</div>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd2"></a></span>The SubAnim
Property dialog appears.</p>
</li><li>In
the Enable options, turn off Position List and Scale List, so the Rotation
List is the only one active.</li><li>In
the Collapse options, turn off Position, and turn on Rotation List,
Don't Delete, and Per Frame.<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d14"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake8.png"></p>
</div>
</li><li>To
collapse the rotation track, click the Collapse button at the bottom
of the SubAnim Property dialog.<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd1"></a></span>Wait while
the calculations take place.</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bd0"></a></span>When the
collapse is completed, the dialog closes and the track bar fills
with keyframes.</p>
<span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d13"></a></span><div class="figure-anchor">
<p><img src="./images/MED/3dsMaxTut/English/ill/ill_noiseshake9.png"></p>
</div>
</li><li>Save
your work as <em class="strong">mycollapsed_shaking.max</em>, or open <em class="mild">shake_and_walk_collapsed.max </em>for
comparison.</li></ol>








<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bcf"></a></span>You can use the Workbench to reduce the keys
that you've created.</p>
<div class="section"><span style="display:none"><a name="WS73099cc142f4875514c01ac112a7acef16-6d12"></a></span>
<p class="section_title_h1"><a name="TOC_ENTRY__d0e41624"></a>Next</p>
<p><span style="display:none"><a name="WS1a9193826455f5ffba679e112c9ef5a71-1bce"></a></span>
<span class="hypertext">
<span class="char_link"><a href="WSf742dab04106313311b7d0e3112a19e3350-7fef.htm"><!--Reference = WSf742dab04106313311b7d0e3112a19e3350-7fef; Target topic = WSf742dab04106313311b7d0e3112a19e3350-7fef.htm-->Creating Animated Bones with Biped</a></span>
</span>
</p>
</div>

<!----><div class="footer-block"><a href="javascript:doComments('./html/ac.cmtdialog.htm');"><span class="comments-link">Please send us your comment about this page</span></a></div><br></body><script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-1');</script></html>
