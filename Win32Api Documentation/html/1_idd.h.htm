<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>MakeAbsoluteSD</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1_idd.h"></A><B>MakeAbsoluteSD  <A HREF="3vgd6j5.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>MakeAbsoluteSD</B> function creates a security descriptor in absolute format by using a security descriptor in self-relative format as a template. </P>

<P><B>BOOL MakeAbsoluteSD(</B></P>

<TABLE cols=2 width=675>

<TR VALIGN="top">
<TD width=61%><B>PSECURITY_DESCRIPTOR</B> <I>pSelfRelativeSecurityDescriptor</I><B>,</B></TD>
<TD width=39%>// address self-relative SD</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    PSECURITY_DESCRIPTOR</B> <I>pAbsoluteSecurityDescriptor</I><B>,</B></TD>
<TD width=39%>// address of absolute SD</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    LPDWORD</B> <I>lpdwAbsoluteSecurityDescriptorSize</I><B>,</B></TD>
<TD width=39%>// address of size of absolute SD</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    PACL</B> <I>pDacl</I><B>,</B></TD>
<TD width=39%>// address of discretionary ACL</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    LPDWORD</B> <I>lpdwDaclSize</I><B>,</B></TD>
<TD width=39%>// address of size of discretionary ACL</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    PACL</B> <I>pSacl</I><B>,</B></TD>
<TD width=39%>// address of system ACL</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    LPDWORD</B> <I>lpdwSaclSize</I><B>,</B></TD>
<TD width=39%>// address of size of system ACL</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    PSID</B> <I>pOwner</I><B>,</B></TD>
<TD width=39%>// address of owner SID</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    LPDWORD</B> <I>lpdwOwnerSize</I><B>,</B></TD>
<TD width=39%>// address of size of owner SID</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    PSID</B> <I>pPrimaryGroup</I><B>,</B></TD>
<TD width=39%>// address of primary-group SID</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>    LPDWORD</B> <I>lpdwPrimaryGroupSize</I> </TD>
<TD width=39%>// address of size of group SID</TD>
</TR>

<TR VALIGN="top">
<TD width=61%><B>   );</B></TD>
<TD width=39%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>pSelfRelativeSecurityDescriptor</I></P>

<P>Points to a <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> structure in self-relative format. The function creates an absolute-format version of this security descriptor without modifying the original security descriptor. </P>

<P><I>pAbsoluteSecurityDescriptor</I></P>

<P>Points to a buffer that the function fills with the main body of an absolute-format security descriptor. This information is formatted as a <B>SECURITY_DESCRIPTOR</B> structure. </P>

<P><I>lpdwAbsoluteSecurityDescriptorSize</I></P>

<P>Points to a variable specifying the size of the buffer pointed to by the <I>pAbsoluteSecurityDescriptor</I> parameter. If the buffer is not large enough for the security descriptor, the function fails and sets this variable to the minimum required size. </P>

<P><I>pDacl</I></P>

<P>Points to a buffer the function fills with the discretionary access-control list (<A HREF="lm6.t4.htm"><B>ACL</B></A>) of the absolute-format security descriptor. The main body of the absolute-format security descriptor references this pointer. </P>

<P><I>lpdwDaclSize</I></P>

<P>Points to a variable specifying the size of the buffer pointed to by the <I>pDacl</I> parameter. If the buffer is not large enough for the ACL, the function fails and sets this variable to the minimum required size. </P>

<P><I>pSacl</I></P>

<P>Points to a buffer the function fills with the system ACL of the absolute-format security descriptor. The main body of the absolute-format security descriptor references this pointer. </P>

<P><I>lpdwSaclSize</I></P>

<P>Points to a variable specifying the size of the buffer pointed to by the <I>pSacl</I> parameter. If the buffer is not large enough for the ACL, the function fails and sets this variable to the minimum required size. </P>

<P><I>pOwner</I></P>

<P>Points to a buffer the function fills with the security identifier (SID) of the owner of the absolute-format security descriptor. The main body of the absolute-format security descriptor references this pointer. </P>

<P><I>lpdwOwnerSize</I></P>

<P>Points to a variable specifying the size of the buffer pointed to by the <I>pOwner</I> parameter. If the buffer is not large enough for the SID, the function fails and sets this variable to the minimum required size. </P>

<P><I>pPrimaryGroup</I></P>

<P>Points to a buffer the function fills with the SID of the absolute-format security descriptor's primary group. The main body of the absolute-format security descriptor references this pointer. </P>

<P><I>lpdwPrimaryGroupSize</I></P>

<P>Points to a variable specifying the size of the buffer pointed to by the <I>pPrimaryGroup</I> parameter. If the buffer is not large enough for the SID, the function fails and sets this variable to the minimum required size. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>A security descriptor in absolute format contains pointers to the information it contains, rather than the information itself. A security descriptor in self-relative format contains the information in a contiguous block of memory. In a self-relative security descriptor, a <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> structure always starts the information, but the security descriptor's other components can follow the structure in any order. Instead of using memory addresses, the components of the self-relative security descriptor are identified by offsets from the beginning of the security descriptor. This format is useful when an security descriptor must be stored on a floppy disk or transmitted by means of a communications protocol. </P>

<P>A server that copies secured objects to various media can use the <B>MakeAbsoluteSD</B> function to create an absolute security descriptor from a self-relative security descriptor and the <B>MakeSelfRelativeSD</B> function to create a self-relative security descriptor from an absolute security descriptor. </P>

<P><B>See Also</B></P>

<P><A HREF="jhoofn.htm"><B>MakeSelfRelativeSD</B></A>, <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
