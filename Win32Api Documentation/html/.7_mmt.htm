<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Using Critical Section Objects</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME=".7_mmt"></A><B>Using Critical Section Objects</B></P>

<P>The following example shows how a thread initializes, enters, and leaves a critical section. As with the mutex example (see <A HREF="mh56cq.htm">Using Mutex Objects</A>), this example uses the <B>try</B>-<B>finally</B> structured exception-handling syntax to ensure that the thread calls the <A HREF="2wz._0v.htm"><B>LeaveCriticalSection</B></A> function to release its ownership of the critical section object. </P>

<P>CRITICAL_SECTION GlobalCriticalSection;  </P>

<P>// Initialize the critical section.</P>

<P>InitializeCriticalSection(&amp;GlobalCriticalSection); </P>

<P>// Request ownership of the critical section.</P>

<P>try </P>

<P>{</P>

<P>EnterCriticalSection(&amp;GlobalCriticalSection); </P>

<P>// Access the shared resource.</P>

<P>}</P>

<P>finally </P>

<P>{</P>

<P>// Release ownership of the critical section.</P>

<P>LeaveCriticalSection(&amp;GlobalCriticalSection);</P>

<P>}</P>

</BODY>
</HTML>
