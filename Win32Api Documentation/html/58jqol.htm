<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>WM_NCCALCSIZE</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="58jqol"></A><B>WM_NCCALCSIZE  <A HREF="jhtuss.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1p1lg2i.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="2n04rtj.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The WM_NCCALCSIZE message is sent when the size and position of a window's client area must be calculated. By processing this message, an application can control the content of the window's client area when the size or position of the window changes. </P>

<P>WM_NCCALCSIZE  </P>

<P>fCalcValidRects = (BOOL) wParam;        // valid area flag </P>

<P>lpncsp = (LPNCCALCSIZE_PARAMS) lParam;  // points to size calculation data </P>

<P>or </P>

<P>lpncsp = (LPRECT) lParam;               // points to new window coordinates </P>

<P></P>

<P><B>Parameters</B></P>

<P><I>fCalcValidRects</I></P>

<P>Value of <I>wParam</I>. A Boolean value that, if TRUE, specifies that the application should indicate which part of the client area contains valid information. The operating system copies the valid information to the specified area within the new client area. Also, if this parameter is TRUE, <I>lParam</I> points to an <A HREF="45g726.htm"><B>NCCALCSIZE_PARAMS</B></A> structure.</P>

<P>If this parameter is FALSE, the application does not need to indicate the valid part of the client area. Also, if this parameter is FALSE, <I>lParam</I> points to a <A HREF="ezena2.htm"><B>RECT</B></A><B> </B>structure.</P>

<P><I>lpncsp</I></P>

<P>Value of <I>lParam</I>. </P>

<P>If <I>wParam </I> is TRUE, <I>lParam</I> points to an <A HREF="45g726.htm"><B>NCCALCSIZE_PARAMS</B></A> structure that contains information an application can use to calculate the new size and position of the client rectangle. </P>

<P>If <I>wParam </I> is FALSE, <I>lParam</I> points to a <A HREF="ezena2.htm"><B>RECT</B></A><B> </B>structure that contains the new coordinates of the window that has been moved or resized. This is equivalent to <B>rgrc</B>[0] of an <B>NCCALCSIZE_PARAMS</B> structure.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the <I>fCalcValidRects</I> parameter is FALSE, the application should return zero. </P>

<P>If <I>fCalcValidRects</I> is TRUE, the application can return zero or a valid combination of the following values: </P>

<TABLE cols=6>

<TR VALIGN="top">
<TD colspan=2 width=11%><B>Value</B></TD>
<TD colspan=3 width=76%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=12%>WVR_ALIGNTOP, WVR_ALIGNLEFT, WVR_ALIGNBOTTOM, WVR_ALIGNRIGHT</TD>
<TD colspan=3 width=88%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>&nbsp;</TD>
<TD colspan=3 width=66%>These values, used in combination, specify that the client area of the window is to be preserved and aligned appropriately relative to the new position of the window. For example, to align the client area to the lower-left corner, return the WVR_ALIGNLEFT and WVR_ALIGNTOP values.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=12%>WVR_HREDRAW, WVR_VREDRAW</TD>
<TD colspan=3 width=88%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>&nbsp;</TD>
<TD colspan=3 width=66%>These values, used in combination with any other values, cause the window to be completely redrawn if the client rectangle changes size horizontally or vertically. These values are similar to the CS_HREDRAW and CS_VREDRAW class styles.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=12%>WVR_REDRAW</TD>
<TD colspan=3 width=88%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>&nbsp;</TD>
<TD colspan=3 width=66%>This value causes the entire window to be redrawn. It is a combination of WVR_HREDRAW and WVR_VREDRAW values.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=12%>WVR_VALIDRECTS</TD>
<TD colspan=3 width=88%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>&nbsp;</TD>
<TD colspan=3 width=66%>This value indicates that, upon return from WM_NCCALCSIZE, the rectangles specified by the <B>rgrc[1]</B> and <B>rgrc[2]</B> members of the <A HREF="45g726.htm"><B>NCCALCSIZE_PARAMS</B></A> structure contain valid source and destination area rectangles, respectively. Windows combines these rectangles to calculate the area of the window to be preserved. Windows copies any part of the window image that is within the source rectangle and clips the image to the destination rectangle. Both rectangles are in parent-relative or screen-relative coordinates.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=2 width=11%>&nbsp;</TD>
<TD colspan=3 width=76%>This return value allows an application to implement more elaborate client-area preservation strategies, such as centering or preserving a subset of the client area.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>If <I>fCalcValidRects</I> is TRUE and an application returns zero, the old client area is preserved and is aligned with the upper-left corner of the new client area. </P>

<P><B>Default Action</B></P>

<P>The window may be redrawn, depending on whether the CS_HREDRAW or CS_VREDRAW class style is specified. This is the default, backward-compatible processing of this message by the <B>DefWindowProc</B> function (in addition to the usual client rectangle calculation described in the preceding table). </P>

<P><B>See Also</B></P>

<P><A HREF="32d1nbh.htm"><B>DefWindowProc</B></A>, <A HREF="fn4vpf.htm"><B>MoveWindow</B></A>, <A HREF="4557_v1.htm"><B>SetWindowPos</B></A>, <A HREF="45g726.htm"><B>NCCALCSIZE_PARAMS</B></A>, <A HREF="ezena2.htm"><B>RECT</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
