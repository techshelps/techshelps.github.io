<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>WinTrustProviderVerifyTrust [New - Windows NT]</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="3wun35"></A><B>WinTrustProviderVerifyTrust  <A HREF="29bt_qt.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A></B></P>

<P>[New - Windows NT]</P>

<P>The <B>WinTrustProviderVerifyTrust</B> function performs a specified verification action on a specified subject. When an application calls the <A HREF="hzvnye.htm"><B>WinVerifyTrust</B></A> function, WinTrust calls the <B>WinTrustProviderVerifyTrust</B> function of the trust provider that supports the specified action identifier.</P>

<P><B>LONG WinTrustProviderVerifyTrust(</B></P>

<TABLE cols=2 width=495>

<TR VALIGN="top">
<TD width=34%><B>HWND</B> <I>hwnd</I><B>,</B></TD>
<TD width=66%>// handle to a window for interacting with the user</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><B>    GUID</B> *<I>ActionID</I><B>,</B></TD>
<TD width=66%>// pointer to a trust provider action identifier</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><B>    LPVOID</B>  <I>ActionData</I></TD>
<TD width=66%>// pointer to an action-specific data structure</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><B>   );</B></TD>
<TD width=66%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>hwnd</I></P>

<P>Handle to the caller's window. The trust provider can use this value to determine whether it can interact with the user to perform the verification operation indicated by the action identifier. However, trust providers typically perform verification operations without input from the user. This parameter can be one of the following values.</P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=43%><B>Value</B></TD>
<TD width=57%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=43%>INVALID_HANDLE_VALUE</TD>
<TD width=57%>There is no interactive user. The trust provider performs the verification operation without the user's assistance. </TD>
</TR>

<TR VALIGN="top">
<TD width=43%>zero</TD>
<TD width=57%>The trust provider can use the interactive desktop to display its user interface. </TD>
</TR>

<TR VALIGN="top">
<TD width=43%>A valid window handle</TD>
<TD width=57%>The trust provider can assume that any value other than zero or INVALID_HANDLE_VALUE is a valid window handle that it can use to interact with the user. </TD>
</TR>
</TABLE><BR>

<P></P>

<P><I>ActionID</I></P>

<P>Pointer to a <B>GUID</B> structure that identifies the action to perform. Each trust provider supports a unique set of action identifiers. The trust provider determines whether the subject identified by the <I>ActionData</I> parameter is trusted for the specified action.</P>

<P><I>ActionData</I></P>

<P>Pointer to a buffer that contains information that the trust provider needs to process the specified action identifier. Typically, the data in the buffer includes information that identifies the subject that the trust provider must evaluate. The format and contents of the buffer depend on the action identifier and the trust provider.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the trust provider verifies that the subject is trusted for the specified action, the return value is ERROR_SUCCESS.</P>

<P>Otherwise, the return value is a status code that indicates the error that occurred. For example, a trust provider might indicate that the subject is not trusted, or is trusted but with limitations or warnings. The return value can be a trust-provider - specific value described in the documentation for an individual trust provider, or it can be one of the following error codes defined in WINERROR.H.</P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=60%><B>Value</B></TD>
<TD width=40%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=60%>TRUST_E_SUBJECT_NOT_TRUSTED</TD>
<TD width=40%>The subject is not trusted for the specified action. Most trust providers return a more detailed error code that describes the reason that the subject is not trusted.</TD>
</TR>

<TR VALIGN="top">
<TD width=60%>TRUST_E_ACTION_UNKNOWN</TD>
<TD width=40%>The trust provider does not support the specified action.</TD>
</TR>

<TR VALIGN="top">
<TD width=60%>TRUST_E_SUBJECT_FORM_UNKNOWN</TD>
<TD width=40%>The trust provider does not support the form specified for the subject.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Remarks</B></P>

<P>Each trust provider DLL must implement the <B>WinTrustProviderVerifyTrust</B> function. WinTrust gets a pointer to the trust provider's <B>WinTrustProviderVerifyTrust</B> implementation when WinTrust calls the trust provider's <A HREF="7zfj51.htm"><B>WinTrustProviderClientInitialize</B></A> initialization function. </P>

<P>A trust provider's <B>WinTrustProviderVerifyTrust</B> function executes in the process of the application that called the <B>WinVerifyTrust</B> function. The function also executes in the security context of the application.</P>

<P>The LPWINTRUST_PROVIDER_VERIFY_TRUST type is a pointer to a <B>WinTrustProviderVerifyTrust</B> function.</P>

<P><B>See Also</B></P>

<P><B>GUID</B>, <A HREF="7zfj51.htm"><B>WinTrustProviderClientInitialize</B></A>, <A HREF="hzvnye.htm"><B>WinVerifyTrust</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
