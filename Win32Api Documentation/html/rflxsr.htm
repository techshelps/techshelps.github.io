<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Binary Raster Operations</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="rflxsr"></A><B>Binary Raster Operations</B></P>

<P>This section lists the binary raster-operation codes used by the <A HREF="4m9r040.htm"><B>GetROP2</B></A> and <A HREF="1odld62.htm"><B>SetROP2</B></A> functions. Raster-operation codes define how GDI combines the bits from the selected pen with the bits in the destination bitmap. </P>

<P>Each raster-operation code represents a Boolean operation in which the values of the pixels in the selected pen and the destination bitmap are combined. Following are the two operands used in these operations: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=16%><B>Operand</B></TD>
<TD width=84%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=16%>P</TD>
<TD width=84%>Selected pen</TD>
</TR>

<TR VALIGN="top">
<TD width=16%>D</TD>
<TD width=84%>Destination bitmap</TD>
</TR>
</TABLE><BR>

<P></P>

<P>The Boolean operators used in these operations follow: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=17%><B>Operator</B></TD>
<TD width=83%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=17%>a</TD>
<TD width=83%>Bitwise AND</TD>
</TR>

<TR VALIGN="top">
<TD width=17%>n</TD>
<TD width=83%>Bitwise NOT (inverse)</TD>
</TR>

<TR VALIGN="top">
<TD width=17%>o</TD>
<TD width=83%>Bitwise OR</TD>
</TR>

<TR VALIGN="top">
<TD width=17%>x</TD>
<TD width=83%>Bitwise exclusive OR (XOR)</TD>
</TR>
</TABLE><BR>

<P></P>

<P>All Boolean operations are presented in reverse Polish notation. For example, the following operation replaces the values of the pixels in the destination bitmap with a combination of the pixel values of the pen and the selected brush: </P>

<P>DPo  </P>

<P></P>

<P>Each raster-operation code is a 32-bit integer whose high-order word is a Boolean operation index and whose low-order word is the operation code. The 16-bit operation index is a zero-extended 8-bit value that represents all possible outcomes resulting from the Boolean operation on two parameters (in this case, the pen and destination values). For example, the operation indexes for the DPo and DPan operations are shown in the following list: </P>

<TABLE cols=4>

<TR VALIGN="top">
<TD width=8%><B>P</B></TD>
<TD width=7%><B>D</B></TD>
<TD width=11%><B>DPo</B></TD>
<TD width=74%><B>DPan</B></TD>
</TR>

<TR VALIGN="top">
<TD width=8%>0</TD>
<TD width=7%>0</TD>
<TD width=11%>0</TD>
<TD width=74%>1 </TD>
</TR>

<TR VALIGN="top">
<TD width=8%>0</TD>
<TD width=7%>1</TD>
<TD width=11%>1</TD>
<TD width=74%>1 </TD>
</TR>

<TR VALIGN="top">
<TD width=8%>1</TD>
<TD width=7%>0</TD>
<TD width=11%>1</TD>
<TD width=74%>1 </TD>
</TR>

<TR VALIGN="top">
<TD width=8%>1</TD>
<TD width=7%>1</TD>
<TD width=11%>1</TD>
<TD width=74%>0 </TD>
</TR>
</TABLE><BR>

<P></P>

<P>The following list outlines the drawing modes and the Boolean operations that they represent: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=30%><B>Raster operation</B></TD>
<TD width=70%><B>Boolean operation</B></TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_BLACK</TD>
<TD width=70%>0</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_COPYPEN</TD>
<TD width=70%>P</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKNOTPEN</TD>
<TD width=70%>DPna</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPEN</TD>
<TD width=70%>DPa</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPENNOT</TD>
<TD width=70%>PDna</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGENOTPEN</TD>
<TD width=70%>DPno</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPEN</TD>
<TD width=70%>DPo</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPENNOT</TD>
<TD width=70%>PDno</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOP</TD>
<TD width=70%>D</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOT</TD>
<TD width=70%>Dn</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTCOPYPEN</TD>
<TD width=70%>Pn</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMASKPEN</TD>
<TD width=70%>DPan</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMERGEPEN</TD>
<TD width=70%>DPon</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTXORPEN</TD>
<TD width=70%>DPxn</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_WHITE</TD>
<TD width=70%>1</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_XORPEN</TD>
<TD width=70%>DPx</TD>
</TR>
</TABLE><BR>

<P></P>

<P>For a monochrome device, GDI maps the value zero to black and the value 1 to white. If an application attempts to draw with a black pen on a white destination by using the available binary raster operations, the following results occur: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=30%><B>Raster operation</B></TD>
<TD width=70%><B>Result</B></TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_BLACK</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_COPYPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKNOTPEN</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPENNOT</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGENOTPEN</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPENNOT</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOP</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOT</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTCOPYPEN</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMASKPEN</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMERGEPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTXORPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_WHITE</TD>
<TD width=70%>No visible line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_XORPEN</TD>
<TD width=70%>No visible line</TD>
</TR>
</TABLE><BR>

<P></P>

<P>For a color device, GDI uses RGB values to represent the colors of the pen and the destination. An RGB color value is a long integer that contains a red, a green, and a blue color field, each specifying the intensity of the given color. Intensities range from 0 through 255. The values are packed in the three low-order bytes of the long integer. The color of a pen is always a solid color, but the color of the destination may be a mixture of any two or three colors. If an application attempts to draw with a white pen on a blue destination by using the available binary raster operations, the following results occur: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=30%><B>Raster operation</B></TD>
<TD width=70%><B>Result</B></TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_BLACK</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_COPYPEN</TD>
<TD width=70%>Visible white line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKNOTPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPEN</TD>
<TD width=70%>Invisible blue line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MASKPENNOT</TD>
<TD width=70%>Visible red/green line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGENOTPEN</TD>
<TD width=70%>Invisible blue line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPEN</TD>
<TD width=70%>Visible white line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_MERGEPENNOT</TD>
<TD width=70%>Visible white line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOP</TD>
<TD width=70%>Invisible blue line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOT</TD>
<TD width=70%>Visible red/green line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTCOPYPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMASKPEN</TD>
<TD width=70%>Visible red/green line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTMERGEPEN</TD>
<TD width=70%>Visible black line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_NOTXORPEN</TD>
<TD width=70%>Invisible blue line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_WHITE</TD>
<TD width=70%>Visible white line</TD>
</TR>

<TR VALIGN="top">
<TD width=30%>R2_XORPEN</TD>
<TD width=70%>Visible red/green line</TD>
</TR>
</TABLE><BR>

<P></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
