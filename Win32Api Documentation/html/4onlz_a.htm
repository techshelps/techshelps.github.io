<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>GetCompressedFileSize</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="4onlz_a"></A><B>GetCompressedFileSize  <A HREF="1401f23.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="qnj9so.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="1f83g2.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>GetCompressedFileSize</B> function obtains the compressed size, in bytes, of a specified file. </P>

<P>The <B>GetCompressedFileSize</B> function obtains the actual number of bytes of disk storage used to store a specified file. If the file is located on a volume that supports compression, and the file is compressed, the value obtained is the compressed size of the specified file. If the file is not located on a volume that supports compression, or if the file is not compressed, the value obtained is the actual file size, the same as the value returned by a call to <A HREF="19tnl8n.htm"><B>GetFileSize</B></A>.</P>

<P><B>DWORD GetCompressedFileSize(</B></P>

<TABLE cols=2 width=623>

<TR VALIGN="top">
<TD width=33%><B>LPCTSTR</B> <I>lpFileName</I><B>,</B></TD>
<TD width=67%>// pointer to name of file</TD>
</TR>

<TR VALIGN="top">
<TD width=33%><B>    LPDWORD</B> <I>lpFileSizeHigh</I></TD>
<TD width=67%>// pointer to <B>DWORD</B> to receive high-order doubleword of file size</TD>
</TR>

<TR VALIGN="top">
<TD width=33%><B>   );</B></TD>
<TD width=67%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>lpFileName</I></P>

<P>Pointer to a null-terminated string that specifies the name of the file.</P>

<P><I>lpFileSizeHigh</I></P>

<P>Pointer to a <B>DWORD</B> variable that the function sets to the high-order doubleword of the compressed file size. The function's return value is the low-order doubleword of the compressed file size.</P>

<P>This parameter can be NULL if the high-order doubleword of the compressed file size is not needed. Files less than 4 gigabytes in size do not need the high-order doubleword. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is the low-order doubleword of the actual number of bytes of disk storage used to store the specified file, and if <I>lpFileSizeHigh</I> is non-NULL, the function puts the high-order doubleword of that actual value into the <B>DWORD</B> pointed to by that parameter. This is the compressed file size for compressed files, the actual file size for noncompressed files.</P>

<P>If the function fails, and <I>lpFileSizeHigh</I> is NULL, the return value is 0xFFFFFFFF. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>.</P>

<P>If the function fails, and <I>lpFileSizeHigh</I> is non-NULL, the return value is 0xFFFFFFFF, and <B>GetLastError</B> returns a value other than NO_ERROR.</P>

<P><B>Remarks</B></P>

<P>Calling the <B>GetCompressedFileSize</B> function with the name of a nonseeking device, such as a pipe or a communications device, has no meaning.</P>

<P>Note that if the return value is 0xFFFFFFFF and <I>lpFileSizeHigh</I> is non-NULL, an application must call <B>GetLastError</B> to determine whether the function has succeeded or failed.</P>

<P>An application can determine whether a volume is compressed by calling <B>GetVolumeInformation</B>, then checking the status of the FS_VOL_IS_COMPRESSED flag in the <B>DWORD </B>pointed to by that function's <I>lpFileSystemFlags</I> parameter.</P>

<P>An application can determine whether a file is compressed by implementing the following pseudocode:</P>

<P>call <B>GetVolumeInformation</B> on the file's volume </P>

<P>if the file's volume is compressed </P>

<P>call <B>GetCompressedFileSize</B> on the file </P>

<P>call <B>GetFileSize</B> on the file </P>

<P>if the sizes don't match </P>

<P>the file is compressed </P>

<P></P>

<P><B>See Also</B></P>

<P><A HREF="19tnl8n.htm"><B>GetFileSize</B></A>,<B> <A HREF="cjnvcw.htm">GetVolumeInformation</A></B></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
