<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>UpdateDebugInfoFileEx</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1u9vcpb"></A><B>UpdateDebugInfoFileEx  <A HREF="tknzmz.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>UpdateDebugInfoFileEx</B> function takes the information stored in <I>NtHeaders</I> and updates the corresponding fields in the .DBG file.</P>

<P><B>BOOL UpdateDebugInfoFileEx(</B></P>

<TABLE cols=2 width=350>

<TR VALIGN="top">
<TD width=90%><B>IN LPSTR </B><I>ImageFileName</I><B>,</B></TD>
<TD width=10%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=90%><B>    IN LPSTR </B><I>SymbolPath</I><B>,</B></TD>
<TD width=10%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=90%><B>    OUT LPSTR </B><I>DebugFilePath</I><B>,</B></TD>
<TD width=10%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=90%><B>    IN OUT PIMAGE_NT_HEADERS </B><I>NtHeaders</I><B>,</B></TD>
<TD width=10%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=90%><B>    IN DWORD </B><I>OldChecksum</I></TD>
<TD width=10%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=90%><B>   );</B></TD>
<TD width=10%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>ImageFIleName</I></P>

<P>The name of the image that is now out of date with respect to its symbol file.</P>

<P><I>SymbolPath</I></P>

<P>The path in which to look for the symbol file.</P>

<P><I>DebugFilePath</I></P>

<P>The symbol file that was updated.</P>

<P><I>NtHeaders</I></P>

<P>The new NT headers.</P>

<P><I>OldChecksum</I></P>

<P>The original checksum value. If this value does not match the checksum that is present in the mapped image, the flags in the <I>.</I>DBG file contain IMAGE_SEPARATE_DEBUG_MISMATCH and the last error value is set to ERROR_INVALID_DATA<I>.</I></P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is TRUE.</P>

<P><B>Remarks</B></P>

<P>The <B>UpdateDebugInfoFileEx</B> function takes the information stored in <I>NtHeaders</I> and updates the corresponding fields in the .DBG file. Any time an image file is modified, this function should be called to keep the numbers in sync. Specifically, whenever an image checksum changes, the .DBG file should be updated to match.</P>

</BODY>
</HTML>
