<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Page-Space to Device-Space Transformations</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="34id_wv"></A><B>Page-Space to Device-Space Transformations</B></P>

<P>The page-space to device-space transformation was part of the original Windows interface. This transformation determines the mapping mode for all graphics output associated with a particular DC. A <I>mapping mode</I> is a scaling transformation that specifies the size of the units used for drawing operations. The mapping mode may also perform translation. In some cases, the mapping mode alters the orientation of the x- and y-axes in device space. The mapping modes are described in the following table. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=28%><B>Mapping mode</B></TD>
<TD width=72%><B>Description</B></TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_ANISOTROPIC</TD>
<TD width=72%>Each unit in page space is mapped to an application-specified unit in device space. The axis may or may not be equally scaled (for example, a circle drawn in world space may appear to be an ellipse when depicted on a given device). The orientation of the axis is also specified by the application.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_HIENGLISH</TD>
<TD width=72%>Each unit in page space is mapped to 0.001 inch in device space. Increasing values of x occur as you move to the right; increasing values of y occur as you move up.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_HIMETRIC</TD>
<TD width=72%>Each unit in page space is mapped to 0.01 millimeter in device space. Increasing values of x occur as you move to the right; increasing values of y occur as you move up.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_ISOTROPIC</TD>
<TD width=72%>Each unit in page space is mapped to an application-defined unit in device space. The axes are always equally scaled. The orientation of the axes may be specified by the application.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_LOENGLISH</TD>
<TD width=72%>Each unit in page space is mapped to 0.01 inch in device space. Increasing values of x occur as you move to the right; increasing values of y occur as you move up.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_LOMETRIC</TD>
<TD width=72%>Each unit in page space is mapped to 0.1 millimeter in device space. Increasing values of x occur as you move to the right; increasing values of y occur as you move up.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_TEXT</TD>
<TD width=72%>Each unit in page space is mapped to one pixel; that is, no scaling is performed at all. When no translation is in effect (this is the default), page space in the MM_TEXT mapping mode is equivalent to physical device space. Increasing values of x occur as you move to the right; increasing values of y occur as you move down.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>MM_TWIPS</TD>
<TD width=72%>Each unit in page space is mapped to one twentieth of a printer's point (1/1440 inch). Increasing values of x occur as you move to the right; increasing values of y occur as you move up.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>You set a mapping mode by calling the <A HREF="1gp60x2.htm"><B>SetMapMode</B></A> function. You retrieve the current mapping mode for a DC by calling the <A HREF="euerqp.htm"><B>GetMapMode</B></A> function. </P>

<P>The page-space to device-space transformations consist of values calculated from the points given by the window and viewport. The window and viewport each consist of a pair of points, with one point specifying an origin and the other a width and height (called the <I>extents</I>). The window points are in logical coordinates; the viewport in device coordinates (pixels). Windows combines the origins and extents from both the window and viewport to create the transformation. This means that the window and viewport each specify half of the factors needed to define the transformation used to map points in page space to device space. The effect of a transformation calculated in this way is that Windows maps the window origin to the viewport origin and the window extents to the viewport extents, as shown in the following illustration.</P>

<P><IMG SRC="../images/bm71.gif" ALT="" BORDER=0></P>

<P>The window and viewport extents establish a ratio or scaling factor used in the page-space to device-space transformations. For the six predefined mapping modes (MM_HIENGLISH, MM_LOENGLISH, MM_HIMETRIC, MM_LOMETRIC, MM_TEXT, and MM_TWIPS), the extents are set by Windows when you call <B>SetMapMode</B>. They cannot be changed. The other two mapping modes (MM_ISOTROPIC and MM_ANISOTROPIC) require that you specify the extents. This is done by calling <B>SetMapMode</B> to set the appropriate mode and then calling the <A HREF="11g21gf.htm"><B>SetWindowExtEx</B></A> and <A HREF="4u093j.htm"><B>SetViewportExtEx</B></A> functions to specify the extents. In the MM_ISOTROPIC mapping mode, it is important to call <B>SetWindowExtEx </B>before calling <B>SetViewportExtEx</B>.</P>

<P>The window and viewport origins establish the translation used in the page-space to device-space transformations. You set the window and viewport origins by using the <A HREF="11pvogf.htm"><B>SetWindowOrgEx</B></A> and <A HREF="543w3j.htm"><B>SetViewportOrgEx</B></A> functions. The origins are independent of the extents, and an application can set them regardless of the current mapping mode. Changing a mapping mode does not affect the currently set origins (although it can affect the extents). Origins are specified in absolute units that the current mapping mode does not affect. You can also alter the origins by using the <A HREF="r0g1ri.htm"><B>OffsetWindowOrgEx</B></A> and <A HREF="1jgiv77.htm"><B>OffsetViewportOrgEx</B></A> functions.</P>

<P>The following formula shows the math involved in converting a point from page space to device space.</P>

<P>Dx = ((Lx - WOx) * VEx / WEx) + VOx  </P>

<P></P>

<P>The following variables are involved.</P>

<P>Dx x value in device units  </P>

<P>Lx x value in logical units (also known as page space units)  </P>

<P>WOx window x origin </P>

<P>VOx viewport x origin </P>

<P>WEx window x-extent </P>

<P>VEx viewport x-extent </P>

<P></P>

<P>The same equation with <I>y</I> replacing <I>x</I> transforms the <I>y</I> component of a point.</P>

<P>The formula first offsets the point from its coordinate origin. This value, no longer biased by the origin, is then scaled into the destination coordinate system by the ratio of the extents. Finally, the scaled value is offset by the destination origin to its final mapping.</P>

<P>The <A HREF="h8phpf.htm"><B>LPtoDP</B></A><B> </B>and <A HREF="12b1hdv.htm"><B>DPtoLP</B></A> functions may be used to convert from logical points to device points and from device points to logical points, respectively.</P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
