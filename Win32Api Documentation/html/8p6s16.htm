<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Adding Custom Buttons</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="8p6s16"></A><B>Adding Custom Buttons</B></P>

<P>A File Manager extension can add custom buttons to the File Manager toolbar by returning button information in response to the FMEVENT_TOOLBARLOAD message. File Manager sends this message to the <B>FMExtensionProc</B> function of the extension only if the extension successfully installed a custom menu during the processing of the FMEVENT_LOAD message. Use custom buttons as accelerator keys for menu commands specified in the custom menu. </P>

<P>When <B>FMExtensionProc</B> receives the FMEVENT_TOOLBARLOAD message, the <I>lParam</I> parameter points to an <A HREF="uj3snn.htm"><B>FMS_TOOLBARLOAD</B></A> structure. The File Manager extension must copy information about the custom buttons to the structure, including the number of buttons and a specifier for the bitmap containing the button images (either the identifier for a bitmap resource or a handle to a memory bitmap). The extension must also include the address of an array of <A HREF="aaceup.htm"><B>EXT_BUTTON</B></A> structures, each of which must contain a command identifier for the corresponding button. If the button is an accelerator for a menu command, the button identifier and corresponding menu-command identifier must be equal.  </P>

<P>The bitmap containing the button images must be a bitmap resource or a memory bitmap. The extension must copy either the resource identifier or the memory bitmap's handle to the <B>FMS_TOOLBARLOAD</B> structure; and, in the case of a bitmap resource, the resource must be in the extension's executable file. </P>

<P>The bitmap must contain one image for each specified button. The bitmap height is always 15 pixels; the width is always a multiple of 16 pixels because each button image must be 16 pixels wide. Button images are concatenated from left to right. For example, the image of the first button specified in the array of <B>EXT_BUTTON</B> structures must be the leftmost image in the bitmap. </P>

<P>An extension can provide a line of Help text for a button by specifying the identifier of a string resource in the <B>idsHelp</B> member of the <B>EXT_BUTTON</B> structure. When the user selects the button, File Manager retrieves the string resource and displays it on the toolbar. </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
