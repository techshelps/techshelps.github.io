<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>GetMessage</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="ixkdtp"></A><B>GetMessage  <A HREF="011v_1.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="21n71oj.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="hpo6s6.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>GetMessage</B> function retrieves a message from the calling thread's message queue and places it in the specified structure. This function can retrieve both messages associated with a specified window and thread messages posted via the <A HREF="4oachi.htm"><B>PostThreadMessage</B></A><B> </B>function. The function retrieves messages that lie within a specified range of message values. <B>GetMessage</B> does not retrieve messages for windows that belong to other threads or applications. </P>

<P><B>BOOL GetMessage(</B></P>

<TABLE cols=2 width=423>

<TR VALIGN="top">
<TD width=42%><B>LPMSG</B> <I>lpMsg</I><B>,</B></TD>
<TD width=58%>// address of structure with message</TD>
</TR>

<TR VALIGN="top">
<TD width=42%><B>    HWND</B> <I>hWnd</I><B>,</B></TD>
<TD width=58%>// handle of window</TD>
</TR>

<TR VALIGN="top">
<TD width=42%><B>    UINT</B> <I>wMsgFilterMin</I><B>,</B></TD>
<TD width=58%>// first message</TD>
</TR>

<TR VALIGN="top">
<TD width=42%><B>    UINT</B> <I>wMsgFilterMax</I> </TD>
<TD width=58%>// last message</TD>
</TR>

<TR VALIGN="top">
<TD width=42%><B>   );</B></TD>
<TD width=58%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>lpMsg</I></P>

<P>Points to an <A HREF="5ctef1.htm"><B>MSG</B></A> structure that receives message information from the thread's message queue. </P>

<P><I>hWnd</I></P>

<P>Identifies the window whose messages are to be retrieved. One value has a special meaning: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=17%><B>Value</B></TD>
<TD width=83%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=17%>NULL</TD>
<TD width=83%><B>GetMessage</B> retrieves messages for any window that belongs to the calling thread and thread messages posted to the calling thread via <A HREF="4oachi.htm"><B>PostThreadMessage</B></A>.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><I>wMsgFilterMin</I></P>

<P>Specifies the integer value of the lowest message value to be retrieved. </P>

<P><I>wMsgFilterMax</I></P>

<P>Specifies the integer value of the highest message value to be retrieved. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function retrieves a message other than WM_QUIT, the return value is nonzero.</P>

<P>If the function retrieves the WM_QUIT message, the return value is zero. </P>

<P>If there is an error, the return value is -1. For example, the function fails if <I>hWnd</I> is an invalid window handle.</P>

<P><B>Remarks</B></P>

<P>An application typically uses the return value to determine whether to end the main message loop and exit the program. </P>

<P>The <B>GetMessage</B> function only retrieves messages associated with the window identified by the <I>hWnd</I> parameter or any of its children as specified by the <A HREF="8lq8hx.htm"><B>IsChild</B></A> function, and within the range of message values given by the <I>wMsgFilterMin</I> and <I>wMsgFilterMax</I> parameters. If <I>hWnd</I> is NULL, <B>GetMessage</B> retrieves messages for any window that belongs to the calling thread and thread messages posted to the calling thread via <A HREF="4oachi.htm"><B>PostThreadMessage</B></A>. <B>GetMessage</B> does not retrieve messages for windows that belong to other threads nor for threads other than the calling thread. Thread messages, posted by the <B>PostThreadmessage</B> function, have a message <I>hWnd</I> value of NULL. If <I>wMsgFilterMin</I> and <I>wMsgFilterMax</I> are both zero, <B>GetMessage</B> returns all available messages (that is, no range filtering is performed). </P>

<P>The WM_KEYFIRST and WM_KEYLAST constants can be used as filter values to retrieve all messages related to keyboard input; the WM_MOUSEFIRST and WM_MOUSELAST constants can be used to retrieve all mouse messages. If the <I>wMsgFilterMin</I> and <I>wMsgFilterMax</I> parameters are both zero, the <B>GetMessage</B> function returns all available messages (that is, without performing any filtering). </P>

<P><B>GetMessage</B> does not remove WM_PAINT messages from the queue. The messages remain in the queue until processed. </P>

<P>Note that the function return value can be TRUE, FALSE, or -1. Thus, you should avoid code like this:</P>

<P>while (GetMessage( lpMsg, hWnd, 0, 0)) ...  </P>

<P></P>

<P>The possibility of a -1 return value means that such code can lead to fatal application errors.</P>

<P><B>See Also</B></P>

<P><A HREF="8lq8hx.htm"><B>IsChild</B></A>, <A HREF="5ctef1.htm"><B>MSG</B></A>, <A HREF="0x9xxx.htm"><B>PeekMessage</B></A>, <A HREF="fixdt_.htm"><B>PostMessage</B></A>, <A HREF="4oachi.htm"><B>PostThreadMessage</B></A>, <A HREF="l7ad9v.htm"><B>WaitMessage</B></A> </P>

</BODY>
</HTML>
