<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>WM_CANCELJOURNAL</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="31phbfw"></A><B>WM_CANCELJOURNAL  <A HREF="2osr9wg.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="qpp.yo.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="dblbe..htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The WM_CANCELJOURNAL message is posted to an application when a user cancels the application's journaling activities. The message is posted with a NULL window handle. </P>

<P>WM_CANCELJOURNAL  </P>

<P>wParam = 0; // not used, must be zero </P>

<P>lParam = 0; // not used, must be zero </P>

<P></P>

<P><B>Parameters</B></P>

<P>This message has no parameters. </P>

<P><B>Return Values</B></P>

<P>This message does not return a value. It is meant to be processed from within an application's main loop or a <A HREF="ixkdtp.htm"><B>GetMessage</B></A> hook procedure, not from a window procedure. </P>

<P><B>Remarks</B></P>

<P>Journal record and playback modes are modes imposed on the system that let an application sequentially record or play back user input. The system enters these modes when an application installs a <A HREF="32huo95.htm"><B>JournalRecordProc</B></A> or <A HREF="lesnkt.htm"><B>JournalPlaybackProc</B></A> hook procedure. When the system is in either of these journaling modes, applications must take turns reading input from the input queue. If any one application stops reading input while the system is in a journaling mode, other applications are forced to wait. </P>

<P>To ensure a robust system, one that cannot be hung up by any one application, Windows NT automatically cancels any journalling activities when a user presses CTRL+ESC or CTRL+ALT+DEL. The system then unhooks any journaling hook procedures, and posts a WM_CANCELJOURNAL message, with a NULL window handle, to the application that set the journaling hook. </P>

<P>Since the WM_CANCELJOURNAL has a NULL window handle, it cannot be dispatched to a window procedure. There are two ways for an application to see a WM_CANCELJOURNAL message: If the application is running in its own main loop, it must catch the message between its call to <A HREF="ixkdtp.htm"><B>GetMessage</B></A> or <A HREF="0x9xxx.htm"><B>PeekMessage</B></A> and its call to <A HREF="20gx08e.htm"><B>DispatchMessage</B></A>. If the application is not running in its own main loop, it must set a <A HREF="wlhv1n.htm"><B>GetMsgProc</B></A> hook procedure (via a call to <A HREF="2d7__i2.htm"><B>SetWindowsHookEx</B></A> specifying the WH_GETMESSAGE hook type) that watches for the message. </P>

<P>When an application sees a WM_CANCELJOURNAL message, it can assume two things: the user has intentionally cancelled the journal record or playback mode, and the system has already unhooked any journal record or playback hook procedures. </P>

<P>Note that the key combinations mentioned above (CTRL+ESC or CTRL+ALT+DEL) cause the system to cancel journaling. If any one application is hung, they give the user a means of recovery. The VK_CANCEL virtual keycode (usually implemented as the CTRL+BREAK key combination) is what an application that is in journal record mode should watch for as a signal that the user wishes to cancel the journaling activity. The difference is that watching for VK_CANCEL is a suggested behavior for journaling applications, whereas CTRL+ESC or CTRL+ALT+DEL cause the system to cancel journalling regardless of a journalling application's behavior. </P>

<P><B>See Also</B></P>

<P><A HREF="20gx08e.htm"><B>DispatchMessage</B></A>, <A HREF="ixkdtp.htm"><B>GetMessage</B></A>, <A HREF="lesnkt.htm"><B>JournalPlaybackProc</B></A>, <A HREF="32huo95.htm"><B>JournalRecordProc</B></A>, <A HREF="wlhv1n.htm"><B>GetMsgProc</B></A>, <A HREF="0x9xxx.htm"><B>PeekMessage</B></A>, <A HREF="2d7__i2.htm"><B>SetWindowsHookEx</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
