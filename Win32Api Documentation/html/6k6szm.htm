<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>CheckSumMappedFile</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="6k6szm"></A><B>CheckSumMappedFile  <A HREF="1mpvghp.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>CheckSumMappedFile</B> function computes the checksum of an image file.</P>

<P><B>PIMAGE_NT_HEADERS CheckSumMappedFile(</B></P>

<TABLE cols=2 width=263>

<TR VALIGN="top">
<TD width=87%><B>IN LPVOID </B><I>BaseAddress</I><B>,</B></TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=87%><B>    IN DWORD </B><I>FileLength</I><B>,</B></TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=87%><B>    OUT LPDWORD </B><I>HeaderSum</I><B>,</B></TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=87%><B>    OUT LPDWORD </B><I>CheckSum</I></TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=87%><B>   );</B></TD>
<TD width=13%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>BaseAddress</I></P>

<P>A pointer to the base of the mapped file. This value is obtained by calling the <B>MapViewOfFile</B> function<I>.</I></P>

<P><I>FileLength</I></P>

<P>The length of the file, in bytes.</P>

<P><I>HeaderSum</I></P>

<P>A pointer to a variable that receives the original checksum from the image file, or zero if there is an error.</P>

<P><I>CheckSum</I></P>

<P>A pointer to the variable that receives the computed checksum.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is a pointer to the IMAGE_NT_HEADERS structure contained in the mapped image.</P>

<P>If the function fails, then the return value is NULL. To retrieve extended error information, call <B>GetLastError</B>.</P>

<P><B>Remarks</B></P>

<P>A new checksum for the file is computed and returned in the <I>CheckSum</I> parameter. This function is used by any application that creates or modifies an executable image. Checksums are required for Windows NT kernel mode drivers and some system DLLs. The Win32 linker computes the original checksum at link time, if the linker switch for checksumming is turned on. </P>

<P>The linker switch to enable the checksum calculation is <I>/RELEASE</I>. It is recommended that all images have valid checksums. It is the caller's responsibility to place the newly computed checksum into the mapped image and update the on-disk image of the file.</P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
