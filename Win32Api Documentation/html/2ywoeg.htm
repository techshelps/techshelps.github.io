<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>Invalidating the Client Area</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="2ywoeg"></A><B>Invalidating the Client Area</B></P>

<P>Windows is not the only source of <A HREF="f55xz2.htm">WM_PAINT</A> messages. The <A HREF="e0keni.htm"><B>InvalidateRect</B></A> or <A HREF="5au1zwt.htm"><B>InvalidateRgn</B></A> function can indirectly generate WM_PAINT messages for your windows. These functions mark all or part of a client area as invalid (that must be redrawn). </P>

<P>In the following example, the window procedure invalidates the entire client area when processing <A HREF="4gep_o2.htm">WM_CHAR</A> messages. This allows the user to change the figure by typing a number and view the results; these results are drawn as soon as there are no other messages in the application's message queue. </P>

<P></P>

<P>POINT aptPentagon[6] = {50,2, 98,35, 79,90, 21,90, 2,35, 50,2}, </P>

<P>aptHexagon[7]  = {50,2, 93,25, 93,75, 50,98, 7,75, 7,25, 50,2}; </P>

<P>POINT *ppt = aptPentagon; </P>

<P>int cpt = 6; </P>

<P></P>

<P>. </P>

<P>. </P>

<P>. </P>

<P></P>

<P>case WM_CHAR: </P>

<P>switch (wParam) { </P>

<P>case '5': </P>

<P>ppt = aptPentagon; </P>

<P>cpt = 6; </P>

<P>break; </P>

<P>case '6': </P>

<P>ppt = aptHexagon; </P>

<P>cpt = 7; </P>

<P>break; </P>

<P>} </P>

<P>InvalidateRect(hwnd, NULL, TRUE); </P>

<P>return 0L; </P>

<P></P>

<P>case WM_PAINT: </P>

<P>hdc = BeginPaint(hwnd, &amp;ps); </P>

<P>GetClientRect(hwnd, &amp;rc); </P>

<P>SetMapMode(hdc, MM_ANISOTROPIC); </P>

<P>SetWindowExtEx(hdc, 100, 100, NULL); </P>

<P>SetViewportExtEx(hdc, rc.right, rc.bottom, NULL); </P>

<P>Polyline(hdc, ppt, cpt); </P>

<P>EndPaint(hwnd, &amp;ps); </P>

<P>return 0L; </P>

<P></P>

<P>In this example, the NULL argument used by <A HREF="e0keni.htm"><B>InvalidateRect</B></A> specifies the entire client area; the TRUE argument causes the background to be erased. If you do not want the application to wait until the application's message queue has no other messages, use the <A HREF="19g_54e.htm"><B>UpdateWindow</B></A> function to force the <A HREF="f55xz2.htm">WM_PAINT</A> message to be sent immediately. If there is any invalid part of the client area, <B>UpdateWindow</B> sends the WM_PAINT message for the given window directly to the window procedure. </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
