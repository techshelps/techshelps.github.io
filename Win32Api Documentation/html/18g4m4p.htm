<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Choosing a Color</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="18g4m4p"></A><B>Choosing a Color</B></P>

<P>This topic describes sample code that displays a Color dialog box so a user can select a color. The sample code first initializes a <A HREF="ayipdb.htm"><B>CHOOSECOLOR</B></A> structure, and then calls the <A HREF="12a9ry_.htm"><B>ChooseColor</B></A> function to display the dialog box. If the function returns TRUE, indicating that the user selected a color, the sample code uses the selected color to create a new solid brush.</P>

<P>This example uses the <B>CHOOSECOLOR</B> structure to initialize the dialog box as follows: </P>

<P>·Initializes the <B>lpCustColors</B> member with a pointer to a static COLORREF array. The colors in the array are initially black, but the static array preserves custom colors created by the user for subsequent <B>ChooseColor</B> calls.</P>

<P>·Sets the CC_RGBINIT flag and initializes the <B>rgbResult</B> member to specify the color that is initially selected when the dialog box opens. If not specified, the initial selection is black. The example uses the <I>rgbCurrent</I> static variable to preserve the selected value between calls to <A HREF="12a9ry_.htm"><B>ChooseColor</B></A>.</P>

<P>·Sets the CC_FULLOPEN flag so the custom colors extension of the dialog box is always displayed.</P>

<P></P>

<P>CHOOSECOLOR cc;                 // common dialog box structure  </P>

<P>static COLORREF acrCustClr[16]; // array of custom colors </P>

<P>HWND hwnd;                      // owner window</P>

<P>HBRUSH hbrush;                  // brush handle</P>

<P>static DWORD rgbCurrent;        // initial color selection</P>

<P>// Initialize CHOOSECOLOR </P>

<P>ZeroMemory(&amp;cc, sizeof(CHOOSECOLOR));</P>

<P>cc.lStructSize = sizeof(CHOOSECOLOR);</P>

<P>cc.hwndOwner = hwnd;</P>

<P>cc.lpCustColors = (LPDWORD) acrCustClr;</P>

<P>cc.rgbResult = rgbCurrent;</P>

<P>cc.Flags = CC_FULLOPEN | CC_RGBINIT;</P>

<P></P>

<P>if (ChooseColor(&amp;cc)==TRUE) {</P>

<P>hbrush = CreateSolidBrush(cc.rgbResult);</P>

<P>rgbCurrent = cc.rgbResult; </P>

<P>}</P>

<P></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
