<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>WM_NOTIFYFORMAT</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="dg53jm"></A><B>WM_NOTIFYFORMAT  <A HREF="11opn1x.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="s9kba5.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="yofurt.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>Common controls, custom controls, and their parent windows use the WM_NOTIFYFORMAT message to determine whether the control should use ANSI or Unicode structures in the <A HREF="1mzt7br.htm">WM_NOTIFY</A> notification messages that the control uses to communicate with its parent window. WM_NOTIFYFORMAT messages are sent from a control to its parent window, and from the parent window to the control.</P>

<P>hwndFrom = (HWND) wParam;        // handle of the window sending this message  </P>

<P>Command =  lParam;               // command value specifying the nature of this message </P>

<P></P>

<P><B>Parameters</B></P>

<P><I>hwndFrom</I></P>

<P>Value of <I>wParam</I>. Handle of the window that is sending the WM_NOTIFYFORMAT message. If <I>Command</I> is NF_QUERY, <I>hwndFrom</I> is the handle of a control. If <I>Command</I> is NF_REQUERY, this is the handle of the parent window of a control.</P>

<P><I>Command</I></P>

<P>Value of <I>lParam. </I>A command value that specifies the nature of the WM_NOTIFYFORMAT message. The following values are defined: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=26%><B>Value</B></TD>
<TD width=74%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=26%>NF_QUERY</TD>
<TD width=74%>The message is a query to determine whether ANSI or Unicode structures should be used in <A HREF="1mzt7br.htm">WM_NOTIFY</A> messages. This command is sent from a control to its parent window. This command is sent during the creation of a control, and in response to an NF_REQUERY command.</TD>
</TR>

<TR VALIGN="top">
<TD width=26%>NF_REQUERY</TD>
<TD width=74%>The message is a request that a control send an NF_QUERY form of this message to its parent window. This command is sent from a control's parent window to the control. The parent window is asking the control to requery it about the type of structures to use in WM_NOTIFY messages.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Return Values</B></P>

<P>The return value is one of the following :</P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=27%><B>Value</B></TD>
<TD width=73%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=27%>NFR_ANSI</TD>
<TD width=73%>ANSI structures should be used in <A HREF="1mzt7br.htm">WM_NOTIFY</A> messages sent by the control.</TD>
</TR>

<TR VALIGN="top">
<TD width=27%>NFR_UNICODE</TD>
<TD width=73%>Unicode structures should be used in WM_NOTIFY messages sent by the control. </TD>
</TR>

<TR VALIGN="top">
<TD width=27%>0</TD>
<TD width=73%>An error occurred. </TD>
</TR>
</TABLE><BR>

<P></P>

<P>If <I>Command</I> is NF_REQUERY, the return value is the result of the requery operation. </P>

<P><B>Remarks</B></P>

<P>When a common control is created, the control sends a WM_NOTIFYFORMAT message to its parent window to determine the type of structures to use in <A HREF="1mzt7br.htm">WM_NOTIFY</A> messages. If the parent window does not handle this message, the <A HREF="32d1nbh.htm"><B>DefWindowProc</B></A> function responds according to the type of the parent window. That is, if the parent window is a Unicode window, <B>DefWindowProc</B> returns NFR_UNICODE, and if the parent window is an ANSI window, <B>DefWindowProc</B> returns NFR_ANSI. If the parent window is a dialog box and does not handle this message, the <B>DefDlgProc</B> function similarly responds according to the type of the dialog box (Unicode or ANSI). </P>

<P>A parent window can change the type of structures a common control uses in WM_NOTIFY messages by setting <I>lParam</I> to NF_REQUERY and sending a WM_NOTIFYFORMAT message to the control. This causes the control to send an NF_QUERY form of the WM_NOTIFYFORMAT message to the parent window.</P>

<P><B>See Also</B></P>

<P><A HREF="l1yo73.htm"><B>DefDlgProc</B></A>, <A HREF="32d1nbh.htm"><B>DefWindowProc</B></A>, <A HREF="1mzt7br.htm">WM_NOTIFY</A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
