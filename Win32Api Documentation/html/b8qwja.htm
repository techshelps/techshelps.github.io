<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>GetKernelObjectSecurity</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="b8qwja"></A><B>GetKernelObjectSecurity  <A HREF="2pyc_9o.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="1966ja.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="afqqmm.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>GetKernelObjectSecurity</B> function retrieves a copy of the security descriptor protecting a kernel object. </P>

<P><B>BOOL GetKernelObjectSecurity(</B></P>

<TABLE cols=2 width=611>

<TR VALIGN="top">
<TD width=57%><B>HANDLE</B> <I>Handle</I><B>,</B></TD>
<TD width=43%>// handle of object to query</TD>
</TR>

<TR VALIGN="top">
<TD width=57%><B>    SECURITY_INFORMATION</B> <I>RequestedInformation</I><B>,</B></TD>
<TD width=43%>// requested information</TD>
</TR>

<TR VALIGN="top">
<TD width=57%><B>    PSECURITY_DESCRIPTOR</B> <I>pSecurityDescriptor</I><B>,</B></TD>
<TD width=43%>// address of security descriptor</TD>
</TR>

<TR VALIGN="top">
<TD width=57%><B>    DWORD</B> <I>nLength</I><B>,</B></TD>
<TD width=43%>// size of buffer for security descriptor </TD>
</TR>

<TR VALIGN="top">
<TD width=57%><B>    LPDWORD</B> <I>lpnLengthNeeded</I> </TD>
<TD width=43%>// address of required size of buffer</TD>
</TR>

<TR VALIGN="top">
<TD width=57%><B>   );</B></TD>
<TD width=43%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>Handle</I></P>

<P>Identifies a kernel object. </P>

<P><I>RequestedInformation</I></P>

<P>Specifies a <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A> structure that identifies the security information being requested. </P>

<P><I>pSecurityDescriptor</I></P>

<P>Points to a buffer the function fills with a copy of the security descriptor of the specified object. The calling process must have the right to view the specified aspects of the object's security status. The <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A> structure is returned in self-relative format. </P>

<P><I>nLength</I></P>

<P>Specifies the size, in bytes, of the buffer pointed to by the <I>pSecurityDescriptor</I> parameter. </P>

<P><I>lpnLengthNeeded</I></P>

<P>Points to a variable the function sets to zero if the descriptor is copied successfully. If the buffer is too small for the security descriptor, this variable receives the number of bytes required. If this variable's value is greater than the value of the <I>nLength</I> parameter when the function returns, none of the security descriptor is copied to the buffer. </P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>To read the kernel object's security descriptor, the calling process must be either granted READ_CONTROL access or be the object's owner. In addition, the calling process must have the SE_SECURITY_NAME privilege to read the system access-control list. </P>

<P><B>See Also</B></P>

<P><A HREF="10dmpkl.htm"><B>GetFileSecurity</B></A>, <A HREF="3ykw.ub.htm"><B>GetPrivateObjectSecurity</B></A>, <A HREF="btmesv.htm"><B>GetUserObjectSecurity</B></A>, <A HREF="188mr8k.htm"><B>SECURITY_DESCRIPTOR</B></A>, <A HREF="1iejnc4.htm"><B>SECURITY_INFORMATION</B></A>, <A HREF="kttw05.htm"><B>SetKernelObjectSecurity</B></A> </P>

</BODY>
</HTML>
