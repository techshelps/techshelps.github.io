<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>NetGetAnyDCName</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1tngplf"></A><B>NetGetAnyDCName  <A HREF="fh6hp0.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="l.g6mo.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="pdpsg.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>NetGetAnyDCName</B> function gets the name of any domain controller for a domain that is directly trusted by the server name.</P>

<P><B>Security Requirements</B></P>

<P>No special group membership is required to successfully execute <B>NetGetAnyDCName</B>.</P>

<P><B>NET_API_STATUS NetGetAnyDCName(</B></P>

<TABLE cols=1 width=177>

<TR VALIGN="top">
<TD width=100%><B>LPCWSTR</B> <I>ServerName</I><B>,</B></TD>
</TR>

<TR VALIGN="top">
<TD width=100%><B>    LPCWSTR</B> <I>DomainName</I><B>,</B></TD>
</TR>

<TR VALIGN="top">
<TD width=100%><B>    OUT LPBYTE</B> <I>* Buffer</I></TD>
</TR>

<TR VALIGN="top">
<TD width=100%><B>   );</B></TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>ServerName</I></P>

<P>Pointer to a null-terminated Unicode string containing the name of the remote server on which the function is to execute. A NULL pointer or string specifies the local computer.</P>

<P><I>DomainName</I></P>

<P>Specifies the name of domain (null for primary domain)</P>

<P><I>Buffer</I></P>

<P>Returns a pointer to an allocated buffer containing the server name of a domain controller for the domain.  The server name is prefixed by \\. The buffer should be deallocated using <B>NetApiBufferFree</B>.</P>

<P></P>

<P><B>Remarks</B></P>

<P>If <I>ServerName</I> is a standalone Windows NT Workstation or standalone Windows NT Server, no <I>DomainName</I> is valid. If <I>ServerName</I> is a Windows NT Workstation that is a member of a domain or a Windows NT Server member, the <I>DomainName</I> must be in the same domain as <I>ServerName</I>. If <I>ServerName</I> is a Windows NT Server domain controller, the <I>DomainName</I> must be one of the domains trusted by the domain for which the server is a controller . The domain controller that this call finds has been operational at least once during this call.</P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is NERR_Success.</P>

<P>If the function fails, the return value is one of the following error codes. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=62%><B>Value</B></TD>
<TD width=38%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_SUCCESS</TD>
<TD width=38%>Buffer successfully contains the name of the domain controller prefixed by \\.</TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_NO_LOGON_SERVERS</TD>
<TD width=38%>No domain controllers could be found</TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_NO_SUCH_DOMAIN </TD>
<TD width=38%>The specified domain is not a trusted domain.</TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_NO_TRUST_LSA_SECRET </TD>
<TD width=38%>The client side of the trust relationship is broken.</TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_NO_TRUST_SAM_ACCOUNT </TD>
<TD width=38%>The server side of the trust relationship is broken or the password is broken. </TD>
</TR>

<TR VALIGN="top">
<TD width=62%>ERROR_DOMAIN_TRUST_INCONSISTENT </TD>
<TD width=38%>The server that responded is not a proper domain controller of the specified domain.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>See Also</B></P>

<P><A HREF="7w3qt4.htm"><B>NetGetDCName</B></A> </P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
