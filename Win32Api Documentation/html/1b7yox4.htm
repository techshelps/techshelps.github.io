<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Access Tokens</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="1b7yox4"></A><B>Access Tokens</B></P>

<P>When a user logs on, the system verifies the user's password by comparing it with information stored in a security database. If the password is authenticated, the system produces an access token and attaches it to the user's process. This access token identifies the user in all subsequent interactions with securable objects and contains the following information about a process: </P>

<P>·The user's SID </P>

<P>·Group SIDs </P>

<P>·Privileges </P>

<P>·An owner SID </P>

<P>·The SID for the primary group </P>

<P>·The default discretionary access-control list (ACL) </P>

<P>·The source of the access token </P>

<P>·Whether the token is a primary or impersonation token </P>

<P>·Current impersonation levels </P>

<P>·Other statistics </P>

<P></P>

<P>Every process has a primary token that determines the security context in which the process interacts with securable objects. By default, a thread runs in the security context of its process. However, a thread can use impersonation to run in a different security context. In this case, the thread has an impersonation token that determines the security context for most of the thread's actions. For more information, see <A HREF="mgjn7v.htm">Impersonation</A>. </P>

<P>For more information about privileges, see <A HREF="134kpv4.htm">Privileges</A>. For more information about security identifiers (SIDs), see <A HREF="so25gk.htm">Security Identifiers (SIDs)</A>. For more information about discretionary ACLs, see <A HREF="11n02t.htm">Access-control Lists (ACLs)</A>. For more information about the components of an access token, see the following token structures and enumerated types. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=47%><B>Structure or enumeration type</B></TD>
<TD width=53%><B>Specifies</B></TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="2bh1pu4.htm"><B>TOKEN_CONTROL</B></A></TD>
<TD width=53%>Information useful in identifying an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="2uqc8we.htm"><B>TOKEN_DEFAULT_DACL</B></A></TD>
<TD width=53%>The default discretionary ACL for an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="qokoo8.htm"><B>TOKEN_GROUPS</B></A></TD>
<TD width=53%>Specifies the SIDs of the access token's groups and whether any privileges are enabled.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="z2c1h2.htm"><B>TOKEN_INFORMATION_CLASS</B></A></TD>
<TD width=53%>Information being set in or retrieved from an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="1369g97.htm"><B>TOKEN_OWNER</B></A></TD>
<TD width=53%>The SID of an access token's owner.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="21rzul3.htm"><B>TOKEN_PRIMARY_GROUP</B></A></TD>
<TD width=53%>The SID of the access token's primary group.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="199qkb..htm"><B>TOKEN_PRIVILEGES</B></A></TD>
<TD width=53%>The privileges associated with an access token and whether the privileges are enabled.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="1l21edo.htm"><B>TOKEN_SOURCE</B></A></TD>
<TD width=53%>The source of an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="7d_toe.htm"><B>TOKEN_STATISTICS</B></A></TD>
<TD width=53%>Statistics associated with an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="_get7w.htm"><B>TOKEN_TYPE</B></A></TD>
<TD width=53%>Whether an access token is being used as an impersonation token.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%><A HREF="6e5y_o7.htm"><B>TOKEN_USER</B></A></TD>
<TD width=53%>The SID of an access token's user.</TD>
</TR>
</TABLE><BR>

<P></P>

<P>You can use the following functions to manipulate access tokens.</P>

<P>Following are the functions an application can use to manipulate access tokens. </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=34%><B>Function</B></TD>
<TD width=66%><B>Description</B></TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="6m1u_m2.htm"><B>AdjustTokenGroups</B></A><B> </B></TD>
<TD width=66%>Changes the group information in an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="1e0u7w4.htm"><B>AdjustTokenPrivileges</B></A><B> </B></TD>
<TD width=66%>Changes the privileges in an access token.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="2hod_yx.htm"><B>DuplicateToken</B></A></TD>
<TD width=66%>Creates a new impersonation token that duplicates an existing token.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="2my4.hr.htm"><B>DuplicateTokenEx</B></A></TD>
<TD width=66%>Creates a new primary token or impersonation token that duplicates an existing token.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="kt5z95.htm"><B>GetTokenInformation</B></A><B> </B></TD>
<TD width=66%>Retrieves information about a token.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="1r9su.q.htm"><B>OpenProcessToken</B></A><B> </B></TD>
<TD width=66%>Retrieves the handle of the access token for a process.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="bsqiuv.htm"><B>OpenThreadToken</B></A><B> </B></TD>
<TD width=66%>Retrieves the handle of the access token for a thread.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="ogb736.htm"><B>SetThreadToken</B></A></TD>
<TD width=66%>Assigns or removes an impersonation token for a thread.</TD>
</TR>

<TR VALIGN="top">
<TD width=34%><A HREF="2ido0z..htm"><B>SetTokenInformation</B></A><B> </B></TD>
<TD width=66%>Changes a token's owner, primary group, or default discretionary ACL.</TD>
</TR>
</TABLE><BR>

<P></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
