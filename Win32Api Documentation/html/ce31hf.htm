<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script><TITLE>SetSystemPaletteUse</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="ce31hf"></A><B>SetSystemPaletteUse  <A HREF="28ee_ux.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="3p0yfrc.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="i25mgd.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>The <B>SetSystemPaletteUse</B> function allows an application to specify whether the system palette contains 2 or 20 static colors. The default system palette contains 20 static colors. (Static colors cannot be changed when an application realizes a logical palette.) </P>

<P><B>UINT SetSystemPaletteUse(</B></P>

<TABLE cols=2 width=326>

<TR VALIGN="top">
<TD width=40%><B>HDC</B> <I>hdc</I><B>,</B></TD>
<TD width=60%>// handle of device context  </TD>
</TR>

<TR VALIGN="top">
<TD width=40%><B>    UINT</B> <I>uUsage</I> </TD>
<TD width=60%>// palette-usage flag </TD>
</TR>

<TR VALIGN="top">
<TD width=40%><B>   );</B></TD>
<TD width=60%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>hdc</I></P>

<P>Identifies the device context. This device context must refer to a device that supports color palettes. </P>

<P><I>uUsage</I></P>

<P>Specifies the new use of the system palette. This parameter can be one of the following values: </P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=35%><B>Value</B></TD>
<TD width=65%><B>Meaning</B></TD>
</TR>

<TR VALIGN="top">
<TD width=35%>SYSPAL_NOSTATIC</TD>
<TD width=65%>The system palette contains two static colors (black and white).</TD>
</TR>

<TR VALIGN="top">
<TD width=35%>SYSPAL_STATIC</TD>
<TD width=65%>The system palette contains static colors that will not change when an application realizes its logical palette.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is the previous usage of the system palette (it can be either SYSPAL_NOSTATIC or SYSPAL_STATIC).</P>

<P>If the function fails, the return value is SYSPAL_ERROR. To get extended error information, call <A HREF="11c2vs7.htm"><B>GetLastError</B></A>. </P>

<P><B>Remarks</B></P>

<P>An application can determine whether a device supports palette operations by calling the <A HREF="19irwll.htm"><B>GetDeviceCaps</B></A> function and specifying the RASTERCAPS constant. </P>

<P>When an application window moves to the foreground and the SYSPAL_NOSTATIC value is set, the application must call the <A HREF="9s7o1d.htm"><B>GetSysColor</B></A> function to save the current system colors setting. It must also call <A HREF="1n8lj_j.htm"><B>SetSysColors</B></A> to set reasonable values using only black and white. When the application returns to the background or terminates, the previous system colors must be restored. </P>

<P>If the function returns SYSPAL_ERROR, the specified device context is invalid or does not support color palettes. </P>

<P>An application must call this function only when its window is maximized and has the input focus. </P>

<P>If an application calls <B>SetSystemPaletteUse</B> with <I>uUsage</I> set to SYSPAL_NOSTATIC, Windows continues to set aside two entries in the system palette for pure white and pure black, respectively. </P>

<P>After calling this function with <I>uUsage</I> set to SYSPAL_NOSTATIC, an application must take the following steps: </P>

<P>1.Realize the logical palette. </P>

<P>2.Call the <B>GetSysColor</B> function to save the current system-color settings. </P>

<P>3.Call the <B>SetSysColors</B> function to set the system colors to reasonable values using black and white. For example, adjacent or overlapping items (such as window frames and borders) should be set to black and white, respectively. </P>

<P>4.Send the WM_SYSCOLORCHANGE message to other top-level windows to allow them to be redrawn with the new system colors. </P>

<P></P>

<P>When the application's window loses focus or closes, the application must perform the following steps: </P>

<P>1.Call <B>SetSystemPaletteUse</B> with the <I>uUsage</I> parameter set to SYSPAL_STATIC. </P>

<P>2.Realize the logical palette. </P>

<P>3.Restore the system colors to their previous values. </P>

<P>4.Send the WM_SYSCOLORCHANGE message. </P>

<P></P>

<P><B>See Also</B></P>

<P><A HREF="19irwll.htm"><B>GetDeviceCaps</B></A>, <A HREF="9s7o1d.htm"><B>GetSysColor</B></A>, <A HREF="1n8lj_j.htm"><B>SetSysColors</B></A>, <A HREF="ge_obd.htm"><B>GetSystemPaletteUse</B></A></P>

</BODY>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83731338-2"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-83731338-2');</script></html>
