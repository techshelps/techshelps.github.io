<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>CryptHashData [New - Windows NT] [New - Windows 95, OEM Service Release 2]</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFC8" TEXT="#341717">



<P><A NAME="46c7fgj"></A><B>CryptHashData  <A HREF="0u48w3.htm"><IMG SRC="../images/bm1.gif" ALT="" BORDER=0></A>  <A HREF="41b3l2.htm"><IMG SRC="../images/bm3.gif" ALT="" BORDER=0></A>  <A HREF="rkgz3o.htm"><IMG SRC="../images/bm2.gif" ALT="" BORDER=0></A></B></P>

<P>[New - Windows NT]</P>

<P>[New - Windows 95, OEM Service Release 2]</P>

<P>The <B>CryptHashData</B> function is used to compute the cryptographic hash on a stream of data. This function and <A HREF="21hhdd_.htm"><B>CryptHashSessionKey</B></A> can be called multiple times to compute the hash on long streams or on discontinuous streams.</P>

<P>Before calling this function, the <A HREF="4hq3.7.htm"><B>CryptCreateHash</B></A> function must be called to get a handle to a hash object.</P>

<P><B>BOOL CRYPTFUNC CryptHashData(</B></P>

<TABLE cols=2 width=219>

<TR VALIGN="top">
<TD width=84%><B>HCRYPTHASH </B><I>hHash</I><B>,</B></TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=84%><B>    BYTE *</B><I>pbData</I><B>,</B></TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=84%><B>    DWORD </B><I>dwDataLen</I><B>,</B></TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=84%><B>    DWORD </B><I>dwFlags</I></TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=84%><B>   );</B></TD>
<TD width=16%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Parameters</B></P>

<P><I>hHash</I></P>

<P>[in] A handle to the hash object. An application obtains this handle using the <A HREF="4hq3.7.htm"><B>CryptCreateHash</B></A> function.</P>

<P><I>pbData</I></P>

<P>[in] The address of the data to be hashed.</P>

<P><I>dwDataLen</I></P>

<P>[in] The number of bytes of data to be hashed. This must be zero if the CRYPT_USERDATA flag is set.</P>

<P><I>dwFlags</I></P>

<P>[in] The flag values. The following values are currently defined:</P>

<P>·CRYPT_USERDATA</P>

<P>When this flag is set, the CSP will prompt the user to input some data directly. This is then added to the hash. The application is not allowed access to the data. For example, this flag can be used to allow the user to enter a PIN into the system.</P>

<P>The Microsoft RSA Base Provider ignores this parameter.</P>

<P></P>

<P><B>Return Values</B></P>

<P>If the function succeeds, the return value is nonzero.</P>

<P>If the function fails, the return value is zero. To retrieve extended error information, use the <A HREF="11c2vs7.htm"><B>GetLastError</B></A> function.</P>

<P>The following table lists the error codes most commonly returned by the <B>GetLastError</B> function. The error codes prefaced by "NTE" are generated by the particular CSP you are using.</P>

<TABLE cols=2>

<TR VALIGN="top">
<TD width=47%><B>Error</B></TD>
<TD width=53%><B>Description</B></TD>
</TR>

<TR VALIGN="top">
<TD width=47%>ERROR_INVALID_HANDLE</TD>
<TD width=53%>One of the parameters specifies an invalid handle.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>ERROR_INVALID_PARAMETER</TD>
<TD width=53%>One of the parameters contains an invalid value. This is most often an illegal pointer.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_ALGID</TD>
<TD width=53%>The <I>hHash</I> handle specifies an algorithm that this CSP does not support.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_FLAGS</TD>
<TD width=53%>The <I>dwFlags</I> parameter contains an invalid value.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_HASH</TD>
<TD width=53%>The hash object specified by the <I>hHash</I> parameter is invalid.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_HASH_STATE</TD>
<TD width=53%>An attempt was made to add data to a hash object that is already marked "finished."</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_KEY</TD>
<TD width=53%>A keyed hash algorithm is being used, but the session key is no longer valid. This error will be generated if the session key is destroyed before the hashing operating is complete.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_LEN</TD>
<TD width=53%>The CRYPT_USERDATA flag is set and the <I>dwDataLen</I> parameter has a nonzero value.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_BAD_UID</TD>
<TD width=53%>The CSP context that was specified when the hash object was created cannot be found.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_FAIL</TD>
<TD width=53%>The function failed in some unexpected way.</TD>
</TR>

<TR VALIGN="top">
<TD width=47%>NTE_NO_MEMORY</TD>
<TD width=53%>The CSP ran out of memory during the operation.</TD>
</TR>
</TABLE><BR>

<P></P>

<P><B>Example</B></P>

<P>See the "Example" section in the <B>CryptSignHash</B> function.</P>

<P><B>See Also</B></P>

<P><A HREF="4hq3.7.htm"><B>CryptCreateHash</B></A>, <A HREF="21hhdd_.htm"><B>CryptHashSessionKey</B></A>, <A HREF="bod3zd.htm"><B>CryptSignHash</B></A> </P>

</BODY>
</HTML>
