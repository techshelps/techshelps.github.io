<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Performance Management</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec4.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec6.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch10lev1sec5"></a>
<h3 class="docSection1Title">Performance Management</H3>
<p class="docText">When deploying new applications over an existing networking infrastructure, the impact on network performance is often a major concern.</P>
<p class="docText">With IPv6, application deployment should fall into two categories. The first category is IPv4 applications migrating to IPv6. In this case, traffic patterns generated by these applications are expected to be quite similar to what they are with IPv4, hence predictable based on previous experience. The second category is brand new classes of applications, enabled by the larger address space, or the new capabilities of the IPv6 protocol. Peer-to-peer applications and Mobile IPv6 (MIPv6) belong to this category. These applications' traffic patterns are expected to be less predictable. In that context, the availability of management tools for a complete control and measurement of IPv6 traffic will be a key enabler for their adoption.</p>
<p class="docText">Many management tools are already available to monitor IPv6 traffic. Some tools are not dependent on the IP version, so they can be used for IPv6 seamlessly; others are IPv4 tools that have been enhanced to support IPv6.</P>
<p class="docText">Two distinct and complementary approaches are available for managing network performance.</p>
<p class="docText">At the device level, some tools can retrieve data from each router (using SNMP, NetFlow, or locally available commands on the devices) and analyze it to determine links, devices, and network utilization. This is the case of tools such as NetFlow Collectors, Argus, Nagios, Ntop, MRTG, and Cricket.</p>
<p class="docText">At the network level, some tools can analyze end-to-end performance by sending traffic through the network and measuring delay, jitter, and so on. This is the case of Cisco IP SLAs, Iperf, Pchar, and so on.</P>
<p class="docText">All the major tools for managing network performance are reviewed in the following subsections. Although NetFlow Collectors (Cisco NFC, IPFlow,) also belong in the category of traffic-monitoring tools, they are covered separately in the &quot;<a class="docLink" href="ch10lev1sec4.html#ch10lev2sec7">Flow Analysis Using NetFlow</a>&quot; section. Finally, some network performance-monitoring capabilities are also integrated in network-management platforms such as HP OpenView and CiscoWorks, as reviewed in the section &quot;<a class="docLink" href="ch10lev1sec7.html#ch10lev1sec7">Management Platforms</a>.&quot;</P>
<a name="ch10lev2sec11"></a>
<H4 class="docSection2Title">Cisco IOS IP Service-Level Agreements</h4>
<p class="docText">The IP service-level agreements (IP SLAs) is a Cisco IOS feature that enables users to monitor network performance between a Cisco router and a remote device (which can be another Cisco router). Various performance metrics can be measured, including round-trip response time, connect time, packet loss, application performance, interpacket delay variance (jitter), and more. This feature enables users to receive notifications and to perform troubleshooting and problem analysis based on the statistics collected by the IP SLAs.</p>
<p class="docText">In the absence of native IPv6 support for SAA, you can still use the tool in an IPv6-only environment. The principle of the IP SLAs usage for IPv6 is based on shadow routers that have an IPv4 connection over an IPv6 tunnel.</p>
<p class="docText">A manual IPv6 tunnel is built between two shadow routers (responder Router-resp, and sender Router-send), as illustrated in <a class="docLink" href="#ch10fig12">Figure 10-12</a>.</P>
<a name="ch10fig12"></a><p><center>
<h5 class="docFigureTitle">Figure 10-12. Building IPv4 over IPv6 Tunnels for IP SLAs</H5>

<p class="docText">
<img border="0" alt="" id="158039035251" width="500" height="153" SRC="images/10fig12.jpg"></P>

</center></p><br>
<p class="docText">The IPv4 over IPv6 tunnel is configured as illustrated In <a class="docLink" href="#ch10ex12">Examples 10-12</a> and <a class="docLink" href="#ch10ex13">10-13</a>.</p>
<p class="docText">On the responder:</p>
<a name="ch10ex12"></a><H5 class="docExampleTitle">Example 10-12. IPv4 over IPv6 Tunnel Configuration at the SLA Responder</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><td>


<pre>Router-resp#show running interface tunnel 100
interface Tunnel100
 ip address 10.10.10.2 255.255.255.0
 tunnel source 2001:798:100::2
 tunnel destination 2001:798:100::10
 tunnel mode gre ipv6
end</pre><BR>

</td></tr></table></p>
<p class="docText">On the sender:</p>
<a name="ch10ex13"></a><h5 class="docExampleTitle">Example 10-13. IPv4 over IPv6 Tunnel Configuration at the SLA Sender</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Router-send#<span class="docEmphStrong">show running interface tunnel 100</span>
interface Tunnel100
 ip address 10.10.10.10 255.255.255.0
 tunnel source 2001:798:100::10
 tunnel destination 2001:798:100::2
 tunnel mode gre ipv6
end</pre><br>

</td></tr></table></p>
<p class="docText">With IPv4 connectivity established through the IPv6 tunnel, a router can be configured to become an SLA responder or an SLA sender. To configure the SLA responder, the configuration shown in <a class="docLink" href="#ch10ex14">Example 10-14</a> must be set up on the router Router-resp.</p>
<a name="ch10ex14"></a><h5 class="docExampleTitle">Example 10-14. SLA Responder Configuration</H5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Router-resp#<span class="docEmphStrong">show running</span>
rtr responder</pre><BR>

</td></TR></table></P>
<p class="docText">For the SLA sender, the tester must be configured to execute certain kinds of tests such as jitter, echo, and so on. <a class="docLink" href="#ch10ex15">Example 10-15</a> demonstrates an echo reply test.</p>
<a name="ch10ex15"></a><H5 class="docExampleTitle">Example 10-15. SLA Sender Configuration</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><TD>


<pre>Router-send#<span class="docEmphStrong">show running</span>
ip sla monitor responder
ip sla monitor
 type echo protocol ipIcmpEcho 10.10.10.10 source-ipaddr 10.10.10.2
 tos 20

 frequency 120
ip sla monitor schedule 1 start-time now life forever</pre><BR>

</td></tr></table></p>
<p class="docText">For further detail about SLAs, refer to the Cisco IP SLAs documentation available at <a class="docLink" target="_blank" href="http://www.cisco.com">http://www.cisco.com</a>.</P>

<a name="ch10lev2sec12"></a>
<h4 class="docSection2Title">Other IPv6-Enabled Tools for Performance Analysis</h4>
<p class="docText">Network monitoring and performance analysis is one of the richest areas for network-management tools. This section reviews some of these tools, the ones that are IPv6 capable and that have been deployed in production or experimental networks.</P>
<p class="docText">Argus is a system- and network-monitoring application that includes IPv6 support since version 3.2. It can monitor TCP and UDP applications, IP connectivity, SNMP object identifiers, and so on. It comes with a web interface. Argus contains built-in alert notifications via e-mail and pager, and can be extended to use any other program such as winpopup. <a class="docLink" href="#ch10fig13">Figure 10-13</a> shows an Argus IPv6 screen.</P>
<a name="ch10fig13"></a><p><center>
<h5 class="docFigureTitle">Figure 10-13. Argus Output Screen</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/10fig13_alt.jpg">[View full size image]</a></div><img border="0" alt="" id="158039035251" width="500" height="350" SRC="images/10fig13.jpg"></p>
</center></P><br>
<p class="docText">Argus was started at Carnegie Mellon's Software Engineering Institute and is now distributed as open source. It is available at <a class="docLink" target="_blank" href="http://argus.tcp4me.com">http://argus.tcp4me.com</a>.</p>
<p class="docText">Nagios is an open-source host-, service-, and network-monitoring program. The monitoring plug-ins were recently ported to support IPv6 and to operate over a native Ipv6 network. <a class="docLink" href="#ch10fig14">Figure 10-14</a> shows an IPv6 Nagios screen.</P>
<a name="ch10fig14"></a><p><center>
<H5 class="docFigureTitle">Figure 10-14. Nagios Output Screen</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/10fig14_alt.jpg">[View full size image]</a></div><img border="0" alt="" id="158039035251" width="500" height="350" SRC="images/10fig14.jpg"></p>
</center></p><br>
<p class="docText">Nagios was initially created by Ethan Galstad under the Netsaint name and then later renamed. It is available at <a class="docLink" target="_blank" href="http://www.nagios.org">http://www.nagios.org</a>.</p>
<p class="docText">Ntop is an open-source web-based network-usage monitor that enables users to track relevant network activities, including network utilization, established connections network protocol usage, and traffic classification. It supports various management activities, including network optimization and planning, and detection of network security violations. In the context of the 6NET project, it was ported to IPv6. Ntop was initially developed by Luca Deri and is available at <a class="docLink" target="_blank" href="http://www.ntop.org">http://www.ntop.org</a>. Ntop can be useful in the context of troubleshooting.</p>
<p class="docText">MRTG is a tool to monitor the traffic load on network links. MRTG includes a Perl script, which gets traffic counters from the router using SNMP, and an application that logs traffic data, creates graphs, and presents them over a web interface. The Computer Networks research group at Roma Tre University added IPv6 support to MRTG in version 2.10.0. MRTGv6 can now run SNMP queries over IPv6. MRTG is already widely used to monitor the traffic on network links, CPU usage on routers, and other network and host parameters. MRTG is available at <a class="docLink" target="_blank" href="http://www.mrtg.org">http://www.mrtg.org</a>.</p>
<p class="docText">Weathermap is a Perl-based tool that displays in a visual way the utilization of the network links of the network. The required data is acquired from graphs created by the MRTG package and are displayed as two-way colored arrows on a map representing the logical topology of the network. The resulting image is presented in a web page. <a class="docLink" href="#ch10fig15">Figure 10-15</a> shows a Weathermap screen on the 6NET network.</p>
<a name="ch10fig15"></a><p><center>
<h5 class="docFigureTitle">Figure 10-15. Weathermap Output Screen</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/10fig15_alt.jpg">[View full size image]</a></div><img border="0" alt="" id="158039035251" width="500" height="341" SRC="images/10fig15.jpg"></p>
</center></p><br>
<p class="docText">Iperf is a tool to measure maximum TCP bandwidth, allowing the tuning of various parameters and UDP characteristics. Iperf reports bandwidth, delay jitter, and datagram loss. Iperf version 2.0.1 supports IPv6.</p>
<p class="docText">Pchar is a tool used to characterize the bandwidth, latency, and loss of links along an end-to-end path through the Internet. Pchar measures the characteristics of the network path between two Internet hosts on IPv4 or IPv6 networks. The program measures network throughput and round-trip time by sending varying-sized UDP packets into the network and waiting for ICMP messages in response. It modulates the IPv4 Time To Live (TTL) field or the IPv6 Hop Limit field to get measurements at different distances along a path. Pchar was written by Bruce A. Mah and is available at <a class="docLink" target="_blank" href="http://www.kitchenlab.org/www/bmah/Software/pchar">http://www.kitchenlab.org/www/bmah/Software/pchar</a>.</P>
<p class="docText">Jnettop captures traffic coming across the host it is running on and displays streams sorted by bandwidth they use. The result is a set of network communications listed by host and port, including bytes out, bandwidth consumption. Jnettop has been extended to support IPv6. <a class="docLink" href="#ch10fig16">Figure 10-16</a> shows a Jnettop screen monitoring IPv6 traffic.</p>
<a name="ch10fig16"></a><p><center>
<h5 class="docFigureTitle">Figure 10-16. Jnettop Output Screen</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/10fig16_alt.jpg">[View full size image]</a></div><img border="0" alt="" id="158039035251" width="500" height="165" SRC="images/10fig16.jpg"></p>
</center></P><BR>
<p class="docText">Jnettop is available at <a class="docLink" target="_blank" href="http://jnettop.kubs.info">http://jnettop.kubs.info</a></p>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec4.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec6.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>