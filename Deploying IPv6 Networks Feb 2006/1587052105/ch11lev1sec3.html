<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>The Right Router for the Job</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch11lev1sec3"></a>
<h3 class="docSection1Title">The Right Router for the Job</H3>
<p class="docText">When choosing a router for a certain role in a network, performance is not the only factor considered. Others are equally important, such as the following:</P>
<ul><LI><p class="docList">Feature richness and versatility</p></li><LI><p class="docList">Price</P></LI><li><p class="docList">Scalability</p></li></UL>
<p class="docText">All these factors reflect certain aspects of a router's design. Previous sections highlighted some of the IPv6-specific challenges faced by a router's control and forwarding planes. Ultimately, <a name="iddle1099"></a><a name="iddle1377"></a><a name="iddle1387"></a><a name="iddle1707"></a><a name="iddle1813"></a><a name="iddle1825"></a><a name="iddle1930"></a>a router's performance is determined by its implementation of the control and forwarding functions as well as its integration of the IPv6 protocol. For this reason, it is important to have an idea of the overall design of the evaluated router when analyzing its performance data.</p>
<a name="ch11lev2sec3"></a>
<h4 class="docSection2Title">Router Architecture Overview</H4>
<p class="docText">Routers evolved from mere specialized computers where all processing is software based to sophisticated devices where functionality is shared between software running on powerful CPUs and highly specialized hardware. Routers are becoming more powerful, more reliable, and more scalable; but all this comes at a cost. It is therefore important to build the right router for the right market segment. This explains the multitude of router types available from which to choose.</P>
<a name="ch11lev3sec1"></a>
<h5 class="docSection3Title">Software Versus Hardware Forwarding</h5>
<p class="docText">The control-plane functions of a router are always performed in software. On the other hand, packet forwarding along with some advanced features can be performed by dedicated hardware resources. Based on the implementation of the forwarding plane, routers can be classified as follows:</p>
<ul><LI><p class="docText"><span class="docEmphStrong">Software forwarding router</span> A device using its main CPU for basic and enhanced packet forwarding; no hardware assistance is available.</p></li><LI><p class="docText"><span class="docEmphStrong">Hardware Forwarding Router</span> A device that has hardware assistance for basic or enhanced packet forwarding.</p></LI></ul>
<a name="ch11note09"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">A packet that cannot be handled by the hardware is usually punted to software processing by default. This is not true for all router vendors.</p>
</div><br>
<p class="docText">Hardware-assisted forwarding often provides the best forwarding performance. This advantage comes at the expense of versatility. The dedicated hardware is designed to support a certain set of features, so additional features require its redesign. For this reason, hardware-forwarding-based platforms are generally well positioned in or close to the network core and edge. There the interfaces are high speed, and the focus is on forwarding performance rather than feature richness. Software-forwarding-based platforms are more suited in the access layer, where the interfaces are lower speed, and various features are being used.</p>
<p class="docText">Both types of routers are present in the Cisco product line:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Software forwarding routers</span> Cisco 800, 1700, 1800, 2600, 2800, 3600, 3700, 3800, 7200, and 7500 series</p></li><li><p class="docText"><span class="docEmphStrong">Hardware forwarding routers</span> Cisco 7600, 10000, 10720, 12000 series and the Cisco Carrier Routing System (CRS-1); layer 3 switches: Catalyst 6500, 3560 and 3750 series</p></li></ul>

<a name="ch11lev3sec2"></a>
<h5 class="docSection3Title">Centralized Versus Distributed Forwarding</H5>
<p class="docText"><a name="iddle1174"></a><a name="iddle1275"></a><a name="iddle1369"></a><a name="iddle1698"></a><a name="iddle1816"></a>A router can take all its forwarding decisions in a centralized manner or it can distribute the function among multiple intelligent subsystems. This design choice separates routers in two categories:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Centralized forwarding router</span> Every packet-forwarding decision is made by a central forwarding engine.</P></li><LI><p class="docText"><span class="docEmphStrong">Distributed forwarding router</span> Forwarding decisions are made on different forwarding engines that can control a linecard, a port, a section of a chassis, and so on.</P></li></UL>
<a name="ch11note10"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">All forwarding engines involved in the decision-making process have to support IPv6. If they do not, the router defaults to a centralized mode of operation.</p>
</div><BR>
<p class="docText">The distributed architectures are particularly important for larger, modular routers that have to scale well with additional linecards. When the forwarding decision making is distributed to these intelligent cards, the router performance is not impacted by an increase in the number of interfaces and modules. This type of router is prevalent at the core and the edge of the network.</P>
<p class="docText">Examples of distributed, IPv6-capable routers from the Cisco family include the following:</P>
<ul><li><p class="docList">Cisco 7500 series router</p></LI><li><p class="docList">Cisco 7600 series router with distributed CEF 720 linecards</p></LI><LI><p class="docList">Cisco 12000 series Internet router</p></li><li><p class="docList">CRS-1 router</p></LI></ul>
<a name="ch11note11"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">A distributed architecture also allows software forwarding platforms to have a performance close to line rate and that scales linearly as cards are added. This is the case of the 7500 Cisco routers.</P>
</div><br>
<p class="docText">The concepts presented in this section represent a high-level overview of router architecture. These concepts can help you classify routers and have certain performance expectations from them based on their design. However, today's routers are complex systems, and there is a lot more to a complete and thorough discussion of their architecture than what is covered in this brief discussion. For more detail on this topic, refer to the book <span class="docEmphasis">Inside Cisco IOS Software Architecture (CCIE Professional Development)</span> by Vijay Bollapragada, <span class="docEmphasis">et al</span>.</P>


<a name="ch11lev2sec4"></a>
<h4 class="docSection2Title">IPv6 Forwarding Performance of Cisco Routers</h4>
<p class="docText"><a name="iddle1374"></a><a name="iddle1494"></a><a name="iddle1703"></a><a name="iddle1821"></a>Armed with an understanding of the various router architectures and the methodology to test their performance, it is time to see the differences between their IPv4 and IPv6 performance. This section presents forwarding performance examples for the two protocol types on Cisco routers that target various segments of a network.</p>
<a name="ch11lev3sec3"></a>
<h5 class="docSection3Title">Low-End Routers</h5>
<p class="docText">The low-end routers are typically deployed in the access layer of the network. They generally have low speed and few interfaces. Because they are software-based routers, they are easily enabled to support IPv6. The Cisco product line from the 830 series to the Cisco 3800 series can be easily enabled for IPv6 when it is upgraded to one of the supported Cisco IOS software release, such as 12.2T, 12.3, 12.4, 12.3T, and 12.4T. Low-end routers have a centralized architecture.</p>
<a name="ch11note12"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">CEF is available for IPv6 (Cisco Expressing Forwarding v6 and distributed Cisco Expressing Forwarding v6) starting with Cisco IOS Release 12.2(13)T.</p>
</div><br>
<p class="docText">Despite being software platforms, many of the low-end routers use powerful CPUs that enable them to achieve line-rate packet forwarding on their interfaces. To provide encryption services, which are particularly CPU intensive, hardware assistance might be needed to sustain the same performances as the other services.</p>
<p class="docText"><a class="docLink" href="#ch11table01">Table 11-1</a> presents an example of how IPv6 compares to IPv4 performance on a low-end router from the Cisco 3700 series. The throughput was determined between two Fast Ethernet interfaces, with bidirectional traffic and no advanced features enabled. The theoretical maximum throughput for the interface type analyzed is also listed for reference. <a class="docLink" href="#ch11fig03">Figure 11-3</a> is a graphical representation of the forwarding performance in percentage of the targeted line rate.</p>
<a name="ch11table01"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-1. IPv6 Basic Forwarding Between Two Fast Ethernet Interfaces, Bidirectional, No ACL on Cisco 3725</h5></caption><colgroup><col width="170"><col width="100"><col width="100"><col width="130"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Packet Size (Ethernet II)</P></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">IPv4 (pps<sup class="docFootnote"><a class="docLink" href="#ch11tn01">[*]</a></sup>)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">IPv6 (pps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Maximum (pps)</p></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">63,918.5</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">48,064</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">148,810</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">63,431</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">49,867</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">84,449</P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">45,290</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">45,290</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">45,290</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">23,492</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">23,492</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">23,497</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">11,973</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">11,973</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">11,973</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">1518 bytes</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">8127</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">8127</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">8128</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IMIX</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">33,515</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">33,515</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">33,515</P></td></TR></table></P><br><blockquote><p class="docFootnote"><sup><a name="ch11tn01">[*]</a></sup> Packets per second</P></blockquote>
<a name="ch11fig03"></a><p><center>
<h5 class="docFigureTitle">Figure 11-3. Example of IPv4 Versus IPv6 Forwarding Performance of a Low-End Router (Cisco 3725 - FastE)</H5>

<p class="docText">
<img border="0" alt="" width="500" height="378" SRC="images/11fig03.jpg"></P>

</center></P><br>
<a name="ch11note13"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText"><a name="iddle1375"></a><a name="iddle1501"></a><a name="iddle1705"></a><a name="iddle1823"></a>IMIX is a 7:4:1 distribution of Ethernet-encapsulated packets of sizes 64, 570, and 1518 bytes. This leads to a 353-byte packet-size average.</p>
</div><BR>
<a name="ch11note14"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">Sometimes the performance numbers are multiplied by a factor of two when bidirectional traffic is used during testing. For this reason, it is important to fully qualify the test methodology used.</p>
</div><BR>
<p class="docText">It is worth noting that line-rate forwarding is obtained before the IMIX packet size, which represents a likely packet-size distribution in an operational network.</P>

<a name="ch11lev3sec4"></a>
<h5 class="docSection3Title">Mid-Range Routers</h5>
<p class="docText">In the case of mid-range routers, finding the balance between cost, features, and performance becomes even more important. Routers in this market segment can be positioned in different roles and have to perform multiple functions from access to distribution/aggregation and even core at times. The versatility required of the mid-range platforms is reflected in the multitude of router architectures applied to them. Software and hardware forwarding, as well as centralized and distributed architectures, are all present.</p>
<p class="docText">Leveraging powerful CPUs allows routers with low density of ports to deliver competitive forwarding performance while maintaining the edge in terms of feature richness. <a class="docLink" href="#ch11table02">Table 11-2</a> shows the performance data of a Cisco-software-based, centralized forwarding mid-range platform. The performance is measured with bidirectional traffic between two Gigabit Ethernet interfaces on a 7304 router with an NPE-G100 processor. <a class="docLink" href="#ch11fig04">Figure 11-4</a> is a graphical representation of the information in <a class="docLink" href="#ch11table02">Table 11-2</a>. It shows IPv4 versus IPv6 throughput performance in percentage of targeted line rate.</p>
<a name="ch11table02"></a><P><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-2. Cisco 7304 NPE-G100 Performance Between 2 Gigabit Ethernet Interfaces, Bidirectional, No ACL</h5></caption><colgroup><col width="170"><col width="100"><col width="100"><col width="130"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Packet Size (Ethernet II)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">GEIPv4 (pps)</P></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">GEIPv6 (pps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Maximum (pps)</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">569,103</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">330,213</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1,488,095</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">579,586</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">330,213</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">844,595</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">452,898</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">332,877</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">452,898</P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">234,962</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">234,962</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">234,962</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">119,731</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">119,731</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">119,731</P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1518 bytes</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">81,274</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">81,274</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">81,274</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IMIX</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">334,224</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">334,224</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">334,224</p></td></tr></table></p><br>
<a name="ch11fig04"></a><p><center>
<h5 class="docFigureTitle">Figure 11-4. Example of IPv4 Versus IPv6 Forwarding Performance of a Mid-Range Router (Cisco 7304 - GigE)</h5>

<p class="docText">
<img border="0" alt="" width="500" height="380" SRC="images/11fig04.jpg"></p>

</center></p><br>
<p class="docText">The IPv6 forwarding performance is at line rate below IMIX average packet sizes. On the other hand, mid-range routers from this family can maintain high forwarding performance even with advanced features enabled such as access control lists (ACLs). This is not always the case with mid-range hardware platforms available on the market. <a class="docLink" href="#ch11table03">Table 11-3</a> shows the impact of ACLs on the performance of a Cisco 7200 router with an NPE-G1 processor. Unidirectional traffic was used and 100 ACLs were enabled on the ingress interface. The data is graphically represented in <a class="docLink" href="#ch11fig05">Figure 11-5</a>.</p>
<a name="ch11table03"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><H5 class="docTableTitle">Table 11-3. Cisco 7200 NPE-G1 Performance Between 2 Gigabit Ethernet Interfaces, Unidirectional, With and Without ACLs</h5></caption><colgroup><col width="125"><col width="145"><col width="125"><col width="100"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Packet Size (Ethernet II)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">IPv6 Without ACLs (pps)</P></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">IPv6 With ACLs (pps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Maximum (pps)</P></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">561,209</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">287,377</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1,225,490</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">558,280</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">288,403</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">753,012</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">425,170</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">288,988</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">425,170</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">227,272</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">227,272</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">227,273</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">117,702</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">117,702</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">117,702</P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">1280 bytes</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">94,840</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">94,840</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">94,841</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1518 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">81,274</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">81,274</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">81,274</P></td></TR></table></p><br>
<a name="ch11fig05"></a><P><center>
<H5 class="docFigureTitle">Figure 11-5. IPv6 Forwarding Performance With and Without ACLs (Cisco 7206)</H5>

<p class="docText">
<img border="0" alt="" width="500" height="372" SRC="images/11fig05.jpg"></p>

</center></p><br>
<a name="ch11note15"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText"><a name="iddle1373"></a><a name="iddle1393"></a><a name="iddle1702"></a><a name="iddle1820"></a>If a router is evaluated in a role that involves the extensive use of advanced features such as ACLs, it is important to evaluate the impact of these features on its forwarding performance.</p>
</div><br>
<a name="ch11note16"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">The router performance when running advanced features is of particular importance in the case of IPv6. Transition mechanisms such as IPv6 over IPv4 tunneling are falling in this category, so it is important to evaluate a router's performance in this context. Software platforms are well positioned in this case because packet switching is done in software for both native and tunneled IPv6 traffic. Hardware assist for IPv6 over IPv4 tunneling is not generally available.</P>
</div><br>
<p class="docText">When a mid-range platform is targeted for an aggregation role, a centralized, software forwarding design might be challenged by the high number of interfaces involved. In a distributed architecture, however, the forwarding performance is scaling linearly when interfaces are added to the system. An example of such a platform is the Cisco 7500 that leverages the distributed Cisco Express Forwarding (dCEF) feature. An example of forwarding performance numbers measured for the OC-3 interface of this router is shown in <a class="docLink" href="#ch11table04">Table 11-4</a>. <a class="docLink" href="#ch11fig06">Figure 11-6</a> also shows this data.</p>
<a name="ch11table04"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-4. Cisco 7500 RSP4 or RSP8 + VIP4-80 POSIP OC-3, Bidirectional, No ACL</H5></caption><colgroup><col width="125"><col width="125"><col width="125"><col width="100"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Packet Size (Ethernet II)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">OC-3  IPv4 dCEF (pps)</P></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">OC-3  IPv6 dCEF (pps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Maximum (pps)</P></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">198,504</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">166,000</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">353,208</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">153,500</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">153,490</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">160,000</p></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">76,408</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">76,408</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">76,408</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">37,365</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">37,365</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">37,365</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">18,480</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">18,480</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">18,480</p></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">1518 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">12,422</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">12,422</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">12,422</p></td></TR></table></P><br>
<a name="ch11fig06"></a><p><center>
<h5 class="docFigureTitle">Figure 11-6. Example of IPv4 Versus IPv6 Forwarding Performance of a Mid-Range Router (Cisco 7500  OC3).</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/11fig06_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="376" SRC="images/11fig06.jpg"></P>
</center></p><br>
<p class="docText">Higher performance needs generally make hardware forwarding assistance necessary in high-end routers.</P>

<a name="ch11lev3sec5"></a>
<h5 class="docSection3Title">High-End Routers</H5>
<p class="docText">Moving closer to the core of the network, routers need to support multiple very high-speed interfaces such as Gigabit Ethernet, 10 Gigabit Ethernet, OC-48, OC-192, and OC-768. To maintain line-rate forwarding, routers cannot rely on CPUs anymore; hardware assistance becomes necessary. To exemplify this need on high-end routers, <a class="docLink" href="#ch11table05">Table 11-5</a> depicts the differences in performance on a Cisco Catalyst 6500 series switch and Cisco 7600 Series Router for various switching paths.</p>
<a name="ch11table05"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-5. Performance of Various Switching Paths on Catalyst 6500 / Cisco 7600</h5></caption><colgroup><col width="375"><col width="125"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Switching Path</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Performance</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Process switched mode</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1030 Kpps</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Software CEF switch mode</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">230 Kpps</P></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Centralized PFC3 on a Supervisor Engine 720 for native IPv6  Cisco IOS 12.2(17a)SX1</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">+20 Mpps</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Supervisor Engine 720 with distributed PFC3 on linecards</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">+200 Mpps</P></td></tr></table></p><br>
<p class="docText">This data clearly shows the performance enhancements that come through hardware assist. Actual performance numbers for another high-end Cisco router that performs IPv6 forwarding in hardware are shown in <a class="docLink" href="#ch11table06">Table 11-6</a>.</P>
<a name="ch11table06"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-6. Cisco 12000 Engine 3 POSIP OC-48 HDLC Encapsulation CRC32, Bidirectional, No ACL</H5></caption><colgroup><col width="125"><col width="125"><col width="125"><col width="100"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Packet Size (Layer 2)</P></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">OC-48  IPv4 (Mpps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">OC-48  IPv6 (Mpps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Maximum (Mpps)</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">3.846</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">3.846</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">4.103</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">2.321</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">2.321</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">2.321</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1.156</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">1.156</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1.156</p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.579</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.579</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.579</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">0.289</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0.289</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0.289</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">1500 bytes</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">0.198</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0.198</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0.198</P></td></tr></table></p><br>
<a name="ch11note17"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">Consult Cisco documentation to identify the routers and router linecards that support hardware forwarding of IPv6.</p>
</div><br>
<p class="docText"><a class="docLink" href="#ch11fig07">Figure 11-7</a> shows the forwarding performance improvement at low packet sizes because of its implementation in hardware. The other advantage of hardware forwarding is that IPv4 and IPv6 traffic will not compete for processor resources. Turning IPv6 on is not going to impact the forwarding of existent IPv4 traffic.</P>
<a name="ch11fig07"></a><p><center>
<H5 class="docFigureTitle">Figure 11-7. Example of IPv4 Versus IPv6 Forwarding Performance of a High-End Router (Cisco 12000  OC48)</h5>

<p class="docText">
<img border="0" alt="" width="500" height="381" SRC="images/11fig07.jpg"></p>

</center></p><br>
<p class="docText"><a name="iddle1005"></a><a name="iddle1017"></a><a name="iddle1367"></a><a name="iddle1697"></a><a name="iddle1815"></a>Cisco CRS-1 is its flagship of core routers, and it represents the most compelling example of high performance achieved through advanced hardware forwarding design. Independent studies by the European Advanced Networking Test Center show that it can forward IPv4 and IPv6 traffic at line rate through OC-768 (40 Gbps) interfaces with and without advanced features enabled. The system throughput for the single chassis configuration is 640 Gbps, although the multichassis configuration is 1.28 terabits per second. It also achieves line rate at these speeds for traffic mixes (85 percent IPv4, and 15 percent IPv6).</p>

<a name="ch11lev3sec6"></a>
<h5 class="docSection3Title">6PE Forwarding Performance</h5>
<p class="docText">6PE and 6 VPE are key migration options in the deployment of IPv6. See the section &quot;<a class="docLink" href="ch03lev1sec4.html#ch03lev3sec21">IPv6 over 6PE</a>&quot; in <a class="docLink" href="ch03.html#ch03">Chapter 3</a>, &quot;Delivering IPv6 Unicast Services,&quot; and <a class="docLink" href="ch07.html#ch07">Chapter 7</a>, &quot;VPN IPv6 Architecture and Services,&quot; for details about these technologies. IPv6 forwarding performance through a 6PE environment is an important factor when weighing a certain deployment strategy. A Multiprotocol Label Switching (MPLS)-enabled core has high forwarding performance, close to line rate, of labeled traffic irrespective of the IP version of the packets. It is thus up to the PE routers to avoid reducing the end-to-end forwarding performance of IPv6 in a 6PE deployment.</p>
<p class="docText">In the case of 6PE and 6VPE, there is a level of asymmetry in terms of forwarding performance. Routers will exhibit a certain performance when traffic flows from the IPv6 side toward the MPLS core (router performs label imposition) and when it flows in the opposite direction (router performs label disposition). For this reason, a simple bidirectional traffic test is not fully revealing because the forwarding performance result is shaped by the lowest of the performances in each individual direction. In this case, the right testing approach is to use unidirectional streams and analyze each direction separately.</p>
<a name="ch11note18"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">The same approach should be applied when evaluating the forwarding performance over IPv6 tunnels.</p>
</div><br>
<p class="docText"><a class="docLink" href="#ch11table07">Table 11-7</a> lists the 6PE forwarding performance data for the OC-48 ISE card of the Cisco 12000. Forwarding is hardware assisted for this platform. The performance in the &quot;label imposition&quot; direction shapes the overall performance on the path. In the Cisco implementation of 6PE, a different label is usually associated with each prefix, so no IPv6 lookup is performed on the egress 6PE. For this reason, the expected performance in the &quot;label disposition&quot; direction is the usual MPLS performance (line rate on this card). This forwarding data is represented graphically in <a class="docLink" href="#ch11fig08">Figure 11-8</a>.</p>
<a name="ch11table07"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 11-7. Unidirectional 6PE Traffic on Cisco 12000 with OC-48 Engine 3 Linecard</H5></caption><colgroup><col width="125"><col width="200"><col width="200"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText"><a name="iddle1372"></a><a name="iddle1701"></a><a name="iddle1819"></a>Packet size (IP)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Imposition - OC-48 (Mpps)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Disposition - OC-48 (Mpps)</P></th></tr></thead><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">64 bytes</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">3.8</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">3.84</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">128 bytes</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1.91</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">1.95</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">256 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1.11</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1.11</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">512 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.570</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.570</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1024 bytes</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0.289</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0.289</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">1500 bytes</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.198</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">0.198</P></TD></tr></table></p><br>
<a name="ch11fig08"></a><p><center>
<H5 class="docFigureTitle">Figure 11-8. 6PE Forwarding Performance in the Label Imposition and Label Disposition Directions (Cisco 12000  OC48)</h5>

<p class="docText">
<img border="0" alt="" width="500" height="376" SRC="images/11fig08.jpg"></p>

</center></P><br>
<p class="docText">The forwarding performance for 6PE is close to line rate for most (and the relevant) packet sizes. Similar high performance is also available with software-switched platforms, and that certainly qualifies the 6PE solution for large-scale, high-performance deployments.</P>



<a href="22971536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>