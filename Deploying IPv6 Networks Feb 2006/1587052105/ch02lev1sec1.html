<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>IPv6 Addressing</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><TD valign="top"><a name="ch02lev1sec1"></a>
<H3 class="docSection1Title">IPv6 Addressing</h3>
<p class="docText">Addressing is a fundamental aspect of the communication process between two or more entities. It provides the means to identify information sources and destinations while enabling dedicated resources to appropriately link the two groups together. This holds true whether we talk about the United States Postal Service or an IP network. The previous chapter briefly overviewed the IPv4 addressing structure and the challenges generated by a limited address space and its unwise use. The previous chapter also showed that the most compelling reason to adopt IPv6 is its addressing capabilities. It is natural, therefore, to make this topic a centerpiece of this IPv6 refresher.</p>
<a name="ch02lev2sec1"></a>
<h4 class="docSection2Title">IPv6 Address Representation</h4>
<p class="docText">If we set aside the troubles that result from unplanned address assignments, we still face the inevitable exhaustion of the IPv4 addressing space. The 32-bit long IPv4 address offers roughly 2 billion practically usable IDs. This set will not be able to withstand much longer the growing needs of a rapidly increasing number of users who require unique, globally reachable IP addresses. The natural solution is to increase the address space. The 128-bit long addresses were selected despite more aggressive proposals put forward during the development of IPv6. One might find 2<sup>128</sup> or 340,282,366,920,938,463,463,374,607,431,770,000,000 addresses to be excessive. However, there was a time, not many years ago, when the same was thought of the IPv4 address space. On the other hand, one could argue that &quot;the bigger the better.&quot; However, that line of reasoning should take into consideration the impact longer addresses have on system performance. A system using a 64-bit CPU, bus, or memory structure can process both the source address (SA) and destination address (DA) IPv4 addresses in one pass; whereas for IPv6 addresses, the same requires four passes.</p>
<p class="docText">The IPv6 address can be represented as a string of 0s and 1s. This representation is a rather long string, but it is the way favored by computers. A hexadecimal representation shortens the 128-bit string to 32 characters, and it appeals to programmers. This representation is still long enough to make it hard to remember, so the string of 32 hexadecimal characters was given some structure and segmented into 8 groups of 4 characters (or 16 bits) separated by a colon (:). The decimal representation, like the one used by IPv4 that everyone is familiar with, was not adopted by IPv6.</p>
<p class="docText">Two additional rules were introduced to further optimize the IPv6 address representation:</p>
<ul><li><p class="docText"><span class="docEmphStrong">The elimination of leading 0s</span> Within each group of 16 bits between two colons, the leading 0s can be eliminated. This means that you can write :00A1: as :A1: (see <a class="docLink" href="#ch02fig01">Figure 2-1</a>).</p><a name="ch02fig01"></a><p><center>
<h5 class="docFigureTitle">Figure 2-1. IPv6 Address Representation</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig01_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="281" SRC="images/02fig01.jpg"></p>
</center></p></LI><LI><p class="docText"><span class="docEmphStrong">The elimination of consecutive 0s</span> You can collapse consecutive all-0 groups of 16 bits between consecutive colons. In this case, :0000:0000:0000: becomes :: (see <a class="docLink" href="#ch02fig01">Figure 2-1</a>).</p></li></ul>
<p class="docText">These rules must lead to a unique compressed representation of an address. For this reason, the consecutive-0s rule can be applied only once. It is incorrect to compress the address in the <a class="docLink" href="#ch02fig01">Figure 2-1</a> example to 2001::A1::1E2A. Someone looking at this address would not know whether the first :: stands for 2 or 3 groups of 16 zero bits.</p>
<p class="docText">It is important to mention that : is a meaningful character in the Uniform Resource Locator (URL), where it separates the port number from the address. To avoid confusion, RFC 2732 suggests to enclose the IPv6 address in a URL in brackets, as shown in <a class="docLink" href="#ch02ex01">Example 2-1</a>.</P>
<a name="ch02ex01"></a><h5 class="docExampleTitle">Example 2-1. Using an IPv6 Address Within a URL</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>


<pre>Address: 2001:0:0:A1::1E2A
URL address:
https://[2001:0:0:A1::1E2A]:7878/webpage.html</pre><BR>

</TD></tr></table></p>
<p class="docText">Note that the preceding address is shown with an optional port ID of 7878.</p>

<a name="ch02lev2sec2"></a>
<h4 class="docSection2Title">IPv6 Address Architecture</h4>
<p class="docText">Understanding the IPv6 address representation enables us to discuss the IPv6 addressing architecture defined in RFC 3513. Three types of IPv6 addresses have been defined:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Unicast</span> Identifies a single node, and traffic destined to a unicast address is forwarded to a single node.</p></li><li><p class="docText"><span class="docEmphStrong">Multicast</span> Identifies a group of nodes, and traffic destined to a multicast address is forwarded to all the nodes in the group.</p></li><li><p class="docText"><span class="docEmphStrong">Anycast</span> Identifies a group of nodes, and traffic destined to an anycast address is forwarded to the nearest node in the group.</P></LI></UL>
<p class="docText">All of these address types were present in IPv4, along with broadcast addresses. Broadcast traffic was shown to be too resource intensive (during regular operation as well as during broadcast storms), so IPv6 ignores it and uses multicast addresses instead.</P>
<a name="ch02lev3sec1"></a>
<H5 class="docSection3Title">IPv6 Unicast Address</h5>
<p class="docText">The fundamental function of a network is to provide unicast reachability for the hosts connected to it. All other services it provides rely on this unicast infrastructure. For these reasons, regardless of the IP version, unicast addresses play a critical role in any network.</p>
<p class="docText">A flat, structureless address space would require routers to keep track of every single host's location, leading to scalability issues. This problem can be resolved through address aggregation, grouping multiple addresses under a common representation. To facilitate this process, IP addresses are segmented in a network portion that identifies a logical group of hosts and a host portion that identifies the host within the group. Hosts are aggregated under the same network or prefix. IPv4 demonstrated the constraints of a class-based addressing architecture, so IPv6 allows variable lengths for the network portion of its addresses. This approach requires the length of the prefix to be identified by adding /(number of bits) to the address.</p>
<p class="docText">To maintain some parallelism between the addressing structure of the two IP versions, we used the IPv4 terminology host portion up to this point in the context of IPv6 addresses. IPv6, however, prefers to identify the interface of a host within a prefix rather than the host itself, which could have multiple interfaces. For this reason, the IPv6 addresses are segmented into a prefix or network portion and the interface identifier.</p>
<p class="docText"><a class="docLink" href="#ch02ex02">Example 2-2</a> shows the network and interface identifier of an IPv6 address.</p>
<a name="ch02ex02"></a><h5 class="docExampleTitle">Example 2-2. Identifying the Network and Interface ID of an IPv6 Address</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Address: 2001:0:0:A1::1E2A/64
Network portion: 2001:0:0:A1
Interface identifier in non-compressed format: :0:0:0:1E2A
Interface Identifier in compressed format: ::1E2A</pre><br>

</td></TR></table></p>
<p class="docText">RFC 3513 leaves no room for doubt about what the interface ID should be: &quot;For all unicast addresses, except those that start with binary value 000, interface IDs are required to be 64 bits long and to be constructed in Modified EUI-64 format.&quot; The rule reveals the intent to maintain a globally unique character for the interface ID whenever possible. You can generate an interface ID in many different ways:</p>
<UL><LI><p class="docList">Build one from the layer 2 address in the modified EUI-64 format. For the interface ID portion of the network, the seventh high-order bit of the EUI-64 format defines a local scope when set to 0 and a global scope (globally unique) when set to 1. Different mechanisms are defined for each media type to build the complete interface ID in the modified EUI-64 format (see the references in the section &quot;<a class="docLink" href="ch02lev1sec2.html#ch02lev2sec5">IPv6 and Data-Link Technologies</a>&quot; later in this chapter).</p></li><li><p class="docList">Autogenerate a random address as defined in RFC 3041. This assignment mechanism was developed mainly to limit the exposure of a globally reachable address and to increase privacy (see <a class="docLink" href="ch09.html#ch09">Chapter 9</a>, &quot;Securing IPv6 Networks&quot;).</p></LI><li><p class="docList">Acquire the interface ID via DHCPv6.</p></li><li><p class="docList">Manual configuration.</P></LI><LI><p class="docList">Cryptographically generated addresses (CGAs) based on RFC 3972 through a hash that includes a public key. This method of generating an interface ID provides added security and enables address authentication. The Neighbor Discovery process described later in this chapter is secured with the help of CGAs.</p></li></ul>
<p class="docText">The network portion of the address is further refined in the case of IPv6 to integrate the concept of scope.</p>
<p class="docText">The scope identifies a network domain, be it physical or logical. Being able to easily recognize the scope of an IP stream enables a network to better manage its resources by containing the traffic within the relevant domain and by applying policies relevant to that scope. The IP address is an essential element in making layer 3 forwarding decisions, so it should reflect the scope. Hosts would use the appropriate IP SA and DA for the scope of their communication.</p>
<p class="docText">In IPv6, the unicast address format reflects three predefined scopes, as follows:</p>
<ul><li><p class="docText"><span class="docEmphStrong">The link-local scope</span> Identifies all hosts within a single layer 2 domain. The unicast addresses used within this scope are called <span class="docEmphasis">link-local addresses</span>.</p></li><li><p class="docText"><span class="docEmphStrong">The unique-local scope</span> Identifies all devices reachable within an administrative site or domain that typically contains multiple distinct links. The unicast addresses used within this scope are called <span class="docEmphasis">unique-local addresses</span> (ULAs).</p></li><li><p class="docText"><span class="docEmphStrong">The global scope</span> Identifies all devices reachable across the Internet. The unicast addresses used within this scope are called <span class="docEmphasis">global unicast addresses</span> (GUAs).</P></LI></UL>
<p class="docText">These scopes are hierarchical, as shown in <a class="docLink" href="#ch02fig02">Figure 2-2</a>. The global scope is larger than the local (site) scope, which in turn includes the link scope.</P>
<a name="ch02fig02"></a><P><center>
<h5 class="docFigureTitle">Figure 2-2. Unicast Address Scoping</h5>

<p class="docText">
<img border="0" alt="" width="400" height="245" SRC="images/02fig02.jpg"></p>

</center></p><br>
<p class="docText">The link and global scopes represent the two extreme cases, the smallest and the largest scopes. This distinction makes it easier to define them. RFC 3513 identifies a site-local scope that fits logically between the link and global scopes, although its definition is open for interpretation. A site can mean different things to different people. It can be a corporate network, a geographically constrained portion of a corporate network, or simply an administered domain within a corporate network. Because IPv6 addresses are structured based on scope, the ambiguity in site definition increases the complexity of IPv6 features and implementations. The original definition of the site scope also left the door open for the use of nonunique site-local addresses with their drawbacks (discussed later in the section). For these reasons, on March 20, 2003, the IETF IPv6 working group deprecated the site-local scope and the corresponding IPv6 address type. <a class="docLink" href="#ch02fig02">Figure 2-2</a> emphasizes this point.</p>
<p class="docText">With habits being hard to break, especially when they prove to be operationally effective, the site-local scope and the site-local addresses did not go away quietly. Enterprises are accustomed to the safety and the advantages of a site-relevant, private addressing schemethe good old 10.x.y.z networkso they pressed for the development of an alternate solution to the site-local address. To meet these demands, the IETF IPv6 working group defined a new scope and address type called unique-local, preserving the concept of a site scope by using local in its name while emphasizing the &quot;nearly&quot; uniqueness of the addressing used within the site.</p>
<p class="docText">Depending on an IPv6 node's complexity, it may or may not be aware of the scope information carried within the structure of a unicast address. Routers, however, must be aware of scoping to a certain degree because they have to keep traffic within the scope of its destination or source address. Because hosts typically communicate within more than one scope, interfaces have an address for each of the scopes used.</p>
<p class="docText">Embedding the scope information into the network portion of the IPv6 address adds to its complexity. The subsequent sections discuss the details of the actual implementation of scopes in unicast addresses.</p>
<a name="ch02lev4sec1"></a>
<h5 class="docSection4Title">Link-Local Addresses</h5>
<p class="docText">When an IPv6-enabled node comes online, each interface is provided by default with a layer 3 address that can be used for communication exclusively with other hosts on the same link. The local link defines the scope of these addresses, so packets that have them as SA or DA should never be routed to other links. These addresses are called <span class="docEmphasis">link-local</span>. They are used for on-link communication as well as link operation processes such as finding neighbors or routers.</p>
<p class="docText"><a class="docLink" href="#ch02fig03">Figure 2-3</a> shows the structure of link-local addresses. A link-local address is made of a network portion of fixed format FE80::/10, where the high-level 10 bits are 1111 1110 10, and the subsequent 54 bits are 0.</P>
<a name="ch02fig03"></a><p><center>
<h5 class="docFigureTitle">Figure 2-3. Link-Local Address Structure</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig03_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="165" SRC="images/02fig03.jpg"></P>
</center></p><br>
<p class="docText">As mentioned earlier, in IPv6 the interface identifier terminology is used instead of the host portion of the address, as shown in <a class="docLink" href="#ch02fig03">Figure 2-3</a>. <a class="docLink" href="#ch02ex03">Example 2-3</a> shows the link-local address of an Ethernet interface with the interface ID generated based on the layer 2 MAC address.</p>
<a name="ch02ex03"></a><h5 class="docExampleTitle">Example 2-3. Link-Local Address of an Ethernet Interface</H5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Layer 2 MAC Address: <span class="docEmphStrong">0004.6d7f.7c1a</span>
EUI-64 Interface Identifier generated from the MAC Address (using the process shown
  in Figure 2-13 later in this chapter): <span class="docEmphStrong">204:6DFF:FE7F:7C1A</span>
Link-Local Address: FE80::204:6DFF:FE7F:7C1A</pre><br>

</TD></TR></table></P>
<a name="ch02note01"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">From a layer 3 standpoint, the link is the elemental domain, implying it does not have an internal hierarchy. This explains the flat structure of the link-local addresses.</p>
</div><br>
<p class="docText">It is important to note the fact that the link-local address, by its nature and format, is independent of the overall addressing scheme used in a network. This is consistent with its scope; the link-local address is not meaningful outside the link. For this reason, link local communication is not impacted during network renumbering. Its perennial property is leveraged by various protocols. Routers advertise their link-local address to all nodes on the link (see the &quot;<a class="docLink" href="ch02lev1sec4.html#ch02lev1sec4">Neighbor Discovery</a>&quot; section later in this chapter), thus enabling them to communicate with a gateway regardless of the global unicast addressing scheme. This property of the link-local address is also actively leveraged in network design. Link-local addresses are used to identify a next hop whenever possible (a Border Gateway Protocol [BGP] neighbor, for example).</p>

<a name="ch02lev4sec2"></a>
<h5 class="docSection4Title">Unique Local Unicast Address</h5>
<p class="docText">The concept of site scope can easily be mapped to that of a private administrative domain where addressing does not have to obey any global rules. The IPv6 addresses assigned to this scope as defined in RFC 3513 were called site-local, and they did not have to be unique. Their resemblance to the IPv4 private address space was a reminder of the drawbacks of such an approach (see RFC 3879). Some of the arguments against the use of site-local addresses are as follows:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Application issues</span> Applications have problems when the site-local addresses are carried in payload outside the site. A good example of this is the case of a client/server application that relies on the addresses of each side, which are on different sites. The address overlap between sites can confuse the server with respect to the location of the client. Attempts to deal with address overlap by adding a site identifier to the site-local addresses led to complex implementations. It is difficult for network nodes to keep track of all site identifiers, especially in the case of nodes multihomed over multiple sites.</p><p class="docList">Applications generally do not have a sense of scope, and they often leak private addresses, such as site-local, outside the private network. Leaks between sites with the same addressing can lead to routing or DNS problems.</p></li><li><p class="docText"><span class="docEmphStrong">Routing and Forwarding Issues</span> The nonunique character of site-local addresses would force routers to have to track the prefix of an interface and the site it belongs to.</p><p class="docList">Nonunique site-local addresses make it difficult to interconnect discontiguous elements of a site over intermediate networks. Tunneling becomes necessary in such circumstances.</P><p class="docList">Multi-sited routers have to base their forwarding decision not only on the destination address but on the incoming interface as well to contain the traffic within the proper site.</P></LI></UL>
<p class="docText">In its drive to reestablish the original uniform and global structure of the Internet, IPv6 could theoretically live without the concept of a site. However, practical considerations dictate the need to identify scopes smaller than the global one. Enterprises in particular have an understandable fondness for identifying the boundaries of their networks. For these reasons, the deprecated site-local scope and addresses had to be replaced by a better-defined concept that could handle the concerns mentioned. The new concept is that of a unique-local scope and the corresponding unique-local addresses.</P>
<p class="docText"><a class="docLink" href="#ch02fig04">Figure 2-4</a> shows the format of these addresses. The unique-local unicast addresses are fully standardized in RFC 4193.</p>
<a name="ch02fig04"></a><p><center>
<h5 class="docFigureTitle">Figure 2-4. Unique-Local Unicast Address Format</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig04_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="157" SRC="images/02fig04.jpg"></p>
</center></p><br>
<p class="docText">The portion of the unicast address space reserved for unique-local addresses (ULAs) is FC00::/7. <a class="docLink" href="#ch02fig04">Figure 2-4</a> shows the structure of a ULA with the following elements:</p>
<ul><li><p class="docList">L identifies the assignment policy. Only value 1 (FD00::/8) is currently in use designating a local assignment.</p></li><LI><p class="docList">Global ID is a 40-bit identifier that ensures the global uniqueness of the address. It is generated pseudo-randomly and must not be sequential. Because ULAs should not be globally routed, they do not need to be aggregated, so sequential global IDs are not necessary.</p></li><LI><p class="docList">Subnet ID gives the administrator of the local domain a resource that can be used to define a hierarchical addressing plan within the site.</P></li><li><p class="docList">Interface ID has the same meaning for all unicast addresses, and it is 64 bits long in the modified EUI-64 format.</p></li></UL>
<p class="docText">ULAs have to be used within the confines of a predefined domain that represents the local scope of these particular addresses. Traffic using ULAs as either SA or DA should not be allowed to cross the boundaries of the domain. ULAs make it easy to interconnect distinct local domains because there are no address collisions. Discontiguous site topologies are easier to manage. Routers connected to multiple sites can distinguish between them solely based on the address, thus avoiding the need for additional labels. These examples underline the benefits of the unique-local addressing versus the site-local addressing.</p>

<a name="ch02lev4sec3"></a>
<h5 class="docSection4Title">Global Unicast Address</h5>
<p class="docText">The global unicast addresses are defined for use across the IPv6 Internet. They are globally unique and globally routable. The IPv6 addresses reserved for global scoped communication are identified by their high-level 3 bits set to 001 (2000::/3), as described in RFC 3587.</p>
<p class="docText">IPv6's primary goal to provide plenty of globally accessible addresses is accomplished with the use of more address bits. The additional length could come at a cost by impacting routing processes through longer lookups, significantly larger routing tables, and larger routing updates (because many more networks are possible than with IPv4). Add to this the likely possibility that IPv6 networks are expected to have two or more coexistent addressing schemes and it becomes clear that IPv6 routers will need some help. One way to provide the needed relief is to implement and enforce strong rules on prefix aggregation. Such rules and policies would reduce the size of the routing table and the length of most of the prefixes populating them.</P>
<p class="docText">A lot of effort has been placed on developing a flexible structure for the GUAs that facilitates easy aggregation. Several attempts were made, starting with RFC 2373, to enforce a granular address structure reflecting various levels of aggregation. In the end, it was decided to enforce proper aggregation through rigorous allocation policies and settle for a simpler address structure, as specified in RFC 3587 and shown in <a class="docLink" href="#ch02fig05">Figure 2-5</a>.</P>
<a name="ch02fig05"></a><P><center>
<h5 class="docFigureTitle">Figure 2-5. Global Unicast Address Structure</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig05_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="146" SRC="images/02fig05.jpg"></p>
</center></p><br>
<p class="docText">The components of the global unicast address are as follows:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Global routing prefix</span> A service provider is assigned a portion of this prefix by the Internet Assigned Numbers Authority (IANA), and it then allocates a subspace to its customers. Its length is 48 bits or shorter based on the RFC 3177 recommendations.</p></li><li><p class="docText"><span class="docEmphStrong">Subnet ID</span> An organization receives a prefix from its service provider where the global routing prefix identifies the service provider (SP) and the organization inside the SP, and the subnet ID identifies the organizational structure of its network.</p></li><li><p class="docText"><span class="docEmphStrong">Interface ID</span> The low-order 64 bits of the address are used to identify the interfaces of nodes on a link.</P></LI></UL>
<a name="ch02note02"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">Global unicast addresses are likely to coexist with other types of unicast addresses on a given interface. For example, users within an enterprise need to exchange information within the private intranet and with resources on the Internet. This means that a host's interface within a private network could be assigned two addresses, one to be used to communicate with other hosts and resources within the private network (possibly a unique-local) and another to be used to communicate with hosts and resources outside the private network (global unicast). For operational and management purposes, a correlation between the elements of the various address types on an interface might make sense. In this example, the GUA and the ULA might use the same interface ID or even the same subnet ID.</P>
</div><br>
<p class="docText">Address allocation policies define the globally unique IPv6 address hierarchy. For this reason, it is important to briefly review them at this time.</p>

<a name="ch02lev4sec4"></a>
<h5 class="docSection4Title">IPv6 Unicast Address Allocation</h5>
<p class="docText">IANA is in charge of managing the IPv6 address space. <a class="docLink" href="#ch02table01">Table 2-1</a> summarizes the assignments, at the time of this writing, from the global unicast address pool.</p>
<a name="ch02table01"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 2-1. Assigned IPv6 Unicast Addresses</h5></caption><colgroup><col width="100"><col width="150"><col width="250"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Prefix (Hex)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Prefix (Binary)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Description</p></th></TR></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2001::/16</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">0010 0000 0000 0001</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetARIN, APNIC, RIPE NCC, LACNIC</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2002::/16</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0010 0000 0000 0010</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">6 to 4 transition mechanisms</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2003::/16</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0010 0000 0000 0011</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetRIPE NCC</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">2400:0000::/19</p>
<p class="docText">2400:2000::/19</p>
<p class="docText">2400:4000::/21</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0010 0100 0000 0000</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetAPNIC</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">2600:0000::/22</p>
<p class="docText">2604:0000::/22</p>
<p class="docText">2608:0000::/22</P>
<p class="docText">260C:0000::/22</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">0010 0110 0000 0000</p>
<p class="docText">0010 0110 0000 0100</p>
<p class="docText">0010 0110 0000 1000</P>
<p class="docText">0010 0110 0000 1100</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetARIN</p></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">2A00:0000::/21</p>
<p class="docText">2A01:0000::/23</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0010 1010 0000 0000</p>
<p class="docText">0010 1010 0000 0001</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetRIPE NCC</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">3FFE::/16</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0011 1111 1111 1110</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">6 Bone</p></td></tr></table></p><br>
<p class="docText">IANA is currently allocating unicast addresses from all the IPv6 Internet domains identified in <a class="docLink" href="#ch02table01">Table 2-1</a>.</p>
<p class="docText">After IPv4's transition from class-based to classless addresses, registries started to implement a hierarchical approach to address allocation. Larger address space is assigned to organizations (ISPs, governments, research networks, and so on), who in turn assign smaller pieces to their customers. This approach allowed for hierarchical routing, which is credited with a significant reduction in the size of the routing tables in core routers. A similar yet better-defined and stricter approach was adopted for IPv6. Earlier complex structuring of the IPv6 prefix in fields such as Top Level Aggregation and Next Level Aggregation has been replaced by the simpler format described in this section. IPv6 global unicast address hierarchy is enforced through IANA's allocation policy rather than fitting a predefined address format. <a class="docLink" href="#ch02fig06">Figure 2-6</a> exemplifies the address-allocation process for the 2001::/16 pool. IANA provides a prefix no longer than 32 bits to the Regional Internet Registries (RIRs). The current RIRs are as follows:</p>
<ul><li><p class="docList">African Network Information Center (AfriNIC)</p></li><LI><p class="docList">Asia Pacific Network Information Center (APNIC)</p></li><LI><p class="docList">American Registry for Internet Numbers (ARIN)</P></li><li><p class="docList">Regional Latin-American and Caribbean IP Address Registry (LACNIC)</p></li><LI><p class="docList">R&eacute;seaux IP Europ&eacute;ens (RIPE NCC)</p></li></ul>
<a name="ch02fig06"></a><p><center>
<H5 class="docFigureTitle">Figure 2-6. IPv6 Prefix-Allocation Process</H5>

<p class="docText">
<img border="0" alt="" width="500" height="320" SRC="images/02fig06.jpg"></P>

</center></p><br>
<p class="docText">The RIR allocates pieces of the prefix it received from IANA to National Internet Registries (NIRs; where present), to Local Internet Registries (LIRs), or Internet service providers (ISPs). These allocations are currently in the range of 32 to 35 bits in length.</p>
<p class="docText">ISPs allocate prefixes to their customers (enterprises or residential users).</p>
<p class="docText">As shown in <a class="docLink" href="#ch02fig06">Figure 2-6</a>, each organization is assigned a prefix by the one above it and in turn is assigning prefixes to the one below it. Thus, each organization (IANA, RIR, NIR, LIR, and ISP) represents an aggregation boundary.</p>
<p class="docText">ISPs and LIRs keep track of the usage of their allocations with the help of the same metric used for IPv4, the host density (HD) ratio (defined in RFC 3194). ISPs/LIRs have to allocate prefixes in a way that prevents segmentation and allows for optimal use of aggregation. Such best practices enable them to make the most out of their address space. When justified, ISPs/LIRs can go back to the RIRs to request more allocations.</p>
<p class="docText">You can find a list of allocated prefixes from both the 2001:: and 3FFE:: space at <a class="docLink" target="_blank" href="http://www.cs-ipv6.lancs.ac.uk/ipv6/6Bone/networks/#hier">http://www.cs-ipv6.lancs.ac.uk/ipv6/6Bone/networks/#hier</a>. <a class="docLink" href="#ch02fig07">Figure 2-7</a> presents a snapshot of this information for the sole purpose of exemplifying the allocation policies described in this section. NTT/VERIO is a service provider with global coverage, so it acquires prefixes from various RIRs. This example shows its 2001:218::/32 allocation received from APNIC. One of its customers is the University of Leipzig, which was assigned the 2001:218:A20::/48 prefix. The university allocated a subnet, 2001:218:A20:FFFD::/64, to one of its departments. It is interesting to note that a more practical allocation could be for NTT/VERIO to assign this European university a prefix from its RIPE NCC allocation 2001:728::/32.</p>
<a name="ch02fig07"></a><p><center>
<h5 class="docFigureTitle">Figure 2-7. IPv6 Prefix-Allocation Example</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig07_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="240" SRC="images/02fig07.jpg"></p>
</center></p><br>
<p class="docText">You can find a complete list of global IPv6 allocations made by regional registries at the following URL:</p>
<p class="docText"><a class="docLink" target="_blank" href="http://www.ripe.net/ripencc/mem-services/registration/ipv6/ipv6allocs.html">http://www.ripe.net/ripencc/mem-services/registration/ipv6/ipv6allocs.html</a>.</P>
<p class="docText">IPv6's method of implementing address hierarchy through allocation policies leads to a subtle but important departure from the traditional IPv4 address-management concepts. At the time of this writing, in the case of IPv6, an enterprise no longer owns its global address space. The address space it is using is a subset of their ISP's allocation. This means that an enterprise will have to go through network renumbering every time it changes ISPs. Despite IPv6's features that make renumbering easier, this process would carry an operational impact.</P>
<p class="docText">Because IPv6 interfaces can support multiple unicast addresses, the migration from one ISP to another one can be done through a transient period where the prefixes from both old and new ISPs coexist on the customer network. Operational experience for this type of situation still needs to be developed to evaluate the impact on medium- and large-size enterprises when switching between IPv6 ISPs. Nevertheless, as enterprises become interested in IPv6, this aspect of address management is often listed as a major concern. For this reason, large, multinational enterprises started to get involved in policy meetings of the Internet registries, lobbying for changes to the allocation mechanisms.</P>

<a name="ch02lev4sec5"></a>
<H5 class="docSection4Title">Special-Use Addresses</H5>
<p class="docText">At last, a small set of unicast addresses have been defined for special use. They do not carry a scope, so they are discussed independently of the other unicast addresses.</p>
<p class="docText">Two basic addresses carry IPv6 operational significance:</p>
<ul><li><p class="docList">The unspecified address is not assigned to any interfaces. However, it is used as an SA by devices that do not have an IPv6 address or their IPv6 address has not been yet proven to be unique within the local link. The unspecified IPv6 address has all 128 bits set to 0. It can be represented as 0:0:0:0:0:0:0:0, or as :: in compressed form.</p></li><li><p class="docList">The loopback address is used by every node to refer to itself, and it is similar to the 127.0.0.1 address in IPv4. In IPv6, the loopback address has all the 127 leading bits set to 0, and the last bit is 1. It can be represented as 0:0:0:0:0:0:0:1, or as ::1 in compressed form.</p></li></ul>
<p class="docText">The other two special address types relate to the coexistence of IPv4 and IPv6. Linking the two address spaces is important to support various aspects of this coexistence. Two mechanisms were developed to map IPv4 addresses into IPv6 addresses:</p>
<ul><LI><p class="docList">The IPv4-compatible IPv6 address was defined to be used for dynamic tunneling and is built by adding the IPv4 address to 96 bits set to 0. This address type was deprecated and it is no longer used.</p></li><LI><p class="docList">The IPv4-mapped IPv6 address is used to represent the address of an IPv4 node in an IPv6 format. The IPv4-mapped IPv6 address is built by adding the IPv4 address to 80 bits set to 0 followed by 16 bits set to 1.</P></li></ul>
<p class="docText"><a class="docLink" href="#ch02ex04">Example 2-4</a> shows the IPv4-compatible and the IPv4-mapped IPv6 addresses corresponding to the IPv4 address 192.100.10.1.</p>
<a name="ch02ex04"></a><h5 class="docExampleTitle">Example 2-4. Examples of IPv4-Compatible and IPv4-Mapped IPv6 Addresses</H5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>IPv4 Address: <span class="docEmphStrong">192.100.10.1</span>
IPv4-compatible IPv6 address: <span class="docEmphStrong">0:0:0:0:0:0:192.100.10.1</span>
       or in compressed form: <span class="docEmphStrong">::192.100.10.1</span>
       or in full Hex form: <span class="docEmphStrong">::C064:0A01</span>
IPv4-mapped IPv6 address: <span class="docEmphStrong">0:0:0:0:0:FFFF:192.100.10.1</span>
       or in compressed form <span class="docEmphStrong">::FFFF:192.100.10.1</span>
       or in full Hex form: <span class="docEmphStrong">::FFFF:C064:0A01</span></pre><br>

</TD></TR></table></P>
<p class="docText"><a class="docLink" href="#ch02table02">Table 2-2</a> summarizes the representation of these special addresses.</p>
<a name="ch02table02"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 2-2. Special-Use Addresses</h5></caption><colgroup><col width="200"><col width="150"><col width="150"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Address Type</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">IPv6 Address</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Compressed Format</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Unspecified address</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0:0:0:0:0:0:0:0</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">::</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Loopback address</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0:0:0:0:0:0:0:1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">::1</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">IPv4-compatible IPv6 address</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0:0:0:0:0:0:IPv4</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">::IPv4</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IPv4-mapped IPv6 address</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0:0:0:0:0:FFFF:IPv4</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">::FFFF:IPv4</p></td></tr></table></p><br>


<a name="ch02lev3sec2"></a>
<h5 class="docSection3Title">IPv6 Anycast Addresses</h5>
<p class="docText">When the same unicast address is assigned to multiple interfaces, typically belonging to different nodes, it becomes an anycast address as specified in RFC 3513. Because anycast addresses are structurally indistinguishable from unicast addresses, a node has to be configured to understand that an address assigned to its interface is an anycast address. A packet with an anycast DA is routed to the nearest interface configured with it. An anycast address cannot be used as the SA of a packet. Anycast is often used to virtually replicate important network resources, such as Domain Name System (DNS) root servers, web servers, and multicast rendezvous points (RPs), thus providing a level of redundancy and load sharing. IPv6 went beyond this concept that is currently used by IPv4 in that it defined a set of reserved addresses for each unicast prefix to facilitate the future use of anycast.</p>
<p class="docText">The subnet-router anycast address is defined by RFC 3513 for every prefix as the address with the interface ID set to 0. A router has to support the subnet-router anycast addresses for all the prefixes configured on its interfaces. A packet destined to such an address will be delivered to the nearest router that has an interface with that prefix.</p>
<p class="docText">RFC 2526 defines an additional set of anycast addresses reserved for a given prefix. <a class="docLink" href="#ch02fig08">Figure 2-8</a> shows the structure of these anycast addresses.</p>
<a name="ch02fig08"></a><p><center>
<h5 class="docFigureTitle">Figure 2-8. IPv6 Reserved Anycast Address Format</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig08_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="194" SRC="images/02fig08.jpg"></P>
</center></P><BR>
<p class="docText">The address format makes clear the intent of reserving the high-order addresses of a subnet for anycast use. This approach was motivated by the need to avoid conflicts with other reserved addresses. Considering the group scope of the anycast address, it also makes sense that the high-order bit, which would represent the individual/group bit of a mapped MAC address, is set to 1 (group). In the case of unicast prefixes with EUI-64 interface IDs, the universal/local bit is set to 0 to indicate that the interface ID for the anycast address is not globally unique. The Anycast ID field shown in <a class="docLink" href="#ch02fig08">Figure 2-8</a> can take the following values: 0 through 125,127 (00-7D, 7F) are reserved; ID 126 (7E) is the only one currently in use for the Mobile IPv6 (MIPv6) home agent's anycast addresses.</P>
<a name="ch02note03"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">MIPv6 provides a host with a mechanism to discover the address of one of his home agents (HAs). The host can attempt to register to the home agent's anycast address (described in this section) hosting its home prefix. One of the HAs will receive the request, reject the registration, and instead reply to the host with a list of the actual addresses of the HAs it can use.</p>
</div><br>
<p class="docText">The anycast addresses are allocated from the unicast address space. There is little operational experience with this address type, although a few usage examples are provided in RFC 3513.</p>

<a name="ch02lev3sec3"></a>
<h5 class="docSection3Title">IPv6 Multicast Addresses</h5>
<p class="docText">Multicast received its well-deserved attention during the development of IPv6. It replaced broadcast addresses in the control-plane messages, thus becoming a critical part of IPv6 network operation. The larger address space provides plenty of globally unique multicast group addresses to facilitate the deployment of multicast services.</p>
<p class="docText">A multicast address identifies a group of interfaces. A packet with a multicast destination address is delivered to all the group members. It is important to remember that multicast addresses should not be used as SAs. The IPv6 multicast addresses have their top 8 high-order bits set to 1 (FF00::/8) and the format shown in <a class="docLink" href="#ch02fig09">Figure 2-9</a>.</p>
<a name="ch02fig09"></a><p><center>
<h5 class="docFigureTitle">Figure 2-9. IPv6 Multicast Address Format</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig09_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="299" SRC="images/02fig09.jpg"></p>
</center></P><br>
<p class="docText">Three of the four bits in the flag are currently in use:</p>
<UL><LI><p class="docList">The low-order bit T defined in RFC 3513 is set to 0 for permanently assigned multicast addresses that are assigned by IANA. The T bit is set to 1 for nonpermanently assigned multicast addresses.</p></li><li><p class="docList">The P bit is defined in RFC 3306, and it indicates whether the multicast address is built based on a unicast prefix (set to 1) or not (set to 0).</p></LI><li><p class="docList">The R bit defined in RFC 3956, if set to 1, indicates that the multicast group address contains the unicast address of the RP servicing that group.</p></li></ul>
<p class="docText">The remaining fourth flag bit is reserved for future use and currently is set to 0.</P>
<a name="ch02note04"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">The P bit set to 1 indicates that the multicast address is built from a unicast address. Because the unicast address is considered to have a limited lifetime, the resulting multicast address cannot be permanently assigned. This means that a P bit set to 1 <span class="docEmphasis">requires</span> the T bit to be set to 1, too.</P>
</div><br>
<p class="docText">Scoping is a powerful feature built in the IPv6 multicast address architecture. It provides routers with the information needed to contain the multicast traffic within the appropriate domain. <a class="docLink" href="#ch02table03">Table 2-3</a> lists the values that are currently defined for the 4-bit Scope field shown in <a class="docLink" href="#ch02fig09">Figure 2-9</a>.</p>
<a name="ch02table03"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 2-3. Defined IPv6 Multicast Scopes</h5></caption><colgroup><col width="100"><col width="150"><col width="150"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Scope (Hex)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Scope (Binary)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Description</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">1</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">0001</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Interface-local scope</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0010</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local scope</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">3</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">0011</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Subnet-local scope</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">4</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">0100</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Admin-local scope</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">5</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0101</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Site-local scope</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">8</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1000</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Organization-local scope</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">E</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">1110</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Global-local scope</p></td></tr></table></p><BR>
<p class="docText">Similar to the unicast addresses, the multicast address space has its own elements of special interest, as described next.</p>
<a name="ch02lev4sec6"></a>
<h5 class="docSection4Title">Unicast-Prefix-Based Multicast Addresses</h5>
<p class="docText">GLOP addresses were introduced in IPv4 to provide globally unique IPv4 multicast group addresses to organizations that own autonomous system numbers (ASNs). The addresses are built based on globally unique ASNs. RFC 3306 extends this concept and defines a mechanism that generates globally unique IPv6 multicast addresses based on a unicast prefix, as shown in <a class="docLink" href="#ch02fig10">Figure 2-10</a>.</p>
<a name="ch02fig10"></a><P><center>
<H5 class="docFigureTitle">Figure 2-10. Unicast-Prefix-Based Multicast Address Format</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig10_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="163" SRC="images/02fig10.jpg"></p>
</center></p><br>
<p class="docText">The reserved bits must be set to 0. The 64 bits provided for the Unicast Prefix field are sufficient based on the structure of the IPv6 unicast addresses (64 bits are used by the interface ID). The format presented in <a class="docLink" href="#ch02fig10">Figure 2-10</a> suggests that any given IPv6 unicast prefix comes with 2<sup>32</sup> multicast addresses.</p>
<p class="docText"><a class="docLink" href="#ch02ex05">Example 2-5</a> shows the unicast-prefix-based multicast address generated from the unicast prefix 2001:100:abc:1::/64.</p>
<a name="ch02ex05"></a><h5 class="docExampleTitle">Example 2-5. Unicast-Prefix-Based Multicast Address Generated from an IPv6 Unicast Prefix</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Unicast Prefix: 2001:100:abc:1::/64
Unicast Prefix Scope Global: E
Choose Group ID: 11FF:11EE
Resulting Multicast Address: FF3E:0040:2001:100:abc:1:11FF:11EE</pre><br>

</td></tr></table></p>
<a name="ch02note05"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">The scope of the unicast-prefix-based multicast address should not exceed that of the embedded unicast prefix.</P>
</div><BR>
<a name="ch02note06"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">The group addresses used in Source Specific Multicast (SSM) deployment models (see <a class="docLink" href="ch06.html#ch06">Chapter 6</a>, &quot;Providing IPv6 Multicast Services&quot;) were defined as a subset of the unicast-prefix-based multicast addresses, where the Prefix Length and the Network Prefix fields are set to 0 (see <a class="docLink" href="#ch02fig11">Figure 2-11</a>).</P>
<a name="ch02fig11"></a><p><center>
<h5 class="docFigureTitle">Figure 2-11. PIM-SSM Multicast Group Addresses</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig11_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="70" SRC="images/02fig11.jpg"></p>
</center></p><br>
</div><br>

<a name="ch02lev4sec7"></a>
<h5 class="docSection4Title">Solicited-Node Multicast Addresses</h5>
<p class="docText">The solicited-node multicast address provides a mechanism to contact a host on the local-link when knowing only its layer 3 unicast address. This address type is generated for each unicast and anycast prefix assigned to an interface. The address format is FF02::1:FF00:0000/104, where the low-order 24 bits are the same as the unicast or anycast address that generated it. It represents a deterministic way to identify a local-link multicast group to which a host with a given IPv6 unicast address is listening. If not all the information needed to establish unicast connectivity to the host (the MAC address) is available, the destination can still be reached via multicast sent to its solicited-node multicast address.</p>
<p class="docText">Fundamental IPv6 control-plane processes, such as layer 2-to-layer 3 address mapping and Duplicate Address Detection (DAD) use this type of addresses (see the &quot;<a class="docLink" href="ch02lev1sec4.html#ch02lev1sec4">Neighbor Discovery</a>&quot; section later in this chapter). <a class="docLink" href="#ch02ex06">Example 2-6</a> builds a solicited-node multicast address based on the format shown in <a class="docLink" href="#ch02fig12">Figure 2-12</a>.</p>
<a name="ch02fig12"></a><p><center>
<H5 class="docFigureTitle">Figure 2-12. Solicited-Node Multicast Address Format</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/02fig12_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="362" height="157" SRC="images/02fig12.jpg"></p>
</center></P><BR>
<a name="ch02ex06"></a><h5 class="docExampleTitle">Example 2-6. Generating a Solicited-Node Multicast Address</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>


<pre>Unicast Address: 2001:100:abc:1:0:0:aa<span class="docEmphStrong">bb</span>:<span class="docEmphStrong">ccdd</span>/64
Resulting Solicited-Node Multicast Address: FF02::1:FF<span class="docEmphStrong">bb</span>:<span class="docEmphStrong">ccdd</span></pre><br>

</td></tr></table></p>
<a name="ch02note07"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">The solicited-node multicast address has a link-local scope. It is used for control-plane functions only within the local link.</P>
</div><BR>
<a name="ch02note08"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">Based on the structure of the solicited-node multicast address, it is clear that the same solicited-node multicast address represents multiple IPv6 unicast addresses. Considering the large addressing space and assuming that there is no address assignment policy that favors the 40 high-order bits of the interface ID, this oversubscription of the solicited-node multicast address should not be significant.</p>
</div><br>

<a name="ch02lev4sec8"></a>
<h5 class="docSection4Title">IPv6 Multicast Address Allocation</h5>
<p class="docText">IPv6 multicast addresses are allocated by IANA based on the rules documented on its website:</p>
<p class="docText"><a class="docLink" target="_blank" href="http://www.iana.org/assignments/ipv6-multicast-addresses">http://www.iana.org/assignments/ipv6-multicast-addresses</a></p>
<p class="docText">IANA identifies two multicast address types in its allocation policy:</p>
<ul><li><p class="docText"><span class="docEmphStrong">Variable-scope multicast addresses</span> These addresses are similar across all scopes, but they represent distinct groups. They are reserved for certain types of services or applications. A good example is NTP (Network Time Protocol), which has a multicast address of FF0X:0:0:0:0:0:0:101, where X masks the address scope.</p></li><li><p class="docText"><span class="docEmphStrong">Fixed-scope multicast addresses</span> These addresses have a certain meaning only within the scope they are defined in. This type of addresses is important in the basic operation of IPv6. For this reason, a few common ones are listed in <a class="docLink" href="#ch02table04">Table 2-4</a>.</p></LI></UL>
<a name="ch02table04"></a><P><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><H5 class="docTableTitle">Table 2-4. Example of Fixed-Scope IPv6 Multicast Addresses</H5></caption><colgroup><col width="175"><col width="75"><col width="200"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Multicast Address</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Scope</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Group Within the Scope</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF01:0:0:0:0:0:0:1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Node-local</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">All-nodes address</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">FF01:0:0:0:0:0:0:2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Node-local</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-nodes address</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:5</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">OSPF IGP</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:6</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">OSPF IGP designated routers</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:D</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Link-local</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">All PIM routers</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:0:16</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All MLDv2-capable routers</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:0:1:2</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All DHCP agents</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02:0:0:0:0:1:FFXX:XXXX</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Link-local</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Solicited-node address</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF05:0:0:0:0:0:0:2</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Site-local</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF05:0:0:0:0:0:1:3</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Site-local</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All DHCP servers</p></td></tr></table></p><br>
<p class="docText">One part of the multicast address was not talked about too much in this section, the group ID. In theory, the group ID can take any value as long as the rest of the address fits the structure described in the earlier sections. The larger multicast address space raises the concern of significant oversubscription of layer 2 addresses (which are much smaller in size) mapped to the IPv6 multicast groups. To minimize this over-subscription, group ID allocation guidelines were defined in RFC 3307, and they are shown in <a class="docLink" href="#ch02table05">Table 2-5</a>.</P>
<a name="ch02table05"></a><P><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><H5 class="docTableTitle">Table 2-5. Group ID Allocation Rules</H5></caption><colgroup><col width="185"><col width="175"><col width="175"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Multicast Address Type</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Range</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Allocation Determined By</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Permanent multicast addresses</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0x000000010x3FFFFFFF</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Expert review</P></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">Permanent multicast group ID</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0x400000000x7FFFFFFF</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Expert review</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">Dynamic multicast addressesserver allocation</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">0x800000000xFFFFFFFF</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Server allocation</p>
<p class="docText">Protocol</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Dynamic multicast addresseshost allocation</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">0x800000000xFFFFFFFF</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">RFC 1750 or 32 bit</P>
<p class="docText">Pseudo-random</P></td></tr></table></p><br>
<p class="docText">The low end of the group ID value is reserved for the permanent multicast addresses under IANA management. This is consistent with the examples shown earlier in <a class="docLink" href="#ch02table04">Table 2-4</a>. Permanent multicast group ID is used as a globally unique identifier of a service (such as NTP). The high-end range of group ID values is reserved for dynamically allocated addresses, regardless of mechanism. However, having distinct ranges for the server and host allocations does make it easier to identify the multicast addresses obtained through a managed service.</p>
<p class="docText">Some of these allocation rules might become irrelevant in the future if other mechanisms are implemented to mitigate this oversubscription.</p>


<a name="ch02lev3sec4"></a>
<h5 class="docSection3Title">IPv6 and Layer 2 Addressing</h5>
<p class="docText">IPv6 addresses correlate with layer 2 addresses in two ways of interest to this discussion. The first way is IPv6 specific and provides the mechanism of building an interface ID from layer 2 addresses. The second way is common for both IPv4 and IPv6 and provides the mechanism for mapping an IP multicast address to a layer 2 multicast address.</p>
<a name="ch02lev4sec9"></a>
<h5 class="docSection4Title">EUI-64 Interface Identifiers</h5>
<p class="docText">IEEE specifies the format of the EUI-64 identifiers. To make such an identifier an IPv6 interface ID, the only thing that has to be done is to flip the sixth bit in Internet standard order (universal/local bit).</p>
<p class="docText">The IEEE specification also provides a mechanism for generating a 64-bit EUI-64 identifier from a 48-bit layer 2 address. With such a mechanism in place, a correlation can be established between the MAC address of an interface and the interface ID portion of IPv6 addresses. This type of ID is used, for example, by default by the link-local addresses on Cisco routers.</P>
<p class="docText"><a class="docLink" href="#ch02fig13">Figure 2-13</a> shows the two-step process of generating an IPv6 interface ID from a MAC address. The first step is to create an EUI-64 identifier; the second step is to modify it to make it an IPv6 interface ID.</p>
<a name="ch02fig13"></a><p><center>
<H5 class="docFigureTitle">Figure 2-13. Generating an Interface ID from a MAC Address in the Modified EUI-64 Format</H5>

<p class="docText">
<img border="0" alt="" width="500" height="198" SRC="images/02fig13.jpg"></p>

</center></p><br>

<a name="ch02lev4sec10"></a>
<h5 class="docSection4Title">Layer 2 Multicast Addresses</H5>
<p class="docText">Similar to IPv4, IPv6 is currently mapping layer 3 multicast addresses into layer 2 addresses. For multicast IPv6 traffic, the first 16 high-order bits of the MAC address identify the layer 2 multicast address: 3333.XXXX.XXXX. The low-order 32 bits of the IPv6 multicast address are copied into the remaining portion of the MAC address. <a class="docLink" href="#ch02fig14">Figure 2-14</a> shows an example of this mapping mechanism in the case of a solicited-node multicast IPv6 address.</p>
<a name="ch02fig14"></a><p><center>
<h5 class="docFigureTitle">Figure 2-14. Mapping an IPv6 Multicast Address into a MAC Address</h5>

<p class="docText">
<img border="0" alt="" width="500" height="215" SRC="images/02fig14.jpg"></P>

</center></P><BR>
<p class="docText">These two address correlation mechanisms are often used in operational networks and are often mentioned throughout this book.</p>


<a name="ch02lev3sec5"></a>
<h5 class="docSection3Title">IPv6 Addresses Required for an Interface</h5>
<p class="docText">To ensure proper operation of the IPv6 protocol, each IPv6-enabled host must support the following set of addresses:</p>
<ul><li><p class="docList">Loopback address</p></li><li><p class="docList">Link-local address</p></li><li><p class="docList">Unicast or anycast addresses if configured</p></li><LI><p class="docList">Subscribe to the all-nodes multicast address</P></LI><LI><p class="docList">Multicast address of all the groups it subscribes to</P></li><li><p class="docList">Subscribe to its own solicited-node multicast address</p></li></ul>
<p class="docText">Depending on the node type, configuration, and supported protocols, other addresses might be present or multicast groups might be joined.</p>
<p class="docText">A router must support the addresses listed for hosts, as well as the following:</p>
<ul><li><p class="docList">Subnet-router anycast address</p></li><li><p class="docList">All configured anycast addresses</P></li><li><p class="docList">The all routers multicast address</P></LI></ul>
<p class="docText">These addresses are used for both control- and data-plane-relevant traffic.</p>

<a name="ch02lev3sec6"></a>
<h5 class="docSection3Title">Configuring IPv6 Addresses in Cisco IOS Routers</h5>
<p class="docText">This section presents the Cisco IOS router-specific configuration steps that are needed to provision a Cisco router interface for IPv6. <a class="docLink" href="#ch02ex07">Example 2-7</a> presents the process of enabling IPv6 on a router interface and underlines some of the concepts reviewed in this section.</P>
<a name="ch02ex07"></a><h5 class="docExampleTitle">Example 2-7. Enabling IPv6 on a Router Interface</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>


<pre>Router#<span class="docEmphStrong">show interface Gigabit2/0</span>
GigabitEthernet2/0 is up, line protocol is up
  Hardware is WISEMAN, address is 00b0.4a5c.f038 (bia <span class="docEmphStrong">00b0.4a5c.f038</span>)
! Interface MAC address is bolded
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
...
Router#<span class="docEmphStrong">configure terminal</span>
! Enters configuration mode
Enter configuration commands, one per line. End with CNTL/Z.
Router(config)#<span class="docEmphStrong">interface Gigabit2/0</span>
Router(config-if)#<span class="docEmphStrong">ipv6 enable</span>
! Enables IPv6 on Gigabit2/0
Router(config-if)#<span class="docEmphStrong">^Z</span>
Router#
*Jul 22 22:14:17.833: %SYS-5-CONFIG_I: Configured from console by console
Router#<span class="docEmphStrong">show ipv6 interface Gigabit2/0</span>
! Displays the IPv6 Properties of Interface Gigabit2/0
GigabitEthernet2/0 is up, line protocol is up
  IPv6 is enabled, link-local address is <span class="docEmphStrong">FE80::2B0:4AFF:FE5C:F038</span>
! The bolded Link-Local address was generated as described in the EUI-64 Interface
Identifiers.
! MAC = 00b0.4a5c.f038
! EUI-64 = 02B0:4AFF:FE5C:F038
! Link-Local Address: FE80:: 2B0:4AFF:FE5C:F038
  No global unicast address is configured
  Joined group address(es):
    <span class="docEmphStrong">FF02::1</span>
! Link-Local All Nodes
    <span class="docEmphStrong">FF02::2</span>
! Link-Local All Routers
    <span class="docEmphStrong">FF02::1:FF5C:F038</span>
! The Solicited-Node Multicast address was generated as described earlier in the
  chapter
! MAC = 00b0.4a5c.f038
! Last 24 bits = 5C:F038
! Solicited-Node Multicast: FF02::1:FF5C:F038
  MTU is 1500 bytes
  ICMP error messages limited to one every 100 milliseconds
  ICMP redirects are enabled
  ND DAD is enabled, number of DAD attempts: 1
  ND reachable time is 30000 milliseconds
  ND advertised reachable time is 0 milliseconds
  ND advertised retransmit interval is 0 milliseconds
  ND router advertisements are sent every 200 seconds
  ND router advertisements live for 1800 seconds
  Hosts use stateless autoconfig for addresses.</pre><BR>

</TD></tr></table></p>
<a name="ch02note09"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">In <a class="docLink" href="#ch02ex07">Example 2-7</a>, the router was already enabled to run IPv6 with the global command <span class="docEmphStrong">ipv6 unicast-routing</span>. A router that is not configured for IPv6 routing will act as a host on each of its interfaces configured for IPv6. Despite not being shown in the example, for optimal forwarding of IPv6 traffic it is important to explicitly enable Cisco Express Forwarding (CEF) on Cisco routers with the global configuration command <span class="docEmphStrong">ipv6 cef</span>.</p>
</div><br>
<a name="ch02note10"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText">The link-local address was automatically generated from the 48-bit MAC address of the interface. This is the default behavior of a Cisco router. Cisco IOS commands also enable you to manually configure the link-local address.</p>
</div><br>
<p class="docText"><a class="docLink" href="#ch02ex08">Example 2-8</a> presents the process of configuring various types of addresses on the router interface. The results of these configuration steps are shown in the output of <span class="docEmphStrong">show ipv6 interface</span>, which displays the IPv6 properties of the interface.</p>
<a name="ch02ex08"></a><h5 class="docExampleTitle">Example 2-8. Configuring IPv6 Addresses on a Router Interface</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<pre>Router#<span class="docEmphStrong">configure terminal</span>
Enter configuration commands, one per line.  End with CNTL/Z.
Router(config)#<span class="docEmphStrong">interface Gigabit2/0</span>
Router(config-if)#<span class="docEmphStrong">ipv6 address 2001:100:10:1::1/64</span>
! IPv6 Global Unicast with configured Interface ID: <span class="docEmphStrong">2001:100:10:1::1/64</span>
Router(config-if)#<span class="docEmphStrong">ipv6 add 2001:100:10:2::/64 eui-64</span>
! IPv6 Global Unicast enabled to use the EUI-64, MAC generated Interface ID
Router(config-if)#<span class="docEmphStrong">ipv6 add 2001:100:10:3::1/64 anycast</span>
! IPv6 Unicast defined to be Anycast Address: <span class="docEmphStrong">2001:100:10:3::1/64</span>
Router(config-if)#^Z
Router#<span class="docEmphStrong">show ipv6 interface Gigabit2/0</span>
GigabitEthernet2/0 is up, line protocol is up
  IPv6 is enabled, link-local address is FE80::2B0:4AFF:FE5C:F038
  Global unicast address(es):
    2001:100:10:1::1, subnet is 2001:100:10:1::/64
! IPv6 Global Unicast Address #1
    2001:100:10:2:2B0:4AFF:FE5C:F038, subnet is 2001:100:10:2::/64 [EUI]
! IPv6 Global Unicast Address with the Interface ID generated in the modified EUI-
  6e format based on the Interface MAC.
    2001:100:10:3::1, subnet is 2001:100:10:3::/64 [ANY]
! IPv6 Anycast Address
  Joined group address(es):
    FF02::1
    FF02::2
    FF02::1:FF00:1
! The Solicited-Node Multicast address corresponding to IPv6 address #1
    FF02::1:FF5C:F038
! The Solicited-Node Multicast address corresponding to IPv6 address #2
  MTU is 1500 bytes
  ICMP error messages limited to one every 100 milliseconds
  ICMP redirects are enabled
  ND DAD is enabled, number of DAD attempts: 1
  ND reachable time is 30000 milliseconds
  ND advertised reachable time is 0 milliseconds
  ND advertised retransmit interval is 0 milliseconds
  ND router advertisements are sent every 200 seconds
  ND router advertisements live for 1800 seconds
  Hosts use stateless autoconfig for addresses.</pre><BR>

</TD></TR></table></P>
<a name="ch02note11"></a><div class="docNote"><p class="docNoteTitle">Note</P>

<p class="docText">Any number of global IPv6 unicast addresses can be configured on an interface. <span class="docEmphasis">Remember</span>: Unlike IPv4, where the latest configured address overwrites the existing one, in IPv6 the new address is just added to the existing one. If the intent is to remove the current address, you must do so explicitly.</p>
</div><br>

<a name="ch02lev3sec7"></a>
<h5 class="docSection3Title">IPv6 Addressing Architecture at a Glance</h5>
<p class="docText">The IPv6 addressing architecture is, for the most part, settled in its final structure. Some of its aspects are still being worked on (for example, the unique-local unicast address). Despite these ongoing tweaks, at its current level of development and standardization, IPv6 addressing is mature enough for the deployment of large IPv6 networks. <a class="docLink" href="#ch02table06">Table 2-6</a> summarizes the information presented in this section for quick reference.</p>
<a name="ch02table06"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 2-6. IPv6 Addressing Summary and Significant Address Allocations</h5></caption><colgroup><col width="175"><col width="175"><col width="200"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Prefix (Hex)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Prefix (Binary)</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">Description</p></th></TR><tr><th class="thead" scope="col" align="left" valign="bottom" colspan="3" style="background-color:#DDDDDD"><p class="docText">Unicast Special Use</p></th></TR></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText">::</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All 0s</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Unspecified</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">::1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">::0000 0000 0000 0001</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Loopback</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">::A.B.C.D</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">::[IPv4 address in binary]</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">IPv4-compatible IPv6 address (deprecated)</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">::FFFF:A.B.C.D</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">::1111 1111 1111</p>
<p class="docText">1111:[IPv4]</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv4-mapped IPv6 address</p></td></TR><tr><td class="docTableCell" align="left" valign="top" colspan="3" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphStrong">Unicast Link-Local [1111 1110 1000 0000]</span></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FE80::/10</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">1111 1110 1000 0000::</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Link-local</P></TD></TR><tr><td class="docTableCell" align="left" valign="top" colspan="3" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphStrong">Unicast Unique-Local [1111 110]</span></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FC00::/7</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 110</span>0 0000 0000::</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Unique-local</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FD00::/8</P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 110</span>1 0000 0000::</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Unique-local, locally assign</p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="3" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphStrong">Unicast Global [001]</span></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2001::/16</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 0000 0000 0001</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetARIN, APNIC, RIPE NCC, LACNIC</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2002::/16</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 0000 0000 0010</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">6 to 4 transition mechanisms</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">2003::/16</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 0000 0000 0011</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetRIPE NCC</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">2400:0000::/19</p>
<p class="docText">2400:2000::/19</p>
<p class="docText">2400:4000::/21</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 0100 0000 0000</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetAPNIC</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">2600:0000::/22</p>
<p class="docText">2604:0000::/22</p>
<p class="docText">2608:0000::/22</P>
<p class="docText">260C:0000::/22</P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 0110 0000 0000</p>
<p class="docText"><span class="docEmphStrong">001</span>0 0110 0000 0100</p>
<p class="docText"><span class="docEmphStrong">001</span>0 0110 0000 1000</P>
<p class="docText"><span class="docEmphStrong">001</span>0 0110 0000 1100</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetARIN</p></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">2A00:0000::/21</p>
<p class="docText">2A01:0000::/23</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">001</span>0 1010 0000 0000</p>
<p class="docText"><span class="docEmphStrong">001</span>0 1010 0000 0001</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">IPv6 InternetRIPE NCC</p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="3" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphStrong">Anycast</span></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" colspan="3"><p class="docText">Any unicast address configured on multiple interfaces and identified as anycast</p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="3" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphStrong">Multicast [1111 1111]</span></p></td></tr><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphasis">Node-Local Scope</span></p></td><TD class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 0000 000<span class="docEmphStrong">1</span></p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">FF01::1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111 0000 0001</span>::1</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-nodes address</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FF01::2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111 0000 0001</span>::2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</p></td></tr><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphasis">Link-Local Scope</span></p></td><td class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 0000 00<span class="docEmphStrong">10</span></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02::1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-nodes address</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02::2</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::2</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02::5</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::5</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">OSPF IGP</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02::6</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::6</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">OSPF IGP DR</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02::B</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::B</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Mobile agents</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02::D</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::D</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">All PIM routers</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">FF02::16</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::16</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">All MLDv2-capable routers</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">FF02::1:2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::1:2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All DHCP servers</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF02::1:3</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111</span> <span class="docEmphStrong">0000 0010</span>::1:3</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Link-local multicast name resolution</P></TD></tr><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphasis">Solicited-Node</span></p></td><td class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 0000 00<span class="docEmphStrong">10::1:FF</span>XX:XXXX</p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="2"><p class="docText">FF02::1:FFXX:XXXX</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Solicited-node address</p></TD></TR><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphasis">Site-Local</span></p></td><TD class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 0000 10<span class="docEmphStrong">01</span></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">FF05::2</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111 0000 1001</span>::2</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">All-routers address</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">FF05::1:3</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong">1111 1111 0000 1001</span>::1:3</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">All DHCP servers</P></TD></TR><TR><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphasis">Unicast-Prefix Based</span></p></td><td class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 <span class="docEmphStrong">0011</span></p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="2"><p class="docText">FF3X:0Y [64-bit prefix]:[32-bit group ID]</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Xscope; Yprefix length</P></td></tr><TR><TD class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText">PIM-SSM Group Addresses</p></td><td class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 <span class="docEmphStrong">0011</span></p></TD></tr><tr><td class="docTableCell" align="left" valign="top" colspan="2"><p class="docText">FF3X::[32-bit group ID]</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Xscope</P></td></tr><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText">Embedded RP Group Addresses</p></td><td class="docTableCell" align="left" valign="top" colspan="2" style="background-color:#DDDDDD"><p class="docText">1111 1111 <span class="docEmphStrong">0111</span></p></td></tr><tr><td class="docTableCell" align="left" valign="top" colspan="2"><p class="docText">FF3X:0YZZ[64-bit prefix]:[32-bit group ID]</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Xscope; Yinterface ID; ZZprefix length</P></TD></TR></table></P><br>



<a href="22971536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>