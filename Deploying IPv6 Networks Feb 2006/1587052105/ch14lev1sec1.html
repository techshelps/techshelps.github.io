<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Network Environment and IPv4 Services</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch14lev1sec1"></a>
<h3 class="docSection1Title">Network Environment and IPv4 Services</H3>
<p class="docText">RTPCom is a fictitious wholesale access provider that covers most major metropolitan areas in the United States. It started by providing access services to its residential and business customers over dialup and ISDN. Today, most of its customers are provided broadband access over xDSL, Fiber, or WiFi. RTPCom provides IPv4 unicast connectivity for its customers, linking them to their Internet service providers of choice.</P>
<p class="docText">Considering the large number of residential customers, aggregation is important in RTPCom's network design. Its backbone is structured in three levels of points of presence (POPs) (<a class="docLink" href="#ch14fig01">Figure 14-1</a>).</p>
<a name="ch14fig01"></a><P><center>
<h5 class="docFigureTitle">Figure 14-1. RTPCom POP Architecture</h5>

<p class="docText">
<img border="0" alt="" width="400" height="319" SRC="images/14fig01.jpg"></P>

</center></P><BR>
<p class="docText">Level 1 (L1) POPs form the backbone of the network. They service large metropolitan areas and they provide the interface to various ISPs. Originally the L1 POPs were not interconnected and RTPCom's network was not contiguous. As its footprint and customer base grew, RTPCom could justify owning the OC-192 lines that currently connect its L1 POPs.</p>
<p class="docText">The L1 POPs connect to L2 (L2) POPs over OC-192 or OC-48 links depending on the size of the L2 POP. The later provide access services in areas of the metropolitan domain serviced by the L1 POP or in other smaller cities. L2 POPs aggregate L3 (L3) POPs over OC-48 or OC-3 links. <a class="docLink" href="#ch14fig02">Figure 14-2</a> presents RTPCom's network in geographical context.</p>
<a name="ch14fig02"></a><p><center>
<H5 class="docFigureTitle">Figure 14-2. RTPCom NetworkGeographical Topology</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/14fig02_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="361" SRC="images/14fig02.jpg"></p>
</center></P><BR>
<p class="docText">The link and media types used to interconnect RTPCom's POPs are summarized in <a class="docLink" href="#ch14table01">Table 14-1</a>.</p>
<a name="ch14table01"></a><p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><caption><h5 class="docTableTitle">Table 14-1. Backbone Interface Types</h5></caption><colgroup><col width="200"><col width="100"><col width="200"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="bottom" style="background-color:#DDDDDD"><p class="docText">Interface Type</p></th><th class="thead" scope="col" align="left" valign="bottom" style="background-color:#DDDDDD"><p class="docText">Speed</p></th><th class="thead" scope="col" align="left" valign="bottom" style="background-color:#DDDDDD"><p class="docText">Use</P></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText">OC-192/10Gig</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">10 Gbps</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">L1-L1 and L1-L2 POPs</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">OC-48 POS</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">2.5 Gbps</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">L1-L2 and L2-L3 POPs</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">OC-3 POS</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">155 Mbps</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">L2-L3 POPs</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Gigabit Ethernet</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">1 Gbps</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">L1-L3 and L2-L3 POPs</p></td></TR></table></p><br>
<p class="docText">The design of each POP type is emphasizing the need for aggregation and redundancy. The differences revolve mainly around the levels of aggregation and the bandwidths of the links used.</P>
<p class="docText">The L1 POPs form RTPCom's backbone with the following characteristics:</p>
<UL><li><p class="docList">Highly secure over a dedicated private network</p></li><li><p class="docList">Uses high-bandwidth OC-48 and OC-192 backbone links</p></li><li><p class="docList">Is over-engineered, so that QoS is not used in the core for its IPv4 services</p></li><li><p class="docList">Full backbone redundancy using parallel links between the L1 POPs</p></li><li><p class="docList">Uses a single autonomous system</p></li></UL>
<p class="docText">They also contain the L2TP Network Server (LNS) routers that terminate the PPP sessions initiated by the customers. The de-encapsulated traffic is then handed over to the ISP selected by those customers. Each LNS router supports the customers of a single ISP and it connects over dedicated VLANs to two edge routers that provide the uplink to that ISP. The L1 POP design and the backbone topology are shown in <a class="docLink" href="#ch14fig03">Figure 14-3</a>. Authentication, authorization, and accounting (AAA) resources that are used by the LNS for managing the PPP sessions are maintained by the corresponding ISP and are not shown in this figure.</p>
<a name="ch14fig03"></a><p><center>
<h5 class="docFigureTitle">Figure 14-3. Level 1 POP Design and Backbone Topology</H5>

<p class="docText">
<img border="0" alt="" width="500" height="500" SRC="images/14fig03.jpg"></p>

</center></P><BR>
<p class="docText">All routers in the L1 POPs belong to OSPF area 0. The L1 POPs peer via iBGP with the L2 POPs. A dedicated IGP is used between the LNS and the edge routers to implement layer 3 redundancy and load balancing. The edge routers connect to the collocated ISP routers which are not shown in the picture.</p>
<p class="docText">Multiple L2 POPs are deployed within a metropolitan area to provide customer access. L2 POPs can also be used by themselves in smaller markets. They rely on OC-48 Dynamic Packet Transport (DPT) rings to aggregate the access layer across the covered area or L3 POPs. The same design would have applied to a Resilient Packet Ring (RPR, 802.17) infrastructure, too. <a class="docLink" href="#ch14fig04">Figure 14-4</a> presents the structure of an L2 POP.</P>
<a name="ch14fig04"></a><p><center>
<h5 class="docFigureTitle">Figure 14-4. Level 2 POP Design</H5>
<p class="docText"><div class="v1"><a target="_self" href="images/14fig04_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="400" SRC="images/14fig04.jpg"></P>
</center></P><br>
<p class="docText">L2 POPs peer via interior Border Gateway Protocol (iBGP) with the L1 POPs. They run OSPF with the ring in area 0 and each aggregated location, a local access layer or L3 POPs, connecting to the ring in an area of its own as shown in <a class="docLink" href="#ch14fig04">Figure 14-4</a>.</p>
<p class="docText">The last building block in RTPCom's network design presented here is the L3 POP. It services small markets or remote locations. It is basically made of the access layer and an aggregation layer that provides connectivity to L2 POPs (<a class="docLink" href="#ch14fig05">Figure 14-5</a>).</p>
<a name="ch14fig05"></a><P><center>
<h5 class="docFigureTitle">Figure 14-5. Level 3 POP Design</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/14fig05_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="319" SRC="images/14fig05.jpg"></P>
</center></P><br>
<p class="docText">L3 POPs connect to L2 POPs over OC-48 or OC-3 links. They run a single-area OSPF as an IGP.</p>
<p class="docText">The access layer represented in the POP design figures is similar for both L2 and L3 POP types. Its main characteristic is scalability needed to handle a large number of customers (<a class="docLink" href="#ch14fig06">Figure 14-6</a>).</p>
<a name="ch14fig06"></a><p><center>
<H5 class="docFigureTitle">Figure 14-6. RTPCom Access Layer</h5>
<p class="docText"><div class="v1"><a target="_self" href="images/14fig06_alt.jpg">[View full size image]</a></div><img border="0" alt="" width="500" height="521" SRC="images/14fig06.jpg"></p>
</center></P><br>
<p class="docText">In terms of physical and link layers, RTPCom owns the entire last-mile infrastructure for all access types it offers: ADSL, FTTH, and WiFi.</P>
<a name="ch14note01"></a><div class="docNote"><p class="docNoteTitle">Note</p>

<p class="docText"><a name="iddle1240"></a>RTPCom does not offer any services over cable. If it were to offer services, extending IPv6 access over such an infrastructure would complicate the deployment. As mentioned in <a class="docLink" href="ch03.html#ch03">Chapter 3</a>, &quot;Delivering IPv6 Unicast Services,&quot; the cable specification (DOCSIS) does not support IPv6, so tunneling is the only mechanism available for transporting the IPv6 traffic.</p>
<p class="docText">RTPCom is currently evaluating WiMAX as an access technology but no service is yet provided as this would require a license subscription.</p>
</div><br>
<p class="docText">For the IPv4 service, RTPCom aggregates the customer-initiated PPP over Ethernet (PPPoE) sessions and bundles them through Layer 2 Tunneling Protocol (L2TP) tunnels to the edge of its network. LNS routers in L1 POPs terminate the PPPoE sessions, de-encapsulate the traffic, and forward it to ISPs. The operation of this service is also exemplified in <a class="docLink" href="#ch14fig06">Figure 14-6</a>.</p>
<p class="docText">Through this wholesale model, RTPCom is not responsible for managing the global IPv4 addresses used by these customers, because they are managed by their ISP. RTPCom only provides transport for the encapsulated traffic and for that purpose it uses the private IPv4 address space.</p>
<p class="docText">The bulk of RTPCom's business is providing residential customers with access to an ISP. It is also aggressively developing its small office/home office (SOHO) customer base. RTPCom would like to expand its service offering into the Triple Play (data, voice, video) arena. Although the wholesale model used for the IPv4 unicast-based services can easily support Voice over IP (VoIP), it does not support in a scalable manner content delivery (CD)-based on multicast. All RTPCom's customers have a virtual point-to-point link to their gateway (LNS) across a large portion of the network (L3, L2, and nearest L1 POP). Because the LNS is the only device that can do traffic replication for all the end users, RTPCom's network is flooded with multiple replicas of the same packets for each customer subscribed to a given content channel. This inefficient use of network resources limits significantly the scale of any multicast-based service.</p>

</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>