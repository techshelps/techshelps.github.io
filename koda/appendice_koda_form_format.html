<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Form Format</title>
<link rel="stylesheet" type="text/css" href="offline.css"/>
</head><body>



<h1><a name="form_format" id="form_format">Form Format</a></h1>
<div class="level1">

<p>
For anyone who possibly wants to convert other form formats into Koda&#039;s, here is Koda KXF format structure.
</p>

<p>
Koda&#039;s format is very simple. It&#039;s conform to <acronym title="">XML</acronym> rules and can be easily parsed with other application. Also, other applications can write Koda&#039;s format.
</p>

<p>

<strong>Notes:</strong>
</p>
<ul>
<li class="level1"><div class="li"> at the moment Koda can only read/write ANSI files.</div>
</li>
<li class="level1"><div class="li"> all tags/attributes names are case sensitive.</div>
</li>
<li class="level1"><div class="li"> properties and components nodes should be present in every object despite they are containing something or not.</div>
</li>
</ul>

<p>
<strong>Common structure is:</strong>

</p>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;object</span> <span class="re0">type</span>=<span class="st0">&quot;type&quot;</span> <span class="re0">name</span>=<span class="st0">&quot;name&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;properties<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;name&quot;</span> <span class="re0">vt</span>=<span class="st0">&quot;vt&quot;</span><span class="re2">&gt;</span></span>
            ...
        <span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/properties<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;components<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;object<span class="re2">&gt;</span></span></span>
            ...
            <span class="sc3"><span class="re1">&lt;/object<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/components<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/object<span class="re2">&gt;</span></span></span></pre>
<table class="inline">
	<tr class="row0">
		<td class="col0" colspan="2"><strong>Object has two attributes:</strong></td>
	</tr>
	<tr class="row1">
		<td class="col0">type</td><td class="col1">a classname of object, “TALabel” for example.</td>
	</tr>
	<tr class="row2">
		<td class="col0">name</td><td class="col1">unique name of object. This is an application controlled attribute, so Koda&#039;s parser will not fix it if not unique! The only exception is an empty name: you can have any number of objects with an <em>empty name</em>.</td>
	</tr>
</table>
<table class="inline">
	<tr class="row0">
		<td class="col0" colspan="3"><strong>Property has two attributes:</strong></td>
	</tr>
	<tr class="row1">
		<td class="col0">name</td><td class="col1" colspan="2">name of the object property, “Caption” for example.</td>
	</tr>
	<tr class="row2">
		<td class="col0">vt (variant type)</td><td class="col1" colspan="2">type of saved property value. This can be one of next types:</td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign">  </td><td class="col1">Int8</td><td class="col2">short 8-bit integer;</td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign">  </td><td class="col1">Int16</td><td class="col2">short 16-bit integer;</td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign">  </td><td class="col1">Int32</td><td class="col2">long 32-bit integer;</td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign">  </td><td class="col1">Int64</td><td class="col2">long 64-bit integer (it can be handled, but it is not used anywhere in Koda);</td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign">  </td><td class="col1">True/False</td><td class="col2">Boolean</td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign">  </td><td class="col1">Single</td><td class="col2">floating point number;</td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign">  </td><td class="col1">Extended</td><td class="col2">floating point number (double precision);</td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign">  </td><td class="col1">Currency</td><td class="col2">currency (not used in Koda);</td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign">  </td><td class="col1">String</td><td class="col2">ANSI string;</td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign">  </td><td class="col1">UTF8String,<br/>
WString</td><td class="col2">unicode string, currently handled as ANSI string;</td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign">  </td><td class="col1">Ident</td><td class="col2">object identifier;</td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign">  </td><td class="col1">Set</td><td class="col2">set of identifiers;</td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign">  </td><td class="col1">Date</td><td class="col2">date/time. Due Delphi&#039;s incorrect streaming support of this type, it is not used in Koda, and not recommended to use;</td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign">  </td><td class="col1">List</td><td class="col2">list of strings (see below);</td>
	</tr>
	<tr class="row17">
		<td class="col0 leftalign">  </td><td class="col1">Collection</td><td class="col2">collection (see below);</td>
	</tr>
	<tr class="row18">
		<td class="col0 leftalign">  </td><td class="col1">Binary</td><td class="col2">binary data (see below).</td>
	</tr>
</table>

<p>

<strong>Some types, that require special handling:</strong>
</p>

<p>
<em>List of strings (ex. lines of an items property of a Listbox control):</em>
</p>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;Lines&quot;</span> <span class="re0">vt</span>=<span class="st0">&quot;List&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;list<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;li<span class="re2">&gt;</span></span></span>...<span class="sc3"><span class="re1">&lt;/li<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;li<span class="re2">&gt;</span></span></span>...<span class="sc3"><span class="re1">&lt;/li<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/list<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span></pre>

<p>
<em>Collection:</em>

</p>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;Columns&quot;</span> <span class="re0">vt</span>=<span class="st0">&quot;Collection&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;collection<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;item<span class="re2">&gt;</span></span></span>
            <span class="sc3"><span class="re1">&lt;property</span><span class="re2">/&gt;</span></span>
            <span class="sc3"><span class="re1">&lt;property</span><span class="re2">/&gt;</span></span>
            ...
        <span class="sc3"><span class="re1">&lt;/item<span class="re2">&gt;</span></span></span>
        ...
    <span class="sc3"><span class="re1">&lt;/collection<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span></pre>

<p>
<em>Binary</em>

</p>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;Icon&quot;</span> <span class="re0">vt</span>=<span class="st0">&quot;Binary&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;bin<span class="re2">&gt;</span></span></span>...<span class="sc3"><span class="re1">&lt;/bin<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;bin<span class="re2">&gt;</span></span></span>...<span class="sc3"><span class="re1">&lt;/bin<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span></pre>

<p>
Binary data should be split into 32-byte pieces and converted to HEX, so every &lt;bin&gt;&lt;/bin&gt; pair can contain up to 64 hexadecimal symbols.
</p>

</div>

</body></html>
