<html>


<!-- Mirrored from www.jefferypsanders.com/autolispintr_rw.html by HTTrack Website Copier/3.x [XR&CO'2004], Thu, 23 Sep 2004 01:07:54 GMT -->
<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="description" content="Autolisp Entity Selection Functions.">
<meta name="keywords" content="autolisp selection, autolisp entity selection, autolisp programming, entsel, ssget, example program">
<title>The AutoLisp Intermediate Tutorial - Read/Write and File Functions</title>
</head>

<body>

</body>

</html>
<p align="center"><font color="#000000"><big><big><big><strong>The
    AutoLisp Intermediate Tutorial</strong></big></big></big></font><font face="Helvetica"></p>
    </font><hr size="4" color="#0000FF">
    <p align="left"><u><big><big><strong>Read/Write &amp; File Functions</strong></big></big></u></p>
    <p align="left"><big>Functions&nbsp; -&nbsp;open/close&nbsp; read-line &nbsp;
    write-line&nbsp; <a href="autolispintr_rw.html#Example">Example Programs</a></big></p>
    <hr size="4" color="#0000FF">
    <p align="left"><big><strong>open/close </strong></big>- Open a file and close a
    file.&nbsp; That simple.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Syntax : <strong>(open &quot;filename&quot; mode)&nbsp; (close fileVarName)</strong></p>
    <p align="left"><strong>&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </strong>Where<strong> filename </strong>is any valid file or resource name. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Where <strong>mode</strong> is either <strong>&quot;r&quot;</strong> , <strong>&quot;w&quot;</strong>
    ,&nbsp; or&nbsp; <strong>&quot;a&quot;</strong>.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>&quot;r&quot;</strong> &nbsp; -&nbsp; Read mode.&nbsp; Reads a file with either
    read-char or read-line.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>&quot;w&quot;</strong> - Write mode.&nbsp; Writes to a file with either
    write-char, write-line, princ, or print.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>&quot;a&quot;</strong> &nbsp; - Append mode.&nbsp; Appends to an existing file
    using write-char, write-line, princ, or print.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Note: If the existing file is not found in append mode, autolisp will create a new empty
    file.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>Open Returns</strong> a file descriptor. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Note: You must use (setq varNam(open &quot;file&quot; mode)) to enable closing of the
    file.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Note: Writing the file does not occur until you use the <strong>close</strong> statement.<br>
    . </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Example: </p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (if (setq f(open &quot;c:/acad/myfile.txt&quot; &quot;r&quot;))</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (progn</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (while (setq txtLine(read-line f))</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp; (princ txtLine)</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    )</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (close f)</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    )</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (princ &quot;\n Error - File was not opened.&quot;)</font></p>
    <p align="left"><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    )</font></p>
    <p align="left">&nbsp;</p>
    <p align="left"><big><strong>read-line </strong></big>- This function reads a line of text
    from an open file.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Syntax &nbsp; :&nbsp; <strong>(read-line fileVar)</strong></p>
    <p align="left"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </strong>Where<strong> fileVar </strong>is a valid variable name that represents an open
    file descriptor. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>Returns</strong> a text string. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Assuming <font color="#FF0000" face="Courier">(setq f(open &quot;text.txt&quot;
    &quot;r&quot;))</font> returned sucessfully.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Assuming <font color="#FF0000" face="Courier">(setq g(open &quot;text8.txt&quot;
    &quot;r&quot;))</font> failed.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#FF0000" face="Courier">&nbsp; (read-line f)
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font>&nbsp; ;returns string from file</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <font color="#FF0000" face="Courier">(read-line g)
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font>&nbsp; ;returns Error - Bad Argument Type</p>
    <p align="left">&nbsp;</p>
    <p align="left"><big><strong>write-line </strong></big>- This function writes a line of
    text to an open file.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Syntax &nbsp; :&nbsp; <strong>(write-line fileVar)</strong></p>
    <p align="left"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </strong>Where<strong> fileVar </strong>is a valid variable name that represents an open
    file descriptor. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <strong>Returns</strong> a text string. </p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Assuming <font color="#FF0000" face="Courier">(setq f(open &quot;text.txt&quot;
    &quot;r&quot;))</font> returned successfully.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Assuming <font color="#FF0000" face="Courier">(setq g(open &quot;text8.txt&quot;
    &quot;r&quot;))</font> failed.</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#FF0000" face="Courier">&nbsp; (write-line &quot;Hello World&quot; f) &nbsp; </font>&nbsp;
    ;writes text to file and returns string &quot;Hello World&quot;</p>
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <font color="#FF0000" face="Courier">(write-line &quot;Hello World&quot; g)&nbsp;&nbsp; </font>&nbsp;
    ;returns Error - Bad Argument Type</p>
    <p align="left">&nbsp;</p>
    <p align="left"><strong>End of Read/Write and File Functions</strong></p>
    <hr size="4" color="#0000FF">
    <p align="left"><big><strong>Final
    note:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong></big></p>
    <p align="left"><big><strong>&nbsp; </strong></big>I've stated over and over that the OPEN
    statement opens a file.&nbsp; This can also be any resource available to you. &nbsp;
    Instead of opening &quot;C:\ACAD\MyTextFile.txt&quot; you can just as easily open
    &quot;LPT1&quot; or &quot;\\myserver\myprinter&quot; and write the file to a printer
    exactly like you write to a file.&nbsp; Cool!&nbsp; Printing from AutoLisp!&nbsp; </p>
    <p align="left">&nbsp; One thing to keep in mind.&nbsp; The file does not get written to
    disk or sent to the printer until after the CLOSE statement. [ This will help you when
    debugging.]&nbsp;&nbsp; If you cannot get a printer to print,&nbsp; write the data into a
    text file instead of the printer.&nbsp; Then open the file with notepad and see if it is
    what you expect.&nbsp; If the data looks good in notepad then you've probably got the
    printer name wrong, a printer problem, or a network access problem.</p>
    <hr size="4" color="#0000FF">
    <p><strong><a name="Example">Example</a> Program 1:</strong></p>
    <p>Let's write a program that prints a text file on the command line.</p>
    <p><font color="#FF0000" face="Courier">(defun C:pTxt()
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    ;define a program name</p>
    <p>&nbsp;&nbsp;&nbsp; <font color="#FF0000" face="Courier">&nbsp;(setq fname(getstring
    &quot;\n Enter a valid file name: &quot;))</font>&nbsp; ;get file name cheaply</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#FF0000" face="Courier">(if(setq f(open
    fname&quot; &quot;r&quot;))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;open the file in read mode<font color="#FF0000" face="Courier"> </font></p>
    <p><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (while (setq
    txtLine(read-line f))</font>&nbsp;&nbsp; ;while lines of text exist in file</p>
    <p><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (princ
    txtLine)&nbsp;&nbsp;&nbsp; </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    ;print the text string to the command line</p>
    <p><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;close the while statement</p>
    <p><font color="#FF0000" face="Courier">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (princ &quot;\n
    Error - Could not find file&quot;) </font>;print a message on the else statement</p>
    <p><font color="#FF0000" face="Courier">&nbsp;&nbsp;&nbsp;)
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font>&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp; &nbsp; ;close the if statement</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; note: the if statement can be
    a &quot; if then &quot; statement or a &quot; if then else&quot; statement</p>
    <p><font color="#FF0000" face="Courier">)
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font>;close the program</p>
    <p>&nbsp;</p>
    <hr size="4" color="#0000FF">
    <p align="center"><a href="autolispintr.html">AutoLisp Intermediate Tutorial</a></p>
    <p align="center"><a href="index.html">AutoLisp Tutorial Home</a></p>
    