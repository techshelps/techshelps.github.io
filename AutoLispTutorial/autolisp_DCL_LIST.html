<html>


<!-- Mirrored from www.jefferypsanders.com/autolisp_DCL_LIST.html by HTTrack Website Copier/3.x [XR&CO'2004], Thu, 23 Sep 2004 01:08:04 GMT -->
<head>
<meta name="description" content="AutoLisp Dialog Control Language">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="keywords" content="autolisp, DCL, dialog, control, language">
<title>The AutoLisp Ultimate Tutorial&nbsp; - DCL</title>
</head>

<body>

<p align="center"><font color="#000000"><big><big><big><strong>The
    AutoLisp Tutorial - DCL</strong></big></big></big></font><font face="Helvetica"></p>
    </font><p align="center"><font color="#000000"><big><big><strong>Dialog Control Language -
    List</strong></big></big></font></p>
    <hr size="4" color="#0000FF">
    <p><big><strong><big>List and how to handle them.</big></strong></big></p>
    <hr size="4" color="#0000FF">
    <p>&nbsp;&nbsp; List_box and popup_list handle a list of items in basically the same
    manner.&nbsp; You have to load your list into the list box and at some point you have to
    decide which item or items were selected.&nbsp; In the &quot;<a href="autolisp_DCL_SaveVar.html">Saving data from a dialog box</a>&quot; I cover how to
    find the selected items from a list_box and a popup_list. &nbsp; How do we get the list
    inside the list_box?&nbsp; That is what we need to cover in this section.&nbsp; So let's
    get started.</p>
    <p>&nbsp; If you looked at the previous sections you know the AutoLisp and DCL basic
    model.&nbsp; Let's get a copy of that in this section so we can look at it.&nbsp; I will
    replace the edit_box with a list_box control and add the code to handle the list. &nbsp;
    The list handling code is shown in the &quot;<a href="autolisp_DCL_SaveVar.html">Saving
    data from a dialog box</a>&quot; section of this tutorial.&nbsp; </p>
    <p>&nbsp;&nbsp; I will show the <font color="#FF0000">revised and new code in red</font>
    below.&nbsp; All of the <strong>black code is unchanged</strong> from the Basic Model and
    the instructions from the &quot;list_box multiple selection&quot; area of the &quot;<a href="autolisp_DCL_SaveVar.html">Saving data from a Dialog box</a>&quot; page.</p>
    <p><u><big><big><strong>The Basic Revised Model</strong></big></big></u></p>
    <p><strong><big>The DCL File:</big></strong></p>
    <p><font face="Courier New">EXAMPLE : dialog {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label = &quot;EXAMPLE.lsp&quot;;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font>\\ Puts a label on the
    dialog box<font face="Courier New"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : column {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : row {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
    boxed_column {<br>
    </font><font color="#FF0000" face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    : list_box {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp; \<strong>\ I replaced the edit_box with a
    list_box.</strong></font><font color="#FF0000" face="Courier New"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp; label =&quot;Choose Items&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    key = &quot;mylist&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp; height = 15;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp; width = 25;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp; multiple_select = true;&nbsp; </font><strong><font color="#FF0000">\\ Multiple
    selection is on</font></strong><font color="#FF0000" face="Courier New"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    fixed_width_font = true; </font><strong><font color="#FF0000">\\ Fixed Width Font is on</font></strong><font color="#FF0000" face="Courier New"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp; value = &quot;0&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    }</font><font face="Courier New"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : row {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : boxed_row
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    : button {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    key = &quot;accept&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    label = &quot; Okay &quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    is_default = true;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    }<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    : button {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    key = &quot;cancel&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    label = &quot; Cancel &quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    is_default = false;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    is_cancel = true;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    }<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>
    }</font></p>
    <p><big><strong>The AutoLisp File:</strong></big></p>
    <p><font face="Courier New">;;;--- EXAMPLE.lsp<br>
    <a href="file:////%20I%20replaced%20the%20saveVars%20routine%20with%20the%20one%20from%20the"></a></font></p>
    <p><font face="Courier New">;;;---</font> <font color="#FF0000">I replaced the saveVars
    routine with the one from the &quot;Save data from a list&quot; section of this tutorial. <br>
    </font><font face="Courier New" color="#000000">;;;&nbsp;</font><font color="#FF0000">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I also changed the things marked in red.</font></p>
    <p><font face="Courier New"><br>
    <small>(defun saveVars(/ readlist count item)</small></font></p>
    <p><font face="Courier New"><small><font color="#FF0000">;;;--- Notice the <strong>&quot;mylist&quot;</strong>
    is the action key associated with the DCL file and<br>
    &nbsp; ;;;&nbsp;&nbsp;&nbsp; the <strong>myList</strong> is the variable for the list
    built below.<br>
    </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
    &nbsp; ;;;--- Setup a list to hold the selected items<br>
    &nbsp; (setq retList(list))<br>
    <br>
    &nbsp; ;;;--- Save the list setting<br>
    &nbsp; (setq readlist(get_tile <strong><font color="#FF0000">&quot;mylist&quot;</font></strong>))
    <br>
    <br>
    &nbsp; ;;;--- Setup a variable to run through the list<br>
    &nbsp; (setq count 1)<br>
    <br>
    &nbsp; ;;;--- cycle through the list getting all of the selected items<br>
    &nbsp; (while (setq item (read readlist))<br>
    &nbsp;&nbsp;&nbsp; (setq retlist(append retList (list (nth item <strong><font color="#FF0000">myList</font></strong>))))<br>
    &nbsp;&nbsp;&nbsp; (while <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (and<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (/= &quot; &quot; (substr readlist count 1))<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (/= &quot;&quot; &nbsp; (substr readlist count
    1))<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (setq count (1+ count))<br>
    &nbsp;&nbsp;&nbsp; )<br>
    &nbsp;&nbsp;&nbsp; (setq readlist (substr readlist count))<br>
    &nbsp; )<br>
    )<strong><br>
    </strong></small><br>
    <br>
    <small>(defun C:EXAMPLE()</small></font></p>
    <p><font face="Courier New"><small><font color="#FF0000">&nbsp; ;;;--- I need to build a
    list of data<br>
    &nbsp; (setq <strong>myList</strong>(list &quot;1&quot; &quot;2&quot; &quot;3&quot;
    &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot;))<br>
    </font><br>
    &nbsp; ;;;--- Load the dcl file<br>
    &nbsp; (setq dcl_id (load_dialog &quot;EXAMPLE.dcl&quot;))<br>
    <br>
    &nbsp; ;;;--- Load the dialog definition if it is not already loaded<br>
    &nbsp; (if (not (new_dialog &quot;EXAMPLE&quot; dcl_id) ) (exit))<br>
    </small></font></p>
    <p><small><font color="#FF0000" face="Courier New">&nbsp; ;;;--- Here, I add the data to
    the list_box control<br>
    &nbsp; ;;;&nbsp;&nbsp;&nbsp; I do this after the new_dialog call and before the
    action_tiles.<br>
    </font><font face="Courier New"><font color="#FF0000">&nbsp; (start_list &quot;<strong>mylist</strong>&quot;
    3)<br>
    &nbsp; (mapcar 'add_list <strong>myList</strong>)<br>
    &nbsp; (end_list)</font> </font></small></p>
    <p><font face="Courier New" color="#FF0000"><small>;;;--- Notice the <strong>&quot;mylist&quot;</strong>
    is the action key associated with the DCL file and<br>
    &nbsp; ;;;&nbsp;&nbsp;&nbsp; the <strong>myList</strong> is the variable for the list
    built above.<br>
    </small></font></p>
    <p><font face="Courier New"><small>&nbsp; ;;;--- If an action event occurs, do this
    function<br>
    &nbsp; (action_tile &quot;cancel&quot; &quot;(setq ddiag 1)(done_dialog)&quot;)<br>
    &nbsp; (action_tile &quot;accept&quot; &quot;(setq ddiag 2)(saveVars)(done_dialog)&quot;) </small></font></p>
    <p>&nbsp;</p>
    <p><small><font face="Courier New"><br>
    &nbsp; ;;;--- If an action event occurs, do this function<br>
    &nbsp; (action_tile &quot;cancel&quot; &quot;(setq ddiag 1)(done_dialog)&quot;)<br>
    &nbsp; (action_tile &quot;accept&quot; &quot;(setq ddiag 2)(saveVars)(done_dialog)&quot;) <br>
    <br>
    &nbsp; ;;;--- Display the dialog box<br>
    &nbsp; (start_dialog)<br>
    <br>
    &nbsp; ;;;--- If the cancel button was pressed - display message<br>
    &nbsp; (if (= ddiag 1)<br>
    &nbsp;&nbsp;&nbsp; (princ &quot;\n \n ...EXAMPLE Cancelled. \n &quot;)<br>
    &nbsp; )<br>
    <br>
    &nbsp; ;;;--- If the &quot;Okay&quot; button was pressed<br>
    &nbsp; (if (= ddiag 2)<br>
    </font></small></p>
    <p><small><font color="#FF0000" face="Courier New">&nbsp;&nbsp;&nbsp; ;;;--- Here, I
    decide what to do with my data<br>
    &nbsp;&nbsp;&nbsp; ;;;&nbsp;&nbsp;&nbsp; I'm going to print each selected item on the
    command line.<br>
    </font><font face="Courier New"><font color="#FF0000">&nbsp; &nbsp; (foreach a retList<br>
    &nbsp; &nbsp;&nbsp;&nbsp; (princ &quot;\n&quot;)(princ a)<br>
    &nbsp;&nbsp;&nbsp; )</font> </font></small></p>
    <p><font face="Courier New"><small><br>
    &nbsp; )<br>
    <br>
    &nbsp; ;;;--- Suppress the last echo for a clean exit<br>
    &nbsp; (princ)<br>
    <br>
    )</small> </font></p>
    <hr size="4" color="#0000FF">
    <p>&nbsp; So, in order to display a list in a dialog box, you must first build the list.
    &nbsp; Then use the start_list, add_list, and end_list functions just after the new_dialog
    call and before the action_tiles.&nbsp; This is the same for both a list_box and a
    popup_list.&nbsp; That wasn't so bad.&nbsp; Was it?</p>
    <p align="center"><a href="autolisp_DCL.html">Back</a></p>
    <hr size="4" color="#0000FF">
    <p align="center"><a href="index.html">AutoLisp Tutorial Home</a></p>
</body>

</html>
