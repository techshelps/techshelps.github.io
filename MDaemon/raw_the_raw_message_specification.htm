<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
   <title>The RAW Message Specification</title>
   <meta name="generator" content="Help & Manual">
   <meta name="keywords" content="RAW,RAW Bypassing the Content Filter,RAW Message Specification,RAW Sample messages,RAW Special fields supported by">
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <link type="text/css" href="styles.css" rel="stylesheet">
   <script type="text/javascript" src="nsh.js"></script>
   
<!-- non-scrolling headers for CHM and browser-based help, local styles-->
<style TYPE="text/css" media="screen"> 
   <!-- 
   body {    
      margin:0; 
      padding:0; 
      overflow: auto; 
      background: #FFFFFF; 
   } 
   #idheader { 
      width:100%; 
      height:auto; 
      padding: 0; 
      margin: 0; 
   } 
    #idheaderbg  {
    background: #FFFFFF; 
   }

/* Set the padding in the OUTER div for MSIE and CHM to prevent the 
   width bug and the horizontal scrollbar bug from activating. */ 
  
  #idcontent {    
      width: 100%; 
      padding: 0px !important; 
      padding: 10px 15px 5px 10px; 
     } 

/* Set the padding in the INNER div for all other browsers. */ 
   
  #innerdiv {    
      padding: 10px 5px 5px 10px !important;  
      padding: 0px; 
     } 
   
/* These styles are for the header, the print link 
   and the navigation links. Change .topichead padding
   to 5px 5px 0px 5px if you use the Print Topic link.  */

    .topichead {
       padding: 5px;
    }
    
    .navlinks {
      font-size: 10pt;
    }
    .navlinks a {
      text-decoration: none;
      color: blue;
    }
    .navlinks a:visited {
      text-decoration: none;
      color: blue;
    }
    .navlinks a:hover {
      text-decoration: underline;
      color: blue;
    }
    
   html.nonscroll { 
      overflow:hidden; 
    } 
   body.nonscroll {    
      overflow:hidden; 
      height:100%; 
    } 
   div.nonscroll { 
      overflow:auto; 
    } 
   -->
</style>
   
<style TYPE="text/css" MEDIA="print">
<!--
/* Hide navigation links and add space between header
     and text in the printed version. Not valid for eBooks. */
#idnav { display:none;	 }
.topichead { padding: 5px 5px 20px 5px; }
-->
</style>   

<!-- Style classes for hyperlinks, and float style for paragraph icon drop-ins -->
<style type="text/css">
  img#icon-float-left { float:left; padding: 0px 6px 0px 0px; }

  a {color: #a00; text-decoration: none}
  a:visited {color: #a00}
  a:hover {color: #000; text-decoration: underline}
  a.weblink {color: #a00; text-decoration: underline}
  a.weblink:visited {color: #a00}
  a.weblink:hover {color: #000; text-decoration: underline}
  a.popuplink {color: #a00; text-decoration: none}
  a.popuplink:visited {color: #a00}
  a.popuplink:hover {color: #000; font-weight: bold; text-decoration: underline}
  a.filelink {color: #a00; text-decoration: underline}
  a.filelink:visited {color: #a00}
  a.filelink:hover {color: #000; text-decoration: underline}
  a.inline-toggle {color: #a00; text-decoration: none}
  a.inline-toggle:visited {color: #a00}
  a.inline-toggle:hover {color: #000; text-decoration: underline}

  .fsmall {
  font-size: 10px;
	font-family: Verdana, Helvetica, sans-serif;
	text-align: center;
	margin: 10px 0px 0px 0px;
	}

  .crumbs {font-size: 8pt; margin-bottom: 3px; margin-top: 0px; color: #000}
  .crumbs a {text-decoration: none; color: #a00}
  .crumbs a:visited {text-decoration: none; color: #a00}
  .crumbs a:hover {color: #000; text-decoration: underline;}
  .expander {text-align: right; padding: 0; width: 100%; font-family: Verdana, Helvetica, sans-serif; font-size:9px; font-weight: bold; border-bottom: 2px; border-bottom-style: solid; border-bottom-color: grey; margin-bottom: 1px;}
</style>
 

<script type="text/javascript" src="helpman_topicinit.js"></script>
</head>
<body>
<!--ZOOMSTOP-->

<div id="idheader">
<div id="idheaderbg">
<table width="100%" border="0" cellspacing="0" cellpadding="0" 
       style="margin: 0px; color: #000; background: #fff url( gradient_fade_64px.gif) repeat-x top !important;">

  <tr valign="bottom">
    <td align="left" valign="bottom" class="topichead">
   <p class="crumbs" id="idnav"><b>Navigation:</b>&nbsp;
   
   Additional MDaemon Features &gt; The RAW Message Specification&nbsp;&gt;</p>
   <p class="p_Heading1"><span class="f_Heading1">The RAW Message Specification</span></p>

    </td>
    <td align="right" width="120" valign="middle" class="topichead" id="idnav">
    <a href="javascript: print();"
    		onmouseover="document.images.prntr.src='printer_25_h.png'" 
        onmouseout="document.images.prntr.src='printer_25_n.png'"
        ><img name="prntr" border="0" alt="Print this Topic" title="Print this Topic" src="printer_25_n.png"
        ></a>
     <a href="remote_server_control__general_email_controls.htm"
        onmouseover="document.images.prev.src='nav_left_red_32_h.png'" 
        onmouseout="document.images.prev.src='nav_left_red_32_n.png'"
        ><img name=prev src="nav_left_red_32_n.png" border=0 alt="Previous page" title="Previous page"
        ></a><a href="introduction.htm"
        onmouseover="document.images.main.src='nav_up_blue_24_h.png'" 
        onmouseout="document.images.main.src='nav_up_blue_24_n.png'"><img name=main src="nav_up_blue_24_n.png" border=0 alt="Return to chapter overview" title="Return to chapter overview"
        ></a><a href="raw_the_raw_message_specification.htm#bypassingthecontentfilter"
        onmouseover="document.images.next.src='nav_right_red_32_h.png'" 
        onmouseout="document.images.next.src='nav_right_red_32_n.png'"><img name=next src="nav_right_red_32_n.png" border=0 alt="Next page" title="Next page"
        ></a>
    </td>
  </tr>
  <tr><td colspan="2" style="height: 3px; background: url(header_bg_shadow.gif)"></td></tr>
</table>
</div>

<!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
<!--   -->

</div>  



<div id="idcontent"><div id="innerdiv"> 
<!--ZOOMRESTART-->
<p class="p_BodyText"><span class="f_BodyText">MDaemon has inherent support for a simple and powerful mail message format known as RAW mail. The purpose of the RAW mail system is to provide a simple and standard format that software systems such as MDaemon can use to create much more complex RFC-2822 compliant message. Use of mail transport agents such as RAW allow client software to offload to the server all the complicated work of maintaining adherence to Internet mail standards.</span></p>
<p class="p_BodyText"><span class="f_BodyText">RAW mail consists of a series of required and optional text headers followed by a message body. Most headers consist of a token followed by a value enclosed in &lt;&gt; symbols. Each header line ends with a &lt;CRLF&gt; combination of characters. Headers are separated from the message body by a blank line and are case insensitive, and the </span><span style="font-family: 'Arial'; font-style: italic; color: #010100;">from</span><span class="f_BodyText"> and</span><span style="font-family: 'Arial'; font-style: italic; color: #010100;"> to</span><span class="f_BodyText"> headers are the only ones that are required. All text, headers and body, are plain ASCII text and must be contained in a file that ends with the extension, &quot;</span><span class="f_PlainText">.raw</span><span class="f_BodyText">&quot; (for example &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">my-message.raw</span><span class="f_BodyText">&quot;). Then, to queue the message for delivery, place the </span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">*.raw</span><span class="f_BodyText"> file in MDaemon</span><span style="font-family: 'Times New Roman'; color: #010100;">'</span><span class="f_BodyText">s RAW queue (typically located at, &quot;</span><span class="f_PlainText">C:\MDaemon\Queues\Raw</span><span class="f_BodyText">&quot;).</span></p>
<p class="p_Heading3"><a name="bypassingthecontentfilter"></a><span class="f_Heading2">Bypassing the Content Filter</span></p>
<p class="p_BodyText"><span class="f_BodyText">By default, RAW messages are passed through the Content Filter like normal messages. If you want a given RAW message to bypass the filter then start the name of the file with &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">p</span><span class="f_BodyText">&quot; or &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">P</span><span class="f_BodyText">&quot;. For example, &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">P_my-message.raw</span><span class="f_BodyText">&quot; would bypass the Content Filter but &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">my-message.raw</span><span class="f_BodyText">&quot; would be processed through it normally.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 49px 14px 48px;"><table cellspacing="0" cellpadding="5" bgcolor="#ffffe6" border="1" style="background-color: #ffffe6; border: solid 1px #000000; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px; height:50px; border: none"><p class="p_NoFormat"><img src="lightbulb_on_50_yback.gif" width="50" height="50" border="0" alt=""></p>
</td>
<td valign="top" style="border: none"><p class="p_Notes"><span class="f_Notes">Bypassing the Content Filter will prevent messages from being DK or DKIM signed. If you have configured MDaemon to sign all messages then this could potentially cause some delivery problems. If you want MDaemon to sign RAW messages configured to bypass the Content Filter then you can do so by using the </span><span style="font-size: 15px; font-family: 'Courier New';">x-flag=sign</span><span class="f_Notes"> option outlined below.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Heading2"><a name="rawheaders"></a><span class="f_Heading2">RAW Headers</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 8px 0px 3px 0px;"><table cellspacing="3" cellpadding="0" border="0" style="border: none; border-spacing:3px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">From &lt;mailbox@example.com&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">This field contains the email address of the sender.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">To &lt;mailbox@example.com [, mailbox@example.com]</span><span style="font-family: 'Arial'; font-style: italic; color: #010100;">&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">This field contains the email address(es) of the recipient(s). &nbsp;Multiple recipients can be specified by separating each one with a comma character.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">ReplyTo &lt;mailbox@example.com&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">An optional email address where replies to this message will be directed.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">CC &lt;maibox@example.com[, mailbox@example.com]&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">An optional list of carbon copy recipients of this message. &nbsp;Multiple carbon recipients can be specified by separating each one with a comma character.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">Subject &lt;text&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">An optional subject for the message.</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="326" style="width:326px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 10px;"><span class="f_ControlIndent">Header &lt;Header: Value&gt;</span></p>
</td>
<td valign="top" width="282" style="width:282px;"><p class="p_ControlIndent" style="margin: 8px 0px 3px 0px;"><span class="f_ControlIndent">Allows you to explicitly place Header/Value combinations into the message.</span><span style="font-size: 12px; font-family: 'Times New Roman'; color: #010100;"> </span><span class="f_ControlIndent">This makes it possible for you to place custom or other non-standard headers into your *.raw messages.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Heading2"><a name="special-fields-supported-by-raw"></a><span class="f_Heading2">Special Fields Supported by RAW</span></p>
<p class="p_ControlHeading"><span class="f_ControlHeading">File attachment and encoding</span></p>
<p class="p_ControlIndent2" style="margin: 6px 5px 14px 58px;"><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">x-flag=attach &lt;filepath, method&gt; [-x]</span></p>
<p class="p_ControlIndent2"><span class="f_ControlIndent">Example: </span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">x-flag=attach &lt;c:\utils\pkzip.exe, MIME&gt; -x</span></p>
<p class="p_ControlIndent2"><span class="f_ControlIndent2">This X-FLAG specifies the value &quot;ATTACH&quot; along with two parameters within the &lt;&gt; characters. The first parameter is a complete path to the file which should be attached to the message. The second parameter which is separated from the first by a comma character and specifies the method of encoding that is to be used when attaching the message. MDaemon supports two values for this parameter. The method of MIME instructs the server to use the Internet standard Base64 method of message encoding. The method of ASCII instructs the server to simply import the file into the message. An optional -X parameter at the end of the string instructs the server to remove the file from disk once it has been attached.</span></p>
<p class="p_ControlHeading"><span class="f_ControlHeading">Delivery Status Notification</span></p>
<p class="p_ControlIndent2" style="margin: 6px 5px 14px 58px;"><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">x-flag=confirm_delivery</span></p>
<p class="p_ControlIndent2"><span class="f_ControlIndent2">When converting a RAW message which contains this flag into RFC-2822 mail, the string is transformed to the &quot;Return-Receipt-To: &lt;sender@example.com&gt;&quot; construct.</span></p>
<p class="p_ControlHeading"><span class="f_ControlHeading">Placing Specific Header/Value Combinations into the RFC-2822 Message</span></p>
<p class="p_ControlIndent2" style="margin: 6px 5px 14px 58px;"><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">header &lt;header: value&gt;</span></p>
<p class="p_ControlIndent2"><span class="f_ControlIndent2">If you wish to place a specific header/value combination into the RFC-2822 message that will be generated from a RAW file, you will need to use the HEADER macro listed in the RAW Headers section above. For example, if you want the header &quot;Delivered-By: mail-machine@example.com&quot; to be placed into the RFC-2822 message you would place this: &quot;header &lt;Delivered-By: mail-machine@example.com&gt;&quot; in the RAW message. Note that the &quot;header&quot; macro requires both the field and value. You can place as many &quot;header&quot; macros as you need into a RAW message.</span></p>
<p class="p_ControlHeading"><span class="f_ControlHeading">DK/DKIM Signing RAW Messages</span></p>
<p class="p_ControlIndent2" style="margin: 6px 5px 14px 58px;"><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">x-flag=sign</span></p>
<p class="p_ControlIndent2"><span class="f_ControlIndent2">Including this special command in a </span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">*.raw</span><span class="f_ControlIndent2"> file will cause the RAW message to be DK/DKIM signed. This should only be used in RAW messages that you have configured to bypass the Content Filter (by starting their filenames with &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">p</span><span class="f_ControlIndent2">&quot; or &quot;</span><span style="font-size: 15px; font-family: 'Courier New'; color: #010100;">P</span><span class="f_ControlIndent2">&quot;). You should not use this command in normal RAW Messages that are processed through the filter. Those messages will be signed normally.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 49px 14px 48px;"><table cellspacing="0" cellpadding="5" bgcolor="#ffffe6" border="1" style="background-color: #ffffe6; border: solid 1px #000000; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px; height:50px; border: none"><p class="p_NoFormat"><img src="lightbulb_on_50_yback.gif" width="50" height="50" border="0" alt=""></p>
</td>
<td valign="top" style="border: none"><p class="p_Notes"><span class="f_Notes">All RAW messages that are generated by the Content Filter will use the </span><span style="font-size: 15px; font-family: 'Courier New';">x-flag=sign</span><span class="f_Notes"> command automatically.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Heading2"><a name="sample-raw-mail-messages"></a><span class="f_Heading2">Sample RAW mail messages</span></p>
<p class="p_ControlHeading" style="margin: 5px 5px 6px 34px;"><span class="f_ControlHeading">Sample 1:</span></p>
<p class="p_Code2"><span class="f_Code2">from &lt;mdaemon@altn.com&gt;</span></p>
<p class="p_Code2"><span class="f_Code2">to &lt;user01@example.com&gt;</span></p>
<p class="p_Code2"><span class="f_Code2">&nbsp;</span></p>
<p class="p_Code2-LastItem"><span class="f_Code2-LastItem">Hello John!</span></p>
<p class="p_ControlHeading" style="margin: 5px 5px 6px 34px;"><span class="f_ControlHeading">Sample 2:</span></p>
<p class="p_Code2"><span class="f_Code2">from &lt;user01@example.com&gt;</span></p>
<p class="p_Code2"><span class="f_Code2">to &lt;user09@example.net&gt;</span></p>
<p class="p_Code2"><span class="f_Code2">subject &lt;Requested Files&gt;</span></p>
<p class="p_Code2"><span class="f_Code2">X-FLAG=CONFIRM_DELIVERY</span></p>
<p class="p_Code2-LastItem"><span class="f_Code2-LastItem">X-FLAG=ATTACH &lt;c:\docs\files\data01.zip, MIME&gt; -X</span></p>
<p class="p_Code2-LastItem"><span class="f_Code2-LastItem">Here are all those files you asked for.</span></p>
<p class="p_ControlIndent"><span class="f_ControlIndent">&nbsp;</span></p>

<!--ZOOMSTOP-->

</div></div>
<script type="text/javascript"> 
<!-- 
var lastSlashPos = document.URL.lastIndexOf("/") >
document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("/") :
document.URL.lastIndexOf("\\");
if( document.URL.substring( lastSlashPos + 1, lastSlashPos + 4
).toLowerCase() != "~hh" )
{
    nsrInit();
}
--> 
</script> 
</body>
</html>
